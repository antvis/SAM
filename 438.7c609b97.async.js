!(function(){var Ny=Object.defineProperty;var cg=Object.getOwnPropertySymbols;var By=Object.prototype.hasOwnProperty,Zy=Object.prototype.propertyIsEnumerable;var fg=(Ie,S,y)=>S in Ie?Ny(Ie,S,{enumerable:!0,configurable:!0,writable:!0,value:y}):Ie[S]=y,hg=(Ie,S)=>{for(var y in S||(S={}))By.call(S,y)&&fg(Ie,y,S[y]);if(cg)for(var y of cg(S))Zy.call(S,y)&&fg(Ie,y,S[y]);return Ie};var Ga=(Ie,S,y)=>new Promise((E,p)=>{var M=x=>{try{g(y.next(x))}catch(v){p(v)}},d=x=>{try{g(y.throw(x))}catch(v){p(v)}},g=x=>x.done?E(x.value):Promise.resolve(x.value).then(M,d);g((y=y.apply(Ie,S)).next())});(self.webpackChunksam_js=self.webpackChunksam_js||[]).push([[438],{16397:function(Ie,S,y){"use strict";y.d(S,{R_:function(){return F}});var E=y(86500),p=y(1350),M=2,d=.16,g=.05,x=.05,v=.15,u=5,t=4,e=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function o(Se){var Fe=Se.r,nt=Se.g,lt=Se.b,Gt=(0,E.py)(Fe,nt,lt);return{h:Gt.h*360,s:Gt.s,v:Gt.v}}function c(Se){var Fe=Se.r,nt=Se.g,lt=Se.b;return"#".concat((0,E.vq)(Fe,nt,lt,!1))}function b(Se,Fe,nt){var lt=nt/100,Gt={r:(Fe.r-Se.r)*lt+Se.r,g:(Fe.g-Se.g)*lt+Se.g,b:(Fe.b-Se.b)*lt+Se.b};return Gt}function A(Se,Fe,nt){var lt;return Math.round(Se.h)>=60&&Math.round(Se.h)<=240?lt=nt?Math.round(Se.h)-M*Fe:Math.round(Se.h)+M*Fe:lt=nt?Math.round(Se.h)+M*Fe:Math.round(Se.h)-M*Fe,lt<0?lt+=360:lt>=360&&(lt-=360),lt}function w(Se,Fe,nt){if(Se.h===0&&Se.s===0)return Se.s;var lt;return nt?lt=Se.s-d*Fe:Fe===t?lt=Se.s+d:lt=Se.s+g*Fe,lt>1&&(lt=1),nt&&Fe===u&&lt>.1&&(lt=.1),lt<.06&&(lt=.06),Number(lt.toFixed(2))}function D(Se,Fe,nt){var lt;return nt?lt=Se.v+x*Fe:lt=Se.v-v*Fe,lt>1&&(lt=1),Number(lt.toFixed(2))}function F(Se){for(var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=[],lt=(0,p.uA)(Se),Gt=u;Gt>0;Gt-=1){var pn=o(lt),$n=c((0,p.uA)({h:A(pn,Gt,!0),s:w(pn,Gt,!0),v:D(pn,Gt,!0)}));nt.push($n)}nt.push(c(lt));for(var Ln=1;Ln<=t;Ln+=1){var st=o(lt),xt=c((0,p.uA)({h:A(st,Ln),s:w(st,Ln),v:D(st,Ln)}));nt.push(xt)}return Fe.theme==="dark"?e.map(function(tn){var Un=tn.index,We=tn.opacity,Yt=c(b((0,p.uA)(Fe.backgroundColor||"#141414"),(0,p.uA)(nt[Un]),We*100));return Yt}):nt}var Z={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},L={},W={};Object.keys(Z).forEach(function(Se){L[Se]=F(Z[Se]),L[Se].primary=L[Se][5],W[Se]=F(Z[Se],{theme:"dark",backgroundColor:"#141414"}),W[Se].primary=W[Se][5]});var k=L.red,de=L.volcano,H=L.gold,ue=L.orange,ve=L.yellow,ke=L.lime,Ae=L.green,be=L.cyan,G=L.blue,ie=L.geekblue,V=L.purple,ae=L.magenta,K=L.grey,he=L.grey},27431:function(Ie,S,y){"use strict";y.d(S,{E4:function(){return jt},jG:function(){return $t},fp:function(){return Un},xy:function(){return Be}});var E=y(1413),p=y(74902);function M(vt){for(var zt=0,Kt,fn=0,zn=vt.length;zn>=4;++fn,zn-=4)Kt=vt.charCodeAt(fn)&255|(vt.charCodeAt(++fn)&255)<<8|(vt.charCodeAt(++fn)&255)<<16|(vt.charCodeAt(++fn)&255)<<24,Kt=(Kt&65535)*1540483477+((Kt>>>16)*59797<<16),Kt^=Kt>>>24,zt=(Kt&65535)*1540483477+((Kt>>>16)*59797<<16)^(zt&65535)*1540483477+((zt>>>16)*59797<<16);switch(zn){case 3:zt^=(vt.charCodeAt(fn+2)&255)<<16;case 2:zt^=(vt.charCodeAt(fn+1)&255)<<8;case 1:zt^=vt.charCodeAt(fn)&255,zt=(zt&65535)*1540483477+((zt>>>16)*59797<<16)}return zt^=zt>>>13,zt=(zt&65535)*1540483477+((zt>>>16)*59797<<16),((zt^zt>>>15)>>>0).toString(36)}var d=M,g=y(67294),x=y(56982),v=y(91881),u=y(15671),t=y(43144),e=y(4942),o=function(){function vt(zt){(0,u.Z)(this,vt),(0,e.Z)(this,"instanceId",void 0),(0,e.Z)(this,"cache",new Map),this.instanceId=zt}return(0,t.Z)(vt,[{key:"get",value:function(Kt){return this.cache.get(Kt.join("%"))||null}},{key:"update",value:function(Kt,fn){var zn=Kt.join("%"),wr=this.cache.get(zn),Er=fn(wr);Er===null?this.cache.delete(zn):this.cache.set(zn,Er)}}]),vt}(),c=o,b=null,A="data-token-hash",w="data-css-hash",D="data-dev-cache-path",F="__cssinjs_instance__";function Z(){var vt=Math.random().toString(12).slice(2);if(typeof document!="undefined"&&document.head&&document.body){var zt=document.body.querySelectorAll("style[".concat(w,"]"))||[],Kt=document.head.firstChild;Array.from(zt).forEach(function(zn){zn[F]=zn[F]||vt,zn[F]===vt&&document.head.insertBefore(zn,Kt)});var fn={};Array.from(document.querySelectorAll("style[".concat(w,"]"))).forEach(function(zn){var wr=zn.getAttribute(w);if(fn[wr]){if(zn[F]===vt){var Er;(Er=zn.parentNode)===null||Er===void 0||Er.removeChild(zn)}}else fn[wr]=!0})}return new c(vt)}var L=g.createContext({hashPriority:"low",cache:Z(),defaultCache:!0}),W=function(zt){var Kt=zt.children,fn=_objectWithoutProperties(zt,b),zn=React.useContext(L),wr=useMemo(function(){var Er=_objectSpread({},zn);Object.keys(fn).forEach(function(N){var me=fn[N];fn[N]!==void 0&&(Er[N]=me)});var _=fn.cache;return Er.cache=Er.cache||Z(),Er.defaultCache=!_&&zn.defaultCache,Er},[zn,fn],function(Er,_){return!isEqual(Er[0],_[0],!0)||!isEqual(Er[1],_[1],!0)});return React.createElement(L.Provider,{value:wr},Kt)},k=L,de=y(71002),H=y(98924),ue=y(44958);function ve(vt){var zt="";return Object.keys(vt).forEach(function(Kt){var fn=vt[Kt];zt+=Kt,fn&&(0,de.Z)(fn)==="object"?zt+=ve(fn):zt+=fn}),zt}function ke(vt,zt){return d("".concat(zt,"_").concat(ve(vt)))}var Ae="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),be="903px";function G(vt,zt){if((0,H.Z)()){var Kt;(0,ue.hq)(vt,Ae);var fn=document.createElement("div");fn.style.position="fixed",fn.style.left="0",fn.style.top="0",zt==null||zt(fn),document.body.appendChild(fn);var zn=getComputedStyle(fn).width===be;return(Kt=fn.parentNode)===null||Kt===void 0||Kt.removeChild(fn),(0,ue.jL)(Ae),zn}return!1}var ie=void 0;function V(){return ie===void 0&&(ie=G("@layer ".concat(Ae," { .").concat(Ae," { width: ").concat(be,"!important; } }"),function(vt){vt.className=Ae})),ie}var ae=y(97685);function K(){return!1}var he=!1;function Se(){return he}var Fe=K;if(!1)var nt,lt;function Gt(vt,zt,Kt,fn){var zn=g.useContext(k),wr=zn.cache,Er=[vt].concat((0,p.Z)(zt)),_=Fe();return g.useMemo(function(){wr.update(Er,function(N){var me=N||[],q=(0,ae.Z)(me,2),Ue=q[0],ct=Ue===void 0?0:Ue,Lt=q[1],hn=Lt,on=hn||Kt();return[ct+1,on]})},[Er.join("_")]),g.useEffect(function(){return function(){wr.update(Er,function(N){var me=N||[],q=(0,ae.Z)(me,2),Ue=q[0],ct=Ue===void 0?0:Ue,Lt=q[1],hn=ct-1;return hn===0?(fn==null||fn(Lt,!1),null):[ct-1,Lt]})}},Er),wr.get(Er)[1]}var pn={},$n="css",Ln=new Map;function st(vt){Ln.set(vt,(Ln.get(vt)||0)+1)}function xt(vt,zt){if(typeof document!="undefined"){var Kt=document.querySelectorAll("style[".concat(A,'="').concat(vt,'"]'));Kt.forEach(function(fn){if(fn[F]===zt){var zn;(zn=fn.parentNode)===null||zn===void 0||zn.removeChild(fn)}})}}function tn(vt,zt){Ln.set(vt,(Ln.get(vt)||0)-1);var Kt=Array.from(Ln.keys()),fn=Kt.filter(function(zn){var wr=Ln.get(zn)||0;return wr<=0});fn.length<Kt.length&&fn.forEach(function(zn){xt(zn,zt),Ln.delete(zn)})}function Un(vt,zt){var Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},fn=(0,g.useContext)(k),zn=fn.cache.instanceId,wr=Kt.salt,Er=wr===void 0?"":wr,_=Kt.override,N=_===void 0?pn:_,me=Kt.formatToken,q=g.useMemo(function(){return Object.assign.apply(Object,[{}].concat((0,p.Z)(zt)))},[zt]),Ue=g.useMemo(function(){return ve(q)},[q]),ct=g.useMemo(function(){return ve(N)},[N]),Lt=Gt("token",[Er,vt.id,Ue,ct],function(){var hn=vt.getDerivativeToken(q),on=(0,E.Z)((0,E.Z)({},hn),N);me&&(on=me(on));var nr=ke(on,Er);on._tokenKey=nr,st(nr);var sr="".concat($n,"-").concat(d(nr));return on._hashId=sr,[on,sr]},function(hn){tn(hn[0]._tokenKey,zn)});return Lt}var We=y(87462),Yt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ze=Yt,Pe="-ms-",ze="-moz-",ht="-webkit-",P="comm",ne="rule",_e="decl",oe="@page",ce="@media",ye="@import",Y="@charset",Ne="@viewport",Qe="@supports",mt="@document",Ve="@namespace",rt="@keyframes",yt="@font-face",Tt="@counter-style",Ht="@font-feature-values",en="@layer",wt=Math.abs,Mn=String.fromCharCode,kn=Object.assign;function jn(vt,zt){return $r(vt,0)^45?(((zt<<2^$r(vt,0))<<2^$r(vt,1))<<2^$r(vt,2))<<2^$r(vt,3):0}function mn(vt){return vt.trim()}function cr(vt,zt){return(vt=zt.exec(vt))?vt[0]:vt}function Cr(vt,zt,Kt){return vt.replace(zt,Kt)}function mi(vt,zt){return vt.indexOf(zt)}function $r(vt,zt){return vt.charCodeAt(zt)|0}function Sr(vt,zt,Kt){return vt.slice(zt,Kt)}function dr(vt){return vt.length}function Pr(vt){return vt.length}function Hr(vt,zt){return zt.push(vt),vt}function Xi(vt,zt){return vt.map(zt).join("")}function Kn(vt,zt){for(var Kt="",fn=Pr(vt),zn=0;zn<fn;zn++)Kt+=zt(vt[zn],zn,vt,zt)||"";return Kt}function Gn(vt,zt,Kt,fn){switch(vt.type){case en:if(vt.children.length)break;case ye:case _e:return vt.return=vt.return||vt.value;case P:return"";case rt:return vt.return=vt.value+"{"+Kn(vt.children,fn)+"}";case ne:vt.value=vt.props.join(",")}return dr(Kt=Kn(vt.children,fn))?vt.return=vt.value+"{"+Kt+"}":""}var pt=1,Ha=1,Sa=0,Qa=0,ma=0,Ei="";function Ia(vt,zt,Kt,fn,zn,wr,Er){return{value:vt,root:zt,parent:Kt,type:fn,props:zn,children:wr,line:pt,column:Ha,length:Er,return:""}}function si(vt,zt){return assign(Ia("",null,null,"",null,null,0),vt,{length:-vt.length},zt)}function it(){return ma}function Qn(){return ma=Qa>0?$r(Ei,--Qa):0,Ha--,ma===10&&(Ha=1,pt--),ma}function pe(){return ma=Qa<Sa?$r(Ei,Qa++):0,Ha++,ma===10&&(Ha=1,pt++),ma}function at(){return $r(Ei,Qa)}function Dt(){return Qa}function vn(vt,zt){return Sr(Ei,vt,zt)}function bn(vt){switch(vt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Pn(vt){return pt=Ha=1,Sa=dr(Ei=vt),Qa=0,[]}function ar(vt){return Ei="",vt}function Zr(vt){return mn(vn(Qa-1,fa(vt===91?vt+2:vt===40?vt+1:vt)))}function Xr(vt){return ar(qr(Pn(vt)))}function ui(vt){for(;(ma=at())&&ma<33;)pe();return bn(vt)>2||bn(ma)>3?"":" "}function qr(vt){for(;pe();)switch(bn(ma)){case 0:append(Li(Qa-1),vt);break;case 2:append(Zr(ma),vt);break;default:append(from(ma),vt)}return vt}function Ti(vt,zt){for(;--zt&&pe()&&!(ma<48||ma>102||ma>57&&ma<65||ma>70&&ma<97););return vn(vt,Dt()+(zt<6&&at()==32&&pe()==32))}function fa(vt){for(;pe();)switch(ma){case vt:return Qa;case 34:case 39:vt!==34&&vt!==39&&fa(ma);break;case 40:vt===41&&fa(vt);break;case 92:pe();break}return Qa}function Bn(vt,zt){for(;pe()&&vt+ma!==47+10;)if(vt+ma===42+42&&at()===47)break;return"/*"+vn(zt,Qa-1)+"*"+Mn(vt===47?vt:pe())}function Li(vt){for(;!bn(at());)pe();return vn(vt,Qa)}function Ji(vt){return ar(Na("",null,null,null,[""],vt=Pn(vt),0,[0],vt))}function Na(vt,zt,Kt,fn,zn,wr,Er,_,N){for(var me=0,q=0,Ue=Er,ct=0,Lt=0,hn=0,on=1,nr=1,sr=1,ti=0,Fi="",Ci=zn,ta=wr,Ni=fn,Oi=Fi;nr;)switch(hn=ti,ti=pe()){case 40:if(hn!=108&&$r(Oi,Ue-1)==58){mi(Oi+=Cr(Zr(ti),"&","&\f"),"&\f")!=-1&&(sr=-1);break}case 34:case 39:case 91:Oi+=Zr(ti);break;case 9:case 10:case 13:case 32:Oi+=ui(hn);break;case 92:Oi+=Ti(Dt()-1,7);continue;case 47:switch(at()){case 42:case 47:Hr(ha(Bn(pe(),Dt()),zt,Kt),N);break;default:Oi+="/"}break;case 123*on:_[me++]=dr(Oi)*sr;case 125*on:case 59:case 0:switch(ti){case 0:case 125:nr=0;case 59+q:sr==-1&&(Oi=Cr(Oi,/\f/g,"")),Lt>0&&dr(Oi)-Ue&&Hr(Lt>32?Ta(Oi+";",fn,Kt,Ue-1):Ta(Cr(Oi," ","")+";",fn,Kt,Ue-2),N);break;case 59:Oi+=";";default:if(Hr(Ni=ea(Oi,zt,Kt,me,q,zn,_,Fi,Ci=[],ta=[],Ue),wr),ti===123)if(q===0)Na(Oi,zt,Ni,Ni,Ci,wr,Ue,_,ta);else switch(ct===99&&$r(Oi,3)===110?100:ct){case 100:case 108:case 109:case 115:Na(vt,Ni,Ni,fn&&Hr(ea(vt,Ni,Ni,0,0,zn,_,Fi,zn,Ci=[],Ue),ta),zn,ta,Ue,_,fn?Ci:ta);break;default:Na(Oi,Ni,Ni,Ni,[""],ta,0,_,ta)}}me=q=Lt=0,on=sr=1,Fi=Oi="",Ue=Er;break;case 58:Ue=1+dr(Oi),Lt=hn;default:if(on<1){if(ti==123)--on;else if(ti==125&&on++==0&&Qn()==125)continue}switch(Oi+=Mn(ti),ti*on){case 38:sr=q>0?1:(Oi+="\f",-1);break;case 44:_[me++]=(dr(Oi)-1)*sr,sr=1;break;case 64:at()===45&&(Oi+=Zr(pe())),ct=at(),q=Ue=dr(Fi=Oi+=Li(Dt())),ti++;break;case 45:hn===45&&dr(Oi)==2&&(on=0)}}return wr}function ea(vt,zt,Kt,fn,zn,wr,Er,_,N,me,q){for(var Ue=zn-1,ct=zn===0?wr:[""],Lt=Pr(ct),hn=0,on=0,nr=0;hn<fn;++hn)for(var sr=0,ti=Sr(vt,Ue+1,Ue=wt(on=Er[hn])),Fi=vt;sr<Lt;++sr)(Fi=mn(on>0?ct[sr]+" "+ti:Cr(ti,/&\f/g,ct[sr])))&&(N[nr++]=Fi);return Ia(vt,zt,Kt,zn===0?ne:_,N,me,q)}function ha(vt,zt,Kt){return Ia(vt,zt,Kt,P,Mn(it()),Sr(vt,2,-2),0)}function Ta(vt,zt,Kt,fn){return Ia(vt,zt,Kt,_e,Sr(vt,0,fn),Sr(vt,fn+1,-1),fn)}var Aa=y(80334);function Wi(vt,zt){var Kt=zt.path,fn=zt.parentSelectors;devWarning(!1,"[Ant Design CSS-in-JS] ".concat(Kt?"Error in ".concat(Kt,": "):"").concat(vt).concat(fn.length?" Selector: ".concat(fn.join(" | ")):""))}var go=function(zt,Kt,fn){if(zt==="content"){var zn=/(attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,wr=["normal","none","initial","inherit","unset"];(typeof Kt!="string"||wr.indexOf(Kt)===-1&&!zn.test(Kt)&&(Kt.charAt(0)!==Kt.charAt(Kt.length-1)||Kt.charAt(0)!=='"'&&Kt.charAt(0)!=="'"))&&lintWarning("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\"".concat(Kt,"\"'`."),fn)}},Ja=null,$o=function(zt,Kt,fn){zt==="animation"&&fn.hashId&&Kt!=="none"&&lintWarning("You seem to be using hashed animation '".concat(Kt,"', in which case 'animationName' with Keyframe as value is recommended."),fn)},Ua=null;function Wa(vt){var zt,Kt=((zt=vt.match(/:not\(([^)]*)\)/))===null||zt===void 0?void 0:zt[1])||"",fn=Kt.split(/(\[[^[]*])|(?=[.#])/).filter(function(zn){return zn});return fn.length>1}function mo(vt){return vt.parentSelectors.reduce(function(zt,Kt){return zt?Kt.includes("&")?Kt.replace(/&/g,zt):"".concat(zt," ").concat(Kt):Kt},"")}var fo=function(zt,Kt,fn){var zn=mo(fn),wr=zn.match(/:not\([^)]*\)/g)||[];wr.length>0&&wr.some(Wa)&&lintWarning("Concat ':not' selector not support in legacy browsers.",fn)},Ro=null,te=function(zt,Kt,fn){switch(zt){case"marginLeft":case"marginRight":case"paddingLeft":case"paddingRight":case"left":case"right":case"borderLeft":case"borderLeftWidth":case"borderLeftStyle":case"borderLeftColor":case"borderRight":case"borderRightWidth":case"borderRightStyle":case"borderRightColor":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":lintWarning("You seem to be using non-logical property '".concat(zt,"' which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),fn);return;case"margin":case"padding":case"borderWidth":case"borderStyle":if(typeof Kt=="string"){var zn=Kt.split(" ").map(function(_){return _.trim()});zn.length===4&&zn[1]!==zn[3]&&lintWarning("You seem to be using '".concat(zt,"' property with different left ").concat(zt," and right ").concat(zt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),fn)}return;case"clear":case"textAlign":(Kt==="left"||Kt==="right")&&lintWarning("You seem to be using non-logical value '".concat(Kt,"' of ").concat(zt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),fn);return;case"borderRadius":if(typeof Kt=="string"){var wr=Kt.split("/").map(function(_){return _.trim()}),Er=wr.reduce(function(_,N){if(_)return _;var me=N.split(" ").map(function(q){return q.trim()});return me.length>=2&&me[0]!==me[1]||me.length===3&&me[1]!==me[2]||me.length===4&&me[2]!==me[3]?!0:_},!1);Er&&lintWarning("You seem to be using non-logical value '".concat(Kt,"' of ").concat(zt,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),fn)}return;default:}},ho=null,wn=function(zt,Kt,fn){fn.parentSelectors.some(function(zn){var wr=zn.split(",");return wr.some(function(Er){return Er.split("&").length>2})})&&lintWarning("Should not use more than one `&` in a selector.",fn)},tt=null,$e=(0,H.Z)(),dt="_skip_check_",Ke="_multi_value_";function qt(vt){var zt=Kn(Ji(vt),Gn);return zt.replace(/\{%%%\:[^;];}/g,";")}function nn(vt){return(0,de.Z)(vt)==="object"&&vt&&(dt in vt||Ke in vt)}function ln(vt,zt,Kt){if(!zt)return vt;var fn=".".concat(zt),zn=Kt==="low"?":where(".concat(fn,")"):fn,wr=vt.split(",").map(function(Er){var _,N=Er.trim().split(/\s+/),me=N[0]||"",q=((_=me.match(/^\w+/))===null||_===void 0?void 0:_[0])||"";return me="".concat(q).concat(zn).concat(me.slice(q.length)),[me].concat((0,p.Z)(N.slice(1))).join(" ")});return wr.join(",")}var An=function vt(zt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},zn=fn.root,wr=fn.injectHash,Er=fn.parentSelectors,_=Kt.hashId,N=Kt.layer,me=Kt.path,q=Kt.hashPriority,Ue=Kt.transformers,ct=Ue===void 0?[]:Ue,Lt=Kt.linters,hn=Lt===void 0?[]:Lt,on="",nr={};function sr(Ni){var Oi=Ni.getName(_);if(!nr[Oi]){var yo=vt(Ni.style,Kt,{root:!1,parentSelectors:Er}),ya=(0,ae.Z)(yo,1),Ba=ya[0];nr[Oi]="@keyframes ".concat(Ni.getName(_)).concat(Ba)}}function ti(Ni){var Oi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ni.forEach(function(yo){Array.isArray(yo)?ti(yo,Oi):yo&&Oi.push(yo)}),Oi}var Fi=ti(Array.isArray(zt)?zt:[zt]);if(Fi.forEach(function(Ni){var Oi=typeof Ni=="string"&&!zn?{}:Ni;if(typeof Oi=="string")on+="".concat(Oi,`
`);else if(Oi._keyframe)sr(Oi);else{var yo=ct.reduce(function(ya,Ba){var xa;return(Ba==null||(xa=Ba.visit)===null||xa===void 0?void 0:xa.call(Ba,ya))||ya},Oi);Object.keys(yo).forEach(function(ya){var Ba=yo[ya];if((0,de.Z)(Ba)==="object"&&Ba&&(ya!=="animationName"||!Ba._keyframe)&&!nn(Ba)){var xa=!1,sa=ya.trim(),jo=!1;(zn||wr)&&_?sa.startsWith("@")?xa=!0:sa=ln(ya,_,q):zn&&!_&&(sa==="&"||sa==="")&&(sa="",jo=!0);var vs=vt(Ba,Kt,{root:jo,injectHash:xa,parentSelectors:[].concat((0,p.Z)(Er),[sa])}),$s=(0,ae.Z)(vs,2),Fs=$s[0],tu=$s[1];nr=(0,E.Z)((0,E.Z)({},nr),tu),on+="".concat(sa).concat(Fs)}else{let Dl=function(eo,_a){var Su=eo.replace(/[A-Z]/g,function(Ks){return"-".concat(Ks.toLowerCase())}),ko=_a;!Ze[eo]&&typeof ko=="number"&&ko!==0&&(ko="".concat(ko,"px")),eo==="animationName"&&_a!==null&&_a!==void 0&&_a._keyframe&&(sr(_a),ko=_a.getName(_)),on+="".concat(Su,":").concat(ko,";")};var lo,du=(lo=Ba==null?void 0:Ba.value)!==null&&lo!==void 0?lo:Ba;(0,de.Z)(Ba)==="object"&&Ba!==null&&Ba!==void 0&&Ba[Ke]&&Array.isArray(du)?du.forEach(function(eo){Dl(ya,eo)}):Dl(ya,du)}})}}),!zn)on="{".concat(on,"}");else if(N&&V()){var Ci=N.split(","),ta=Ci[Ci.length-1].trim();on="@layer ".concat(ta," {").concat(on,"}"),Ci.length>1&&(on="@layer ".concat(N,"{%%%:%}").concat(on))}return[on,nr]};function Oe(vt,zt){return d("".concat(vt.join("%")).concat(zt))}function De(){return null}function Be(vt,zt){var Kt=vt.token,fn=vt.path,zn=vt.hashId,wr=vt.layer,Er=vt.nonce,_=g.useContext(k),N=_.autoClear,me=_.mock,q=_.defaultCache,Ue=_.hashPriority,ct=_.container,Lt=_.ssrInline,hn=_.transformers,on=_.linters,nr=_.cache,sr=Kt._tokenKey,ti=[sr].concat((0,p.Z)(fn)),Fi=$e,Ci=Gt("style",ti,function(){var ya=zt(),Ba=An(ya,{hashId:zn,hashPriority:Ue,layer:wr,path:fn.join("-"),transformers:hn,linters:on}),xa=(0,ae.Z)(Ba,2),sa=xa[0],jo=xa[1],vs=qt(sa),$s=Oe(ti,vs);if(Fi){var Fs={mark:w,prepend:"queue",attachTo:ct},tu=typeof Er=="function"?Er():Er;tu&&(Fs.csp={nonce:tu});var lo=(0,ue.hq)(vs,$s,Fs);lo[F]=nr.instanceId,lo.setAttribute(A,sr),Object.keys(jo).forEach(function(du){(0,ue.hq)(qt(jo[du]),"_effect-".concat(du),Fs)})}return[vs,sr,$s]},function(ya,Ba){var xa=(0,ae.Z)(ya,3),sa=xa[2];(Ba||N)&&$e&&(0,ue.jL)(sa,{mark:w})}),ta=(0,ae.Z)(Ci,3),Ni=ta[0],Oi=ta[1],yo=ta[2];return function(ya){var Ba;if(!Lt||Fi||!q)Ba=g.createElement(De,null);else{var xa;Ba=g.createElement("style",(0,We.Z)({},(xa={},(0,e.Z)(xa,A,Oi),(0,e.Z)(xa,w,yo),xa),{dangerouslySetInnerHTML:{__html:Ni}}))}return g.createElement(g.Fragment,null,Ba,ya)}}function Ye(vt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Kt=Array.from(vt.cache.keys()).filter(function(zn){return zn.startsWith("style%")}),fn="";return Kt.forEach(function(zn){var wr=_slicedToArray(vt.cache.get(zn)[1],3),Er=wr[0],_=wr[1],N=wr[2];fn+=zt?Er:"<style ".concat(ATTR_TOKEN,'="').concat(_,'" ').concat(ATTR_MARK,'="').concat(N,'">').concat(Er,"</style>")}),fn}var Nt=function(){function vt(zt,Kt){(0,u.Z)(this,vt),(0,e.Z)(this,"name",void 0),(0,e.Z)(this,"style",void 0),(0,e.Z)(this,"_keyframe",!0),this.name=zt,this.style=Kt}return(0,t.Z)(vt,[{key:"getName",value:function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Kt?"".concat(Kt,"-").concat(this.name):this.name}}]),vt}(),jt=Nt;function un(vt,zt){if(vt.length!==zt.length)return!1;for(var Kt=0;Kt<vt.length;Kt++)if(vt[Kt]!==zt[Kt])return!1;return!0}var Hn=function(){function vt(){(0,u.Z)(this,vt),(0,e.Z)(this,"cache",void 0),(0,e.Z)(this,"keys",void 0),(0,e.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,t.Z)(vt,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(Kt){var fn,zn,wr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Er={map:this.cache};return Kt.forEach(function(_){if(!Er)Er=void 0;else{var N,me;Er=(N=Er)===null||N===void 0||(me=N.map)===null||me===void 0?void 0:me.get(_)}}),(fn=Er)!==null&&fn!==void 0&&fn.value&&wr&&(Er.value[1]=this.cacheCallTimes++),(zn=Er)===null||zn===void 0?void 0:zn.value}},{key:"get",value:function(Kt){var fn;return(fn=this.internalGet(Kt,!0))===null||fn===void 0?void 0:fn[0]}},{key:"has",value:function(Kt){return!!this.internalGet(Kt)}},{key:"set",value:function(Kt,fn){var zn=this;if(!this.has(Kt)){if(this.size()+1>vt.MAX_CACHE_SIZE+vt.MAX_CACHE_OFFSET){var wr=this.keys.reduce(function(me,q){var Ue=(0,ae.Z)(me,2),ct=Ue[1];return zn.internalGet(q)[1]<ct?[q,zn.internalGet(q)[1]]:me},[this.keys[0],this.cacheCallTimes]),Er=(0,ae.Z)(wr,1),_=Er[0];this.delete(_)}this.keys.push(Kt)}var N=this.cache;Kt.forEach(function(me,q){if(q===Kt.length-1)N.set(me,{value:[fn,zn.cacheCallTimes++]});else{var Ue=N.get(me);Ue?Ue.map||(Ue.map=new Map):N.set(me,{map:new Map}),N=N.get(me).map}})}},{key:"deleteByPath",value:function(Kt,fn){var zn=Kt.get(fn[0]);if(fn.length===1){var wr;return zn.map?Kt.set(fn[0],{map:zn.map}):Kt.delete(fn[0]),(wr=zn.value)===null||wr===void 0?void 0:wr[0]}var Er=this.deleteByPath(zn.map,fn.slice(1));return(!zn.map||zn.map.size===0)&&!zn.value&&Kt.delete(fn[0]),Er}},{key:"delete",value:function(Kt){if(this.has(Kt))return this.keys=this.keys.filter(function(fn){return!un(fn,Kt)}),this.deleteByPath(this.cache,Kt)}}]),vt}();(0,e.Z)(Hn,"MAX_CACHE_SIZE",20),(0,e.Z)(Hn,"MAX_CACHE_OFFSET",5);var Rn=0,fr=function(){function vt(zt){(0,u.Z)(this,vt),(0,e.Z)(this,"derivatives",void 0),(0,e.Z)(this,"id",void 0),this.derivatives=Array.isArray(zt)?zt:[zt],this.id=Rn,zt.length===0&&(0,Aa.Kp)(zt.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),Rn+=1}return(0,t.Z)(vt,[{key:"getDerivativeToken",value:function(Kt){return this.derivatives.reduce(function(fn,zn){return zn(Kt,fn)},void 0)}}]),vt}(),or=new Hn;function $t(vt){var zt=Array.isArray(vt)?vt:[vt];return or.has(zt)||or.set(zt,new fr(zt)),or.get(zt)}function er(vt){if(typeof vt=="number")return[[vt],!1];var zt=String(vt).trim(),Kt=zt.match(/(.*)(!important)/),fn=(Kt?Kt[1]:zt).trim().split(/\s+/),zn="",wr=0;return[fn.reduce(function(Er,_){return _.includes("(")?(zn+=_,wr+=_.split("(").length-1):_.includes(")")?(zn+=_,wr-=_.split(")").length-1,wr===0&&(Er.push(zn),zn="")):wr>0?zn+=_:Er.push(_),Er},[]),!!Kt]}function Jn(vt){return vt.notSplit=!0,vt}var Bt={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:Jn(["borderTop","borderBottom"]),borderBlockStart:Jn(["borderTop"]),borderBlockEnd:Jn(["borderBottom"]),borderInline:Jn(["borderLeft","borderRight"]),borderInlineStart:Jn(["borderLeft"]),borderInlineEnd:Jn(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function Ai(vt,zt){var Kt=vt;return zt&&(Kt="".concat(Kt," !important")),{_skip_check_:!0,value:Kt}}var Le={visit:function(zt){var Kt={};return Object.keys(zt).forEach(function(fn){var zn=zt[fn],wr=Bt[fn];if(wr&&(typeof zn=="number"||typeof zn=="string")){var Er=er(zn),_=(0,ae.Z)(Er,2),N=_[0],me=_[1];wr.length&&wr.notSplit?wr.forEach(function(q){Kt[q]=Ai(zn,me)}):wr.length===1?Kt[wr[0]]=Ai(zn,me):wr.length===2?wr.forEach(function(q,Ue){var ct;Kt[q]=Ai((ct=N[Ue])!==null&&ct!==void 0?ct:N[0],me)}):wr.length===4?wr.forEach(function(q,Ue){var ct,Lt;Kt[q]=Ai((ct=(Lt=N[Ue])!==null&&Lt!==void 0?Lt:N[Ue-2])!==null&&ct!==void 0?ct:N[0],me)}):Kt[fn]=zn}else Kt[fn]=zn}),Kt}},Xe=null,He=/url\([^)]+\)|var\([^)]+\)|(\d*\.?\d+)px/g;function Ot(vt,zt){var Kt=Math.pow(10,zt+1),fn=Math.floor(vt*Kt);return Math.round(fn/10)*10/Kt}var Vt=function(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Kt=zt.rootValue,fn=Kt===void 0?16:Kt,zn=zt.precision,wr=zn===void 0?5:zn,Er=zt.mediaQuery,_=Er===void 0?!1:Er,N=function(Ue,ct){if(!ct)return Ue;var Lt=parseFloat(ct);if(Lt<=1)return Ue;var hn=Ot(Lt/fn,wr);return"".concat(hn,"rem")},me=function(Ue){var ct=_objectSpread({},Ue);return Object.entries(Ue).forEach(function(Lt){var hn=_slicedToArray(Lt,2),on=hn[0],nr=hn[1];if(typeof nr=="string"&&nr.includes("px")){var sr=nr.replace(He,N);ct[on]=sr}!unitless[on]&&typeof nr=="number"&&nr!==0&&(ct[on]="".concat(nr,"px").replace(He,N));var ti=on.trim();if(ti.startsWith("@")&&ti.includes("px")&&_){var Fi=on.replace(He,N);ct[Fi]=ct[on],delete ct[on]}}),ct};return{visit:me}},gn=null},42135:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return ae}});var E=y(1413),p=y(97685),M=y(4942),d=y(91),g=y(67294),x=y(94184),v=y.n(x),u=y(63017),t=y(71002),e=y(16397),o=y(80334),c=y(44958);function b(K,he){(0,o.ZP)(K,"[@ant-design/icons] ".concat(he))}function A(K){return(0,t.Z)(K)==="object"&&typeof K.name=="string"&&typeof K.theme=="string"&&((0,t.Z)(K.icon)==="object"||typeof K.icon=="function")}function w(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(K).reduce(function(he,Se){var Fe=K[Se];switch(Se){case"class":he.className=Fe,delete he.class;break;default:he[Se]=Fe}return he},{})}function D(K,he,Se){return Se?g.createElement(K.tag,(0,E.Z)((0,E.Z)({key:he},w(K.attrs)),Se),(K.children||[]).map(function(Fe,nt){return D(Fe,"".concat(he,"-").concat(K.tag,"-").concat(nt))})):g.createElement(K.tag,(0,E.Z)({key:he},w(K.attrs)),(K.children||[]).map(function(Fe,nt){return D(Fe,"".concat(he,"-").concat(K.tag,"-").concat(nt))}))}function F(K){return(0,e.R_)(K)[0]}function Z(K){return K?Array.isArray(K)?K:[K]:[]}var L={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},W=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,k=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W,Se=(0,g.useContext)(u.Z),Fe=Se.csp,nt=Se.prefixCls,lt=he;nt&&(lt=lt.replace(/anticon/g,nt)),(0,g.useEffect)(function(){(0,c.hq)(lt,"@ant-design-icons",{prepend:!0,csp:Fe})},[])},de=["icon","className","onClick","style","primaryColor","secondaryColor"],H={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function ue(K){var he=K.primaryColor,Se=K.secondaryColor;H.primaryColor=he,H.secondaryColor=Se||F(he),H.calculated=!!Se}function ve(){return(0,E.Z)({},H)}var ke=function(he){var Se=he.icon,Fe=he.className,nt=he.onClick,lt=he.style,Gt=he.primaryColor,pn=he.secondaryColor,$n=(0,d.Z)(he,de),Ln=H;if(Gt&&(Ln={primaryColor:Gt,secondaryColor:pn||F(Gt)}),k(),b(A(Se),"icon should be icon definiton, but got ".concat(Se)),!A(Se))return null;var st=Se;return st&&typeof st.icon=="function"&&(st=(0,E.Z)((0,E.Z)({},st),{},{icon:st.icon(Ln.primaryColor,Ln.secondaryColor)})),D(st.icon,"svg-".concat(st.name),(0,E.Z)({className:Fe,onClick:nt,style:lt,"data-icon":st.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},$n))};ke.displayName="IconReact",ke.getTwoToneColors=ve,ke.setTwoToneColors=ue;var Ae=ke;function be(K){var he=Z(K),Se=(0,p.Z)(he,2),Fe=Se[0],nt=Se[1];return Ae.setTwoToneColors({primaryColor:Fe,secondaryColor:nt})}function G(){var K=Ae.getTwoToneColors();return K.calculated?[K.primaryColor,K.secondaryColor]:K.primaryColor}var ie=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];be("#1890ff");var V=g.forwardRef(function(K,he){var Se,Fe=K.className,nt=K.icon,lt=K.spin,Gt=K.rotate,pn=K.tabIndex,$n=K.onClick,Ln=K.twoToneColor,st=(0,d.Z)(K,ie),xt=g.useContext(u.Z),tn=xt.prefixCls,Un=tn===void 0?"anticon":tn,We=xt.rootClassName,Yt=v()(We,Un,(Se={},(0,M.Z)(Se,"".concat(Un,"-").concat(nt.name),!!nt.name),(0,M.Z)(Se,"".concat(Un,"-spin"),!!lt||nt.name==="loading"),Se),Fe),Ze=pn;Ze===void 0&&$n&&(Ze=-1);var Pe=Gt?{msTransform:"rotate(".concat(Gt,"deg)"),transform:"rotate(".concat(Gt,"deg)")}:void 0,ze=Z(Ln),ht=(0,p.Z)(ze,2),P=ht[0],ne=ht[1];return g.createElement("span",(0,E.Z)((0,E.Z)({role:"img","aria-label":nt.name},st),{},{ref:he,tabIndex:Ze,onClick:$n,className:Yt}),g.createElement(Ae,{icon:nt,primaryColor:P,secondaryColor:ne,style:Pe}))});V.displayName="AntdIcon",V.getTwoToneColor=G,V.setTwoToneColor=be;var ae=V},63017:function(Ie,S,y){"use strict";var E=y(67294),p=(0,E.createContext)({});S.Z=p},50888:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return v}});var E=y(1413),p=y(67294),M={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},d=M,g=y(42135),x=function(t,e){return p.createElement(g.Z,(0,E.Z)((0,E.Z)({},t),{},{ref:e,icon:d}))};x.displayName="LoadingOutlined";var v=p.forwardRef(x)},46343:function(Ie,S,y){"use strict";y.d(S,{S$:function(){return Yt},bf:function(){return Ze},ni:function(){return lt},oI:function(){return Un},sX:function(){return We}});var E=y(34155);function p(Pe,ze,ht,P){function ne(_e){return _e instanceof ht?_e:new ht(function(oe){oe(_e)})}return new(ht||(ht=Promise))(function(_e,oe){function ce(Ne){try{Y(P.next(Ne))}catch(Qe){oe(Qe)}}function ye(Ne){try{Y(P.throw(Ne))}catch(Qe){oe(Qe)}}function Y(Ne){Ne.done?_e(Ne.value):ne(Ne.value).then(ce,ye)}Y((P=P.apply(Pe,ze||[])).next())})}function M(Pe,ze){var ht={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},P,ne,_e,oe;return oe={next:ce(0),throw:ce(1),return:ce(2)},typeof Symbol=="function"&&(oe[Symbol.iterator]=function(){return this}),oe;function ce(Y){return function(Ne){return ye([Y,Ne])}}function ye(Y){if(P)throw new TypeError("Generator is already executing.");for(;ht;)try{if(P=1,ne&&(_e=Y[0]&2?ne.return:Y[0]?ne.throw||((_e=ne.return)&&_e.call(ne),0):ne.next)&&!(_e=_e.call(ne,Y[1])).done)return _e;switch(ne=0,_e&&(Y=[Y[0]&2,_e.value]),Y[0]){case 0:case 1:_e=Y;break;case 4:return ht.label++,{value:Y[1],done:!1};case 5:ht.label++,ne=Y[1],Y=[0];continue;case 7:Y=ht.ops.pop(),ht.trys.pop();continue;default:if(_e=ht.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Y[0]===6||Y[0]===2)){ht=0;continue}if(Y[0]===3&&(!_e||Y[1]>_e[0]&&Y[1]<_e[3])){ht.label=Y[1];break}if(Y[0]===6&&ht.label<_e[1]){ht.label=_e[1],_e=Y;break}if(_e&&ht.label<_e[2]){ht.label=_e[2],ht.ops.push(Y);break}_e[2]&&ht.ops.pop(),ht.trys.pop();continue}Y=ze.call(Pe,ht)}catch(Ne){Y=[6,Ne],ne=0}finally{P=_e=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}}function d(Pe,ze){var ht=typeof Symbol=="function"&&Pe[Symbol.iterator];if(!ht)return Pe;var P=ht.call(Pe),ne,_e=[],oe;try{for(;(ze===void 0||ze-- >0)&&!(ne=P.next()).done;)_e.push(ne.value)}catch(ce){oe={error:ce}}finally{try{ne&&!ne.done&&(ht=P.return)&&ht.call(P)}finally{if(oe)throw oe.error}}return _e}function g(Pe,ze,ht){if(ht||arguments.length===2)for(var P=0,ne=ze.length,_e;P<ne;P++)(_e||!(P in ze))&&(_e||(_e=Array.prototype.slice.call(ze,0,P)),_e[P]=ze[P]);return Pe.concat(_e||Array.prototype.slice.call(ze))}function x(Pe){return Pe&&Pe.__esModule&&Object.prototype.hasOwnProperty.call(Pe,"default")?Pe.default:Pe}var v={exports:{}},u={exports:{}},t={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ht;function ht(P){return P&&typeof P.length=="number"&&P.length>=0&&P.length%1===0}Pe.exports=ze.default})(t,t.exports);var e={},o={exports:{}},c={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=function(ht){return function(){for(var P=[],ne=arguments.length;ne--;)P[ne]=arguments[ne];var _e=P.pop();return ht.call(this,P,_e)}},Pe.exports=ze.default})(c,c.exports);var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.fallback=F,b.wrap=Z;var A=b.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,w=b.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,D=b.hasNextTick=typeof E=="object"&&typeof E.nextTick=="function";function F(Pe){setTimeout(Pe,0)}function Z(Pe){return function(ze){for(var ht=[],P=arguments.length-1;P-- >0;)ht[P]=arguments[P+1];return Pe(function(){return ze.apply(void 0,ht)})}}var L;A?L=queueMicrotask:w?L=setImmediate:D?L=E.nextTick:L=F,b.default=Z(L),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ye;var ht=c.exports,P=ce(ht),ne=b,_e=ce(ne),oe=e;function ce(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function ye(Qe){return(0,oe.isAsync)(Qe)?function(){for(var mt=[],Ve=arguments.length;Ve--;)mt[Ve]=arguments[Ve];var rt=mt.pop(),yt=Qe.apply(this,mt);return Y(yt,rt)}:(0,P.default)(function(mt,Ve){var rt;try{rt=Qe.apply(this,mt)}catch(yt){return Ve(yt)}if(rt&&typeof rt.then=="function")return Y(rt,Ve);Ve(null,rt)})}function Y(Qe,mt){return Qe.then(function(Ve){Ne(mt,null,Ve)},function(Ve){Ne(mt,Ve&&Ve.message?Ve:new Error(Ve))})}function Ne(Qe,mt,Ve){try{Qe(mt,Ve)}catch(rt){(0,_e.default)(function(yt){throw yt},rt)}}Pe.exports=ze.default}(o,o.exports),Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=e.isAsyncGenerator=e.isAsync=void 0;var W=o.exports,k=de(W);function de(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function H(Pe){return Pe[Symbol.toStringTag]==="AsyncFunction"}function ue(Pe){return Pe[Symbol.toStringTag]==="AsyncGenerator"}function ve(Pe){return typeof Pe[Symbol.asyncIterator]=="function"}function ke(Pe){if(typeof Pe!="function")throw new Error("expected a function");return H(Pe)?(0,k.default)(Pe):Pe}e.default=ke,e.isAsync=H,e.isAsyncGenerator=ue,e.isAsyncIterable=ve;var Ae={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ht;function ht(P,ne){if(ne===void 0&&(ne=P.length),!ne)throw new Error("arity is undefined");function _e(){for(var oe=this,ce=[],ye=arguments.length;ye--;)ce[ye]=arguments[ye];return typeof ce[ne-1]=="function"?P.apply(this,ce):new Promise(function(Y,Ne){ce[ne-1]=function(Qe){for(var mt=[],Ve=arguments.length-1;Ve-- >0;)mt[Ve]=arguments[Ve+1];if(Qe)return Ne(Qe);Y(mt.length>1?mt:mt[0])},P.apply(oe,ce)})}return _e}Pe.exports=ze.default})(Ae,Ae.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=t.exports,P=ye(ht),ne=e,_e=ye(ne),oe=Ae.exports,ce=ye(oe);function ye(Y){return Y&&Y.__esModule?Y:{default:Y}}ze.default=(0,ce.default)(function(Y,Ne,Qe){var mt=(0,P.default)(Ne)?[]:{};Y(Ne,function(Ve,rt,yt){(0,_e.default)(Ve)(function(Tt){for(var Ht,en=[],wt=arguments.length-1;wt-- >0;)en[wt]=arguments[wt+1];en.length<2&&(Ht=en,en=Ht[0]),mt[rt]=en,yt(Tt)})},function(Ve){return Qe(Ve,mt)})},3),Pe.exports=ze.default}(u,u.exports);var be={exports:{}},G={exports:{}},ie={exports:{}},V={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ht;function ht(P){function ne(){for(var _e=[],oe=arguments.length;oe--;)_e[oe]=arguments[oe];if(P!==null){var ce=P;P=null,ce.apply(this,_e)}}return Object.assign(ne,P),ne}Pe.exports=ze.default})(V,V.exports);var ae={exports:{}},K={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=function(ht){return ht[Symbol.iterator]&&ht[Symbol.iterator]()},Pe.exports=ze.default})(K,K.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=Ne;var ht=t.exports,P=oe(ht),ne=K.exports,_e=oe(ne);function oe(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function ce(Qe){var mt=-1,Ve=Qe.length;return function(){return++mt<Ve?{value:Qe[mt],key:mt}:null}}function ye(Qe){var mt=-1;return function(){var rt=Qe.next();return rt.done?null:(mt++,{value:rt.value,key:mt})}}function Y(Qe){var mt=Qe?Object.keys(Qe):[],Ve=-1,rt=mt.length;return function yt(){var Tt=mt[++Ve];return Tt==="__proto__"?yt():Ve<rt?{value:Qe[Tt],key:Tt}:null}}function Ne(Qe){if((0,P.default)(Qe))return ce(Qe);var mt=(0,_e.default)(Qe);return mt?ye(mt):Y(Qe)}Pe.exports=ze.default}(ae,ae.exports);var he={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ht;function ht(P){return function(){for(var ne=[],_e=arguments.length;_e--;)ne[_e]=arguments[_e];if(P===null)throw new Error("Callback was already called.");var oe=P;P=null,oe.apply(this,ne)}}Pe.exports=ze.default})(he,he.exports);var Se={exports:{}},Fe={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht={};ze.default=ht,Pe.exports=ze.default})(Fe,Fe.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=_e;var ht=Fe.exports,P=ne(ht);function ne(oe){return oe&&oe.__esModule?oe:{default:oe}}function _e(oe,ce,ye,Y){var Ne=!1,Qe=!1,mt=!1,Ve=0,rt=0;function yt(){Ve>=ce||mt||Ne||(mt=!0,oe.next().then(function(en){var wt=en.value,Mn=en.done;if(!(Qe||Ne)){if(mt=!1,Mn){Ne=!0,Ve<=0&&Y(null);return}Ve++,ye(wt,rt,Tt),rt++,yt()}}).catch(Ht))}function Tt(en,wt){if(Ve-=1,!Qe){if(en)return Ht(en);if(en===!1){Ne=!0,Qe=!0;return}if(wt===P.default||Ne&&Ve<=0)return Ne=!0,Y(null);yt()}}function Ht(en){Qe||(mt=!1,Ne=!0,Y(en))}yt()}Pe.exports=ze.default}(Se,Se.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=V.exports,P=Ve(ht),ne=ae.exports,_e=Ve(ne),oe=he.exports,ce=Ve(oe),ye=e,Y=Se.exports,Ne=Ve(Y),Qe=Fe.exports,mt=Ve(Qe);function Ve(rt){return rt&&rt.__esModule?rt:{default:rt}}ze.default=function(rt){return function(yt,Tt,Ht){if(Ht=(0,P.default)(Ht),rt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!yt)return Ht(null);if((0,ye.isAsyncGenerator)(yt))return(0,Ne.default)(yt,rt,Tt,Ht);if((0,ye.isAsyncIterable)(yt))return(0,Ne.default)(yt[Symbol.asyncIterator](),rt,Tt,Ht);var en=(0,_e.default)(yt),wt=!1,Mn=!1,kn=0,jn=!1;function mn(Cr,mi){if(!Mn)if(kn-=1,Cr)wt=!0,Ht(Cr);else if(Cr===!1)wt=!0,Mn=!0;else{if(mi===mt.default||wt&&kn<=0)return wt=!0,Ht(null);jn||cr()}}function cr(){for(jn=!0;kn<rt&&!wt;){var Cr=en();if(Cr===null){wt=!0,kn<=0&&Ht(null);return}kn+=1,Tt(Cr.value,Cr.key,(0,ce.default)(mn))}jn=!1}cr()}},Pe.exports=ze.default}(ie,ie.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=ie.exports,P=ye(ht),ne=e,_e=ye(ne),oe=Ae.exports,ce=ye(oe);function ye(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function Y(Ne,Qe,mt,Ve){return(0,P.default)(Qe)(Ne,(0,_e.default)(mt),Ve)}ze.default=(0,ce.default)(Y,4),Pe.exports=ze.default}(G,G.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=G.exports,P=oe(ht),ne=Ae.exports,_e=oe(ne);function oe(ye){return ye&&ye.__esModule?ye:{default:ye}}function ce(ye,Y,Ne){return(0,P.default)(ye,1,Y,Ne)}ze.default=(0,_e.default)(ce,3),Pe.exports=ze.default}(be,be.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ce;var ht=u.exports,P=oe(ht),ne=be.exports,_e=oe(ne);function oe(ye){return ye&&ye.__esModule?ye:{default:ye}}function ce(ye,Y){return(0,P.default)(_e.default,ye,Y)}Pe.exports=ze.default}(v,v.exports);var nt=x(v.exports),lt=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.call=function(){for(var ze=arguments,ht=[],P=0;P<arguments.length;P++)ht[P]=ze[P];return this.args=ht,nt(this.tasks)},Pe.prototype.tap=function(ze,ht){var P=this;this.tasks.push(function(ne){ht.apply(void 0,g([],d(P.args),!1)),ne(null,ze)})},Pe}(),Gt={exports:{}},pn={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=t.exports,P=Tt(ht),ne=Fe.exports,_e=Tt(ne),oe=G.exports,ce=Tt(oe),ye=V.exports,Y=Tt(ye),Ne=he.exports,Qe=Tt(Ne),mt=e,Ve=Tt(mt),rt=Ae.exports,yt=Tt(rt);function Tt(Mn){return Mn&&Mn.__esModule?Mn:{default:Mn}}function Ht(Mn,kn,jn){jn=(0,Y.default)(jn);var mn=0,cr=0,Cr=Mn.length,mi=!1;Cr===0&&jn(null);function $r(Sr,dr){Sr===!1&&(mi=!0),mi!==!0&&(Sr?jn(Sr):(++cr===Cr||dr===_e.default)&&jn(null))}for(;mn<Cr;mn++)kn(Mn[mn],mn,(0,Qe.default)($r))}function en(Mn,kn,jn){return(0,ce.default)(Mn,1/0,kn,jn)}function wt(Mn,kn,jn){var mn=(0,P.default)(Mn)?Ht:en;return mn(Mn,(0,Ve.default)(kn),jn)}ze.default=(0,yt.default)(wt,3),Pe.exports=ze.default})(pn,pn.exports),function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=ce;var ht=pn.exports,P=oe(ht),ne=u.exports,_e=oe(ne);function oe(ye){return ye&&ye.__esModule?ye:{default:ye}}function ce(ye,Y){return(0,_e.default)(P.default,ye,Y)}Pe.exports=ze.default}(Gt,Gt.exports);var $n=x(Gt.exports),Ln=function(){function Pe(){this.tasks=[]}return Pe.prototype.promise=function(){return $n(this.tasks)},Pe.prototype.tapPromise=function(ze,ht){var P=this;this.tasks.push(function(ne){return p(P,void 0,void 0,function(){return M(this,function(_e){switch(_e.label){case 0:return[4,ht()];case 1:return _e.sent(),ne(null,ze),[2]}})})})},Pe}(),st={exports:{}};(function(Pe,ze){Object.defineProperty(ze,"__esModule",{value:!0});var ht=V.exports,P=Ne(ht),ne=he.exports,_e=Ne(ne),oe=e,ce=Ne(oe),ye=Ae.exports,Y=Ne(ye);function Ne(mt){return mt&&mt.__esModule?mt:{default:mt}}function Qe(mt,Ve){if(Ve=(0,P.default)(Ve),!Array.isArray(mt))return Ve(new Error("First argument to waterfall must be an array of functions"));if(!mt.length)return Ve();var rt=0;function yt(Ht){var en=(0,ce.default)(mt[rt++]);en.apply(void 0,Ht.concat([(0,_e.default)(Tt)]))}function Tt(Ht){for(var en=[],wt=arguments.length-1;wt-- >0;)en[wt]=arguments[wt+1];if(Ht!==!1){if(Ht||rt===mt.length)return Ve.apply(void 0,[Ht].concat(en));yt(en)}}yt([])}ze.default=(0,Y.default)(Qe),Pe.exports=ze.default})(st,st.exports);var xt=x(st.exports),tn=function(){function Pe(){this.tasks=[]}return Pe.prototype.call=function(){return xt(this.tasks)},Pe.prototype.tap=function(ze,ht){this.tasks.length===0?this.tasks.push(function(P){var ne=ht();P(ne?null:!1,ne)}):this.tasks.push(function(P,ne){var _e=ht.apply(void 0,g([],d(P),!1));ne(_e?null:!1,ze)})},Pe}(),Un=function(){function Pe(){this.tasks=[]}return Pe.prototype.call=function(){return nt(this.tasks)},Pe.prototype.tap=function(ze,ht){this.tasks.push(function(P){var ne=ht();P(ne,ze)})},Pe}(),We=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.promise=function(){for(var ze=arguments,ht=[],P=0;P<arguments.length;P++)ht[P]=ze[P];return this.args=ht,nt(this.tasks)},Pe.prototype.tapPromise=function(ze,ht){var P=this;this.tasks.push(function(ne){return p(P,void 0,void 0,function(){return M(this,function(_e){switch(_e.label){case 0:return[4,ht.apply(void 0,g([],d(this.args),!1))];case 1:return _e.sent(),ne(null,ze),[2]}})})})},Pe}(),Yt=function(){function Pe(){this.args=[],this.tasks=[]}return Pe.prototype.promise=function(){for(var ze=arguments,ht=[],P=0;P<arguments.length;P++)ht[P]=ze[P];return this.args=ht,nt(this.tasks)},Pe.prototype.tapPromise=function(ze,ht){var P=this;this.tasks.push(function(ne){return p(P,void 0,void 0,function(){var _e;return M(this,function(oe){switch(oe.label){case 0:return[4,ht.apply(void 0,g([],d(this.args),!1))];case 1:return _e=oe.sent(),ne(_e,ze),[2]}})})})},Pe}(),Ze=function(){function Pe(){this.tasks=[]}return Pe.prototype.promise=function(){return xt(this.tasks)},Pe.prototype.tapPromise=function(ze,ht){this.tasks.length===0?this.tasks.push(function(P){ht().then(function(ne){P(null,ne)})}):this.tasks.push(function(P,ne){ht(P).then(function(_e){ne(null,_e)})})},Pe}()},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Ie){try{let t=function(){g||(g=!0,M())},e=function(){try{d.documentElement.doScroll("left")}catch(o){return void setTimeout(e,50)}t()};var v=t,u=e,y=(y=document.getElementsByTagName("script"))[y.length-1],S=y.getAttribute("data-injectcss"),y=y.getAttribute("data-disable-injectsvg");if(!y){var E,p,M,d,g,x=function(c,b){b.parentNode.insertBefore(c,b)};if(S&&!Ie.__iconfont__svg__cssinject__){Ie.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(o){console&&console.log(o)}}E=function(){var c,b=document.createElement("div");b.innerHTML=Ie._iconfont_svg_string_3580659,(b=b.getElementsByTagName("svg")[0])&&(b.setAttribute("aria-hidden","true"),b.style.position="absolute",b.style.width=0,b.style.height=0,b.style.overflow="hidden",b=b,(c=document.body).firstChild?x(b,c.firstChild):c.appendChild(b))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(E,0):(p=function(){document.removeEventListener("DOMContentLoaded",p,!1),E()},document.addEventListener("DOMContentLoaded",p,!1)):document.attachEvent&&(M=E,d=Ie.document,g=!1,e(),d.onreadystatechange=function(){d.readyState=="complete"&&(d.onreadystatechange=null,t())})}}catch(t){}}(window)},54095:function(Ie,S,y){"use strict";y.d(S,{GC:function(){return Ol},h0:function(){return Hr},lv:function(){return fc},lo:function(){return bn},kw:function(){return Pn},Or:function(){return sf},KD:function(){return Gn},I9:function(){return Lu},lE:function(){return Kn},d:function(){return Tt},n3:function(){return Hu},vY:function(){return Ml},P7:function(){return Pl},yn:function(){return Xi},ee:function(){return Gu},vK:function(){return x},nC:function(){return ef},e7:function(){return bu},Hp:function(){return ns},gl:function(){return $e},yT:function(){return Vc}});var E=y(28660),p=y(26729),M=y.n(p),d=y(86700),g=y(84879),x={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},v=y(1413),u=y(15671),t=y(43144),e=y(97326),o=y(60136),c=y(82963),b=y(61120),A=y(4942),w=y(44402),D=y(31745),F=y.n(D);function Z(R,ut){var Te=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!Te){if(Array.isArray(R)||(Te=L(R))||ut&&R&&typeof R.length=="number"){Te&&(R=Te);var fe=0,we=function(){};return{s:we,n:function(){return fe>=R.length?{done:!0}:{done:!1,value:R[fe++]}},e:function(Jt){throw Jt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,_t=!1,It;return{s:function(){Te=Te.call(R)},n:function(){var Jt=Te.next();return je=Jt.done,Jt},e:function(Jt){_t=!0,It=Jt},f:function(){try{!je&&Te.return!=null&&Te.return()}finally{if(_t)throw It}}}}function L(R,ut){if(R){if(typeof R=="string")return W(R,ut);var Te=Object.prototype.toString.call(R).slice(8,-1);if(Te==="Object"&&R.constructor&&(Te=R.constructor.name),Te==="Map"||Te==="Set")return Array.from(R);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return W(R,ut)}}function W(R,ut){(ut==null||ut>R.length)&&(ut=R.length);for(var Te=0,fe=new Array(ut);Te<ut;Te++)fe[Te]=R[Te];return fe}var k=30;function de(R){var ut=R.characterSet,Te=R.getFontWidth,fe=R.fontHeight,we=R.buffer,je=R.maxCanvasWidth,_t=R.mapping,It=_t===void 0?{}:_t,Ct=R.xOffset,Jt=Ct===void 0?0:Ct,Wn=R.yOffset,Mr=Wn===void 0?0:Wn,hr=0,kr=Jt;Array.from(ut).forEach(function($i,zi){if(!It[$i]){var Ea=Te($i,zi);kr+k>je&&(kr=0,hr++),It[$i]={x:kr,y:Mr+hr*k,width:k,height:k,advance:Ea},kr+=k}});var ia=fe+we*2;return{mapping:It,xOffset:kr,yOffset:Mr+hr*ia,canvasHeight:ve(Mr+(hr+1)*ia)}}function H(R,ut,Te){var fe=0,we=0,je=0,_t=[],It={},Ct=Z(R),Jt;try{for(Ct.s();!(Jt=Ct.n()).done;){var Wn=Jt.value;if(!It[Wn.id]){var Mr=Wn.size;fe+Mr+ut>Te&&(ue(It,_t,we),fe=0,we=je+we+ut,je=0,_t=[]),_t.push({icon:Wn,xOffset:fe}),fe=fe+Mr+ut,je=Math.max(je,Mr)}}}catch(kr){Ct.e(kr)}finally{Ct.f()}_t.length>0&&ue(It,_t,we);var hr=ve(je+we+ut);return{mapping:It,canvasHeight:hr}}function ue(R,ut,Te){var fe=Z(ut),we;try{for(fe.s();!(we=fe.n()).done;){var je=we.value,_t=je.icon,It=je.xOffset;R[_t.id]=(0,v.Z)((0,v.Z)({},_t),{},{x:It,y:Te,image:_t.image,width:_t.width,height:_t.height})}}catch(Ct){fe.e(Ct)}finally{fe.f()}}function ve(R){return Math.pow(2,Math.ceil(Math.log2(R)))}var ke,Ae;function be(R,ut){var Te=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!Te){if(Array.isArray(R)||(Te=G(R))||ut&&R&&typeof R.length=="number"){Te&&(R=Te);var fe=0,we=function(){};return{s:we,n:function(){return fe>=R.length?{done:!0}:{done:!1,value:R[fe++]}},e:function(Jt){throw Jt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,_t=!1,It;return{s:function(){Te=Te.call(R)},n:function(){var Jt=Te.next();return je=Jt.done,Jt},e:function(Jt){_t=!0,It=Jt},f:function(){try{!je&&Te.return!=null&&Te.return()}finally{if(_t)throw It}}}}function G(R,ut){if(R){if(typeof R=="string")return ie(R,ut);var Te=Object.prototype.toString.call(R).slice(8,-1);if(Te==="Object"&&R.constructor&&(Te=R.constructor.name),Te==="Map"||Te==="Set")return Array.from(R);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return ie(R,ut)}}function ie(R,ut){(ut==null||ut>R.length)&&(ut=R.length);for(var Te=0,fe=new Array(ut);Te<ut;Te++)fe[Te]=R[Te];return fe}function V(R){var ut=ae();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var K=tn(),he="sans-serif",Se="normal",Fe=24,nt=3,lt=.25,Gt=8,pn=1024,$n=1,Ln=1,st=3,xt=null;function tn(){for(var R=[],ut=32;ut<128;ut++)R.push(String.fromCharCode(ut));return R}function Un(R,ut,Te,fe){R.font="".concat(fe," ").concat(Te,"px ").concat(ut),R.fillStyle="black",R.textBaseline="middle"}function We(R,ut){for(var Te=0;Te<R.length;Te++)ut.data[4*Te+3]=R[Te]}var Yt=(ke=(0,d.b2)(),ke(Ae=function(R){(0,o.Z)(Te,R);var ut=V(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"fontAtlas",void 0),(0,A.Z)((0,e.Z)(fe),"iconFontMap",void 0),(0,A.Z)((0,e.Z)(fe),"iconFontGlyphs",{}),(0,A.Z)((0,e.Z)(fe),"fontOptions",void 0),(0,A.Z)((0,e.Z)(fe),"key",void 0),(0,A.Z)((0,e.Z)(fe),"cache",new w.z6(st)),fe}return(0,t.Z)(Te,[{key:"scale",get:function(){return Ln}},{key:"canvas",get:function(){var we=this.cache.get(this.key);return we&&we.data}},{key:"mapping",get:function(){var we=this.cache.get(this.key);return we&&we.mapping||{}}},{key:"getCanvasByKey",value:function(we){var je=this.cache.get(we);return je&&je.data}},{key:"getMappingByKey",value:function(we){var je=this.cache.get(we);return je&&je.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:he,fontWeight:Se,characterSet:K,fontSize:Fe,buffer:nt,sdf:!0,cutoff:lt,radius:Gt,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(we){var je=this;we.forEach(function(_t){je.iconFontGlyphs[_t.name]=_t.unicode})}},{key:"addIconFont",value:function(we,je){this.iconFontMap.set(we,je)}},{key:"getIconFontKey",value:function(we){return this.iconFontMap.get(we)||we}},{key:"getGlyph",value:function(we){return this.iconFontGlyphs[we]?String.fromCharCode(parseInt(this.iconFontGlyphs[we],16)):""}},{key:"setFontOptions",value:function(we){this.fontOptions=(0,v.Z)((0,v.Z)({},this.fontOptions),we),this.key=this.getKey();var je=this.getNewChars(this.key,this.fontOptions.characterSet),_t=this.cache.get(this.key);if(!(_t&&je.length===0)){var It=this.generateFontAtlas(this.key,je,_t);this.fontAtlas=It,this.cache.set(this.key,It)}}},{key:"addFontFace",value:function(we,je){var _t=this,It=document.createElement("style");It.type="text/css",It.innerText=`
        @font-face{
            font-family: '`.concat(we,`';
            src: url('`).concat(je,`') format('woff2'),
            url('`).concat(je,`') format('woff'),
            url('`).concat(je,`') format('truetype');
        }`),It.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(we),"L7text"),document.fonts.ready.then(function(){_t.emit("fontloaded",{fontFamily:we})})}catch(Ct){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Ct)}},document.getElementsByTagName("head")[0].appendChild(It)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(we,je,_t){var It=this.fontOptions,Ct=It.fontFamily,Jt=It.fontWeight,Wn=It.fontSize,Mr=It.buffer,hr=It.sdf,kr=It.radius,ia=It.cutoff,$i=It.iconfont,zi=_t&&_t.data;zi||(zi=w.vO.document.createElement("canvas"),zi.width=pn);var Ea=zi.getContext("2d",{willReadFrequently:!0});Un(Ea,Ct,Wn,Jt);var qa=de((0,v.Z)({getFontWidth:function(hu){return Ea.measureText(hu).width},fontHeight:Wn*Ln,buffer:Mr,characterSet:je,maxCanvasWidth:pn},_t&&{mapping:_t.mapping,xOffset:_t.xOffset,yOffset:_t.yOffset})),ua=qa.mapping,rs=qa.canvasHeight,La=qa.xOffset,Po=qa.yOffset,Wo=Ea.getImageData(0,0,zi.width,zi.height);if(zi.height=rs,Ea.putImageData(Wo,0,0),Un(Ea,Ct,Wn,Jt),hr){var Xa=new(F())(Wn,Mr,kr,ia,Ct,Jt),Ra=Ea.getImageData(0,0,Xa.size,Xa.size),To=be(je),ls;try{for(To.s();!(ls=To.n()).done;){var is=ls.value;if($i){var Ps=String.fromCharCode(parseInt(is.replace("&#x","").replace(";",""),16)),Il=Xa.draw(Ps);We(Il,Ra)}else We(Xa.draw(is),Ra);Ea.putImageData(Ra,ua[is].x,ua[is].y)}}catch(Fu){To.e(Fu)}finally{To.f()}}else{var Qs=be(je),Es;try{for(Qs.s();!(Es=Qs.n()).done;){var Wu=Es.value;Ea.fillText(Wu,ua[Wu].x,ua[Wu].y+Wn*$n)}}catch(Fu){Qs.e(Fu)}finally{Qs.f()}}return{xOffset:La,yOffset:Po,mapping:ua,data:zi,width:zi.width,height:zi.height}}},{key:"getKey",value:function(){var we=this.fontOptions,je=we.fontFamily,_t=we.fontWeight;return"".concat(je,"_").concat(_t)}},{key:"getNewChars",value:function(we,je){var _t=this.cache.get(we);if(!_t)return je;var It=[],Ct=_t.mapping,Jt=new Set(Object.keys(Ct)),Wn=new Set(je);return Wn.forEach(function(Mr){Jt.has(Mr)||It.push(Mr)}),It}}]),Te}(p.EventEmitter))||Ae),Ze=y(15861),Pe=y(64687),ze=y.n(Pe),ht,P;function ne(R){var ut=_e();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function _e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var oe=3,ce=1024,ye=64,Y=(ht=(0,d.b2)(),ht(P=function(R){(0,o.Z)(Te,R);var ut=ne(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"canvasHeight",128),(0,A.Z)((0,e.Z)(fe),"texture",void 0),(0,A.Z)((0,e.Z)(fe),"canvas",void 0),(0,A.Z)((0,e.Z)(fe),"iconData",void 0),(0,A.Z)((0,e.Z)(fe),"iconMap",void 0),(0,A.Z)((0,e.Z)(fe),"ctx",void 0),(0,A.Z)((0,e.Z)(fe),"loadingImageCount",0),fe}return(0,t.Z)(Te,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=w.vO.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(_t,It){var Ct,Jt;return ze().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Ct=new Image,this.loadingImageCount++,this.hasImage(_t)?console.warn("Image Id already exists"):this.iconData.push({id:_t,size:ye}),this.updateIconMap(),Mr.next=6,this.loadImage(It);case 6:Ct=Mr.sent,Jt=this.iconData.find(function(hr){return hr.id===_t}),Jt&&(Jt.image=Ct,Jt.width=Ct.width,Jt.height=Ct.height),this.update();case 10:case"end":return Mr.stop()}},je,this)}));function we(je,_t){return fe.apply(this,arguments)}return we}()},{key:"addImageMini",value:function(we,je,_t){var It=this,Ct=_t.getSceneConfig().canvas,Jt=Ct.createImage();if(this.loadingImageCount++,this.hasImage(we))throw new Error("Image Id already exists");this.iconData.push({id:we,size:ye}),this.updateIconMap(),this.loadImageMini(je,Ct).then(function(Wn){Jt=Wn;var Mr=It.iconData.find(function(hr){return hr.id===we});Mr&&(Mr.image=Jt,Mr.width=Jt.width,Mr.height=Jt.height),It.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(we){return this.iconMap.hasOwnProperty(we)}},{key:"removeImage",value:function(we){this.hasImage(we)&&(this.iconData=this.iconData.filter(function(je){return je.id!==we}),delete this.iconMap[we],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(we){return new Promise(function(je,_t){if(we instanceof HTMLImageElement){je(we);return}var It=new Image;It.crossOrigin="anonymous",It.onload=function(){je(It)},It.onerror=function(){_t(new Error("Could not load image at "+we))},It.src=we instanceof File?URL.createObjectURL(we):we})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var we=this;this.canvas.width=ce,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(je){var _t=we.iconMap[je],It=_t.x,Ct=_t.y,Jt=_t.image,Wn=_t.width,Mr=Wn===void 0?64:Wn,hr=_t.height,kr=hr===void 0?64:hr,ia=Math.max(Mr,kr),$i=ia/ye,zi=kr/$i,Ea=Mr/$i;Jt&&we.ctx.drawImage(Jt,It+(ye-Ea)/2,Ct+(ye-zi)/2,Ea,zi)})}},{key:"updateIconMap",value:function(){var we=H(this.iconData,oe,ce),je=we.mapping,_t=we.canvasHeight;this.iconMap=je,this.canvasHeight=_t}},{key:"loadImageMini",value:function(we,je){return new Promise(function(_t,It){var Ct=je.createImage();Ct.crossOrigin="anonymous",Ct.onload=function(){_t(Ct)},Ct.onerror=function(){It(new Error("Could not load image at "+we))},Ct.src=we})}}]),Te}(p.EventEmitter))||P),Ne=y(97685),Qe=y(85975),mt,Ve,rt=(mt=(0,d.b2)(),mt(Ve=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"viewport",void 0),(0,A.Z)(this,"overridedViewProjectionMatrix",void 0),(0,A.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,A.Z)(this,"jitteredProjectionMatrix",void 0),(0,A.Z)(this,"viewMatrixInverse",void 0),(0,A.Z)(this,"cameraPosition",void 0)}return(0,t.Z)(R,[{key:"init",value:function(){}},{key:"update",value:function(Te){this.viewport=Te,this.viewMatrixInverse=Qe.create(),Qe.invert(this.viewMatrixInverse,Te.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Te=this.viewport.getCenter(),fe=(0,Ne.Z)(Te,2),we=fe[0],je=fe[1];return[we,je]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Te,fe){return this.viewport.projectFlat(Te,fe)}},{key:"setViewProjectionMatrix",value:function(Te){this.overridedViewProjectionMatrix=Te}},{key:"jitterProjectionMatrix",value:function(Te,fe){var we=Qe.fromTranslation(Qe.create(),[Te,fe,0]);this.jitteredProjectionMatrix=Qe.multiply(Qe.create(),we,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Qe.multiply(Qe.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),R}())||Ve),yt=y(74902),Tt;(function(R){R.TOPRIGHT="topright",R.TOPLEFT="topleft",R.BOTTOMRIGHT="bottomright",R.BOTTOMLEFT="bottomleft",R.TOPCENTER="topcenter",R.BOTTOMCENTER="bottomcenter",R.LEFTCENTER="leftcenter",R.RIGHTCENTER="rightcenter",R.LEFTTOP="lefttop",R.RIGHTTOP="righttop",R.LEFTBOTTOM="leftbottom",R.RIGHTBOTTOM="rightbottom"})(Tt||(Tt={}));var Ht,en;function wt(R,ut){var Te=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!Te){if(Array.isArray(R)||(Te=Mn(R))||ut&&R&&typeof R.length=="number"){Te&&(R=Te);var fe=0,we=function(){};return{s:we,n:function(){return fe>=R.length?{done:!0}:{done:!1,value:R[fe++]}},e:function(Jt){throw Jt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,_t=!1,It;return{s:function(){Te=Te.call(R)},n:function(){var Jt=Te.next();return je=Jt.done,Jt},e:function(Jt){_t=!0,It=Jt},f:function(){try{!je&&Te.return!=null&&Te.return()}finally{if(_t)throw It}}}}function Mn(R,ut){if(R){if(typeof R=="string")return kn(R,ut);var Te=Object.prototype.toString.call(R).slice(8,-1);if(Te==="Object"&&R.constructor&&(Te=R.constructor.name),Te==="Map"||Te==="Set")return Array.from(R);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return kn(R,ut)}}function kn(R,ut){(ut==null||ut>R.length)&&(ut=R.length);for(var Te=0,fe=new Array(ut);Te<ut;Te++)fe[Te]=R[Te];return fe}var jn={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},mn=(Ht=(0,d.b2)(),Ht(en=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"container",void 0),(0,A.Z)(this,"controlCorners",void 0),(0,A.Z)(this,"controlContainer",void 0),(0,A.Z)(this,"scene",void 0),(0,A.Z)(this,"mapsService",void 0),(0,A.Z)(this,"controls",[]),(0,A.Z)(this,"unAddControls",[])}return(0,t.Z)(R,[{key:"init",value:function(Te,fe){this.container=Te.container,this.scene=fe,this.mapsService=fe.get(x.IMapService),this.initControlPos()}},{key:"addControl",value:function(Te,fe){var we=fe.get(x.IMapService);we.map?(Te.addTo(this.scene),this.controls.push(Te)):this.unAddControls.push(Te)}},{key:"getControlByName",value:function(Te){return this.controls.find(function(fe){return fe.controlOption.name===Te})}},{key:"removeControl",value:function(Te){var fe=this.controls.indexOf(Te);return fe>-1&&this.controls.splice(fe,1),Te.remove(),this}},{key:"addControls",value:function(){var Te=this;this.unAddControls.forEach(function(fe){fe.addTo(Te.scene),Te.controls.push(fe)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Te=wt(this.controls),fe;try{for(Te.s();!(fe=Te.n()).done;){var we=fe.value;we.remove()}}catch(je){Te.e(je)}finally{Te.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Te=this.controlCorners={},fe="l7-",we=this.controlContainer=w.SO.create("div",fe+"control-container",this.container);function je(){var It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ct=It.map(function(Jt){return fe+Jt}).join(" ");Te[It.filter(function(Jt){return!["row","column"].includes(Jt)}).join("")]=w.SO.create("div",Ct,we)}function _t(It){var Ct=It.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,yt.Z)(Ct),[jn[It]])}Object.values(Tt).forEach(function(It){je(_t(It))})}},{key:"clearControlPos",value:function(){for(var Te in this.controlCorners)this.controlCorners[Te]&&w.SO.remove(this.controlCorners[Te]);this.controlContainer&&w.SO.remove(this.controlContainer)}}]),R}())||en),cr,Cr,mi=(cr=(0,d.b2)(),cr(Cr=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"container",void 0),(0,A.Z)(this,"scene",void 0),(0,A.Z)(this,"mapsService",void 0),(0,A.Z)(this,"markers",[]),(0,A.Z)(this,"markerLayers",[]),(0,A.Z)(this,"unAddMarkers",[]),(0,A.Z)(this,"unAddMarkerLayers",[])}return(0,t.Z)(R,[{key:"addMarkerLayer",value:function(Te){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Te),Te.addTo(this.scene)):this.unAddMarkerLayers.push(Te)}},{key:"removeMarkerLayer",value:function(Te){Te.destroy(),this.markerLayers.indexOf(Te);var fe=this.markerLayers.indexOf(Te);fe>-1&&this.markerLayers.splice(fe,1)}},{key:"addMarker",value:function(Te){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Te),Te.addTo(this.scene)):this.unAddMarkers.push(Te)}},{key:"addMarkers",value:function(){var Te=this;this.unAddMarkers.forEach(function(fe){fe.addTo(Te.scene),Te.markers.push(fe)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Te=this;this.unAddMarkerLayers.forEach(function(fe){Te.markerLayers.push(fe),fe.addTo(Te.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Te){Te.remove(),this.markers.indexOf(Te);var fe=this.markers.indexOf(Te);fe>-1&&this.markers.splice(fe,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Te){this.scene=Te,this.mapsService=Te.get(x.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Te){Te.remove()}),this.markers=[],this.markerLayers.forEach(function(Te){Te.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Te){Te.destroy()}}]),R}())||Cr),$r,Sr,dr=($r=(0,d.b2)(),$r(Sr=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"scene",void 0),(0,A.Z)(this,"mapsService",void 0),(0,A.Z)(this,"popups",[]),(0,A.Z)(this,"unAddPopups",[])}return(0,t.Z)(R,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(Te){Te!=null&&Te.isOpen()&&Te.remove();var fe=this.popups.indexOf(Te);fe>-1&&this.popups.splice(fe,1);var we=this.unAddPopups.indexOf(Te);we>-1&&this.unAddPopups.splice(we,1)}},{key:"destroy",value:function(){this.popups.forEach(function(Te){return Te.remove()})}},{key:"addPopup",value:function(Te){var fe=this;Te&&Te.getOptions().autoClose&&[].concat((0,yt.Z)(this.popups),(0,yt.Z)(this.unAddPopups)).forEach(function(we){we.getOptions().autoClose&&fe.removePopup(we)}),this.isMarkerReady?(Te.addTo(this.scene),this.popups.push(Te)):this.unAddPopups.push(Te),Te.on("close",function(){fe.removePopup(Te)})}},{key:"initPopup",value:function(){var Te=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(fe){Te.addPopup(fe),Te.unAddPopups=[]})}},{key:"init",value:function(Te){this.scene=Te,this.mapsService=Te.get(x.IMapService)}}]),R}())||Sr),Pr=y(96486),Hr;(function(R){R.normal="normal",R.additive="additive",R.subtractive="subtractive",R.min="min",R.max="max",R.none="none"})(Hr||(Hr={}));var Xi;(function(R){R.MULTIPLE="MULTIPLE",R.SINGLE="SINGLE"})(Xi||(Xi={}));var Kn;(function(R){R.AND="and",R.OR="or"})(Kn||(Kn={}));var Gn;(function(R){R.INIT="init",R.UPDATE="update"})(Gn||(Gn={}));var pt={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Ha=pt,Sa,Qa,ma={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,isMini:!1,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Ei={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Kn.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},Ia=(Sa=(0,d.b2)(),Sa(Qa=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"sceneConfigCache",{}),(0,A.Z)(this,"layerConfigCache",{}),(0,A.Z)(this,"layerAttributeConfigCache",{})}return(0,t.Z)(R,[{key:"getSceneConfig",value:function(Te){return this.sceneConfigCache[Te]}},{key:"getSceneWarninfo",value:function(Te){return Ha[Te]}},{key:"setSceneConfig",value:function(Te,fe){this.sceneConfigCache[Te]=(0,v.Z)((0,v.Z)({},ma),fe)}},{key:"getLayerConfig",value:function(Te){return this.layerConfigCache[Te]}},{key:"setLayerConfig",value:function(Te,fe,we){this.layerConfigCache[fe]=(0,v.Z)({},(0,Pr.merge)({},this.sceneConfigCache[Te],Ei,we))}},{key:"getAttributeConfig",value:function(Te){return this.layerAttributeConfigCache[Te]}},{key:"setAttributeConfig",value:function(Te,fe){this.layerAttributeConfigCache[Te]=(0,v.Z)((0,v.Z)({},this.layerAttributeConfigCache[Te]),fe)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),R}())||Qa),si=y(43269),it=y(53229),Qn=y(98333),pe=Math.PI/180,at=512,Dt=4003e4;function vn(R){var ut=R.latitude,Te=ut===void 0?0:ut,fe=R.zoom,we=fe===void 0?0:fe,je=R.scale,_t=R.highPrecision,It=_t===void 0?!1:_t,Ct=R.flipY,Jt=Ct===void 0?!1:Ct;je=je!==void 0?je:Math.pow(2,we);var Wn={},Mr=at*je,hr=Math.cos(Te*pe),kr=Mr/360,ia=kr/hr,$i=Mr/Dt/hr;if(Wn.pixelsPerMeter=[$i,-$i,$i],Wn.metersPerPixel=[1/$i,-1/$i,1/$i],Wn.pixelsPerDegree=[kr,-ia,$i],Wn.degreesPerPixel=[1/kr,-1/ia,1/$i],It){var zi=pe*Math.tan(Te*pe)/hr,Ea=kr*zi/2,qa=Mr/Dt*zi,ua=qa/ia*$i;Wn.pixelsPerDegree2=[0,-Ea,qa],Wn.pixelsPerMeter2=[ua,0,ua],Jt&&(Wn.pixelsPerDegree2[1]=-Wn.pixelsPerDegree2[1],Wn.pixelsPerMeter2[1]=-Wn.pixelsPerMeter2[1])}return Jt&&(Wn.pixelsPerMeter[1]=-Wn.pixelsPerMeter[1],Wn.metersPerPixel[1]=-Wn.metersPerPixel[1],Wn.pixelsPerDegree[1]=-Wn.pixelsPerDegree[1],Wn.degreesPerPixel[1]=-Wn.degreesPerPixel[1]),Wn}var bn;(function(R){R[R.LNGLAT=1]="LNGLAT",R[R.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",R[R.VECTOR_TILE=3]="VECTOR_TILE",R[R.IDENTITY=4]="IDENTITY",R[R.P20=5]="P20",R[R.P20_OFFSET=6]="P20_OFFSET",R[R.METER_OFFSET=7]="METER_OFFSET",R[R.P20_2=8]="P20_2"})(bn||(bn={}));var Pn={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ar,Zr,Xr,ui,qr,Ti=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],fa=(ar=(0,d.b2)(),Zr=(0,d.f3)(x.ICameraService),ar(Xr=(ui=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"needRefresh",!0),(0,si.Z)(this,"cameraService",qr,this),(0,A.Z)(this,"coordinateSystem",void 0),(0,A.Z)(this,"viewportCenter",void 0),(0,A.Z)(this,"viewportCenterProjection",void 0),(0,A.Z)(this,"pixelsPerDegree",void 0),(0,A.Z)(this,"pixelsPerDegree2",void 0),(0,A.Z)(this,"pixelsPerMeter",void 0)}return(0,t.Z)(R,[{key:"refresh",value:function(Te){var fe=this.cameraService.getZoom(),we=this.cameraService.getZoomScale(),je=Te||this.cameraService.getCenter(),_t=vn({latitude:je[1],zoom:fe}),It=_t.pixelsPerMeter,Ct=_t.pixelsPerDegree;this.viewportCenter=je,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=It,this.pixelsPerDegree=Ct,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===bn.LNGLAT||this.coordinateSystem===bn.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===bn.LNGLAT_OFFSET?this.calculateLnglatOffset(je,fe):this.coordinateSystem===bn.P20_OFFSET&&this.calculateLnglatOffset(je,fe,we,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Te){this.coordinateSystem=Te}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Te,fe,we,je){var _t=vn({latitude:Te[1],zoom:fe,scale:we,flipY:je,highPrecision:!0}),It=_t.pixelsPerMeter,Ct=_t.pixelsPerDegree,Jt=_t.pixelsPerDegree2,Wn=this.cameraService.getViewMatrix(),Mr=this.cameraService.getProjectionMatrix(),hr=Qe.multiply([],Mr,Wn),kr=this.cameraService.projectFlat([Math.fround(Te[0]),Math.fround(Te[1])],Math.pow(2,fe));this.viewportCenterProjection=Qn.fF([],[kr[0],kr[1],0,1],hr),Wn=this.cameraService.getViewMatrixUncentered()||Wn,hr=Qe.multiply([],Mr,Wn),hr=Qe.multiply([],hr,Ti),this.cameraService.setViewProjectionMatrix(hr),this.pixelsPerMeter=It,this.pixelsPerDegree=Ct,this.pixelsPerDegree2=Jt}}]),R}(),qr=(0,it.Z)(ui.prototype,"cameraService",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ui))||Xr),Bn=y(71002),Li,Ji;function Na(R){var ut=ea();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var ha=(Li=(0,d.b2)(),Li(Ji=function(R){(0,o.Z)(Te,R);var ut=Na(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"renderMap",new Map),(0,A.Z)((0,e.Z)(fe),"enable",!1),(0,A.Z)((0,e.Z)(fe),"renderEnable",!1),(0,A.Z)((0,e.Z)(fe),"cacheLogs",{}),fe}return(0,t.Z)(Te,[{key:"setEnable",value:function(we){this.enable=!!we}},{key:"log",value:function(we,je){var _t=this;if(this.enable){var It=we.split("."),Ct=null;It.forEach(function(Jt,Wn){Ct!==null?(Ct[Jt]||(Ct[Jt]={}),Wn!==It.length-1&&(Ct=Ct[Jt])):(_t.cacheLogs[Jt]||(_t.cacheLogs[Jt]={}),Wn!==It.length-1&&(Ct=_t.cacheLogs[Jt])),Wn===It.length-1&&(Ct[Jt]=(0,v.Z)((0,v.Z)({time:Date.now()},Ct[Jt]),je))})}}},{key:"getLog",value:function(we){var je=this;switch((0,Bn.Z)(we)){case"string":return this.cacheLogs[we];case"object":return we.map(function(_t){return je.cacheLogs[_t]}).filter(function(_t){return _t!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(we){delete this.cacheLogs[we]}},{key:"generateRenderUid",value:function(){return this.renderEnable?(0,w.M8)():""}},{key:"renderDebug",value:function(we){this.renderEnable=we}},{key:"renderStart",value:function(we){if(!(!this.renderEnable||!this.enable)){var je=this.renderMap.get(we)||{};this.renderMap.set(we,(0,v.Z)((0,v.Z)({},je),{},{renderUid:we,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(we){if(!(!this.renderEnable||!this.enable)){var je=this.renderMap.get(we);if(je){var _t=je.renderStart,It=Date.now();this.emit("renderEnd",(0,v.Z)((0,v.Z)({},je),{},{renderEnd:It,renderDuration:It-_t})),this.renderMap.delete(we)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),Te}(p.EventEmitter))||Ji),Ta=y(20396),Aa=y.n(Ta),Wi;(function(R){R.Hover="hover",R.Click="click",R.Select="select",R.Active="active",R.Drag="drag"})(Wi||(Wi={}));var go,Ja,$o,Ua,Wa;function mo(R){var ut=fo();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function fo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Ro={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},te=(go=(0,d.b2)(),Ja=(0,d.f3)(x.IMapService),go($o=(Ua=function(R){(0,o.Z)(Te,R);var ut=mo(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"indragging",!1),(0,si.Z)((0,e.Z)(fe),"mapService",Wa,(0,e.Z)(fe)),(0,A.Z)((0,e.Z)(fe),"hammertime",void 0),(0,A.Z)((0,e.Z)(fe),"lastClickTime",0),(0,A.Z)((0,e.Z)(fe),"lastClickXY",[-1,-1]),(0,A.Z)((0,e.Z)(fe),"clickTimer",void 0),(0,A.Z)((0,e.Z)(fe),"$containter",void 0),(0,A.Z)((0,e.Z)(fe),"onDrag",function(It){var Ct=fe.interactionEvent(It);Ct.type=Ro[Ct.type],Ct.type==="dragging"?fe.indragging=!0:fe.indragging=!1,fe.emit(Wi.Drag,Ct)}),(0,A.Z)((0,e.Z)(fe),"onHammer",function(It){It.srcEvent.stopPropagation();var Ct=fe.interactionEvent(It);fe.emit(Wi.Hover,Ct)}),(0,A.Z)((0,e.Z)(fe),"onTouch",function(It){var Ct=It.touches[0];fe.onHover({x:Ct.pageX,y:Ct.pageY,type:"touch"})}),(0,A.Z)((0,e.Z)(fe),"onHover",function(It){var Ct=It.clientX,Jt=It.clientY,Wn=Ct,Mr=Jt,hr=It.type,kr=fe.mapService.getMapContainer();if(kr)if(w.eW)Wn=Wn-kr.left-0,Mr=Mr-kr.top-0;else{var ia=kr.getBoundingClientRect(),$i=ia.top,zi=ia.left;Wn=Wn-zi-kr.clientLeft,Mr=Mr-$i-kr.clientTop}var Ea=fe.mapService.containerToLngLat([Wn,Mr]);if(hr==="click"){if(!w.eW&&"ontouchstart"in document.documentElement)return;fe.isDoubleTap(Wn,Mr,Ea);return}if(hr==="touch"){fe.isDoubleTap(Wn,Mr,Ea);return}hr!=="click"&&hr!=="dblclick"&&fe.emit(Wi.Hover,{x:Wn,y:Mr,lngLat:Ea,type:hr,target:It})}),fe}return(0,t.Z)(Te,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Wi.Hover)}},{key:"triggerHover",value:function(we){var je=we.x,_t=we.y;this.emit(Wi.Hover,{x:je,y:_t})}},{key:"triggerSelect",value:function(we){this.emit(Wi.Select,{featureId:we})}},{key:"triggerActive",value:function(we){this.emit(Wi.Active,{featureId:we})}},{key:"handleMiniEvent",value:function(we){this.onHover({clientX:we.touches[0].pageX,clientY:we.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var we=this.mapService.getMapContainer();if(we)if(w.eW)w.vO.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var je=new(Aa()).Manager(we);je.add(new(Aa()).Tap({event:"dblclick",taps:2})),je.add(new(Aa()).Tap({event:"click"})),je.add(new(Aa()).Pan({threshold:0,pointers:0})),je.add(new(Aa()).Press({})),je.on("dblclick click",this.onHammer),je.on("panstart panmove panend pancancel",this.onDrag),we.addEventListener("mousemove",this.onHover),we.addEventListener("mousedown",this.onHover,!0),we.addEventListener("mouseup",this.onHover),we.addEventListener("contextmenu",this.onHover),this.hammertime=je}}},{key:"removeEventListenerOnMap",value:function(){if(w.eW)w.vO.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var we=this.mapService.getMapContainer();we&&(we.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),we.removeEventListener("mousedown",this.onHover),we.removeEventListener("mouseup",this.onHover),we.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(we){var je=we.type,_t=we.pointerType,It,Ct;_t==="touch"?(Ct=Math.floor(we.pointers[0].clientY),It=Math.floor(we.pointers[0].clientX)):(Ct=Math.floor(we.srcEvent.y),It=Math.floor(we.srcEvent.x));var Jt=this.mapService.getMapContainer();if(Jt){var Wn=Jt.getBoundingClientRect(),Mr=Wn.top,hr=Wn.left;It-=hr,Ct-=Mr}var kr=this.mapService.containerToLngLat([It,Ct]);return{x:It,y:Ct,lngLat:kr,type:je,target:we.srcEvent}}},{key:"isDoubleTap",value:function(we,je,_t){var It=this,Ct=new Date().getTime(),Jt="click";Ct-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-we)<10&&Math.abs(this.lastClickXY[1]-je)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Jt="dblclick",this.emit(Wi.Hover,{x:we,y:je,lngLat:_t,type:Jt})):(this.lastClickTime=Ct,this.lastClickXY=[we,je],this.clickTimer=setTimeout(function(){Jt="click",It.emit(Wi.Hover,{x:we,y:je,lngLat:_t,type:Jt})},400))}}]),Te}(M()),Wa=(0,it.Z)(Ua.prototype,"mapService",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ua))||$o),ho=0;function wn(R){if(w.eW)return null;var ut=R;if(typeof R=="string"&&(ut=document.getElementById(R)),ut){var Te=document.createElement("div");return Te.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Te.id="l7-scene-".concat(ho++),Te.classList.add("l7-scene"),ut.appendChild(Te),Te}return null}function tt(R){var ut,Te=!0;if((R==null||(ut=R.target)===null||ut===void 0?void 0:ut.target)instanceof HTMLElement)for(var fe,we=R==null||(fe=R.target)===null||fe===void 0?void 0:fe.target;we;){var je,_t=Array.from(we.classList);if(_t.includes("l7-marker")||_t.includes("l7-popup")){Te=!1;break}we=(je=we)===null||je===void 0?void 0:je.parentElement}return Te}var $e;(function(R){R[R.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",R[R.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",R[R.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",R[R.POINTS=0]="POINTS",R[R.LINES=1]="LINES",R[R.LINE_LOOP=2]="LINE_LOOP",R[R.LINE_STRIP=3]="LINE_STRIP",R[R.TRIANGLES=4]="TRIANGLES",R[R.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",R[R.TRIANGLE_FAN=6]="TRIANGLE_FAN",R[R.ZERO=0]="ZERO",R[R.ONE=1]="ONE",R[R.SRC_COLOR=768]="SRC_COLOR",R[R.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",R[R.SRC_ALPHA=770]="SRC_ALPHA",R[R.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",R[R.DST_ALPHA=772]="DST_ALPHA",R[R.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",R[R.DST_COLOR=774]="DST_COLOR",R[R.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",R[R.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",R[R.FUNC_ADD=32774]="FUNC_ADD",R[R.BLEND_EQUATION=32777]="BLEND_EQUATION",R[R.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",R[R.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",R[R.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",R[R.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",R[R.MAX_EXT=32776]="MAX_EXT",R[R.MIN_EXT=32775]="MIN_EXT",R[R.BLEND_DST_RGB=32968]="BLEND_DST_RGB",R[R.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",R[R.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",R[R.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",R[R.CONSTANT_COLOR=32769]="CONSTANT_COLOR",R[R.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",R[R.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",R[R.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",R[R.BLEND_COLOR=32773]="BLEND_COLOR",R[R.ARRAY_BUFFER=34962]="ARRAY_BUFFER",R[R.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",R[R.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",R[R.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",R[R.STREAM_DRAW=35040]="STREAM_DRAW",R[R.STATIC_DRAW=35044]="STATIC_DRAW",R[R.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",R[R.BUFFER_SIZE=34660]="BUFFER_SIZE",R[R.BUFFER_USAGE=34661]="BUFFER_USAGE",R[R.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",R[R.FRONT=1028]="FRONT",R[R.BACK=1029]="BACK",R[R.FRONT_AND_BACK=1032]="FRONT_AND_BACK",R[R.CULL_FACE=2884]="CULL_FACE",R[R.BLEND=3042]="BLEND",R[R.DITHER=3024]="DITHER",R[R.STENCIL_TEST=2960]="STENCIL_TEST",R[R.DEPTH_TEST=2929]="DEPTH_TEST",R[R.SCISSOR_TEST=3089]="SCISSOR_TEST",R[R.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",R[R.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",R[R.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",R[R.NO_ERROR=0]="NO_ERROR",R[R.INVALID_ENUM=1280]="INVALID_ENUM",R[R.INVALID_VALUE=1281]="INVALID_VALUE",R[R.INVALID_OPERATION=1282]="INVALID_OPERATION",R[R.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",R[R.CW=2304]="CW",R[R.CCW=2305]="CCW",R[R.LINE_WIDTH=2849]="LINE_WIDTH",R[R.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",R[R.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",R[R.CULL_FACE_MODE=2885]="CULL_FACE_MODE",R[R.FRONT_FACE=2886]="FRONT_FACE",R[R.DEPTH_RANGE=2928]="DEPTH_RANGE",R[R.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",R[R.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",R[R.DEPTH_FUNC=2932]="DEPTH_FUNC",R[R.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",R[R.STENCIL_FUNC=2962]="STENCIL_FUNC",R[R.STENCIL_FAIL=2964]="STENCIL_FAIL",R[R.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",R[R.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",R[R.STENCIL_REF=2967]="STENCIL_REF",R[R.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",R[R.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",R[R.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",R[R.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",R[R.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",R[R.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",R[R.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",R[R.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",R[R.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",R[R.VIEWPORT=2978]="VIEWPORT",R[R.SCISSOR_BOX=3088]="SCISSOR_BOX",R[R.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",R[R.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",R[R.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",R[R.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",R[R.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",R[R.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",R[R.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",R[R.RED_BITS=3410]="RED_BITS",R[R.GREEN_BITS=3411]="GREEN_BITS",R[R.BLUE_BITS=3412]="BLUE_BITS",R[R.ALPHA_BITS=3413]="ALPHA_BITS",R[R.DEPTH_BITS=3414]="DEPTH_BITS",R[R.STENCIL_BITS=3415]="STENCIL_BITS",R[R.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",R[R.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",R[R.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",R[R.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",R[R.SAMPLES=32937]="SAMPLES",R[R.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",R[R.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",R[R.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",R[R.DONT_CARE=4352]="DONT_CARE",R[R.FASTEST=4353]="FASTEST",R[R.NICEST=4354]="NICEST",R[R.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",R[R.BYTE=5120]="BYTE",R[R.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",R[R.SHORT=5122]="SHORT",R[R.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",R[R.INT=5124]="INT",R[R.UNSIGNED_INT=5125]="UNSIGNED_INT",R[R.FLOAT=5126]="FLOAT",R[R.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",R[R.ALPHA=6406]="ALPHA",R[R.RGB=6407]="RGB",R[R.RGBA=6408]="RGBA",R[R.LUMINANCE=6409]="LUMINANCE",R[R.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",R[R.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",R[R.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",R[R.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",R[R.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",R[R.VERTEX_SHADER=35633]="VERTEX_SHADER",R[R.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",R[R.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",R[R.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",R[R.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",R[R.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",R[R.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",R[R.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",R[R.SHADER_TYPE=35663]="SHADER_TYPE",R[R.DELETE_STATUS=35712]="DELETE_STATUS",R[R.LINK_STATUS=35714]="LINK_STATUS",R[R.VALIDATE_STATUS=35715]="VALIDATE_STATUS",R[R.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",R[R.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",R[R.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",R[R.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",R[R.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",R[R.NEVER=512]="NEVER",R[R.LESS=513]="LESS",R[R.EQUAL=514]="EQUAL",R[R.LEQUAL=515]="LEQUAL",R[R.GREATER=516]="GREATER",R[R.NOTEQUAL=517]="NOTEQUAL",R[R.GEQUAL=518]="GEQUAL",R[R.ALWAYS=519]="ALWAYS",R[R.KEEP=7680]="KEEP",R[R.REPLACE=7681]="REPLACE",R[R.INCR=7682]="INCR",R[R.DECR=7683]="DECR",R[R.INVERT=5386]="INVERT",R[R.INCR_WRAP=34055]="INCR_WRAP",R[R.DECR_WRAP=34056]="DECR_WRAP",R[R.VENDOR=7936]="VENDOR",R[R.RENDERER=7937]="RENDERER",R[R.VERSION=7938]="VERSION",R[R.NEAREST=9728]="NEAREST",R[R.LINEAR=9729]="LINEAR",R[R.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",R[R.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",R[R.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",R[R.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",R[R.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",R[R.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",R[R.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",R[R.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",R[R.TEXTURE_2D=3553]="TEXTURE_2D",R[R.TEXTURE=5890]="TEXTURE",R[R.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",R[R.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",R[R.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",R[R.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",R[R.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",R[R.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",R[R.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",R[R.TEXTURE0=33984]="TEXTURE0",R[R.TEXTURE1=33985]="TEXTURE1",R[R.TEXTURE2=33986]="TEXTURE2",R[R.TEXTURE3=33987]="TEXTURE3",R[R.TEXTURE4=33988]="TEXTURE4",R[R.TEXTURE5=33989]="TEXTURE5",R[R.TEXTURE6=33990]="TEXTURE6",R[R.TEXTURE7=33991]="TEXTURE7",R[R.TEXTURE8=33992]="TEXTURE8",R[R.TEXTURE9=33993]="TEXTURE9",R[R.TEXTURE10=33994]="TEXTURE10",R[R.TEXTURE11=33995]="TEXTURE11",R[R.TEXTURE12=33996]="TEXTURE12",R[R.TEXTURE13=33997]="TEXTURE13",R[R.TEXTURE14=33998]="TEXTURE14",R[R.TEXTURE15=33999]="TEXTURE15",R[R.TEXTURE16=34e3]="TEXTURE16",R[R.TEXTURE17=34001]="TEXTURE17",R[R.TEXTURE18=34002]="TEXTURE18",R[R.TEXTURE19=34003]="TEXTURE19",R[R.TEXTURE20=34004]="TEXTURE20",R[R.TEXTURE21=34005]="TEXTURE21",R[R.TEXTURE22=34006]="TEXTURE22",R[R.TEXTURE23=34007]="TEXTURE23",R[R.TEXTURE24=34008]="TEXTURE24",R[R.TEXTURE25=34009]="TEXTURE25",R[R.TEXTURE26=34010]="TEXTURE26",R[R.TEXTURE27=34011]="TEXTURE27",R[R.TEXTURE28=34012]="TEXTURE28",R[R.TEXTURE29=34013]="TEXTURE29",R[R.TEXTURE30=34014]="TEXTURE30",R[R.TEXTURE31=34015]="TEXTURE31",R[R.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",R[R.REPEAT=10497]="REPEAT",R[R.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",R[R.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",R[R.FLOAT_VEC2=35664]="FLOAT_VEC2",R[R.FLOAT_VEC3=35665]="FLOAT_VEC3",R[R.FLOAT_VEC4=35666]="FLOAT_VEC4",R[R.INT_VEC2=35667]="INT_VEC2",R[R.INT_VEC3=35668]="INT_VEC3",R[R.INT_VEC4=35669]="INT_VEC4",R[R.BOOL=35670]="BOOL",R[R.BOOL_VEC2=35671]="BOOL_VEC2",R[R.BOOL_VEC3=35672]="BOOL_VEC3",R[R.BOOL_VEC4=35673]="BOOL_VEC4",R[R.FLOAT_MAT2=35674]="FLOAT_MAT2",R[R.FLOAT_MAT3=35675]="FLOAT_MAT3",R[R.FLOAT_MAT4=35676]="FLOAT_MAT4",R[R.SAMPLER_2D=35678]="SAMPLER_2D",R[R.SAMPLER_CUBE=35680]="SAMPLER_CUBE",R[R.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",R[R.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",R[R.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",R[R.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",R[R.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",R[R.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",R[R.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",R[R.COMPILE_STATUS=35713]="COMPILE_STATUS",R[R.LOW_FLOAT=36336]="LOW_FLOAT",R[R.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",R[R.HIGH_FLOAT=36338]="HIGH_FLOAT",R[R.LOW_INT=36339]="LOW_INT",R[R.MEDIUM_INT=36340]="MEDIUM_INT",R[R.HIGH_INT=36341]="HIGH_INT",R[R.FRAMEBUFFER=36160]="FRAMEBUFFER",R[R.RENDERBUFFER=36161]="RENDERBUFFER",R[R.RGBA4=32854]="RGBA4",R[R.RGB5_A1=32855]="RGB5_A1",R[R.RGB565=36194]="RGB565",R[R.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",R[R.STENCIL_INDEX=6401]="STENCIL_INDEX",R[R.STENCIL_INDEX8=36168]="STENCIL_INDEX8",R[R.DEPTH_STENCIL=34041]="DEPTH_STENCIL",R[R.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",R[R.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",R[R.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",R[R.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",R[R.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",R[R.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",R[R.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",R[R.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",R[R.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",R[R.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",R[R.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",R[R.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",R[R.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",R[R.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",R[R.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",R[R.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",R[R.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",R[R.NONE=0]="NONE",R[R.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",R[R.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",R[R.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",R[R.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",R[R.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",R[R.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",R[R.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",R[R.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",R[R.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",R[R.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",R[R.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",R[R.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",R[R.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",R[R.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})($e||($e={}));var dt,Ke,qt,nn,ln,An,Oe,De,Be,Ye,Nt,jt,un,Hn=(dt=(0,d.b2)(),Ke=(0,d.f3)(x.IMapService),qt=(0,d.f3)(x.IRendererService),nn=(0,d.f3)(x.IGlobalConfigService),ln=(0,d.f3)(x.IInteractionService),An=(0,d.f3)(x.ILayerService),dt(Oe=(De=function(){function R(){var ut=this;(0,u.Z)(this,R),(0,A.Z)(this,"pickedColors",void 0),(0,A.Z)(this,"pickedTileLayers",[]),(0,si.Z)(this,"mapService",Be,this),(0,si.Z)(this,"rendererService",Ye,this),(0,si.Z)(this,"configService",Nt,this),(0,si.Z)(this,"interactionService",jt,this),(0,si.Z)(this,"layerService",un,this),(0,A.Z)(this,"pickingFBO",void 0),(0,A.Z)(this,"width",0),(0,A.Z)(this,"height",0),(0,A.Z)(this,"alreadyInPicking",!1),(0,A.Z)(this,"pickBufferScale",1),(0,A.Z)(this,"pickFromPickingFBO",function(Te,fe){var we=fe.x,je=fe.y,_t=fe.lngLat,It=fe.type,Ct=fe.target,Jt=!1,Wn=ut.rendererService,Mr=Wn.readPixels,hr=Wn.getContainer,kr=ut.getContainerSize(hr()),ia=kr.width,$i=kr.height;ia*=w.SO.DPR,$i*=w.SO.DPR;var zi=Te.getLayerConfig(),Ea=zi.enableHighlight,qa=zi.enableSelect,ua=we*w.SO.DPR,rs=je*w.SO.DPR;if(ua>ia-1*w.SO.DPR||ua<0||rs>$i-1*w.SO.DPR||rs<0)return!1;var La=Mr({x:Math.floor(ua/ut.pickBufferScale),y:Math.floor(($i-(je+1)*w.SO.DPR)/ut.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ut.pickingFBO});if(ut.pickedColors=La,La[0]!==0||La[1]!==0||La[2]!==0){var Po=(0,w.W0)(La),Wo=Te.layerPickService.getFeatureById(Po);Po!==Te.getCurrentPickId()&&It==="mousemove"&&(It="mouseenter");var Xa={x:we,y:je,type:It,lngLat:_t,featureId:Po,feature:Wo,target:Ct};Wo&&(Jt=!0,Te.setCurrentPickId(Po),ut.triggerHoverOnLayer(Te,Xa))}else{var Ra={x:we,y:je,lngLat:_t,type:Te.getCurrentPickId()!==null&&It==="mousemove"?"mouseout":"un"+It,featureId:null,target:Ct,feature:null};ut.triggerHoverOnLayer(Te,(0,v.Z)((0,v.Z)({},Ra),{},{type:"unpick"})),ut.triggerHoverOnLayer(Te,Ra),Te.setCurrentPickId(null)}if(Ea&&Te.layerPickService.highlightPickedFeature(La),qa&&It==="click"&&(La==null?void 0:La.toString())!==[0,0,0,0].toString()){var To=(0,w.W0)(La);Te.getCurrentSelectedId()===null||To!==Te.getCurrentSelectedId()?(Te.layerPickService.selectFeature(La),Te.setCurrentSelectedId(To)):(Te.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),Te.setCurrentSelectedId(null))}return Jt})}return(0,t.Z)(R,[{key:"init",value:function(Te){var fe=this.rendererService,we=fe.createTexture2D,je=fe.createFramebuffer,_t=fe.getContainer,It=this.getContainerSize(_t()),Ct=It.width,Jt=It.height;Ct*=w.SO.DPR,Jt*=w.SO.DPR,this.pickBufferScale=this.configService.getSceneConfig(Te).pickBufferScale||1,this.pickingFBO=je({color:we({width:Math.round(Ct/this.pickBufferScale),height:Math.round(Jt/this.pickBufferScale),wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.interactionService.on(Wi.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(we,je,_t){var It=this,Ct,Jt,Wn;return ze().wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:Ct=this.rendererService,Jt=Ct.useFramebuffer,Wn=Ct.clear,this.resizePickingFBO(),Jt(this.pickingFBO,function(){Wn({framebuffer:It.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),we.hooks.beforePickingEncode.call(),we.renderModels({ispick:!0}),we.hooks.afterPickingEncode.call();var kr=It.pickBox(we,je);_t(kr)});case 3:case"end":return hr.stop()}},fe,this)}));function Te(fe,we,je){return ut.apply(this,arguments)}return Te}()},{key:"pickBox",value:function(Te,fe){var we=this,je=fe.map(function(To){var ls=To<0?0:To;return Math.floor(ls*w.SO.DPR/we.pickBufferScale)}),_t=(0,Ne.Z)(je,4),It=_t[0],Ct=_t[1],Jt=_t[2],Wn=_t[3],Mr=this.rendererService,hr=Mr.readPixels,kr=Mr.getContainer,ia=this.getContainerSize(kr()),$i=ia.width,zi=ia.height;if($i*=w.SO.DPR,zi*=w.SO.DPR,It>($i-1)*w.SO.DPR/this.pickBufferScale||Jt<0||Ct>(zi-1)*w.SO.DPR/this.pickBufferScale||Wn<0)return[];for(var Ea=Math.min($i/this.pickBufferScale,Jt)-It,qa=Math.min(zi/this.pickBufferScale,Wn)-Ct,ua=hr({x:It,y:Math.floor(zi/this.pickBufferScale-(Wn+1)),width:Ea,height:qa,data:new Uint8Array(Ea*qa*4),framebuffer:this.pickingFBO}),rs=[],La={},Po=0;Po<ua.length/4;Po=Po+1){var Wo=ua.slice(Po*4,Po*4+4),Xa=(0,w.W0)(Wo);if(Xa!==-1&&!La[Xa]){var Ra=Te.layerPickService.getFeatureById(Xa);rs.push((0,v.Z)((0,v.Z)({},Ra),{},{pickedFeatureIdx:Xa})),La[Xa]=!0}}return rs}},{key:"handleCursor",value:function(Te,fe){var we=Te.getLayerConfig(),je=we.cursor,_t=je===void 0?"":je,It=we.cursorEnabled;if(It){var Ct=this.mapService.version,Jt=Ct==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Wn=Jt==null?void 0:Jt.style.getPropertyValue("cursor");fe==="unmousemove"&&Wn!==""?Jt==null||Jt.style.setProperty("cursor",""):fe==="mousemove"&&(Jt==null||Jt.style.setProperty("cursor",_t))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(Te){return Te.getContext?{width:Te.width/w.SO.DPR,height:Te.height/w.SO.DPR}:Te.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(we){return ze().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(!(!this.layerService.needPick(we.type)||!this.isPickingAllLayer())){_t.next=2;break}return _t.abrupt("return");case 2:return this.alreadyInPicking=!0,_t.next=5,this.pickingLayers(we);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return _t.stop()}},fe,this)}));function Te(fe){return ut.apply(this,arguments)}return Te}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var Te=this.rendererService.getContainer,fe=this.getContainerSize(Te()),we=fe.width,je=fe.height;we*=w.SO.DPR,je*=w.SO.DPR,(this.width!==we||this.height!==je)&&(this.pickingFBO.resize({width:Math.round(we/this.pickBufferScale),height:Math.round(je/this.pickBufferScale)}),this.width=we,this.height=je)}},{key:"pickingLayers",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(we){var je=this,_t,It,Ct;return ze().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:_t=this.rendererService,It=_t.useFramebuffer,Ct=_t.clear,this.resizePickingFBO(),It(this.pickingFBO,function(){var Mr=je.layerService.getRenderList();Mr.filter(function(hr){return hr.needPick(we.type)}).reverse().some(function(hr){Ct({framebuffer:je.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),hr.layerPickService.pickRender(we);var kr=je.pickFromPickingFBO(hr,we);return je.layerService.pickedLayerId=kr?+hr.id:-1,kr&&!hr.getLayerConfig().enablePropagation})});case 3:case"end":return Wn.stop()}},fe,this)}));function Te(fe){return ut.apply(this,arguments)}return Te}()},{key:"triggerHoverOnLayer",value:function(Te,fe){tt(fe)&&(this.handleCursor(Te,fe.type),Te.emit(fe.type,fe))}}]),R}(),Be=(0,it.Z)(De.prototype,"mapService",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=(0,it.Z)(De.prototype,"rendererService",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=(0,it.Z)(De.prototype,"configService",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=(0,it.Z)(De.prototype,"interactionService",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=(0,it.Z)(De.prototype,"layerService",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De))||Oe),Rn=function(){function R(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,u.Z)(this,R),(0,A.Z)(this,"autoStart",void 0),(0,A.Z)(this,"startTime",0),(0,A.Z)(this,"oldTime",0),(0,A.Z)(this,"running",!1),(0,A.Z)(this,"elapsedTime",0),this.autoStart=ut}return(0,t.Z)(R,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Te=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var fe=(typeof performance=="undefined"?Date:performance).now();Te=(fe-this.oldTime)/1e3,this.oldTime=fe,this.elapsedTime+=Te}return Te}}]),R}(),fr,or,$t,er,Jn,Bt,Ai,Le,Xe;function He(R,ut){var Te=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!Te){if(Array.isArray(R)||(Te=Ot(R))||ut&&R&&typeof R.length=="number"){Te&&(R=Te);var fe=0,we=function(){};return{s:we,n:function(){return fe>=R.length?{done:!0}:{done:!1,value:R[fe++]}},e:function(Jt){throw Jt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,_t=!1,It;return{s:function(){Te=Te.call(R)},n:function(){var Jt=Te.next();return je=Jt.done,Jt},e:function(Jt){_t=!0,It=Jt},f:function(){try{!je&&Te.return!=null&&Te.return()}finally{if(_t)throw It}}}}function Ot(R,ut){if(R){if(typeof R=="string")return Vt(R,ut);var Te=Object.prototype.toString.call(R).slice(8,-1);if(Te==="Object"&&R.constructor&&(Te=R.constructor.name),Te==="Map"||Te==="Set")return Array.from(R);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return Vt(R,ut)}}function Vt(R,ut){(ut==null||ut>R.length)&&(ut=R.length);for(var Te=0,fe=new Array(ut);Te<ut;Te++)fe[Te]=R[Te];return fe}function gn(R){var ut=vt();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function vt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var zt=(fr=(0,d.b2)(),or=(0,d.f3)(x.IRendererService),$t=(0,d.f3)(x.IMapService),er=(0,d.f3)(x.IDebugService),fr(Jn=(Bt=function(R){(0,o.Z)(Te,R);var ut=gn(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"pickedLayerId",-1),(0,A.Z)((0,e.Z)(fe),"clock",new Rn),(0,A.Z)((0,e.Z)(fe),"alreadyInRendering",!1),(0,A.Z)((0,e.Z)(fe),"layers",[]),(0,A.Z)((0,e.Z)(fe),"layerList",[]),(0,A.Z)((0,e.Z)(fe),"layerRenderID",void 0),(0,A.Z)((0,e.Z)(fe),"sceneInited",!1),(0,A.Z)((0,e.Z)(fe),"animateInstanceCount",0),(0,A.Z)((0,e.Z)(fe),"shaderPicking",!0),(0,A.Z)((0,e.Z)(fe),"enableRender",!0),(0,si.Z)((0,e.Z)(fe),"renderService",Ai,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"mapService",Le,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"debugService",Xe,(0,e.Z)(fe)),(0,A.Z)((0,e.Z)(fe),"reRender",(0,Pr.throttle)(function(){fe.renderLayers()},32)),(0,A.Z)((0,e.Z)(fe),"throttleRenderLayers",(0,Pr.throttle)(function(){fe.renderLayers()},16)),fe}return(0,t.Z)(Te,[{key:"needPick",value:function(we){return this.layerList.some(function(je){return je.needPick(we)})}},{key:"add",value:function(we){var je=this;this.layers.push(we),this.sceneInited&&we.init().then(function(){je.renderLayers()})}},{key:"addMask",value:function(we){var je=this;this.sceneInited&&we.init().then(function(){je.renderLayers()})}},{key:"initLayers",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(){var _t=this;return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var Jt=(0,Ze.Z)(ze().mark(function Wn(Mr){return ze().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Mr.startInit){kr.next=4;break}return kr.next=3,Mr.init();case 3:_t.updateLayerRenderList();case 4:case"end":return kr.stop()}},Wn)}));return function(Wn){return Jt.apply(this,arguments)}}());case 2:case"end":return Ct.stop()}},je,this)}));function we(){return fe.apply(this,arguments)}return we}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(we){return this.layers.find(function(je){return je.id===we})}},{key:"getLayerByName",value:function(we){return this.layers.find(function(je){return je.name===we})}},{key:"remove",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(_t,It){var Ct,Jt;return ze().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:It?(Ct=It.layerChildren.indexOf(_t),Ct>-1&&It.layerChildren.splice(Ct,1)):(Jt=this.layers.indexOf(_t),Jt>-1&&this.layers.splice(Jt,1)),_t.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return Mr.stop()}},je,this)}));function we(je,_t){return fe.apply(this,arguments)}return we}()},{key:"removeAllLayers",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(){return ze().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:this.destroy(),this.reRender();case 2:case"end":return It.stop()}},je,this)}));function we(){return fe.apply(this,arguments)}return we}()},{key:"setEnableRender",value:function(we){this.enableRender=we}},{key:"renderLayers",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(){var _t,It,Ct,Jt,Wn,Mr;return ze().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){kr.next=2;break}return kr.abrupt("return");case 2:this.updateLayerRenderList(),_t=this.debugService.generateRenderUid(),this.debugService.renderStart(_t),this.alreadyInRendering=!0,this.clear(),It=He(this.layerList),kr.prev=8,It.s();case 10:if((Ct=It.n()).done){kr.next=23;break}if(Jt=Ct.value,Wn=Jt.getLayerConfig(),Mr=Wn.enableMask,Jt.masks.filter(function(ia){return ia.inited}).length>0&&Mr&&this.renderMask(Jt.masks),!Jt.getLayerConfig().enableMultiPassRenderer){kr.next=19;break}return kr.next=17,Jt.renderMultiPass();case 17:kr.next=21;break;case 19:return kr.next=21,Jt.render();case 21:kr.next=10;break;case 23:kr.next=28;break;case 25:kr.prev=25,kr.t0=kr.catch(8),It.e(kr.t0);case 28:return kr.prev=28,It.f(),kr.finish(28);case 31:this.debugService.renderEnd(_t),this.alreadyInRendering=!1;case 33:case"end":return kr.stop()}},je,this,[[8,25,28,31]])}));function we(){return fe.apply(this,arguments)}return we}()},{key:"renderMask",value:function(we){var je=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var _t=we.length>1?Xi.MULTIPLE:Xi.SINGLE,It=He(we),Ct;try{for(It.s();!(Ct=It.n()).done;){var Jt=Ct.value;Jt.render({isStencil:!0,stencilType:_t,stencilIndex:je++})}}catch(Wn){It.e(Wn)}finally{It.f()}}},{key:"beforeRenderData",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(_t){var It;return ze().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.next=2,_t.hooks.beforeRenderData.promise();case 2:It=Jt.sent,It&&this.renderLayers();case 4:case"end":return Jt.stop()}},je,this)}));function we(je){return fe.apply(this,arguments)}return we}()},{key:"renderTileLayerMask",value:function(we){var je=0,_t=we.getLayerConfig(),It=_t.enableMask,Ct=It===void 0?!0:It,Jt=we.tileMask?1:0,Wn=we.masks.filter(function($i){return $i.inited});Jt=Jt+(Ct?Wn.length:1);var Mr=Jt>1?Xi.MULTIPLE:Xi.SINGLE;if((we.tileMask||Wn.length&&Ct)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),Wn.length&&Ct){var hr=He(Wn),kr;try{for(hr.s();!(kr=hr.n()).done;){var ia=kr.value;ia.render({isStencil:!0,stencilType:Mr,stencilIndex:je++})}}catch($i){hr.e($i)}finally{hr.f()}}we.tileMask&&we.tileMask.render({isStencil:!0,stencilType:Mr,stencilIndex:je++,stencilOperation:Kn.OR})}},{key:"renderTileLayer",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(_t){return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(this.renderTileLayerMask(_t),!_t.getLayerConfig().enableMultiPassRenderer){Ct.next=6;break}return Ct.next=4,_t.renderMultiPass();case 4:Ct.next=8;break;case 6:return Ct.next=8,_t.render();case 8:case"end":return Ct.stop()}},je,this)}));function we(je){return fe.apply(this,arguments)}return we}()},{key:"updateLayerRenderList",value:function(){var we=this;this.layerList=[],this.layers.filter(function(je){return je.inited}).filter(function(je){return je.isVisible()}).sort(function(je,_t){return je.zIndex-_t.zIndex}).forEach(function(je){we.layerList.push(je)})}},{key:"destroy",value:function(){this.layers.forEach(function(we){we.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var we=(0,w.CI)(this.mapService.bgColor);this.renderService.clear({color:we,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=w.vO.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){w.vO.cancelAnimationFrame(this.layerRenderID)}}]),Te}(p.EventEmitter),Ai=(0,it.Z)(Bt.prototype,"renderService",[or],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=(0,it.Z)(Bt.prototype,"mapService",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=(0,it.Z)(Bt.prototype,"debugService",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt))||Jn),Kt=y(91),fn=function(){function R(ut){var Te=this;(0,u.Z)(this,R),(0,A.Z)(this,"name",void 0),(0,A.Z)(this,"type",void 0),(0,A.Z)(this,"scale",void 0),(0,A.Z)(this,"descriptor",void 0),(0,A.Z)(this,"featureBufferLayout",[]),(0,A.Z)(this,"needRescale",!1),(0,A.Z)(this,"needRemapping",!1),(0,A.Z)(this,"needRegenerateVertices",!1),(0,A.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,A.Z)(this,"vertexAttribute",void 0),(0,A.Z)(this,"defaultCallback",function(fe){if(fe.length===0){var we;return((we=Te.scale)===null||we===void 0?void 0:we.defaultValues)||[]}return fe.map(function(je,_t){var It,Ct=(It=Te.scale)===null||It===void 0?void 0:It.scalers[_t].func,Jt=Ct(je);return Jt})}),this.setProps(ut)}return(0,t.Z)(R,[{key:"setProps",value:function(Te){Object.assign(this,Te)}},{key:"mapping",value:function(Te){var fe;if((fe=this.scale)!==null&&fe!==void 0&&fe.callback){var we,je=(we=this.scale)===null||we===void 0?void 0:we.callback.apply(we,(0,yt.Z)(Te));if(!(0,Pr.isNil)(je))return[je]}return this.defaultCallback(Te)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),R}(),zn=["modelType"],wr=["buffer","update","name"],Er=["buffer","update","name"],_=["buffer","update","name"],N,me,q,Ue,ct,Lt,hn=(N={},(0,A.Z)(N,$e.FLOAT,4),(0,A.Z)(N,$e.UNSIGNED_BYTE,1),(0,A.Z)(N,$e.UNSIGNED_SHORT,2),N),on=(me=(0,d.b2)(),q=(0,d.f3)(x.IRendererService),me(Ue=(ct=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"attributesAndIndices",void 0),(0,si.Z)(this,"rendererService",Lt,this),(0,A.Z)(this,"attributes",[]),(0,A.Z)(this,"triangulation",void 0),(0,A.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,t.Z)(R,[{key:"registerStyleAttribute",value:function(Te){var fe=this.getLayerStyleAttribute(Te.name||"");return fe?fe.setProps(Te):(fe=new fn(Te),this.attributes.push(fe)),fe}},{key:"updateScaleAttribute",value:function(Te){this.attributes.forEach(function(fe){var we,je=fe.name,_t=(we=fe.scale)===null||we===void 0?void 0:we.field;(Te[je]||_t&&Te[_t])&&(fe.needRescale=!0,fe.needRemapping=!0,fe.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(Te,fe,we){var je=this.getLayerStyleAttribute(Te);je||(je=this.registerStyleAttribute((0,v.Z)((0,v.Z)({},fe),{},{name:Te})));var _t=fe.scale;_t&&je&&(je.scale=_t,je.needRescale=!0,je.needRemapping=!0,je.needRegenerateVertices=!0,we&&we.featureRange&&(je.featureRange=we.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Te){return this.attributes.find(function(fe){return fe.name===Te})}},{key:"getLayerAttributeScale",value:function(Te){var fe,we=this.getLayerStyleAttribute(Te),je=we==null||(fe=we.scale)===null||fe===void 0?void 0:fe.scalers;return je&&je[0]?je[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Te,fe){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,je=arguments.length>3?arguments[3]:void 0,_t=arguments.length>4?arguments[4]:void 0,It=this.attributes.find(function(La){return La.name===Te});if(It&&It.descriptor){var Ct=It.descriptor,Jt=Ct.update,Wn=Ct.buffer,Mr=Ct.size,hr=Mr===void 0?0:Mr,kr=hn[Wn.type||$e.FLOAT];if(Jt){var ia=this.featureLayout,$i=ia.elements,zi=ia.sizePerElement,Ea=$i.slice(we,je);if(!Ea.length)return;var qa=Ea[0].offset,ua=qa*hr*kr,rs=Ea.map(function(La,Po){for(var Wo=La.featureIdx,Xa=La.vertices,Ra=La.normals,To=Xa.length/zi,ls=[],is=0;is<To;is++){var Ps=Ra?Ra.slice(is*3,is*3+3):[];ls.push.apply(ls,(0,yt.Z)(Jt(fe[Wo],Wo,Xa.slice(is*zi,is*zi+zi),Po,Ps)))}return ls}).reduce(function(La,Po){return La.push.apply(La,(0,yt.Z)(Po)),La},[]);It.vertexAttribute.updateBuffer({data:rs,offset:ua}),_t==null||_t.emit("legend:".concat(Te),{type:Te,attr:It})}}}},{key:"createAttributesAndIndicesAscy",value:function(Te,fe,we){var je=this;this.featureLayout={sizePerElement:0,elements:[]};var _t=this.attributes.map(function(ia){return ia.resetDescriptor(),ia.descriptor}).filter(function(ia){return ia}),It=we.modelType,Ct=(0,Kt.Z)(we,zn),Jt=this.rendererService,Wn=Jt.createAttribute,Mr=Jt.createBuffer,hr=Jt.createElements,kr={};return new Promise(function(ia,$i){(0,w.hH)(It,(0,v.Z)({descriptors:je.getDescriptorsWithOutFunc(_t),features:Te,segmentNumber:fe},Ct)).then(function(zi){zi.descriptors.forEach(function(qa,ua){if(qa){var rs=qa.buffer,La=qa.update,Po=qa.name,Wo=(0,Kt.Z)(qa,wr),Xa=Wn((0,v.Z)({buffer:Mr(rs)},Wo));kr[qa.name||""]=Xa,je.attributes[ua].vertexAttribute=Xa}}),je.featureLayout=zi.featureLayout;var Ea=hr({data:zi.indices,type:$e.UNSIGNED_INT,count:zi.indices.length});je.attributesAndIndices={attributes:kr,elements:Ea,count:null},ia(je.attributesAndIndices)}).catch(function(zi){console.warn(zi),$i(zi)})})}},{key:"createAttributesAndIndices",value:function(Te,fe,we){var je=this;this.featureLayout={sizePerElement:0,elements:[]},fe&&(this.triangulation=fe);var _t=this.attributes.map(function(ua){return ua.resetDescriptor(),ua.descriptor}),It=0,Ct=0,Jt=[],Wn=[],Mr=[],hr=3;Te.forEach(function(ua,rs){var La=je.triangulation(ua,we),Po=La.indices,Wo=La.vertices,Xa=La.normals,Ra=La.size,To=La.indexes,ls=La.count;typeof ls=="number"&&(Ct+=ls),Po.forEach(function(Qs){Wn.push(Qs+It)}),hr=Ra;var is=Wo.length/Ra;je.featureLayout.sizePerElement=hr,je.featureLayout.elements.push({featureIdx:rs,vertices:Wo,normals:Xa,offset:It}),It+=is;for(var Ps=function(Es){var Wu=(Xa==null?void 0:Xa.slice(Es*3,Es*3+3))||[],Fu=Wo.slice(Es*Ra,Es*Ra+Ra),hu=0;To&&To[Es]!==void 0&&(hu=To[Es]),_t.forEach(function(ql,Xu){if(ql&&ql.update){var Rl;(Rl=ql.buffer.data).push.apply(Rl,(0,yt.Z)(ql.update(ua,rs,Fu,Es,Wu,hu)))}})},Il=0;Il<is;Il++)Ps(Il)});var kr=this.rendererService,ia=kr.createAttribute,$i=kr.createBuffer,zi=kr.createElements,Ea={};_t.forEach(function(ua,rs){if(ua){var La=ua.buffer,Po=ua.update,Wo=ua.name,Xa=(0,Kt.Z)(ua,Er),Ra=ia((0,v.Z)({buffer:$i(La)},Xa));Ea[ua.name||""]=Ra,je.attributes[rs].vertexAttribute=Ra}});var qa=zi({data:Wn,type:$e.UNSIGNED_INT,count:Wn.length});return this.attributesAndIndices={attributes:Ea,elements:qa,count:Ct},this.attributesAndIndices}},{key:"createAttributes",value:function(Te,fe){var we=this;this.featureLayout={sizePerElement:0,elements:[]},fe&&(this.triangulation=fe);var je=this.attributes.map(function(kr){return kr.resetDescriptor(),kr.descriptor}),_t=0,It=[],Ct=3;Te.forEach(function(kr,ia){var $i=we.triangulation(kr),zi=$i.indices,Ea=$i.vertices,qa=$i.normals,ua=$i.size,rs=$i.indexes;zi.forEach(function(Xa){It.push(Xa+_t)}),Ct=ua;var La=Ea.length/ua;we.featureLayout.sizePerElement=Ct,we.featureLayout.elements.push({featureIdx:ia,vertices:Ea,normals:qa,offset:_t}),_t+=La;for(var Po=function(Ra){var To=(qa==null?void 0:qa.slice(Ra*3,Ra*3+3))||[],ls=Ea.slice(Ra*ua,Ra*ua+ua),is=0;rs&&rs[Ra]!==void 0&&(is=rs[Ra]),je.forEach(function(Ps,Il){if(Ps&&Ps.update){var Qs;(Qs=Ps.buffer.data).push.apply(Qs,(0,yt.Z)(Ps.update(kr,ia,ls,Ra,To,is)))}})},Wo=0;Wo<La;Wo++)Po(Wo)});var Jt=this.rendererService,Wn=Jt.createAttribute,Mr=Jt.createBuffer,hr={};return je.forEach(function(kr,ia){if(kr){var $i=kr.buffer,zi=kr.update,Ea=kr.name,qa=(0,Kt.Z)(kr,_),ua=Wn((0,v.Z)({buffer:Mr($i)},qa));hr[kr.name||""]=ua,we.attributes[ia].vertexAttribute=ua}}),{attributes:hr}}},{key:"clearAllAttributes",value:function(){var Te;this.attributes.forEach(function(fe){fe.vertexAttribute&&fe.vertexAttribute.destroy()}),(Te=this.attributesAndIndices)===null||Te===void 0||Te.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(Te){return Te.map(function(fe){return{buffer:fe.buffer,name:fe.name,size:fe.size}})}}]),R}(),Lt=(0,it.Z)(ct.prototype,"rendererService",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct))||Ue),nr=y(46343),sr=y(67709),ti=y.n(sr),Fi,Ci,ta,Ni,Oi,yo,ya,Ba,xa,sa,jo,vs,$s,Fs,tu,lo,du,Dl,eo,_a,Su,ko,Ks,Zu,nu,ru,yc,tl,Tu,pl,Nl,gs,Au,js,nl;function qs(R){var ut=rc();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function rc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var ws=(Fi=(0,d.b2)(),Ci=(0,d.f3)(x.SceneID),ta=(0,d.f3)(x.IIconService),Ni=(0,d.f3)(x.IFontService),Oi=(0,d.f3)(x.IControlService),yo=(0,d.f3)(x.IGlobalConfigService),ya=(0,d.f3)(x.IMapService),Ba=(0,d.f3)(x.ICoordinateSystemService),xa=(0,d.f3)(x.IRendererService),sa=(0,d.f3)(x.ILayerService),jo=(0,d.f3)(x.IDebugService),vs=(0,d.f3)(x.ICameraService),$s=(0,d.f3)(x.IInteractionService),Fs=(0,d.f3)(x.IPickingService),tu=(0,d.f3)(x.IShaderModuleService),lo=(0,d.f3)(x.IMarkerService),du=(0,d.f3)(x.IPopupService),Fi(Dl=(eo=function(R){(0,o.Z)(Te,R);var ut=qs(Te);function Te(){var fe;return(0,u.Z)(this,Te),fe=ut.call(this),(0,A.Z)((0,e.Z)(fe),"destroyed",!1),(0,A.Z)((0,e.Z)(fe),"loaded",!1),(0,si.Z)((0,e.Z)(fe),"id",_a,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"iconService",Su,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"fontService",ko,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"controlService",Ks,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"configService",Zu,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"map",nu,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"coordinateSystemService",ru,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"rendererService",yc,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"layerService",tl,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"debugService",Tu,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"cameraService",pl,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"interactionService",Nl,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"pickingService",gs,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"shaderModuleService",Au,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"markerService",js,(0,e.Z)(fe)),(0,si.Z)((0,e.Z)(fe),"popupService",nl,(0,e.Z)(fe)),(0,A.Z)((0,e.Z)(fe),"inited",!1),(0,A.Z)((0,e.Z)(fe),"initPromise",void 0),(0,A.Z)((0,e.Z)(fe),"rendering",!1),(0,A.Z)((0,e.Z)(fe),"$container",void 0),(0,A.Z)((0,e.Z)(fe),"canvas",void 0),(0,A.Z)((0,e.Z)(fe),"markerContainer",void 0),(0,A.Z)((0,e.Z)(fe),"hooks",void 0),(0,A.Z)((0,e.Z)(fe),"handleWindowResized",function(){fe.emit("resize"),fe.$container&&(fe.initContainer(),w.SO.triggerResize(),fe.coordinateSystemService.needRefresh=!0,fe.render())}),(0,A.Z)((0,e.Z)(fe),"handleMapCameraChanged",function(we){fe.cameraService.update(we),fe.render()}),fe.hooks={init:new nr.sX},fe}return(0,t.Z)(Te,[{key:"init",value:function(we){var je=this;this.configService.setSceneConfig(this.id,we),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return je.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Ze.Z)(ze().mark(function _t(){return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return je.debugService.log("map.mapInitStart",{type:je.map.version}),Ct.next=3,new Promise(function(Jt){je.map.onCameraChanged(function(Wn){je.cameraService.init(),je.cameraService.update(Wn),Jt()}),je.map.init()});case 3:je.map.onCameraChanged(je.handleMapCameraChanged),je.map.addMarkerContainer(),je.markerService.addMarkers(),je.markerService.addMarkerLayers(),je.popupService.initPopup(),je.interactionService.init(),je.interactionService.on(Wi.Drag,je.addSceneEvent.bind(je));case 10:case"end":return Ct.stop()}},_t)}))),this.hooks.init.tapPromise("initRenderer",(0,Ze.Z)(ze().mark(function _t(){var It,Ct;return ze().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(It=je.map.getOverlayContainer(),It?je.$container=It:je.$container=wn(je.configService.getSceneConfig(je.id).id||""),!je.$container){Wn.next=13;break}return je.canvas=w.SO.create("canvas","",je.$container),je.setCanvas(),Wn.next=7,je.rendererService.init(je.canvas,je.configService.getSceneConfig(je.id),we.gl);case 7:je.registerContextLost(),je.initContainer(),ti()(je.$container,je.handleWindowResized),w.vO.matchMedia&&((Ct=w.vO.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||Ct===void 0||Ct.addListener(je.handleWindowResized)),Wn.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:je.pickingService.init(je.id);case 15:case"end":return Wn.stop()}},_t)}))),this.render()}},{key:"registerContextLost",value:function(){var we=this,je=this.rendererService.getCanvas();je&&je.addEventListener("webglcontextlost",function(){return we.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(we){var je=this;this.configService.setSceneConfig(this.id,we),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return je.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Ze.Z)(ze().mark(function _t(){return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,new Promise(function(Jt){je.map.onCameraChanged(function(Wn){je.cameraService.init(),je.cameraService.update(Wn),je.map.version!=="GAODE2.x"&&Jt()}),je.map.initMiniMap()});case 2:je.map.onCameraChanged(je.handleMapCameraChanged),je.interactionService.init(),je.interactionService.on(Wi.Drag,je.addSceneEvent.bind(je));case 5:case"end":return Ct.stop()}},_t)}))),this.hooks.init.tapPromise("initRenderer",(0,Ze.Z)(ze().mark(function _t(){var It;return ze().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(It=we.canvas,je.$container=It||null,!je.$container){Jt.next=7;break}return Jt.next=5,je.rendererService.init(we.canvas,je.configService.getSceneConfig(je.id),void 0);case 5:Jt.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:je.pickingService.init(je.id);case 9:case"end":return Jt.stop()}},_t)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(we){this.layerService.sceneService=this,this.layerService.add(we)}},{key:"addMask",value:function(we){this.layerService.sceneService=this,this.layerService.addMask(we)}},{key:"render",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(){return ze().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(!(this.rendering||this.destroyed)){It.next=2;break}return It.abrupt("return");case 2:if(this.rendering=!0,this.inited){It.next=16;break}return It.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),It.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,It.next=20;break;case 16:return It.next=18,this.layerService.initLayers();case 18:return It.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return It.stop()}},je,this)}));function we(){return fe.apply(this,arguments)}return we}()},{key:"addFontFace",value:function(we,je){this.fontService.addFontFace(we,je)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var fe=(0,Ze.Z)(ze().mark(function je(_t){var It,Ct,Jt;return ze().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Ct=(It=this.$container)===null||It===void 0?void 0:It.getElementsByTagName("canvas")[0],Mr.next=3,this.render();case 3:return Jt=_t==="jpg"?Ct==null?void 0:Ct.toDataURL("image/jpeg"):Ct==null?void 0:Ct.toDataURL("image/png"),Mr.abrupt("return",Jt);case 5:case"end":return Mr.stop()}},je,this)}));function we(je){return fe.apply(this,arguments)}return we}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var we=this.$container.parentElement;we!==null&&(this.markerContainer=w.SO.create("div","l7-marker-container",we))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var we=this,je,_t;if(!this.inited){this.destroyed=!0;return}if((0,sr.unbind)(this.$container,this.handleWindowResized),w.vO.matchMedia){var It;(It=w.vO.matchMedia("screen and (min-resolution: 2dppx)"))===null||It===void 0||It.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var Ct;(Ct=we.$container)===null||Ct===void 0||Ct.removeChild(we.canvas),we.canvas=null,we.rendererService.destroy()}),(je=this.$container)===null||je===void 0||(_t=je.parentNode)===null||_t===void 0||_t.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var we,je,_t=w.SO.DPR,It=((we=this.$container)===null||we===void 0?void 0:we.clientWidth)||400,Ct=((je=this.$container)===null||je===void 0?void 0:je.clientHeight)||300,Jt=this.canvas;Jt&&(Jt.width=It*_t,Jt.height=Ct*_t),this.rendererService.viewport({x:0,y:0,width:_t*It,height:_t*Ct})}},{key:"setCanvas",value:function(){var we,je,_t=w.SO.DPR,It=((we=this.$container)===null||we===void 0?void 0:we.clientWidth)||400,Ct=((je=this.$container)===null||je===void 0?void 0:je.clientHeight)||300,Jt=this.canvas;Jt.width=It*_t,Jt.height=Ct*_t,Jt.style.width="100%",Jt.style.height="100%"}},{key:"addSceneEvent",value:function(we){this.emit(we.type,we)}}]),Te}(p.EventEmitter),_a=(0,it.Z)(eo.prototype,"id",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=(0,it.Z)(eo.prototype,"iconService",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=(0,it.Z)(eo.prototype,"fontService",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ks=(0,it.Z)(eo.prototype,"controlService",[Oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zu=(0,it.Z)(eo.prototype,"configService",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nu=(0,it.Z)(eo.prototype,"map",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ru=(0,it.Z)(eo.prototype,"coordinateSystemService",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yc=(0,it.Z)(eo.prototype,"rendererService",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tl=(0,it.Z)(eo.prototype,"layerService",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tu=(0,it.Z)(eo.prototype,"debugService",[jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pl=(0,it.Z)(eo.prototype,"cameraService",[vs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nl=(0,it.Z)(eo.prototype,"interactionService",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gs=(0,it.Z)(eo.prototype,"pickingService",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Au=(0,it.Z)(eo.prototype,"shaderModuleService",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=(0,it.Z)(eo.prototype,"markerService",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=(0,it.Z)(eo.prototype,"popupService",[du],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo))||Dl);function _c(R){var ut=0;switch(R){case"vec2":case"ivec2":ut=2;break;case"vec3":case"ivec3":ut=3;break;case"vec4":case"ivec4":case"mat2":ut=4;break;case"mat3":ut=9;break;case"mat4":ut=16;break;default:}return ut}var bc=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Kc(R){var ut={};return R=R.replace(bc,function(Te,fe,we){var je=we.split(":"),_t=je[0].trim(),It="";switch(je.length>1&&(It=je[1].trim()),fe){case"bool":It=It==="true";break;case"float":case"int":It=Number(It);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":It?It=It.replace("[","").replace("]","").split(",").reduce(function(Ct,Jt){return Ct.push(Number(Jt.trim())),Ct},[]):It=new Array(_c(fe)).fill(0);break;default:}return ut[_t]=It,"uniform ".concat(fe," ").concat(_t,`;
`)}),{content:R,uniforms:ut}}var iu,Nc,xc="#define PI 3.14159265359",Bl=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,au=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Cu=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,ms=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Zl=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Bc=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Vs=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,wu=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,ys=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,vl=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Ec=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,Sc=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,Ul=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,gl=/precision\s+(high|low|medium)p\s+float/,qc=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ic=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,In=(iu=(0,d.b2)(),iu(Nc=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"moduleCache",{}),(0,A.Z)(this,"rawContentCache",{})}return(0,t.Z)(R,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:xc,fs:xc}),this.registerModule("decode",{vs:Bl,fs:""}),this.registerModule("projection",{vs:Vs,fs:""}),this.registerModule("project",{vs:Bc,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:wu}),this.registerModule("lighting",{vs:Cu,fs:""}),this.registerModule("light",{vs:au,fs:""}),this.registerModule("picking",{vs:Zl,fs:ms}),this.registerModule("styleMapping",{vs:ys,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Ul,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:vl,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Ec,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Sc,fs:""})}},{key:"registerModule",value:function(Te,fe){if(!this.rawContentCache[Te]){var we=fe.vs,je=fe.fs,_t=fe.uniforms,It=Kc(we),Ct=It.content,Jt=It.uniforms,Wn=Kc(je),Mr=Wn.content,hr=Wn.uniforms;this.rawContentCache[Te]={fs:Mr,uniforms:(0,v.Z)((0,v.Z)((0,v.Z)({},Jt),hr),_t),vs:Ct}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Te){var fe=this;if(this.moduleCache[Te])return this.moduleCache[Te];var we=this.rawContentCache[Te].vs,je=this.rawContentCache[Te].fs,_t=this.processModule(we,[],"vs"),It=_t.content,Ct=_t.includeList,Jt=this.processModule(je,[],"fs"),Wn=Jt.content,Mr=Jt.includeList,hr=Wn,kr=(0,Pr.uniq)(Ct.concat(Mr).concat(Te)).reduce(function(ia,$i){return(0,v.Z)((0,v.Z)({},ia),fe.rawContentCache[$i].uniforms)},{});return gl.test(Wn)||(hr=qc+Wn),this.moduleCache[Te]={fs:hr.trim(),uniforms:kr,vs:It.trim()},this.moduleCache[Te]}},{key:"processModule",value:function(Te,fe,we){var je=this,_t=Te.replace(ic,function(It,Ct){var Jt=Ct.split(" "),Wn=Jt[0].replace(/"/g,"");if(fe.indexOf(Wn)>-1)return"";var Mr=je.rawContentCache[Wn][we];fe.push(Wn);var hr=je.processModule(Mr,fe,we),kr=hr.content;return kr});return{content:_t,includeList:fe}}}]),R}())||Nc),pr=y(73237),rr;(function(R){R.Normal="normal",R.PostProcessing="post-processing"})(rr||(rr={}));var gi,Ca,io=(gi=(0,d.b2)(),gi(Ca=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"shaderModuleService",void 0),(0,A.Z)(this,"rendererService",void 0),(0,A.Z)(this,"cameraService",void 0),(0,A.Z)(this,"mapService",void 0),(0,A.Z)(this,"interactionService",void 0),(0,A.Z)(this,"layerService",void 0),(0,A.Z)(this,"config",void 0)}return(0,t.Z)(R,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return rr.Normal}},{key:"init",value:function(Te,fe){this.config=fe,this.rendererService=Te.getContainer().get(x.IRendererService),this.cameraService=Te.getContainer().get(x.ICameraService),this.mapService=Te.getContainer().get(x.IMapService),this.interactionService=Te.getContainer().get(x.IInteractionService),this.layerService=Te.getContainer().get(x.ILayerService),this.shaderModuleService=Te.getContainer().get(x.IShaderModuleService)}},{key:"render",value:function(Te){}}]),R}())||Ca),Vo,_o;function zl(R){var ut=Tc();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function Tc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Ds=(Vo=(0,d.b2)(),Vo(_o=function(R){(0,o.Z)(Te,R);var ut=zl(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(we,je){(0,pr.Z)((0,b.Z)(Te.prototype),"init",this).call(this,we,je)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Te}(io))||_o),Uu,rl,Mu,ml,il;function po(R,ut){var Te=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!Te){if(Array.isArray(R)||(Te=yl(R))||ut&&R&&typeof R.length=="number"){Te&&(R=Te);var fe=0,we=function(){};return{s:we,n:function(){return fe>=R.length?{done:!0}:{done:!1,value:R[fe++]}},e:function(Jt){throw Jt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,_t=!1,It;return{s:function(){Te=Te.call(R)},n:function(){var Jt=Te.next();return je=Jt.done,Jt},e:function(Jt){_t=!0,It=Jt},f:function(){try{!je&&Te.return!=null&&Te.return()}finally{if(_t)throw It}}}}function yl(R,ut){if(R){if(typeof R=="string")return Zc(R,ut);var Te=Object.prototype.toString.call(R).slice(8,-1);if(Te==="Object"&&R.constructor&&(Te=R.constructor.name),Te==="Map"||Te==="Set")return Array.from(R);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return Zc(R,ut)}}function Zc(R,ut){(ut==null||ut>R.length)&&(ut=R.length);for(var Te=0,fe=new Array(ut);Te<ut;Te++)fe[Te]=R[Te];return fe}var zu=(Uu=(0,d.b2)(),rl=(0,d.f3)(x.IPostProcessor),Uu(Mu=(ml=function(){function R(){(0,u.Z)(this,R),(0,A.Z)(this,"passes",[]),(0,si.Z)(this,"postProcessor",il,this),(0,A.Z)(this,"layer",void 0),(0,A.Z)(this,"renderFlag",void 0),(0,A.Z)(this,"width",0),(0,A.Z)(this,"height",0)}return(0,t.Z)(R,[{key:"setLayer",value:function(Te){this.layer=Te}},{key:"setRenderFlag",value:function(Te){this.renderFlag=Te}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(){var we,je,_t;return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:we=po(this.passes),Ct.prev=1,we.s();case 3:if((je=we.n()).done){Ct.next=9;break}return _t=je.value,Ct.next=7,_t.render(this.layer);case 7:Ct.next=3;break;case 9:Ct.next=14;break;case 11:Ct.prev=11,Ct.t0=Ct.catch(1),we.e(Ct.t0);case 14:return Ct.prev=14,we.f(),Ct.finish(14);case 17:return Ct.next=19,this.postProcessor.render(this.layer);case 19:case"end":return Ct.stop()}},fe,this,[[1,11,14,17]])}));function Te(){return ut.apply(this,arguments)}return Te}()},{key:"resize",value:function(Te,fe){(this.width!==Te||this.height!==fe)&&(this.postProcessor.resize(Te,fe),this.width=Te,this.height=fe)}},{key:"add",value:function(Te,fe){Te.getType()===rr.PostProcessing?this.postProcessor.add(Te,this.layer,fe):(Te.init(this.layer,fe),this.passes.push(Te))}},{key:"insert",value:function(Te,fe,we){Te.init(this.layer,fe),this.passes.splice(we,0,Te)}},{key:"destroy",value:function(){this.passes.length=0}}]),R}(),il=(0,it.Z)(ml.prototype,"postProcessor",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml))||Mu),_s,pu;function al(R){var ut=vu();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function vu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var os=(_s=(0,d.b2)(),_s(pu=function(R){(0,o.Z)(Te,R);var ut=al(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,A.Z)((0,e.Z)(fe),"pickingFBO",void 0),(0,A.Z)((0,e.Z)(fe),"layer",void 0),(0,A.Z)((0,e.Z)(fe),"width",0),(0,A.Z)((0,e.Z)(fe),"height",0),(0,A.Z)((0,e.Z)(fe),"alreadyInRendering",!1),(0,A.Z)((0,e.Z)(fe),"pickFromPickingFBO",function(It){var Ct=It.x,Jt=It.y,Wn=It.lngLat,Mr=It.type;if(!(!fe.layer.isVisible()||!fe.layer.needPick(Mr))){var hr=fe.rendererService,kr=hr.getViewportSize,ia=hr.readPixels,$i=hr.useFramebuffer,zi=kr(),Ea=zi.width,qa=zi.height,ua=fe.layer.getLayerConfig(),rs=ua.enableHighlight,La=ua.enableSelect,Po=Ct*w.SO.DPR,Wo=Jt*w.SO.DPR;if(!(Po>Ea||Po<0||Wo>qa||Wo<0)){var Xa;$i(fe.pickingFBO,function(){var Ra;if(Xa=ia({x:Math.round(Po),y:Math.round(qa-(Jt+1)*w.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:fe.pickingFBO}),Xa[0]!==0||Xa[1]!==0||Xa[2]!==0){var To=(0,w.W0)(Xa),ls=fe.layer.getSource().getFeatureById(To),is={x:Ct,y:Jt,type:Mr,lngLat:Wn,featureId:To,feature:ls};ls&&(fe.layer.setCurrentPickId(To),fe.triggerHoverOnLayer(is))}else{var Ps={x:Ct,y:Jt,lngLat:Wn,type:fe.layer.getCurrentPickId()===null?"un"+Mr:"mouseout",featureId:null,feature:null};fe.triggerHoverOnLayer((0,v.Z)((0,v.Z)({},Ps),{},{type:"unpick"})),fe.triggerHoverOnLayer(Ps),fe.layer.setCurrentPickId(null)}rs&&fe.highlightPickedFeature(Xa),La&&Mr==="click"&&((Ra=Xa)===null||Ra===void 0?void 0:Ra.toString())!==[0,0,0,0].toString()&&fe.selectFeature(Xa)})}}}),fe}return(0,t.Z)(Te,[{key:"getType",value:function(){return rr.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(we,je){(0,pr.Z)((0,b.Z)(Te.prototype),"init",this).call(this,we,je),this.layer=we;var _t=this.rendererService,It=_t.createTexture2D,Ct=_t.createFramebuffer,Jt=_t.getViewportSize,Wn=Jt(),Mr=Wn.width,hr=Wn.height;this.pickingFBO=Ct({color:It({width:Mr,height:hr,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.interactionService.on(Wi.Hover,this.pickFromPickingFBO),this.interactionService.on(Wi.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Wi.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(we){var je=this;if(!this.alreadyInRendering){var _t=this.rendererService,It=_t.getViewportSize,Ct=_t.useFramebuffer,Jt=_t.clear,Wn=It(),Mr=Wn.width,hr=Wn.height;this.alreadyInRendering=!0,(this.width!==Mr||this.height!==hr)&&(this.pickingFBO.resize({width:Mr,height:hr}),this.width=Mr,this.height=hr),Ct(this.pickingFBO,function(){Jt({framebuffer:je.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var kr=je.layer.multiPassRenderer.getRenderFlag();je.layer.multiPassRenderer.setRenderFlag(!1),we.hooks.beforePickingEncode.call(),we.render(),we.hooks.afterPickingEncode.call(),je.layer.multiPassRenderer.setRenderFlag(kr),je.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(we){this.layer.emit(we.type,we)}},{key:"highlightPickedFeature",value:function(we){var je=(0,Ne.Z)(we,3),_t=je[0],It=je[1],Ct=je[2];this.layer.hooks.beforeHighlight.call([_t,It,Ct]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(we){var je=(0,Ne.Z)(we,3),_t=je[0],It=je[1],Ct=je[2];this.layer.hooks.beforeSelect.call([_t,It,Ct]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(we){var je=we.featureId,_t=(0,w.Z6)(je);this.selectFeature(new Uint8Array(_t))}},{key:"highlightFeatureHandle",value:function(we){var je=we.featureId,_t=(0,w.Z6)(je);this.highlightPickedFeature(new Uint8Array(_t))}}]),Te}(io))||pu),Gs,Lo,gu,Ms,ou,No=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,qo=(Gs=(0,d.b2)(),Lo=(0,d.f3)(x.IShaderModuleService),Gs(gu=(Ms=function(){function R(){(0,u.Z)(this,R),(0,si.Z)(this,"shaderModuleService",ou,this),(0,A.Z)(this,"rendererService",void 0),(0,A.Z)(this,"config",void 0),(0,A.Z)(this,"quad",No),(0,A.Z)(this,"enabled",!0),(0,A.Z)(this,"renderToScreen",!1),(0,A.Z)(this,"model",void 0),(0,A.Z)(this,"name",void 0),(0,A.Z)(this,"optionsToUpdate",{})}return(0,t.Z)(R,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(Te){this.name=Te}},{key:"getType",value:function(){return rr.PostProcessing}},{key:"init",value:function(Te,fe){this.config=fe,this.rendererService=Te.getContainer().get(x.IRendererService),this.shaderModuleService=Te.getContainer().get(x.IShaderModuleService);var we=this.rendererService,je=we.createAttribute,_t=we.createBuffer,It=we.createModel,Ct=this.setupShaders(),Jt=Ct.vs,Wn=Ct.fs,Mr=Ct.uniforms;this.model=It({vs:Jt,fs:Wn,attributes:{a_Position:je({buffer:_t({data:[-4,-4,4,-4,0,4],type:$e.FLOAT}),size:2})},uniforms:(0,v.Z)((0,v.Z)({u_Texture:null},Mr),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(Te,fe){var we=this,je=Te.multiPassRenderer.getPostProcessor(),_t=this.rendererService,It=_t.useFramebuffer,Ct=_t.getViewportSize,Jt=_t.clear,Wn=Ct(),Mr=Wn.width,hr=Wn.height;It(this.renderToScreen?null:je.getWriteFBO(),function(){Jt({framebuffer:je.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var kr=(0,v.Z)({u_BloomFinal:0,u_Texture:je.getReadFBO(),u_ViewportSize:[Mr,hr]},we.convertOptionsToUniforms(we.optionsToUpdate));fe&&(kr.u_BloomFinal=1,kr.u_Texture2=fe),we.model.draw({uniforms:kr})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(Te){this.enabled=Te}},{key:"setRenderToScreen",value:function(Te){this.renderToScreen=Te}},{key:"updateOptions",value:function(Te){this.optionsToUpdate=(0,v.Z)((0,v.Z)({},this.optionsToUpdate),Te)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(Te){var fe={};return Object.keys(Te).forEach(function(we){(0,Pr.isNil)(Te[we])||(fe["u_".concat((0,Pr.upperFirst)((0,Pr.camelCase)(we)))]=Te[we])}),fe}}]),R}(),ou=(0,it.Z)(Ms.prototype,"shaderModuleService",[Lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ms))||gu),ol,bs;function $l(R){var ut=jl();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function jl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Uc=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,ff=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Vl=(ol=(0,d.b2)(),ol(bs=function(R){(0,o.Z)(Te,R);var ut=$l(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ff,fs:Uc});var we=this.shaderModuleService.getModule("blur-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}},{key:"convertOptionsToUniforms",value:function(we){var je={};return(0,Pr.isNil)(we.bloomRadius)||(je.u_radius=we.bloomRadius),(0,Pr.isNil)(we.bloomIntensity)||(je.u_intensity=we.bloomIntensity),(0,Pr.isNil)(we.bloomBaseRadio)||(je.u_baseRadio=we.bloomBaseRadio),je}}]),Te}(qo))||bs),_l,bl;function zc(R){var ut=ac();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function ac(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Ac=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Cc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Bo=(_l=(0,d.b2)(),_l(bl=function(R){(0,o.Z)(Te,R);var ut=zc(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Cc,fs:Ac});var we=this.shaderModuleService.getModule("blur-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}},{key:"convertOptionsToUniforms",value:function(we){var je={};return(0,Pr.isNil)(we.blurRadius)||(je.u_BlurDir=[we.blurRadius,0]),je}}]),Te}(qo))||bl),Qo,oc;function xl(R){var ut=wc();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function wc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Ou=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,su=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,no=(Qo=(0,d.b2)(),Qo(oc=function(R){(0,o.Z)(Te,R);var ut=xl(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:su,fs:Ou});var we=this.shaderModuleService.getModule("blur-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}},{key:"convertOptionsToUniforms",value:function(we){var je={};return(0,Pr.isNil)(we.blurRadius)||(je.u_BlurDir=[0,we.blurRadius]),je}}]),Te}(qo))||oc),sl,Zo;function uu(R){var ut=ul();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function ul(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var El=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,lu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ns=(sl=(0,d.b2)(),sl(Zo=function(R){(0,o.Z)(Te,R);var ut=uu(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:lu,fs:El});var we=this.shaderModuleService.getModule("colorhalftone-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}}]),Te}(qo))||Zo),Gl,le;function X(R){var ut=O();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var j=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Q=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Re=(Gl=(0,d.b2)(),Gl(le=function(R){(0,o.Z)(Te,R);var ut=X(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Q,fs:j}),this.shaderModuleService.getModule("copy-pass")}}]),Te}(qo))||le),se,At;function Rt(R){var ut=Ut();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function Ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Zn=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,gr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ni=(se=(0,d.b2)(),se(At=function(R){(0,o.Z)(Te,R);var ut=Rt(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:gr,fs:Zn});var we=this.shaderModuleService.getModule("hexagonalpixelate-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}}]),Te}(qo))||At),Vr,wi;function ji(R){var ut=da();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function da(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var wa=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,to=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,va=(Vr=(0,d.b2)(),Vr(wi=function(R){(0,o.Z)(Te,R);var ut=ji(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:to,fs:wa});var we=this.shaderModuleService.getModule("ink-pass"),je=we.vs,_t=we.fs,It=we.uniforms,Ct=this.rendererService.getViewportSize(),Jt=Ct.width,Wn=Ct.height;return{vs:je,fs:_t,uniforms:(0,v.Z)((0,v.Z)({},It),{},{u_ViewportSize:[Jt,Wn]})}}}]),Te}(qo))||wi),ba,ao;function Mo(R){var ut=so();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function so(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var ka=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,zo=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fi=(ba=(0,d.b2)(),ba(ao=function(R){(0,o.Z)(Te,R);var ut=Mo(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:zo,fs:ka}),this.shaderModuleService.getModule("noise-pass")}}]),Te}(qo))||ao),Go,mu;function bo(R){var ut=ss();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function ss(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Pu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,yu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,cu=(Go=(0,d.b2)(),Go(mu=function(R){(0,o.Z)(Te,R);var ut=bo(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Pu,fs:yu}),this.shaderModuleService.getModule("sepia-pass")}}]),Te}(qo))||mu),fu,Fo,Sl,$c,Ka,Qc,jc=(fu=(0,d.b2)(),Fo=(0,d.f3)(x.IRendererService),Sl=(0,d.zY)(),fu($c=(Ka=function(){function R(){(0,u.Z)(this,R),(0,si.Z)(this,"rendererService",Qc,this),(0,A.Z)(this,"passes",[]),(0,A.Z)(this,"readFBO",void 0),(0,A.Z)(this,"writeFBO",void 0)}return(0,t.Z)(R,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var Te=this.rendererService,fe=Te.getViewportSize,we=Te.createTexture2D,je=fe(),_t=je.width,It=je.height;return we({x:0,y:0,width:_t,height:It,copy:!0})}},{key:"getReadFBOTex",value:function(){var Te=this,fe=this.rendererService.useFramebuffer;return new Promise(function(we){fe(Te.readFBO,(0,Ze.Z)(ze().mark(function je(){return ze().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:we(Te.getCurrentFBOTex());case 1:case"end":return It.stop()}},je)})))})}},{key:"renderBloomPass",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(we,je){var _t,It;return ze().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.next=2,this.getReadFBOTex();case 2:_t=Jt.sent,It=0;case 4:if(!(It<4)){Jt.next=11;break}return Jt.next=7,je.render(we,_t);case 7:this.swap(),It++,Jt.next=4;break;case 11:case"end":return Jt.stop()}},fe,this)}));function Te(fe,we){return ut.apply(this,arguments)}return Te}()},{key:"render",value:function(){var ut=(0,Ze.Z)(ze().mark(function fe(we){var je,_t;return ze().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:je=0;case 1:if(!(je<this.passes.length)){Ct.next=15;break}if(_t=this.passes[je],_t.setRenderToScreen(this.isLastEnabledPass(je)),_t.getName()!=="bloom"){Ct.next=9;break}return Ct.next=7,this.renderBloomPass(we,_t);case 7:Ct.next=12;break;case 9:return Ct.next=11,_t.render(we);case 11:je!==this.passes.length-1&&this.swap();case 12:je++,Ct.next=1;break;case 15:case"end":return Ct.stop()}},fe,this)}));function Te(fe){return ut.apply(this,arguments)}return Te}()},{key:"resize",value:function(Te,fe){this.readFBO.resize({width:Te,height:fe}),this.writeFBO.resize({width:Te,height:fe})}},{key:"add",value:function(Te,fe,we){Te.init(fe,we),this.passes.push(Te)}},{key:"insert",value:function(Te,fe,we,je){Te.init(we,je),this.passes.splice(fe,0,Te)}},{key:"getPostProcessingPassByName",value:function(Te){return this.passes.find(function(fe){return fe.getName()===Te})}},{key:"init",value:function(){var Te=this.rendererService,fe=Te.createFramebuffer,we=Te.createTexture2D;this.readFBO=fe({color:we({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.writeFBO=fe({color:we({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(Te){for(var fe=Te+1;fe<this.passes.length;fe++)if(this.passes[fe].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Te=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Te}}]),R}(),Qc=(0,it.Z)(Ka.prototype,"rendererService",[Fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,it.Z)(Ka.prototype,"init",[Sl],Object.getOwnPropertyDescriptor(Ka.prototype,"init"),Ka.prototype),Ka))||$c),Oo,xs;function Hs(R){var ut=Iu();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Hl=(Oo=(0,d.b2)(),Oo(xs=function(R){(0,o.Z)(Te,R);var ut=Hs(Te);function Te(){return(0,u.Z)(this,Te),ut.apply(this,arguments)}return(0,t.Z)(Te,[{key:"getType",value:function(){return rr.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(we,je){(0,pr.Z)((0,b.Z)(Te.prototype),"init",this).call(this,we,je)}},{key:"render",value:function(we){var je=this.rendererService,_t=je.useFramebuffer,It=je.clear,Ct=we.multiPassRenderer.getPostProcessor().getReadFBO();_t(Ct,function(){It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Ct}),we.multiPassRenderer.setRenderFlag(!1),we.models.forEach(function(Jt){Jt.draw({uniforms:we.layerModel.getUninforms()})}),we.multiPassRenderer.setRenderFlag(!0)})}}]),Te}(io))||xs),$u,Wl,Jc,Xl,Tl;function _u(R){var ut=Al();return function(){var fe=(0,b.Z)(R),we;if(ut){var je=(0,b.Z)(this).constructor;we=Reflect.construct(fe,arguments,je)}else we=fe.apply(this,arguments);return(0,c.Z)(this,we)}}function Al(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}var Ru=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Ho=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Cl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Mc(R,ut){for(var Te=0,fe=1/ut,we=R;we>0;)Te=Te+fe*(we%ut),we=Math.floor(we/ut),fe=fe/ut;return Te}var Yl=1,ju=($u=(0,d.b2)(),Wl=(0,d.f3)(x.IShaderModuleService),$u(Jc=(Xl=function(R){(0,o.Z)(Te,R);var ut=_u(Te);function Te(){var fe;(0,u.Z)(this,Te);for(var we=arguments.length,je=new Array(we),_t=0;_t<we;_t++)je[_t]=arguments[_t];return fe=ut.call.apply(ut,[this].concat(je)),(0,si.Z)((0,e.Z)(fe),"shaderModuleService",Tl,(0,e.Z)(fe)),(0,A.Z)((0,e.Z)(fe),"haltonSequence",[]),(0,A.Z)((0,e.Z)(fe),"accumulatingId",0),(0,A.Z)((0,e.Z)(fe),"frame",0),(0,A.Z)((0,e.Z)(fe),"timer",void 0),(0,A.Z)((0,e.Z)(fe),"sampleRenderTarget",void 0),(0,A.Z)((0,e.Z)(fe),"prevRenderTarget",void 0),(0,A.Z)((0,e.Z)(fe),"outputRenderTarget",void 0),(0,A.Z)((0,e.Z)(fe),"copyRenderTarget",void 0),(0,A.Z)((0,e.Z)(fe),"blendModel",void 0),(0,A.Z)((0,e.Z)(fe),"outputModel",void 0),(0,A.Z)((0,e.Z)(fe),"copyModel",void 0),fe}return(0,t.Z)(Te,[{key:"getType",value:function(){return rr.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(we,je){(0,pr.Z)((0,b.Z)(Te.prototype),"init",this).call(this,we,je);var _t=this.rendererService,It=_t.createFramebuffer,Ct=_t.createTexture2D;this.sampleRenderTarget=It({color:Ct({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.prevRenderTarget=It({color:Ct({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.outputRenderTarget=It({color:Ct({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.copyRenderTarget=It({color:Ct({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})});for(var Jt=0;Jt<30;Jt++)this.haltonSequence.push([Mc(Jt,2),Mc(Jt,3)]);this.blendModel=this.createTriangleModel("blend-pass",Ru),this.outputModel=this.createTriangleModel("copy-pass",Ho,{blend:{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE_MINUS_SRC_ALPHA,srcAlpha:$e.ONE,dstAlpha:$e.ONE_MINUS_SRC_ALPHA},equation:{rgb:$e.FUNC_ADD,alpha:$e.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Ho)}},{key:"render",value:function(we){var je=this,_t=this.rendererService,It=_t.clear,Ct=_t.getViewportSize,Jt=_t.useFramebuffer,Wn=Ct(),Mr=Wn.width,hr=Wn.height;this.sampleRenderTarget.resize({width:Mr,height:hr}),this.prevRenderTarget.resize({width:Mr,height:hr}),this.outputRenderTarget.resize({width:Mr,height:hr}),this.copyRenderTarget.resize({width:Mr,height:hr}),this.resetFrame(),this.stopAccumulating();var kr=we.multiPassRenderer.getPostProcessor().getReadFBO();Jt(kr,function(){It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:kr}),we.multiPassRenderer.setRenderFlag(!1),we.render(),we.multiPassRenderer.setRenderFlag(!0)});var ia=function $i(zi){!je.accumulatingId||zi!==je.accumulatingId||je.isFinished()||(je.doRender(we),w.vO.requestAnimationFrame(function(){$i(zi)}))};this.accumulatingId=Yl++,this.timer=w.vO.setTimeout(function(){ia(je.accumulatingId)},50)}},{key:"doRender",value:function(we){var je=this,_t=this.rendererService,It=_t.clear,Ct=_t.getViewportSize,Jt=_t.useFramebuffer,Wn=Ct(),Mr=Wn.width,hr=Wn.height,kr=we.getLayerConfig(),ia=kr.jitterScale,$i=ia===void 0?1:ia,zi=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((zi[0]*2-1)/Mr*$i,(zi[1]*2-1)/hr*$i),we.multiPassRenderer.setRenderFlag(!1),we.hooks.beforeRender.call(),Jt(this.sampleRenderTarget,function(){It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:je.sampleRenderTarget}),we.render()}),we.hooks.afterRender.call(),we.multiPassRenderer.setRenderFlag(!0);var Ea=we.getLayerConfig();Jt(this.outputRenderTarget,function(){je.blendModel.draw({uniforms:{u_opacity:Ea.opacity||1,u_MixRatio:je.frame===0?1:.9,u_Diffuse1:je.sampleRenderTarget,u_Diffuse2:je.frame===0?we.multiPassRenderer.getPostProcessor().getReadFBO():je.prevRenderTarget}})}),this.frame===0&&It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Jt(this.copyRenderTarget,function(){je.outputModel.draw({uniforms:{u_Texture:je.outputRenderTarget}})}),Jt(we.multiPassRenderer.getPostProcessor().getReadFBO(),function(){je.copyModel.draw({uniforms:{u_Texture:je.copyRenderTarget}})}),we.multiPassRenderer.getPostProcessor().render(we));var qa=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=qa,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,w.vO.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(we,je,_t){this.shaderModuleService.registerModule(we,{vs:Cl,fs:je});var It=this.shaderModuleService.getModule(we),Ct=It.vs,Jt=It.fs,Wn=It.uniforms,Mr=this.rendererService,hr=Mr.createAttribute,kr=Mr.createBuffer,ia=Mr.createModel;return ia((0,v.Z)({vs:Ct,fs:Jt,attributes:{a_Position:hr({buffer:kr({data:[-4,-4,4,-4,0,4],type:$e.FLOAT}),size:2})},uniforms:(0,v.Z)({},Wn),depth:{enable:!1},count:3},_t))}}]),Te}(io),Tl=(0,it.Z)(Xl.prototype,"shaderModuleService",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl))||Jc),us=new d.W2;us.bind(x.IGlobalConfigService).to(Ia).inSingletonScope(),(0,d.GW)((0,d.b2)(),p.EventEmitter),us.bind(x.IEventEmitter).to(p.EventEmitter);var Oc=(0,g.Z)(us,!1),Vc=function(ut){var Te=Oc.lazyInject(ut);return function(fe,we,je){Te.call(this,fe,we),je&&(je.initializer=function(){return fe[we]})}},Vu=function(ut){var Te=Oc.lazyMultiInject(ut);return function(fe,we,je){Te.call(this,fe,we),je&&(je.initializer=function(){return fe[we]})}},ef=us,sc=0;function ns(){var R=new d.W2;return R.parent=us,R.bind(x.SceneID).toConstantValue("".concat(sc++)),R.bind(x.IShaderModuleService).to(In).inSingletonScope(),R.bind(x.ILayerService).to(zt).inSingletonScope(),R.bind(x.IDebugService).to(ha).inSingletonScope(),R.bind(x.ISceneService).to(ws).inSingletonScope(),R.bind(x.ICameraService).to(rt).inSingletonScope(),R.bind(x.ICoordinateSystemService).to(fa).inSingletonScope(),R.bind(x.IInteractionService).to(te).inSingletonScope(),R.bind(x.IPickingService).to(Hn).inSingletonScope(),R.bind(x.IControlService).to(mn).inSingletonScope(),R.bind(x.IMarkerService).to(mi).inSingletonScope(),R.bind(x.IIconService).to(Y).inSingletonScope(),R.bind(x.IFontService).to(Yt).inSingletonScope(),R.bind(x.IPopupService).to(dr).inSingletonScope(),R.bind(x.INormalPass).to(Ds).whenTargetNamed("clear"),R.bind(x.INormalPass).to(os).whenTargetNamed("pixelPicking"),R.bind(x.INormalPass).to(Hl).whenTargetNamed("render"),R.bind(x.INormalPass).to(ju).whenTargetNamed("taa"),R.bind(x.IFactoryNormalPass).toFactory(function(ut){return function(Te){return ut.container.getNamed(x.INormalPass,Te)}}),R.bind(x.IPostProcessingPass).to(Re).whenTargetNamed("copy"),R.bind(x.IPostProcessingPass).to(Vl).whenTargetNamed("bloom"),R.bind(x.IPostProcessingPass).to(Bo).whenTargetNamed("blurH"),R.bind(x.IPostProcessingPass).to(no).whenTargetNamed("blurV"),R.bind(x.IPostProcessingPass).to(fi).whenTargetNamed("noise"),R.bind(x.IPostProcessingPass).to(cu).whenTargetNamed("sepia"),R.bind(x.IPostProcessingPass).to(Ns).whenTargetNamed("colorHalftone"),R.bind(x.IPostProcessingPass).to(ni).whenTargetNamed("hexagonalPixelate"),R.bind(x.IPostProcessingPass).to(va).whenTargetNamed("ink"),R.bind(x.IFactoryPostProcessingPass).toFactory(function(ut){return function(Te){var fe=ut.container.getNamed(x.IPostProcessingPass,Te);return fe.setName(Te),fe}}),R}function bu(R){var ut=new d.W2;return ut.parent=R,ut.bind(x.IStyleAttributeService).to(on).inSingletonScope(),ut.bind(x.IMultiPassRenderer).to(zu).inSingletonScope(),ut.bind(x.IPostProcessor).to(jc).inSingletonScope(),ut}var Gc=null;function ll(R){return Gc.indexOf(R)}var tf=2,uc=4,ku=64,nf=128,Os=256,hf=512,Pf=8192,If=16384,df=32768,Kl=null,pf=131072,Pc=262144,Hc=524288,bf=1048576,lc=2097152,cc=4194304,rf=8388608,af=16777216,Ic=null;function wl(R,ut){return R=clamp(Math.floor(R),0,255),ut=clamp(Math.floor(ut),0,255),256*R+ut}function Wc(R){var ut=R.color,Te=R.radius,fe=R.tileX,we=R.tileY,je=R.shape,_t=R.opacity,It=R.stroke,Ct=R.strokeWidth,Jt=R.strokeOpacity,Wn=[],Mr=[],hr=[],kr=[wl(ut[0],ut[1]),wl(ut[2],ut[3])],ia=[wl(It[0],It[1]),wl(It[2],It[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function($i){var zi=_slicedToArray($i,2),Ea=zi[0],qa=zi[1];Wn.push([].concat(kr,[(Ea+1)*rf+(qa+1)*lc+getShapeIndex(je)*pf+Te,(fe+512)*Hc+(we+512)*ku])),Mr.push([].concat(ia,[Ct,Jt])),hr.push([_t,0,0,0])}),{packedBuffer:Wn,packedBuffer2:Mr,packedBuffer3:hr}}function of(R,ut){if(R===0&&!ut)return 0;if(R===1&&ut)return 4294967295;var Te=ut?1:0,fe=Math.floor(R*127);return fe*Ic+Te*af+fe*pf+Te*Kl+fe*hf+Te*Os+fe*tf+Te}var fc={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},sf={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Ml;(function(R){R.LINEAR="linear",R.SEQUENTIAL="sequential",R.POWER="power",R.LOG="log",R.IDENTITY="identity",R.TIME="time",R.QUANTILE="quantile",R.QUANTIZE="quantize",R.THRESHOLD="threshold",R.CAT="cat",R.DIVERGING="diverging"})(Ml||(Ml={}));var Gu;(function(R){R.CONSTANT="constant",R.VARIABLE="variable"})(Gu||(Gu={}));var Ol;(function(R){R[R.Attribute=0]="Attribute",R[R.InstancedAttribute=1]="InstancedAttribute",R[R.Uniform=2]="Uniform"})(Ol||(Ol={}));var Lu=["mapload","mapchange","mapAfterFrameChange"],Pl=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Hu;(function(R){R.IMAGE="image",R.CUSTOMIMAGE="customImage",R.ARRAYBUFFER="arraybuffer",R.RGB="rgb",R.TERRAINRGB="terrainRGB",R.CUSTOMRGB="customRGB",R.CUSTOMARRAYBUFFER="customArrayBuffer",R.CUSTOMTERRAINRGB="customTerrainRGB"})(Hu||(Hu={}))},54539:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return Gl}});var E=y(15671),p=y(43144),M=y(60136),d=y(82963),g=y(61120),x=y(1413),v=y(43269),u=y(53229),t=y(54095),e,o,c,b=(e=(0,t.yT)(t.vK.IGlobalConfigService),o=function(){function le(X){(0,E.Z)(this,le),(0,v.Z)(this,"configService",c,this),this.config=X}return(0,p.Z)(le,[{key:"setContainer",value:function(O,j,Q,Re){O.bind(t.vK.MapConfig).toConstantValue((0,x.Z)((0,x.Z)({},this.config),{},{id:j,canvas:Q,hasBaseMap:Re})),O.bind(t.vK.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),le}(),c=(0,u.Z)(o.prototype,"configService",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o),A=y(91),w=y(15861),D=y(97326),F=y(4942),Z=y(64687),L=y.n(Z),W=y(44402),k=y(96486),de=y(26729),H=y(71002),ue=y(99874),ve=y.n(ue);function ke(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=Ae(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function Ae(le,X){if(le){if(typeof le=="string")return be(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return be(le,X)}}function be(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var G;function ie(le,X,O){var j=O-X,Q=((le-X)%j+j)%j+X;return Q===X?O:Q}function V(le,X,O){return Math.min(O,Math.max(X,le))}function ae(le,X,O){return le*(1-O)+X*O}function K(le,X,O,j){var Q=new(ve())(le,X,O,j);return function(Re){return Q.solve(Re)}}var he=K(.25,.1,.25,1);function Se(){return W.eW||!W.vO.matchMedia?!1:(G==null&&(G=W.vO.matchMedia("(prefers-reduced-motion: reduce)")),G.matches)}function Fe(le,X){var O={},j=ke(X),Q;try{for(j.s();!(Q=j.n()).done;){var Re=Q.value;Re in le&&(O[Re]=le[Re])}}catch(se){j.e(se)}finally{j.f()}return O}var nt=W.eW?Date.now.bind(Date):W.vO.performance&&W.vO.performance.now?W.vO.performance.now.bind(W.vO.performance):Date.now.bind(Date),lt=W.vO.requestAnimationFrame||W.vO.mozRequestAnimationFrame||W.vO.webkitRequestAnimationFrame||W.vO.msRequestAnimationFrame,Gt=W.vO.cancelAnimationFrame||W.vO.mozCancelAnimationFrame||W.vO.webkitCancelAnimationFrame||W.vO.msCancelAnimationFrame;function pn(le){var X=lt(le);return{cancel:function(){return Gt(X)}}}var $n=63710088e-1,Ln=function(){function le(X,O){if((0,E.Z)(this,le),isNaN(X)||isNaN(O))throw new Error("Invalid LngLat object: (".concat(X,", ").concat(O,")"));if(this.lng=+X,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,p.Z)(le,[{key:"wrap",value:function(){return new le(ie(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(O){var j=Math.PI/180,Q=this.lat*j,Re=O.lat*j,se=Math.sin(Q)*Math.sin(Re)+Math.cos(Q)*Math.cos(Re)*Math.cos((O.lng-this.lng)*j),At=$n*Math.acos(Math.min(se,1));return At}}],[{key:"convert",value:function(O){if(O instanceof le)return O;if(Array.isArray(O)&&(O.length===2||O.length===3))return new le(Number(O[0]),Number(O[1]));if(!Array.isArray(O)&&(0,H.Z)(O)==="object"&&O!==null){var j="lng"in O?O.lng:O.lon;return new le(Number(j),Number(O.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),le}(),st=function(){function le(X,O){(0,E.Z)(this,le),X&&(O?this.setSouthWest(X).setNorthEast(O):X.length===4?this.setSouthWest([X[0],X[1]]).setNorthEast([X[2],X[3]]):this.setSouthWest(X[0]).setNorthEast(X[1]))}return(0,p.Z)(le,[{key:"setNorthEast",value:function(O){return this.ne=O instanceof Ln?new Ln(O.lng,O.lat):Ln.convert(O),this}},{key:"setSouthWest",value:function(O){return this.sw=O instanceof Ln?new Ln(O.lng,O.lat):Ln.convert(O),this}},{key:"extend",value:function(O){var j=this.sw,Q=this.ne,Re,se;if(O instanceof Ln)Re=O,se=O;else if(O instanceof le){if(Re=O.sw,se=O.ne,!Re||!se)return this}else{if(Array.isArray(O))if(O.length===4||O.every(Array.isArray)){var At=O;return this.extend(le.convert(At))}else{var Rt=O;return this.extend(Ln.convert(Rt))}return this}return!j&&!Q?(this.sw=new Ln(Re.lng,Re.lat),this.ne=new Ln(se.lng,se.lat)):(j.lng=Math.min(Re.lng,j.lng),j.lat=Math.min(Re.lat,j.lat),Q.lng=Math.max(se.lng,Q.lng),Q.lat=Math.max(se.lat,Q.lat)),this}},{key:"getCenter",value:function(){return new Ln((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Ln(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ln(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(O){var j=Ln.convert(O),Q=j.lng,Re=j.lat,se=this.sw.lat<=Re&&Re<=this.ne.lat,At=this.sw.lng<=Q&&Q<=this.ne.lng;return this.sw.lng>this.ne.lng&&(At=this.sw.lng>=Q&&Q>=this.ne.lng),se&&At}}],[{key:"convert",value:function(O){return O instanceof le?O:new le(O)}}]),le}(),xt=function(){function le(X,O){(0,E.Z)(this,le),this.x=X,this.y=O}return(0,p.Z)(le,[{key:"clone",value:function(){return new le(this.x,this.y)}},{key:"_add",value:function(O){return this.x+=O.x,this.y+=O.y,this}},{key:"add",value:function(O){return this.clone()._add(O)}},{key:"_sub",value:function(O){return this.x-=O.x,this.y-=O.y,this}},{key:"sub",value:function(O){return this.clone()._sub(O)}},{key:"_multByPoint",value:function(O){return this.x*=O.x,this.y*=O.y,this}},{key:"multByPoint",value:function(O){return this.clone()._multByPoint(O)}},{key:"_divByPoint",value:function(O){return this.x/=O.x,this.y/=O.y,this}},{key:"divByPoint",value:function(O){return this.clone()._divByPoint(O)}},{key:"_mult",value:function(O){return this.x*=O,this.y*=O,this}},{key:"mult",value:function(O){return this.clone()._mult(O)}},{key:"_div",value:function(O){return this.x/=O,this.y/=O,this}},{key:"div",value:function(O){return this.clone()._div(O)}},{key:"_rotate",value:function(O){var j=Math.cos(O),Q=Math.sin(O),Re=j*this.x-Q*this.y,se=Q*this.x+j*this.y;return this.x=Re,this.y=se,this}},{key:"rotate",value:function(O){return this.clone()._rotate(O)}},{key:"_rotateAround",value:function(O,j){var Q=Math.cos(O),Re=Math.sin(O),se=j.x+Q*(this.x-j.x)-Re*(this.y-j.y),At=j.y+Re*(this.x-j.x)+Q*(this.y-j.y);return this.x=se,this.y=At,this}},{key:"roateAround",value:function(O,j){return this.clone()._rotateAround(O,j)}},{key:"_matMult",value:function(O){var j=O[0]*this.x+O[1]*this.y,Q=O[2]*this.x+O[3]*this.y;return this.x=j,this.y=Q,this}},{key:"matMult",value:function(O){return this.clone()._matMult(O)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var O=this.y;return this.y=this.x,this.x=-O,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(O){return this.x===O.x&&this.y===O.y}},{key:"dist",value:function(O){return Math.sqrt(this.distSqr(O))}},{key:"distSqr",value:function(O){var j=O.x-this.x,Q=O.y-this.y;return j*j+Q*Q}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(O){return Math.atan2(this.y-O.y,this.x-O.x)}},{key:"angleWith",value:function(O){return this.angleWithSep(O.x,O.y)}},{key:"angleWithSep",value:function(O,j){return Math.atan2(this.x*j-this.y*O,this.x*O+this.y*j)}}],[{key:"convert",value:function(O){return O instanceof le?O:Array.isArray(O)?new le(O[0],O[1]):O}}]),le}(),tn=y(49685);function Un(){var le=new tn.WT(4);return tn.WT!=Float32Array&&(le[1]=0,le[2]=0),le[0]=1,le[3]=1,le}function We(le){var X=new glMatrix.ARRAY_TYPE(4);return X[0]=le[0],X[1]=le[1],X[2]=le[2],X[3]=le[3],X}function Yt(le,X){return le[0]=X[0],le[1]=X[1],le[2]=X[2],le[3]=X[3],le}function Ze(le){return le[0]=1,le[1]=0,le[2]=0,le[3]=1,le}function Pe(le,X,O,j){var Q=new glMatrix.ARRAY_TYPE(4);return Q[0]=le,Q[1]=X,Q[2]=O,Q[3]=j,Q}function ze(le,X,O,j,Q){return le[0]=X,le[1]=O,le[2]=j,le[3]=Q,le}function ht(le,X){if(le===X){var O=X[1];le[1]=X[2],le[2]=O}else le[0]=X[0],le[1]=X[2],le[2]=X[1],le[3]=X[3];return le}function P(le,X){var O=X[0],j=X[1],Q=X[2],Re=X[3],se=O*Re-Q*j;return se?(se=1/se,le[0]=Re*se,le[1]=-j*se,le[2]=-Q*se,le[3]=O*se,le):null}function ne(le,X){var O=X[0];return le[0]=X[3],le[1]=-X[1],le[2]=-X[2],le[3]=O,le}function _e(le){return le[0]*le[3]-le[2]*le[1]}function oe(le,X,O){var j=X[0],Q=X[1],Re=X[2],se=X[3],At=O[0],Rt=O[1],Ut=O[2],Zn=O[3];return le[0]=j*At+Re*Rt,le[1]=Q*At+se*Rt,le[2]=j*Ut+Re*Zn,le[3]=Q*Ut+se*Zn,le}function ce(le,X,O){var j=X[0],Q=X[1],Re=X[2],se=X[3],At=Math.sin(O),Rt=Math.cos(O);return le[0]=j*Rt+Re*At,le[1]=Q*Rt+se*At,le[2]=j*-At+Re*Rt,le[3]=Q*-At+se*Rt,le}function ye(le,X,O){var j=X[0],Q=X[1],Re=X[2],se=X[3],At=O[0],Rt=O[1];return le[0]=j*At,le[1]=Q*At,le[2]=Re*Rt,le[3]=se*Rt,le}function Y(le,X){var O=Math.sin(X),j=Math.cos(X);return le[0]=j,le[1]=O,le[2]=-O,le[3]=j,le}function Ne(le,X){return le[0]=X[0],le[1]=0,le[2]=0,le[3]=X[1],le}function Qe(le){return"mat2("+le[0]+", "+le[1]+", "+le[2]+", "+le[3]+")"}function mt(le){return Math.hypot(le[0],le[1],le[2],le[3])}function Ve(le,X,O,j){return le[2]=j[2]/j[0],O[0]=j[0],O[1]=j[1],O[3]=j[3]-le[2]*O[1],[le,X,O]}function rt(le,X,O){return le[0]=X[0]+O[0],le[1]=X[1]+O[1],le[2]=X[2]+O[2],le[3]=X[3]+O[3],le}function yt(le,X,O){return le[0]=X[0]-O[0],le[1]=X[1]-O[1],le[2]=X[2]-O[2],le[3]=X[3]-O[3],le}function Tt(le,X){return le[0]===X[0]&&le[1]===X[1]&&le[2]===X[2]&&le[3]===X[3]}function Ht(le,X){var O=le[0],j=le[1],Q=le[2],Re=le[3],se=X[0],At=X[1],Rt=X[2],Ut=X[3];return Math.abs(O-se)<=glMatrix.EPSILON*Math.max(1,Math.abs(O),Math.abs(se))&&Math.abs(j-At)<=glMatrix.EPSILON*Math.max(1,Math.abs(j),Math.abs(At))&&Math.abs(Q-Rt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Rt))&&Math.abs(Re-Ut)<=glMatrix.EPSILON*Math.max(1,Math.abs(Re),Math.abs(Ut))}function en(le,X,O){return le[0]=X[0]*O,le[1]=X[1]*O,le[2]=X[2]*O,le[3]=X[3]*O,le}function wt(le,X,O,j){return le[0]=X[0]+O[0]*j,le[1]=X[1]+O[1]*j,le[2]=X[2]+O[2]*j,le[3]=X[3]+O[3]*j,le}var Mn=null,kn=null,jn=y(98333),mn=y(85975),cr=function(){function le(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,E.Z)(this,le),isNaN(X)||X<0||isNaN(O)||O<0||isNaN(j)||j<0||isNaN(Q)||Q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=X,this.bottom=O,this.left=j,this.right=Q}return(0,p.Z)(le,[{key:"interpolate",value:function(O,j,Q){return j.top!=null&&O.top!=null&&(this.top=ae(O.top,j.top,Q)),j.bottom!=null&&O.bottom!=null&&(this.bottom=ae(O.bottom,j.bottom,Q)),j.left!=null&&O.left!=null&&(this.left=ae(O.left,j.left,Q)),j.right!=null&&O.right!=null&&(this.right=ae(O.right,j.right,Q)),this}},{key:"getCenter",value:function(O,j){var Q=V((this.left+O-this.right)/2,0,O),Re=V((this.top+j-this.bottom)/2,0,j);return new xt(Q,Re)}},{key:"equals",value:function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right}},{key:"clone",value:function(){return new le(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),le}(),Cr=2*Math.PI*$n;function mi(le){return Cr*Math.cos(le*Math.PI/180)}function $r(le){return(180+le)/360}function Sr(le){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+le*Math.PI/360)))/360}function dr(le,X){return le/mi(X)}function Pr(le){return le*360-180}function Hr(le){var X=180-le*360;return 360/Math.PI*Math.atan(Math.exp(X*Math.PI/180))-90}function Xi(le,X){return le*mi(Hr(X))}function Kn(le){return 1/Math.cos(le*Math.PI/180)}var Gn=function(){function le(X,O){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,E.Z)(this,le),this.x=+X,this.y=+O,this.z=+j}return(0,p.Z)(le,[{key:"toLngLat",value:function(){return new Ln(Pr(this.x),Hr(this.y))}},{key:"toAltitude",value:function(){return Xi(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Cr*Kn(Hr(this.y))}}],[{key:"fromLngLat",value:function(O){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Q=Ln.convert(O);return new le($r(Q.lng),Sr(Q.lat),dr(j,Q.lat))}}]),le}();function pt(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=Ha(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function Ha(le,X){if(le){if(typeof le=="string")return Sa(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Sa(le,X)}}function Sa(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var Qa=8192,ma=function(){function le(X,O,j,Q,Re){(0,E.Z)(this,le),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Re===void 0?!0:Re,this._minZoom=X||0,this._maxZoom=O||22,this._minPitch=j==null?0:j,this._maxPitch=Q==null?60:Q,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ln(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new cr,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,p.Z)(le,[{key:"minZoom",get:function(){return this._minZoom},set:function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))}},{key:"minPitch",get:function(){return this._minPitch},set:function(O){this._minPitch!==O&&(this._minPitch=O,this._pitch=Math.max(this._pitch,O))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(O){this._maxPitch!==O&&(this._maxPitch=O,this._pitch=Math.min(this._pitch,O))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(O){O===void 0?O=!0:O===null&&(O=!1),this._renderWorldCopies=O}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new xt(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(O){var j=-ie(O,-180,180)*Math.PI/180;this.angle!==j&&(this.unmodified=!1,this.angle=j,this.calcMatrices(),this.rotationMatrix=Un(),ce(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(O){var j=V(O,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==j&&(this.unmodified=!1,this._pitch=j,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this.unmodified=!1,this._fov=O/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(O){var j=Math.min(Math.max(O,this._minZoom),this._maxZoom);this._zoom!==j&&(this.unmodified=!1,this._zoom=j,this.scale=this.zoomScale(j),this.tileZoom=Math.floor(j),this.zoomFraction=j-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this.unmodified=!1,this._center=O,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(O){this.edgeInsets.equals(O)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,O,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var O=new le(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O.center=this._center,O.zoom=this.zoom,O.angle=this.angle,O.fov=this._fov,O.pitch=this._pitch,O.unmodified=this.unmodified,O.edgeInsets=this.edgeInsets.clone(),O.calcMatrices(),O}},{key:"isPaddingEqual",value:function(O){return this.edgeInsets.equals(O)}},{key:"interpolatePadding",value:function(O,j,Q){this.unmodified=!1,this.edgeInsets.interpolate(O,j,Q),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(O){var j=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,j)}},{key:"resize",value:function(O,j){this.width=O,this.height=j,this.pixelsToGLUnits=[2/O,-2/j],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(O){return Math.pow(2,O)}},{key:"scaleZoom",value:function(O){return Math.log(O)/Math.LN2}},{key:"project",value:function(O){var j=V(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new xt($r(O.lng)*this.worldSize,Sr(j)*this.worldSize)}},{key:"unproject",value:function(O){return new Gn(O.x/this.worldSize,O.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(O,j){var Q=this.pointCoordinate(j),Re=this.pointCoordinate(this.centerPoint),se=this.locationCoordinate(O),At=new Gn(se.x-(Q.x-Re.x),se.y-(Q.y-Re.y));this.center=this.coordinateLocation(At),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(O){var j=0,Q=new Float64Array([O.x,O.y,0,1]),Re=new Float64Array([O.x,O.y,1,1]);jn.fF(Q,Q,this.pixelMatrixInverse),jn.fF(Re,Re,this.pixelMatrixInverse);var se=Q[3],At=Re[3],Rt=Q[0]/se,Ut=Re[0]/At,Zn=Q[1]/se,gr=Re[1]/At,ni=Q[2]/se,Vr=Re[2]/At,wi=ni===Vr?0:(j-ni)/(Vr-ni);return new Gn(ae(Rt,Ut,wi)/this.worldSize,ae(Zn,gr,wi)/this.worldSize)}},{key:"getBounds",value:function(){return new st().extend(this.pointLocation(new xt(0,0))).extend(this.pointLocation(new xt(this.width,0))).extend(this.pointLocation(new xt(this.width,this.height))).extend(this.pointLocation(new xt(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new st([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new xt(0,0)),j=new Float32Array([O.x*this.worldSize,O.y*this.worldSize,0,1]),Q=jn.fF(j,j,this.pixelMatrix);return Q[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var O=this._pitch,j=Math.tan(O)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new xt(0,j))}},{key:"getCameraQueryGeometry",value:function(O){var j=this.getCameraPoint();if(O.length===1)return[O[0],j];var Q=j.x,Re=j.y,se=j.x,At=j.y,Rt=pt(O),Ut;try{for(Rt.s();!(Ut=Rt.n()).done;){var Zn=Ut.value;Q=Math.min(Q,Zn.x),Re=Math.min(Re,Zn.y),se=Math.max(se,Zn.x),At=Math.max(At,Zn.y)}}catch(gr){Rt.e(gr)}finally{Rt.f()}return[new xt(Q,Re),new xt(se,Re),new xt(se,At),new xt(Q,At),new xt(Q,Re)]}},{key:"coordinatePoint",value:function(O){var j=jn.al(O.x*this.worldSize,O.y*this.worldSize,0,1);return jn.fF(j,j,this.pixelMatrix),new xt(j[0]/j[3],j[1]/j[3])}},{key:"locationPoint",value:function(O){return this.coordinatePoint(this.locationCoordinate(O))}},{key:"pointLocation",value:function(O){return this.coordinateLocation(this.pointCoordinate(O))}},{key:"locationCoordinate",value:function(O){return Gn.fromLngLat(O)}},{key:"coordinateLocation",value:function(O){return O.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var O=-90,j=90,Q=-180,Re=180,se,At,Rt,Ut,Zn=this.size,gr=this.unmodified;if(this.latRange){var ni=this.latRange;O=Sr(ni[1])*this.worldSize,j=Sr(ni[0])*this.worldSize,se=j-O<Zn.y?Zn.y/(j-O):0}if(this.lngRange){var Vr=this.lngRange;Q=$r(Vr[0])*this.worldSize,Re=$r(Vr[1])*this.worldSize,At=Re-Q<Zn.x?Zn.x/(Re-Q):0}var wi=this.point,ji=Math.max(At||0,se||0);if(ji){this.center=this.unproject(new xt(At?(Re+Q)/2:wi.x,se?(j+O)/2:wi.y)),W.eW?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(ji),this.unmodified=gr,this.constraining=!1;return}if(this.latRange){var da=wi.y,wa=Zn.y/2;da-wa<O&&(Ut=O+wa),da+wa>j&&(Ut=j-wa)}if(this.lngRange){var to=wi.x,va=Zn.x/2;to-va<Q&&(Rt=Q+va),to+va>Re&&(Rt=Re-va)}(Rt!==void 0||Ut!==void 0)&&(this.center=this.unproject(new xt(Rt!==void 0?Rt:wi.x,Ut!==void 0?Ut:wi.y))),this.unmodified=gr,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var O=this._fov/2,j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(O)*this.height;var Q=Math.PI/2+this._pitch,Re=this._fov*(.5+j.y/this.height),se=Math.sin(Re)*this.cameraToCenterDistance/Math.sin(V(Math.PI-Q-Re,.01,Math.PI-.01)),At=this.point,Rt=At.x,Ut=At.y,Zn=Math.cos(Math.PI/2-this._pitch)*se+this.cameraToCenterDistance,gr=Zn*1.01,ni=this.height/50,Vr=new Float64Array(16);mn.perspective(Vr,this._fov,this.width/this.height,ni,gr),Vr[8]=-j.x*2/this.width,Vr[9]=j.y*2/this.height,mn.scale(Vr,Vr,[1,-1,1]),mn.translate(Vr,Vr,[0,0,-this.cameraToCenterDistance]),mn.rotateX(Vr,Vr,this._pitch),mn.rotateZ(Vr,Vr,this.angle),mn.translate(Vr,Vr,[-Rt,-Ut,0]),this.mercatorMatrix=mn.scale([],Vr,[this.worldSize,this.worldSize,this.worldSize]),mn.scale(Vr,Vr,[1,1,dr(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Vr,this.invProjMatrix=mn.invert([],this.projMatrix);var wi=this.width%2/2,ji=this.height%2/2,da=Math.cos(this.angle),wa=Math.sin(this.angle),to=Rt-Math.round(Rt)+da*wi+wa*ji,va=Ut-Math.round(Ut)+da*ji+wa*wi,ba=new Float64Array(Vr);if(mn.translate(ba,ba,[to>.5?to-1:to,va>.5?va-1:va,0]),this.alignedProjMatrix=ba,Vr=mn.create(),mn.scale(Vr,Vr,[this.width/2,-this.height/2,1]),mn.translate(Vr,Vr,[1,-1,0]),this.labelPlaneMatrix=Vr,Vr=mn.create(),mn.scale(Vr,Vr,[1,-1,1]),mn.translate(Vr,Vr,[-1,-1,0]),mn.scale(Vr,Vr,[2/this.width,2/this.height,1]),this.glCoordMatrix=Vr,this.pixelMatrix=mn.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),Vr=mn.invert(new Float64Array(16),this.pixelMatrix),!Vr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=Vr,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),le}(),Ei=y(82492),Ia=y.n(Ei),si=(0,p.Z)(function le(X){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,E.Z)(this,le),Ia()(this,O),this.type=X});function it(le){var X=Qn();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Qn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var pe=function(le){(0,M.Z)(O,le);var X=it(O);function O(j){var Q;(0,E.Z)(this,O),Q=X.call(this),(0,F.Z)((0,D.Z)(Q),"renderFrameCallback",function(){var Zn=Math.min((nt()-Q.easeStart)/Q.easeOptions.duration,1);Q.onEaseFrame(Q.easeOptions.easing(Zn)),Zn<1?Q.easeFrameId=Q.requestRenderFrame(Q.renderFrameCallback):Q.stop()}),Q.options=j;var Re=j.minZoom,se=j.maxZoom,At=j.minPitch,Rt=j.maxPitch,Ut=j.renderWorldCopies;return Q.moving=!1,Q.zooming=!1,Q.bearingSnap=j.bearingSnap,Q.pitchEnabled=j.pitchEnabled,Q.rotateEnabled=j.rotateEnabled,Q.transform=new ma(Re,se,At,Rt,Ut),Q}return(0,p.Z)(O,[{key:"requestRenderFrame",value:function(Q){return 0}},{key:"cancelRenderFrame",value:function(Q){}},{key:"getCenter",value:function(){var Q=this.transform.center,Re=Q.lng,se=Q.lat;return new Ln(Re,se)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(Q,Re){return this.jumpTo({center:Q},Re)}},{key:"setPitch",value:function(Q,Re){return this.jumpTo({pitch:Q},Re),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(Q,Re,se){return this.easeTo((0,k.merge)({center:Q},Re),se)}},{key:"zoomOut",value:function(Q,Re){return this.zoomTo(this.getZoom()-1,Q,Re),this}},{key:"setBearing",value:function(Q,Re){return this.jumpTo({bearing:Q},Re),this}},{key:"setZoom",value:function(Q,Re){return this.jumpTo({zoom:Q},Re),this}},{key:"zoomIn",value:function(Q,Re){return this.zoomTo(this.getZoom()+1,Q,Re),this}},{key:"zoomTo",value:function(Q,Re,se){return this.easeTo((0,k.merge)({zoom:Q},Re),se)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(Q,Re){return this.jumpTo({padding:Q},Re),this}},{key:"rotateTo",value:function(Q,Re,se){return this.easeTo((0,k.merge)({bearing:Q},Re),se)}},{key:"resetNorth",value:function(Q,Re){return this.rotateTo(0,(0,k.merge)({duration:1e3},Q),Re),this}},{key:"resetNorthPitch",value:function(Q,Re){return this.easeTo((0,k.merge)({bearing:0,pitch:0,duration:1e3},Q),Re),this}},{key:"fitBounds",value:function(Q,Re,se){return this.fitInternal(this.cameraForBounds(Q,Re),Re,se)}},{key:"cameraForBounds",value:function(Q,Re){return Q=st.convert(Q),this.cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,Re)}},{key:"snapToNorth",value:function(Q,Re){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(Q,Re):this}},{key:"jumpTo",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Re=arguments.length>1?arguments[1]:void 0;this.stop();var se=this.transform,At=!1,Rt=!1,Ut=!1;return Q.zoom!==void 0&&se.zoom!==+Q.zoom&&(At=!0,se.zoom=+Q.zoom),Q.center!==void 0&&(se.center=Ln.convert(Q.center)),Q.bearing!==void 0&&se.bearing!==+Q.bearing&&(Rt=!0,se.bearing=+Q.bearing),Q.pitch!==void 0&&se.pitch!==+Q.pitch&&(Ut=!0,se.pitch=+Q.pitch),Q.padding!==void 0&&!se.isPaddingEqual(Q.padding)&&(se.padding=Q.padding),this.emit("movestart",new si("movestart",Re)),this.emit("move",new si("move",Re)),At&&(this.emit("zoomstart",new si("zoomstart",Re)),this.emit("zoom",new si("zoom",Re)),this.emit("zoomend",new si("zoomend",Re))),Rt&&(this.emit("rotatestart",new si("rotatestart",Re)),this.emit("rotate",new si("rotate",Re)),this.emit("rotateend",new si("rotateend",Re))),Ut&&(this.emit("pitchstart",new si("pitchstart",Re)),this.emit("pitch",new si("pitch",Re)),this.emit("pitchend",new si("pitchend",Re))),this.emit("moveend",new si("moveend",Re))}},{key:"easeTo",value:function(){var Q=this,Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=arguments.length>1?arguments[1]:void 0;Re=(0,k.merge)({offset:[0,0],duration:500,easing:he},Re),(Re.animate===!1||!Re.essential&&Se())&&(Re.duration=0);var At=this.transform,Rt=this.getZoom(),Ut=this.getBearing(),Zn=this.getPitch(),gr=this.getPadding(),ni=Re.zoom?+Re.zoom:Rt,Vr=Re.bearing?this.normalizeBearing(Re.bearing,Ut):Ut,wi=Re.pitch?+Re.pitch:Zn,ji=Re.padding?Re.padding:At.padding,da=xt.convert(Re.offset),wa=At.centerPoint.add(da),to=At.pointLocation(wa),va=Ln.convert(Re.center||to);this.normalizeCenter(va);var ba=At.project(to),ao=At.project(va).sub(ba),Mo=At.zoomScale(ni-Rt),so,ka;Re.around&&(so=Ln.convert(Re.around),ka=At.locationPoint(so));var zo={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||ni!==Rt,this.rotating=this.rotating||Ut!==Vr,this.pitching=this.pitching||wi!==Zn,this.padding=!At.isPaddingEqual(ji),this.easeId=Re.easeId,this.prepareEase(se,Re.noMoveStart,zo),clearTimeout(this.easeEndTimeoutID),this.ease(function(fi){if(Q.zooming&&(At.zoom=ae(Rt,ni,fi)),Q.rotating&&Q.rotateEnabled&&(At.bearing=ae(Ut,Vr,fi)),Q.pitching&&Q.pitchEnabled&&(At.pitch=ae(Zn,wi,fi)),Q.padding&&(At.interpolatePadding(gr,ji,fi),wa=At.centerPoint.add(da)),so)At.setLocationAtPoint(so,ka);else{var Go=At.zoomScale(At.zoom-Rt),mu=ni>Rt?Math.min(2,Mo):Math.max(.5,Mo),bo=Math.pow(mu,1-fi),ss=At.unproject(ba.add(ao.mult(fi*bo)).mult(Go));At.setLocationAtPoint(At.renderWorldCopies?ss.wrap():ss,wa)}Q.fireMoveEvents(se)},function(fi){Q.afterEase(se,fi)},Re),this}},{key:"flyTo",value:function(){var Q=this,Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=arguments.length>1?arguments[1]:void 0;if(!Re.essential&&Se()){var At=Fe(Re,["center","zoom","bearing","pitch","around"]);return this.jumpTo(At,se)}this.stop(),Re=(0,k.merge)({offset:[0,0],speed:1.2,curve:1.42,easing:he},Re);var Rt=this.transform,Ut=this.getZoom(),Zn=this.getBearing(),gr=this.getPitch(),ni=this.getPadding(),Vr=Re.zoom?V(+Re.zoom,Rt.minZoom,Rt.maxZoom):Ut,wi=Re.bearing?this.normalizeBearing(Re.bearing,Zn):Zn,ji=Re.pitch?+Re.pitch:gr,da="padding"in Re?Re.padding:Rt.padding,wa=Rt.zoomScale(Vr-Ut),to=xt.convert(Re.offset),va=Rt.centerPoint.add(to),ba=Rt.pointLocation(va),ao=Ln.convert(Re.center||ba);this.normalizeCenter(ao);var Mo=Rt.project(ba),so=Rt.project(ao).sub(Mo),ka=Re.curve,zo=Math.max(Rt.width,Rt.height),fi=zo/wa,Go=so.mag();if("minZoom"in Re){var mu=V(Math.min(Re.minZoom,Ut,Vr),Rt.minZoom,Rt.maxZoom),bo=zo/Rt.zoomScale(mu-Ut);ka=Math.sqrt(bo/Go*2)}var ss=ka*ka;function Pu(Oo){var xs=(fi*fi-zo*zo+(Oo?-1:1)*ss*ss*Go*Go)/(2*(Oo?fi:zo)*ss*Go);return Math.log(Math.sqrt(xs*xs+1)-xs)}function yu(Oo){return(Math.exp(Oo)-Math.exp(-Oo))/2}function cu(Oo){return(Math.exp(Oo)+Math.exp(-Oo))/2}function fu(Oo){return yu(Oo)/cu(Oo)}var Fo=Pu(0),Sl=function(xs){return cu(Fo)/cu(Fo+ka*xs)},$c=function(xs){return zo*((cu(Fo)*fu(Fo+ka*xs)-yu(Fo))/ss)/Go},Ka=(Pu(1)-Fo)/ka;if(Math.abs(Go)<1e-6||!isFinite(Ka)){if(Math.abs(zo-fi)<1e-6)return this.easeTo(Re,se);var Qc=fi<zo?-1:1;Ka=Math.abs(Math.log(fi/zo))/ka,$c=function(){return 0},Sl=function(xs){return Math.exp(Qc*ka*xs)}}if("duration"in Re)Re.duration=+Re.duration;else{var jc="screenSpeed"in Re?+Re.screenSpeed/ka:+Re.speed;Re.duration=1e3*Ka/jc}return Re.maxDuration&&Re.duration>Re.maxDuration&&(Re.duration=0),this.zooming=!0,this.rotating=Zn!==wi,this.pitching=ji!==gr,this.padding=!Rt.isPaddingEqual(da),this.prepareEase(se,!1),this.ease(function(Oo){var xs=Oo*Ka,Hs=1/Sl(xs);Rt.zoom=Oo===1?Vr:Ut+Rt.scaleZoom(Hs),Q.rotating&&(Rt.bearing=ae(Zn,wi,Oo)),Q.pitching&&(Rt.pitch=ae(gr,ji,Oo)),Q.padding&&(Rt.interpolatePadding(ni,da,Oo),va=Rt.centerPoint.add(to));var Iu=Oo===1?ao:Rt.unproject(Mo.add(so.mult($c(xs))).mult(Hs));Rt.setLocationAtPoint(Rt.renderWorldCopies?Iu.wrap():Iu,va),Q.fireMoveEvents(se)},function(){return Q.afterEase(se)},Re),this}},{key:"fitScreenCoordinates",value:function(Q,Re,se,At,Rt){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(xt.convert(Q)),this.transform.pointLocation(xt.convert(Re)),se,At),At,Rt)}},{key:"stop",value:function(Q,Re){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var se=this.onEaseEnd;delete this.onEaseEnd,se.call(this,Re)}return this}},{key:"normalizeBearing",value:function(Q,Re){Q=ie(Q,-180,180);var se=Math.abs(Q-Re);return Math.abs(Q-360-Re)<se&&(Q-=360),Math.abs(Q+360-Re)<se&&(Q+=360),Q}},{key:"normalizeCenter",value:function(Q){var Re=this.transform;if(!(!Re.renderWorldCopies||Re.lngRange)){var se=Q.lng-Re.center.lng;Q.lng+=se>180?-360:se<-180?360:0}}},{key:"fireMoveEvents",value:function(Q){this.emit("move",new si("move",Q)),this.zooming&&this.emit("zoom",new si("zoom",Q)),this.rotating&&this.emit("rotate",new si("rotate",Q)),this.pitching&&this.emit("rotate",new si("pitch",Q))}},{key:"prepareEase",value:function(Q){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!Re&&!se.moving&&this.emit("movestart",new si("movestart",Q)),this.zooming&&!se.zooming&&this.emit("zoomstart",new si("zoomstart",Q)),this.rotating&&!se.rotating&&this.emit("rotatestart",new si("rotatestart",Q)),this.pitching&&!se.pitching&&this.emit("pitchstart",new si("pitchstart",Q))}},{key:"afterEase",value:function(Q,Re){if(!(this.easeId&&Re&&this.easeId===Re)){delete this.easeId;var se=this.zooming,At=this.rotating,Rt=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,se&&this.emit("zoomend",new si("zoomend",Q)),At&&this.emit("rotateend",new si("rotateend",Q)),Rt&&this.emit("pitchend",new si("pitchend",Q)),this.emit("moveend",new si("moveend",Q))}}},{key:"ease",value:function(Q,Re,se){se.animate===!1||se.duration===0?(Q(1),Re()):(this.easeStart=nt(),this.easeOptions=se,this.onEaseFrame=Q,this.onEaseEnd=Re,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(Q,Re,se,At){var Rt={top:0,bottom:0,right:0,left:0};if(At=(0,k.merge)({padding:Rt,offset:[0,0],maxZoom:this.transform.maxZoom},At),typeof At.padding=="number"){var Ut=At.padding;At.padding={top:Ut,bottom:Ut,right:Ut,left:Ut}}At.padding=(0,k.merge)(Rt,At.padding);var Zn=this.transform,gr=Zn.padding,ni=Zn.project(Ln.convert(Q)),Vr=Zn.project(Ln.convert(Re)),wi=ni.rotate(-se*Math.PI/180),ji=Vr.rotate(-se*Math.PI/180),da=new xt(Math.max(wi.x,ji.x),Math.max(wi.y,ji.y)),wa=new xt(Math.min(wi.x,ji.x),Math.min(wi.y,ji.y)),to=da.sub(wa),va=(Zn.width-(gr.left+gr.right+At.padding.left+At.padding.right))/to.x,ba=(Zn.height-(gr.top+gr.bottom+At.padding.top+At.padding.bottom))/to.y;if(!(ba<0||va<0)){var ao=Math.min(Zn.scaleZoom(Zn.scale*Math.min(va,ba)),At.maxZoom),Mo=xt.convert(At.offset),so=(At.padding.left-At.padding.right)/2,ka=(At.padding.top-At.padding.bottom)/2,zo=new xt(Mo.x+so,Mo.y+ka),fi=zo.mult(Zn.scale/Zn.zoomScale(ao)),Go=Zn.unproject(ni.add(Vr).div(2).sub(fi));return{center:Go,zoom:ao,bearing:se}}}},{key:"fitInternal",value:function(Q,Re,se){return Q?(Re=(0,k.merge)(Q,Re),delete Re.padding,Re.linear?this.easeTo(Re,se):this.flyTo(Re,se)):this}}]),O}(de.EventEmitter),at=y(97685);function Dt(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=vn(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function vn(le,X){if(le){if(typeof le=="string")return bn(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return bn(le,X)}}function bn(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var Pn={},ar=Pn;Pn.create=function(le,X,O){var j=W.vO.document.createElement(le);return X!==void 0&&(j.className=X),O&&O.appendChild(j),j},Pn.createNS=function(le,X){var O=W.vO.document.createElementNS(le,X);return O};var Zr=W.vO.document&&W.vO.document.documentElement.style;function Xr(le){if(!Zr)return le[0];var X=Dt(le),O;try{for(X.s();!(O=X.n()).done;){var j=O.value;if(j in Zr)return j}}catch(Q){X.e(Q)}finally{X.f()}return le[0]}var ui=Xr(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),qr;Pn.disableDrag=function(){Zr&&ui&&(qr=Zr[ui],Zr[ui]="none")},Pn.enableDrag=function(){Zr&&ui&&(Zr[ui]=qr)};var Ti=Xr(["transform","WebkitTransform"]);Pn.setTransform=function(le,X){le.style[Ti]=X};var fa=!1;try{var Bn=Object.defineProperty({},"passive",{get:function(){fa=!0}});W.vO.addEventListener("test",Bn,Bn),W.vO.removeEventListener("test",Bn,Bn)}catch(le){fa=!1}Pn.addEventListener=function(le,X,O){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in j&&fa?le.addEventListener(X,O,j):le.addEventListener(X,O,j.capture)},Pn.removeEventListener=function(le,X,O){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in j&&fa?le.removeEventListener(X,O,j):le.removeEventListener(X,O,j.capture)};var Li=function le(X){X.preventDefault(),X.stopPropagation(),W.vO.removeEventListener("click",le,!0)};Pn.suppressClick=function(){W.eW||(W.vO.addEventListener("click",Li,!0),setTimeout(function(){W.vO.removeEventListener("click",Li,!0)},0))},Pn.mousePos=function(le,X){if(W.eW)return new xt(X.clientX-le.left-0,X.clientY-le.top-0);var O=le.getBoundingClientRect();return new xt(X.clientX-O.left-le.clientLeft,X.clientY-O.top-le.clientTop)},Pn.touchPos=function(le,X){if(W.eW){var At=[],Rt=Dt(X),Ut;try{for(Rt.s();!(Ut=Rt.n()).done;){var Zn=Ut.value;At.push(new xt(Zn.clientX-le.left,Zn.clientY-le.top))}}catch(gr){Rt.e(gr)}finally{Rt.f()}return At}else{var O=le.getBoundingClientRect(),j=[],Q=Dt(X),Re;try{for(Q.s();!(Re=Q.n()).done;){var se=Re.value;j.push(new xt(se.clientX-O.left-le.clientLeft,se.clientY-O.top-le.clientTop))}}catch(gr){Q.e(gr)}finally{Q.f()}return j}},Pn.mouseButton=function(le){return W.eW&&typeof W.vO.InstallTrigger!="undefined"&&le.button===2&&le.ctrlKey&&W.vO.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:le.button},Pn.remove=function(le){le.parentNode&&le.parentNode.removeChild(le)};function Ji(le){var X=Na();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Na(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var ea=function(le){(0,M.Z)(O,le);var X=Ji(O);function O(j,Q,Re){var se,At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,E.Z)(this,O);var Rt=ar.mousePos(Q.getCanvasContainer(),Re),Ut=Q.unproject(Rt);return se=X.call(this,j,Ia()({point:Rt,lngLat:Ut,originalEvent:Re},At)),se.defaultPrevented=!1,se.target=Q,se}return(0,p.Z)(O,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),O}(si);function ha(le){var X=Ta();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Ta(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var Aa=function(le){(0,M.Z)(O,le);var X=ha(O);function O(j,Q,Re){var se;(0,E.Z)(this,O);var At=j==="touchend"?Re.changedTouches:Re.touches,Rt=ar.touchPos(Q.getCanvasContainer(),At),Ut=Rt.map(function(ni){return Q.unproject(ni)}),Zn=Rt.reduce(function(ni,Vr,wi,ji){return ni.add(Vr.div(ji.length))},new xt(0,0)),gr=Q.unproject(Zn);return se=X.call(this,j,{points:Rt,point:Zn,lngLats:Ut,lngLat:gr,originalEvent:Re}),se.defaultPrevented=!1,se}return(0,p.Z)(O,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),O}(si);function Wi(le){var X=go();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function go(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var Ja=function(le){(0,M.Z)(O,le);var X=Wi(O);function O(j,Q,Re){var se;return(0,E.Z)(this,O),se=X.call(this,j,{originalEvent:Re}),se.defaultPrevented=!1,se}return(0,p.Z)(O,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),O}(si),$o=function(){function le(X){(0,E.Z)(this,le),this.map=X}return(0,p.Z)(le,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(O){this.map.emit(O.type,new ea(O.type,this.map,O))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new ea("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(O){this.delayContextMenu?this.contextMenuEvent=O:this.map.emit(O.type,new ea(O.type,this.map,O)),this.map.listeners("contextmenu")&&O.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),le}(),Ua=function(){function le(X,O){(0,E.Z)(this,le),this.map=X,this.el=X.getCanvasContainer(),this.container=X.getContainer(),this.clickTolerance=O.clickTolerance||1}return(0,p.Z)(le,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(O,j){this.isEnabled()&&O.shiftKey&&O.button===0&&(ar.disableDrag(),this.startPos=this.lastPos=j,this.active=!0)}},{key:"mousemoveWindow",value:function(O,j){if(this.active){var Q=j;if(!(this.lastPos.equals(Q)||!this.box&&Q.dist(this.startPos)<this.clickTolerance)){var Re=this.startPos;this.lastPos=Q,this.box||(this.box=ar.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",O));var se=Math.min(Re.x,Q.x),At=Math.max(Re.x,Q.x),Rt=Math.min(Re.y,Q.y),Ut=Math.max(Re.y,Q.y);ar.setTransform(this.box,"translate(".concat(se,"px,").concat(Rt,"px)")),this.box&&(this.box.style.width="".concat(At-se,"px"),this.box.style.height="".concat(Ut-Rt,"px"))}}}},{key:"mouseupWindow",value:function(O,j){var Q=this;if(this.active&&O.button===0){var Re=this.startPos,se=j;if(this.reset(),ar.suppressClick(),Re.x===se.x&&Re.y===se.y)this.fireEvent("boxzoomcancel",O);else return this.map.emit("boxzoomend",new si("boxzoomend",{originalEvent:O})),{cameraAnimation:function(Rt){return Rt.fitScreenCoordinates(Re,se,Q.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(O){this.active&&O.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",O))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(ar.remove(this.box),this.box=null),ar.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(O,j){return this.map.emit(O,new si(O,{originalEvent:j}))}}]),le}(),Wa=Ua,mo=function(){function le(){(0,E.Z)(this,le),this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(O,j){return O.preventDefault(),{cameraAnimation:function(Re){Re.easeTo({duration:300,zoom:Re.getZoom()+(O.shiftKey?-1:1),around:Re.unproject(j)},{originalEvent:O})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),le}();function fo(le){var X=Ro();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Ro(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var te=function(le){(0,M.Z)(O,le);var X=fo(O);function O(){var j;(0,E.Z)(this,O);for(var Q=arguments.length,Re=new Array(Q),se=0;se<Q;se++)Re[se]=arguments[se];return j=X.call.apply(X,[this].concat(Re)),(0,F.Z)((0,D.Z)(j),"type","renderFrame"),j}return(0,p.Z)(O)}(si);function ho(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=wn(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function wn(le,X){if(le){if(typeof le=="string")return tt(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return tt(le,X)}}function tt(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var $e={linearity:.3,easing:K(0,0,.3,1)},dt=Ia()({deceleration:2500,maxSpeed:1400},$e),Ke=Ia()({deceleration:20,maxSpeed:1400},$e),qt=Ia()({deceleration:1e3,maxSpeed:360},$e),nn=Ia()({deceleration:1e3,maxSpeed:90},$e),ln=function(){function le(X){(0,E.Z)(this,le),this.map=X,this.clear()}return(0,p.Z)(le,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(O){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:nt(),settings:O})}},{key:"drainInertiaBuffer",value:function(){for(var O=this.inertiaBuffer,j=nt(),Q=160;O.length>0&&j-O[0].time>Q;)O.shift()}},{key:"onMoveEnd",value:function(O){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var j={zoom:0,bearing:0,pitch:0,pan:new xt(0,0),pinchAround:void 0,around:void 0},Q=ho(this.inertiaBuffer),Re;try{for(Q.s();!(Re=Q.n()).done;){var se=Re.value.settings;j.zoom+=se.zoomDelta||0,j.bearing+=se.bearingDelta||0,j.pitch+=se.pitchDelta||0,se.panDelta&&j.pan._add(se.panDelta),se.around&&(j.around=se.around),se.pinchAround&&(j.pinchAround=se.pinchAround)}}catch(ji){Q.e(ji)}finally{Q.f()}var At=this.inertiaBuffer[this.inertiaBuffer.length-1],Rt=At.time-this.inertiaBuffer[0].time,Ut={};if(j.pan.mag()){var Zn=Oe(j.pan.mag(),Rt,Ia()({},dt,O||{}));Ut.offset=j.pan.mult(Zn.amount/j.pan.mag()),Ut.center=this.map.transform.center,An(Ut,Zn)}if(j.zoom){var gr=Oe(j.zoom,Rt,Ke);Ut.zoom=this.map.transform.zoom+gr.amount,An(Ut,gr)}if(j.bearing){var ni=Oe(j.bearing,Rt,qt);Ut.bearing=this.map.transform.bearing+V(ni.amount,-179,179),An(Ut,ni)}if(j.pitch){var Vr=Oe(j.pitch,Rt,nn);Ut.pitch=this.map.transform.pitch+Vr.amount,An(Ut,Vr)}if(Ut.zoom||Ut.bearing){var wi=j.pinchAround===void 0?j.around:j.pinchAround;Ut.around=wi?this.map.unproject(wi):this.map.getCenter()}return this.clear(),Ia()(Ut,{noMoveStart:!0})}}}]),le}();function An(le,X){(!le.duration||le.duration<X.duration)&&(le.duration=X.duration,le.easing=X.easing)}function Oe(le,X,O){var j=O.maxSpeed,Q=O.linearity,Re=O.deceleration,se=V(le*Q/(X/1e3),-j,j),At=Math.abs(se)/(Re*Q);return{easing:O.easing,duration:At*1e3,amount:se*(At/2)}}var De={panStep:100,bearingStep:15,pitchStep:10},Be=function(){function le(){(0,E.Z)(this,le);var X=De;this.panStep=X.panStep,this.bearingStep=X.bearingStep,this.pitchStep=X.pitchStep}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(O){var j=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var Q=0,Re=0,se=0,At=0,Rt=0;switch(O.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:O.shiftKey?Re=-1:(O.preventDefault(),At=-1);break;case 39:O.shiftKey?Re=1:(O.preventDefault(),At=1);break;case 38:O.shiftKey?se=1:(O.preventDefault(),Rt=-1);break;case 40:O.shiftKey?se=-1:(O.preventDefault(),Rt=1);break;default:return}return{cameraAnimation:function(Zn){var gr=Zn.getZoom();Zn.easeTo({duration:300,easeId:"keyboardHandler",easing:Ye,zoom:Q?Math.round(gr)+Q*(O.shiftKey?2:1):gr,bearing:Zn.getBearing()+Re*j.bearingStep,pitch:Zn.getPitch()+se*j.pitchStep,offset:[-At*j.panStep,-Rt*j.panStep],center:Zn.getCenter()},{originalEvent:O})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),le}();function Ye(le){return le*(2-le)}var Nt=Be,jt=function(){function le(X,O){(0,E.Z)(this,le),this.map=X,this.clickTolerance=O.clickTolerance}return(0,p.Z)(le,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(O){return this.firePreventable(new Ja(O.type,this.map,O))}},{key:"mousedown",value:function(O,j){return this.mousedownPos=j,this.firePreventable(new ea(O.type,this.map,O))}},{key:"mouseup",value:function(O){this.map.emit(O.type,new ea(O.type,this.map,O))}},{key:"click",value:function(O,j){this.mousedownPos&&this.mousedownPos.dist(j)>=this.clickTolerance||this.map.emit(O.type,new ea(O.type,this.map,O))}},{key:"dblclick",value:function(O){return this.firePreventable(new ea(O.type,this.map,O))}},{key:"mouseover",value:function(O){this.map.emit(O.type,new ea(O.type,this.map,O))}},{key:"mouseout",value:function(O){this.map.emit(O.type,new ea(O.type,this.map,O))}},{key:"touchstart",value:function(O){return this.firePreventable(new Aa(O.type,this.map,O))}},{key:"touchmove",value:function(O){this.map.emit(O.type,new Aa(O.type,this.map,O))}},{key:"touchend",value:function(O){this.map.emit(O.type,new Aa(O.type,this.map,O))}},{key:"touchcancel",value:function(O){this.map.emit(O.type,new Aa(O.type,this.map,O))}},{key:"firePreventable",value:function(O){if(this.map.emit(O.type,O),O.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),le}(),un=y(73237),Hn,Rn=0,fr=2,or=(Hn={},(0,F.Z)(Hn,Rn,1),(0,F.Z)(Hn,fr,2),Hn);function $t(le,X){var O=or[X];return le.buttons===void 0||(le.buttons&O)!==O}var er=function(){function le(X){(0,E.Z)(this,le),this.reset(),this.clickTolerance=X.clickTolerance||1}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(O,j){if(!this.lastPoint){var Q=ar.mouseButton(O);this.correctButton(O,Q)&&(this.lastPoint=j,this.eventButton=Q)}}},{key:"mousemoveWindow",value:function(O,j){var Q=this.lastPoint;if(Q){if(O.preventDefault(),$t(O,this.eventButton)){this.reset();return}if(!(!this.moved&&j.dist(Q)<this.clickTolerance))return this.moved=!0,this.lastPoint=j,this.move(Q,j)}}},{key:"mouseupWindow",value:function(O){if(this.lastPoint){var j=ar.mouseButton(O);j===this.eventButton&&(this.moved&&ar.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(O,j){return!1}},{key:"move",value:function(O,j){}}]),le}();function Jn(le){var X=Bt();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Bt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var Ai=function(le){(0,M.Z)(O,le);var X=Jn(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"mousedown",value:function(Q,Re){(0,un.Z)((0,g.Z)(O.prototype),"mousedown",this).call(this,Q,Re),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(Q,Re){return{around:Re,panDelta:Re.sub(Q)}}},{key:"correctButton",value:function(Q,Re){return Re===Rn&&!Q.ctrlKey}}]),O}(er);function Le(le){var X=Xe();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Xe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var He=function(le){(0,M.Z)(O,le);var X=Le(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"correctButton",value:function(Q,Re){return Re===Rn&&Q.ctrlKey||Re===fr}},{key:"move",value:function(Q,Re){var se=-.5,At=(Re.y-Q.y)*se;if(At)return this.active=!0,{pitchDelta:At}}},{key:"contextmenu",value:function(Q){Q.preventDefault()}}]),O}(er);function Ot(le){var X=Vt();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Vt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var gn=function(le){(0,M.Z)(O,le);var X=Ot(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"contextmenu",value:function(Q){Q.preventDefault()}},{key:"correctButton",value:function(Q,Re){return Re===Rn&&Q.ctrlKey||Re===fr}},{key:"move",value:function(Q,Re){var se=.8,At=(Re.x-Q.x)*se;if(At)return this.active=!0,{bearingDelta:At}}}]),O}(er),vt=4.000244140625,zt=1/100,Kt=1/450,fn=2,zn=function(){function le(X,O){var j=this;(0,E.Z)(this,le),(0,F.Z)(this,"onScrollFrame",function(){if(j.frameId&&(j.frameId=null,!!j.isActive())){var Q=j.map.transform;if(j.delta!==0){var Re=j.type==="wheel"&&Math.abs(j.delta)>vt?j.wheelZoomRate:j.defaultZoomRate,se=fn/(1+Math.exp(-Math.abs(j.delta*Re)));j.delta<0&&se!==0&&(se=1/se);var At=typeof j.targetZoom=="number"?Q.zoomScale(j.targetZoom):Q.scale;j.targetZoom=Math.min(Q.maxZoom,Math.max(Q.minZoom,Q.scaleZoom(At*se))),j.type==="wheel"&&(j.startZoom=Q.zoom,j.easing=j.smoothOutEasing(200)),j.delta=0}var Rt=typeof j.targetZoom=="number"?j.targetZoom:Q.zoom,Ut=j.startZoom,Zn=j.easing,gr=!1,ni;if(j.type==="wheel"&&Ut&&Zn){var Vr=Math.min((nt()-j.lastWheelEventTime)/200,1),wi=Zn(Vr);ni=ae(Ut,Rt,wi),Vr<1?j.frameId||(j.frameId=!0):gr=!0}else ni=Rt,gr=!0;return j.active=!0,gr&&(j.active=!1,j.finishTimeout=setTimeout(function(){j.zooming=!1,j.handler.triggerRenderFrame(),delete j.targetZoom,delete j.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!gr,zoomDelta:ni-Q.zoom,around:j.aroundPoint,originalEvent:j.lastWheelEvent}}}),this.map=X,this.el=X.getCanvasContainer(),this.handler=O,this.delta=0,this.defaultZoomRate=zt,this.wheelZoomRate=Kt}return(0,p.Z)(le,[{key:"setZoomRate",value:function(O){this.defaultZoomRate=O}},{key:"setWheelZoomRate",value:function(O){this.wheelZoomRate=O}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(O){this.isEnabled()||(this.enabled=!0,this.aroundCenter=O&&O.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(O){if(this.isEnabled()){var j=O.deltaMode===window.WheelEvent.DOM_DELTA_LINE?O.deltaY*40:O.deltaY,Q=nt(),Re=Q-(this.lastWheelEventTime||0);this.lastWheelEventTime=Q,j!==0&&j%vt===0?this.type="wheel":j!==0&&Math.abs(j)<4?this.type="trackpad":Re>400?(this.type=null,this.lastValue=j,this.timeout=setTimeout(this.onTimeout,40,O)):this.type||(this.type=Math.abs(Re*j)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,j+=this.lastValue)),O.shiftKey&&j&&(j=j/4),this.type&&(this.lastWheelEvent=O,this.delta-=j,this.active||this.start(O)),O.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(O){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(O)}},{key:"start",value:function(O){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var j=ar.mousePos(this.el,O);this.around=Ln.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(j)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(O){var j=he;if(this.prevEase){var Q=this.prevEase,Re=(nt()-Q.start)/Q.duration,se=Q.easing(Re+.01)-Q.easing(Re),At=.27/Math.sqrt(se*se+1e-4)*.01,Rt=Math.sqrt(.27*.27-At*At);j=K(At,Rt,.25,1)}return this.prevEase={start:nt(),duration:O,easing:j},j}}]),le}(),wr=zn,Er=function(){function le(X,O){(0,E.Z)(this,le),this.clickZoom=X,this.tapZoom=O}return(0,p.Z)(le,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),le}(),_=function(){function le(X,O,j){(0,E.Z)(this,le),this.el=X,this.mousePan=O,this.touchPan=j}return(0,p.Z)(le,[{key:"enable",value:function(O){this.inertiaOptions=O||{},this.mousePan.enable(),this.touchPan.enable(),W.eW||this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),W.eW||this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),le}(),N=function(){function le(X,O,j){(0,E.Z)(this,le),this.pitchWithRotate=X.pitchWithRotate,this.mouseRotate=O,this.mousePitch=j}return(0,p.Z)(le,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),le}(),me=function(){function le(X,O,j,Q){(0,E.Z)(this,le),this.el=X,this.touchZoom=O,this.touchRotate=j,this.tapDragZoom=Q,this.rotationDisabled=!1,this.enabled=!0}return(0,p.Z)(le,[{key:"enable",value:function(O){this.touchZoom.enable(O),this.rotationDisabled||this.touchRotate.enable(O),this.tapDragZoom.enable(),W.eW||this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),W.eW||this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),le}();function q(le,X){for(var O={},j=0;j<le.length;j++)O[le[j].identifier]=X[j];return O}function Ue(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=ct(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function ct(le,X){if(le){if(typeof le=="string")return Lt(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Lt(le,X)}}function Lt(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}function hn(le){var X=new xt(0,0),O=Ue(le),j;try{for(O.s();!(j=O.n()).done;){var Q=j.value;X._add(Q)}}catch(Re){O.e(Re)}finally{O.f()}return X.div(le.length)}var on=500,nr=500,sr=30,ti=function(){function le(X){(0,E.Z)(this,le),this.reset(),this.numTouches=X.numTouches}return(0,p.Z)(le,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(O,j,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=O.timeStamp),Q.length===this.numTouches&&(this.centroid=hn(j),this.touches=q(Q,j)))}},{key:"touchmove",value:function(O,j,Q){if(!(this.aborted||!this.centroid)){var Re=q(Q,j);for(var se in this.touches)if(this.touches[se]){var At=this.touches[se],Rt=Re[se];(!Rt||Rt.dist(At)>sr)&&(this.aborted=!0)}}}},{key:"touchend",value:function(O,j,Q){if((!this.centroid||O.timeStamp-this.startTime>nr)&&(this.aborted=!0),Q.length===0){var Re=!this.aborted&&this.centroid;if(this.reset(),Re)return Re}}}]),le}(),Fi=function(){function le(X){(0,E.Z)(this,le),this.singleTap=new ti(X),this.numTaps=X.numTaps,this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(O,j,Q){this.singleTap.touchstart(O,j,Q)}},{key:"touchmove",value:function(O,j,Q){this.singleTap.touchmove(O,j,Q)}},{key:"touchend",value:function(O,j,Q){var Re=this.singleTap.touchend(O,j,Q);if(Re){var se=O.timeStamp-this.lastTime<on,At=!this.lastTap||this.lastTap.dist(Re)<sr;if((!se||!At)&&this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=Re,this.count===this.numTaps)return this.reset(),Re}}}]),le}(),Ci=function(){function le(){(0,E.Z)(this,le),this.tap=new Fi({numTouches:1,numTaps:1}),this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(O,j,Q){this.swipePoint||(this.tapTime&&O.timeStamp-this.tapTime>on&&this.reset(),this.tapTime?Q.length>0&&(this.swipePoint=j[0],this.swipeTouch=Q[0].identifier):this.tap.touchstart(O,j,Q))}},{key:"touchmove",value:function(O,j,Q){if(!this.tapTime)this.tap.touchmove(O,j,Q);else if(this.swipePoint){if(Q[0].identifier!==this.swipeTouch)return;var Re=j[0],se=Re.y-this.swipePoint.y;return this.swipePoint=Re,O.preventDefault(),this.active=!0,{zoomDelta:se/128}}}},{key:"touchend",value:function(O,j,Q){if(this.tapTime)this.swipePoint&&Q.length===0&&this.reset();else{var Re=this.tap.touchend(O,j,Q);Re&&(this.tapTime=O.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),le}(),ta=function(){function le(){(0,E.Z)(this,le),this.zoomIn=new Fi({numTouches:1,numTaps:2}),this.zoomOut=new Fi({numTouches:2,numTaps:1}),this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(O,j,Q){this.zoomIn.touchstart(O,j,Q),this.zoomOut.touchstart(O,j,Q)}},{key:"touchmove",value:function(O,j,Q){this.zoomIn.touchmove(O,j,Q),this.zoomOut.touchmove(O,j,Q)}},{key:"touchend",value:function(O,j,Q){var Re=this,se=this.zoomIn.touchend(O,j,Q),At=this.zoomOut.touchend(O,j,Q);if(se)return this.active=!0,O.preventDefault(),setTimeout(function(){return Re.reset()},0),{cameraAnimation:function(Ut){return Ut.easeTo({duration:300,zoom:Ut.getZoom()+1,around:Ut.unproject(se)},{originalEvent:O})}};if(At)return this.active=!0,O.preventDefault(),setTimeout(function(){return Re.reset()},0),{cameraAnimation:function(Ut){return Ut.easeTo({duration:300,zoom:Ut.getZoom()-1,around:Ut.unproject(At)},{originalEvent:O})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),le}(),Ni=function(){function le(X){(0,E.Z)(this,le),this.minTouches=1,this.clickTolerance=X.clickTolerance||1,this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new xt(0,0)}},{key:"touchstart",value:function(O,j,Q){return this.calculateTransform(O,j,Q)}},{key:"touchmove",value:function(O,j,Q){if(this.active)return O.preventDefault(),this.calculateTransform(O,j,Q)}},{key:"touchend",value:function(O,j,Q){this.calculateTransform(O,j,Q),this.active&&Q.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(O,j,Q){Q.length>0&&(this.active=!0);var Re=q(Q,j),se=new xt(0,0),At=new xt(0,0),Rt=0;for(var Ut in Re)if(Re[Ut]){var Zn=Re[Ut],gr=this.touches[Ut];gr&&(se._add(Zn),At._add(Zn.sub(gr)),Rt++,Re[Ut]=Zn)}if(this.touches=Re,!(Rt<this.minTouches||!At.mag())){var ni=At.div(Rt);if(this.sum._add(ni),!(this.sum.mag()<this.clickTolerance)){var Vr=se.div(Rt);return{around:Vr,panDelta:ni}}}}}]),le}(),Oi=function(){function le(){(0,E.Z)(this,le),this.reset()}return(0,p.Z)(le,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(O){}},{key:"move",value:function(O,j,Q){}},{key:"touchstart",value:function(O,j,Q){this.firstTwoTouches||Q.length<2||(this.firstTwoTouches=[Q[0].identifier,Q[1].identifier],this.start([j[0],j[1]]))}},{key:"touchmove",value:function(O,j,Q){if(this.firstTwoTouches){O.preventDefault();var Re=(0,at.Z)(this.firstTwoTouches,2),se=Re[0],At=Re[1],Rt=yo(Q,j,se),Ut=yo(Q,j,At);if(!(!Rt||!Ut)){var Zn=this.aroundCenter?null:Rt.add(Ut).div(2);return this.move([Rt,Ut],Zn,O)}}}},{key:"touchend",value:function(O,j,Q){if(this.firstTwoTouches){var Re=(0,at.Z)(this.firstTwoTouches,2),se=Re[0],At=Re[1],Rt=yo(Q,j,se),Ut=yo(Q,j,At);Rt&&Ut||(this.active&&ar.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(O){this.enabled=!0,this.aroundCenter=!!O&&O.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),le}();function yo(le,X,O){for(var j=0;j<le.length;j++)if(le[j].identifier===O)return X[j]}function ya(le){var X=Ba();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Ba(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}function xa(le){return Math.abs(le.y)>Math.abs(le.x)}var sa=100,jo=function(le){(0,M.Z)(O,le);var X=ya(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"reset",value:function(){(0,un.Z)((0,g.Z)(O.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(Q){this.lastPoints=Q,xa(Q[0].sub(Q[1]))&&(this.valid=!1)}},{key:"move",value:function(Q,Re,se){var At=Q[0].sub(this.lastPoints[0]),Rt=Q[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(At,Rt,se.timeStamp),!!this.valid){this.lastPoints=Q,this.active=!0;var Ut=(At.y+Rt.y)/2,Zn=-.5;return{pitchDelta:Ut*Zn}}}},{key:"gestureBeginsVertically",value:function(Q,Re,se){if(this.valid!==void 0)return this.valid;var At=2,Rt=Q.mag()>=At,Ut=Re.mag()>=At;if(!(!Rt&&!Ut)){if(!Rt||!Ut)return this.firstMove===void 0&&(this.firstMove=se),se-this.firstMove<sa?void 0:!1;var Zn=Q.y>0==Re.y>0;return xa(Q)&&xa(Re)&&Zn}}}]),O}(Oi);function vs(le){var X=$s();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function $s(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var Fs=25;function tu(le,X){return le.angleWith(X)*180/Math.PI}var lo=function(le){(0,M.Z)(O,le);var X=vs(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"reset",value:function(){(0,un.Z)((0,g.Z)(O.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(Q){this.startVector=this.vector=Q[0].sub(Q[1]),this.minDiameter=Q[0].dist(Q[1])}},{key:"move",value:function(Q,Re){var se=this.vector;if(this.vector=Q[0].sub(Q[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:tu(this.vector,se),pinchAround:Re}}},{key:"isBelowThreshold",value:function(Q){this.minDiameter=Math.min(this.minDiameter,Q.mag());var Re=Math.PI*this.minDiameter,se=Fs/Re*360,At=tu(Q,this.startVector);return Math.abs(At)<se}}]),O}(Oi);function du(le){var X=Dl();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var eo=.1;function _a(le,X){return Math.log(le/X)/Math.LN2}var Su=function(le){(0,M.Z)(O,le);var X=du(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"reset",value:function(){(0,un.Z)((0,g.Z)(O.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(Q){this.startDistance=this.distance=Q[0].dist(Q[1])}},{key:"move",value:function(Q,Re){var se=this.distance;if(this.distance=Q[0].dist(Q[1]),!(!this.active&&Math.abs(_a(this.distance,this.startDistance))<eo))return this.active=!0,{zoomDelta:_a(this.distance,se),pinchAround:Re}}}]),O}(Oi);function ko(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=Ks(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function Ks(le,X){if(le){if(typeof le=="string")return Zu(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Zu(le,X)}}function Zu(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var nu=function(X){return X.zoom||X.drag||X.pitch||X.rotate};function ru(le){return le.panDelta&&le.panDelta.mag()||le.zoomDelta||le.bearingDelta||le.pitchDelta}var yc=function(){function le(X,O){var j=this;(0,E.Z)(this,le),(0,F.Z)(this,"handleWindowEvent",function(gr){j.handleEvent(gr,"".concat(gr.type,"Window"))}),(0,F.Z)(this,"handleEvent",function(gr,ni){if(gr.type==="blur"){j.stop();return}j.updatingCamera=!0;var Vr=gr.type==="renderFrame"?void 0:gr,wi={needsRenderFrame:!1},ji={},da={},wa=gr.touches?j.getMapTouches(gr.touches):void 0,to=wa?ar.touchPos(j.el,wa):ar.mousePos(j.el,gr),va=ko(j.handlers),ba;try{for(va.s();!(ba=va.n()).done;){var ao=ba.value,Mo=ao.handlerName,so=ao.handler,ka=ao.allowed;if(so.isEnabled()){var zo=void 0;if(j.blockedByActive(da,ka,Mo))so.reset();else{var fi=ni||gr.type;so&&so[fi]&&(zo=so[fi](gr,to,wa),j.mergeIHandlerResult(wi,ji,zo,Mo,Vr),zo&&zo.needsRenderFrame&&j.triggerRenderFrame())}(zo||so.isActive())&&(da[Mo]=so)}}}catch(ss){va.e(ss)}finally{va.f()}var Go={};for(var mu in j.previousActiveHandlers)da[mu]||(Go[mu]=Vr);j.previousActiveHandlers=da,(Object.keys(Go).length||ru(wi))&&(j.changes.push([wi,ji,Go]),j.triggerRenderFrame()),(Object.keys(da).length||ru(wi))&&j.map.stop(!0),j.updatingCamera=!1;var bo=wi.cameraAnimation;bo&&(j.inertia.clear(),j.fireEvents({},{}),j.changes=[],bo(j.map))}),this.map=X,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new ln(X),this.bearingSnap=O.bearingSnap,this.rotateEnabled=O.rotateEnabled,this.pitchEnabled=O.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(O);var Q=this.el;if(this.listeners=[],W.eW)W.vO.document.addEventListener("touchstart",function(gr){j.handleEvent(gr)},{}),W.vO.document.addEventListener("touchmove",function(gr){j.handleEvent(gr)},{}),W.vO.document.addEventListener("touchend",function(gr){j.handleEvent(gr)},{}),W.vO.document.addEventListener("touchcancel",function(gr){j.handleEvent(gr)},{});else{this.listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[window,"blur",void 0]];var Re=ko(this.listeners),se;try{for(Re.s();!(se=Re.n()).done;){var At=(0,at.Z)(se.value,3),Rt=At[0],Ut=At[1],Zn=At[2];ar.addEventListener(Rt,Ut,Rt===window.document?this.handleWindowEvent:this.handleEvent,Zn)}}catch(gr){Re.e(gr)}finally{Re.f()}}}return(0,p.Z)(le,[{key:"destroy",value:function(){var O=ko(this.listeners),j;try{for(O.s();!(j=O.n()).done;){var Q=(0,at.Z)(j.value,3),Re=Q[0],se=Q[1],At=Q[2];ar.removeEventListener(Re,se,Re===window.document?this.handleWindowEvent:this.handleEvent,At)}}catch(Rt){O.e(Rt)}finally{O.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var O=ko(this.handlers),j;try{for(O.s();!(j=O.n()).done;){var Q=j.value.handler;Q.reset()}}catch(Re){O.e(Re)}finally{O.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var O=ko(this.handlers),j;try{for(O.s();!(j=O.n()).done;){var Q=j.value.handler;if(Q.isActive())return!0}}catch(Re){O.e(Re)}finally{O.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(nu(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(O,j,Q,Re,se){if(Q){(0,k.merge)(O,Q);var At={handlerName:Re,originalEvent:Q.originalEvent||se};Q.zoomDelta!==void 0&&(j.zoom=At),Q.panDelta!==void 0&&(j.drag=At),Q.pitchDelta!==void 0&&(j.pitch=At),Q.bearingDelta!==void 0&&(j.rotate=At)}}},{key:"triggerRenderFrame",value:function(){var O=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(j){delete O.frameId,O.handleEvent(new te("renderFrame",{timeStamp:j})),O.applyChanges()}))}},{key:"addDefaultHandlers",value:function(O){var j=this.map,Q=j.getCanvasContainer();this.add("mapEvent",new jt(j,O));var Re=j.boxZoom=new Wa(j,O);this.add("boxZoom",Re);var se=new ta,At=new mo;j.doubleClickZoom=new Er(At,se),this.add("tapZoom",se),this.add("clickZoom",At);var Rt=new Ci;this.add("tapDragZoom",Rt);var Ut=j.touchPitch=new jo;this.add("touchPitch",Ut);var Zn=new He(O),gr=new gn(O);j.dragRotate=new N(O,Zn,gr),this.add("mouseRotate",Zn,["mousePitch"]),this.add("mousePitch",gr,["mouseRotate"]);var ni=new Ai(O),Vr=new Ni(O);j.dragPan=new _(Q,ni,Vr),this.add("mousePan",ni),this.add("touchPan",Vr,["touchZoom","touchRotate"]);var wi=new lo,ji=new Su;j.touchZoomRotate=new me(Q,ji,wi,Rt),this.add("touchRotate",wi,["touchPan","touchZoom"]),this.add("touchZoom",ji,["touchPan","touchRotate"]);var da=j.scrollZoom=new wr(j,this);this.add("scrollZoom",da,["mousePan"]);var wa=j.keyboard=new Nt;this.add("keyboard",wa),this.add("blockableMapEvent",new $o(j));for(var to=0,va=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];to<va.length;to++){var ba=va[to];O.interactive&&O[ba]&&j[ba].enable(O[ba])}}},{key:"add",value:function(O,j,Q){this.handlers.push({handlerName:O,handler:j,allowed:Q}),this.handlersById[O]=j}},{key:"blockedByActive",value:function(O,j,Q){for(var Re in O)if(Re!==Q&&(!j||j.indexOf(Re)<0))return!0;return!1}},{key:"getMapTouches",value:function(O){var j=[],Q=ko(O),Re;try{for(Q.s();!(Re=Q.n()).done;){var se=Re.value,At=se.target;(W.eW||this.el.contains(At))&&j.push(se)}}catch(Rt){Q.e(Rt)}finally{Q.f()}return j}},{key:"applyChanges",value:function(){var O={},j={},Q={},Re=ko(this.changes),se;try{for(Re.s();!(se=Re.n()).done;){var At=(0,at.Z)(se.value,3),Rt=At[0],Ut=At[1],Zn=At[2];Rt.panDelta&&(O.panDelta=(O.panDelta||new xt(0,0))._add(Rt.panDelta)),Rt.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+Rt.zoomDelta),Rt.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+Rt.bearingDelta),Rt.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+Rt.pitchDelta),Rt.around!==void 0&&(O.around=Rt.around),Rt.pinchAround!==void 0&&(O.pinchAround=Rt.pinchAround),Rt.noInertia&&(O.noInertia=Rt.noInertia),(0,k.merge)(j,Ut),(0,k.merge)(Q,Zn)}}catch(gr){Re.e(gr)}finally{Re.f()}this.updateMapTransform(O,j,Q),this.changes=[]}},{key:"updateMapTransform",value:function(O,j,Q){var Re=this.map,se=Re.transform;if(!ru(O))return this.fireEvents(j,Q);var At=O.panDelta,Rt=O.zoomDelta,Ut=O.bearingDelta,Zn=O.pitchDelta,gr=O.pinchAround,ni=O.around;gr!==void 0&&(ni=gr),Re.stop(!0),ni=ni||Re.transform.centerPoint;var Vr=se.pointLocation(At?ni.sub(At):ni);Ut&&this.rotateEnabled&&(se.bearing+=Ut),Zn&&this.pitchEnabled&&(se.pitch+=Zn),Rt&&(se.zoom+=Rt),se.setLocationAtPoint(Vr,ni),this.map.update(),O.noInertia||this.inertia.record(O),this.fireEvents(j,Q)}},{key:"fireEvents",value:function(O,j){var Q=this,Re=nu(this.eventsInProgress),se=nu(O),At={};for(var Rt in O)if(O[Rt]){var Ut=O[Rt].originalEvent;this.eventsInProgress[Rt]||(At["".concat(Rt,"start")]=Ut),this.eventsInProgress[Rt]=O[Rt]}!Re&&se&&this.fireEvent("movestart",se.originalEvent);for(var Zn in At)At[Zn]&&this.fireEvent(Zn,At[Zn]);O.rotate&&(this.bearingChanged=!0),se&&this.fireEvent("move",se.originalEvent);for(var gr in O)if(O[gr]){var ni=O[gr].originalEvent;this.fireEvent(gr,ni)}var Vr={},wi;for(var ji in this.eventsInProgress)if(this.eventsInProgress[ji]){var da=this.eventsInProgress[ji],wa=da.handlerName,to=da.originalEvent;this.handlersById[wa].isActive()||(delete this.eventsInProgress[ji],wi=j[wa]||to,Vr["".concat(ji,"end")]=wi)}for(var va in Vr)Vr[va]&&this.fireEvent(va,Vr[va]);var ba=nu(this.eventsInProgress);if((Re||se)&&!ba){this.updatingCamera=!0;var ao=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Mo=function(ka){return ka!==0&&-Q.bearingSnap<ka&&ka<Q.bearingSnap};ao?(Mo(ao.bearing||this.map.getBearing())&&(ao.bearing=0),this.map.easeTo(ao,{originalEvent:wi})):(this.map.emit("moveend",new si("moveend",{originalEvent:wi})),Mo(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(O,j){this.map.emit(O,new si(O,j?{originalEvent:j}:{}))}}]),le}(),tl=yc,Tu=null,pl=[],Nl=30,gs=1e3/Nl,Au=W.vO.performance,js={create:"create",load:"load",fullLoad:"fullLoad"},nl={mark:function(X){Au.mark(X)},frame:function(X){var O=X;if(Tu!=null){var j=O-Tu;pl.push(j)}Tu=O},clearMetrics:function(){Tu=null,pl=[],Au.clearMeasures("loadTime"),Au.clearMeasures("fullLoadTime");for(var X in js)Au.clearMarks(js[X])},getPerformanceMetrics:function(){var X=Au.measure("loadTime",js.create,js.load).duration,O=Au.measure("fullLoadTime",js.create,js.fullLoad).duration,j=pl.length,Q=pl.reduce(function(Rt,Ut){return Rt+Ut},0)/j/1e3,Re=1/Q,se=pl.filter(function(Rt){return Rt>gs}).reduce(function(Rt,Ut){return Rt+(Ut-gs)/gs},0),At=se/(j+se)*100;return{loadTime:X,fullLoadTime:O,fps:Re,percentDroppedFrames:At}}};function qs(le,X){var O=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!O){if(Array.isArray(le)||(O=rc(le))||X&&le&&typeof le.length=="number"){O&&(le=O);var j=0,Q=function(){};return{s:Q,n:function(){return j>=le.length?{done:!0}:{done:!1,value:le[j++]}},e:function(Ut){throw Ut},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=!0,se=!1,At;return{s:function(){O=O.call(le)},n:function(){var Ut=O.next();return Re=Ut.done,Ut},e:function(Ut){se=!0,At=Ut},f:function(){try{!Re&&O.return!=null&&O.return()}finally{if(se)throw At}}}}function rc(le,X){if(le){if(typeof le=="string")return ws(le,X);var O=Object.prototype.toString.call(le).slice(8,-1);if(O==="Object"&&le.constructor&&(O=le.constructor.name),O==="Map"||O==="Set")return Array.from(le);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return ws(le,X)}}function ws(le,X){(X==null||X>le.length)&&(X=le.length);for(var O=0,j=new Array(X);O<X;O++)j[O]=le[O];return j}var _c=function(){function le(){(0,E.Z)(this,le),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,p.Z)(le,[{key:"add",value:function(O){var j=++this.id,Q=this.queue;return Q.push({callback:O,id:j,cancelled:!1}),j}},{key:"remove",value:function(O){var j=this.currentlyRunning,Q=j?this.queue.concat(j):this.queue,Re=qs(Q),se;try{for(Re.s();!(se=Re.n()).done;){var At=se.value;if(At.id===O){At.cancelled=!0;return}}}catch(Rt){Re.e(Rt)}finally{Re.f()}}},{key:"run",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=this.currentlyRunning=this.queue;this.queue=[];var Q=qs(j),Re;try{for(Q.s();!(Re=Q.n()).done;){var se=Re.value;if(!se.cancelled&&(se.callback(O),this.cleared))break}}catch(At){Q.e(At)}finally{Q.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),le}(),bc=_c;function Kc(le){var X=iu();return function(){var j=_getPrototypeOf(le),Q;if(X){var Re=_getPrototypeOf(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return _possibleConstructorReturn(this,Q)}}function iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}function Nc(le,X){var O=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,j=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(O||j)&&(X||(X=document),!!X)){var Q=X.head||X.getElementsByTagName("head")[0];if(!Q){Q=X.createElement("head");var Re=X.body||X.getElementsByTagName("body")[0];Re?Re.parentNode.insertBefore(Q,Re):X.documentElement.appendChild(Q)}var se=X.createElement("style");return se.type="text/css",se.styleSheet?se.styleSheet.cssText=le:se.appendChild(X.createTextNode(le)),Q.appendChild(se),se}}Nc(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var xc=-2,Bl=22,au=0,Cu=60,ms={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:xc,maxZoom:Bl,minPitch:au,maxPitch:Cu,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},Zl=null,Bc=function(){function le(X){var O=this;(0,E.Z)(this,le),(0,F.Z)(this,"onHashChange",function(){var j=O.getCurrentHash();if(j.length>=3&&!j.some(function(Re){return isNaN(+Re)})){var Q=O.map.dragRotate.isEnabled()&&O.map.touchZoomRotate.isEnabled()?+(j[3]||0):O.map.getBearing();return O.map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:Q,pitch:+(j[4]||0)}),!0}return!1}),(0,F.Z)(this,"getCurrentHash",function(){var j=window.location.hash.replace("#","");if(O.hashName){var Q;return j.split("&").map(function(Re){return Re.split("=")}).forEach(function(Re){Re[0]===O.hashName&&(Q=Re)}),(Q&&Q[1]||"").split("/")}return j.split("/")}),(0,F.Z)(this,"updateHashUnthrottled",function(){var j=O.getHashString();try{window.history.replaceState(window.history.state,"",j)}catch(Q){}}),this.hashName=X&&encodeURIComponent(X),this.updateHash=(0,k.throttle)(this.updateHashUnthrottled,30*1e3/100)}return(0,p.Z)(le,[{key:"addTo",value:function(O){return this.map=O,W.vO.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return W.vO.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(O){var j=this.map.getCenter(),Q=Math.round(this.map.getZoom()*100)/100,Re=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),se=Math.pow(10,Re),At=Math.round(j.lng*se)/se,Rt=Math.round(j.lat*se)/se,Ut=this.map.getBearing(),Zn=this.map.getPitch(),gr="";if(O?gr+="/".concat(At,"/").concat(Rt,"/").concat(Q):gr+="".concat(Q,"/").concat(Rt,"/").concat(At),(Ut||Zn)&&(gr+="/".concat(Math.round(Ut*10)/10)),Zn&&(gr+="/".concat(Math.round(Zn))),this.hashName){var ni=this.hashName,Vr=!1,wi=window.location.hash.slice(1).split("&").map(function(ji){var da=ji.split("=")[0];return da===ni?(Vr=!0,"".concat(da,"=").concat(gr)):ji}).filter(function(ji){return ji});return Vr||wi.push("".concat(ni,"=").concat(gr)),"#".concat(wi.join("&"))}return"#".concat(gr)}}]),le}(),Vs=Bc;function wu(le){var X=ys();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function ys(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}function vl(le,X){var O=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,j=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(O||j)&&(X||(X=document),!!X)){var Q=X.head||X.getElementsByTagName("head")[0];if(!Q){Q=X.createElement("head");var Re=X.body||X.getElementsByTagName("body")[0];Re?Re.parentNode.insertBefore(Q,Re):X.documentElement.appendChild(Q)}var se=X.createElement("style");return se.type="text/css",se.styleSheet?se.styleSheet.cssText=le:se.appendChild(X.createTextNode(le)),Q.appendChild(se),se}}vl(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Ec=-2,Sc=22,Ul=0,gl=60,qc={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Ec,maxZoom:Sc,minPitch:Ul,maxPitch:gl,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},ic=function(le){(0,M.Z)(O,le);var X=wu(O);function O(j){var Q;if((0,E.Z)(this,O),Q=X.call(this,(0,k.merge)({},qc,j)),(0,F.Z)((0,D.Z)(Q),"renderTaskQueue",new bc),(0,F.Z)((0,D.Z)(Q),"trackResize",!0),(0,F.Z)((0,D.Z)(Q),"onWindowOnline",function(){Q.update()}),(0,F.Z)((0,D.Z)(Q),"onWindowResize",function(se){Q.trackResize&&Q.resize({originalEvent:se}).update()}),W.eW?Q.initMiniContainer():Q.initContainer(),Q.resize(),Q.handlers=new tl((0,D.Z)(Q),Q.options),typeof window!="undefined"&&(window.addEventListener("online",Q.onWindowOnline,!1),window.addEventListener("resize",Q.onWindowResize,!1),window.addEventListener("orientationchange",Q.onWindowResize,!1)),!W.eW){var Re=typeof j.hash=="string"&&j.hash||void 0;j.hash&&(Q.hash=new Vs(Re).addTo((0,D.Z)(Q)))}return(!Q.hash||!Q.hash.onHashChange())&&(Q.jumpTo({center:j.center,zoom:j.zoom,bearing:j.bearing,pitch:j.pitch}),j.bounds&&(Q.resize(),Q.fitBounds(j.bounds,(0,k.merge)({},j.fitBoundsOptions,{duration:0})))),Q}return(0,p.Z)(O,[{key:"resize",value:function(Q){var Re=this.containerDimensions(),se=(0,at.Z)(Re,2),At=se[0],Rt=se[1];if(this.transform.resize(At,Rt),W.eW)return this;var Ut=!this.moving;return Ut&&(this.stop(),this.emit("movestart",new W.vO.Event("movestart",Q)),this.emit("move",new W.vO.Event("move",Q))),this.emit("resize",new W.vO.Event("resize",Q)),Ut&&this.emit("moveend",new W.vO.Event("moveend",Q)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(Q){return this.transform.locationPoint(Ln.convert(Q))}},{key:"unproject",value:function(Q){return this.transform.pointLocation(xt.convert(Q))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(Q){this.transform.setMaxBounds(st.convert(Q))}},{key:"setStyle",value:function(Q){}},{key:"setMinZoom",value:function(Q){if(Q=Q==null?Ec:Q,Q>=Ec&&Q<=this.transform.maxZoom)return this.transform.minZoom=Q,this.getZoom()<Q&&this.setZoom(Q),this;throw new Error("minZoom must be between ".concat(Ec," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(Q){if(Q=Q==null?Sc:Q,Q>=this.transform.minZoom)return this.transform.maxZoom=Q,this.getZoom()>Q&&this.setZoom(Q),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(Q){if(Q=Q==null?Ul:Q,Q<Ul)throw new Error("minPitch must be greater than or equal to ".concat(Ul));if(Q>=Ul&&Q<=this.transform.maxPitch)return this.transform.minPitch=Q,this.getPitch()<Q&&this.setPitch(Q),this;throw new Error("minPitch must be between ".concat(Ul," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(Q){if(Q=Q==null?gl:Q,Q>gl)throw new Error("maxPitch must be less than or equal to ".concat(gl));if(Q>=this.transform.minPitch)return this.transform.maxPitch=Q,this.getPitch()>Q&&this.setPitch(Q),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(Q){this.transform.renderWorldCopies=!!Q}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(Q){return this.update(),this.renderTaskQueue.add(Q)}},{key:"cancelRenderFrame",value:function(Q){return this.renderTaskQueue.remove(Q)}},{key:"triggerRepaint",value:function(){var Q=this;this.frame||(this.frame=pn(function(Re){nl.frame(Re),Q.frame=null,Q.update(Re)}))}},{key:"update",value:function(Q){var Re=this;this.frame||(this.frame=pn(function(se){nl.frame(se),Re.frame=null,Re.renderTaskQueue.run(Q)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var Q=this.container;Q.classList.add("l7-map");var Re=this.canvasContainer=W.SO.create("div","l7-canvas-container",Q);this.options.interactive&&Re.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var Q=0,Re=0;return this.container&&(W.eW?(Q=this.container.width/W.vO.devicePixelRatio,Re=this.container.height/W.vO.devicePixelRatio):(Q=this.container.clientWidth,Re=this.container.clientHeight,Q=Q===0?400:Q,Re=Re===0?300:Re)),[Q,Re]}}]),O}(pe),In=y(77160),pr=y(86700),rr=y(28660),gi=y(84859),Ca=function(){function le(X){(0,E.Z)(this,le),(0,F.Z)(this,"size",1e4),this.size=X||1e4}return(0,p.Z)(le,[{key:"setSize",value:function(O){this.size=O}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(O){return(180+O)/360*this.size}},{key:"mercatorYfromLat",value:function(O){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+O*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(O){return O/this.size*360-180}},{key:"latFromMercatorY",value:function(O){var j=180-(1-O/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(j*Math.PI/180))-90}},{key:"project",value:function(O){var j=this.mercatorXfromLng(O[0]),Q=this.mercatorYfromLat(O[1]);return[j,Q]}},{key:"unproject",value:function(O){var j=this.lngFromMercatorX(O[0]),Q=this.latFromMercatorY(O[1]);return[j,Q]}}]),le}(),io={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Vo,_o,zl,Tc,Ds,Uu,rl,Mu,ml,il,po,yl={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Zc=12,zu=(Vo=(0,pr.b2)(),_o=(0,pr.f3)(t.vK.MapConfig),zl=(0,pr.f3)(t.vK.IGlobalConfigService),Tc=(0,pr.f3)(t.vK.ICoordinateSystemService),Ds=(0,pr.f3)(t.vK.IEventEmitter),Vo(Uu=(rl=function(){function le(){var X=this;(0,E.Z)(this,le),(0,F.Z)(this,"version",gi.G.DEFUALT),(0,F.Z)(this,"simpleMapCoord",new Ca),(0,F.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,v.Z)(this,"config",Mu,this),(0,v.Z)(this,"configService",ml,this),(0,v.Z)(this,"coordinateSystemService",il,this),(0,v.Z)(this,"eventEmitter",po,this),(0,F.Z)(this,"handleCameraChanged",function(O){var j=X.map.getCenter(),Q=j.lat,Re=j.lng;X.emit("mapchange"),X.viewport.syncWithMapCamera({bearing:X.map.getBearing(),center:[Re,Q],viewportHeight:X.map.transform.height,pitch:X.map.getPitch(),viewportWidth:X.map.transform.width,zoom:X.map.getZoom(),cameraHeight:0}),X.updateCoordinateSystemService(),X.cameraChangedCallback(X.viewport)})}return(0,p.Z)(le,[{key:"setBgColor",value:function(O){this.bgColor=O}},{key:"addMarkerContainer",value:function(){var O=this.map.getCanvasContainer();this.markerContainer=W.SO.create("div","l7-marker-container",O),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(O,j){t.I9.indexOf(O)!==-1?this.eventEmitter.on(O,j):this.map.on(yl[O]||O,j)}},{key:"off",value:function(O,j){this.map.off(yl[O]||O,j),this.eventEmitter.off(O,j)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===gi.G.SIMPLE)return this.simpleMapCoord.getSize();var O=this.map.transform;return[O.width,O.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(O){return this.map.setZoom(O)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(O){this.map.setCenter(O)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(O){this.map.setBearing(O)}},{key:"zoomIn",value:function(O,j){this.map.zoomIn(O,j)}},{key:"zoomOut",value:function(O,j){this.map.zoomOut(O,j)}},{key:"setPitch",value:function(O){return this.map.setPitch(O)}},{key:"panTo",value:function(O){this.map.panTo(O)}},{key:"panBy",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.panTo([O,j])}},{key:"fitBounds",value:function(O,j){this.map.fitBounds(O,j)}},{key:"setMaxZoom",value:function(O){this.map.setMaxZoom(O)}},{key:"setMinZoom",value:function(O){this.map.setMinZoom(O)}},{key:"setMapStatus",value:function(O){O.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),O.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),O.dragEnable===!1&&this.map.dragPan.disable(),O.dragEnable===!0&&this.map.dragPan.enable(),O.rotateEnable===!1&&this.map.dragRotate.disable(),O.dragEnable===!0&&this.map.dragRotate.enable(),O.keyboardEnable===!1&&this.map.keyboard.disable(),O.keyboardEnable===!0&&this.map.keyboard.enable(),O.zoomEnable===!1&&this.map.scrollZoom.disable(),O.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(O,j){this.map.flyTo({zoom:O,center:j})}},{key:"setMapStyle",value:function(O){this.map.setStyle(this.getMapStyleValue(O))}},{key:"meterToCoord",value:function(O,j){return 1}},{key:"pixelToLngLat",value:function(O){return this.map.unproject(O)}},{key:"lngLatToPixel",value:function(O){return this.map.project(O)}},{key:"containerToLngLat",value:function(O){return this.map.unproject(O)}},{key:"lngLatToContainer",value:function(O){return this.map.project(O)}},{key:"getMapStyle",value:function(){try{var O,j=(O=this.map.getStyle().sprite)!==null&&O!==void 0?O:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(j)?j==null?void 0:j.replace(/\/\w+$/,"").replace(/sprites/,"styles"):j}catch(Q){return""}}},{key:"getMapStyleConfig",value:function(){return io}},{key:"getMapStyleValue",value:function(O){var j;return(j=this.getMapStyleConfig()[O])!==null&&j!==void 0?j:O}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(O){for(var j,Q=arguments.length,Re=new Array(Q>1?Q-1:0),se=1;se<Q;se++)Re[se-1]=arguments[se];(j=this.eventEmitter).emit.apply(j,[O].concat(Re))}},{key:"once",value:function(O){for(var j,Q=arguments.length,Re=new Array(Q>1?Q-1:0),se=1;se<Q;se++)Re[se-1]=arguments[se];(j=this.eventEmitter).once.apply(j,[O].concat(Re))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(O){var j=this.map.getCanvas(),Q=O==="jpg"?j==null?void 0:j.toDataURL("image/jpeg"):j==null?void 0:j.toDataURL("image/png");return Q}},{key:"onCameraChanged",value:function(O){this.cameraChangedCallback=O}},{key:"creatMapContainer",value:function(O){var j=O;return typeof O=="string"&&(j=document.getElementById(O)),j}},{key:"updateView",value:function(O){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:O.bearing,center:O.center,viewportHeight:O.viewportHeight,pitch:O.pitch,viewportWidth:O.viewportWidth,zoom:O.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var O=this.config.offsetCoordinate,j=O===void 0?!0:O;this.viewport.getZoom()>Zc&&j?this.coordinateSystemService.setCoordinateSystem(t.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(t.lo.LNGLAT)}}]),le}(),Mu=(0,u.Z)(rl.prototype,"config",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=(0,u.Z)(rl.prototype,"configService",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=(0,u.Z)(rl.prototype,"coordinateSystemService",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=(0,u.Z)(rl.prototype,"eventEmitter",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rl))||Uu);function _s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function pu(le,X){var O=jn.fF([],X,le);return jn.bA(O,O,1/O[3]),O}function al(le,X){var O=le%X;return O<0?X+O:O}function vu(le,X,O){return O*X+(1-O)*le}var os=y(31437);function Gs(le,X){if(!le)throw new Error(X||"viewport-mercator-project: assertion failed.")}var Lo=Math.PI,gu=Lo/4,Ms=Lo/180,ou=180/Lo,No=512,qo=4003e4,ol=1.5;function bs(le){return Math.pow(2,le)}function $l(le){return Math.log2(le)}function jl(le,X){var O=(0,at.Z)(le,2),j=O[0],Q=O[1];Gs(Number.isFinite(j)&&Number.isFinite(X)),Gs(Number.isFinite(Q)&&Q>=-90&&Q<=90,"invalid latitude"),X*=No;var Re=j*Ms,se=Q*Ms,At=X*(Re+Lo)/(2*Lo),Rt=X*(Lo-Math.log(Math.tan(gu+se*.5)))/(2*Lo);return[At,Rt]}function Uc(le,X){var O=(0,at.Z)(le,2),j=O[0],Q=O[1];X*=No;var Re=j/X*(2*Lo)-Lo,se=2*(Math.atan(Math.exp(Lo-Q/X*(2*Lo)))-gu);return[Re*ou,se*ou]}function ff(le){var X=le.latitude;assert(Number.isFinite(X));var O=Math.cos(X*Ms);return $l(qo*O)-9}function Vl(le){var X=le.latitude,O=le.longitude,j=le.zoom,Q=le.scale,Re=le.highPrecision,se=Re===void 0?!1:Re;Q=Q!==void 0?Q:bs(j),Gs(Number.isFinite(X)&&Number.isFinite(O)&&Number.isFinite(Q));var At={},Rt=No*Q,Ut=Math.cos(X*Ms),Zn=Rt/360,gr=Zn/Ut,ni=Rt/qo/Ut;if(At.pixelsPerMeter=[ni,-ni,ni],At.metersPerPixel=[1/ni,-1/ni,1/ni],At.pixelsPerDegree=[Zn,-gr,ni],At.degreesPerPixel=[1/Zn,-1/gr,1/ni],se){var Vr=Ms*Math.tan(X*Ms)/Ut,wi=Zn*Vr/2,ji=Rt/qo*Vr,da=ji/gr*ni;At.pixelsPerDegree2=[0,-wi,ji],At.pixelsPerMeter2=[da,0,da]}return At}function _l(le,X){var O=_slicedToArray(le,3),j=O[0],Q=O[1],Re=O[2],se=_slicedToArray(X,3),At=se[0],Rt=se[1],Ut=se[2],Zn=1,gr=Vl({longitude:j,latitude:Q,scale:Zn,highPrecision:!0}),ni=gr.pixelsPerMeter,Vr=gr.pixelsPerMeter2,wi=jl(le,Zn);wi[0]+=At*(ni[0]+Vr[0]*Rt),wi[1]+=Rt*(ni[1]+Vr[1]*Rt);var ji=Uc(wi,Zn),da=(Re||0)+(Ut||0);return Number.isFinite(Re)||Number.isFinite(Ut)?[ji[0],ji[1],da]:ji}function bl(le){var X=le.height,O=le.pitch,j=le.bearing,Q=le.altitude,Re=le.center,se=Re===void 0?null:Re,At=le.flipY,Rt=At===void 0?!1:At,Ut=_s();return mn.translate(Ut,Ut,[0,0,-Q]),mn.scale(Ut,Ut,[1,1,1/X]),mn.rotateX(Ut,Ut,-O*Ms),mn.rotateZ(Ut,Ut,j*Ms),Rt&&mn.scale(Ut,Ut,[1,-1,1]),se&&mn.translate(Ut,Ut,In.negate([],se)),Ut}function zc(le){var X=le.width,O=le.height,j=le.altitude,Q=j===void 0?ol:j,Re=le.pitch,se=Re===void 0?0:Re,At=le.nearZMultiplier,Rt=At===void 0?1:At,Ut=le.farZMultiplier,Zn=Ut===void 0?1:Ut,gr=se*Ms,ni=Math.atan(.5/Q),Vr=Math.sin(ni)*Q/Math.sin(Math.PI/2-gr-ni),wi=Math.cos(Math.PI/2-gr)*Vr+Q;return{fov:2*Math.atan(O/2/Q),aspect:X/O,focalDistance:Q,near:Rt,far:wi*Zn}}function ac(le){var X=le.width,O=le.height,j=le.pitch,Q=le.altitude,Re=le.nearZMultiplier,se=le.farZMultiplier,At=zc({width:X,height:O,altitude:Q,pitch:j,nearZMultiplier:Re,farZMultiplier:se}),Rt=At.fov,Ut=At.aspect,Zn=At.near,gr=At.far,ni=mn.perspective([],Rt,Ut,Zn,gr);return ni}function Ac(le,X){var O=(0,at.Z)(le,3),j=O[0],Q=O[1],Re=O[2],se=Re===void 0?0:Re;return Gs(Number.isFinite(j)&&Number.isFinite(Q)&&Number.isFinite(se)),pu(X,[j,Q,se,1])}function Cc(le,X){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,j=(0,at.Z)(le,3),Q=j[0],Re=j[1],se=j[2];if(Gs(Number.isFinite(Q)&&Number.isFinite(Re),"invalid pixel coordinate"),Number.isFinite(se)){var At=pu(X,[Q,Re,se,1]);return At}var Rt=pu(X,[Q,Re,0,1]),Ut=pu(X,[Q,Re,1,1]),Zn=Rt[2],gr=Ut[2],ni=Zn===gr?0:((O||0)-Zn)/(gr-Zn);return os.t7([],Rt,Ut,ni)}var Bo=_s(),Qo=function(){function le(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=X.width,j=X.height,Q=X.viewMatrix,Re=Q===void 0?Bo:Q,se=X.projectionMatrix,At=se===void 0?Bo:se;(0,E.Z)(this,le),this.width=O||1,this.height=j||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Re,this.projectionMatrix=At;var Rt=_s();mn.multiply(Rt,Rt,this.projectionMatrix),mn.multiply(Rt,Rt,this.viewMatrix),this.viewProjectionMatrix=Rt;var Ut=_s();mn.scale(Ut,Ut,[this.width/2,-this.height/2,1]),mn.translate(Ut,Ut,[1,-1,0]),mn.multiply(Ut,Ut,this.viewProjectionMatrix);var Zn=mn.invert(_s(),Ut);if(!Zn)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Ut,this.pixelUnprojectionMatrix=Zn,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,p.Z)(le,[{key:"equals",value:function(O){return O instanceof le?O.width===this.width&&O.height===this.height&&mn.equals(O.projectionMatrix,this.projectionMatrix)&&mn.equals(O.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(O){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=j.topLeft,Re=Q===void 0?!0:Q,se=this.projectPosition(O),At=Ac(se,this.pixelProjectionMatrix),Rt=(0,at.Z)(At,2),Ut=Rt[0],Zn=Rt[1],gr=Re?Zn:this.height-Zn;return O.length===2?[Ut,gr]:[Ut,gr,At[2]]}},{key:"unproject",value:function(O){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=j.topLeft,Re=Q===void 0?!0:Q,se=j.targetZ,At=(0,at.Z)(O,3),Rt=At[0],Ut=At[1],Zn=At[2],gr=Re?Ut:this.height-Ut,ni=se&&se*this.pixelsPerMeter,Vr=Cc([Rt,gr,Zn],this.pixelUnprojectionMatrix,ni),wi=this.unprojectPosition(Vr),ji=(0,at.Z)(wi,3),da=ji[0],wa=ji[1],to=ji[2];return Number.isFinite(Zn)?[da,wa,to]:Number.isFinite(se)?[da,wa,se]:[da,wa]}},{key:"projectPosition",value:function(O){var j=this.projectFlat(O),Q=(0,at.Z)(j,2),Re=Q[0],se=Q[1],At=(O[2]||0)*this.pixelsPerMeter;return[Re,se,At]}},{key:"unprojectPosition",value:function(O){var j=this.unprojectFlat(O),Q=(0,at.Z)(j,2),Re=Q[0],se=Q[1],At=(O[2]||0)/this.pixelsPerMeter;return[Re,se,At]}},{key:"projectFlat",value:function(O){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return O}},{key:"unprojectFlat",value:function(O){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return O}}]),le}();function oc(le){var X=le.width,O=le.height,j=le.bounds,Q=le.minExtent,Re=Q===void 0?0:Q,se=le.maxZoom,At=se===void 0?24:se,Rt=le.padding,Ut=Rt===void 0?0:Rt,Zn=le.offset,gr=Zn===void 0?[0,0]:Zn,ni=(0,at.Z)(j,2),Vr=(0,at.Z)(ni[0],2),wi=Vr[0],ji=Vr[1],da=(0,at.Z)(ni[1],2),wa=da[0],to=da[1];if(Number.isFinite(Ut)){var va=Ut;Ut={top:va,bottom:va,left:va,right:va}}else Gs(Number.isFinite(Ut.top)&&Number.isFinite(Ut.bottom)&&Number.isFinite(Ut.left)&&Number.isFinite(Ut.right));var ba=new xl({width:X,height:O,longitude:0,latitude:0,zoom:0}),ao=ba.project([wi,to]),Mo=ba.project([wa,ji]),so=[Math.max(Math.abs(Mo[0]-ao[0]),Re),Math.max(Math.abs(Mo[1]-ao[1]),Re)],ka=[X-Ut.left-Ut.right-Math.abs(gr[0])*2,O-Ut.top-Ut.bottom-Math.abs(gr[1])*2];Gs(ka[0]>0&&ka[1]>0);var zo=ka[0]/so[0],fi=ka[1]/so[1],Go=(Ut.right-Ut.left)/2/zo,mu=(Ut.bottom-Ut.top)/2/fi,bo=[(Mo[0]+ao[0])/2+Go,(Mo[1]+ao[1])/2+mu],ss=ba.unproject(bo),Pu=ba.zoom+Math.log2(Math.abs(Math.min(zo,fi)));return{longitude:ss[0],latitude:ss[1],zoom:Math.min(Pu,At)}}var xl=function(le){(0,M.Z)(X,le);function X(){var O,j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=j.width,Re=j.height,se=j.latitude,At=se===void 0?0:se,Rt=j.longitude,Ut=Rt===void 0?0:Rt,Zn=j.zoom,gr=Zn===void 0?0:Zn,ni=j.pitch,Vr=ni===void 0?0:ni,wi=j.bearing,ji=wi===void 0?0:wi,da=j.altitude,wa=da===void 0?1.5:da,to=j.nearZMultiplier,va=j.farZMultiplier;(0,E.Z)(this,X),Q=Q||1,Re=Re||1;var ba=bs(gr);wa=Math.max(.75,wa);var ao=jl([Ut,At],ba);ao[2]=0;var Mo=ac({width:Q,height:Re,pitch:Vr,bearing:ji,altitude:wa,nearZMultiplier:to||1/Re,farZMultiplier:va||1.01}),so=bl({height:Re,center:ao,pitch:Vr,bearing:ji,altitude:wa,flipY:!0});return O=(0,d.Z)(this,(0,g.Z)(X).call(this,{width:Q,height:Re,viewMatrix:so,projectionMatrix:Mo})),O.latitude=At,O.longitude=Ut,O.zoom=gr,O.pitch=Vr,O.bearing=ji,O.altitude=wa,O.scale=ba,O.center=ao,O.pixelsPerMeter=Vl((0,D.Z)((0,D.Z)(O))).pixelsPerMeter[2],Object.freeze((0,D.Z)((0,D.Z)(O))),O}return(0,p.Z)(X,[{key:"projectFlat",value:function(j){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return jl(j,Q)}},{key:"unprojectFlat",value:function(j){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Uc(j,Q)}},{key:"getMapCenterByLngLatPosition",value:function(j){var Q=j.lngLat,Re=j.pos,se=Cc(Re,this.pixelUnprojectionMatrix),At=jl(Q,this.scale),Rt=os.IH([],At,os.tk([],se)),Ut=os.IH([],this.center,Rt);return Uc(Ut,this.scale)}},{key:"getLocationAtPoint",value:function(j){var Q=j.lngLat,Re=j.pos;return this.getMapCenterByLngLatPosition({lngLat:Q,pos:Re})}},{key:"fitBounds",value:function(j){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=this.width,se=this.height,At=oc(Object.assign({width:Re,height:se,bounds:j},Q)),Rt=At.longitude,Ut=At.latitude,Zn=At.zoom;return new X({width:Re,height:se,longitude:Rt,latitude:Ut,zoom:Zn})}}]),X}(Qo),wc=function(){function le(){(0,E.Z)(this,le)}return(0,p.Z)(le,[{key:"syncWithMapCamera",value:function(O){var j=O.center,Q=O.zoom,Re=O.pitch,se=O.bearing,At=O.viewportHeight,Rt=O.viewportWidth,Ut=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new xl((0,x.Z)((0,x.Z)({},Ut),{},{width:Rt,height:At,longitude:j&&j[0],latitude:j&&j[1],zoom:Q,pitch:Re,bearing:se}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(O,j){return this.viewport.projectFlat(O,j)}}]),le}(),Ou=["id","style","rotation","mapInstance","version","mapSize","interactive"],su=["id","style","rotation","mapInstance","canvas","hasBaseMap"],no,sl;function Zo(le){var X=uu();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var ul=12,El=(no=(0,pr.b2)(),no(sl=function(le){(0,M.Z)(O,le);var X=Zo(O);function O(){var j;(0,E.Z)(this,O);for(var Q=arguments.length,Re=new Array(Q),se=0;se<Q;se++)Re[se]=arguments[se];return j=X.call.apply(X,[this].concat(Re)),(0,F.Z)((0,D.Z)(j),"version",gi.G.DEFUALT),(0,F.Z)((0,D.Z)(j),"handleMiniCameraChanged",function(At,Rt,Ut,Zn,gr){var ni=j.config.offsetCoordinate,Vr=ni===void 0?!0:ni;j.viewport.syncWithMapCamera({bearing:Zn,center:[At,Rt],viewportHeight:j.map.transform.height,pitch:gr,viewportWidth:j.map.transform.width,zoom:Ut,cameraHeight:0}),j.viewport.getZoom()>ul&&Vr?j.coordinateSystemService.setCoordinateSystem(t.lo.LNGLAT_OFFSET):j.coordinateSystemService.setCoordinateSystem(t.lo.LNGLAT),j.cameraChangedCallback(j.viewport)}),j}return(0,p.Z)(O,[{key:"lngLatToCoord",value:function(Q){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},se=this.lngLatToMercator(Q,0),At=se.x,Rt=se.y;return[At-Re.x,Rt-Re.y]}},{key:"lngLatToMercator",value:function(Q,Re){var se=Gn.fromLngLat(Q,Re),At=se.x,Rt=At===void 0?0:At,Ut=se.y,Zn=Ut===void 0?0:Ut,gr=se.z,ni=gr===void 0?0:gr;return{x:Rt,y:Zn,z:ni}}},{key:"getModelMatrix",value:function(Q,Re,se){var At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Rt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},Ut=Gn.fromLngLat(Q,Re),Zn=Ut.meterInMercatorCoordinateUnits(),gr=mn.create();return mn.translate(gr,gr,In.fromValues(Ut.x-Rt.x,Ut.y-Rt.y,Ut.z||0-Rt.z)),mn.scale(gr,gr,In.fromValues(Zn*At[0],-Zn*At[1],Zn*At[2])),mn.rotateX(gr,gr,se[0]),mn.rotateY(gr,gr,se[1]),mn.rotateZ(gr,gr,se[2]),gr}},{key:"init",value:function(){var j=(0,w.Z)(L().mark(function Re(){var se=this,At,Rt,Ut,Zn,gr,ni,Vr,wi,ji,da,wa,to,va,ba,ao;return L().wrap(function(so){for(;;)switch(so.prev=so.next){case 0:At=this.config,Rt=At.id,Ut=Rt===void 0?"map":Rt,Zn=At.style,gr=Zn===void 0?"light":Zn,ni=At.rotation,Vr=ni===void 0?0:ni,wi=At.mapInstance,ji=At.version,da=ji===void 0?"DEFAULTMAP":ji,wa=At.mapSize,to=wa===void 0?1e4:wa,va=At.interactive,ba=va===void 0?!0:va,ao=(0,A.Z)(At,Ou),this.viewport=new wc,this.version=da,this.simpleMapCoord.setSize(to),da===gi.G.SIMPLE&&ao.center&&(ao.center=this.simpleMapCoord.unproject(ao.center)),wi?(this.map=wi,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(Ut),this.map=new ic((0,x.Z)({container:this.$mapContainer,style:this.getMapStyleValue(gr),bearing:Vr},ao))),this.map.on("load",function(){se.handleCameraChanged()}),ba&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){se.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return so.stop()}},Re,this)}));function Q(){return j.apply(this,arguments)}return Q}()},{key:"initMiniMap",value:function(){var j=(0,w.Z)(L().mark(function Re(){var se=this,At,Rt,Ut,Zn,gr,ni,Vr,wi,ji,da,wa,to,va,ba;return L().wrap(function(Mo){for(;;)switch(Mo.prev=Mo.next){case 0:At=this.config,Rt=At.id,Ut=Rt===void 0?"map":Rt,Zn=At.style,gr=Zn===void 0?"light":Zn,ni=At.rotation,Vr=ni===void 0?0:ni,wi=At.mapInstance,ji=At.canvas,da=ji===void 0?null:ji,wa=At.hasBaseMap,to=wa===void 0?!1:wa,va=(0,A.Z)(At,su),this.viewport=new wc,this.$mapContainer=da,this.map=new ic((0,x.Z)({container:this.$mapContainer,style:this.getMapStyleValue(gr),bearing:Vr,canvas:da},va)),to?(ba=this.map.getCenter(),this.handleMiniCameraChanged(ba.lng,ba.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),W.vO.document.addEventListener("mapCameaParams",function(so){var ka=so.e,zo=ka.longitude,fi=ka.latitude,Go=ka.scale,mu=ka.bearing,bo=ka.pitch;se.handleMiniCameraChanged(zo,fi,Go-1.25,mu,bo)})):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return Mo.stop()}},Re,this)}));function Q(){return j.apply(this,arguments)}return Q}()},{key:"exportMap",value:function(Q){var Re=this.map.getCanvas(),se=Q==="jpg"?Re==null?void 0:Re.toDataURL("image/jpeg"):Re==null?void 0:Re.toDataURL("image/png");return se}}]),O}(zu))||sl);function lu(le){var X=Ns();return function(){var j=(0,g.Z)(le),Q;if(X){var Re=(0,g.Z)(this).constructor;Q=Reflect.construct(j,arguments,Re)}else Q=j.apply(this,arguments);return(0,d.Z)(this,Q)}}function Ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(le){return!1}}var Gl=function(le){(0,M.Z)(O,le);var X=lu(O);function O(){return(0,E.Z)(this,O),X.apply(this,arguments)}return(0,p.Z)(O,[{key:"getServiceConstructor",value:function(){return El}}]),O}(b)},84859:function(Ie,S,y){"use strict";y.d(S,{G:function(){return E}});var E=function(p){return p["GAODE1.x"]="GAODE1.x",p["GAODE2.x"]="GAODE2.x",p.MAPBOX="MAPBOX",p.DEFUALT="DEFUALTMAP",p.SIMPLE="SIMPLE",p.GLOBEL="GLOBEL",p}({})},44402:function(Ie,S,y){"use strict";y.d(S,{vO:function(){return Bt},SO:function(){return E},z6:function(){return ac},sN:function(){return zi},oX:function(){return Ea},a5:function(){return p},nx:function(){return bo},lN:function(){return Xa},Z:function(){return gi},rQ:function(){return Ue},bV:function(){return q},zi:function(){return ct},ds:function(){return Uu},Ev:function(){return au},oO:function(){return Ds},SI:function(){return zu},Rx:function(){return _s},W0:function(){return nr},Z6:function(){return sr},hH:function(){return Xu},We:function(){return Ec},Co:function(){return me},hj:function(){return Ci},Cl:function(){return ti},Oc:function(){return Ni},M4:function(){return Fi},NJ:function(){return ta},ks:function(){return Kt},Ol:function(){return pu},fj:function(){return Ba},ZB:function(){return yo},gJ:function(){return N},z0:function(){return yu},jG:function(){return cu},M8:function(){return os},fg:function(){return _c},eW:function(){return er},Ro:function(){return Bl},if:function(){return vl},vP:function(){return qc},yM:function(){return _o},LF:function(){return gn},Fv:function(){return rl},yA:function(){return Tc},yR:function(){return qa},CI:function(){return on},a:function(){return fr}});var E={};y.r(E),y.d(E,{DPR:function(){return Tu},addClass:function(){return Dl},addStyle:function(){return pl},appendElementType:function(){return ws},clearChildren:function(){return qs},create:function(){return lo},css2Style:function(){return Au},empty:function(){return Ks},getClass:function(){return ko},getContainer:function(){return vs},getDiffRect:function(){return js},getStyleList:function(){return Nl},getViewPortScale:function(){return tl},hasClass:function(){return _a},printCanvas:function(){return yc},remove:function(){return du},removeClass:function(){return eo},removeStyle:function(){return gs},setChecked:function(){return nl},setClass:function(){return Su},setTransform:function(){return nu},setUnDraggable:function(){return rc},splitWords:function(){return Fs},triggerResize:function(){return ru},trim:function(){return $s}});var p={};y.r(p),y.d(p,{getColumn:function(){return wc},getSatByColumn:function(){return Ou},max:function(){return Ac},mean:function(){return Qo},min:function(){return Cc},mode:function(){return oc},statMap:function(){return xl},sum:function(){return Bo}});var M=y(1413),d=y(43144),g=y(15671),x=y(60136),v=y(82963),u=y(61120),t=y(89611);function e(I){return Function.toString.call(I).indexOf("[native code]")!==-1}var o=y(78814);function c(I,z,$){return(0,o.Z)()?c=Reflect.construct.bind():c=function(ge,xe,gt){var Ft=[null];Ft.push.apply(Ft,xe);var Sn=Function.bind.apply(ge,Ft),Mt=new Sn;return gt&&(0,t.Z)(Mt,gt.prototype),Mt},c.apply(null,arguments)}function b(I){var z=typeof Map=="function"?new Map:void 0;return b=function(ee){if(ee===null||!e(ee))return ee;if(typeof ee!="function")throw new TypeError("Super expression must either be null or a function");if(typeof z!="undefined"){if(z.has(ee))return z.get(ee);z.set(ee,ge)}function ge(){return c(ee,arguments,(0,u.Z)(this).constructor)}return ge.prototype=Object.create(ee.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),(0,t.Z)(ge,ee)},b(I)}var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function w(I){this.message=I}w.prototype=new Error,w.prototype.name="InvalidCharacterError";function D(I){var z=String(I).replace(/=+$/,"");if(z.length%4===1)throw new w("'atob' failed: The string to be decoded is not correctly encoded.");for(var $="",ee=0,ge,xe,gt=0;xe=z.charAt(gt++);~xe&&(ge=ee%4?ge*64+xe:xe,ee++%4)?$+=String.fromCharCode(255&ge>>(-2*ee&6)):0)xe=A.indexOf(xe);return $}function F(I){I=String(I);for(var z,$,ee,ge,xe="",gt=0,Ft=I.length%3;gt<I.length;){if(($=I.charCodeAt(gt++))>255||(ee=I.charCodeAt(gt++))>255||(ge=I.charCodeAt(gt++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");z=$<<16|ee<<8|ge,xe+=A.charAt(z>>18&63)+A.charAt(z>>12&63)+A.charAt(z>>6&63)+A.charAt(z&63)}return Ft?xe.slice(0,Ft-3)+"===".substring(Ft):xe}var Z=function(){function I(z,$){(0,g.Z)(this,I),this.buffers=z,this.type=$}return(0,d.Z)(I,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function($,ee,ge){throw new Error("not implemented")}}]),I}(),L,W=function(){return L||(L=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof y.g!="undefined"?y.g:{})};L=W();var k;typeof window=="undefined"?k={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(z){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(z){return null},clearMeasures:function(z){return null},clearMarks:function(z){return null},measure:function(z,$,ee){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(z){return!0},Event:function(z,$){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:k=window;var de=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,H=de?my.getSystemInfoSync().pixelRatio:k.devicePixelRatio,ue=(0,d.Z)(function I(z,$){(0,g.Z)(this,I),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=z,this.timeStamp=Date.now()}),ve=y(97326);function ke(I,z){var $=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!$){if(Array.isArray(I)||($=Ae(I))||z&&I&&typeof I.length=="number"){$&&(I=$);var ee=0,ge=function(){};return{s:ge,n:function(){return ee>=I.length?{done:!0}:{done:!1,value:I[ee++]}},e:function(Mt){throw Mt},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe=!0,gt=!1,Ft;return{s:function(){$=$.call(I)},n:function(){var Mt=$.next();return xe=Mt.done,Mt},e:function(Mt){gt=!0,Ft=Mt},f:function(){try{!xe&&$.return!=null&&$.return()}finally{if(gt)throw Ft}}}}function Ae(I,z){if(I){if(typeof I=="string")return be(I,z);var $=Object.prototype.toString.call(I).slice(8,-1);if($==="Object"&&I.constructor&&($=I.constructor.name),$==="Map"||$==="Set")return Array.from(I);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return be(I,z)}}function be(I,z){(z==null||z>I.length)&&(z=I.length);for(var $=0,ee=new Array(z);$<z;$++)ee[$]=I[$];return ee}var G=new WeakMap,ie=function(){function I(){(0,g.Z)(this,I),G.set(this,{})}return(0,d.Z)(I,[{key:"addEventListener",value:function($,ee){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xe=G.get(this);xe||(xe={}),xe[$]||(xe[$]=[]),xe[$].push(ee),G.set(this,xe),ge.capture,ge.once,ge.passive}},{key:"removeEventListener",value:function($,ee){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xe=G.get(this);if(xe){var gt=xe[$];if(gt&&gt.length>0){for(var Ft=gt.length;Ft--;Ft>0)if(gt[Ft]===ee){gt.splice(Ft,1);break}}}}},{key:"dispatchEvent",value:function($){var ee=G.get(this)[$.type];if(ee){var ge=ke(ee),xe;try{for(ge.s();!(xe=ge.n()).done;){var gt=xe.value;gt($)}}catch(Ft){ge.e(Ft)}finally{ge.f()}}}}]),I}();function V(I){var z=ae();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var K=function(I){(0,x.Z)($,I);var z=V($);function $(){var ee;return(0,g.Z)(this,$),ee=z.call(this),ee.childNodes=[],ee}return(0,d.Z)($,[{key:"appendChild",value:function(ge){this.childNodes.push(ge)}},{key:"cloneNode",value:function(){var ge=Object.create(this);return Object.assign(ge,this),ge}},{key:"removeChild",value:function(ge){var xe=this.childNodes.findIndex(function(gt){return gt===ge});return xe>-1?this.childNodes.splice(xe,1):null}}]),$}(ie);function he(I){var z=Se();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function Se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Fe=function(I){(0,x.Z)($,I);var z=he($);function $(){var ee;return(0,g.Z)(this,$),ee=z.call(this),ee.className="",ee.children=[],ee}return(0,d.Z)($,[{key:"setAttribute",value:function(ge,xe){this[ge]=xe}},{key:"getAttribute",value:function(ge){return this[ge]}},{key:"setAttributeNS",value:function(ge,xe){this[ge]=xe}},{key:"getAttributeNS",value:function(ge){return this[ge]}}]),$}(K),nt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,lt,Gt,pn,$n;if(nt){var Ln=my.getSystemInfoSync();lt=Ln.screenWidth,Gt=Ln.screenHeight,pn=Ln.windowWidth,$n=Ln.windowHeight}else{var st=k.innerWidth,xt=k.innerHeight;lt=st,Gt=xt,pn=st,$n=xt}var tn={width:lt,height:Gt,availWidth:pn,availHeight:$n,availLeft:0,availTop:0},Un=tn.availWidth,We=tn.availHeight,Yt={style:[]};function Ze(I,z){if(!("parentNode"in I)){var $;z===0?$=function(){return null}:z===1?$=function(){return Yt}:$=function(){return null},Object.defineProperty(I,"parentNode",{enumerable:!0,get:$})}if(!("parentElement"in I)){var ee;z===0?ee=function(){return null}:z===1?ee=function(){return Yt}:ee=function(){return null},Object.defineProperty(I,"parentElement",{enumerable:!0,get:ee})}}function Pe(I){I.style=I.style||{},Object.assign(I.style,{top:"0px",left:"0px",width:Un+"px",height:We+"px",margin:"0px",padding:"0px"})}function ze(I){"clientLeft"in I||(I.clientLeft=0,I.clientTop=0),"clientWidth"in I||(I.clientWidth=Un,I.clientHeight=We),"getBoundingClientRect"in I||(I.getBoundingClientRect=function(){var z={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return z})}function ht(I){"offsetLeft"in I||(I.offsetLeft=0,I.offsetTop=0),"offsetWidth"in I||(I.offsetWidth=Un,I.offsetHeight=We)}function P(I){"scrollLeft"in I||(I.scrollLeft=0,I.scrollTop=0),"scrollWidth"in I||(I.scrollWidth=Un,I.scrollHeight=We)}function ne(I){var z=function(){return!0};I.classList=[],I.classList.add=z,I.classList.remove=z,I.classList.contains=z,I.classList.toggle=z}function _e(I){var z=oe();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}function ce(){}var ye=function(I){(0,x.Z)($,I);var z=_e($);function $(){var ee,ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",xe=arguments.length>1?arguments[1]:void 0;return(0,g.Z)(this,$),ee=z.call(this),ee.className="",ee.children=[],ee.focus=ce,ee.blur=ce,ee.insertBefore=ce,ee.appendChild=ce,ee.removeChild=ce,ee.remove=ce,ee.innerHTML="",ee.tagName=ge.toUpperCase(),Ze((0,ve.Z)(ee),xe),Pe((0,ve.Z)(ee)),ne((0,ve.Z)(ee)),ze((0,ve.Z)(ee)),ht((0,ve.Z)(ee)),P((0,ve.Z)(ee)),ee}return(0,d.Z)($)}(Fe);function Y(I){var z=Ne();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function Ne(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Qe=function(I){(0,x.Z)($,I);var z=Y($);function $(ee){return(0,g.Z)(this,$),z.call(this,ee)}return(0,d.Z)($,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),$}(ye);function mt(I){var z=Ve();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function Ve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var rt=function(I){(0,x.Z)($,I);var z=mt($);function $(){return(0,g.Z)(this,$),z.call(this,"video")}return(0,d.Z)($)}(Qe),yt={},Tt={};function Ht(I,z){yt=I,yt.id=z,"tagName"in yt||(yt.tagName="CANVAS"),yt.type="canvas",Mixin.parentNode(yt),Mixin.style(yt),Mixin.classList(yt),Mixin.clientRegion(yt),Mixin.offsetRegion(yt),yt.focus=function(){},yt.blur=function(){}}function en(I,z){var $=1024,ee=1024;Tt={width:$,height:ee,clientWidth:$/devicePixelRatio,clientHeight:ee/devicePixelRatio,id:z,type:"canvas"},"tagName"in Tt||(Tt.tagName="CANVAS"),Mixin.parentNode(Tt),Mixin.style(Tt),Mixin.classList(Tt),Mixin.clientRegion(Tt),Mixin.offsetRegion(Tt),Tt.getContext=function(ge){if(ge==="2d")return I},Tt.focus=function(){},Tt.blur=function(){}}function wt(){return yt}function Mn(){return Tt}var kn=(0,d.Z)(function I(){(0,g.Z)(this,I);var z=wt(),$=z.createImage&&z.createImage()||{};return"tagName"in $||($.tagName="IMG",$.__proto__=I.prototype),Ze($),ne($),Object.assign($,{addEventListener:function(ge,xe){$["on".concat(ge)]=xe.bind($)},removeEventListener:function(ge){$["on".concat(ge)]=null}}),$}),jn={href:"",protocol:"",host:""};function mn(I){var z=cr();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function cr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Cr=function(I){(0,x.Z)($,I);var z=mn($);function $(){return(0,g.Z)(this,$),z.call(this,"body",0)}return(0,d.Z)($,[{key:"addEventListener",value:function(ge,xe){var gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(ge,xe,gt){}},{key:"dispatchEvent",value:function(ge){}}]),$}(ye),mi=function(I){(0,x.Z)($,I);var z=mn($);function $(){return(0,g.Z)(this,$),z.call(this,"html",0)}return(0,d.Z)($,[{key:"addEventListener",value:function(ge,xe){var gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(ge,xe){}},{key:"dispatchEvent",value:function(ge){}}]),$}(ye),$r={},Sr={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:jn,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(z){return z=z.toLowerCase(),z==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):z==="img"?new kn:z==="video"?new rt:new ye(z)},createElementNS:function(z,$){return this.createElement($)},createTextNode:function(z){return z},getElementById:function(z){return null},getElementsByTagName:function(z){return z=z.toLowerCase(),[]},getElementsByTagNameNS:function(z,$){return this.getElementsByTagName($)},getElementsByName:function(z){return[]},querySelector:function(z){return null},querySelectorAll:function(z){return[]},addEventListener:function(z,$,ee){$r[z]||($r[z]=[]),$r[z].push($)},removeEventListener:function(z,$){var ee=$r[z];if(ee&&ee.length>0){for(var ge=ee.length;ge--;ge>0)if(ee[ge]===$){ee.splice(ge,1);break}}},dispatchEvent:function(z){var $=z.type,ee=$r[$];if(ee)for(var ge=0;ge<ee.length;ge++)ee[ge](z);z.target&&typeof z.target["on"+$]=="function"&&z.target["on"+$](z)},createEvent:function(z){return new ue(z)}};Sr.documentElement=new mi,Sr.head=new ye("head"),Sr.body=new Cr;var dr=Object,Pr=y(71002),Hr=function(){function I(){(0,g.Z)(this,I);var z=arguments.length;if(z===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else z===3&&(0,Pr.Z)(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return(0,d.Z)(I,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),I}(),Xi=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Kn,Gn,pt;if(Xi){var Ha=my.getSystemInfoSync();Kn=Ha.system,Gn=Ha.platform,pt=Ha.language}else{var Sa={versions:function(){var I=k.navigator.userAgent;return{trident:I.indexOf("Trident")>-1,presto:I.indexOf("Presto")>-1,webKit:I.indexOf("AppleWebKit")>-1,gecko:I.indexOf("Gecko")>-1&&I.indexOf("KHTML")===-1,mobile:!!I.match(/AppleWebKit.*Mobile.*/),ios:!!I.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:I.indexOf("Android")>-1||I.indexOf("Linux")>-1,iPhone:I.indexOf("iPhone")>-1,iPad:I.indexOf("iPad")>-1,webApp:I.indexOf("Safari")===-1,weixin:I.indexOf("MicroMessenger")>-1,qq:I.match(/\sQQ/i)===" qq"}}(),language:(k.navigator.browserLanguage||k.navigator.language).toLowerCase()};Sa.versions.android?Gn="android":Sa.versions.trident?Gn="IE":Sa.versions.presto?Gn="Opera":Sa.versions.webKit?Gn="webKit":Sa.versions.gecko?Gn="Firefox":Sa.versions.mobile?Gn="mobile":Sa.versions.ios?Gn="ios":Sa.versions.iPhone?Gn="iPhone":Sa.versions.iPad?Gn="ipad":Sa.versions.webApp?Gn="webApp":Sa.versions.weixin?Gn="weixin":Sa.versions.qq&&(Gn="qq"),Kn=k.navigator.userAgent,pt=Sa.language}var Qa=Kn.toLowerCase().indexOf("android")!==-1,ma=Qa?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",Ei="Mozilla/5.0 (".concat(ma,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(pt),Ia={platform:Gn,language:pt,appVersion:"5.0 (".concat(ma,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:Ei},si={mark:function(z){return null},clearMeasures:function(z){return null},clearMarks:function(z){return null},measure:function(z,$,ee){return{duration:0}},now:function(){}},it=0,Qn=0;function pe(I){var z=Date.now(),$=Math.max(it+23,z);return Qn=setTimeout(function(){I(it=$)},$-z),Qn}function at(I){var z=wt();return z.requestAnimationFrame?z.requestAnimationFrame(I):pe(I)}function Dt(I){var z=wt();return z.cancelAnimationFrame?z.cancelAnimationFrame(I):clearTimeout(I)}var vn=function(){function I(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,g.Z)(this,I),z.indexOf("http://")==0||z.indexOf("https://")==0){this.href=z;return}this.href=$+z}return(0,d.Z)(I,null,[{key:"createObjectURL",value:function($){var ee=$.buffers[0],ge=$.type,xe=bn(ee),gt="data:".concat(ge,";base64, ");return gt+xe}}]),I}();function bn(I){for(var z="",$=new Uint8Array(I),ee=$.byteLength,ge=0;ge<ee;ge++)z+=String.fromCharCode($[ge]);return F(z)}var Pn={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},ar={};function Zr(I){var z=Xr();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function Xr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var ui=new Map,qr=new Map,Ti=new Map,fa={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function Bn(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(I)]=="function"&&this["on".concat(I)].call(this,z)}function Li(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:I};this.readyState=I,Bn.call(this,"readystatechange",z)}var Ji=function(I){(0,x.Z)($,I);var z=Zr($);function $(){var ee;return(0,g.Z)(this,$),ee=z.call(this),ee.onabort=null,ee.onerror=null,ee.onload=null,ee.onloadstart=null,ee.onprogress=null,ee.ontimeout=null,ee.onloadend=null,ee.onreadystatechange=null,ee.readyState=0,ee.response=null,ee.responseText=null,ee._responseType="text",ee.responseXML=null,ee.status=0,ee.statusText="",ee.upload={},ee.withCredentials=!1,ui.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),ee}return(0,d.Z)($,[{key:"responseType",set:function(ge){this._responseType=ge}},{key:"abort",value:function(){var ge=Ti.get("requestTask");ge&&ge.abort()}},{key:"getAllResponseHeaders",value:function(){var ge=qr.get("responseHeader");return Object.keys(ge).map(function(xe){return"".concat(xe,": ").concat(ge[xe])}).join(`
`)}},{key:"getResponseHeader",value:function(ge){return qr.get("responseHeader")[ge]}},{key:"open",value:function(ge,xe,gt){this._method=ge,this._url=xe}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(ge,xe){var gt=ui.get("requestHeader");gt[ge]=xe,ui.set("requestHeader",gt)}},{key:"addEventListener",value:function(ge,xe){var gt=this;typeof xe=="function"&&(this["on"+ge]=function(){var Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ft.target=Ft.target||gt,xe.call(gt,Ft)})}},{key:"removeEventListener",value:function(ge,xe){this["on"+ge]===xe&&(this["on"+ge]=null)}}]),$}(ie);Ji.UNSEND=0,Ji.OPENED=1,Ji.HEADERS_RECEIVED=2,Ji.LOADING=3,Ji.DONE=4;function Na(I){var z=ea();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var ha=function(I){(0,x.Z)($,I);var z=Na($);function $(ee){return(0,g.Z)(this,$),z.call(this,ee)}return(0,d.Z)($)}(ue);function Ta(I){return function(z){z.type=I,Sr.dispatchEvent(z)}}var Aa=Ta("mousedown"),Wi=Ta("mousemove"),go=Ta("mouseup");function Ja(I){var z=$o();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function $o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Ua=function(I){(0,x.Z)($,I);var z=Ja($);function $(ee){var ge;return(0,g.Z)(this,$),ge=z.call(this,ee),ge.target=wt(),ge.currentTarget=wt(),ge}return(0,d.Z)($)}(ue),Wa=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],mo=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],fo="touch";function Ro(I,z,$){for(var ee=new Ua(I),ge=0;ge<Wa.length;ge++){var xe=Wa[ge];ee[xe]=z[xe]||mo[ge]}return ee.type=I,ee.target=wt(),ee.currentTarget=wt(),ee.buttons=te(I),ee.which=ee.buttons,ee.pointerId=(z.identifier||0)+2,ee.bubbles=!0,ee.cancelable=!0,ee.button=0,ee.width=(z.radiusX||.5)*2,ee.height=(z.radiusY||.5)*2,ee.pressure=z.force||.5,ee.isPrimary=wn(z),ee.pointerType=fo,ee.altKey=$.altKey,ee.ctrlKey=$.ctrlKey,ee.metaKey=$.metaKey,ee.shiftKey=$.shiftKey,$.preventDefault&&(ee.preventDefault=function(){$.preventDefault()}),ee}function te(I){var z=0;return(I==="touchstart"||I==="touchmove"||I==="pointerdown"||I==="pointermove")&&(z=1),z}var ho=null;function wn(I){return ho===I.identifier}function tt(I){ho===null&&(ho=I.identifier)}function $e(I){ho===I.identifier&&(ho=null)}function dt(I){return function(z){for(var $=z.changedTouches,ee=0;ee<$.length;ee++){var ge=$[ee];ee===0&&I==="pointerdown"?tt(ge):(I==="pointerup"||I==="pointercancel")&&$e(ge);var xe=Ro(I,ge,z);Sr.dispatchEvent(xe)}}}var Ke=dt("pointerdown"),qt=dt("pointermove"),nn=dt("pointerup");function ln(I){var z=An();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function An(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Oe=function(I){(0,x.Z)($,I);var z=ln($);function $(ee){var ge;return(0,g.Z)(this,$),ge=z.call(this,ee),ge.touches=[],ge.targetTouches=[],ge.changedTouches=[],ge.target=wt(),ge.currentTarget=wt(),ge}return(0,d.Z)($)}(ue);function De(I){var z=I||{},$=z.x,ee=$===void 0?0:$,ge=z.y,xe=ge===void 0?0:ge,gt=z.clientX,Ft=gt===void 0?0:gt,Sn=z.clientY,Mt=Sn===void 0?0:Sn;Object.keys(I).indexOf("x")!==-1?(I.pageX=I.clientX=ee,I.pageY=I.clientY=xe):(I.x=Ft,I.y=Mt)}function Be(I){return function(z){var $=new Oe(I);$.changedTouches=z.changedTouches,$.touches=z.touches,$.targetTouches=Array.prototype.slice.call(z.touches),$.timeStamp=z.timeStamp,$.changedTouches.forEach(function(ee){return De(ee)}),$.touches.forEach(function(ee){return De(ee)}),$.targetTouches.forEach(function(ee){return De(ee)}),Sr.dispatchEvent($)}}function Ye(I){return function(z){z.type=I,Sr.dispatchEvent(z)}}var Nt=Be("touchstart"),jt=Be("touchmove"),un=Be("touchend"),Hn=Ye("mapCameaParams"),Rn=!1;function fr(I){Rn=I}var or=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,$t=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),er=(or||$t)&&Rn,Jn={atob:D,btoa:F,devicePixelRatio:H,Blob:Z,document:Sr,Element:Fe,Event:ue,EventTarget:ie,HTMLCanvasElement:dr,HTMLElement:ye,HTMLMediaElement:Qe,HTMLVideoElement:rt,Image:kn,ImageData:Hr,navigator:Ia,Node:K,requestAnimationFrame:at,cancelAnimationFrame:Dt,screen:tn,XMLHttpRequest:Ji,performance:si,URL:vn,WebGLRenderingContext:Pn,WebGL2RenderingContext:ar,addEventListener:function(z,$){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Sr.addEventListener(z,$,ee)},removeEventListener:function(z,$,ee){Sr.removeEventListener(z,$)},dispatchEvent:function(z){Sr.dispatchEvent(z)},innerWidth:tn.availWidth,innerHeight:tn.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},Bt=er?Jn:k,Ai=er?Ji:k.XMLHttpRequest,Le=er?jn:k.location;function Xe(I){var z=He();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function He(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var Ot=function(I){(0,x.Z)($,I);var z=Xe($);function $(ee,ge,xe,gt){var Ft;return(0,g.Z)(this,$),Ft=z.call(this,"AJAXError: ".concat(ge," (").concat(ee,"): ").concat(xe)),Ft.status=ee,Ft.statusText=ge,Ft.url=xe,Ft.body=gt,Ft}return(0,d.Z)($)}(b(Error));function Vt(I,z){var $=new Ai,ee=Array.isArray(I.url)?I.url[0]:I.url;$.open(I.method||"GET",ee,!0),I.type==="arrayBuffer"&&($.responseType="arraybuffer");for(var ge in I.headers)I.headers.hasOwnProperty(ge)&&$.setRequestHeader(ge,I.headers[ge]);return I.type==="json"&&($.responseType="text",$.setRequestHeader("Accept","application/json")),$.withCredentials=I.credentials==="include",$.onerror=function(){z(new Error($.statusText))},$.onload=function(){if(($.status>=200&&$.status<300||$.status===0)&&$.response!==null){var xe=$.response;if(I.type==="json")try{xe=JSON.parse($.response)}catch(Ft){return z(Ft)}z(null,xe,$.getResponseHeader("Cache-Control"),$.getResponseHeader("Expires"),$)}else{var gt=new Blob([$.response],{type:$.getResponseHeader("Content-Type")});z(new Ot($.status,$.statusText,ee.toString(),gt))}},$.send(I.body),$}function gn(I){return new Promise(function(z,$){Vt(I,function(ee,ge,xe,gt,Ft){ee?$({err:ee,data:null,xhr:Ft}):z({err:null,data:ge,cacheControl:xe,expires:gt,xhr:Ft})})})}function vt(I,z){return Vt(I,z)}var zt=function(z,$){return vt((0,M.Z)((0,M.Z)({},z),{},{type:"json"}),$)},Kt=function(z,$){return vt((0,M.Z)((0,M.Z)({},z),{},{type:"arrayBuffer"}),$)},fn=function(z,$){return vt(_objectSpread(_objectSpread({},z),{},{method:"POST"}),$)};function zn(I){var z=$window.document.createElement("a");return z.href=I,z.protocol===$window.document.location.protocol&&z.host===$window.document.location.host}var wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Er(I,z){var $=new Bt.Image,ee=Bt.URL||Bt.webkitURL;$.crossOrigin="anonymous",$.onload=function(){z(null,$),ee.revokeObjectURL($.src),$.onload=null,window.requestAnimationFrame(function(){$.src=wr})},$.onerror=function(){return z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ge=new Blob([new Uint8Array(I)],{type:"image/png"});$.src=I.byteLength?ee.createObjectURL(ge):wr}function _(I,z){var $=new Blob([new Uint8Array(I)],{type:"image/png"});createImageBitmap($).then(function(ee){z(null,ee)}).catch(function(ee){z(new Error("Could not load image because of ".concat(ee.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var N=function(z,$,ee){var ge=function(gt,Ft){if(gt)$(gt);else if(Ft){var Sn=typeof createImageBitmap=="function",Mt=ee?ee(Ft):Ft;Sn?_(Mt,$):Er(Mt,$)}};return z.type==="json"?zt(z,ge):Kt(z,ge)},me=function(z,$){var ee=typeof createImageBitmap=="function";ee?_(z,$):Er(z,$)},q=function(I){return I.CENTER="center",I.TOP="top",I["TOP-LEFT"]="top-left",I["TOP-RIGHT"]="top-right",I.BOTTOM="bottom",I["BOTTOM-LEFT"]="bottom-left",I["BOTTOM-RIGHT"]="bottom-right",I.LEFT="left",I.RIGHT="right",I}({}),Ue={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ct(I,z,$){var ee=I.classList;for(var ge in Ue)Ue.hasOwnProperty(ge)&&ee.remove("l7-".concat($,"-anchor-").concat(ge));ee.add("l7-".concat($,"-anchor-").concat(z))}var Lt=y(37620);function hn(I){return typeof I=="string"?!!d3.color(I):!1}function on(I){var z=Lt.ZP(I),$=[0,0,0,0];return z!=null&&($[0]=z.r/255,$[1]=z.g/255,$[2]=z.b/255,$[3]=z.opacity),$}function nr(I){var z=I&&I[0],$=I&&I[1],ee=I&&I[2],ge=z+$*256+ee*65536-1;return ge}function sr(I){return[I+1&255,I+1>>8&255,I+1>>8>>8&255]}function ti(I){var z=Bt.document.createElement("canvas"),$=z.getContext("2d");z.width=256,z.height=1;for(var ee=null,ge=$.createLinearGradient(0,0,256,1),xe=I.positions[0],gt=I.positions[I.positions.length-1],Ft=0;Ft<I.colors.length;++Ft){var Sn=(I.positions[Ft]-xe)/(gt-xe);ge.addColorStop(Sn,I.colors[Ft])}if($.fillStyle=ge,$.fillRect(0,0,256,1),er)return ee=new Uint8ClampedArray($.getImageData(0,0,256,1).data),z=null,$=null,{data:ee,width:256,height:1};ee=$.getImageData(0,0,256,1).data;for(var Mt=$.createImageData(256,1),En=0;En<Mt.data.length;En+=4)Mt.data[En+0]=ee[En+0],Mt.data[En+1]=ee[En+1],Mt.data[En+2]=ee[En+2],Mt.data[En+3]=ee[En+3];return z=null,$=null,Mt}function Fi(I,z){var $=Bt.document.createElement("canvas"),ee=$.getContext("2d");$.width=256,$.height=1;for(var ge=ee.createLinearGradient(0,0,256,1),xe=z[1]-z[0],gt=0;gt<I.colors.length;++gt){var Ft=Math.max((I.positions[gt]-z[0])/xe,0);ge.addColorStop(Ft,I.colors[gt])}ee.fillStyle=ge,ee.fillRect(0,0,256,1);var Sn=ee.getImageData(0,0,256,1).data,Mt=Oi(ee,Sn);return $=null,ee=null,Mt}function Ci(I){var z=Bt.document.createElement("canvas"),$=z.getContext("2d");z.width=256,z.height=1;var ee=$.createImageData(256,1);return ee.data.fill(0),I.positions.forEach(function(ge,xe){var gt=on(I.colors[xe]);ee.data[ge*4+0]=gt[0]*255,ee.data[ge*4+1]=gt[1]*255,ee.data[ge*4+2]=gt[2]*255,ee.data[ge*4+3]=gt[3]*255}),z=null,$=null,ee}function ta(I){var z=Bt.document.createElement("canvas"),$=z.getContext("2d");$.globalAlpha=1,z.width=256,z.height=1;for(var ee=256/I.colors.length,ge=0;ge<I.colors.length;ge++)$.beginPath(),$.lineWidth=2,$.strokeStyle=I.colors[ge],$.moveTo(ge*ee,0),$.lineTo((ge+1)*ee,0),$.stroke();var xe=$.getImageData(0,0,256,1).data,gt=Oi($,xe);return z=null,$=null,gt}function Ni(I,z){var $=Bt.document.createElement("canvas"),ee=$.getContext("2d");ee.globalAlpha=1,$.width=256,$.height=1;var ge=z[1]-z[0];I.positions.length-I.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var xe=0;xe<I.colors.length;xe++)ee.beginPath(),ee.lineWidth=2,ee.strokeStyle=I.colors[xe],ee.moveTo((I.positions[xe]-z[0])/ge*255,0),ee.lineTo((I.positions[xe+1]-z[0])/ge*255,0),ee.stroke();var gt=ee.getImageData(0,0,256,1).data,Ft=Oi(ee,gt);return $=null,ee=null,Ft}function Oi(I,z){for(var $=I.createImageData(256,1),ee=0;ee<$.data.length;ee+=4)$.data[ee+0]=z[ee+0],$.data[ee+1]=z[ee+1],$.data[ee+2]=z[ee+2],$.data[ee+3]=z[ee+3];return $}function yo(I){switch(I.type){case"cat":return[0,255];default:return[0,1]}}var ya={BACK:1029,FRONT:1028};function Ba(I){switch(I){case"GAODE1.x":return ya.BACK;case"GAODE2.x":return ya.BACK;case"MAPBOX":return ya.FRONT;case"SIMPLE":return ya.FRONT;case"GLOBEL":return ya.BACK;case"DEBAULT":return ya.FRONT;default:return ya.FRONT}}var xa=y(74902),sa=y(97685),jo=y(96486);function vs(I){var z=I;return typeof I=="string"&&(z=Bt.document.getElementById(I)),z}function $s(I){return I.trim?I.trim():I.replace(/^\s+|\s+$/g,"")}function Fs(I){return $s(I).split(/\s+/)}function tu(I){var z,$,ee=Bt==null||(z=Bt.document)===null||z===void 0||($=z.documentElement)===null||$===void 0?void 0:$.style;if(!ee)return I[0];for(var ge in I)if(I[ge]&&I[ge]in ee)return I[ge];return I[0]}function lo(I,z,$){var ee=Bt.document.createElement(I);return z&&(ee.className=z||""),$&&$.appendChild(ee),ee}function du(I){var z=I.parentNode;z&&z.removeChild(I)}function Dl(I,z){if(I.classList!==void 0)for(var $=Fs(z),ee=0,ge=$.length;ee<ge;ee++)I.classList.add($[ee]);else if(!_a(I,z)){var xe=ko(I);Su(I,(xe?xe+" ":"")+z)}}function eo(I,z){if(I.classList!==void 0){var $=Fs(z);$.forEach(function(ee){I.classList.remove(ee)})}else Su(I,$s((" "+ko(I)+" ").replace(" "+z+" "," ")))}function _a(I,z){if(I.classList!==void 0)return I.classList.contains(z);var $=ko(I);return $.length>0&&new RegExp("(^|\\s)"+z+"(\\s|$)").test($)}function Su(I,z){I instanceof HTMLElement?I.className=z:I.className.baseVal=z}function ko(I){return I instanceof SVGElement&&(I=I.correspondingElement),I.className.baseVal===void 0?I.className:I.className.baseVal}function Ks(I){for(;I&&I.firstChild;)I.removeChild(I.firstChild)}var Zu=tu(["transform","WebkitTransform"]);function nu(I,z){I.style[Zu]=z}function ru(){if(typeof Event=="function")Bt.dispatchEvent(new Event("resize"));else{var I=Bt.document.createEvent("UIEvents");I.initUIEvent("resize",!0,!1,Bt,0),Bt.dispatchEvent(I)}}function yc(I){var z=["padding: "+(I.height/2-8)+"px "+I.width/2+"px;","line-height: "+I.height+"px;","background-image: url("+I.toDataURL()+");"];console.log(`%c
`,z.join(""))}function tl(){var I,z=Bt.document.querySelector('meta[name="viewport"]');if(!z)return 1;var $=(I=z.content)===null||I===void 0?void 0:I.split(","),ee=$.find(function(ge){var xe=ge.split("="),gt=(0,sa.Z)(xe,1),Ft=gt[0];return Ft==="initial-scale"});return ee?ee.split("=")[1]*1:1}var Tu=tl()<1?1:Bt.devicePixelRatio;function pl(I,z){I.setAttribute("style","".concat(I.style.cssText).concat(z))}function Nl(I){return I.split(";").map(function(z){return z.trim()}).filter(function(z){return z})}function gs(I,z){var $,ee=Nl(($=I.getAttribute("style"))!==null&&$!==void 0?$:""),ge=Nl(z),xe=jo.pull.apply(void 0,[ee].concat((0,xa.Z)(ge)));I.setAttribute("style",xe.join(";"))}function Au(I){return Object.entries(I).map(function(z){var $=(0,sa.Z)(z,2),ee=$[0],ge=$[1];return"".concat(ee,": ").concat(ge)}).join(";")}function js(I,z){return{left:I.left-z.left,top:I.top-z.top,right:z.left+z.width-I.left-I.width,bottom:z.top+z.height-I.top-I.height}}function nl(I,z){I.checked=z,z?I.setAttribute("checked","true"):I.removeAttribute("checked")}function qs(I){I.innerHTML=""}function rc(I){I.setAttribute("draggable","false")}function ws(I,z){if(typeof z=="string"){var $=document.createElement("div");for($.innerHTML=z;$.firstChild;)I.append($.firstChild)}else Array.isArray(z)?I.append.apply(I,(0,xa.Z)(z)):I.append(z)}function _c(I){return typeof ImageBitmap!="undefined"&&I instanceof ImageBitmap}function bc(){return typeof importScripts=="function"}var Kc=bc()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},iu=navigator.userAgent,Nc=!!iu.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),xc=iu.indexOf("Android")>-1||iu.indexOf("Adr")>-1;function Bl(){for(var I=navigator.userAgent,z=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],$=!0,ee=0,ge=z;ee<ge.length;ee++){var xe=ge[ee];if(I.indexOf(xe)>0){$=!1;break}}return $}function au(I,z){I.forEach(function($){z[$]&&(z[$]=z[$].bind(z))})}var Cu=null,ms=y(39034);function Zl(I){var z=[1/0,1/0,-1/0,-1/0];return(0,ms.pZ)(I,function($){z[0]>$[0]&&(z[0]=$[0]),z[1]>$[1]&&(z[1]=$[1]),z[2]<$[0]&&(z[2]=$[0]),z[3]<$[1]&&(z[3]=$[1])}),z}Zl.default=Zl;var Bc=Zl,Vs=y(1449);function wu(I){return typeof I=="number"}var ys=2*Math.PI*6378137/2;function vl(I,z){var $=(0,sa.Z)(z,4),ee=$[0],ge=$[1],xe=$[2],gt=$[3];return I.lng>ee&&I.lng<=xe&&I.lat>ge&&I.lat<=gt}function Ec(I){var z=[1/0,1/0,-1/0,-1/0];return I.forEach(function($){var ee=$.coordinates;Sc(z,ee)}),z}function Sc(I,z){return Array.isArray(z[0])?z.forEach(function($){Sc(I,$)}):(I[0]>z[0]&&(I[0]=z[0]),I[1]>z[1]&&(I[1]=z[1]),I[2]<z[0]&&(I[2]=z[0]),I[3]<z[1]&&(I[3]=z[1])),I}function Ul(I,z){return gl(I,z)}function gl(I,z){return Array.isArray(I[0])?I.map(function($){return gl($,z)}):z(I)}function qc(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};I=rr(I,z);var ee=I[0],ge=I[1],xe=ee*ys/180,gt=Math.log(Math.tan((90+ge)*Math.PI/360))/(Math.PI/180);return gt=gt*ys/180,$.enable&&(xe=Number(xe.toFixed($.decimal)),gt=Number(gt.toFixed($.decimal))),I.length===3?[xe,gt,I[2]]:[xe,gt]}function ic(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,$=I[0],ee=I[1],ge=$/ys*180,xe=ee/ys*180;return xe=180/Math.PI*(2*Math.atan(Math.exp(xe*Math.PI/180))-Math.PI/2),z!=null&&(ge=Number(ge.toFixed(z)),xe=Number(xe.toFixed(z))),I.length===3?[ge,xe,I[2]]:[ge,xe]}function In(I){if(I==null)throw new Error("lng is required");return(I>180||I<-180)&&(I=I%360,I>180&&(I=-360+I),I<-180&&(I=360+I),I===0&&(I=0)),I}function pr(I){if(I==null)throw new Error("lat is required");return(I>90||I<-90)&&(I=I%180,I>90&&(I=-180+I),I<-90&&(I=180+I),I===0&&(I=0)),I}function rr(I,z){if(z===!1)return I;var $=In(I[0]),ee=pr(I[1]);return ee>85&&(ee=85),ee<-85&&(ee=-85),I.length===3?[$,ee,I[2]]:[$,ee]}function gi(I){var z=85.0511287798,$=Math.max(Math.min(z,I[1]),-z),ee=256<<20,ge=Math.PI/180,xe=I[0]*ge,gt=$*ge;gt=Math.log(Math.tan(Math.PI/4+gt/2));var Ft=.5/Math.PI,Sn=.5,Mt=-.5/Math.PI;return ge=.5,xe=ee*(Ft*xe+Sn),gt=ee*(Mt*gt+ge),[Math.floor(xe),Math.floor(gt)]}function Ca(I){var z=.5/Math.PI,$=.5,ee=-.5/Math.PI,ge=.5,xe=256<<20,gt=_slicedToArray(I,2),Ft=gt[0],Sn=gt[1];Ft=(Ft/xe-$)/z,Sn=(Sn/xe-ge)/ee,Sn=(Math.atan(Math.pow(Math.E,Sn))-Math.PI/4)*2,ge=Math.PI/180;var Mt=Sn/ge,En=Ft/ge;return[En,Mt]}function io(I,z){var $=85.0511287798,ee=Math.PI/180,ge=6378137;return z=Math.max(Math.min($,z),-$),I*=ee,z*=ee,z=Math.log(Math.tan(Math.PI/4+z/2)),[I*ge,z*ge]}function Vo(I,z){var $=Math.PI/180,ee=6378137,ge=I/ee/$,xe=2*(Math.atan(Math.exp(z/ee))-Math.PI/4)/$;return[ge,xe]}function _o(I,z,$){var ee=(0,Vs.Ht)(z[1]-I[1]),ge=(0,Vs.Ht)(z[0]-I[0]),xe=(0,Vs.Ht)(I[1]),gt=(0,Vs.Ht)(z[1]),Ft=Math.pow(Math.sin(ee/2),2)+Math.pow(Math.sin(ge/2),2)*Math.cos(xe)*Math.cos(gt);return(0,Vs.DL)(2*Math.atan2(Math.sqrt(Ft),Math.sqrt(1-Ft)),$="meters")}function zl(I){var z=Math.PI/180,$=85.0511287798,ee=6378137,ge=Math.max(Math.min($,I[1]),-$),xe=Math.sin(ge*z),gt=ee*I[0]*z,Ft=ee*Math.log((1+xe)/(1-xe))/2;return[gt,Ft]}function Tc(I,z){var $=Math.abs(I[1][1]-I[0][1])*z,ee=Math.abs(I[1][0]-I[0][0])*z;return[[I[0][0]-ee,I[0][1]-$],[I[1][0]+ee,I[1][1]+$]]}function Ds(I,z){return I[0][0]<=z[0][0]&&I[0][1]<=z[0][1]&&I[1][0]>=z[1][0]&&I[1][1]>=z[1][1]}function Uu(I){return[[I[0],I[1]],[I[2],I[3]]]}function rl(I){var z=Mu(I,[0,0]);return[I[0]/z,I[1]/z]}function Mu(I,z){return Math.sqrt(Math.pow(I[0]-z[0],2)+Math.pow(I[1]-z[1],2))}function ml(I,z){return I[0]*z[0]+I[1]*z[1]}function il(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])}function po(I,z){return Math.acos(ml(I,z)/(il(I)*il(z)))*180/Math.PI}function yl(I,z){return z[0]>0?z[1]>0?90-Math.atan(z[1]/z[0])*180/Math.PI:90+Math.atan(-z[1]/z[0])*180/Math.PI:z[1]<0?180+(90-Math.atan(z[1]/z[0])*180/Math.PI):270+Math.atan(z[1]/-z[0])*180/Math.PI}function Zc(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!I||I.length<2)){for(var $=[0,1],ee=0,ge=[],xe=0;xe<I.length-1;xe++){var gt=I[xe],Ft=I[xe+1],Sn=Mu(gt,Ft);ee+=Sn;var Mt=[gt[0]-Ft[0],gt[1]-Ft[1]],En=yl($,Mt);if(xe>0){var lr=ge[xe-1].rotation;lr-En>360-lr+En&&(En=En+360)}ge.push({start:gt,end:Ft,dis:Sn,rotation:En,duration:0})}return ge.map(function(Di){Di.duration=z*(Di.dis/ee)}),ge}}function zu(I){if(wu(I[0]))return I;if(wu(I[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(wu(I[0][0][0])){var z=I,$=0,ee=0,ge=0;return z.forEach(function(xe){xe.forEach(function(gt){$+=gt[0],ee+=gt[1],ge++})}),[$/ge,ee/ge,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function _s(I){for(var z=I[0],$=I[1],ee=I[0],ge=I[1],xe=0,gt=0,Ft=0,Sn=0;Sn<I.length;Sn+=2){var Mt=I[Sn],En=I[Sn+1];Mt&&En&&(z=Math.max(Mt,z),$=Math.max(En,$),ee=Math.min(Mt,ee),ge=Math.min(En,ge),xe+=Mt,gt+=En,Ft++)}return{center:[xe/Ft,gt/Ft],radius:Math.sqrt(Math.pow(z-ee,2)+Math.pow($-ge,2))/2}}function pu(I){return Bc((0,Vs.uf)([(0,Vs.Tu)(I)]))}function al(I){var z=131,$=137,ee=0;I+="x";for(var ge=Math.floor(9007199254740991/$),xe=0;xe<I.length;xe++)ee>ge&&(ee=Math.floor(ee/$)),ee=ee*z+I.charCodeAt(xe);return ee}function vu(I){I=I.toString();for(var z=5381,$=I.length;$;)z=z*33^I.charCodeAt(--$);return z>>>0}function os(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var z=Math.random()*16|0,$=I==="x"?z:z&3|8;return $.toString(16)})}var Gs=function(I){return I["GAODE1.x"]="GAODE1.x",I["GAODE2.x"]="GAODE2.x",I.MAPBOX="MAPBOX",I.DEFAULT="DEFAUlTMAP",I.SIMPLE="SIMPLE",I.GLOBEL="GLOBEL",I}({});function Lo(I,z,$,ee,ge){var xe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,gt=arguments.length>6?arguments[6]:void 0,Ft=$;return gt&&(Ft=Math.round($*(xe-1))/(xe-1)),ee?No(I,z,Ft,ee,ge):No(I,z,Ft,.314,ge)}function gu(I,z){var $=1-z;return(I[0]*$+I[1]*z)*$+(I[1]*$+I[2]*z)*z}function Ms(I,z){return Math.sqrt(Math.pow(I[0]-z[0],2)+Math.pow(I[1]-z[1],2))}function ou(I,z,$){var ee=[z[0]-I[0],z[1]-I[1]],ge=Ms(ee,[0,0]),xe=Math.atan2(ee[1],ee[0]),gt=ge/2/Math.cos($),Ft=xe+$,Sn=[gt*Math.cos(Ft)+I[0],gt*Math.sin(Ft)+I[1]];return Sn}function No(I,z,$,ee,ge){if(ge===Version["GAODE2.x"]){var xe=amap2Project(I[0],I[1]),gt=amap2Project(z[0],z[1]),Ft=ou(xe,gt,ee),Sn=[xe[0],Ft[0],gt[0]],Mt=[xe[1],Ft[1],gt[1]];return[].concat(_toConsumableArray(amap2UnProject(gu(Sn,$),gu(Mt,$))),[0])}else{var En=ou(I,z,ee),lr=[I[0],En[0],z[0]],Di=[I[1],En[1],z[1]];return[gu(lr,$),gu(Di,$),0]}}function qo(I,z,$,ee,ge){var xe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,gt=arguments.length>6?arguments[6]:void 0,Ft=$;return gt&&(Ft=Math.round($*29)/29),jl(I,z,Ft,ge)}function ol(I,z){var $=[z[0]-I[0],z[1]-I[1]],ee=calDistance($,[0,0]),ge=Math.atan2($[1],$[0]),xe=.314,gt=ee/2/Math.cos(xe),Ft=ge+xe,Sn=[gt*Math.cos(Ft)+I[0],gt*Math.sin(Ft)+I[1]];return Sn}function bs(I,z){var $=1-z;return(I[0]*$+I[1]*z)*$+(I[1]*$+I[2]*z)*z}function $l(I,z){var $=[I[0]-z[0],I[1]-z[1]],ee=[Math.sin($[0]/2),Math.sin($[1]/2)],ge=ee[1]*ee[1]+Math.cos(I[1])*Math.cos(z[1])*ee[0]*ee[0];return 2*Math.atan2(Math.sqrt(ge),Math.sqrt(1-ge))}function jl(I,z,$,ee){var ge=[degreesToRadians(I[0]),degreesToRadians(I[1])],xe=[degreesToRadians(z[0]),degreesToRadians(z[1])];if(ee==="GAODE2.x"){var gt=ol(ge,xe),Ft=[ge[0],gt[0],xe[0]],Sn=[ge[1],gt[1],xe[1]];return[bs(Ft,$),bs(Sn,$),0]}else{var Mt=$l(ge,xe);if(Math.abs(Mt-Math.PI)<.001)return[(1-$)*ge[0]+$*xe[0],(1-$)*ge[1]+$*xe[1]];var En=Math.sin((1-$)*Mt)/Math.sin(Mt),lr=Math.sin($*Mt)/Math.sin(Mt),Di=[Math.sin(ge[0]),Math.sin(ge[1])],Zi=[Math.cos(ge[0]),Math.cos(ge[1])],Ri=[Math.sin(xe[0]),Math.sin(xe[1])],ki=[Math.cos(xe[0]),Math.cos(xe[1])],Ui=En*Zi[1]*Zi[0]+lr*ki[1]*ki[0],yi=En*Zi[1]*Di[0]+lr*ki[1]*Ri[0],na=En*Di[1]+lr*Ri[1];return[radiansToDegrees(Math.atan2(yi,Ui)),radiansToDegrees(Math.atan2(na,Math.sqrt(Ui*Ui+yi*yi)))]}}function Uc(I,z){for(var $=0,ee=[],ge=0;ge<I.length-1;ge++){var xe=I[ge],gt=I[ge+1],Ft=Vl(xe,gt),Sn=$;$+=Ft,ee.push({p1:xe,p2:gt,totalDistance:$,distance:Ft,lastTotalDistance:Sn})}for(var Mt=$*z,En,lr,Di=0,Zi=ee;Di<Zi.length;Di++){var Ri=Zi[Di],ki=Ri.totalDistance;if(ki>Mt){var Ui=Ri.p1,yi=Ri.p2,na=(Mt-Ri.lastTotalDistance)/Ri.distance,Oa=ff(yi,Ui,na);En=Oa[0],lr=Oa[1];break}}return{lng:En,lat:lr,height:0}}function ff(I,z,$){return[I[0]*$+z[0]*(1-$),I[1]*$+z[1]*(1-$)]}function Vl(I,z){return Math.sqrt(Math.pow(I[0]-z[0],2)+Math.pow(I[1]-z[1],2))}function _l(I,z){var $=z.featureId,ee=I.data.dataArray;return typeof $=="number"&&(ee=ee.filter(function(ge){var xe=ge.id;return xe===$})),ee.map(function(ge){var xe=zc(ge,z);return _objectSpread(_objectSpread({},ge),xe)})}function bl(I,z){return new Promise(function($){I.inited?$(_l(I,z)):I.once("update",function(){$(_l(I,z))})})}function zc(I,z){var $=z.offset,ee=z.shape,ge=z.thetaOffset,xe=z.mapVersion,gt=z.segmentNumber,Ft=gt===void 0?30:gt,Sn=z.autoFit,Mt=Sn===void 0?!0:Sn,En=I.coordinates;if(ee==="line")return pathLineAtOffset(En,$);var lr=En[0],Di=En[1],Zi=typeof ge=="string"?I[ge]||0:ge,Ri;switch(ee){case"arc":Ri=arcLineAtOffset;break;case"greatcircle":Ri=greatCircleLineAtOffset;break;default:Ri=arcLineAtOffset}var ki=Ri(lr,Di,$,Zi,xe,Ft,Mt),Ui=_slicedToArray(ki,3),yi=Ui[0],na=Ui[1],Oa=Ui[2];return{lng:yi,lat:na,height:Oa}}var ac=function(){function I(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,$=arguments.length>1?arguments[1]:void 0;(0,g.Z)(this,I),this.limit=z,this.destroy=$||this.defaultDestroy,this.order=[],this.clear()}return(0,d.Z)(I,[{key:"clear",value:function(){var $=this;this.order.forEach(function(ee){$.delete(ee)}),this.cache={},this.order=[]}},{key:"get",value:function($){var ee=this.cache[$];return ee&&(this.deleteOrder($),this.appendOrder($)),ee}},{key:"set",value:function($,ee){this.cache[$]?(this.delete($),this.cache[$]=ee,this.appendOrder($)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[$]=ee,this.appendOrder($))}},{key:"delete",value:function($){var ee=this.cache[$];ee&&(this.deleteCache($),this.deleteOrder($),this.destroy(ee,$))}},{key:"deleteCache",value:function($){delete this.cache[$]}},{key:"deleteOrder",value:function($){var ee=this.order.findIndex(function(ge){return ge===$});ee>=0&&this.order.splice(ee,1)}},{key:"appendOrder",value:function($){this.order.push($)}},{key:"defaultDestroy",value:function($,ee){return null}}]),I}();function Ac(I){if(I.length===0)throw new Error("max requires at least one data point");for(var z=I[0],$=1;$<I.length;$++)I[$]>z&&(z=I[$]);return z*1}function Cc(I){if(I.length===0)throw new Error("min requires at least one data point");for(var z=I[0],$=1;$<I.length;$++)I[$]<z&&(z=I[$]);return z*1}function Bo(I){if(I.length===0)return 0;for(var z=I[0]*1,$=1;$<I.length;$++)z+=I[$]*1;return z}function Qo(I){if(I.length===0)throw new Error("mean requires at least one data point");return Bo(I)/I.length}function oc(I){if(I.length===0)throw new Error("mean requires at least one data point");if(I.length<3)return I[0];I.sort();for(var z=I[0],$=NaN,ee=0,ge=1,xe=1;xe<I.length+1;xe++)I[xe]!==z?(ge>ee&&(ee=ge,$=z),ge=1,z=I[xe]):ge++;return $*1}var xl={min:Cc,max:Ac,mean:Qo,sum:Bo,mode:oc};function wc(I,z){return I.map(function($){return $[z]})}function Ou(I,z){return xl[I](z)}var su=y(15861),no=y(4942),sl=y(64687),Zo=y.n(sl);function uu(I,z){z===void 0&&(z={});var $=Number(I[0]),ee=Number(I[1]),ge=Number(I[2]),xe=Number(I[3]);if(I.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var gt=[$,ee],Ft=[$,xe],Sn=[ge,xe],Mt=[ge,ee];return(0,Vs.yu)([[gt,Mt,Sn,Ft,gt]],z.properties,{bbox:I,id:z.id})}var ul=y(26729),El=y.n(ul),lu=function(I){return I.Realtime="realtime",I.Overlap="overlap",I.Replace="replace",I}({}),Ns=function(I){return I.Loading="Loading",I.Loaded="Loaded",I.Failure="Failure",I.Cancelled="Cancelled",I}({}),Gl=0,le=1,X=2;function O(I){I.forEach(function(z){z.isCurrent&&(z.isVisible=z.isLoaded)})}function j(I){I.forEach(function(z){z.properties.state=Gl}),I.forEach(function(z){z.isCurrent&&!Re(z)&&se(z)}),I.forEach(function(z){z.isVisible=Boolean(z.properties.state&X)})}function Q(I){I.forEach(function($){$.properties.state=Gl}),I.forEach(function($){$.isCurrent&&Re($)});var z=I.slice().sort(function($,ee){return $.z-ee.z});z.forEach(function($){$.isVisible=Boolean($.properties.state&X),$.children.length&&($.isVisible||$.properties.state&le)?$.children.forEach(function(ee){ee.properties.state=le}):$.isCurrent&&se($)})}function Re(I){for(;I;){if(I.isLoaded)return I.properties.state|=X,!0;I=I.parent}return!1}function se(I){I.children.forEach(function(z){z.isLoaded?z.properties.state|=X:se(z)})}var At,Rt=256,Ut=[-1/0,-1/0,1/0,1/0],Zn=.2,gr=5,ni=(At={},(0,no.Z)(At,lu.Realtime,O),(0,no.Z)(At,lu.Overlap,j),(0,no.Z)(At,lu.Replace,Q),At),Vr=function(){};function wi(I,z,$){var ee=Math.floor((I+180)/360*Math.pow(2,$)),ge=Math.floor((1-Math.log(Math.tan(z*Math.PI/180)+1/Math.cos(z*Math.PI/180))/Math.PI)/2*Math.pow(2,$));return[ee,ge]}function ji(I,z,$){var ee=I/Math.pow(2,$)*360-180,ge=Math.PI-2*Math.PI*z/Math.pow(2,$),xe=180/Math.PI*Math.atan(.5*(Math.exp(ge)-Math.exp(-ge)));return[ee,xe]}var da=function(z,$,ee){var ge=ji(z,$,ee),xe=(0,sa.Z)(ge,2),gt=xe[0],Ft=xe[1],Sn=ji(z+1,$+1,ee),Mt=(0,sa.Z)(Sn,2),En=Mt[0],lr=Mt[1];return[gt,lr,En,Ft]};function wa(I){var z=I.zoom,$=I.latLonBounds,ee=I.maxZoom,ge=ee===void 0?1/0:ee,xe=I.minZoom,gt=xe===void 0?0:xe,Ft=I.zoomOffset,Sn=Ft===void 0?0:Ft,Mt=I.extent,En=Mt===void 0?Ut:Mt,lr=Math.ceil(z)+Sn;if(Number.isFinite(gt)&&lr<gt)return[];Number.isFinite(ge)&&lr>ge&&(lr=ge);for(var Di=(0,sa.Z)($,4),Zi=Di[0],Ri=Di[1],ki=Di[2],Ui=Di[3],yi=[Math.max(Zi,En[0]),Math.max(Ri,En[1]),Math.min(ki,En[2]),Math.min(Ui,En[3])],na=[],Oa=wi(yi[0],yi[1],lr),za=(0,sa.Z)(Oa,2),Xo=za[0],cs=za[1],Bs=wi(yi[2],yi[3],lr),So=(0,sa.Z)(Bs,2),Pa=So[0],co=So[1],Do=Xo;Do<=Pa;Do++)for(var Ws=co;Ws<=cs;Ws++)na.push({x:Do,y:Ws,z:lr});var Is=(Pa+Xo)/2,Xs=(cs+co)/2,kl=function(Yu,as){return Math.abs(Yu-Is)+Math.abs(as-Xs)};return na.sort(function(Jo,Yu){return kl(Jo.x,Jo.y)-kl(Yu.x,Yu.y)}),na}var to=function(z,$,ee){var ge=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,xe=Math.pow(2,ee),gt=xe-1,Ft=xe,Sn=z,Mt=$;return ge&&(Sn<0?Sn=Sn+Ft:Sn>gt&&(Sn=Sn%Ft)),{warpX:Sn,warpY:Mt}};function va(I){var z=ba();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function ba(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var ao=function(I){(0,x.Z)($,I);var z=va($);function $(ee){var ge;(0,g.Z)(this,$),ge=z.call(this),(0,no.Z)((0,ve.Z)(ge),"tileSize",256),(0,no.Z)((0,ve.Z)(ge),"isVisible",!1),(0,no.Z)((0,ve.Z)(ge),"isCurrent",!1),(0,no.Z)((0,ve.Z)(ge),"isVisibleChange",!1),(0,no.Z)((0,ve.Z)(ge),"loadedLayers",0),(0,no.Z)((0,ve.Z)(ge),"isLayerLoaded",!1),(0,no.Z)((0,ve.Z)(ge),"isLoad",!1),(0,no.Z)((0,ve.Z)(ge),"isChildLoad",!1),(0,no.Z)((0,ve.Z)(ge),"parent",null),(0,no.Z)((0,ve.Z)(ge),"children",[]),(0,no.Z)((0,ve.Z)(ge),"data",null),(0,no.Z)((0,ve.Z)(ge),"properties",{}),(0,no.Z)((0,ve.Z)(ge),"loadDataId",0);var xe=ee.x,gt=ee.y,Ft=ee.z,Sn=ee.tileSize,Mt=ee.warp,En=Mt===void 0?!0:Mt;return ge.x=xe,ge.y=gt,ge.z=Ft,ge.warp=En||!0,ge.tileSize=Sn,ge}return(0,d.Z)($,[{key:"isLoading",get:function(){return this.loadStatus===Ns.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Ns.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Ns.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Ns.Cancelled}},{key:"isDone",get:function(){return[Ns.Loaded,Ns.Cancelled,Ns.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return da(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var ge=(0,sa.Z)(this.bounds,4),xe=ge[0],gt=ge[1],Ft=ge[2],Sn=ge[3],Mt=[(Ft-xe)/2,(Sn-gt)/2],En=uu(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:Mt,meta:`
      `.concat(this.key,`
      `)}});return En}},{key:"key",get:function(){var ge="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return ge}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var ee=(0,su.Z)(Zo().mark(function xe(gt){var Ft,Sn,Mt,En,lr,Di,Zi,Ri,ki,Ui,yi,na,Oa,za,Xo,cs,Bs;return Zo().wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return Ft=gt.getData,Sn=gt.onLoad,Mt=gt.onError,this.loadDataId++,En=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Ns.Loading,lr=null,Pa.prev=7,Zi=this.x,Ri=this.y,ki=this.z,Ui=this.bounds,yi=this.tileSize,na=this.warp,Oa=to(Zi,Ri,ki,na),za=Oa.warpX,Xo=Oa.warpY,cs=this.abortController.signal,Bs={x:za,y:Xo,z:ki,bounds:Ui,tileSize:yi,signal:cs,warp:na},Pa.next=14,Ft(Bs,this);case 14:lr=Pa.sent,Pa.next=20;break;case 17:Pa.prev=17,Pa.t0=Pa.catch(7),Di=Pa.t0;case 20:if(En===this.loadDataId){Pa.next=22;break}return Pa.abrupt("return");case 22:if(!(this.isCancelled&&!lr)){Pa.next=24;break}return Pa.abrupt("return");case 24:if(!(Di||!lr)){Pa.next=28;break}return this.loadStatus=Ns.Failure,Mt(Di,this),Pa.abrupt("return");case 28:this.loadStatus=Ns.Loaded,this.data=lr,Sn(this);case 31:case"end":return Pa.stop()}},xe,this,[[7,17]])}));function ge(xe){return ee.apply(this,arguments)}return ge}()},{key:"reloadData",value:function(ge){this.isLoading&&this.abortLoad(),this.loadData(ge)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Ns.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),$}(ul.EventEmitter),Mo=function(z,$){var ee=Uu(z),ge=Tc(ee,$),xe=360*3-180,gt=85.0511287798065,Ft=[Math.max(ge[0][0],-xe),Math.max(ge[0][1],-gt),Math.min(ge[1][0],xe),Math.min(ge[1][1],gt)];return Ft},so=function(z,$){var ee=Uu(z),ge=Uu($),xe=Ds(ee,ge);return xe};function ka(I,z){var $=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!$){if(Array.isArray(I)||($=zo(I))||z&&I&&typeof I.length=="number"){$&&(I=$);var ee=0,ge=function(){};return{s:ge,n:function(){return ee>=I.length?{done:!0}:{done:!1,value:I[ee++]}},e:function(Mt){throw Mt},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe=!0,gt=!1,Ft;return{s:function(){$=$.call(I)},n:function(){var Mt=$.next();return xe=Mt.done,Mt},e:function(Mt){gt=!0,Ft=Mt},f:function(){try{!xe&&$.return!=null&&$.return()}finally{if(gt)throw Ft}}}}function zo(I,z){if(I){if(typeof I=="string")return fi(I,z);var $=Object.prototype.toString.call(I).slice(8,-1);if($==="Object"&&I.constructor&&($=I.constructor.name),$==="Map"||$==="Set")return Array.from(I);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return fi(I,z)}}function fi(I,z){(z==null||z>I.length)&&(z=I.length);for(var $=0,ee=new Array(z);$<z;$++)ee[$]=I[$];return ee}function Go(I){var z=mu();return function(){var ee=(0,u.Z)(I),ge;if(z){var xe=(0,u.Z)(this).constructor;ge=Reflect.construct(ee,arguments,xe)}else ge=ee.apply(this,arguments);return(0,v.Z)(this,ge)}}function mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}var bo=function(I){(0,x.Z)($,I);var z=Go($);function $(ee){var ge;return(0,g.Z)(this,$),ge=z.call(this),(0,no.Z)((0,ve.Z)(ge),"currentTiles",[]),(0,no.Z)((0,ve.Z)(ge),"cacheTiles",new Map),(0,no.Z)((0,ve.Z)(ge),"throttleUpdate",(0,jo.throttle)(function(xe,gt){ge.update(xe,gt)},16)),(0,no.Z)((0,ve.Z)(ge),"onTileLoad",function(xe){ge.emit("tile-loaded",xe),ge.updateTileVisible()}),(0,no.Z)((0,ve.Z)(ge),"onTileError",function(xe,gt){ge.emit("tile-error",{error:xe,tile:gt}),ge.updateTileVisible()}),(0,no.Z)((0,ve.Z)(ge),"onTileUnload",function(xe){ge.emit("tile-unload",xe)}),ge.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Ut,getTileData:Vr,warp:!0,updateStrategy:lu.Overlap},ge.updateOptions(ee),ge}return(0,d.Z)($,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(ge){return ge.isDone})}},{key:"tiles",get:function(){var ge=Array.from(this.cacheTiles.values()).sort(function(xe,gt){return xe.z-gt.z});return ge}},{key:"updateOptions",value:function(ge){var xe=ge.minZoom===void 0?this.options.minZoom:Math.ceil(ge.minZoom),gt=ge.maxZoom===void 0?this.options.maxZoom:Math.floor(ge.maxZoom);this.options=(0,M.Z)((0,M.Z)((0,M.Z)({},this.options),ge),{},{minZoom:xe,maxZoom:gt})}},{key:"update",value:function(ge,xe){var gt=this,Ft=Math.max(0,Math.ceil(ge));if(!(this.lastViewStates&&this.lastViewStates.zoom===Ft&&so(this.lastViewStates.latLonBoundsBuffer,xe))){var Sn=Mo(xe,Zn);this.lastViewStates={zoom:Ft,latLonBounds:xe,latLonBoundsBuffer:Sn};var Mt=!1,En=this.getTileIndices(Ft,Sn).filter(function(lr){return gt.options.warp||lr.x>=0&&lr.x<Math.pow(2,Ft)});this.currentTiles=En.map(function(lr){var Di=lr.x,Zi=lr.y,Ri=lr.z,ki=gt.getTile(Di,Zi,Ri);if(ki){var Ui,yi,na=((Ui=ki)===null||Ui===void 0?void 0:Ui.isFailure)||((yi=ki)===null||yi===void 0?void 0:yi.isCancelled);return na&&ki.loadData({getData:gt.options.getTileData,onLoad:gt.onTileLoad,onError:gt.onTileError}),ki}return ki=gt.createTile(Di,Zi,Ri),Mt=!0,ki}),Mt&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var ge=ka(this.cacheTiles),xe;try{for(ge.s();!(xe=ge.n()).done;){var gt=(0,sa.Z)(xe.value,2),Ft=gt[0],Sn=gt[1];if(!this.currentTiles.includes(Sn)){this.cacheTiles.delete(Ft),this.onTileUnload(Sn);return}this.onTileUnload(Sn),Sn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(Mt){ge.e(Mt)}finally{ge.f()}}},{key:"reloadTileById",value:function(ge,xe,gt){var Ft=this.cacheTiles.get("".concat(xe,",").concat(gt,",").concat(ge));Ft&&(this.onTileUnload(Ft),Ft.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(ge,xe,gt){var Ft=this.getTileByLngLat(ge,xe,gt);Ft&&this.reloadTileById(Ft.z,Ft.x,Ft.y)}},{key:"reloadTileByExtent",value:function(ge,xe){var gt=this,Ft=this.getTileIndices(xe,ge);Ft.forEach(function(Sn){gt.reloadTileById(Sn.z,Sn.x,Sn.y)})}},{key:"pruneRequests",value:function(){var ge=[],xe=ka(this.cacheTiles.values()),gt;try{for(xe.s();!(gt=xe.n()).done;){var Ft=gt.value;Ft.isLoading&&!Ft.isCurrent&&!Ft.isVisible&&ge.push(Ft)}}catch(Mt){xe.e(Mt)}finally{xe.f()}for(;ge.length>0;){var Sn=ge.shift();Sn.abortLoad()}}},{key:"getTileByLngLat",value:function(ge,xe,gt){var Ft=this.options.zoomOffset,Sn=Math.ceil(gt)+Ft,Mt=wi(ge,xe,Sn),En=this.tiles.filter(function(lr){return lr.key==="".concat(Mt[0],"_").concat(Mt[1],"_").concat(Sn)});return En[0]}},{key:"clear",value:function(){var ge=ka(this.cacheTiles.values()),xe;try{for(ge.s();!(xe=ge.n()).done;){var gt=xe.value;gt.isLoading?gt.abortLoad():this.onTileUnload(gt)}}catch(Ft){ge.e(Ft)}finally{ge.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var ge=this.options.updateStrategy,xe=new Map,gt=ka(this.cacheTiles.values()),Ft;try{for(gt.s();!(Ft=gt.n()).done;){var Sn=Ft.value;xe.set(Sn.key,Sn.isVisible),Sn.isCurrent=!1,Sn.isVisible=!1}}catch(Ri){gt.e(Ri)}finally{gt.f()}var Mt=ka(this.currentTiles),En;try{for(Mt.s();!(En=Mt.n()).done;){var lr=En.value;lr.isCurrent=!0,lr.isVisible=!0}}catch(Ri){Mt.e(Ri)}finally{Mt.f()}var Di=Array.from(this.cacheTiles.values());typeof ge=="function"?ge(Di):ni[ge](Di);var Zi=!1;Array.from(this.cacheTiles.values()).forEach(function(Ri){Ri.isVisible!==xe.get(Ri.key)?(Ri.isVisibleChange=!0,Zi=!0):Ri.isVisibleChange=!1}),Zi&&this.emit("tile-update")}},{key:"getTileIndices",value:function(ge,xe){var gt=this.options,Ft=gt.tileSize,Sn=gt.extent,Mt=gt.zoomOffset,En=Math.floor(this.options.maxZoom),lr=Math.ceil(this.options.minZoom),Di=wa({maxZoom:En,minZoom:lr,zoomOffset:Mt,tileSize:Ft,zoom:ge,latLonBounds:xe,extent:Sn});return Di}},{key:"getTileId",value:function(ge,xe,gt){var Ft="".concat(ge,",").concat(xe,",").concat(gt);return Ft}},{key:"getTile",value:function(ge,xe,gt){var Ft=this.getTileId(ge,xe,gt),Sn=this.cacheTiles.get(Ft);return Sn}},{key:"createTile",value:function(ge,xe,gt){var Ft=this.getTileId(ge,xe,gt),Sn=new ao({x:ge,y:xe,z:gt,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Ft,Sn),Sn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Sn}},{key:"resizeCacheTiles",value:function(){var ge=gr*this.currentTiles.length,xe=this.cacheTiles.size>ge;if(xe){var gt=ka(this.cacheTiles),Ft;try{for(gt.s();!(Ft=gt.n()).done;){var Sn=(0,sa.Z)(Ft.value,2),Mt=Sn[0],En=Sn[1];if(!En.isVisible&&!this.currentTiles.includes(En)&&(this.cacheTiles.delete(Mt),this.onTileUnload(En)),this.cacheTiles.size<=ge)break}}catch(lr){gt.e(lr)}finally{gt.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var ge=ka(this.cacheTiles.values()),xe;try{for(ge.s();!(xe=ge.n()).done;){var gt=xe.value;gt.parent=null,gt.children.length=0}}catch(lr){ge.e(lr)}finally{ge.f()}var Ft=ka(this.cacheTiles.values()),Sn;try{for(Ft.s();!(Sn=Ft.n()).done;){var Mt=Sn.value,En=this.getNearestAncestor(Mt.x,Mt.y,Mt.z);Mt.parent=En,En!=null&&En.children&&En.children.push(Mt)}}catch(lr){Ft.e(lr)}finally{Ft.f()}}},{key:"getNearestAncestor",value:function(ge,xe,gt){for(;gt>this.options.minZoom;){ge=Math.floor(ge/2),xe=Math.floor(xe/2),gt=gt-1;var Ft=this.getTile(ge,xe,gt);if(Ft)return Ft}return null}}]),$}(El());function ss(I){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(I)}function Pu(I){var z=[],$=/\{([a-z])-([a-z])\}/.exec(I);if($){var ee=$[1].charCodeAt(0),ge=$[2].charCodeAt(0),xe;for(xe=ee;xe<=ge;++xe)z.push(I.replace($[0],String.fromCharCode(xe)));return z}if($=/\{(\d+)-(\d+)\}/.exec(I),$){for(var gt=parseInt($[2],10),Ft=parseInt($[1],10);Ft<=gt;Ft++)z.push(I.replace($[0],Ft.toString()));return z}return z.push(I),z}function yu(I,z){if(!I||!I.length)throw new Error("url is not allowed to be empty");var $=z.x,ee=z.y,ge=z.z,xe=Pu(I),gt=Math.abs($+ee)%xe.length,Ft=xe[gt];return Ft.replace(/\{x\}/g,$.toString()).replace(/\{y\}/g,ee.toString()).replace(/\{z\}/g,ge.toString()).replace(/\{bbox\}/g,da($,ee,ge).join(",")).replace(/\{-y\}/g,(Math.pow(2,ge)-ee-1).toString())}function cu(I,z){var $=z.x,ee=z.y,ge=z.z,xe=z.layer,gt=z.version,Ft=gt===void 0?"1.0.0":gt,Sn=z.style,Mt=Sn===void 0?"default":Sn,En=z.format,lr=z.service,Di=lr===void 0?"WMTS":lr,Zi=z.tileMatrixset,Ri="".concat(I,"&SERVICE=").concat(Di,"&REQUEST=GetTile&VERSION=").concat(Ft,"&LAYER=").concat(xe,"&STYLE=").concat(Mt,"&TILEMATRIXSET=").concat(Zi,"&FORMAT=").concat(En,"&TILECOL=").concat($,"&TILEROW=").concat(ee,"&TILEMATRIX=").concat(ge);return Ri}function fu(I,z){if(!I)throw new Error(z||"web worker helper assertion failed.")}var Fo={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},Sl=Fo.self||Fo.window||{},$c=Fo.window||Fo.self||{},Ka=Fo.self||Fo.window||{},Qc=Fo.document||{},jc=typeof importScripts=="function",Oo=typeof window!="undefined"&&typeof window.orientation!="undefined",xs=function(){function I(z,$){var ee=this;this.name=z,this.workerThread=$,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(ge,xe){ee.resolve=ge,ee.reject=xe})}return I.prototype.postMessage=function(z,$){this.workerThread.postMessage({source:"Main thread",type:z,payload:$})},I.prototype.done=function(z){fu(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(z)},I.prototype.error=function(z){fu(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(z)},I}(),Hs=xs,Iu=new Map;function Hl(I){fu(I.source&&!I.url||!I.source&&I.url);var z=Iu.get(I.source||I.url);return z||(I.url&&(z=$u(I.url),Iu.set(I.url,z)),I.source&&(z=Wl(I.source),Iu.set(I.source,z))),fu(z),z}function $u(I){if(!I.startsWith("http"))return I;var z=Jc(I);return Wl(z)}function Wl(I){var z=new Blob([I],{type:"application/javascript"});return URL.createObjectURL(z)}function Jc(I){return`try {
  importScripts('`+I+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function Xl(I,z,$){z===void 0&&(z=!0);var ee=$||new Set;if(I){if(Tl(I))ee.add(I);else if(Tl(I.buffer))ee.add(I.buffer);else if(!ArrayBuffer.isView(I)){if(z&&typeof I=="object")for(var ge in I)Xl(I[ge],z,ee)}}return $===void 0?Array.from(ee):[]}function Tl(I){return I?I instanceof ArrayBuffer||typeof MessagePort!="undefined"&&I instanceof MessagePort||typeof ImageBitmap!="undefined"&&I instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&I instanceof OffscreenCanvas:!1}var _u=function(){},Al=function(){function I(z){this.terminated=!1,this.loadableURL="";var $=z.name,ee=z.source,ge=z.url;fu(ee||ge),this.name=$,this.source=ee,this.url=ge,this.onMessage=_u,this.onError=function(xe){return console.log(xe)},this.worker=this.createBrowserWorker()}return I.isSupported=function(){return typeof Worker!="undefined"},I.prototype.destroy=function(){this.onMessage=_u,this.onError=_u,this.worker.terminate(),this.terminated=!0},Object.defineProperty(I.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),I.prototype.postMessage=function(z,$){$=$||Xl(z),this.worker.postMessage(z,$)},I.prototype.getErrorFromErrorEvent=function(z){var $="Failed to load ";return $+="worker "+this.name+" from "+this.url+". ",z.message&&($+=z.message+" in "),z.lineno&&($+=":"+z.lineno+":"+z.colno),new Error($)},I.prototype.createBrowserWorker=function(){var z=this;this.loadableURL=Hl({source:this.source,url:this.url});var $=new Worker(this.loadableURL,{name:this.name});return $.onmessage=function(ee){ee.data?z.onMessage(ee.data):z.onError(new Error("No data received"))},$.onerror=function(ee){z.onError(z.getErrorFromErrorEvent(ee)),z.terminated=!0},$.onmessageerror=function(ee){return console.error("worker "+z.name+", message error: "+ee)},$},I}(),Ru=Al,Ho=function(){return Ho=Object.assign||function(I){for(var z,$=1,ee=arguments.length;$<ee;$++){z=arguments[$];for(var ge in z)Object.prototype.hasOwnProperty.call(z,ge)&&(I[ge]=z[ge])}return I},Ho.apply(this,arguments)},Cl=function(I,z,$,ee){function ge(xe){return xe instanceof $?xe:new $(function(gt){gt(xe)})}return new($||($=Promise))(function(xe,gt){function Ft(En){try{Mt(ee.next(En))}catch(lr){gt(lr)}}function Sn(En){try{Mt(ee.throw(En))}catch(lr){gt(lr)}}function Mt(En){En.done?xe(En.value):ge(En.value).then(Ft,Sn)}Mt((ee=ee.apply(I,z||[])).next())})},Mc=function(I,z){var $={label:0,sent:function(){if(xe[0]&1)throw xe[1];return xe[1]},trys:[],ops:[]},ee,ge,xe,gt;return gt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function Ft(Mt){return function(En){return Sn([Mt,En])}}function Sn(Mt){if(ee)throw new TypeError("Generator is already executing.");for(;$;)try{if(ee=1,ge&&(xe=Mt[0]&2?ge.return:Mt[0]?ge.throw||((xe=ge.return)&&xe.call(ge),0):ge.next)&&!(xe=xe.call(ge,Mt[1])).done)return xe;switch(ge=0,xe&&(Mt=[Mt[0]&2,xe.value]),Mt[0]){case 0:case 1:xe=Mt;break;case 4:return $.label++,{value:Mt[1],done:!1};case 5:$.label++,ge=Mt[1],Mt=[0];continue;case 7:Mt=$.ops.pop(),$.trys.pop();continue;default:if(xe=$.trys,!(xe=xe.length>0&&xe[xe.length-1])&&(Mt[0]===6||Mt[0]===2)){$=0;continue}if(Mt[0]===3&&(!xe||Mt[1]>xe[0]&&Mt[1]<xe[3])){$.label=Mt[1];break}if(Mt[0]===6&&$.label<xe[1]){$.label=xe[1],xe=Mt;break}if(xe&&$.label<xe[2]){$.label=xe[2],$.ops.push(Mt);break}xe[2]&&$.ops.pop(),$.trys.pop();continue}Mt=z.call(I,$)}catch(En){Mt=[6,En],ge=0}finally{ee=xe=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}},Yl=function(){function I(z){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=z.source,this.url=z.url,this.setProps(z)}return I.prototype.destroy=function(){this.idleQueue.forEach(function(z){return z.destroy()}),this.isDestroyed=!0},I.prototype.setProps=function(z){this.props=Ho(Ho({},this.props),z),z.name!==void 0&&(this.name=z.name),z.maxConcurrency!==void 0&&(this.maxConcurrency=z.maxConcurrency),z.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=z.maxMobileConcurrency),z.reuseWorkers!==void 0&&(this.reuseWorkers=z.reuseWorkers),z.onDebug!==void 0&&(this.onDebug=z.onDebug)},I.prototype.startJob=function(z,$,ee){return $===void 0&&($=function(ge,xe,gt){return ge.done(gt)}),ee===void 0&&(ee=function(ge,xe){return ge.error(xe)}),Cl(this,void 0,void 0,function(){var ge,xe=this;return Mc(this,function(gt){switch(gt.label){case 0:return ge=new Promise(function(Ft){return xe.jobQueue.push({name:z,onMessage:$,onError:ee,onStart:Ft}),xe}),this.startQueuedJob(),[4,ge];case 1:return[2,gt.sent()]}})})},I.prototype.startQueuedJob=function(){return Cl(this,void 0,void 0,function(){var z,$,ee;return Mc(this,function(ge){switch(ge.label){case 0:if(!this.jobQueue.length)return[2];if(z=this.getAvailableWorker(),!z)return[2];if($=this.jobQueue.shift(),!$)return[3,4];this.onDebug({message:"Starting job",name:$.name,backlog:this.jobQueue.length,workerThread:z}),ee=new Hs($.name,z),z.onMessage=function(xe){return $.onMessage(ee,xe.type,xe.payload)},z.onError=function(xe){return $.onError(ee,xe)},$.onStart(ee),ge.label=1;case 1:return ge.trys.push([1,,3,4]),[4,ee.result];case 2:return ge.sent(),[3,4];case 3:return this.returnWorkerToQueue(z),[7];case 4:return[2]}})})},I.prototype.returnWorkerToQueue=function(z){var $=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();$?(z.destroy(),this.count--):this.idleQueue.push(z),this.isDestroyed||this.startQueuedJob()},I.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var z=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new Ru({name:z,source:this.source,url:this.url})}return null},I.prototype.getMaxConcurrency=function(){return Oo?this.maxMobileConcurrency:this.maxConcurrency},I}(),ju=Yl,us=function(){return us=Object.assign||function(I){for(var z,$=1,ee=arguments.length;$<ee;$++){z=arguments[$];for(var ge in z)Object.prototype.hasOwnProperty.call(z,ge)&&(I[ge]=z[ge])}return I},us.apply(this,arguments)},Oc=function(I){var z=typeof Symbol=="function"&&Symbol.iterator,$=z&&I[z],ee=0;if($)return $.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&ee>=I.length&&(I=void 0),{value:I&&I[ee++],done:!I}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Vu=function(){function I(z){this.workerPools=new Map,this.props=us({},Vc),this.setProps(z),this.workerPools=new Map}return I.isSupported=function(){return Ru.isSupported()},I.getWorkerFarm=function(z){return z===void 0&&(z={}),I.workerFarm=I.workerFarm||new I({}),I.workerFarm.setProps(z),I.workerFarm},I.prototype.destroy=function(){var z,$;try{for(var ee=Oc(this.workerPools.values()),ge=ee.next();!ge.done;ge=ee.next()){var xe=ge.value;xe.destroy()}}catch(gt){z={error:gt}}finally{try{ge&&!ge.done&&($=ee.return)&&$.call(ee)}finally{if(z)throw z.error}}},I.prototype.setProps=function(z){var $,ee;this.props=us(us({},this.props),z);try{for(var ge=Oc(this.workerPools.values()),xe=ge.next();!xe.done;xe=ge.next()){var gt=xe.value;gt.setProps(this.getWorkerPoolProps())}}catch(Ft){$={error:Ft}}finally{try{xe&&!xe.done&&(ee=ge.return)&&ee.call(ge)}finally{if($)throw $.error}}},I.prototype.getWorkerPool=function(z){var $=z.name,ee=z.source,ge=z.url,xe=this.workerPools.get($);return xe||(xe=new ju({name:$,source:ee,url:ge}),xe.setProps(this.getWorkerPoolProps()),this.workerPools.set($,xe)),xe},I.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},I}(),ef=Vu,sc=new Map,ns=function(){function I(){}return Object.defineProperty(I,"onmessage",{set:function(z){self.onmessage=function($){if(Gc($)){var ee=$.data,ge=ee.type,xe=ee.payload;z(ge,xe)}}},enumerable:!1,configurable:!0}),I.addEventListener=function(z){var $=sc.get(z);$||($=function(ee){if(Gc(ee)){var ge=ee.data,xe=ge.type,gt=ge.payload;z(xe,gt)}}),self.addEventListener("message",$)},I.removeEventListener=function(z){var $=sc.get(z);sc.delete(z),self.removeEventListener("message",$)},I.postMessage=function(z,$){if(self){var ee={source:"Worker thread",type:z,payload:$},ge=Xl($);self.postMessage(ee,ge)}},I}(),bu=ns;function Gc(I){var z=I.type,$=I.data;return z==="message"&&$&&typeof $.source=="string"&&$.source==="Main thread"}function ll(I){return JSON.parse(tf(I))}function tf(I){var z=new Set;return JSON.stringify(I,function($,ee){if(typeof ee=="object"&&ee!==null){if(z.has(ee))try{return JSON.parse(JSON.stringify(ee))}catch(ge){return}z.add(ee)}return ee})}function uc(I){return""+I.name}function ku(I,z){z===void 0&&(z={});var $=z[I.id]||{},ee=I.name+".worker.js",ge=$.workerUrl;return z._workerType==="test"&&(ge=I.module+"/dist/"+ee),ge||(ge="https://unpkg.com/"+I.module+"/dist/"+ee),assert(ge),ge}var nf=function(I,z,$,ee){function ge(xe){return xe instanceof $?xe:new $(function(gt){gt(xe)})}return new($||($=Promise))(function(xe,gt){function Ft(En){try{Mt(ee.next(En))}catch(lr){gt(lr)}}function Sn(En){try{Mt(ee.throw(En))}catch(lr){gt(lr)}}function Mt(En){En.done?xe(En.value):ge(En.value).then(Ft,Sn)}Mt((ee=ee.apply(I,z||[])).next())})},Os=function(I,z){var $={label:0,sent:function(){if(xe[0]&1)throw xe[1];return xe[1]},trys:[],ops:[]},ee,ge,xe,gt;return gt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function Ft(Mt){return function(En){return Sn([Mt,En])}}function Sn(Mt){if(ee)throw new TypeError("Generator is already executing.");for(;$;)try{if(ee=1,ge&&(xe=Mt[0]&2?ge.return:Mt[0]?ge.throw||((xe=ge.return)&&xe.call(ge),0):ge.next)&&!(xe=xe.call(ge,Mt[1])).done)return xe;switch(ge=0,xe&&(Mt=[Mt[0]&2,xe.value]),Mt[0]){case 0:case 1:xe=Mt;break;case 4:return $.label++,{value:Mt[1],done:!1};case 5:$.label++,ge=Mt[1],Mt=[0];continue;case 7:Mt=$.ops.pop(),$.trys.pop();continue;default:if(xe=$.trys,!(xe=xe.length>0&&xe[xe.length-1])&&(Mt[0]===6||Mt[0]===2)){$=0;continue}if(Mt[0]===3&&(!xe||Mt[1]>xe[0]&&Mt[1]<xe[3])){$.label=Mt[1];break}if(Mt[0]===6&&$.label<xe[1]){$.label=xe[1],xe=Mt;break}if(xe&&$.label<xe[2]){$.label=xe[2],$.ops.push(Mt);break}xe[2]&&$.ops.pop(),$.trys.pop();continue}Mt=z.call(I,$)}catch(En){Mt=[6,En],ge=0}finally{ee=xe=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}};function hf(I,z){return WorkerFarm.isSupported()?I.worker&&(z==null?void 0:z.worker):!1}function Pf(I,z,$,ee){return $===void 0&&($={}),ee===void 0&&(ee={}),nf(this,void 0,void 0,function(){var ge,xe,gt,Ft,Sn,Mt,En,lr;return Os(this,function(Di){switch(Di.label){case 0:return ge=getWorkerName(I),xe=getWorkerURL(I,$),gt=WorkerFarm.getWorkerFarm($),Ft=gt.getWorkerPool({name:ge,url:xe}),Sn=$.jobName||I.name,[4,Ft.startJob(Sn,If.bind(null,ee))];case 1:return Mt=Di.sent(),En=removeNontransferableOptions($),Mt.postMessage("process",{input:z,options:En}),[4,Mt.result];case 2:return lr=Di.sent(),[2,lr.result]}})})}function If(I,z,$,ee){return nf(this,void 0,void 0,function(){var ge,xe,gt,Ft,Sn,Mt,En;return Os(this,function(lr){switch(lr.label){case 0:switch(ge=$,ge){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return z.done(ee),[3,9];case 2:return z.error(new Error(ee.error)),[3,9];case 3:xe=ee.id,gt=ee.input,Ft=ee.options,lr.label=4;case 4:return lr.trys.push([4,6,,7]),I.process?[4,I.process(gt,Ft)]:(z.postMessage("error",{id:xe,error:"Worker not set up to process on main thread"}),[2]);case 5:return Sn=lr.sent(),z.postMessage("done",{id:xe,result:Sn}),[3,7];case 6:return Mt=lr.sent(),En=Mt instanceof Error?Mt.message:"unknown error",z.postMessage("error",{id:xe,error:En}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+$),lr.label=9;case 9:return[2]}})})}var df=function(){function I(){this._values=[],this._settlers=[],this._closed=!1}return I.prototype[Symbol.asyncIterator]=function(){return this},I.prototype.push=function(z){return this.enqueue(z)},I.prototype.enqueue=function(z){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var $=this._settlers.shift();z instanceof Error?$.reject(z):$.resolve({value:z})}else this._values.push(z)},I.prototype.close=function(){for(;this._settlers.length>0;){var z=this._settlers.shift();z.resolve({done:!0})}this._closed=!0},I.prototype.next=function(){var z=this;if(this._values.length>0){var $=this._values.shift();return $ instanceof Error?Promise.reject($):Promise.resolve({done:!1,value:$})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(ee,ge){z._settlers.push({resolve:ee,reject:ge})})},I}(),Kl=df,pf=function(I,z,$,ee){function ge(xe){return xe instanceof $?xe:new $(function(gt){gt(xe)})}return new($||($=Promise))(function(xe,gt){function Ft(En){try{Mt(ee.next(En))}catch(lr){gt(lr)}}function Sn(En){try{Mt(ee.throw(En))}catch(lr){gt(lr)}}function Mt(En){En.done?xe(En.value):ge(En.value).then(Ft,Sn)}Mt((ee=ee.apply(I,z||[])).next())})},Pc=function(I,z){var $={label:0,sent:function(){if(xe[0]&1)throw xe[1];return xe[1]},trys:[],ops:[]},ee,ge,xe,gt;return gt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function Ft(Mt){return function(En){return Sn([Mt,En])}}function Sn(Mt){if(ee)throw new TypeError("Generator is already executing.");for(;$;)try{if(ee=1,ge&&(xe=Mt[0]&2?ge.return:Mt[0]?ge.throw||((xe=ge.return)&&xe.call(ge),0):ge.next)&&!(xe=xe.call(ge,Mt[1])).done)return xe;switch(ge=0,xe&&(Mt=[Mt[0]&2,xe.value]),Mt[0]){case 0:case 1:xe=Mt;break;case 4:return $.label++,{value:Mt[1],done:!1};case 5:$.label++,ge=Mt[1],Mt=[0];continue;case 7:Mt=$.ops.pop(),$.trys.pop();continue;default:if(xe=$.trys,!(xe=xe.length>0&&xe[xe.length-1])&&(Mt[0]===6||Mt[0]===2)){$=0;continue}if(Mt[0]===3&&(!xe||Mt[1]>xe[0]&&Mt[1]<xe[3])){$.label=Mt[1];break}if(Mt[0]===6&&$.label<xe[1]){$.label=xe[1],xe=Mt;break}if(xe&&$.label<xe[2]){$.label=xe[2],$.ops.push(Mt);break}xe[2]&&$.ops.pop(),$.trys.pop();continue}Mt=z.call(I,$)}catch(En){Mt=[6,En],ge=0}finally{ee=xe=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}},Hc=function(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z=I[Symbol.asyncIterator],$;return z?z.call(I):(I=typeof __values=="function"?__values(I):I[Symbol.iterator](),$={},ee("next"),ee("throw"),ee("return"),$[Symbol.asyncIterator]=function(){return this},$);function ee(xe){$[xe]=I[xe]&&function(gt){return new Promise(function(Ft,Sn){gt=I[xe](gt),ge(Ft,Sn,gt.done,gt.value)})}}function ge(xe,gt,Ft,Sn){Promise.resolve(Sn).then(function(Mt){xe({value:Mt,done:Ft})},gt)}},bf=0,lc,cc;function rf(I,z){var $=this;if(typeof self!="undefined"){var ee={process:af};bu.onmessage=function(ge,xe){return pf($,void 0,void 0,function(){var gt,Ft,Sn,Mt,En,lr,Di,Zi,Ri,ki,Ui;return Pc(this,function(yi){switch(yi.label){case 0:switch(yi.trys.push([0,19,,20]),gt=ge,gt){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!I)throw new Error("Worker does not support atomic processing");return[4,I(xe.input,xe.options||{},ee)];case 2:return Ft=yi.sent(),bu.postMessage("done",{result:Ft}),[3,18];case 3:if(!z)throw new Error("Worker does not support batched processing");lc=new Kl,cc=xe.options||{},Sn=z(lc,cc,ee),yi.label=4;case 4:yi.trys.push([4,9,10,15]),Mt=Hc(Sn),yi.label=5;case 5:return[4,Mt.next()];case 6:if(En=yi.sent(),!!En.done)return[3,8];lr=En.value,bu.postMessage("output-batch",{result:lr}),yi.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return Di=yi.sent(),ki={error:Di},[3,15];case 10:return yi.trys.push([10,,13,14]),En&&!En.done&&(Ui=Mt.return)?[4,Ui.call(Mt)]:[3,12];case 11:yi.sent(),yi.label=12;case 12:return[3,14];case 13:if(ki)throw ki.error;return[7];case 14:return[7];case 15:return bu.postMessage("done",{}),[3,18];case 16:return lc.push(xe.input),[3,18];case 17:return lc.close(),[3,18];case 18:return[3,20];case 19:return Zi=yi.sent(),Ri=Zi instanceof Error?Zi.message:"",bu.postMessage("error",{error:Ri}),[3,20];case 20:return[2]}})})}}}function af(I,z){return z===void 0&&(z={}),new Promise(function($,ee){var ge=bf++,xe=function(Ft,Sn){if(Sn.id===ge)switch(Ft){case"done":bu.removeEventListener(xe),$(Sn.result);break;case"error":bu.removeEventListener(xe),ee(Sn.error);break;default:}};bu.addEventListener(xe);var gt={id:ge,input:I,options:z};bu.postMessage("process",gt)})}var Ic=function(I,z,$,ee){function ge(xe){return xe instanceof $?xe:new $(function(gt){gt(xe)})}return new($||($=Promise))(function(xe,gt){function Ft(En){try{Mt(ee.next(En))}catch(lr){gt(lr)}}function Sn(En){try{Mt(ee.throw(En))}catch(lr){gt(lr)}}function Mt(En){En.done?xe(En.value):ge(En.value).then(Ft,Sn)}Mt((ee=ee.apply(I,z||[])).next())})},wl=function(I,z){var $={label:0,sent:function(){if(xe[0]&1)throw xe[1];return xe[1]},trys:[],ops:[]},ee,ge,xe,gt;return gt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function Ft(Mt){return function(En){return Sn([Mt,En])}}function Sn(Mt){if(ee)throw new TypeError("Generator is already executing.");for(;$;)try{if(ee=1,ge&&(xe=Mt[0]&2?ge.return:Mt[0]?ge.throw||((xe=ge.return)&&xe.call(ge),0):ge.next)&&!(xe=xe.call(ge,Mt[1])).done)return xe;switch(ge=0,xe&&(Mt=[Mt[0]&2,xe.value]),Mt[0]){case 0:case 1:xe=Mt;break;case 4:return $.label++,{value:Mt[1],done:!1};case 5:$.label++,ge=Mt[1],Mt=[0];continue;case 7:Mt=$.ops.pop(),$.trys.pop();continue;default:if(xe=$.trys,!(xe=xe.length>0&&xe[xe.length-1])&&(Mt[0]===6||Mt[0]===2)){$=0;continue}if(Mt[0]===3&&(!xe||Mt[1]>xe[0]&&Mt[1]<xe[3])){$.label=Mt[1];break}if(Mt[0]===6&&$.label<xe[1]){$.label=xe[1],xe=Mt;break}if(xe&&$.label<xe[2]){$.label=xe[2],$.ops.push(Mt);break}xe[2]&&$.ops.pop(),$.trys.pop();continue}Mt=z.call(I,$)}catch(En){Mt=[6,En],ge=0}finally{ee=xe=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}},Wc={};function of(I,z,$){return z===void 0&&(z=null),$===void 0&&($={}),Ic(this,void 0,void 0,function(){return wl(this,function(ee){switch(ee.label){case 0:return z&&(I=fc(I,z,$)),Wc[I]=Wc[I]||sf(I),[4,Wc[I]];case 1:return[2,ee.sent()]}})})}function fc(I,z,$){if(I.startsWith("http"))return I;var ee=$.modules||{};return ee[I]?ee[I]:$.CDN?(assert($.CDN.startsWith("http")),$.CDN+"/"+z+"/dist/libs/"+I):isWorker?"../src/libs/"+I:"modules/"+z+"/src/libs/"+I}function sf(I){return Ic(this,void 0,void 0,function(){var z,$,ee;return wl(this,function(ge){switch(ge.label){case 0:return I.endsWith("wasm")?[4,fetch(I)]:[3,3];case 1:return z=ge.sent(),[4,z.arrayBuffer()];case 2:return[2,ge.sent()];case 3:return isWorker?[2,importScripts(I)]:[4,fetch(I)];case 4:return $=ge.sent(),[4,$.text()];case 5:return ee=ge.sent(),[2,Ml(ee,I)]}})})}function Ml(I,z){if(isWorker)return eval.call(global,I),null;var $=document.createElement("script");$.id=z;try{$.appendChild(document.createTextNode(I))}catch(ee){$.text=I}return document.body.appendChild($),null}var Gu="0.0.3",Ol={id:"null",name:"null",module:"web-worker-helper",options:{}};function Lu(I){var z=I.color;return!z||!z.length?[1,1,1,1]:z}function Pl(I,z,$){return $.length===2?[$[0],$[1],0]:[$[0],$[1],$[2]]}function Hu(I){var z=I.filter;return z?[1]:[0]}function R(I,z){return[z]}var ut=y(9187),Te=y.n(ut),fe=y(31437),we=fe.Ue(),je=fe.Ue(),_t=fe.Ue(),It=fe.Ue(),Ct=fe.Ue();function Jt(I,z,$,ee,ge){fe.IH(I,$,ee),fe.Fv(I,I),z=fe.al(-I[1],I[0]);var xe=fe.al(-$[1],$[0]);return[ge/fe.AK(z,xe),z]}function Wn(I,z){return fe.t8(I,-z[1],z[0])}function Mr(I,z,$){return fe.lu(I,z,$),fe.Fv(I,I),I}function hr(I,z){return I[0]===z[0]&&I[1]===z[1]}function kr(I){for(var z=new Map,$=0;$<I.length;$++){var ee=I[0].toString()+"-"+I[1].toString();z.get(ee)?(I.splice($,1),$++):z.set(ee,ee)}return I}var ia=function(){function I(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,g.Z)(this,I),(0,no.Z)(this,"lastFlip",-1),(0,no.Z)(this,"miter",fe.al(0,0)),(0,no.Z)(this,"started",!1),(0,no.Z)(this,"dash",!1),(0,no.Z)(this,"totalDistance",0),(0,no.Z)(this,"currentIndex",0),this.join=z.join||"miter",this.cap=z.cap||"butt",this.miterLimit=z.miterLimit||10,this.thickness=z.thickness||1,this.dash=z.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,d.Z)(I,[{key:"extrude_gaode2",value:function($,ee){var ge=this.complex;if($.length<=1)return ge;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var xe=$.length,gt=ge.startIndex,Ft=1;Ft<xe;Ft++){var Sn,Mt,En,lr=$[Ft-1];lr.push((Sn=ee[Ft-1][2])!==null&&Sn!==void 0?Sn:0);var Di=ee[Ft-1],Zi=$[Ft];Zi.push((Mt=ee[Ft][2])!==null&&Mt!==void 0?Mt:0);var Ri=ee[Ft],ki=Ft<$.length-1?[].concat((0,xa.Z)($[Ft+1]),[(En=ee[Ft+1][2])!==null&&En!==void 0?En:0]):null,Ui=Ft<ee.length-1?ee[Ft+1]:null,yi=this.segment_gaode2(ge,gt,lr,Zi,ki,Di,Ri,Ui);gt+=yi}if(this.dash)for(var na=0;na<ge.positions.length/6;na++)ge.positions[na*6+5]=this.totalDistance;return ge.startIndex=ge.positions.length/6,ge}},{key:"simpleExtrude_gaode2",value:function($,ee){var ge=this.complex;if($.length<=1)return ge;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var xe=$.length,gt=ge.startIndex,Ft=1;Ft<xe;Ft++){var Sn,Mt,En,lr=$[Ft-1];lr.push((Sn=ee[Ft-1][2])!==null&&Sn!==void 0?Sn:0);var Di=ee[Ft-1],Zi=$[Ft];Zi.push((Mt=ee[Ft][2])!==null&&Mt!==void 0?Mt:0);var Ri=ee[Ft],ki=Ft<$.length-1?[].concat((0,xa.Z)($[Ft+1]),[(En=ee[Ft+1][2])!==null&&En!==void 0?En:0]):null,Ui=Ft<ee.length-1?ee[Ft+1]:null,yi=this.simpleSegment(ge,gt,lr,Zi,ki,Di,Ri,Ui);gt+=yi}if(this.dash)for(var na=0;na<ge.positions.length/6;na++)ge.positions[na*6+5]=this.totalDistance;return ge.startIndex=ge.positions.length/6,ge}},{key:"extrude",value:function($){var ee=this.complex;if($.length<=1)return ee;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ge=$.length,xe=ee.startIndex,gt=1;gt<ge;gt++){var Ft=$[gt-1],Sn=$[gt],Mt=gt<$.length-1?$[gt+1]:null,En=this.segment(ee,xe,Ft,Sn,Mt);xe+=En}if(this.dash)for(var lr=0;lr<ee.positions.length/6;lr++)ee.positions[lr*6+5]=this.totalDistance;return ee.startIndex=ee.positions.length/6,ee}},{key:"simpleExtrude",value:function($){var ee=this.complex;if($.length<=1)return ee;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ge=$.length,xe=ee.startIndex,gt=1;gt<ge;gt++){var Ft=$[gt-1],Sn=$[gt],Mt=gt<$.length-1?$[gt+1]:null,En=this.simpleSegment(ee,xe,Ft,Sn,Mt);xe+=En}if(this.dash)for(var lr=0;lr<ee.positions.length/6;lr++)ee.positions[lr*6+5]=this.totalDistance;return ee.startIndex=ee.positions.length/6,ee}},{key:"segment_gaode2",value:function($,ee,ge,xe,gt,Ft,Sn,Mt){var En=0,lr=$.indices,Di=$.positions,Zi=$.normals,Ri=this.cap==="square",ki=this.join==="bevel",Ui=gi([Sn[0],Sn[1]]),yi=gi([Ft[0],Ft[1]]);Mr(_t,xe,ge);var na=0;if(this.dash&&(na=this.lineSegmentDistance(Ui,yi),this.totalDistance+=na),this.normal||(this.normal=fe.Ue(),Wn(this.normal,_t)),!this.started)if(this.started=!0,Ri){var Oa=fe.Ue(),za=fe.Ue();fe.IH(Oa,this.normal,_t),fe.IH(za,this.normal,_t),Zi.push(za[0],za[1],0),Zi.push(Oa[0],Oa[1],0),Di.push(ge[0],ge[1],ge[2]|0,this.totalDistance-na,-this.thickness,ge[2]|0),this.complex.indexes.push(this.currentIndex),Di.push(ge[0],ge[1],ge[2]|0,this.totalDistance-na,this.thickness,ge[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Di,Zi,ge,this.normal,this.thickness,this.totalDistance-na);if(lr.push(ee+0,ee+1,ee+2),gt){hr(xe,gt)&&fe.IH(gt,xe,fe.Fv(gt,fe.$X(gt,xe,ge))),Mr(It,gt,xe);var Bs=Jt(Ct,fe.Ue(),_t,It,this.thickness),So=(0,sa.Z)(Bs,2),Pa=So[0],co=So[1],Do=fe.AK(Ct,this.normal)<0?-1:1,Ws=ki;if(!Ws&&this.join==="miter"){var Is=Pa;Is>this.miterLimit&&(Ws=!0)}Ws?(Zi.push(this.normal[0],this.normal[1],0),Zi.push(co[0],co[1],0),Di.push(xe[0],xe[1],xe[2]|0,this.totalDistance,-this.thickness*Do,xe[2]|0),this.complex.indexes.push(this.currentIndex),Di.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness*Do,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,lr.push.apply(lr,(0,xa.Z)(this.lastFlip!==-Do?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),lr.push(ee+2,ee+3,ee+4),Wn(we,It),fe.JG(this.normal,we),Zi.push(this.normal[0],this.normal[1],0),Di.push(xe[0],xe[1],xe[2]|0,this.totalDistance,-this.thickness*Do,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,En+=3):(this.extrusions(Di,Zi,xe,co,Pa,this.totalDistance),lr.push.apply(lr,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Do=-1,fe.JG(this.normal,co),En+=2),this.lastFlip=Do}else{if(Wn(this.normal,_t),Ri){var Xo=fe.Ue(),cs=fe.Ue();fe.lu(cs,_t,this.normal),fe.IH(Xo,_t,this.normal),Zi.push(cs[0],cs[1],0),Zi.push(Xo[0],Xo[1],0),Di.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness,xe[2]|0),this.complex.indexes.push(this.currentIndex),Di.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Di,Zi,xe,this.normal,this.thickness,this.totalDistance);lr.push.apply(lr,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),En+=2}return En}},{key:"simpleSegment",value:function($,ee,ge,xe,gt){var Ft=0,Sn=$.indices,Mt=$.positions,En=$.normals,lr=gi([xe[0],xe[1]]),Di=gi([ge[0],ge[1]]);Mr(_t,lr,Di);var Zi=0;if(this.dash&&(Zi=this.lineSegmentDistance(lr,Di),this.totalDistance+=Zi),this.normal||(this.normal=fe.Ue(),Wn(this.normal,_t)),this.started||(this.started=!0,this.extrusions(Mt,En,ge,this.normal,this.thickness,this.totalDistance-Zi)),Sn.push(ee+0,ee+1,ee+2),!gt)Wn(this.normal,_t),this.extrusions(Mt,En,xe,this.normal,this.thickness,this.totalDistance),Sn.push.apply(Sn,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Ft+=2;else{var Ri=gi([gt[0],gt[1]]);hr(lr,Ri)&&fe.IH(Ri,lr,fe.Fv(Ri,fe.$X(Ri,lr,Di))),Mr(It,Ri,lr);var ki=Jt(Ct,fe.Ue(),_t,It,this.thickness),Ui=(0,sa.Z)(ki,2),yi=Ui[0],na=Ui[1],Oa=fe.AK(Ct,this.normal)<0?-1:1;this.extrusions(Mt,En,xe,na,yi,this.totalDistance),Sn.push.apply(Sn,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Oa=-1,fe.JG(this.normal,na),Ft+=2,this.lastFlip=Oa}return Ft}},{key:"segment",value:function($,ee,ge,xe,gt){var Ft=0,Sn=$.indices,Mt=$.positions,En=$.normals,lr=this.cap==="square",Di=this.join==="bevel",Zi=gi([xe[0],xe[1]]),Ri=gi([ge[0],ge[1]]);Mr(_t,Zi,Ri);var ki=0;if(this.dash&&(ki=this.lineSegmentDistance(Zi,Ri),this.totalDistance+=ki),this.normal||(this.normal=fe.Ue(),Wn(this.normal,_t)),!this.started)if(this.started=!0,lr){var Ui=fe.Ue(),yi=fe.Ue();fe.IH(Ui,this.normal,_t),fe.IH(yi,this.normal,_t),En.push(yi[0],yi[1],0),En.push(Ui[0],Ui[1],0),Mt.push(ge[0],ge[1],ge[2]|0,this.totalDistance-ki,-this.thickness,ge[2]|0),this.complex.indexes.push(this.currentIndex),Mt.push(ge[0],ge[1],ge[2]|0,this.totalDistance-ki,this.thickness,ge[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Mt,En,ge,this.normal,this.thickness,this.totalDistance-ki);if(Sn.push(ee+0,ee+1,ee+2),gt){var za=gi([gt[0],gt[1]]);hr(Zi,za)&&fe.IH(za,Zi,fe.Fv(za,fe.$X(za,Zi,Ri))),Mr(It,za,Zi);var Xo=Jt(Ct,fe.Ue(),_t,It,this.thickness),cs=(0,sa.Z)(Xo,2),Bs=cs[0],So=cs[1],Pa=fe.AK(Ct,this.normal)<0?-1:1,co=Di;if(!co&&this.join==="miter"){var Do=Bs;Do>this.miterLimit&&(co=!0)}co?(En.push(this.normal[0],this.normal[1],0),En.push(So[0],So[1],0),Mt.push(xe[0],xe[1],xe[2]|0,this.totalDistance,-this.thickness*Pa,xe[2]|0),this.complex.indexes.push(this.currentIndex),Mt.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness*Pa,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Sn.push.apply(Sn,(0,xa.Z)(this.lastFlip!==-Pa?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Sn.push(ee+2,ee+3,ee+4),Wn(we,It),fe.JG(this.normal,we),En.push(this.normal[0],this.normal[1],0),Mt.push(xe[0],xe[1],xe[2]|0,this.totalDistance,-this.thickness*Pa,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Ft+=3):(this.extrusions(Mt,En,xe,So,Bs,this.totalDistance),Sn.push.apply(Sn,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Pa=-1,fe.JG(this.normal,So),Ft+=2),this.lastFlip=Pa}else{if(Wn(this.normal,_t),lr){var na=fe.Ue(),Oa=fe.Ue();fe.lu(Oa,_t,this.normal),fe.IH(na,_t,this.normal),En.push(Oa[0],Oa[1],0),En.push(na[0],na[1],0),Mt.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness,xe[2]|0),this.complex.indexes.push(this.currentIndex),Mt.push(xe[0],xe[1],xe[2]|0,this.totalDistance,this.thickness,xe[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Mt,En,xe,this.normal,this.thickness,this.totalDistance);Sn.push.apply(Sn,(0,xa.Z)(this.lastFlip===1?[ee,ee+2,ee+3]:[ee+2,ee+1,ee+3])),Ft+=2}return Ft}},{key:"extrusions",value:function($,ee,ge,xe,gt,Ft){ee.push(xe[0],xe[1],0),ee.push(xe[0],xe[1],0),$.push(ge[0],ge[1],ge[2]|0,Ft,-gt,ge[2]|0),this.complex.indexes.push(this.currentIndex),$.push(ge[0],ge[1],ge[2]|0,Ft,gt,ge[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function($,ee){var ge=ee[0]-$[0],xe=ee[1]-$[1];return Math.sqrt(ge*ge+xe*xe)}}]),I}(),$i=85.0511287798;function zi(I){var z=I.coordinates,$=I.originCoordinates,ee=I.version,ge=new ia({dash:!0,join:"bevel"});if(ee==="GAODE2.x"){var xe=z;Array.isArray(xe[0][0])||(xe=[z]);var gt=$;Array.isArray(gt[0][0])||(gt=[$]);for(var Ft=0;Ft<xe.length;Ft++){var Sn=xe[Ft],Mt=gt[Ft];ge.extrude_gaode2(Sn,Mt)}}else{var En=z;En[0]&&!Array.isArray(En[0][0])&&(En=[z]),En.forEach(function(Di){ge.extrude(Di)})}var lr=ge.complex;return{vertices:lr.positions,indices:lr.indices,normals:lr.normals,indexes:lr.indexes,size:6}}function Ea(I){var z=zu(I.coordinates);return{vertices:[].concat((0,xa.Z)(z),(0,xa.Z)(z),(0,xa.Z)(z),(0,xa.Z)(z)),indices:[0,1,2,2,3,0],size:z.length}}function qa(I){var z=I.coordinates,$=Te().flatten(z),ee=$.vertices,ge=$.dimensions,xe=$.holes,gt=Te()(ee,xe,ge);return{indices:gt,vertices:ee,size:ge}}function ua(I,z){var $=z;return z>$i&&($=$i),z<-$i&&($=-$i),[Math.PI*I/180+Math.PI,Math.PI-Math.log(Math.tan(Math.PI*.25+Math.PI*$/180*.5))]}function rs(I,z){return[(I-Math.PI)*180/Math.PI,(Math.atan(Math.exp(Math.PI-z))-Math.PI*.25)*2*180/Math.PI]}var La=function(){var I=(0,su.Z)(Zo().mark(function z($){var ee,ge,xe,gt,Ft,Sn,Mt,En,lr;return Zo().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return ee=$.descriptors,ge=$.features,xe=$.enablePicking,gt=$.iconMap,Ft={a_Color:Lu,a_Position:Pl,filter:Hu,a_vertexId:R,a_PickingColor:function(ki){var Ui=ki.id;return xe?sr(Ui):[0,0,0]},a_DistanceAndIndex:function(ki,Ui,yi,na,Oa,za){return za===void 0?[yi[3],10]:[yi[3],za]},a_Total_Distance:function(ki,Ui,yi){return[yi[5]]},a_Size:function(ki){var Ui=ki.size,yi=Ui===void 0?1:Ui;return Array.isArray(yi)?[yi[0],yi[1]]:[yi,0]},a_Normal:function(ki,Ui,yi,na,Oa){return Oa},a_Miter:function(ki,Ui,yi){return[yi[4]]},a_iconMapUV:function(ki){var Ui=ki.texture,yi=gt[Ui]||{x:0,y:0},na=yi.x,Oa=yi.y;return[na,Oa]}},Sn={sizePerElement:0,elements:[]},Mt=0,En=[],lr=3,ge.forEach(function(Ri,ki){var Ui=zi(Ri),yi=Ui.indices,na=Ui.vertices,Oa=Ui.normals,za=Ui.size,Xo=Ui.indexes;yi.forEach(function(Pa){En.push(Pa+Mt)}),lr=za;var cs=na.length/za;Sn.sizePerElement=lr,Sn.elements.push({featureIdx:ki,vertices:na,normals:Oa,offset:Mt}),Mt+=cs;for(var Bs=function(co){var Do=(Oa==null?void 0:Oa.slice(co*3,co*3+3))||[],Ws=na.slice(co*za,co*za+za),Is=0;Xo&&Xo[co]!==void 0&&(Is=Xo[co]),ee.forEach(function(Xs){if(Xs&&Ft[Xs.name]){var kl;(kl=Xs.buffer.data).push.apply(kl,(0,xa.Z)(Ft[Xs.name](Ri,ki,Ws,co,Do,Is)))}})},So=0;So<cs;So++)Bs(So)}),Zi.abrupt("return",{descriptors:ee,featureLayout:Sn,indices:En});case 8:case"end":return Zi.stop()}},z)}));return function($){return I.apply(this,arguments)}}(),Po=function(){var I=(0,su.Z)(Zo().mark(function z($){var ee,ge,xe,gt,Ft,Sn,Mt,En,lr;return Zo().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return ee=$.descriptors,ge=$.features,xe=$.enablePicking,gt=$.shape2d,Ft={a_Color:Lu,a_Position:Pl,filter:Hu,a_vertexId:R,a_PickingColor:function(ki){var Ui=ki.id;return xe?sr(Ui):[0,0,0]},a_Shape:function(ki){var Ui=ki.shape,yi=Ui===void 0?2:Ui,na=gt.indexOf(yi);return[na]},a_Extrude:function(ki,Ui,yi,na){var Oa=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],za=na%4*3;return[Oa[za],Oa[za+1],Oa[za+2]]},a_Size:function(ki){var Ui=ki.size,yi=Ui===void 0?5:Ui;return Array.isArray(yi)?[yi[0]]:[yi]}},Sn={sizePerElement:0,elements:[]},Mt=0,En=[],lr=3,ge.forEach(function(Ri,ki){var Ui=Ea(Ri),yi=Ui.indices,na=Ui.vertices,Oa=Ui.normals,za=Ui.size,Xo=Ui.indexes;yi.forEach(function(Pa){En.push(Pa+Mt)}),lr=za;var cs=na.length/za;Sn.sizePerElement=lr,Sn.elements.push({featureIdx:ki,vertices:na,normals:Oa,offset:Mt}),Mt+=cs;for(var Bs=function(co){var Do=(Oa==null?void 0:Oa.slice(co*3,co*3+3))||[],Ws=na.slice(co*za,co*za+za),Is=0;Xo&&Xo[co]!==void 0&&(Is=Xo[co]),ee.forEach(function(Xs){if(Xs&&Ft[Xs.name]){var kl;(kl=Xs.buffer.data).push.apply(kl,(0,xa.Z)(Ft[Xs.name](Ri,ki,Ws,co,Do,Is)))}})},So=0;So<cs;So++)Bs(So)}),Zi.abrupt("return",{descriptors:ee,featureLayout:Sn,indices:En});case 8:case"end":return Zi.stop()}},z)}));return function($){return I.apply(this,arguments)}}(),Wo=function(){var I=(0,su.Z)(Zo().mark(function z($){var ee,ge,xe,gt,Ft,Sn,Mt,En;return Zo().wrap(function(Di){for(;;)switch(Di.prev=Di.next){case 0:return ee=$.descriptors,ge=$.features,xe=$.enablePicking,gt={a_Color:Lu,a_Position:Pl,filter:Hu,a_vertexId:R,a_PickingColor:function(Ri){var ki=Ri.id;return xe?sr(ki):[0,0,0]}},Ft={sizePerElement:0,elements:[]},Sn=0,Mt=[],En=3,ge.forEach(function(Zi,Ri){var ki=qa(Zi),Ui=ki.indices,yi=ki.vertices,na=ki.normals,Oa=ki.size,za=ki.indexes;Ui.forEach(function(So){Mt.push(So+Sn)}),En=Oa;var Xo=yi.length/Oa;Ft.sizePerElement=En,Ft.elements.push({featureIdx:Ri,vertices:yi,normals:na,offset:Sn}),Sn+=Xo;for(var cs=function(Pa){var co=(na==null?void 0:na.slice(Pa*3,Pa*3+3))||[],Do=yi.slice(Pa*Oa,Pa*Oa+Oa),Ws=0;za&&za[Pa]!==void 0&&(Ws=za[Pa]),ee.forEach(function(Is){if(Is&&gt[Is.name]){var Xs;(Xs=Is.buffer.data).push.apply(Xs,(0,xa.Z)(gt[Is.name](Zi,Ri,Do,Pa,co,Ws)))}})},Bs=0;Bs<Xo;Bs++)cs(Bs)}),Di.abrupt("return",{descriptors:ee,featureLayout:Ft,indices:Mt});case 8:case"end":return Di.stop()}},z)}));return function($){return I.apply(this,arguments)}}(),Xa={pointFill:Po,line:La,polygonFill:Wo},Ra=(0,M.Z)({},Xa);function To(I){return ls.apply(this,arguments)}function ls(){return ls=(0,su.Z)(Zo().mark(function I(z){var $,ee;return Zo().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if($=z.workerType,ee=z.data,!Ra[$]){xe.next=3;break}return xe.abrupt("return",Ra[$](ee));case 3:return xe.abrupt("return",Promise.reject(new Error('Worker with type "'.concat($,'" non-existent.'))));case 4:case"end":return xe.stop()}},I)})),ls.apply(this,arguments)}rf(To);var is=new Map;function Ps(I,z){is.set(I,z)}function Il(I){var z=is.get(I);return z}var Qs=`var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:E(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function v(){}function d(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(k([])));m&&m!==e&&n.call(m,a)&&(y=m);var b=d.prototype=p.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=A(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=d,o(b,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(b),c(b,s,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t,e){return t(e={exports:{}},e.exports),e.exports}var E,A,O=function(t){return t&&t.Math==Math&&t},S=O("object"==typeof globalThis&&globalThis)||O("object"==typeof window&&window)||O("object"==typeof self&&self)||O("object"==typeof x&&x)||function(){return this}()||Function("return this")(),T=Object.defineProperty,k=function(t,e){try{T(S,t,{value:e,configurable:!0,writable:!0})}catch(r){S[t]=e}return e},I=S["__core-js_shared__"]||k("__core-js_shared__",{}),j=w((function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),P=function(t){try{return!!t()}catch(t){return!0}},_=!P((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),M=Function.prototype,L=M.call,R=_&&M.bind.bind(L,L),N=_?R:function(t){return function(){return L.apply(t,arguments)}},C=function(t){return null==t},D=TypeError,F=function(t){if(C(t))throw D("Can't call method on "+t);return t},W=Object,z=function(t){return W(F(t))},B=N({}.hasOwnProperty),U=Object.hasOwn||function(t,e){return B(z(t),e)},G=0,V=Math.random(),H=N(1..toString),q=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++G+V,36)},Z="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Y=S.process,$=S.Deno,K=Y&&Y.versions||$&&$.version,Q=K&&K.v8;Q&&(A=(E=Q.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!A&&Z&&(!(E=Z.match(/Edge\\/(\\d+)/))||E[1]>=74)&&(E=Z.match(/Chrome\\/(\\d+)/))&&(A=+E[1]);var X=A,J=!!Object.getOwnPropertySymbols&&!P((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&X&&X<41})),tt=J&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=S.Symbol,rt=j("wks"),nt=tt?et.for||et:et&&et.withoutSetter||q,ot=function(t){return U(rt,t)||(rt[t]=J&&U(et,t)?et[t]:nt("Symbol."+t)),rt[t]},it={};it[ot("toStringTag")]="z";var at="[object z]"===String(it),ut="object"==typeof document&&document.all,st={all:ut,IS_HTMLDDA:void 0===ut&&void 0!==ut},ct=st.all,ft=st.IS_HTMLDDA?function(t){return"function"==typeof t||t===ct}:function(t){return"function"==typeof t},lt=!P((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ht=st.all,pt=st.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:ft(t)||t===ht}:function(t){return"object"==typeof t?null!==t:ft(t)},vt=S.document,dt=pt(vt)&&pt(vt.createElement),yt=function(t){return dt?vt.createElement(t):{}},gt=!lt&&!P((function(){return 7!=Object.defineProperty(yt("div"),"a",{get:function(){return 7}}).a})),mt=lt&&P((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),bt=String,xt=TypeError,wt=function(t){if(pt(t))return t;throw xt(bt(t)+" is not an object")},Et=Function.prototype.call,At=_?Et.bind(Et):function(){return Et.apply(Et,arguments)},Ot=function(t){return ft(t)?t:void 0},St=function(t,e){return arguments.length<2?Ot(S[t]):S[t]&&S[t][e]},Tt=N({}.isPrototypeOf),kt=Object,It=tt?function(t){return"symbol"==typeof t}:function(t){var e=St("Symbol");return ft(e)&&Tt(e.prototype,kt(t))},jt=String,Pt=function(t){try{return jt(t)}catch(t){return"Object"}},_t=TypeError,Mt=function(t){if(ft(t))return t;throw _t(Pt(t)+" is not a function")},Lt=function(t,e){var r=t[e];return C(r)?void 0:Mt(r)},Rt=TypeError,Nt=TypeError,Ct=ot("toPrimitive"),Dt=function(t,e){if(!pt(t)||It(t))return t;var r,n=Lt(t,Ct);if(n){if(void 0===e&&(e="default"),r=At(n,t,e),!pt(r)||It(r))return r;throw Nt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&ft(r=t.toString)&&!pt(n=At(r,t)))return n;if(ft(r=t.valueOf)&&!pt(n=At(r,t)))return n;if("string"!==e&&ft(r=t.toString)&&!pt(n=At(r,t)))return n;throw Rt("Can't convert object to primitive value")}(t,e)},Ft=function(t){var e=Dt(t,"string");return It(e)?e:e+""},Wt=TypeError,zt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ut={f:lt?mt?function(t,e,r){if(wt(t),e=Ft(e),wt(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Bt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return zt(t,e,r)}:zt:function(t,e,r){if(wt(t),e=Ft(e),wt(r),gt)try{return zt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Wt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Gt=Function.prototype,Vt=lt&&Object.getOwnPropertyDescriptor,Ht=U(Gt,"name"),qt={EXISTS:Ht,PROPER:Ht&&"something"===function(){}.name,CONFIGURABLE:Ht&&(!lt||lt&&Vt(Gt,"name").configurable)},Zt=N(Function.toString);ft(I.inspectSource)||(I.inspectSource=function(t){return Zt(t)});var Yt,$t,Kt,Qt=I.inspectSource,Xt=S.WeakMap,Jt=ft(Xt)&&/native code/.test(String(Xt)),te=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ee=lt?function(t,e,r){return Ut.f(t,e,te(1,r))}:function(t,e,r){return t[e]=r,t},re=j("keys"),ne=function(t){return re[t]||(re[t]=q(t))},oe={},ie=S.TypeError,ae=S.WeakMap;if(Jt||I.state){var ue=I.state||(I.state=new ae);ue.get=ue.get,ue.has=ue.has,ue.set=ue.set,Yt=function(t,e){if(ue.has(t))throw ie("Object already initialized");return e.facade=t,ue.set(t,e),e},$t=function(t){return ue.get(t)||{}},Kt=function(t){return ue.has(t)}}else{var se=ne("state");oe[se]=!0,Yt=function(t,e){if(U(t,se))throw ie("Object already initialized");return e.facade=t,ee(t,se,e),e},$t=function(t){return U(t,se)?t[se]:{}},Kt=function(t){return U(t,se)}}var ce={set:Yt,get:$t,has:Kt,enforce:function(t){return Kt(t)?$t(t):Yt(t,{})},getterFor:function(t){return function(e){var r;if(!pt(e)||(r=$t(e)).type!==t)throw ie("Incompatible receiver, "+t+" required");return r}}},fe=w((function(t){var e=qt.CONFIGURABLE,r=ce.enforce,n=ce.get,o=String,i=Object.defineProperty,a=N("".slice),u=N("".replace),s=N([].join),c=lt&&!P((function(){return 8!==i((function(){}),"length",{value:8}).length})),f=String(String).split("String"),l=t.exports=function(t,n,l){"Symbol("===a(o(n),0,7)&&(n="["+u(o(n),/^Symbol\\(([^)]*)\\)/,"$1")+"]"),l&&l.getter&&(n="get "+n),l&&l.setter&&(n="set "+n),(!U(t,"name")||e&&t.name!==n)&&(lt?i(t,"name",{value:n,configurable:!0}):t.name=n),c&&l&&U(l,"arity")&&t.length!==l.arity&&i(t,"length",{value:l.arity});try{l&&U(l,"constructor")&&l.constructor?lt&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var h=r(t);return U(h,"source")||(h.source=s(f,"string"==typeof n?n:"")),t};Function.prototype.toString=l((function(){return ft(this)&&n(this).source||Qt(this)}),"toString")})),le=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(ft(r)&&fe(r,i,n),n.global)o?t[e]=r:k(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Ut.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},he=N({}.toString),pe=N("".slice),ve=function(t){return pe(he(t),8,-1)},de=ot("toStringTag"),ye=Object,ge="Arguments"==ve(function(){return arguments}()),me=at?ve:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ye(t),de))?r:ge?ve(e):"Object"==(n=ve(e))&&ft(e.callee)?"Arguments":n},be=at?{}.toString:function(){return"[object "+me(this)+"]"};at||le(Object.prototype,"toString",be,{unsafe:!0});var xe={}.propertyIsEnumerable,we=Object.getOwnPropertyDescriptor,Ee={f:we&&!xe.call({1:2},1)?function(t){var e=we(this,t);return!!e&&e.enumerable}:xe},Ae=Object,Oe=N("".split),Se=P((function(){return!Ae("z").propertyIsEnumerable(0)}))?function(t){return"String"==ve(t)?Oe(t,""):Ae(t)}:Ae,Te=function(t){return Se(F(t))},ke=Object.getOwnPropertyDescriptor,Ie={f:lt?ke:function(t,e){if(t=Te(t),e=Ft(e),gt)try{return ke(t,e)}catch(t){}if(U(t,e))return te(!At(Ee.f,t,e),t[e])}},je=Math.ceil,Pe=Math.floor,_e=Math.trunc||function(t){var e=+t;return(e>0?Pe:je)(e)},Me=function(t){var e=+t;return e!=e||0===e?0:_e(e)},Le=Math.max,Re=Math.min,Ne=function(t,e){var r=Me(t);return r<0?Le(r+e,0):Re(r,e)},Ce=Math.min,De=function(t){return t>0?Ce(Me(t),9007199254740991):0},Fe=function(t){return De(t.length)},We=function(t){return function(e,r,n){var o,i=Te(e),a=Fe(i),u=Ne(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},ze={includes:We(!0),indexOf:We(!1)},Be=ze.indexOf,Ue=N([].push),Ge=function(t,e){var r,n=Te(t),o=0,i=[];for(r in n)!U(oe,r)&&U(n,r)&&Ue(i,r);for(;e.length>o;)U(n,r=e[o++])&&(~Be(i,r)||Ue(i,r));return i},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],He=Ve.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return Ge(t,He)}},Ze={f:Object.getOwnPropertySymbols},Ye=N([].concat),$e=St("Reflect","ownKeys")||function(t){var e=qe.f(wt(t)),r=Ze.f;return r?Ye(e,r(t)):e},Ke=function(t,e,r){for(var n=$e(e),o=Ut.f,i=Ie.f,a=0;a<n.length;a++){var u=n[a];U(t,u)||r&&U(r,u)||o(t,u,i(e,u))}},Qe=/#|\\.prototype\\./,Xe=function(t,e){var r=tr[Je(t)];return r==rr||r!=er&&(ft(e)?P(e):!!e)},Je=Xe.normalize=function(t){return String(t).replace(Qe,".").toLowerCase()},tr=Xe.data={},er=Xe.NATIVE="N",rr=Xe.POLYFILL="P",nr=Xe,or=Ie.f,ir=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?S:c?S[u]||k(u,{}):(S[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=or(r,n))&&a.value:r[n],!nr(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ke(i,o)}(t.sham||o&&o.sham)&&ee(i,"sham",!0),le(r,n,i,t)}},ar="undefined"!=typeof process&&"process"==ve(process),ur=String,sr=TypeError,cr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=function(t,e,r){try{return N(Mt(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return wt(r),function(t){if("object"==typeof t||ft(t))return t;throw sr("Can't set "+ur(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),fr=Ut.f,lr=ot("toStringTag"),hr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!U(t,lr)&&fr(t,lr,{configurable:!0,value:e})},pr=function(t,e,r){return r.get&&fe(r.get,e,{getter:!0}),r.set&&fe(r.set,e,{setter:!0}),Ut.f(t,e,r)},vr=ot("species"),dr=function(t){var e=St(t);lt&&e&&!e[vr]&&pr(e,vr,{configurable:!0,get:function(){return this}})},yr=TypeError,gr=function(t,e){if(Tt(e,t))return t;throw yr("Incorrect invocation")},mr=function(){},br=[],xr=St("Reflect","construct"),wr=/^\\s*(?:class|function)\\b/,Er=N(wr.exec),Ar=!wr.exec(mr),Or=function(t){if(!ft(t))return!1;try{return xr(mr,br,t),!0}catch(t){return!1}},Sr=function(t){if(!ft(t))return!1;switch(me(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ar||!!Er(wr,Qt(t))}catch(t){return!0}};Sr.sham=!0;var Tr,kr,Ir,jr,Pr=!xr||P((function(){var t;return Or(Or.call)||!Or(Object)||!Or((function(){t=!0}))||t}))?Sr:Or,_r=TypeError,Mr=function(t){if(Pr(t))return t;throw _r(Pt(t)+" is not a constructor")},Lr=ot("species"),Rr=function(t,e){var r,n=wt(t).constructor;return void 0===n||C(r=wt(n)[Lr])?e:Mr(r)},Nr=Function.prototype,Cr=Nr.apply,Dr=Nr.call,Fr="object"==typeof Reflect&&Reflect.apply||(_?Dr.bind(Cr):function(){return Dr.apply(Cr,arguments)}),Wr=function(t){if("Function"===ve(t))return N(t)},zr=Wr(Wr.bind),Br=function(t,e){return Mt(t),void 0===e?t:_?zr(t,e):function(){return t.apply(e,arguments)}},Ur=St("document","documentElement"),Gr=N([].slice),Vr=TypeError,Hr=function(t,e){if(t<e)throw Vr("Not enough arguments");return t},qr=/(?:ipad|iphone|ipod).*applewebkit/i.test(Z),Zr=S.setImmediate,Yr=S.clearImmediate,$r=S.process,Kr=S.Dispatch,Qr=S.Function,Xr=S.MessageChannel,Jr=S.String,tn=0,en={};P((function(){Tr=S.location}));var rn=function(t){if(U(en,t)){var e=en[t];delete en[t],e()}},nn=function(t){return function(){rn(t)}},on=function(t){rn(t.data)},an=function(t){S.postMessage(Jr(t),Tr.protocol+"//"+Tr.host)};Zr&&Yr||(Zr=function(t){Hr(arguments.length,1);var e=ft(t)?t:Qr(t),r=Gr(arguments,1);return en[++tn]=function(){Fr(e,void 0,r)},kr(tn),tn},Yr=function(t){delete en[t]},ar?kr=function(t){$r.nextTick(nn(t))}:Kr&&Kr.now?kr=function(t){Kr.now(nn(t))}:Xr&&!qr?(jr=(Ir=new Xr).port2,Ir.port1.onmessage=on,kr=Br(jr.postMessage,jr)):S.addEventListener&&ft(S.postMessage)&&!S.importScripts&&Tr&&"file:"!==Tr.protocol&&!P(an)?(kr=an,S.addEventListener("message",on,!1)):kr="onreadystatechange"in yt("script")?function(t){Ur.appendChild(yt("script")).onreadystatechange=function(){Ur.removeChild(this),rn(t)}}:function(t){setTimeout(nn(t),0)});var un={set:Zr,clear:Yr},sn=function(){this.head=null,this.tail=null};sn.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var cn,fn,ln,hn,pn,vn=sn,dn=/ipad|iphone|ipod/i.test(Z)&&"undefined"!=typeof Pebble,yn=/web0s(?!.*chrome)/i.test(Z),gn=Ie.f,mn=un.set,bn=S.MutationObserver||S.WebKitMutationObserver,xn=S.document,wn=S.process,En=S.Promise,An=gn(S,"queueMicrotask"),On=An&&An.value;if(!On){var Sn=new vn,Tn=function(){var t,e;for(ar&&(t=wn.domain)&&t.exit();e=Sn.get();)try{e()}catch(t){throw Sn.head&&cn(),t}t&&t.enter()};qr||ar||yn||!bn||!xn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=Br(hn.then,hn),cn=function(){pn(Tn)}):ar?cn=function(){wn.nextTick(Tn)}:(mn=Br(mn,S),cn=function(){mn(Tn)}):(fn=!0,ln=xn.createTextNode(""),new bn(Tn).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}),On=function(t){Sn.head||cn(),Sn.add(t)}}var kn,In,jn,Pn=On,_n=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Mn=S.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ar&&"object"==typeof window&&"object"==typeof document,Nn=(Mn&&Mn.prototype,ot("species")),Cn=!1,Dn=ft(S.PromiseRejectionEvent),Fn={CONSTRUCTOR:nr("Promise",(function(){var t=Qt(Mn),e=t!==String(Mn);if(!e&&66===X)return!0;if(!X||X<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Nn]=n,!(Cn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Cn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Mt(e),this.reject=Mt(r)},Bn={f:function(t){return new zn(t)}},Un=un.set,Gn=Fn.CONSTRUCTOR,Vn=Fn.REJECTION_EVENT,Hn=Fn.SUBCLASSING,qn=ce.getterFor("Promise"),Zn=ce.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=S.TypeError,Xn=S.document,Jn=S.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&S.dispatchEvent),no=function(t){var e;return!(!pt(t)||!ft(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?At(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Pn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),S.dispatchEvent(n)):n={promise:e,reason:r},!Vn&&(o=S["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}("Unhandled promise rejection",r)},uo=function(t){At(Un,S,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=_n((function(){ar?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ar||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){At(Un,S,(function(){var e=t.facade;ar?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can't be resolved itself");var n=no(e);n?Pn((function(){var r={done:!1};try{At(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){gr(this,Kn),Mt(t),At(kn,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(kn=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new vn,rejection:!1,state:0,value:void 0})}).prototype=le(Kn,"then",(function(t,e){var r=qn(this),n=to(Rr(this,$n));return r.parent=!0,n.ok=!ft(t)||t,n.fail=ft(e)&&e,n.domain=ar?Jn.domain:void 0,0==r.state?r.reactions.add(n):Pn((function(){oo(n,r)})),n.promise})),In=function(){var t=new kn,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new In(t):eo(t)},ft(Mn)&&Yn!==Object.prototype)){jn=Yn.then,Hn||le(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){At(jn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}cr&&cr(Yn,Kn)}ir({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),hr($n,"Promise",!1),dr("Promise");var po={},vo=ot("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=ot("iterator"),bo=function(t){if(!C(t))return Lt(t,mo)||Lt(t,"@@iterator")||po[me(t)]},xo=TypeError,wo=function(t,e){var r=arguments.length<2?bo(t):e;if(Mt(r))return wt(At(r,t));throw xo(Pt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;wt(t);try{if(!(n=Lt(t,"return"))){if("throw"===e)throw r;return r}n=At(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return wt(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=Br(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(wt(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=bo(t)))throw Ao(Pt(t)+" is not iterable");if(go(o)){for(i=0,a=Fe(t);a>i;i++)if((u=g(t[i]))&&Tt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=At(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Tt(So,u))return u}return new Oo(!1)},ko=ot("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ir({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=_n((function(){var r=Mt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,At(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ir({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),ft(Mn)){var No=St("Promise").prototype.catch;Ro.catch!==No&&le(Ro,"catch",No,{unsafe:!0})}ir({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=_n((function(){var o=Mt(e.resolve);To(t,(function(t){At(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ir({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return At(e.reject,void 0,t),e.promise}});var Co=Fn.CONSTRUCTOR;St("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ir({target:"Promise",stat:!0,forced:Co},{resolve:function(t){return function(t,e){if(wt(t),pt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts('"+e+"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Vo(t))n.add(t);else if(Vo(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Vo(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Ho=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Ho,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Ho,this.onError=Ho,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=yt("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==ve(t)},gi=ot("species"),mi=Array,bi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(Pr(e)&&(e===mi||yi(e.prototype))||pt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},xi=N([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=z(s),d=Se(v),y=Br(c,f),g=Fe(d),m=0,b=l||bi,x=e?b(s,g):r||a?b(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)x[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:xi(x,h)}else switch(t){case 4:return!1;case 7:xi(x,h)}return i?-1:n||o?o:x}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&P((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ee(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(S[ki]&&S[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ft(e);n in t?Ut.f(t,n,te(0,r)):t[n]=r},ji=ot("species"),Pi=function(t){return X>=51||!P((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=ot("species"),Li=Array,Ri=Math.max;ir({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=Te(this),a=Fe(i),u=Ne(t,a),s=Ne(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(Pr(r)&&(r===Li||yi(r.prototype))||pt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Gr(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ni=qt.EXISTS,Ci=Function.prototype,Di=N(Ci.toString),Fi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,Wi=N(Fi.exec);lt&&!Ni&&pr(Ci,"name",{configurable:!0,get:function(){try{return Wi(Fi,Di(this))[1]}catch(t){return""}}});var zi,Bi=Object.keys||function(t){return Ge(t,Ve)},Ui={f:lt&&!mt?Object.defineProperties:function(t,e){wt(t);for(var r,n=Te(e),o=Bi(e),i=o.length,a=0;i>a;)Ut.f(t,r=o[a++],n[r]);return t}},Gi=ne("IE_PROTO"),Vi=function(){},Hi=function(t){return"<script>"+t+"<\\/script>"},qi=function(t){t.write(Hi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Zi=function(){try{zi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Zi="undefined"!=typeof document?document.domain&&zi?qi(zi):((e=yt("iframe")).style.display="none",Ur.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Hi("document.F=Object")),t.close(),t.F):qi(zi);for(var r=Ve.length;r--;)delete Zi.prototype[Ve[r]];return Zi()};oe[Gi]=!0;var Yi=Object.create||function(t,e){var r;return null!==t?(Vi.prototype=wt(t),r=new Vi,Vi.prototype=null,r[Gi]=t):r=Zi(),void 0===e?r:Ui.f(r,e)},$i=Ut.f,Ki=ot("unscopables"),Qi=Array.prototype;null==Qi[Ki]&&$i(Qi,Ki,{configurable:!0,value:Yi(null)});var Xi,Ji,ta,ea=function(t){Qi[Ki][t]=!0},ra=!P((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),na=ne("IE_PROTO"),oa=Object,ia=oa.prototype,aa=ra?oa.getPrototypeOf:function(t){var e=z(t);if(U(e,na))return e[na];var r=e.constructor;return ft(r)&&e instanceof r?r.prototype:e instanceof oa?ia:null},ua=ot("iterator"),sa=!1;[].keys&&("next"in(ta=[].keys())?(Ji=aa(aa(ta)))!==Object.prototype&&(Xi=Ji):sa=!0),(!pt(Xi)||P((function(){var t={};return Xi[ua].call(t)!==t})))&&(Xi={}),ft(Xi[ua])||le(Xi,ua,(function(){return this}));var ca={IteratorPrototype:Xi,BUGGY_SAFARI_ITERATORS:sa},fa=ca.IteratorPrototype,la=function(){return this},ha=qt.PROPER,pa=qt.CONFIGURABLE,va=ca.IteratorPrototype,da=ca.BUGGY_SAFARI_ITERATORS,ya=ot("iterator"),ga=function(){return this},ma=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Yi(fa,{next:te(+!n,r)}),hr(t,o,!1),po[o]=la}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!da&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[ya]||p["@@iterator"]||o&&p[o],d=!da&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=aa(y.call(new t)))!==Object.prototype&&u.next&&(aa(u)!==va&&(cr?cr(u,va):ft(u[ya])||le(u,ya,ga)),hr(u,l,!0)),ha&&"values"==o&&v&&"values"!==v.name&&(pa?ee(p,"name","values"):(h=!0,d=function(){return At(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(da||h||!(c in p))&&le(p,c,s[c]);else ir({target:e,proto:!0,forced:da||h},s);return p[ya]!==d&&le(p,ya,d,{name:o}),po[e]=d,s},ba=function(t,e){return{value:t,done:e}},xa=Ut.f,wa=ce.set,Ea=ce.getterFor("Array Iterator"),Aa=ma(Array,"Array",(function(t,e){wa(this,{type:"Array Iterator",target:Te(t),index:0,kind:e})}),(function(){var t=Ea(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,ba(void 0,!0)):ba("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),Oa=po.Arguments=po.Array;if(ea("keys"),ea("values"),ea("entries"),lt&&"values"!==Oa.name)try{xa(Oa,"name",{value:"values"})}catch(t){}var Sa,Ta,ka,Ia="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ja=ce.enforce,Pa=ce.get,_a=S.Int8Array,Ma=_a&&_a.prototype,La=S.Uint8ClampedArray,Ra=La&&La.prototype,Na=_a&&aa(_a),Ca=Ma&&aa(Ma),Da=Object.prototype,Fa=S.TypeError,Wa=ot("toStringTag"),za=q("TYPED_ARRAY_TAG"),Ba=Ia&&!!cr&&"Opera"!==me(S.opera),Ua=!1,Ga={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Va={BigInt64Array:8,BigUint64Array:8},Ha=function(t){var e=aa(t);if(pt(e)){var r=Pa(e);return r&&U(r,"TypedArrayConstructor")?r.TypedArrayConstructor:Ha(e)}},qa=function(t){if(!pt(t))return!1;var e=me(t);return U(Ga,e)||U(Va,e)};for(Sa in Ga)(ka=(Ta=S[Sa])&&Ta.prototype)?ja(ka).TypedArrayConstructor=Ta:Ba=!1;for(Sa in Va)(ka=(Ta=S[Sa])&&Ta.prototype)&&(ja(ka).TypedArrayConstructor=Ta);if((!Ba||!ft(Na)||Na===Function.prototype)&&(Na=function(){throw Fa("Incorrect invocation")},Ba))for(Sa in Ga)S[Sa]&&cr(S[Sa],Na);if((!Ba||!Ca||Ca===Da)&&(Ca=Na.prototype,Ba))for(Sa in Ga)S[Sa]&&cr(S[Sa].prototype,Ca);if(Ba&&aa(Ra)!==Ca&&cr(Ra,Ca),lt&&!U(Ca,Wa))for(Sa in Ua=!0,pr(Ca,Wa,{configurable:!0,get:function(){return pt(this)?this[za]:void 0}}),Ga)S[Sa]&&ee(S[Sa],za,Sa);var Za={NATIVE_ARRAY_BUFFER_VIEWS:Ba,TYPED_ARRAY_TAG:Ua&&za,aTypedArray:function(t){if(qa(t))return t;throw Fa("Target is not a typed array")},aTypedArrayConstructor:function(t){if(ft(t)&&(!cr||Tt(Na,t)))return t;throw Fa(Pt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(lt){if(r)for(var o in Ga){var i=S[o];if(i&&U(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}Ca[t]&&!r||le(Ca,t,r?e:Ba&&Ma[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(lt){if(cr){if(r)for(n in Ga)if((o=S[n])&&U(o,t))try{delete o[t]}catch(t){}if(Na[t]&&!r)return;try{return le(Na,t,r?e:Ba&&Na[t]||e)}catch(t){}}for(n in Ga)!(o=S[n])||o[t]&&!r||le(o,t,e)}},getTypedArrayConstructor:Ha,isView:function(t){if(!pt(t))return!1;var e=me(t);return"DataView"===e||U(Ga,e)||U(Va,e)},isTypedArray:qa,TypedArray:Na,TypedArrayPrototype:Ca},Ya=Za.NATIVE_ARRAY_BUFFER_VIEWS,$a=S.ArrayBuffer,Ka=S.Int8Array,Qa=!Ya||!P((function(){Ka(1)}))||!P((function(){new Ka(-1)}))||!_o((function(t){new Ka,new Ka(null),new Ka(1.5),new Ka(t)}),!0)||P((function(){return 1!==new Ka(new $a(2),1,void 0).length})),Xa=function(t,e,r){for(var n in e)le(t,n,e[n],r);return t},Ja=RangeError,tu=function(t){if(void 0===t)return 0;var e=Me(t),r=De(e);if(e!==r)throw Ja("Wrong length or index");return r},eu=Array,ru=Math.abs,nu=Math.pow,ou=Math.floor,iu=Math.log,au=Math.LN2,uu=function(t,e,r){var n,o,i,a=eu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?nu(2,-24)-nu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=ru(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=ou(iu(t)/au),t*(i=nu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*nu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*nu(2,e),n+=c):(o=t*nu(2,c-1)*nu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},su=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=nu(2,e),f-=a}return(c?-1:1)*r*nu(2,f-e)},cu=function(t){for(var e=z(this),r=Fe(e),n=arguments.length,o=Ne(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ne(i,r);a>o;)e[o++]=t;return e},fu=Array,lu=Math.max,hu=function(t,e,r){for(var n=Fe(t),o=Ne(e,n),i=Ne(void 0===r?n:r,n),a=fu(lu(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},pu=qe.f,vu=qt.PROPER,du=qt.CONFIGURABLE,yu=ce.getterFor("ArrayBuffer"),gu=ce.getterFor("DataView"),mu=ce.set,bu=S.ArrayBuffer,xu=bu,wu=xu&&xu.prototype,Eu=S.DataView,Au=Eu&&Eu.prototype,Ou=Object.prototype,Su=S.Array,Tu=S.RangeError,ku=N(cu),Iu=N([].reverse),ju=uu,Pu=su,_u=function(t){return[255&t]},Mu=function(t){return[255&t,t>>8&255]},Lu=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Ru=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Nu=function(t){return ju(t,23,4)},Cu=function(t){return ju(t,52,8)},Du=function(t,e,r){pr(t.prototype,e,{configurable:!0,get:function(){return r(this)[e]}})},Fu=function(t,e,r,n){var o=tu(r),i=gu(t);if(o+e>i.byteLength)throw Tu("Wrong index");var a=i.bytes,u=o+i.byteOffset,s=hu(a,u,u+e);return n?s:Iu(s)},Wu=function(t,e,r,n,o,i){var a=tu(r),u=gu(t);if(a+e>u.byteLength)throw Tu("Wrong index");for(var s=u.bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(Ia){var zu=vu&&"ArrayBuffer"!==bu.name;if(P((function(){bu(1)}))&&P((function(){new bu(-1)}))&&!P((function(){return new bu,new bu(1.5),new bu(NaN),1!=bu.length||zu&&!du})))zu&&du&&ee(bu,"name","ArrayBuffer");else{(xu=function(t){return gr(this,wu),new bu(tu(t))}).prototype=wu;for(var Bu,Uu=pu(bu),Gu=0;Uu.length>Gu;)(Bu=Uu[Gu++])in xu||ee(xu,Bu,bu[Bu]);wu.constructor=xu}cr&&aa(Au)!==Ou&&cr(Au,Ou);var Vu=new Eu(new xu(2)),Hu=N(Au.setInt8);Vu.setInt8(0,2147483648),Vu.setInt8(1,2147483649),!Vu.getInt8(0)&&Vu.getInt8(1)||Xa(Au,{setInt8:function(t,e){Hu(this,t,e<<24>>24)},setUint8:function(t,e){Hu(this,t,e<<24>>24)}},{unsafe:!0})}else wu=(xu=function(t){gr(this,wu);var e=tu(t);mu(this,{type:"ArrayBuffer",bytes:ku(Su(e),0),byteLength:e}),lt||(this.byteLength=e,this.detached=!1)}).prototype,Au=(Eu=function(t,e,r){gr(this,Au),gr(t,wu);var n=yu(t),o=n.byteLength,i=Me(e);if(i<0||i>o)throw Tu("Wrong offset");if(i+(r=void 0===r?o-i:De(r))>o)throw Tu("Wrong length");mu(this,{type:"DataView",buffer:t,byteLength:r,byteOffset:i,bytes:n.bytes}),lt||(this.buffer=t,this.byteLength=r,this.byteOffset=i)}).prototype,lt&&(Du(xu,"byteLength",yu),Du(Eu,"buffer",gu),Du(Eu,"byteLength",gu),Du(Eu,"byteOffset",gu)),Xa(Au,{getInt8:function(t){return Fu(this,1,t)[0]<<24>>24},getUint8:function(t){return Fu(this,1,t)[0]},getInt16:function(t){var e=Fu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Fu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Ru(Fu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Ru(Fu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Pu(Fu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Pu(Fu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Wu(this,1,t,_u,e)},setUint8:function(t,e){Wu(this,1,t,_u,e)},setInt16:function(t,e){Wu(this,2,t,Mu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Wu(this,2,t,Mu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Wu(this,4,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Wu(this,4,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Wu(this,4,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Wu(this,8,t,Cu,e,arguments.length>2?arguments[2]:void 0)}});hr(xu,"ArrayBuffer"),hr(Eu,"DataView");var qu={ArrayBuffer:xu,DataView:Eu},Zu=Math.floor,Yu=Number.isInteger||function(t){return!pt(t)&&isFinite(t)&&Zu(t)===t},$u=RangeError,Ku=RangeError,Qu=function(t,e){var r=function(t){var e=Me(t);if(e<0)throw $u("The argument can't be less than 0");return e}(t);if(r%e)throw Ku("Wrong offset");return r},Xu=function(t){var e=me(t);return"BigInt64Array"==e||"BigUint64Array"==e},Ju=TypeError,ts=function(t){var e=Dt(t,"number");if("number"==typeof e)throw Ju("Can't convert number to bigint");return BigInt(e)},es=Za.aTypedArrayConstructor,rs=function(t){var e,r,n,o,i,a,u,s,c=Mr(this),f=z(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=bo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=At(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=Br(h,arguments[2])),r=Fe(f),n=new(es(c))(r),o=Xu(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?ts(i):+i;return n},ns=function(t,e,r){var n,o;return cr&&ft(n=e.constructor)&&n!==r&&pt(o=n.prototype)&&o!==r.prototype&&cr(t,o),t},os=w((function(t){var e=qe.f,r=Ei.forEach,n=ce.get,o=ce.set,i=ce.enforce,a=Ut.f,u=Ie.f,s=Math.round,c=S.RangeError,f=qu.ArrayBuffer,l=f.prototype,h=qu.DataView,p=Za.NATIVE_ARRAY_BUFFER_VIEWS,v=Za.TYPED_ARRAY_TAG,d=Za.TypedArray,y=Za.TypedArrayPrototype,g=Za.aTypedArrayConstructor,m=Za.isTypedArray,b=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},x=function(t,e){pr(t,e,{configurable:!0,get:function(){return n(this)[e]}})},w=function(t){var e;return Tt(l,t)||"ArrayBuffer"==(e=me(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!It(e)&&e in t&&Yu(+e)&&e>=0},A=function(t,e){return e=Ft(e),E(t,e)?te(2,t[e]):u(t,e)},O=function(t,e,r){return e=Ft(e),!(E(t,e)&&pt(r)&&U(r,"value"))||U(r,"get")||U(r,"set")||r.configurable||U(r,"writable")&&!r.writable||U(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};lt?(p||(Ie.f=A,Ut.f=O,x(y,"buffer"),x(y,"byteOffset"),x(y,"byteLength"),x(y,"length")),ir({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:O}),t.exports=function(t,u,l){var g=t.match(/\\d+/)[0]/8,x=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,O=S[x],T=O,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?Qa&&(T=u((function(t,e,r,n){return gr(t,k),ns(pt(e)?w(e)?void 0!==n?new O(e,Qu(r,g),n):void 0!==r?new O(e,Qu(r,g)):new O(e):m(e)?b(T,e):At(rs,T,e):new O(tu(e)),t,T)})),cr&&cr(T,d),r(e(O),(function(t){t in T||ee(T,t,O[t])})),T.prototype=k):(T=u((function(t,e,r,n){gr(t,k);var i,a,u,s=0,l=0;if(pt(e)){if(!w(e))return m(e)?b(T,e):At(rs,T,e);i=e,l=Qu(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=De(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=tu(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),cr&&cr(T,d),k=T.prototype=Yi(y)),k.constructor!==T&&ee(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ee(k,v,x);var P=T!=O;I[x]=T,ir({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ee(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ee(k,"BYTES_PER_ELEMENT",g),dr(x)}):t.exports=function(){}}));os("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var is=TypeError,as=function(t,e){if(!delete t[e])throw is("Cannot delete property "+Pt(e)+" of "+Pt(t))},us=Math.min,ss=N([].copyWithin||function(t,e){var r=z(this),n=Fe(r),o=Ne(t,n),i=Ne(e,n),a=arguments.length>2?arguments[2]:void 0,u=us((void 0===a?n:Ne(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:as(r,o),o+=s,i+=s;return r}),cs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("copyWithin",(function(t,e){return ss(cs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var fs=Ei.every,ls=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("every",(function(t){return fs(ls(this),t,arguments.length>1?arguments[1]:void 0)}));var hs=Za.aTypedArray,ps=Za.exportTypedArrayMethod,vs=N("".slice);ps("fill",(function(t){var e=arguments.length;hs(this);var r="Big"===vs(me(this),0,3)?ts(t):+t;return At(cu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),P((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var ds=Za.aTypedArrayConstructor,ys=Za.getTypedArrayConstructor,gs=function(t){return ds(Rr(t,ys(t)))},ms=function(t,e){return function(t,e){for(var r=0,n=Fe(e),o=new t(n);n>r;)o[r]=e[r++];return o}(gs(t),e)},bs=Ei.filter,xs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("filter",(function(t){var e=bs(xs(this),t,arguments.length>1?arguments[1]:void 0);return ms(this,e)}));var ws=Ei.find,Es=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("find",(function(t){return ws(Es(this),t,arguments.length>1?arguments[1]:void 0)}));var As=Ei.findIndex,Os=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("findIndex",(function(t){return As(Os(this),t,arguments.length>1?arguments[1]:void 0)}));var Ss=Ei.forEach,Ts=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("forEach",(function(t){Ss(Ts(this),t,arguments.length>1?arguments[1]:void 0)}));var ks=ze.includes,Is=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("includes",(function(t){return ks(Is(this),t,arguments.length>1?arguments[1]:void 0)}));var js=ze.indexOf,Ps=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("indexOf",(function(t){return js(Ps(this),t,arguments.length>1?arguments[1]:void 0)}));var _s=ot("iterator"),Ms=S.Uint8Array,Ls=N(Aa.values),Rs=N(Aa.keys),Ns=N(Aa.entries),Cs=Za.aTypedArray,Ds=Za.exportTypedArrayMethod,Fs=Ms&&Ms.prototype,Ws=!P((function(){Fs[_s].call([1])})),zs=!!Fs&&Fs.values&&Fs[_s]===Fs.values&&"values"===Fs.values.name,Bs=function(){return Ls(Cs(this))};Ds("entries",(function(){return Ns(Cs(this))}),Ws),Ds("keys",(function(){return Rs(Cs(this))}),Ws),Ds("values",Bs,Ws||!zs,{name:"values"}),Ds(_s,Bs,Ws||!zs,{name:"values"});var Us=Za.aTypedArray,Gs=Za.exportTypedArrayMethod,Vs=N([].join);Gs("join",(function(t){return Vs(Us(this),t)}));var Hs=Math.min,qs=[].lastIndexOf,Zs=!!qs&&1/[1].lastIndexOf(1,-0)<0,Ys=Ai("lastIndexOf"),$s=Zs||!Ys?function(t){if(Zs)return Fr(qs,this,arguments)||0;var e=Te(this),r=Fe(e),n=r-1;for(arguments.length>1&&(n=Hs(n,Me(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:qs,Ks=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Fr($s,Ks(this),e>1?[t,arguments[1]]:[t])}));var Qs=Ei.map,Xs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("map",(function(t){return Qs(Xs(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(gs(t))(e)}))}));var Js=TypeError,tc=function(t){return function(e,r,n,o){Mt(r);var i=z(e),a=Se(i),u=Fe(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw Js("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ec={left:tc(!1),right:tc(!0)},rc=ec.left,nc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return rc(nc(this),t,e,e>1?arguments[1]:void 0)}));var oc=ec.right,ic=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return oc(ic(this),t,e,e>1?arguments[1]:void 0)}));var ac=Za.aTypedArray,uc=Za.exportTypedArrayMethod,sc=Math.floor;uc("reverse",(function(){for(var t,e=ac(this).length,r=sc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var cc=S.RangeError,fc=S.Int8Array,lc=fc&&fc.prototype,hc=lc&&lc.set,pc=Za.aTypedArray,vc=Za.exportTypedArrayMethod,dc=!P((function(){var t=new Uint8ClampedArray(2);return At(hc,t,{length:1,0:3},1),3!==t[1]})),yc=dc&&Za.NATIVE_ARRAY_BUFFER_VIEWS&&P((function(){var t=new fc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));vc("set",(function(t){pc(this);var e=Qu(arguments.length>1?arguments[1]:void 0,1),r=z(t);if(dc)return At(hc,this,r,e);var n=this.length,o=Fe(r),i=0;if(o+e>n)throw cc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!dc||yc);var gc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Gr(gc(this),t,e),n=gs(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),P((function(){new Int8Array(1).slice()})));var mc=Ei.some,bc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("some",(function(t){return mc(bc(this),t,arguments.length>1?arguments[1]:void 0)}));var xc=Math.floor,wc=function(t,e){var r=t.length,n=xc(r/2);return r<8?Ec(t,e):Ac(t,wc(hu(t,0,n),e),wc(hu(t,n),e),e)},Ec=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ac=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},Oc=wc,Sc=Z.match(/firefox\\/(\\d+)/i),Tc=!!Sc&&+Sc[1],kc=/MSIE|Trident/.test(Z),Ic=Z.match(/AppleWebKit\\/(\\d+)\\./),jc=!!Ic&&+Ic[1],Pc=Za.aTypedArray,_c=Za.exportTypedArrayMethod,Mc=S.Uint16Array,Lc=Mc&&Wr(Mc.prototype.sort),Rc=!(!Lc||P((function(){Lc(new Mc(2),null)}))&&P((function(){Lc(new Mc(2),{})}))),Nc=!!Lc&&!P((function(){if(X)return X<74;if(Tc)return Tc<67;if(kc)return!0;if(jc)return jc<602;var t,e,r=new Mc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Lc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));_c("sort",(function(t){return void 0!==t&&Mt(t),Nc?Lc(this,t):Oc(Pc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!Nc||Rc);var Cc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("subarray",(function(t,e){var r=Cc(this),n=r.length,o=Ne(t,n);return new(gs(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,De((void 0===e?n:Ne(e,n))-o))}));var Dc=S.Int8Array,Fc=Za.aTypedArray,Wc=Za.exportTypedArrayMethod,zc=[].toLocaleString,Bc=!!Dc&&P((function(){zc.call(new Dc(1))}));Wc("toLocaleString",(function(){return Fr(zc,Bc?Gr(Fc(this)):Fc(this),Gr(arguments))}),P((function(){return[1,2].toLocaleString()!=new Dc([1,2]).toLocaleString()}))||!P((function(){Dc.prototype.toLocaleString.call([1,2])})));var Uc=Za.exportTypedArrayMethod,Gc=S.Uint8Array,Vc=Gc&&Gc.prototype||{},Hc=[].toString,qc=N([].join);P((function(){Hc.call({})}))&&(Hc=function(){return qc(this)});var Zc=Vc.toString!=Hc;Uc("toString",Hc,Zc),ir({target:"Array",proto:!0},{fill:cu}),ea("fill");var Yc,$c,Kc=String,Qc=function(t){if("Symbol"===me(t))throw TypeError("Cannot convert a Symbol value to a string");return Kc(t)},Xc=function(){var t=wt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Jc=S.RegExp,tf=P((function(){var t=Jc("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),ef=tf||P((function(){return!Jc("a","y").sticky})),rf={BROKEN_CARET:tf||P((function(){var t=Jc("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:ef,UNSUPPORTED_Y:tf},nf=S.RegExp,of=P((function(){var t=nf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),af=S.RegExp,uf=P((function(){var t=af("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),sf=ce.get,cf=j("native-string-replace",String.prototype.replace),ff=RegExp.prototype.exec,lf=ff,hf=N("".charAt),pf=N("".indexOf),vf=N("".replace),df=N("".slice),yf=($c=/b*/g,At(ff,Yc=/a/,"a"),At(ff,$c,"a"),0!==Yc.lastIndex||0!==$c.lastIndex),gf=rf.BROKEN_CARET,mf=void 0!==/()??/.exec("")[1];(yf||mf||gf||of||uf)&&(lf=function(t){var e,r,n,o,i,a,u,s=this,c=sf(s),f=Qc(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=At(lf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=gf&&s.sticky,v=At(Xc,s),d=s.source,y=0,g=f;if(p&&(v=vf(v,"y",""),-1===pf(v,"g")&&(v+="g"),g=df(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==hf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),mf&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),yf&&(n=s.lastIndex),o=At(ff,p?r:s,g),p?o?(o.input=df(o.input,y),o[0]=df(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:yf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),mf&&o&&o.length>1&&At(cf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Yi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var bf=lf;ir({target:"RegExp",proto:!0,forced:/./.exec!==bf},{exec:bf});var xf,wf=ot("species"),Ef=RegExp.prototype,Af=function(t,e,r,n){var o=ot(t),i=!P((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!P((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[wf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=Wr(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=Wr(t),s=e.exec;return s===bf||s===Ef.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));le(String.prototype,t,s[0]),le(Ef,o,s[1])}n&&ee(Ef[o],"sham",!0)},Of=N("".charAt),Sf=N("".charCodeAt),Tf=N("".slice),kf=function(t){return function(e,r){var n,o,i=Qc(F(e)),a=Me(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Sf(i,a))<55296||n>56319||a+1===u||(o=Sf(i,a+1))<56320||o>57343?t?Of(i,a):n:t?Tf(i,a,a+2):o-56320+(n-55296<<10)+65536}},If={codeAt:kf(!1),charAt:kf(!0)},jf=If.charAt,Pf=function(t,e,r){return e+(r?jf(t,e).length:1)},_f=Math.floor,Mf=N("".charAt),Lf=N("".replace),Rf=N("".slice),Nf=/\\$([$&'\`]|\\d{1,2}|<[^>]*>)/g,Cf=/\\$([$&'\`]|\\d{1,2})/g,Df=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Cf;return void 0!==o&&(o=z(o),s=Nf),Lf(i,s,(function(i,s){var c;switch(Mf(s,0)){case"$":return"$";case"&":return t;case"\`":return Rf(e,0,r);case"'":return Rf(e,a);case"<":c=o[Rf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=_f(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Mf(s,1):n[l-1]+Mf(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Ff=TypeError,Wf=function(t,e){var r=t.exec;if(ft(r)){var n=At(r,t,e);return null!==n&&wt(n),n}if("RegExp"===ve(t))return At(bf,t,e);throw Ff("RegExp#exec called on incompatible receiver")},zf=ot("replace"),Bf=Math.max,Uf=Math.min,Gf=N([].concat),Vf=N([].push),Hf=N("".indexOf),qf=N("".slice),Zf="$0"==="a".replace(/./,"$0"),Yf=!!/./[zf]&&""===/./[zf]("a","$0");function $f(t){this.message=t}Af("replace",(function(t,e,r){var n=Yf?"$":"$0";return[function(t,r){var n=F(this),o=C(t)?void 0:Lt(t,zf);return o?At(o,t,n,r):At(e,Qc(n),t,r)},function(t,o){var i=wt(this),a=Qc(t);if("string"==typeof o&&-1===Hf(o,n)&&-1===Hf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=ft(o);s||(o=Qc(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Wf(i,a);if(null===h)break;if(Vf(l,h),!c)break;""===Qc(h[0])&&(i.lastIndex=Pf(a,De(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=Qc((h=l[y])[0]),m=Bf(Uf(Me(h.index),a.length),0),b=[],x=1;x<h.length;x++)Vf(b,void 0===(p=h[x])?p:String(p));var w=h.groups;if(s){var E=Gf([g],b,m,a);void 0!==w&&Vf(E,w);var A=Qc(Fr(o,void 0,E))}else A=Df(g,a,m,b,w,o);m>=d&&(v+=qf(a,d,m)+A,d=m+g.length)}return v+qf(a,d)}]}),!!P((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Zf||Yf),$f.prototype=new Error,$f.prototype.name="InvalidCharacterError",ir({global:!0,forced:S.globalThis!==S},{globalThis:S}),xf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:xf.devicePixelRatio;var Kf=TypeError,Qf=Object.getOwnPropertyDescriptor,Xf=lt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!Qf(t,"length").writable)throw Kf("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Jf=TypeError,tl=function(t){if(t>9007199254740991)throw Jf("Maximum allowed index exceeded");return t},el=Pi("splice"),rl=Math.max,nl=Math.min;ir({target:"Array",proto:!0,forced:!el},{splice:function(t,e){var r,n,o,i,a,u,s=z(this),c=Fe(s),f=Ne(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=nl(rl(Me(e),0),c-f)),tl(c+r-n),o=bi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:as(s,u);for(i=c;i>c-n+r;i--)as(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:as(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return Xf(s,c-n+r),o}});var ol=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),il=Object.assign,al=Object.defineProperty,ul=N([].concat),sl=!il||P((function(){if(lt&&1!==il({b:1},il(al({},"a",{enumerable:!0,get:function(){al(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=il({},t)[r]||"abcdefghijklmnopqrst"!=Bi(il({},e)).join("")}))?function(t,e){for(var r=z(t),n=arguments.length,o=1,i=Ze.f,a=Ee.f;n>o;)for(var u,s=Se(arguments[o++]),c=i?ul(Bi(s),i(s)):Bi(s),f=c.length,l=0;f>l;)u=c[l++],lt&&!At(a,s,u)||(r[u]=s[u]);return r}:il;ir({target:"Object",stat:!0,arity:2,forced:Object.assign!==sl},{assign:sl});var cl=Ei.findIndex,fl=!0;"findIndex"in[]&&Array(1).findIndex((function(){fl=!1})),ir({target:"Array",proto:!0,forced:fl},{findIndex:function(t){return cl(this,t,arguments.length>1?arguments[1]:void 0)}}),ea("findIndex");var ll=If.charAt,hl=ce.set,pl=ce.getterFor("String Iterator");ma(String,"String",(function(t){hl(this,{type:"String Iterator",string:Qc(t),index:0})}),(function(){var t,e=pl(this),r=e.string,n=e.index;return n>=r.length?ba(void 0,!0):(t=ll(r,n),e.index+=t.length,ba(t,!1))}));var vl=!P((function(){return Object.isExtensible(Object.preventExtensions({}))})),dl=qe.f,yl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gl={f:function(t){return yl&&"Window"==ve(t)?function(t){try{return dl(t)}catch(t){return hu(yl)}}(t):dl(Te(t))}},ml=P((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),bl=Object.isExtensible,xl=P((function(){bl(1)}))||ml?function(t){return!!pt(t)&&((!ml||"ArrayBuffer"!=ve(t))&&(!bl||bl(t)))}:bl,wl=w((function(t){var e=Ut.f,r=!1,n=q("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=qe.f,e=N([].splice),o={};o[n]=1,t(o).length&&(qe.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ir({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gl.f}))},fastKey:function(t,e){if(!pt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!U(t,n)){if(!xl(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!U(t,n)){if(!xl(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return vl&&r&&xl(t)&&!U(t,n)&&i(t),t}};oe[n]=!0})),El=(wl.enable,wl.fastKey,wl.getWeakData,wl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=S[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=N(u[t]);le(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!pt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!pt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!pt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(nr(t,!ft(a)||!(o||u.forEach&&!P((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),wl.enable();else if(nr(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=P((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&P((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){gr(t,u);var r=ns(new a,t,s);return C(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ir({global:!0,constructor:!0,forced:s!=a},c),hr(s,t),o||r.setStrong(s,t,n),s}),Al=wl.getWeakData,Ol=ce.set,Sl=ce.getterFor,Tl=Ei.find,kl=Ei.findIndex,Il=N([].splice),jl=0,Pl=function(t){return t.frozen||(t.frozen=new _l)},_l=function(){this.entries=[]},Ml=function(t,e){return Tl(t.entries,(function(t){return t[0]===e}))};_l.prototype={get:function(t){var e=Ml(this,t);if(e)return e[1]},has:function(t){return!!Ml(this,t)},set:function(t,e){var r=Ml(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=kl(this.entries,(function(e){return e[0]===t}));return~e&&Il(this.entries,e,1),!!~e}};var Ll,Rl={getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Ol(t,{type:e,id:jl++,frozen:void 0}),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Sl(e),u=function(t,e,r){var n=a(t),o=Al(wt(e),!0);return!0===o?Pl(n).set(e,r):o[n.id]=r,t};return Xa(i,{delete:function(t){var e=a(this);if(!pt(t))return!1;var r=Al(t);return!0===r?Pl(e).delete(t):r&&U(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!pt(t))return!1;var r=Al(t);return!0===r?Pl(e).has(t):r&&U(r,e.id)}}),Xa(i,r?{get:function(t){var e=a(this);if(pt(t)){var r=Al(t);return!0===r?Pl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},Nl=ce.enforce,Cl=Object,Dl=Array.isArray,Fl=Cl.isExtensible,Wl=Cl.isFrozen,zl=Cl.isSealed,Bl=Cl.freeze,Ul=Cl.seal,Gl={},Vl={},Hl=!S.ActiveXObject&&"ActiveXObject"in S,ql=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Zl=El("WeakMap",ql,Rl),Yl=Zl.prototype,$l=N(Yl.set);if(Jt)if(Hl){Ll=Rl.getConstructor(ql,"WeakMap",!0),wl.enable();var Kl=N(Yl.delete),Ql=N(Yl.has),Xl=N(Yl.get);Xa(Yl,{delete:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Kl(this,t)||e.frozen.delete(t)}return Kl(this,t)},has:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Ql(this,t)||e.frozen.has(t)}return Ql(this,t)},get:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Ql(this,t)?Xl(this,t):e.frozen.get(t)}return Xl(this,t)},set:function(t,e){if(pt(t)&&!Fl(t)){var r=Nl(this);r.frozen||(r.frozen=new Ll),Ql(this,t)?$l(this,t,e):r.frozen.set(t,e)}else $l(this,t,e);return this}})}else vl&&P((function(){var t=Bl([]);return $l(new Zl,t,1),!Wl(t)}))&&Xa(Yl,{set:function(t,e){var r;return Dl(t)&&(Wl(t)?r=Gl:zl(t)&&(r=Vl)),$l(this,t,e),r==Gl&&Bl(t),r==Vl&&Ul(t),this}});var Jl=ot("iterator"),th=ot("toStringTag"),eh=Aa.values,rh=function(t,e){if(t){if(t[Jl]!==eh)try{ee(t,Jl,eh)}catch(e){t[Jl]=eh}if(t[th]||ee(t,th,e),hi[e])for(var r in Aa)if(t[r]!==Aa[r])try{ee(t,r,Aa[r])}catch(e){t[r]=Aa[r]}}};for(var nh in hi)rh(S[nh]&&S[nh].prototype,nh);rh(di,"DOMTokenList");var oh,ih,ah,uh,sh=new WeakMap,ch=function(){function t(){i(this,t),sh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=sh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),sh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=sh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=sh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),fh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ch));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var lh=my.getSystemInfoSync();oh=lh.screenWidth,ih=lh.screenHeight,ah=lh.windowWidth,uh=lh.windowHeight}else{var hh=xf.innerWidth,ph=xf.innerHeight;oh=hh,ih=ph,ah=hh,uh=ph}var vh={width:oh,height:ih,availWidth:ah,availHeight:uh,availLeft:0,availTop:0},dh=vh.availWidth,yh=vh.availHeight,gh={style:[]};function mh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return gh}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return gh}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function bh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:dh+"px",height:yh+"px",margin:"0px",padding:"0px"})}function xh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=dh,t.clientHeight=yh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function wh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=dh,t.offsetHeight=yh)}function Eh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=dh,t.scrollHeight=yh)}function Ah(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function Oh(){}var Sh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=Oh,t.blur=Oh,t.insertBefore=Oh,t.appendChild=Oh,t.removeChild=Oh,t.remove=Oh,t.innerHTML="",t.tagName=n.toUpperCase(),mh(h(t),o),bh(h(t)),Ah(h(t)),xh(h(t)),wh(h(t)),Eh(h(t)),t}return u(r)}(fh),Th=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(Sh)),kh={};function Ih(){return kh}var jh=u((function t(){i(this,t);var e=Ih(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),mh(r),Ah(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Ph={href:"",protocol:"",host:""},_h=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(Sh),Mh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(Sh),Lh={},Rh={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Ph,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new jh:"video"===t?new Th:new Sh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){Lh[t]||(Lh[t]=[]),Lh[t].push(e)},removeEventListener:function(t,e){var r=Lh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=Lh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new ol(t)}};Rh.documentElement=new Mh,Rh.head=new Sh("head"),Rh.body=new _h,Af("match",(function(t,e,r){return[function(e){var r=F(this),n=C(e)?void 0:Lt(e,t);return n?At(n,e,r):new RegExp(e)[t](Qc(r))},function(t){var n=wt(this),o=Qc(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Wf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Wf(n,o));){var f=Qc(u[0]);s[c]=f,""===f&&(n.lastIndex=Pf(o,De(n.lastIndex),a)),c++}return 0===c?null:s}]}));var Nh,Ch,Dh=ot("isConcatSpreadable"),Fh=X>=51||!P((function(){var t=[];return t[Dh]=!1,t.concat()[0]!==t})),Wh=function(t){if(!pt(t))return!1;var e=t[Dh];return void 0!==e?!!e:yi(t)},zh=!Fh||!Pi("concat");if(ir({target:"Array",proto:!0,arity:1,forced:zh},{concat:function(t){var e,r,n,o,i,a=z(this),u=bi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Wh(i=-1===e?a:arguments[e]))for(o=Fe(i),tl(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else tl(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Bh=my.getSystemInfoSync();Nh=Bh.system,Bh.platform,Bh.language}else{var Uh={versions:(Ch=xf.navigator.userAgent,{trident:Ch.indexOf("Trident")>-1,presto:Ch.indexOf("Presto")>-1,webKit:Ch.indexOf("AppleWebKit")>-1,gecko:Ch.indexOf("Gecko")>-1&&-1===Ch.indexOf("KHTML"),mobile:!!Ch.match(/AppleWebKit.*Mobile.*/),ios:!!Ch.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Ch.indexOf("Android")>-1||Ch.indexOf("Linux")>-1,iPhone:Ch.indexOf("iPhone")>-1,iPad:Ch.indexOf("iPad")>-1,webApp:-1===Ch.indexOf("Safari"),weixin:Ch.indexOf("MicroMessenger")>-1,qq:" qq"===Ch.match(/\\sQQ/i)}),language:(xf.navigator.browserLanguage||xf.navigator.language).toLowerCase()};Uh.versions.android?"android":Uh.versions.trident?"IE":Uh.versions.presto?"Opera":Uh.versions.webKit?"webKit":Uh.versions.gecko?"Firefox":Uh.versions.mobile?"mobile":Uh.versions.ios?"ios":Uh.versions.iPhone?"iPhone":Uh.versions.iPad?"ipad":Uh.versions.webApp?"webApp":Uh.versions.weixin?"weixin":Uh.versions.qq&&"qq",Nh=xf.navigator.userAgent,Uh.language}Nh.toLowerCase().indexOf("android");os("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Gh=wl.fastKey,Vh=ce.set,Hh=ce.getterFor;El("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Vh(t,{type:e,index:Yi(null),first:void 0,last:void 0,size:0}),lt||(t.size=0),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Hh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=Gh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),lt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=Gh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return Xa(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,lt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),lt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=Br(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Xa(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),lt&&pr(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Hh(e),i=Hh(n);ma(t,e,(function(t,e){Vh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?ba("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,ba(void 0,!0))}),r?"entries":"values",!r,!0),dr(e)}});var qh=N([].join),Zh=Se!=Object||!Ai("join",",");ir({target:"Array",proto:!0,forced:Zh},{join:function(t){return qh(Te(this),void 0===t?",":t)}});var Yh=Ei.map,$h=Pi("map");ir({target:"Array",proto:!0,forced:!$h},{map:function(t){return Yh(this,t,arguments.length>1?arguments[1]:void 0)}});var Kh=P((function(){Bi(1)}));ir({target:"Object",stat:!0,forced:Kh},{keys:function(t){return Bi(z(t))}});var Qh=new Map,Xh=new Map,Jh=new Map,tp=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Qh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=Jh.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Xh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Xh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Qh.get("requestHeader");r[t]=e,Qh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ch);s(tp,"UNSEND",void 0),s(tp,"OPENED",void 0),s(tp,"HEADERS_RECEIVED",void 0),s(tp,"LOADING",void 0),s(tp,"DONE",void 0),tp.UNSEND=0,tp.OPENED=1,tp.HEADERS_RECEIVED=2,tp.LOADING=3,tp.DONE=4;var ep="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,rp="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),np=(ep||rp)&&!1;np||xf.XMLHttpRequest,np||xf.location;function op(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ip=Ei.filter,ap=Pi("filter");function up(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function sp(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function cp(t){return t.filter?[1]:[0]}function fp(t,e){return[e]}ir({target:"Array",proto:!0,forced:!ap},{filter:function(t){return ip(this,t,arguments.length>1?arguments[1]:void 0)}});var lp=pp,hp=pp;function pp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=vp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=vp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(Sp(s));for(c.sort(wp),o=0;o<c.length;o++)r=Ep(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return yp(h,p,r,n,o,c,0),p}function vp(t,e,r,n,o){var i,a;if(o===Fp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=Np(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=Np(i,t[i],t[i+1],a);return a&&jp(a,a.next)&&(Cp(a),a=a.next),a}function dp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!jp(n,n.next)&&0!==Ip(n.prev,n,n.next))n=n.next;else{if(Cp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function yp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=Op(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?mp(t,n,o,i):gp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Cp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?yp(t=bp(dp(t),e,r),e,r,n,o,i,2):2===a&&xp(t,e,r,n,o,i):yp(dp(t),e,r,n,o,i,1);break}}}function gp(t){var e=t.prev,r=t,n=t.next;if(Ip(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Tp(o,u,i,s,a,c,v.x,v.y)&&Ip(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function mp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Ip(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=Op(p,v,e,r,n),m=Op(d,y,e,r,n),b=t.prevZ,x=t.nextZ;b&&b.z>=g&&x&&x.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Tp(u,f,s,l,c,h,b.x,b.y)&&Ip(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Tp(u,f,s,l,c,h,x.x,x.y)&&Ip(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Tp(u,f,s,l,c,h,b.x,b.y)&&Ip(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Tp(u,f,s,l,c,h,x.x,x.y)&&Ip(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function bp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!jp(o,i)&&Pp(o,n,n.next,i)&&Lp(o,i)&&Lp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Cp(n),Cp(n.next),n=t=i),n=n.next}while(n!==t);return dp(n)}function xp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&kp(a,u)){var s=Rp(a,u);return a=dp(a,a.next),s=dp(s,s.next),yp(a,e,r,n,o,i,0),void yp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function wp(t,e){return t.x-e.x}function Ep(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Tp(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),Lp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&Ap(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Rp(r,t);return dp(n,n.next),dp(r,r.next)}function Ap(t,e){return Ip(t.prev,t,e.prev)<0&&Ip(e.next,t,t.next)<0}function Op(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Sp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Tp(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function kp(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Pp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Lp(t,e)&&Lp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Ip(t.prev,t,e.prev)||Ip(t,e.prev,e))||jp(t,e)&&Ip(t.prev,t,t.next)>0&&Ip(e.prev,e,e.next)>0)}function Ip(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function jp(t,e){return t.x===e.x&&t.y===e.y}function Pp(t,e,r,n){var o=Mp(Ip(t,e,r)),i=Mp(Ip(t,e,n)),a=Mp(Ip(r,n,t)),u=Mp(Ip(r,n,e));return o!==i&&a!==u||(!(0!==o||!_p(t,r,e))||(!(0!==i||!_p(t,n,e))||(!(0!==a||!_p(r,t,n))||!(0!==u||!_p(r,e,n)))))}function _p(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Mp(t){return t>0?1:t<0?-1:0}function Lp(t,e){return Ip(t.prev,t,t.next)<0?Ip(t,e,t.next)>=0&&Ip(t,t.prev,e)>=0:Ip(t,e,t.prev)<0||Ip(t,t.next,e)<0}function Rp(t,e){var r=new Dp(t.i,t.x,t.y),n=new Dp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function Np(t,e,r,n){var o=new Dp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Cp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}pp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Fp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Fp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},pp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},lp.default=hp;var Wp=S,zp=N(1..valueOf),Bp="\\t\\n\\v\\f\\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\\ufeff",Up=N("".replace),Gp=RegExp("^["+Bp+"]+"),Vp=RegExp("(^|[^"+Bp+"])["+Bp+"]+$"),Hp=function(t){return function(e){var r=Qc(F(e));return 1&t&&(r=Up(r,Gp,"")),2&t&&(r=Up(r,Vp,"$1")),r}},qp={start:Hp(1),end:Hp(2),trim:Hp(3)},Zp=qe.f,Yp=Ie.f,$p=Ut.f,Kp=qp.trim,Qp=S.Number,Xp=(Wp.Number,Qp.prototype),Jp=S.TypeError,tv=N("".slice),ev=N("".charCodeAt),rv=function(t){var e=Dt(t,"number");return"bigint"==typeof e?e:nv(e)},nv=function(t){var e,r,n,o,i,a,u,s,c=Dt(t,"number");if(It(c))throw Jp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Kp(c),43===(e=ev(c,0))||45===e){if(88===(r=ev(c,2))||120===r)return NaN}else if(48===e){switch(ev(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=tv(c,2)).length,u=0;u<a;u++)if((s=ev(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c},ov=nr("Number",!Qp(" 0o1")||!Qp("0b1")||Qp("+0x1")),iv=function(t){return Tt(Xp,t)&&P((function(){zp(t)}))},av=function(t){var e=arguments.length<1?0:Qp(rv(t));return iv(this)?ns(Object(e),this,av):e};av.prototype=Xp,ov&&(Xp.constructor=av),ir({global:!0,constructor:!0,wrap:!0,forced:ov},{Number:av});ov&&function(t,e){for(var r,n=lt?Zp(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)U(e,r=n[o])&&!U(t,r)&&$p(t,r,Yp(e,r))}(Wp.Number,Qp);var uv=RangeError,sv=RangeError,cv=String,fv=Math.floor,lv=N((function(t){var e=Qc(F(this)),r="",n=Me(t);if(n<0||n==1/0)throw uv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),hv=N("".slice),pv=N(1..toFixed),vv=function(t,e,r){return 0===e?r:e%2==1?vv(t,e-1,r*t):vv(t*t,e/2,r)},dv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=fv(o/1e7)},yv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=fv(n/e),n=n%e*1e7},gv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=cv(t[e]);r=""===r?n:r+lv("0",7-n.length)+n}return r},mv=P((function(){return"0.000"!==pv(8e-5,3)||"1"!==pv(.9,0)||"1.25"!==pv(1.255,2)||"1000000000000000128"!==pv(0xde0b6b3a7640080,0)}))||!P((function(){pv({})}));function bv(t){return"number"==typeof t}function xv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ir({target:"Number",proto:!0,forced:mv},{toFixed:function(t){var e,r,n,o,i=zp(this),a=Me(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw sv("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return cv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*vv(2,69,1))-69)<0?i*vv(2,-e,1):i/vv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(dv(u,0,r),n=a;n>=7;)dv(u,1e7,0),n-=7;for(dv(u,vv(10,n,1),0),n=e-1;n>=23;)yv(u,1<<23),n-=23;yv(u,1<<n),dv(u,1,1),yv(u,2),c=gv(u)}else dv(u,0,r),dv(u,1<<-e,0),c=gv(u)+lv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+lv("0",a-o)+c:hv(c,0,o-a)+"."+hv(c,o-a)):s+c}});var wv,Ev=/"/g,Av=N("".replace);ir({target:"String",proto:!0,forced:(wv="sub",P((function(){var t=""[wv]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{sub:function(){return t="sub",e="",r="",n=Qc(F(this)),o="<"+t,""!==e&&(o+=" "+e+'="'+Av(Qc(r),Ev,"&quot;")+'"'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var Ov=RegExp.prototype,Sv=qt.PROPER,Tv=RegExp.prototype.toString,kv=P((function(){return"/a/b"!=Tv.call({source:"a",flags:"b"})})),Iv=Sv&&"toString"!=Tv.name;(kv||Iv)&&le(RegExp.prototype,"toString",(function(){var t=wt(this);return"/"+Qc(t.source)+"/"+Qc(function(t){var e=t.flags;return void 0!==e||"flags"in Ov||U(t,"flags")||!Tt(Ov,t)?e:At(Xc,t)}(t))}),{unsafe:!0});var jv="undefined"!=typeof Float32Array?Float32Array:Array;function Pv(){var t=new jv(2);return jv!=Float32Array&&(t[0]=0,t[1]=0),t}function _v(t,e){var r=new jv(2);return r[0]=t,r[1]=e,r}function Mv(t,e){return t[0]=e[0],t[1]=e[1],t}function Lv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Rv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Nv(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Cv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Dv,Fv=Rv,Wv=(Dv=Pv(),Pv()),zv=(Pv(),Pv()),Bv=Pv(),Uv=Pv();function Gv(t,e,r,n,o){return Lv(t,r,n),Nv(t,t),[o/Cv(e=_v(-t[1],t[0]),_v(-r[1],r[0])),e]}function Vv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Hv(t,e,r){return Fv(t,e,r),Nv(t,t),t}function qv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Zv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",_v(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=xv([a[0],a[1]]),g=xv([i[0],i[1]]);Hv(zv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),!this.started)if(this.started=!0,h){var b=Pv(),x=Pv();Lv(b,this.normal,zv),Lv(x,this.normal,zv),l.push(x[0],x[1],0),l.push(b[0],b[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){qv(n,o)&&Lv(o,n,Nv(o,Rv(o,n,r))),Hv(Bv,o,n);var w=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),E=w[0],A=w[1],O=Cv(Uv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),Vv(Wv,Bv),Mv(this.normal,Wv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Mv(this.normal,A),s+=2),this.lastFlip=O}else{if(Vv(this.normal,zv),h){var T=Pv(),k=Pv();Fv(k,zv,this.normal),Lv(T,zv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=xv([n[0],n[1]]),f=xv([r[0],r[1]]);Hv(zv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=xv([o[0],o[1]]);qv(c,h)&&Lv(h,c,Nv(h,Rv(h,c,f))),Hv(Bv,h,c);var p=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),v=p[0],g=p[1];Cv(Uv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Mv(this.normal,g),i+=2,this.lastFlip=-1}else Vv(this.normal,zv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=xv([n[0],n[1]]),h=xv([r[0],r[1]]);Hv(zv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),!this.started)if(this.started=!0,c){var v=Pv(),g=Pv();Lv(v,this.normal,zv),Lv(g,this.normal,zv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=xv([o[0],o[1]]);qv(l,m)&&Lv(m,l,Nv(m,Rv(m,l,h))),Hv(Bv,m,l);var b=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),x=b[0],w=b[1],E=Cv(Uv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)x>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),Vv(Wv,Bv),Mv(this.normal,Wv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,x,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Mv(this.normal,w),i+=2),this.lastFlip=E}else{if(Vv(this.normal,zv),c){var O=Pv(),S=Pv();Fv(S,zv,this.normal),Lv(O,zv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Yv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Zv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function $v(t){var e=function(t){if(bv(t[0]))return t;if(bv(t[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(bv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function Kv(t){var e=t.coordinates,r=lp.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:lp(n,i,o),vertices:n,size:o}}var Qv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Yv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=$v(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Qv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=Kv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Jv=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Xv);function td(t){return ed.apply(this,arguments)}function ed(){return(ed=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!Jv[n]){t.next=3;break}return t.abrupt("return",Jv[n](o));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(td),t.WorkerSourceMap=Xv,t.createWorker=fi,t.worker=td,t}({});
`,Es="l7-worker",Wu=3,Fu=!0;function hu(I){Ps(Es,I)}function ql(){var I=Il(Es);if(!I)throw new Error("get worker failed by workerName: ".concat(Es,"."));return I}function Xu(I,z){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,su.Z)(Zo().mark(function I(z,$){var ee,ge,xe,gt,Ft;return Zo().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return ee=ql(),ge=ef.getWorkerFarm({maxConcurrency:Wu,reuseWorkers:Fu}),xe=ge.getWorkerPool({name:Es,source:ee}),Mt.next=5,xe.startJob(Es,function(En,lr,Di){return En.done(Di)});case 5:return gt=Mt.sent,gt.postMessage("process",{input:{workerType:z,data:$}}),Mt.next=9,gt.result;case 9:return Ft=Mt.sent,Mt.abrupt("return",Ft.result);case 11:case"end":return Mt.stop()}},I)})),Rl.apply(this,arguments)}hu(Qs)},7539:function(Ie,S,y){"use strict";y.d(S,{dWg:function(){return cs},YYg:function(){return Ll},xsS:function(){return Ly},Hw6:function(){return vs}});var E={},p={},M=function(l){return p[l]},d=function(l,i){p[l]=i},g=function(l){return E[l]},x=function(l,i){E[l]=i},v={},u={},t=34,e=10,o=13;function c(a){return new Function("d","return {"+a.map(function(l,i){return JSON.stringify(l)+": d["+i+'] || ""'}).join(",")+"}")}function b(a,l){var i=c(a);return function(r,n){return l(i(r),n,a)}}function A(a){var l=Object.create(null),i=[];return a.forEach(function(r){for(var n in r)n in l||i.push(l[n]=n)}),i}function w(a,l){var i=a+"",r=i.length;return r<l?new Array(l-r+1).join(0)+i:i}function D(a){return a<0?"-"+w(-a,6):a>9999?"+"+w(a,6):w(a,4)}function F(a){var l=a.getUTCHours(),i=a.getUTCMinutes(),r=a.getUTCSeconds(),n=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":D(a.getUTCFullYear(),4)+"-"+w(a.getUTCMonth()+1,2)+"-"+w(a.getUTCDate(),2)+(n?"T"+w(l,2)+":"+w(i,2)+":"+w(r,2)+"."+w(n,3)+"Z":r?"T"+w(l,2)+":"+w(i,2)+":"+w(r,2)+"Z":i||l?"T"+w(l,2)+":"+w(i,2)+"Z":"")}function Z(a){var l=new RegExp('["'+a+`
\r]`),i=a.charCodeAt(0);function r(re,Ce){var Ge,et,Je=n(re,function(Xt,cn){if(Ge)return Ge(Xt,cn-1);et=Xt,Ge=Ce?b(Xt,Ce):c(Xt)});return Je.columns=et||[],Je}function n(re,Ce){var Ge=[],et=re.length,Je=0,Xt=0,cn,xn=et<=0,On=!1;re.charCodeAt(et-1)===e&&--et,re.charCodeAt(et-1)===o&&--et;function ur(){if(xn)return u;if(On)return On=!1,v;var zr,Ir=Je,ii;if(re.charCodeAt(Ir)===t){for(;Je++<et&&re.charCodeAt(Je)!==t||re.charCodeAt(++Je)===t;);return(zr=Je)>=et?xn=!0:(ii=re.charCodeAt(Je++))===e?On=!0:ii===o&&(On=!0,re.charCodeAt(Je)===e&&++Je),re.slice(Ir+1,zr-1).replace(/""/g,'"')}for(;Je<et;){if((ii=re.charCodeAt(zr=Je++))===e)On=!0;else if(ii===o)On=!0,re.charCodeAt(Je)===e&&++Je;else if(ii!==i)continue;return re.slice(Ir,zr)}return xn=!0,re.slice(Ir,et)}for(;(cn=ur())!==u;){for(var _r=[];cn!==v&&cn!==u;)_r.push(cn),cn=ur();Ce&&(_r=Ce(_r,Xt++))==null||Ge.push(_r)}return Ge}function s(re,Ce){return re.map(function(Ge){return Ce.map(function(et){return J(Ge[et])}).join(a)})}function f(re,Ce){return Ce==null&&(Ce=A(re)),[Ce.map(J).join(a)].concat(s(re,Ce)).join(`
`)}function m(re,Ce){return Ce==null&&(Ce=A(re)),s(re,Ce).join(`
`)}function C(re){return re.map(B).join(`
`)}function B(re){return re.map(J).join(a)}function J(re){return re==null?"":re instanceof Date?F(re):l.test(re+="")?'"'+re.replace(/"/g,'""')+'"':re}return{parse:r,parseRows:n,format:f,formatBody:m,formatRows:C,formatRow:B,formatValue:J}}var L=Z(","),W=L.parse,k=L.parseRows,de=L.format,H=L.formatBody,ue=L.formatRows,ve=L.formatRow,ke=L.formatValue,Ae=y(74902),be=y(1413),G=y(38163),ie=y.n(G),V=y(1449);function ae(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function K(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function he(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return he(a[0]);throw new Error("coordinates must only contain numbers")}function Se(a,l,i){if(!l||!i)throw new Error("type and name required");if(!a||a.type!==l)throw new Error("Invalid input to "+i+": must be a "+l+", given "+a.type)}function Fe(a,l,i){if(!a)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!a.geometry||a.geometry.type!==l)throw new Error("Invalid input to "+i+": must be a "+l+", given "+a.geometry.type)}function nt(a,l,i){if(!a)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(var r=0,n=a.features;r<n.length;r++){var s=n[r];if(!s||s.type!=="Feature"||!s.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!s.geometry||s.geometry.type!==l)throw new Error("Invalid input to "+i+": must be a "+l+", given "+s.geometry.type)}}function lt(a){return a.type==="Feature"?a.geometry:a}function Gt(a,l){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var pn=y(39034);function $n(a,l){var i=l.x,r=l.y,n=l.x1,s=l.y1,f=l.coordinates,m=l.geometry,C=[];if(!Array.isArray(a))return{dataArray:[]};if(m)return a.filter(function(cn){return cn[m]&&cn[m].type&&cn[m].coordinates&&cn[m].coordinates.length>0}).forEach(function(cn,xn){var On=ie()((0,be.Z)({},cn[m]),!0);(0,pn.nG)(On,function(ur){var _r=K(ur),zr=(0,be.Z)((0,be.Z)({},cn),{},{_id:xn,coordinates:_r});C.push(zr)})}),{dataArray:C};for(var B=0;B<a.length;B++){var J=a[B],re=[];if(f){var Ce="Polygon";Array.isArray(f[0])||(Ce="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(Ce="LineString");var Ge=ie()({type:Ce,coordinates:(0,Ae.Z)(J[f])},!0);re=Ge.coordinates}else if(i&&r&&n&&s){var et=[parseFloat(J[i]),parseFloat(J[r])],Je=[parseFloat(J[n]),parseFloat(J[s])];re=[et,Je]}else i&&r&&(re=[parseFloat(J[i]),parseFloat(J[r])]);var Xt=(0,be.Z)((0,be.Z)({},J),{},{_id:B,coordinates:re});C.push(Xt)}return{dataArray:C}}function Ln(a,l){var i=W(a);return $n(i,l)}var st=y(71002);function xt(a){for(var l=a.toString(),i=5381,r=l.length;r;)i=i*33^l.charCodeAt(--r);return i>>>0}function tn(a,l){return l===void 0?null:(0,st.Z)(a.properties[l])*1==="number"?a.properties[l]*1:a.properties&&a.properties[l]?xt(a.properties[l]+"")%1000019:null}function Un(a,l){var i=[],r={};return a.features?(a.features=a.features.filter(function(n){var s=n.geometry;return n!=null&&s&&s.type&&s.coordinates&&s.coordinates.length>0}),ie()(a,!0),a.features.length===0?{dataArray:[],featureKeys:r}:((0,pn.nG)(a,function(n,s){var f=tn(n,l==null?void 0:l.featureId);f===null&&(f=s);var m=f,C=K(n),B=(0,be.Z)((0,be.Z)({},n.properties),{},{coordinates:C,_id:m});i.push(B)}),{dataArray:i,featureKeys:r})):(a.features=[],{dataArray:[]})}var We=y(15861),Yt=y(64687),Ze=y.n(Yt);function Pe(a,l,i,r){for(var n=r,s=i-l>>1,f=i-l,m,C=a[l],B=a[l+1],J=a[i],re=a[i+1],Ce=l+3;Ce<i;Ce+=3){var Ge=ze(a[Ce],a[Ce+1],C,B,J,re);if(Ge>n)m=Ce,n=Ge;else if(Ge===n){var et=Math.abs(Ce-s);et<f&&(m=Ce,f=et)}}n>r&&(m-l>3&&Pe(a,l,m,r),a[m+2]=n,i-m>3&&Pe(a,m,i,r))}function ze(a,l,i,r,n,s){var f=n-i,m=s-r;if(f!==0||m!==0){var C=((a-i)*f+(l-r)*m)/(f*f+m*m);C>1?(i=n,r=s):C>0&&(i+=f*C,r+=m*C)}return f=a-i,m=l-r,f*f+m*m}function ht(a,l,i,r){var n={id:typeof a=="undefined"?null:a,type:l,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return P(n),n}function P(a){var l=a.geometry,i=a.type;if(i==="Point"||i==="MultiPoint"||i==="LineString")ne(a,l);else if(i==="Polygon"||i==="MultiLineString")for(var r=0;r<l.length;r++)ne(a,l[r]);else if(i==="MultiPolygon")for(r=0;r<l.length;r++)for(var n=0;n<l[r].length;n++)ne(a,l[r][n])}function ne(a,l){for(var i=0;i<l.length;i+=3)a.minX=Math.min(a.minX,l[i]),a.minY=Math.min(a.minY,l[i+1]),a.maxX=Math.max(a.maxX,l[i]),a.maxY=Math.max(a.maxY,l[i+1])}function _e(a,l){var i=[];if(a.type==="FeatureCollection")for(var r=0;r<a.features.length;r++)oe(i,a.features[r],l,r);else a.type==="Feature"?oe(i,a,l):oe(i,{geometry:a},l);return i}function oe(a,l,i,r){if(l.geometry){var n=l.geometry.coordinates,s=l.geometry.type,f=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),m=[],C=l.id;if(i.promoteId?C=l.properties[i.promoteId]:i.generateId&&(C=r||0),s==="Point")ce(n,m);else if(s==="MultiPoint")for(var B=0;B<n.length;B++)ce(n[B],m);else if(s==="LineString")ye(n,m,f,!1);else if(s==="MultiLineString")if(i.lineMetrics){for(B=0;B<n.length;B++)m=[],ye(n[B],m,f,!1),a.push(ht(C,"LineString",m,l.properties));return}else Y(n,m,f,!1);else if(s==="Polygon")Y(n,m,f,!0);else if(s==="MultiPolygon")for(B=0;B<n.length;B++){var J=[];Y(n[B],J,f,!0),m.push(J)}else if(s==="GeometryCollection"){for(B=0;B<l.geometry.geometries.length;B++)oe(a,{id:C,geometry:l.geometry.geometries[B],properties:l.properties},i,r);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(ht(C,s,m,l.properties))}}function ce(a,l){l.push(Ne(a[0])),l.push(Qe(a[1])),l.push(0)}function ye(a,l,i,r){for(var n,s,f=0,m=0;m<a.length;m++){var C=Ne(a[m][0]),B=Qe(a[m][1]);l.push(C),l.push(B),l.push(0),m>0&&(r?f+=(n*B-C*s)/2:f+=Math.sqrt(Math.pow(C-n,2)+Math.pow(B-s,2))),n=C,s=B}var J=l.length-3;l[2]=1,Pe(l,0,J,i),l[J+2]=1,l.size=Math.abs(f),l.start=0,l.end=l.size}function Y(a,l,i,r){for(var n=0;n<a.length;n++){var s=[];ye(a[n],s,i,r),l.push(s)}}function Ne(a){return a/360+.5}function Qe(a){var l=Math.sin(a*Math.PI/180),i=.5-.25*Math.log((1+l)/(1-l))/Math.PI;return i<0?0:i>1?1:i}function mt(a,l,i,r,n,s,f,m){if(i/=l,r/=l,s>=i&&f<r)return a;if(f<i||s>=r)return null;for(var C=[],B=0;B<a.length;B++){var J=a[B],re=J.geometry,Ce=J.type,Ge=n===0?J.minX:J.minY,et=n===0?J.maxX:J.maxY;if(Ge>=i&&et<r){C.push(J);continue}else if(et<i||Ge>=r)continue;var Je=[];if(Ce==="Point"||Ce==="MultiPoint")Ve(re,Je,i,r,n);else if(Ce==="LineString")rt(re,Je,i,r,n,!1,m.lineMetrics);else if(Ce==="MultiLineString")Tt(re,Je,i,r,n,!1);else if(Ce==="Polygon")Tt(re,Je,i,r,n,!0);else if(Ce==="MultiPolygon")for(var Xt=0;Xt<re.length;Xt++){var cn=[];Tt(re[Xt],cn,i,r,n,!0),cn.length&&Je.push(cn)}if(Je.length){if(m.lineMetrics&&Ce==="LineString"){for(Xt=0;Xt<Je.length;Xt++)C.push(ht(J.id,Ce,Je[Xt],J.tags));continue}(Ce==="LineString"||Ce==="MultiLineString")&&(Je.length===1?(Ce="LineString",Je=Je[0]):Ce="MultiLineString"),(Ce==="Point"||Ce==="MultiPoint")&&(Ce=Je.length===3?"Point":"MultiPoint"),C.push(ht(J.id,Ce,Je,J.tags))}}return C.length?C:null}function Ve(a,l,i,r,n){for(var s=0;s<a.length;s+=3){var f=a[s+n];f>=i&&f<=r&&(l.push(a[s]),l.push(a[s+1]),l.push(a[s+2]))}}function rt(a,l,i,r,n,s,f){for(var m=yt(a),C=n===0?en:wt,B=a.start,J,re,Ce=0;Ce<a.length-3;Ce+=3){var Ge=a[Ce],et=a[Ce+1],Je=a[Ce+2],Xt=a[Ce+3],cn=a[Ce+4],xn=n===0?Ge:et,On=n===0?Xt:cn,ur=!1;f&&(J=Math.sqrt(Math.pow(Ge-Xt,2)+Math.pow(et-cn,2))),xn<i?On>i&&(re=C(m,Ge,et,Xt,cn,i),f&&(m.start=B+J*re)):xn>r?On<r&&(re=C(m,Ge,et,Xt,cn,r),f&&(m.start=B+J*re)):Ht(m,Ge,et,Je),On<i&&xn>=i&&(re=C(m,Ge,et,Xt,cn,i),ur=!0),On>r&&xn<=r&&(re=C(m,Ge,et,Xt,cn,r),ur=!0),!s&&ur&&(f&&(m.end=B+J*re),l.push(m),m=yt(a)),f&&(B+=J)}var _r=a.length-3;Ge=a[_r],et=a[_r+1],Je=a[_r+2],xn=n===0?Ge:et,xn>=i&&xn<=r&&Ht(m,Ge,et,Je),_r=m.length-3,s&&_r>=3&&(m[_r]!==m[0]||m[_r+1]!==m[1])&&Ht(m,m[0],m[1],m[2]),m.length&&l.push(m)}function yt(a){var l=[];return l.size=a.size,l.start=a.start,l.end=a.end,l}function Tt(a,l,i,r,n,s){for(var f=0;f<a.length;f++)rt(a[f],l,i,r,n,s,!1)}function Ht(a,l,i,r){a.push(l),a.push(i),a.push(r)}function en(a,l,i,r,n,s){var f=(s-l)/(r-l);return a.push(s),a.push(i+(n-i)*f),a.push(1),f}function wt(a,l,i,r,n,s){var f=(s-i)/(n-i);return a.push(l+(r-l)*f),a.push(s),a.push(1),f}function Mn(a,l){var i=l.buffer/l.extent,r=a,n=mt(a,1,-1-i,i,0,-1,2,l),s=mt(a,1,1-i,2+i,0,-1,2,l);return(n||s)&&(r=mt(a,1,-i,1+i,0,-1,2,l)||[],n&&(r=kn(n,1).concat(r)),s&&(r=r.concat(kn(s,-1)))),r}function kn(a,l){for(var i=[],r=0;r<a.length;r++){var n=a[r],s=n.type,f;if(s==="Point"||s==="MultiPoint"||s==="LineString")f=jn(n.geometry,l);else if(s==="MultiLineString"||s==="Polygon"){f=[];for(var m=0;m<n.geometry.length;m++)f.push(jn(n.geometry[m],l))}else if(s==="MultiPolygon")for(f=[],m=0;m<n.geometry.length;m++){for(var C=[],B=0;B<n.geometry[m].length;B++)C.push(jn(n.geometry[m][B],l));f.push(C)}i.push(ht(n.id,s,f,n.tags))}return i}function jn(a,l){var i=[];i.size=a.size,a.start!==void 0&&(i.start=a.start,i.end=a.end);for(var r=0;r<a.length;r+=3)i.push(a[r]+l,a[r+1],a[r+2]);return i}function mn(a,l){if(a.transformed)return a;var i=1<<a.z,r=a.x,n=a.y,s,f,m;for(s=0;s<a.features.length;s++){var C=a.features[s],B=C.geometry,J=C.type;if(C.geometry=[],J===1)for(f=0;f<B.length;f+=2)C.geometry.push(cr(B[f],B[f+1],l,i,r,n));else for(f=0;f<B.length;f++){var re=[];for(m=0;m<B[f].length;m+=2)re.push(cr(B[f][m],B[f][m+1],l,i,r,n));C.geometry.push(re)}}return a.transformed=!0,a}function cr(a,l,i,r,n,s){return[Math.round(i*(a*r-n)),Math.round(i*(l*r-s))]}function Cr(a,l,i,r,n){for(var s=l===n.maxZoom?0:n.tolerance/((1<<l)*n.extent),f={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:l,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},m=0;m<a.length;m++){f.numFeatures++,mi(f,a[m],s,n);var C=a[m].minX,B=a[m].minY,J=a[m].maxX,re=a[m].maxY;C<f.minX&&(f.minX=C),B<f.minY&&(f.minY=B),J>f.maxX&&(f.maxX=J),re>f.maxY&&(f.maxY=re)}return f}function mi(a,l,i,r){var n=l.geometry,s=l.type,f=[];if(s==="Point"||s==="MultiPoint")for(var m=0;m<n.length;m+=3)f.push(n[m]),f.push(n[m+1]),a.numPoints++,a.numSimplified++;else if(s==="LineString")$r(f,n,a,i,!1,!1);else if(s==="MultiLineString"||s==="Polygon")for(m=0;m<n.length;m++)$r(f,n[m],a,i,s==="Polygon",m===0);else if(s==="MultiPolygon")for(var C=0;C<n.length;C++){var B=n[C];for(m=0;m<B.length;m++)$r(f,B[m],a,i,!0,m===0)}if(f.length){var J=l.tags||null;if(s==="LineString"&&r.lineMetrics){J={};for(var re in l.tags)J[re]=l.tags[re];J.mapbox_clip_start=n.start/n.size,J.mapbox_clip_end=n.end/n.size}var Ce={geometry:f,type:s==="Polygon"||s==="MultiPolygon"?3:s==="LineString"||s==="MultiLineString"?2:1,tags:J};l.id!==null&&(Ce.id=l.id),a.features.push(Ce)}}function $r(a,l,i,r,n,s){var f=r*r;if(r>0&&l.size<(n?f:r)){i.numPoints+=l.length/3;return}for(var m=[],C=0;C<l.length;C+=3)(r===0||l[C+2]>f)&&(i.numSimplified++,m.push(l[C]),m.push(l[C+1])),i.numPoints++;n&&Sr(m,s),a.push(m)}function Sr(a,l){for(var i=0,r=0,n=a.length,s=n-2;r<n;s=r,r+=2)i+=(a[r]-a[s])*(a[r+1]+a[s+1]);if(i>0===l)for(r=0,n=a.length;r<n/2;r+=2){var f=a[r],m=a[r+1];a[r]=a[n-2-r],a[r+1]=a[n-1-r],a[n-2-r]=f,a[n-1-r]=m}}function dr(a,l){return new Pr(a,l)}function Pr(a,l){l=this.options=Xi(Object.create(this.options),l);var i=l.debug;if(i&&console.time("preprocess data"),l.maxZoom<0||l.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(l.promoteId&&l.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=_e(a,l);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",l.indexMaxZoom,l.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=Mn(r,l),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Pr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Pr.prototype.splitTile=function(a,l,i,r,n,s,f){for(var m=[a,l,i,r],C=this.options,B=C.debug;m.length;){r=m.pop(),i=m.pop(),l=m.pop(),a=m.pop();var J=1<<l,re=Hr(l,i,r),Ce=this.tiles[re];if(!Ce&&(B>1&&console.time("creation"),Ce=this.tiles[re]=Cr(a,l,i,r,C),this.tileCoords.push({z:l,x:i,y:r}),B)){B>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",l,i,r,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var Ge="z"+l;this.stats[Ge]=(this.stats[Ge]||0)+1,this.total++}if(Ce.source=a,n){if(l===C.maxZoom||l===n)continue;var et=1<<n-l;if(i!==Math.floor(s/et)||r!==Math.floor(f/et))continue}else if(l===C.indexMaxZoom||Ce.numPoints<=C.indexMaxPoints)continue;if(Ce.source=null,a.length!==0){B>1&&console.time("clipping");var Je=.5*C.buffer/C.extent,Xt=.5-Je,cn=.5+Je,xn=1+Je,On,ur,_r,zr,Ir,ii;On=ur=_r=zr=null,Ir=mt(a,J,i-Je,i+cn,0,Ce.minX,Ce.maxX,C),ii=mt(a,J,i+Xt,i+xn,0,Ce.minX,Ce.maxX,C),a=null,Ir&&(On=mt(Ir,J,r-Je,r+cn,1,Ce.minY,Ce.maxY,C),ur=mt(Ir,J,r+Xt,r+xn,1,Ce.minY,Ce.maxY,C),Ir=null),ii&&(_r=mt(ii,J,r-Je,r+cn,1,Ce.minY,Ce.maxY,C),zr=mt(ii,J,r+Xt,r+xn,1,Ce.minY,Ce.maxY,C),ii=null),B>1&&console.timeEnd("clipping"),m.push(On||[],l+1,i*2,r*2),m.push(ur||[],l+1,i*2,r*2+1),m.push(_r||[],l+1,i*2+1,r*2),m.push(zr||[],l+1,i*2+1,r*2+1)}}},Pr.prototype.getTile=function(a,l,i){var r=this.options,n=r.extent,s=r.debug;if(a<0||a>24)return null;var f=1<<a;l=(l%f+f)%f;var m=Hr(a,l,i);if(this.tiles[m])return mn(this.tiles[m],n);s>1&&console.log("drilling down to z%d-%d-%d",a,l,i);for(var C=a,B=l,J=i,re;!re&&C>0;)C--,B=Math.floor(B/2),J=Math.floor(J/2),re=this.tiles[Hr(C,B,J)];return!re||!re.source?null:(s>1&&console.log("found parent tile z%d-%d-%d",C,B,J),s>1&&console.time("drilling down"),this.splitTile(re.source,C,B,J,a,l,i),s>1&&console.timeEnd("drilling down"),this.tiles[m]?mn(this.tiles[m],n):null)};function Hr(a,l,i){return((1<<a)*i+l)*32+a}function Xi(a,l){for(var i in l)a[i]=l[i];return a}var Kn=y(15671),Gn=y(43144),pt=y(4942),Ha=function(){function a(l,i,r,n){(0,Kn.Z)(this,a),(0,pt.Z)(this,"vectorLayerCache",{}),this.x=i,this.y=r,this.z=n,this.vectorTile=l}return(0,Gn.Z)(a,[{key:"getTileData",value:function(i){if(!i||!this.vectorTile.layers[i])return[];if(this.vectorLayerCache[i])return this.vectorLayerCache[i];var r=this.vectorTile.layers[i];return r.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Sa={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Qa(a){for(var l=0,i=0,r=a.length,n=r-1,s,f;i<r;n=i++)s=a[i],f=a[n],l+=(f.x-s.x)*(s.y+f.y);return l}function ma(a){var l=a.length;if(l<=1)return[a];for(var i=[],r,n,s=0;s<l;s++){var f=Qa(a[s]);f!==0&&(n===void 0&&(n=f<0),n===f<0?(r&&i.push(r),r=[a[s]]):r.push(a[s]))}return r&&i.push(r),i}var Ei=["Unknown","Point","LineString","Polygon"];function Ia(a,l,i,r,n){var s=n.geometry,f=n.type,m=n.tags,C=n.id,B=a*Math.pow(2,r),J=a*l,re=a*i,Ce=Ei[f],Ge,et;function Je(xn){for(var On=0;On<xn.length;On++){var ur=xn[On];if(ur[3])break;var _r=180-(ur[1]+re)*360/B,zr=(ur[0]+J)*360/B-180,Ir=360/Math.PI*Math.atan(Math.exp(_r*Math.PI/180))-90;xn[On]=[zr,Ir,0,1]}}switch(f){case 1:var Xt=[];for(Ge=0;Ge<s.length;Ge++)Xt[Ge]=s[Ge][0];s=Xt,Je(s);break;case 2:for(Ge=0;Ge<s.length;Ge++)Je(s[Ge]);break;case 3:for(s=ma(s),Ge=0;Ge<s.length;Ge++)for(et=0;et<s[Ge].length;et++)Je(s[Ge][et]);break}s.length===1?s=s[0]:Ce="Multi"+Ce;var cn={type:"Feature",geometry:{type:Ce,coordinates:s},properties:m,id:C,tileOrigin:[0,0],coord:""};return cn}var si=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",new Promise(function(C){var B=r.getTile(i.z,i.x,i.y),J=B?B.features.map(function(Ge){return Ia(s,n.x,n.y,n.z,Ge)}):[],re={layers:{defaultLayer:{features:J}}},Ce=new Ha(re,i.x,i.y,i.z);C(Ce)}));case 1:case"end":return m.stop()}},l)}));return function(i,r,n,s){return a.apply(this,arguments)}}();function it(a){var l={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?l:(0,be.Z)((0,be.Z)({},l),a.geojsonvtOptions)}function Qn(a,l){var i=it(l),r=i.extent||4096,n=dr(a,i),s=function(C,B){return si(B,n,C,r)},f=(0,be.Z)((0,be.Z)((0,be.Z)({},Sa),l),{},{getTileData:s});return{data:a,dataArray:[],tilesetOptions:f,isTile:!0}}var pe=y(44402);function at(a,l){var i=l.extent,r=i===void 0?[121.168,30.2828,121.384,30.4219]:i,n=new Promise(function(f){a instanceof HTMLImageElement||(0,pe.fg)(a)?f([a]):Dt(a,function(m){f(m)})}),s={originData:a,images:n,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return s}function Dt(a,l){var i=a,r=[];if(typeof i=="string")(0,pe.gJ)({url:i},function(f,m){m&&(r.push(m),l(r))});else{var n=i.length,s=0;i.forEach(function(f){(0,pe.gJ)({url:f},function(m,C){s++,C&&r.push(C),s===n&&l(r)})})}return at}var vn=y(38929),bn=y(3614),Pn=y.n(bn),ar=function(){function a(l,i,r,n){(0,Kn.Z)(this,a),(0,pt.Z)(this,"vectorLayerCache",{}),this.x=i,this.y=r,this.z=n,this.vectorTile=new vn.VectorTile(new(Pn())(l))}return(0,Gn.Z)(a,[{key:"getTileData",value:function(i){if(!i||!this.vectorTile.layers[i])return[];if(this.vectorLayerCache[i])return this.vectorLayerCache[i];var r=this.vectorTile.layers[i];if(Array.isArray(r.features))return this.vectorLayerCache[i]=r.features,r.features;for(var n=[],s=0;s<r.length;s++){var f=r.feature(s),m=f.toGeoJSON(this.x,this.y,this.z);n.push((0,be.Z)((0,be.Z)({},m),{},{properties:(0,be.Z)({id:m.id},m.properties)}))}return this.vectorLayerCache[i]=n,n}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Zr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Xr=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s,f){var m;return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return m=(0,pe.z0)(i,r),B.abrupt("return",new Promise(function(J){if(f)f({x:n.x,y:n.y,z:n.z},function(Ce,Ge){if(Ce||!Ge)J(void 0);else{var et=new ar(Ge,n.x,n.y,n.z);J(et)}});else{var re=(0,pe.ks)((0,be.Z)((0,be.Z)({},s),{},{url:m}),function(Ce,Ge){if(Ce||!Ge)J(void 0);else{var et=new ar(Ge,n.x,n.y,n.z);J(et)}});n.xhrCancel=function(){return re.abort()}}}));case 2:case"end":return B.stop()}},l)}));return function(i,r,n,s,f){return a.apply(this,arguments)}}();function ui(a,l){var i=Array.isArray(a)?a[0]:a,r=function(f,m){return Xr(i,f,m,l==null?void 0:l.requestParameters,l==null?void 0:l.getCustomData)},n=(0,be.Z)((0,be.Z)((0,be.Z)({},Zr),l),{},{getTileData:r});return{data:i,dataArray:[],tilesetOptions:n,isTile:!0}}var qr=y(97685);function Ti(a,l,i){switch(a){case"+":return l+i;case"-":return l-i;case"*":return l*i;case"/":return l/i;case"%":return l%i;case"^":return Math.pow(l,i);case"abs":return Math.abs(l);case"floor":return Math.floor(l);case"round":return Math.round(l);case"ceil":return Math.ceil(l);case"sin":return Math.sin(l);case"cos":return Math.cos(l);case"atan":return i===-1?Math.atan(l):Math.atan2(l,i);case"min":return Math.min(l,i);case"max":return Math.max(l,i);case"log10":return Math.log(l);case"log2":return Math.log2(l);default:return console.warn("Calculate symbol err! Return default 0"),0}}function fa(a,l){for(var i=l[0],r=i.width,n=i.height,s=l.map(function(Ge){return Ge.rasterData}),f=r*n,m=[],C=JSON.stringify(a),B=0;B<f;B++){var J=JSON.parse(C),re=Bn(J,s,B);if(typeof re=="number")m.push(re);else{var Ce=Ji(J);m.push(Ce)}}return m}function Bn(a,l,i){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return l[a[1]][i]}catch(r){return console.warn("Raster Data err!"),0}a.map(function(r,n){if(Array.isArray(r)&&r.length>0)switch(r[0]){case"band":try{a[n]=l[r[1]][i]}catch(s){console.warn("Raster Data err!"),a[n]=0}break;default:Bn(r,l,i)}})}function Li(a){var l=(0,qr.Z)(a,3),i=l[0],r=l[1],n=r===void 0?-1:r,s=l[2],f=s===void 0?-1:s;if(i===void 0)return console.warn("Express err!"),["+",0,0];var m=i.replace(/\s+/g,"");return[m,n,f]}function Ji(a){var l=Li(a),i=l[0],r=l[1],n=l[2];return Array.isArray(r)&&(r=Ji(a[1])),Array.isArray(n)&&(n=Ji(a[2])),Ti(i,r,n)}var Na={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:ea}};function ea(a,l){for(var i=a[0].rasterData,r=a[1].rasterData,n=a[2].rasterData,s=[],f=(l==null?void 0:l.countCut)||[2,98],m=(0,qr.Z)(f,2),C=m[0],B=m[1],J=(l==null?void 0:l.RMinMax)||ha(i,C,B),re=(l==null?void 0:l.GMinMax)||ha(r,C,B),Ce=(l==null?void 0:l.BMinMax)||ha(n,C,B),Ge=0;Ge<i.length;Ge++)s.push(Math.max(0,i[Ge]-J[0])),s.push(Math.max(0,r[Ge]-re[0])),s.push(Math.max(0,n[Ge]-Ce[0]));return{rasterData:s,rMinMax:J,gMinMax:re,bMinMax:Ce}}function ha(a,l,i){var r=a.slice().sort(function(m,C){return m-C}),n=r.length,s=r[Math.ceil(n*l/100)],f=r[Math.ceil(n*i/100)];return[s,f]}function Ta(a,l,i){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,We.Z)(Ze().mark(function a(l,i,r){var n,s,f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(l.length!==0){re.next=2;break}return re.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return re.next=4,Promise.all(l.map(function(Ce){var Ge=Ce.data,et=Ce.bands,Je=et===void 0?[0]:et;return i(Ge,Je)}));case 4:n=re.sent,s=[],n.forEach(function(Ce){Array.isArray(Ce)?s.push.apply(s,(0,Ae.Z)(Ce)):s.push(Ce)}),f=s[0],m=f.width,C=f.height,re.t0=(0,st.Z)(r),re.next=re.t0==="function"?11:re.t0==="object"?13:15;break;case 11:return B=r(s),re.abrupt("break",16);case 13:return Array.isArray(r)?B={rasterData:fa(r,s)}:B=Wi(r,s),re.abrupt("break",16);case 15:B={rasterData:s[0].rasterData};case 16:return re.abrupt("return",(0,be.Z)((0,be.Z)({},B),{},{width:m,height:C}));case 17:case"end":return re.stop()}},a)})),Aa.apply(this,arguments)}function Wi(a,l){var i=Na[a.type];if(i.type==="function")return i.method(l,a==null?void 0:a.options);if(i.type==="operation")return a.type==="rgb"?go(i.expression,l):{rasterData:fa(i.expression,l)}}function go(a,l){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var i=fa(a.r||["band",0],l),r=fa(a.g||["band",0],l),n=fa(a.b||["band",0],l);return[i,r,n]}function Ja(a,l,i,r){return $o.apply(this,arguments)}function $o(){return $o=(0,We.Z)(Ze().mark(function a(l,i,r,n){var s;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Ta(l,i,r);case 2:s=m.sent,n(null,{data:s});case 4:case"end":return m.stop()}},a)})),$o.apply(this,arguments)}function Ua(a,l){return a.map(function(i){return i[l]*1})}function Wa(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function mo(a){return Array.isArray(a)?a.length===0?!1:!!Wa(a[0]):!1}function fo(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function Ro(a,l){var i=l.extent,r=l.width,n=l.height,s=l.min,f=l.max,m=l.format,C=l.operation,B,J,re;if(m===void 0||fo(a))B=Array.from(a),J=r,re=n;else{var Ce=Array.isArray(a)?a:[a];B=Ta(Ce,m,C)}var Ge={_id:1,dataArray:[{_id:1,data:B,width:J,height:re,min:s,max:f,coordinates:[[i[0],i[1]],[i[2],i[3]]]}]};return Ge}var te=y(54095),ho=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",new Promise(function(C,B){r({x:i.x,y:i.y,z:i.z},function(J,re){if(J||re.length===0){B(J);return}re&&Ja([{data:re,bands:[0]}],n,s,function(Ce,Ge){Ce?B(Ce):Ge&&C(Ge)})})}));case 1:case"end":return m.stop()}},l)}));return function(i,r,n,s){return a.apply(this,arguments)}}(),wn=function(){var a=(0,We.Z)(Ze().mark(function l(i,r){return Ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(f,m){r({x:i.x,y:i.y,z:i.z},function(C,B){if(C||!B){m(C);return}B instanceof ArrayBuffer?(0,pe.Co)(B,function(J,re){J&&m(J),f(re)}):B instanceof HTMLImageElement?f(B):m(C)})}));case 1:case"end":return s.stop()}},l)}));return function(i,r){return a.apply(this,arguments)}}();function tt(a,l){return Array.isArray(a)?typeof a[0]=="string"?a.map(function(i){return(0,pe.z0)(i,l)}):a.map(function(i){return{url:(0,pe.z0)(i.url,l),bands:i.bands||[0]}}):(0,pe.z0)(a,l)}function $e(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(function(l){return{url:l,bands:[0]}}):a}function dt(a,l){a.xhrCancel=function(){l.map(function(i){i.abort()})}}var Ke=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s,f){var m,C,B,J,re,Ce;return Ze().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(m=$e(r.url),!(m.length>1)){et.next=15;break}return et.next=4,qt(m,r);case 4:if(C=et.sent,B=C.rasterFiles,J=C.xhrList,re=C.errList,dt(i,J),!(re.length>0)){et.next=12;break}return n(re,null),et.abrupt("return");case 12:Ja(B,s,f,n),et.next=17;break;case 15:Ce=(0,pe.ks)(r,function(Je,Xt){if(Je)n(Je);else if(Xt){var cn=[{data:Xt,bands:m[0].bands}];Ja(cn,s,f,n)}}),dt(i,[Ce]);case 17:case"end":return et.stop()}},l)}));return function(i,r,n,s,f){return a.apply(this,arguments)}}();function qt(a,l){return nn.apply(this,arguments)}function nn(){return nn=(0,We.Z)(Ze().mark(function a(l,i){var r,n,s,f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:r=[],n=[],s=[],f=0;case 4:if(!(f<l.length)){Je.next=20;break}return m=l[f],C=(0,be.Z)((0,be.Z)({},i),{},{url:m.url}),B=m.bands,Je.next=10,(0,pe.LF)((0,be.Z)((0,be.Z)({},C),{},{type:"arrayBuffer"}));case 10:J=Je.sent,re=J.err,Ce=J.data,Ge=J.xhr,re&&s.push(re),n.push(Ge),r.push({data:Ce,bands:B});case 17:f++,Je.next=4;break;case 20:return Je.abrupt("return",{rasterFiles:r,xhrList:n,errList:s});case 21:case"end":return Je.stop()}},a)})),nn.apply(this,arguments)}var ln=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s,f){var m;return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return m={url:tt(i,r)},B.abrupt("return",new Promise(function(J,re){Ke(n,m,function(Ce,Ge){Ce?re(Ce):Ge&&J(Ge)},s,f)}));case 2:case"end":return B.stop()}},l)}));return function(i,r,n,s,f){return a.apply(this,arguments)}}(),An=function(){var a=(0,We.Z)(Ze().mark(function l(i,r,n,s){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return m=Array.isArray(i)?i[0]:i,s.wmtsOptions?(C=(s==null?void 0:s.getURLFromTemplate)||pe.jG,f=C(m,(0,be.Z)((0,be.Z)({},r),s.wmtsOptions))):(B=(s==null?void 0:s.getURLFromTemplate)||pe.z0,f=B(m,r)),re.abrupt("return",new Promise(function(Ce,Ge){var et,Je=(0,pe.gJ)({url:f,type:(s==null||(et=s.requestParameters)===null||et===void 0?void 0:et.type)||"arrayBuffer"},function(Xt,cn){Xt?Ge(Xt):cn&&Ce(cn)},s.transformResponse);n.xhrCancel=function(){return Je.abort()}}));case 3:case"end":return re.stop()}},l)}));return function(i,r,n,s){return a.apply(this,arguments)}}(),Oe=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},De={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Be=[te.n3.ARRAYBUFFER,te.n3.RGB];function Ye(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function Nt(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ye(a))throw new Error("tile server url is error");var i=(l==null?void 0:l.dataType)||te.n3.IMAGE;i===te.n3.RGB&&(i=te.n3.ARRAYBUFFER);var r=function(f,m){switch(i){case te.n3.IMAGE:return An(a,f,m,l);case te.n3.CUSTOMIMAGE:case te.n3.CUSTOMTERRAINRGB:return wn(m,l==null?void 0:l.getCustomData);case te.n3.ARRAYBUFFER:return ln(a,f,m,(l==null?void 0:l.format)||Oe,l==null?void 0:l.operation);case te.n3.CUSTOMARRAYBUFFER:case te.n3.CUSTOMRGB:return ho(m,l==null?void 0:l.getCustomData,(l==null?void 0:l.format)||Oe,l==null?void 0:l.operation);default:return An(a,f,m,l)}},n=(0,be.Z)((0,be.Z)((0,be.Z)({},De),l),{},{getTileData:r});return{data:a,dataArray:[],tilesetOptions:n,isTile:!0}}var jt=y(91),un=["extent","min","max","width","height","format","operation"];function Hn(a,l){var i=l.extent,r=l.min,n=l.max,s=l.width,f=l.height,m=l.format,C=l.operation,B=(0,jt.Z)(l,un),J;if(m===void 0||fo(a))J=Array.from(a);else{var re=Array.isArray(a)?a:[a];J=Ta(re,m,C)}var Ce={_id:1,dataArray:[(0,be.Z)((0,be.Z)({_id:1,data:J,width:s,height:f},B),{},{min:r,max:n,coordinates:[[i[0],i[1]],[i[2],i[3]]]})]};return Ce}var Rn={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},fr=function(){var a=(0,We.Z)(Ze().mark(function l(i){return Ze().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(s){var f=(0,qr.Z)(i.bounds,4),m=f[0],C=f[1],B=f[2],J=f[3],re={layers:{testTile:{features:[{type:"Feature",properties:{key:i.x+"/"+i.y+"/"+i.z,textLng:(m+B)/2,textLat:(C+J)/2},geometry:{type:"LineString",coordinates:[[B,J],[B,C],[m,C],[m,C]]}}]}}};s(re)}));case 1:case"end":return n.stop()}},l)}));return function(i){return a.apply(this,arguments)}}();function or(a,l){var i=function(s){return fr(s)},r=(0,be.Z)((0,be.Z)((0,be.Z)({},Rn),l),{},{getTileData:i});return{data:a,dataArray:[],tilesetOptions:r,isTile:!0}}var $t=y(97326),er=y(60136),Jn=y(82963),Bt=y(61120),Ai=y(46343),Le=y(26729),Xe=y.n(Le),He=y(96486),Ot=y(69848),Vt=y.n(Ot);function gn(a,l){var i=l.radius,r=i===void 0?40:i,n=l.maxZoom,s=n===void 0?18:n,f=l.minZoom,m=f===void 0?0:f,C=l.zoom,B=C===void 0?2:C;if(a.pointIndex){var J=a.pointIndex.getClusters(a.extent,Math.floor(B));return a.dataArray=vt(J),a}var re=new(Vt())({radius:r,minZoom:m,maxZoom:s}),Ce={type:"FeatureCollection",features:[]};return Ce.features=a.dataArray.map(function(Ge){return{type:"Feature",geometry:{type:"Point",coordinates:Ge.coordinates},properties:(0,be.Z)({},Ge)}}),re.load(Ce.features),re}function vt(a){return a.map(function(l,i){return(0,be.Z)({coordinates:l.geometry.coordinates,_id:i+1},l.properties)})}function zt(a){if(a.length===0)throw new Error("max requires at least one data point");for(var l=a[0],i=1;i<a.length;i++)a[i]>l&&(l=a[i]);return l}function Kt(a){if(a.length===0)throw new Error("min requires at least one data point");for(var l=a[0],i=1;i<a.length;i++)a[i]<l&&(l=a[i]);return l}function fn(a){if(a.length===0)return 0;for(var l=a[0],i=0,r,n=1;n<a.length;n++)r=l+a[n]*1,Math.abs(l)>=Math.abs(a[n])?i+=l-r+a[n]:i+=a[n]-r+l,l=r;return l+i*1}function zn(a){if(a.length===0)throw new Error("mean requires at least one data point");return fn(a)/a.length}var wr={min:Kt,max:zt,mean:zn,sum:fn};function Er(a){var l=_();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function _(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function N(a,l){if(Array.isArray(l))return l}var me=function(a){(0,er.Z)(i,a);var l=Er(i);function i(r,n){var s;return(0,Kn.Z)(this,i),s=l.call(this),(0,pt.Z)((0,$t.Z)(s),"type","source"),(0,pt.Z)((0,$t.Z)(s),"isTile",!1),(0,pt.Z)((0,$t.Z)(s),"inited",!1),(0,pt.Z)((0,$t.Z)(s),"hooks",{init:new Ai.ni}),(0,pt.Z)((0,$t.Z)(s),"parser",{type:"geojson"}),(0,pt.Z)((0,$t.Z)(s),"transforms",[]),(0,pt.Z)((0,$t.Z)(s),"cluster",!1),(0,pt.Z)((0,$t.Z)(s),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,pt.Z)((0,$t.Z)(s),"invalidExtent",!1),(0,pt.Z)((0,$t.Z)(s),"dataArrayChanged",!1),(0,pt.Z)((0,$t.Z)(s),"cfg",{autoRender:!0}),s.originData=r,s.initCfg(n),s.init().then(function(){s.inited=!0,s.emit("update",{type:"inited"})}),s}return(0,Gn.Z)(i,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(n){return this.clusterIndex.getClusters(this.caculClusterExtent(2),n)}},{key:"getClustersLeaves",value:function(n){return this.clusterIndex.getLeaves(n,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(n){var s=this,f=this.clusterOptions,m=f.method,C=m===void 0?"sum":m,B=f.field,J=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(n));this.clusterOptions.zoom=n,J.forEach(function(re){re.id||(re.properties.point_count=1)}),(B||(0,He.isFunction)(C))&&(J=J.map(function(re){var Ce=re.id;if(Ce){var Ge=s.clusterIndex.getLeaves(Ce,1/0),et=Ge.map(function(cn){return cn.properties}),Je;if((0,He.isString)(C)&&B){var Xt=Ua(et,B);Je=wr[C](Xt)}(0,He.isFunction)(C)&&(Je=C(et)),re.properties.stat=Je}else re.properties.point_count=1;return re})),this.data=M("geojson")({type:"FeatureCollection",features:J}),this.executeTrans()}},{key:"getFeatureById",value:function(n){var s=this.parser,f=s.type,m=f===void 0?"geojson":f,C=s.geometry;if(m==="geojson"&&!this.cluster){var B=n<this.originData.features.length?this.originData.features[n]:"null",J=(0,He.cloneDeep)(B);if(J!=null&&J.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var re=this.data.dataArray.find(function(Ce){return Ce._id===n});J.properties=re}return J}else return m==="json"&&C?this.data.dataArray.find(function(Ce){return Ce._id===n}):n<this.data.dataArray.length?this.data.dataArray[n]:"null"}},{key:"updateFeaturePropertiesById",value:function(n,s){this.data.dataArray=this.data.dataArray.map(function(f){return f._id===n?(0,be.Z)((0,be.Z)({},f),s):f}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(n,s){var f=this.data.dataArray.find(function(m){return m[n]===s});return f==null?void 0:f._id}},{key:"setData",value:function(n,s){var f=this;this.originData=n,this.dataArrayChanged=!1,this.initCfg(s),this.init().then(function(){f.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var n;(n=this.tileset)===null||n===void 0||n.reloadAll()}},{key:"reloadTilebyId",value:function(n,s,f){var m;(m=this.tileset)===null||m===void 0||m.reloadTileById(n,s,f)}},{key:"reloadTileByLnglat",value:function(n,s,f){var m;(m=this.tileset)===null||m===void 0||m.reloadTileByLnglat(n,s,f)}},{key:"reloadTileByExtent",value:function(n,s){var f;(f=this.tileset)===null||f===void 0||f.reloadTileByExtent(n,s)}},{key:"destroy",value:function(){var n;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(n=this.tileset)===null||n===void 0||n.destroy()}},{key:"processData",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f=this;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",new Promise(function(B,J){try{f.excuteParser(),f.initCluster(),f.executeTrans(),B({})}catch(re){J(re)}}));case 1:case"end":return C.stop()}},s)}));function n(){return r.apply(this,arguments)}return n}()},{key:"initCfg",value:function(n){this.cfg=(0,He.mergeWith)(this.cfg,n,N);var s=this.cfg;s&&(s.parser&&(this.parser=s.parser),s.transforms&&(this.transforms=s.transforms),this.cluster=s.cluster||!1,s.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,be.Z)((0,be.Z)({},this.clusterOptions),s.clusterOptions)))}},{key:"init",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.inited=!1,m.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"excuteParser",value:function(){var n=this.parser,s=n.type||"geojson",f=M(s);this.data=f(this.originData,n),this.tileset=this.initTileset(),!n.cancelExtent&&(this.extent=(0,pe.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(n){this.center=[(n[0]+n[2])/2,(n[1]+n[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var n=this.data.tilesetOptions;if(n){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(n),this.tileset;var s=new pe.nx((0,be.Z)({},n));return s}}},{key:"executeTrans",value:function(){var n=this,s=this.transforms;s.forEach(function(f){var m=f.type,C=g(m)(n.data,f);Object.assign(n.data,C)})}},{key:"initCluster",value:function(){if(this.cluster){var n=this.clusterOptions||{};this.clusterIndex=gn(this.data,n)}}},{key:"caculClusterExtent",value:function(n){var s=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(s=(0,pe.yA)((0,pe.ds)(this.extent),n)),s[0].concat(s[1])}}]),i}(Le.EventEmitter);function q(a,l){var i=l.callback;return i&&(a.dataArray=a.dataArray.filter(i)),a}function Ue(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=ct(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function ct(a,l){if(a){if(typeof a=="string")return Lt(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lt(a,l)}}function Lt(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}var hn=6378e3;function on(a,l){var i=a.dataArray,r=l.size,n=r===void 0?10:r,s=n/(2*Math.PI*hn)*(256<<20)/2,f=nr(i,n),m=f.gridHash,C=f.gridOffset,B=Ci(m,C,l);return{yOffset:s,xOffset:s,radius:s,type:"grid",dataArray:B}}function nr(a,l){var i=1/0,r=-1/0,n,s=Ue(a),f;try{for(s.s();!(f=s.n()).done;){var m=f.value;n=m.coordinates[1],Number.isFinite(n)&&(i=n<i?n:i,r=n>r?n:r)}}catch(On){s.e(On)}finally{s.f()}var C=(i+r)/2,B=sr(l,C);if(B.xOffset<=0||B.yOffset<=0)return{gridHash:{},gridOffset:B};var J={},re=Ue(a),Ce;try{for(re.s();!(Ce=re.n()).done;){var Ge=Ce.value,et=Ge.coordinates[1],Je=Ge.coordinates[0];if(Number.isFinite(et)&&Number.isFinite(Je)){var Xt=Math.floor((et+90)/B.yOffset),cn=Math.floor((Je+180)/B.xOffset),xn="".concat(Xt,"-").concat(cn);J[xn]=J[xn]||{count:0,points:[]},J[xn].count+=1,J[xn].points.push(Ge)}}}catch(On){re.e(On)}finally{re.f()}return{gridHash:J,gridOffset:B}}function sr(a,l){var i=ti(a),r=Fi(l,a);return{yOffset:i,xOffset:r}}function ti(a){return a/hn*(180/Math.PI)}function Fi(a,l){return l/hn*(180/Math.PI)/Math.cos(a*Math.PI/180)}function Ci(a,l,i){return Object.keys(a).reduce(function(r,n,s){var f=n.split("-"),m=parseInt(f[0],10),C=parseInt(f[1],10),B={};if(i.field&&i.method){var J=pe.a5.getColumn(a[n].points,i.field);B[i.method]=pe.a5.statMap[i.method](J)}return Object.assign(B,{_id:s,coordinates:(0,pe.Z)([-180+l.xOffset*(C+.5),-90+l.yOffset*(m+.5)]),rawData:a[n].points,count:a[n].count}),r.push(B),r},[])}var ta=Math.PI/3,Ni=[0,ta,2*ta,3*ta,4*ta,5*ta];function Oi(a){return a[0]}function yo(a){return a[1]}function ya(){var a=0,l=0,i=1,r=1,n=Oi,s=yo,f,m,C;function B(re){var Ce={},Ge=[],et,Je=re.length;for(et=0;et<Je;++et)if(!(isNaN(cn=+n.call(null,Xt=re[et],et,re))||isNaN(xn=+s.call(null,Xt,et,re)))){var Xt,cn,xn,On=Math.round(xn=xn/C),ur=Math.round(cn=cn/m-(On&1)/2),_r=xn-On;if(Math.abs(_r)*3>1){var zr=cn-ur,Ir=ur+(cn<ur?-1:1)/2,ii=On+(xn<On?-1:1),Gi=cn-Ir,Hi=xn-ii;zr*zr+_r*_r>Gi*Gi+Hi*Hi&&(ur=Ir+(On&1?1:-1)/2,On=ii)}var hi=ur+"-"+On,pa=Ce[hi];pa?pa.push(Xt):(Ge.push(pa=Ce[hi]=[Xt]),pa.x=(ur+(On&1)/2)*m,pa.y=On*C)}return Ge}function J(re){var Ce=0,Ge=0;return Ni.map(function(et){var Je=Math.sin(et)*re,Xt=-Math.cos(et)*re,cn=Je-Ce,xn=Xt-Ge;return Ce=Je,Ge=Xt,[cn,xn]})}return B.hexagon=function(re){return"m"+J(re==null?f:+re).join("l")+"z"},B.centers=function(){for(var re=[],Ce=Math.round(l/C),Ge=Math.round(a/m),et=Ce*C;et<r+f;et+=C,++Ce)for(var Je=Ge*m+(Ce&1)*m/2;Je<i+m/2;Je+=m)re.push([Je,et]);return re},B.mesh=function(){var re=J(f).slice(0,4).join("l");return B.centers().map(function(Ce){return"M"+Ce+"m"+re}).join("")},B.x=function(re){return arguments.length?(n=re,B):n},B.y=function(re){return arguments.length?(s=re,B):s},B.radius=function(re){return arguments.length?(f=+re,m=f*2*Math.sin(ta),C=f*1.5,B):f},B.size=function(re){return arguments.length?(a=l=0,i=+re[0],r=+re[1],B):[i-a,r-l]},B.extent=function(re){return arguments.length?(a=+re[0][0],l=+re[0][1],i=+re[1][0],r=+re[1][1],B):[[a,l],[i,r]]},B.radius(1)}var Ba=6378e3;function xa(a,l){var i=a.dataArray,r=l.size,n=r===void 0?10:r,s=l.method,f=s===void 0?"sum":s,m=n/(2*Math.PI*Ba)*(256<<20)/2,C=i.map(function(Ce){var Ge=(0,pe.Z)(Ce.coordinates),et=(0,qr.Z)(Ge,2),Je=et[0],Xt=et[1];return(0,be.Z)((0,be.Z)({},Ce),{},{coordinates:[Je,Xt]})}),B=ya().radius(m).x(function(Ce){return Ce.coordinates[0]}).y(function(Ce){return Ce.coordinates[1]}),J=B(C),re={dataArray:J.map(function(Ce,Ge){var et;if(l.field&&f){var Je=pe.a5.getColumn(Ce,l.field);Ce[f]=pe.a5.statMap[f](Je)}return et={},(0,pt.Z)(et,l.method,Ce[f]),(0,pt.Z)(et,"count",Ce.length),(0,pt.Z)(et,"rawData",Ce),(0,pt.Z)(et,"coordinates",[Ce.x,Ce.y]),(0,pt.Z)(et,"_id",Ge),et}),radius:m,xOffset:m,yOffset:m,type:"hexagon"};return re}function sa(a,l){var i=l.sourceField,r=l.targetField,n=l.data,s={};return n.forEach(function(f){s[f[i]]=f}),a.dataArray=a.dataArray.map(function(f){var m=f[r];return(0,be.Z)((0,be.Z)({},f),s[m])}),a}function jo(a,l){var i=l.callback;return i&&(a.dataArray=a.dataArray.map(i)),a}d("rasterTile",Nt),d("mvt",ui),d("geojsonvt",Qn),d("testTile",or),d("geojson",Un),d("image",at),d("csv",Ln),d("json",$n),d("raster",Ro),d("rasterRgb",Hn),x("cluster",gn),x("filter",q),x("join",sa),x("map",jo),x("grid",on),x("hexagon",xa);var vs=me;function $s(a){var l=Fs();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Fs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var tu=function(a){(0,er.Z)(i,a);var l=$s(i);function i(r){var n;return(0,Kn.Z)(this,i),n=l.call(this),(0,pt.Z)((0,$t.Z)(n),"added",!1),(0,pt.Z)((0,$t.Z)(n),"eventHandle",function(s){n.polyfillEvent(s),n.emit(s.type,{target:s,data:n.markerOption.extData,lngLat:n.lngLat})}),n.markerOption=(0,be.Z)((0,be.Z)({},n.getDefault()),r),(0,pe.Ev)(["update","onMove","onMapClick"],(0,$t.Z)(n)),n.init(),n}return(0,Gn.Z)(i,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:pe.bV.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(n){this.scene=n,this.mapsService=n.get(te.vK.IMapService),this.sceneSerive=n.get(te.vK.ISceneService);var s=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(s),this.registerMarkerEvent(s),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var n=this.markerOption.element;return n&&pe.SO.remove(n),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(n){return this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(n){var s=this;if(!this.added)return this.once("added",function(){s.setElement(n)}),this;var f=this.markerOption.element;return f&&pe.SO.remove(f),this.markerOption.element=n,this.init(),this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.update(),this}},{key:"openPopup",value:function(){var n=this;if(!this.added)return this.once("added",function(){n.openPopup()}),this;var s=this.popup;return s?(s.isOpen()||s.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var n=this;this.added||this.once("added",function(){n.closePopup()});var s=this.popup;return s&&s.remove(),this}},{key:"setPopup",value:function(n){return this.popup=n,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var n=this.popup;if(n)n.isOpen()?n.remove():n.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(n){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(n){this.markerOption.extData=n}},{key:"update",value:function(){if(this.mapsService){var n=this.markerOption,s=n.element,f=n.anchor;this.updatePosition(),pe.SO.setTransform(s,"".concat(pe.rQ[f]))}}},{key:"onMapClick",value:function(n){var s=this.markerOption.element;this.popup&&s&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var n=this.mapsService.getContainer();return{containerHeight:(n==null?void 0:n.scrollHeight)||0,containerWidth:(n==null?void 0:n.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var n=this.markerOption,s=n.element,f=n.offsets,m=this.lngLat,C=m.lng,B=m.lat,J=this.mapsService.lngLatToContainer([C,B]);if(s){s.style.display="block",s.style.whiteSpace="nowrap";var re=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Ce=re.containerHeight,Ge=re.containerWidth,et=re.bounds;if(!et)return;if(Math.abs(et[0][0])>180||Math.abs(et[1][0])>180){if(J.x>Ge){var Je=this.mapsService.lngLatToContainer([C-360,B]);J.x=Je.x}if(J.x<0){var Xt=this.mapsService.lngLatToContainer([C+360,B]);J.x=Xt.x}}(J.x>Ge||J.x<0||J.y>Ce||J.y<0)&&(s.style.display="none"),s.style.left=J.x+f[0]+"px",s.style.top=J.y-f[1]+"px"}}}},{key:"init",value:function(){var n=this,s=this.markerOption.element,f=this.markerOption,m=f.color,C=f.anchor;if(!s){this.defaultMarker=!0,s=pe.SO.create("div"),this.markerOption.element=s;var B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttributeNS(null,"display","block"),B.setAttributeNS(null,"height","48px"),B.setAttributeNS(null,"width","48px"),B.setAttributeNS(null,"viewBox","0 0 1024 1024");var J=document.createElementNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),J.setAttributeNS(null,"fill",m),B.appendChild(J),s.appendChild(B)}pe.SO.addClass(s,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(re){var Ce,Ge,et=((Ce=n.markerOption)===null||Ce===void 0?void 0:Ce.style)&&((Ge=n.markerOption)===null||Ge===void 0?void 0:Ge.style[re]);s&&(s.style[re]=et)}),(0,pe.zi)(s,C,"marker")}},{key:"registerMarkerEvent",value:function(n){n.addEventListener("click",this.onMapClick),n.addEventListener("mousemove",this.eventHandle),n.addEventListener("click",this.eventHandle),n.addEventListener("mousedown",this.eventHandle),n.addEventListener("mouseup",this.eventHandle),n.addEventListener("dblclick",this.eventHandle),n.addEventListener("contextmenu",this.eventHandle),n.addEventListener("mouseover",this.eventHandle),n.addEventListener("mouseout",this.eventHandle),n.addEventListener("touchstart",this.eventHandle),n.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var n=this.getElement();n.removeEventListener("click",this.onMapClick),n.removeEventListener("mousemove",this.eventHandle),n.removeEventListener("click",this.eventHandle),n.removeEventListener("mousedown",this.eventHandle),n.removeEventListener("mouseup",this.eventHandle),n.removeEventListener("dblclick",this.eventHandle),n.removeEventListener("contextmenu",this.eventHandle),n.removeEventListener("mouseover",this.eventHandle),n.removeEventListener("mouseout",this.eventHandle),n.removeEventListener("touchstart",this.eventHandle),n.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(n){!this.mapsService||this.mapsService.version!=="GAODE2.x"||(0,pe.Ro)()||(n.type==="touchstart"&&(this.touchStartTime=Date.now()),n.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:n,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(n){return null}},{key:"onUp",value:function(n){throw new Error("Method not implemented.")}}]),i}(Le.EventEmitter);function lo(a){var l=du();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function du(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Dl=function(a){(0,er.Z)(i,a);var l=lo(i);function i(r){var n,s;return(0,Kn.Z)(this,i),s=l.call(this),(0,pt.Z)((0,$t.Z)(s),"markers",[]),(0,pt.Z)((0,$t.Z)(s),"points",[]),(0,pt.Z)((0,$t.Z)(s),"clusterMarkers",[]),s.markerLayerOption=(0,He.merge)(s.getDefault(),r),(0,pe.Ev)(["update"],(0,$t.Z)(s)),s.zoom=((n=s.markerLayerOption.clusterOption)===null||n===void 0?void 0:n.zoom)||-99,s}return(0,Gn.Z)(i,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(n){return this.scene=n,this.mapsService=n.get(te.vK.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}},{key:"setContainerSize",value:function(){if(this.mapsService){var n=this.mapsService.getContainer();this.containerSize={containerWidth:(n==null?void 0:n.scrollWidth)||0,containerHeight:(n==null?void 0:n.scrollHeight)||0,bounds:this.mapsService.getBounds()}}}},{key:"getContainerSize",value:function(){return this.containerSize}},{key:"addMarker",value:function(n){var s=this.markerLayerOption.cluster;if(n.getMarkerLayerContainerSize=this.getContainerSize.bind(this),s&&(this.addPoint(n,this.markers.length),this.mapsService)){var f=this.mapsService.getZoom(),m=this.mapsService.getBounds();this.bbox=(0,pe.yA)(m,.5),this.zoom=Math.floor(f),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(n)}},{key:"removeMarker",value:function(n){this.markers.indexOf(n);var s=this.markers.indexOf(n);s>-1&&this.markers.splice(s,1)}},{key:"hide",value:function(){this.markers.map(function(n){n.getElement().style.opacity="0"}),this.clusterMarkers.map(function(n){n.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(n){n.getElement().style.opacity="1"}),this.clusterMarkers.map(function(n){n.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var n=this.markerLayerOption.cluster;return n?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var n=this;this.getMarkers().forEach(function(s){s.addTo(n.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(n){n.remove()}),this.clusterMarkers.forEach(function(n){n.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}},{key:"addPoint",value:function(n,s){var f=n.getLnglat(),m=f.lng,C=f.lat,B={geometry:{type:"Point",coordinates:[m,C]},properties:(0,be.Z)((0,be.Z)({},n.getExtData()),{},{marker_id:s})};this.points.push(B),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var n=this.markerLayerOption.clusterOption,s=n.radius,f=n.minZoom,m=f===void 0?0:f,C=n.maxZoom;this.clusterIndex=new(Vt())({radius:s,minZoom:m,maxZoom:C}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(n,s){var f=this,m=n[0].concat(n[1]),C=this.clusterIndex.getClusters(m,s);this.clusterMarkers.forEach(function(B){B.remove()}),this.clusterMarkers=[],C.forEach(function(B){var J,re=f.markerLayerOption.clusterOption,Ce=re.field,Ge=re.method;if((J=B.properties)!==null&&J!==void 0&&J.cluster_id){var et,Je=f.getLeaves((et=B.properties)===null||et===void 0?void 0:et.cluster_id);if(B.properties.clusterData=Je,Ce&&Ge){var Xt=Je==null?void 0:Je.map(function(_r){var zr=(0,pt.Z)({},Ce,_r.properties[Ce]);return zr}),cn=pe.a5.getColumn(Xt,Ce),xn=pe.a5.getSatByColumn(Ge,cn),On="point_"+Ge;B.properties[On]=xn.toFixed(2)}}var ur=f.clusterMarker(B);f.clusterMarkers.push(ur),ur.addTo(f.scene)})}},{key:"getLeaves",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return n?this.clusterIndex.getLeaves(n,s,f):null}},{key:"clusterMarker",value:function(n){var s=this.markerLayerOption.clusterOption,f=s,m=f.element,C=m===void 0?this.generateElement.bind(this):m,B=new tu({element:C(n)}).setLnglat({lng:n.geometry.coordinates[0],lat:n.geometry.coordinates[1]});return B}},{key:"normalMarker",value:function(n){var s=n.properties.marker_id;return this.markers[s]}},{key:"update",value:function(){if(this.mapsService&&this.markers.length!==0){var n=this.mapsService.getZoom(),s=this.mapsService.getBounds();(!this.bbox||Math.abs(n-this.zoom)>=1||!(0,pe.oO)(this.bbox,s))&&(this.bbox=(0,pe.yA)(s,.5),this.zoom=Math.floor(n),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(n){var s=pe.SO.create("div","l7-marker-cluster"),f=pe.SO.create("div","",s),m=pe.SO.create("span","",f),C=this.markerLayerOption.clusterOption,B=C.field,J=C.method;n.properties.point_count=n.properties.point_count||1;var re=B&&J?n.properties["point_"+J]||n.properties[B]:n.properties.point_count;return m.textContent=re,s}}]),i}(Le.EventEmitter),eo=y(4157),_a=y(73237);function Su(a){var l=ko();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ks=function(a){(0,er.Z)(i,a);var l=Su(i);function i(r){var n;return(0,Kn.Z)(this,i),n=l.call(this),i.controlCount++,n.controlOption=(0,be.Z)((0,be.Z)({},n.getDefault(r)),r||{}),n}return(0,Gn.Z)(i,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(n){var s=this.getDefault(n);Object.entries(n).forEach(function(f){var m=(0,qr.Z)(f,2),C=m[0],B=m[1];B===void 0&&(n[C]=s[C])}),"position"in n&&this.setPosition(n.position),"className"in n&&this.setClassName(n.className),"style"in n&&this.setStyle(n.style),this.controlOption=(0,be.Z)((0,be.Z)({},this.controlOption),n)}},{key:"addTo",value:function(n){this.mapsService=n.get(te.vK.IMapService),this.renderService=n.get(te.vK.IRendererService),this.layerService=n.get(te.vK.ILayerService),this.controlService=n.get(te.vK.IControlService),this.configService=n.get(te.vK.IGlobalConfigService),this.scene=n.get(te.vK.ISceneService),this.sceneContainer=n,this.isShow=!0,this.container=this.onAdd(),pe.SO.addClass(this.container,"l7-control");var s=this.controlOption,f=s.className,m=s.style;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;pe.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return pe.SO.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var n=this.container;pe.SO.removeClass(n,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var n=this.container;pe.SO.addClass(n,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(n){return{position:te.d.TOPRIGHT,name:"".concat(i.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(n){if(this.mapsService&&n&&n.screenX>0&&n.screenY>0){var s=this.mapsService.getContainer();s!==null&&s.focus()}}},{key:"setPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.d.TOPLEFT,s=this.controlService;return s&&s.removeControl(this),this.controlOption.position=n,s&&s.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(n){var s=this.container,f=this.controlOption.className;f&&pe.SO.removeClass(s,f),n&&pe.SO.addClass(s,n)}},{key:"setStyle",value:function(n){var s=this.container;n?s.setAttribute("style",n):s.removeAttribute("style")}},{key:"insertContainer",value:function(){var n=this.controlOption.position,s=this.container;if(n instanceof Element)n.appendChild(s);else{var f=this.controlService.controlCorners[n];n.indexOf("bottom")!==-1?f.insertBefore(s,f.firstChild):f.appendChild(s)}}},{key:"checkUpdateOption",value:function(n,s){return s.some(function(f){return f in n})}}]),i}(Xe());(0,pt.Z)(Ks,"controlCount",0);function Zu(a){var l=nu();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ru=function(a){(0,er.Z)(i,a);var l=Zu(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"isDisable",!1),r}return(0,Gn.Z)(i,[{key:"setIsDisable",value:function(n){if(this.isDisable=n,n){var s;(s=this.button)===null||s===void 0||s.setAttribute("disabled","true")}else{var f;(f=this.button)===null||f===void 0||f.removeAttribute("disabled")}}},{key:"createButton",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return pe.SO.create("button","l7-button-control ".concat(n))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var n=this.controlOption,s=n.title,f=n.btnText,m=n.btnIcon;return this.setBtnTitle(s),this.setBtnText(f),this.setBtnIcon(m),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(n){var s=n.title,f=n.btnText,m=n.btnIcon;this.checkUpdateOption(n,["title"])&&this.setBtnTitle(s),this.checkUpdateOption(n,["btnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(n,["btnText"])&&this.setBtnText(f),(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n)}},{key:"setBtnTitle",value:function(n){var s;(s=this.button)===null||s===void 0||s.setAttribute("title",n!=null?n:"")}},{key:"setBtnIcon",value:function(n){if(this.buttonIcon&&pe.SO.remove(this.buttonIcon),n){var s,f=(s=this.button)===null||s===void 0?void 0:s.firstChild;if(f){var m;(m=this.button)===null||m===void 0||m.insertBefore(n,f)}else{var C;(C=this.button)===null||C===void 0||C.appendChild(n)}this.buttonIcon=n}}},{key:"setBtnText",value:function(n){if(this.button)if(pe.SO.removeClass(this.button,"l7-button-control--row"),pe.SO.removeClass(this.button,"l7-button-control--column"),n){var s=this.buttonText;if(!s){var f;s=pe.SO.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(s),this.buttonText=s}s.innerText=n,pe.SO.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!n&&this.buttonText&&(pe.SO.remove(this.buttonText),this.buttonText=void 0)}}]),i}(Ks);function yc(a){var l=tl();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function tl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Tu=function(a){(0,er.Z)(i,a);var l=yc(i);function i(r,n){var s;return(0,Kn.Z)(this,i),s=l.call(this),(0,pt.Z)((0,$t.Z)(s),"isShow",!1),(0,pt.Z)((0,$t.Z)(s),"timeout",null),(0,pt.Z)((0,$t.Z)(s),"show",function(){return s.isShow||!s.contentDOM.innerHTML||(s.resetPopperPosition(),pe.SO.removeClass(s.popperDOM,"l7-popper-hide"),s.isShow=!0,s.option.unique&&i.conflictPopperList.forEach(function(f){f!==(0,$t.Z)(s)&&f.isShow&&f.hide()}),s.emit("show")),(0,$t.Z)(s)}),(0,pt.Z)((0,$t.Z)(s),"hide",function(){return s.isShow&&(pe.SO.addClass(s.popperDOM,"l7-popper-hide"),s.isShow=!1,s.emit("hide")),(0,$t.Z)(s)}),(0,pt.Z)((0,$t.Z)(s),"setHideTimeout",function(){s.timeout||(s.timeout=window.setTimeout(function(){s.isShow&&(s.hide(),s.timeout=null)},300))}),(0,pt.Z)((0,$t.Z)(s),"clearHideTimeout",function(){s.timeout&&(window.clearTimeout(s.timeout),s.timeout=null)}),(0,pt.Z)((0,$t.Z)(s),"onBtnClick",function(){s.isShow?s.hide():s.show()}),(0,pt.Z)((0,$t.Z)(s),"onBtnMouseLeave",function(){s.setHideTimeout()}),(0,pt.Z)((0,$t.Z)(s),"onBtnMouseMove",function(){s.clearHideTimeout(),!s.isShow&&s.show()}),s.button=r,s.option=n,s.init(),n.unique&&i.conflictPopperList.push((0,$t.Z)(s)),s}return(0,Gn.Z)(i,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(n){typeof n=="string"?this.contentDOM.innerHTML=n:n instanceof HTMLElement&&(pe.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(n)),this.content=n}},{key:"init",value:function(){var n=this.option.trigger;this.popperDOM=this.createPopper(),n==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),pe.SO.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var n={},s=this.option,f=s.container,m=s.offset,C=m===void 0?[0,0]:m,B=s.placement,J=(0,qr.Z)(C,2),re=J[0],Ce=J[1],Ge=this.button.getBoundingClientRect(),et=f.getBoundingClientRect(),Je=pe.SO.getDiffRect(Ge,et),Xt=Je.left,cn=Je.right,xn=Je.top,On=Je.bottom,ur=!1,_r=!1;/^(left|right)/.test(B)?(B.includes("left")?n.right="".concat(Ge.width+cn,"px"):B.includes("right")&&(n.left="".concat(Ge.width+Xt,"px")),B.includes("start")?n.top="".concat(xn,"px"):B.includes("end")?n.bottom="".concat(On,"px"):(n.top="".concat(xn+Ge.height/2,"px"),_r=!0,n.transform="translate(".concat(re,"px, calc(").concat(Ce,"px - 50%))"))):/^(top|bottom)/.test(B)&&(B.includes("top")?n.bottom="".concat(Ge.height+On,"px"):B.includes("bottom")&&(n.top="".concat(Ge.height+xn,"px")),B.includes("start")?n.left="".concat(Xt,"px"):B.includes("end")?n.right="".concat(cn,"px"):(n.left="".concat(Xt+Ge.width/2,"px"),ur=!0,n.transform="translate(calc(".concat(re,"px - 50%), ").concat(Ce,"px)"))),n.transform="translate(calc(".concat(re,"px - ").concat(ur?"50%":"0%","), calc(").concat(Ce,"px - ").concat(_r?"50%":"0%",")");var zr=B.split("-");zr.length&&pe.SO.addClass(this.popperDOM,zr.map(function(Ir){return"l7-popper-".concat(Ir)}).join(" ")),pe.SO.addStyle(this.popperDOM,pe.SO.css2Style(n))}},{key:"createPopper",value:function(){var n=this.option,s=n.container,f=n.className,m=f===void 0?"":f,C=n.content,B=pe.SO.create("div","l7-popper l7-popper-hide ".concat(m)),J=pe.SO.create("div","l7-popper-content"),re=pe.SO.create("div","l7-popper-arrow");return B.appendChild(J),B.appendChild(re),s.appendChild(B),this.popperDOM=B,this.contentDOM=J,C&&this.setContent(C),B}}]),i}(Le.EventEmitter);(0,pt.Z)(Tu,"conflictPopperList",[]);function pl(a){var l=Nl();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Nl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gs={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},Au=function(a){(0,er.Z)(i,a);var l=pl(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),(0,_a.Z)((0,Bt.Z)(i.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(n){var s,f=(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n),m=(s=n==null?void 0:n.position)!==null&&s!==void 0?s:f.position;return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{popperPlacement:m instanceof Element?"bottom":gs[m],popperTrigger:"click"})}},{key:"onAdd",value:function(){var n=(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this);return this.initPopper(),n}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var n=this,s=this.controlOption,f=s.popperClassName,m=s.popperPlacement,C=s.popperTrigger,B=this.mapsService.getMapContainer();return this.popper=new Tu(this.button,{className:f,placement:m,trigger:C,container:B,unique:!0}),this.popper.on("show",function(){n.emit("popperShow",n)}).on("hide",function(){n.emit("popperHide",n)}),this.popper}},{key:"setOptions",value:function(n){if((0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),this.checkUpdateOption(n,["popperPlacement","popperTrigger","popperClassName"])){var s=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(s)}}}]),i}(ru);function js(a){var l=nl();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function nl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var qs=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(qs||{}),rc=function(a){(0,er.Z)(i,a);var l=js(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"selectValue",[]),(0,pt.Z)((0,$t.Z)(r),"createNormalOption",function(m){var C=r.selectValue.includes(m.value),B=pe.SO.create("div","l7-select-control-item ".concat(C?qs.ActiveOptionClassName:""));r.getIsMultiple()&&B.appendChild(r.createCheckbox(C)),m.icon&&B.appendChild(m.icon);var J=pe.SO.create("span");return J.innerText=m.text,B.appendChild(J),B}),(0,pt.Z)((0,$t.Z)(r),"onItemClick",function(m){if(r.getIsMultiple()){var C=r.selectValue.findIndex(function(B){return B===m.value});C>-1?r.selectValue.splice(C,1):r.selectValue=[].concat((0,Ae.Z)(r.selectValue),[m.value])}else r.selectValue=[m.value];r.setSelectValue(r.selectValue)}),r}return(0,Gn.Z)(i,[{key:"setOptions",value:function(n){(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n);var s=n.options;s&&this.popper.setContent(this.getPopperContent(s))}},{key:"onAdd",value:function(){var n=(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this),s=this.controlOption.defaultValue;return s&&(this.selectValue=this.transSelectValue(s)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),n}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(n){var s=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,m=this.transSelectValue(n);this.optionDOMList.forEach(function(C){var B=C.getAttribute(qs.OptionValueAttrKey),J=s.getIsMultiple()?C.querySelector("input[type=checkbox]"):void 0;m.includes(B)?(pe.SO.addClass(C,qs.ActiveOptionClassName),J&&pe.SO.setChecked(J,!0)):(pe.SO.removeClass(C,qs.ActiveOptionClassName),J&&pe.SO.setChecked(J,!1))}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(n){var s=this,f=this.isImageOptions(),m=pe.SO.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&pe.SO.addClass(m,"l7-select-control--multiple");var C=n.map(function(B,J){var re=f?s.createImageOption(B):s.createNormalOption(B);return re.setAttribute(qs.OptionValueAttrKey,B.value),re.setAttribute(qs.OptionIndexAttrKey,window.String(J)),re.addEventListener("click",s.onItemClick.bind(s,B)),re});return m.append.apply(m,(0,Ae.Z)(C)),this.optionDOMList=C,m}},{key:"createImageOption",value:function(n){var s=this.selectValue.includes(n.value),f=pe.SO.create("div","l7-select-control-item ".concat(s?qs.ActiveOptionClassName:"")),m=pe.SO.create("img");m.setAttribute("src",n.img),pe.SO.setUnDraggable(m),f.appendChild(m);var C=pe.SO.create("div","l7-select-control-item-row");this.getIsMultiple()&&f.appendChild(this.createCheckbox(s));var B=pe.SO.create("span");return B.innerText=n.text,C.appendChild(B),f.appendChild(C),f}},{key:"createCheckbox",value:function(n){var s=pe.SO.create("input");return s.setAttribute("type","checkbox"),n&&pe.SO.setChecked(s,!0),s}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(n){return n.img})}},{key:"transSelectValue",value:function(n){return Array.isArray(n)?n:[n]}}]),i}(Au),ws=function(l){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("l7-iconfont"),i.setAttribute("aria-hidden","true");var r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(l)),i.appendChild(r),i};function _c(a){var l=bc();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function bc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Kc=function(a){(0,er.Z)(i,a);var l=_c(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"onClick",(0,We.Z)(Ze().mark(function m(){var C;return Ze().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(C=r.controlOption.onExport,C!=null){J.next=5;break}J.next=10;break;case 5:return J.t0=C,J.next=8,r.getImage();case 8:J.t1=J.sent,(0,J.t0)(J.t1);case 10:case"end":return J.stop()}},m)}))),(0,pt.Z)((0,$t.Z)(r),"mergeImage",(0,We.Z)(Ze().mark(function m(){var C,B,J,re,Ce,Ge,et,Je,Xt,cn,xn,On,ur,_r,zr=arguments;return Ze().wrap(function(ii){for(;;)switch(ii.prev=ii.next){case 0:for(J=r.controlOption.imageType,re=(C=(B=r.mapsService.getContainer())===null||B===void 0?void 0:B.getBoundingClientRect())!==null&&C!==void 0?C:{},Ce=re.width,Ge=Ce===void 0?0:Ce,et=re.height,Je=et===void 0?0:et,Xt=document.createElement("canvas"),Xt.width=Ge,Xt.height=Je,cn=Xt.getContext("2d"),xn=zr.length,On=new Array(xn),ur=0;ur<xn;ur++)On[ur]=zr[ur];return ii.next=9,Promise.all(On.map(function(Gi){return new Promise(function(Hi){var hi=new Image;hi.onload=function(){Hi(hi)},hi.src=Gi})}));case 9:return _r=ii.sent,_r.forEach(function(Gi){cn==null||cn.drawImage(Gi,0,0,Ge,Je)}),ii.abrupt("return",Xt.toDataURL("image/".concat(J)));case 12:case"end":return ii.stop()}},m)}))),r}return(0,Gn.Z)(i,[{key:"onAdd",value:function(){var n=(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this);return n.addEventListener("click",this.onClick),n}},{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:ws("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m;return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.mapsService.exportMap("png");case 2:return f=B.sent,B.next=5,this.scene.exportPng("png");case 5:return m=B.sent,B.abrupt("return",this.mergeImage.apply(this,(0,Ae.Z)([f,m].filter(function(J){return J}))));case 7:case"end":return B.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()}]),i}(ru);function iu(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=Nc(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function Nc(a,l){if(a){if(typeof a=="string")return xc(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xc(a,l)}}function xc(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}var Bl=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],au=function(){if(typeof document=="undefined")return!1;for(var a=Bl[0],l={},i=0,r=Bl;i<r.length;i++){var n=r[i],s=n==null?void 0:n[1];if(s in document){var f=iu(n.entries()),m;try{for(f.s();!(m=f.n()).done;){var C=(0,qr.Z)(m.value,2),B=C[0],J=C[1];l[a[B]]=J}}catch(re){f.e(re)}finally{f.f()}return l}}return!1}(),Cu={change:au.fullscreenchange,error:au.fullscreenerror},ms={request:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,i=arguments.length>1?arguments[1]:void 0;return new Promise(function(r,n){var s=function m(){ms.off("change",m),r()};ms.on("change",s);var f=l[au.requestFullscreen](i);f instanceof Promise&&f.then(s).catch(n)})},exit:function(){return new Promise(function(l,i){if(!ms.isFullscreen){l();return}var r=function s(){ms.off("change",s),l()};ms.on("change",r);var n=document[au.exitFullscreen]();n instanceof Promise&&n.then(r).catch(i)})},toggle:function(l,i){return ms.isFullscreen?ms.exit():ms.request(l,i)},onchange:function(l){ms.on("change",l)},onerror:function(l){ms.on("error",l)},on:function(l,i){var r=Cu[l];r&&document.addEventListener(r,i,!1)},off:function(l,i){var r=Cu[l];r&&document.removeEventListener(r,i,!1)},raw:au};Object.defineProperties(ms,{isFullscreen:{get:function(){return Boolean(document[au.fullscreenElement])}},element:{enumerable:!0,get:function(){var l;return(l=document[au.fullscreenElement])!==null&&l!==void 0?l:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[au.fullscreenEnabled])}}}),au||(ms={isEnabled:!1});var Zl=ms;function Bc(a){var l=Vs();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Vs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var wu=function(a){(0,er.Z)(i,a);var l=Bc(i);function i(r){var n;return(0,Kn.Z)(this,i),n=l.call(this,r),(0,pt.Z)((0,$t.Z)(n),"isFullscreen",!1),(0,pt.Z)((0,$t.Z)(n),"toggleFullscreen",(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!Zl.isEnabled){m.next=3;break}return m.next=3,Zl.toggle(n.mapContainer);case 3:case"end":return m.stop()}},s)}))),(0,pt.Z)((0,$t.Z)(n),"onClick",function(){n.toggleFullscreen()}),(0,pt.Z)((0,$t.Z)(n),"onFullscreenChange",function(){n.isFullscreen=!!document.fullscreenElement;var s=n.controlOption,f=s.btnText,m=s.btnIcon,C=s.title,B=s.exitBtnText,J=s.exitBtnIcon,re=s.exitTitle;n.isFullscreen?(n.setBtnTitle(re),n.setBtnText(B),n.setBtnIcon(J)):(n.setBtnTitle(C),n.setBtnText(f),n.setBtnIcon(m)),n.emit("fullscreenChange",n.isFullscreen)}),Zl.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316"),n}return(0,Gn.Z)(i,[{key:"setOptions",value:function(n){var s=n.exitBtnText,f=n.exitBtnIcon,m=n.exitTitle;this.isFullscreen&&(this.checkUpdateOption(n,["exitBtnIcon"])&&this.setBtnIcon(f),this.checkUpdateOption(n,["exitBtnText"])&&this.setBtnText(s),this.checkUpdateOption(n,["exitTitle"])&&this.setBtnTitle(m)),(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n)}},{key:"onAdd",value:function(){var n=(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this);return n.addEventListener("click",this.onClick),this.mapContainer=pe.SO.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),n}},{key:"onRemove",value:function(){(0,_a.Z)((0,Bt.Z)(i.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{title:"\u5168\u5C4F",btnIcon:ws("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:ws("l7-icon-exit-fullscreen")})}}]),i}(ru);function ys(a){var l=vl();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function vl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ec=function(a){(0,er.Z)(i,a);var l=ys(i);function i(r){var n;return(0,Kn.Z)(this,i),n=l.call(this,r),(0,pt.Z)((0,$t.Z)(n),"getGeoLocation",function(){return new Promise(function(s,f){window.navigator.geolocation.getCurrentPosition(function(m){var C=m.coords,B=C!=null?C:{},J=B.longitude,re=B.latitude;!(0,He.isNaN)(J)&&!(0,He.isNaN)(re)?s([J,re]):f()},function(m){f(m)})})}),(0,pt.Z)((0,$t.Z)(n),"onClick",(0,We.Z)(Ze().mark(function s(){var f,m,C;return Ze().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(window.navigator.geolocation){J.next=2;break}return J.abrupt("return");case 2:return f=n.controlOption.transform,J.next=5,n.getGeoLocation();case 5:if(m=J.sent,C=n.mapsService.getZoom(),J.t0=n.mapsService,J.t1=C>15?C:15,!f){J.next=15;break}return J.next=12,f(m);case 12:J.t2=J.sent,J.next=16;break;case 15:J.t2=m;case 16:J.t3=J.t2,J.t0.setZoomAndCenter.call(J.t0,J.t1,J.t3);case 18:case"end":return J.stop()}},s)}))),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D"),n}return(0,Gn.Z)(i,[{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{title:"\u5B9A\u4F4D",btnIcon:ws("l7-icon-reposition")})}},{key:"onAdd",value:function(){var n=(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this);return n.addEventListener("click",this.onClick),n}}]),i}(ru);function Sc(a){var l=Ul();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ul(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gl=function(a){(0,er.Z)(i,a);var l=Sc(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"onLayerChange",function(){var m;(m=r.controlOption.layers)!==null&&m!==void 0&&m.length||(r.selectValue=r.getLayerVisible(),r.setOptions({options:r.getLayerOptions()}))}),(0,pt.Z)((0,$t.Z)(r),"onLayerVisibleChane",function(){r.setSelectValue(r.getLayerVisible())}),(0,pt.Z)((0,$t.Z)(r),"onSelectChange",function(){r.layers.forEach(function(m){var C=r.selectValue.includes(m.name),B=m.isVisible();C&&!B&&m.show(),!C&&B&&m.hide()})}),r}return(0,Gn.Z)(i,[{key:"layers",get:function(){var n=this.layerService,s=this.controlOption.layers;if(Array.isArray(s)&&s.length){var f=[];return s.forEach(function(m){if(m instanceof Object&&f.push(m),typeof m=="string"){var C=n.getLayer(m)||n.getLayerByName(m);C&&f.push(C)}}),f}return n.getLayers()||[]}},{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:ws("l7-icon-layer"),options:[]})}},{key:"getLayerVisible",value:function(){return this.layers.filter(function(n){return n.isVisible()}).map(function(n){return n.name})}},{key:"getLayerOptions",value:function(){return this.layers.map(function(n){return{text:n.name,value:n.name}})}},{key:"setOptions",value:function(n){var s=this.checkUpdateOption(n,["layers"]);(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),s&&(this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"onAdd",value:function(){var n;return(n=this.controlOption.options)!==null&&n!==void 0&&n.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return!0}}]),i}(rc);function qc(a){var l=ic();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var In=function(a){(0,er.Z)(i,a);var l=qc(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getDefault",value:function(){return{position:te.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var n=pe.SO.create("div","l7-control-logo");return this.setLogoContent(n),n}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(n){(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),this.checkUpdateOption(n,["img","href"])&&(pe.SO.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(n){var s=this.controlOption,f=s.href,m=s.img,C=pe.SO.create("img");if(C.setAttribute("src",m),C.setAttribute("aria-label","AntV logo"),pe.SO.setUnDraggable(C),f){var B=pe.SO.create("a","l7-control-logo-link");B.target="_blank",B.href=f,B.rel="noopener nofollow",B.setAttribute("rel","noopener nofollow"),B.appendChild(C),n.appendChild(B)}else n.appendChild(C)}}]),i}(Ks),pr={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},rr={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function gi(a){var l=Ca();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ca(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var io=function(a){(0,er.Z)(i,a);var l=gi(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"onMapThemeChange",function(){r.mapsService.setMapStyle(r.selectValue[0])}),r}return(0,Gn.Z)(i,[{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:ws("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var n=this.mapsService.getType()==="mapbox"?rr:pr;return Object.entries(this.mapsService.getMapStyleConfig()).filter(function(s){var f=(0,qr.Z)(s,2),m=f[0],C=f[1];return typeof C=="string"&&m!=="blank"}).map(function(s){var f,m=(0,qr.Z)(s,2),C=m[0],B=m[1],J=(f=n[C])!==null&&f!==void 0?f:{},re=J.text,Ce=J.img;return{text:re!=null?re:C,value:B,img:Ce,key:C}})}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var n,s=this;if((n=this.controlOption.options)!==null&&n!==void 0&&n.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m,C=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(function(J){return J.key===C}))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:C}else{var B=this.getMapStyle();B?this.controlOption.defaultValue=B:this.mapsService.map.once("styledata",function(){var J=s.mapsService.getMapStyle();s.controlOption.defaultValue=J,s.setSelectValue(J,!1)})}return this.on("selectChange",this.onMapThemeChange),(0,_a.Z)((0,Bt.Z)(i.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),i}(rc);function Vo(a){var l=_o();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function _o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zl=function(a){(0,er.Z)(i,a);var l=Vo(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"location",[0,0]),(0,pt.Z)((0,$t.Z)(r),"onMouseMove",function(m){var C=r.location,B=m.lngLat||m.lnglat,J=r.controlOption.transform;B&&(C=[B.lng,B.lat]),r.location=C,J&&(C=J(C)),r.insertLocation2HTML(C),r.emit("locationChange",C)}),r}return(0,Gn.Z)(i,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{position:te.d.BOTTOMLEFT,transform:function(f){var m=(0,qr.Z)(f,2),C=m[0],B=m[1];return[+(+C).toFixed(6),+(+B).toFixed(6)]}})}},{key:"onAdd",value:function(){var n=pe.SO.create("div","l7-control-mouse-location");return n.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),n}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(n){this.container.innerText=n.join(", ")}}]),i}(Ks);function Tc(a){var l=Ds();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ds(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Uu=function(a){(0,er.Z)(i,a);var l=Tc(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"update",function(){var m=r.mapsService,C=r.controlOption.maxWidth,B=m.getSize()[1]/2,J=m.containerToLngLat([0,B]),re=m.containerToLngLat([C,B]),Ce=(0,pe.yM)([J.lng,J.lat],[re.lng,re.lat]);r.updateScales(Ce)}),r}return(0,Gn.Z)(i,[{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{name:"scale",position:te.d.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var n="l7-control-scale",s=pe.SO.create("div",n);this.resetScaleLines(s);var f=this.controlOption.updateWhenIdle;return this.mapsService.on(f?"moveend":"mapmove",this.update),this.mapsService.on(f?"zoomend":"zoomchange",this.update),s}},{key:"onRemove",value:function(){var n=this.controlOption.updateWhenIdle;this.mapsService.off(n?"zoomend":"zoomchange",this.update),this.mapsService.off(n?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(n){(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),this.checkUpdateOption(n,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(n){var s=this.controlOption,f=s.metric,m=s.imperial;f&&n&&this.updateMetric(n),m&&n&&this.updateImperial(n)}},{key:"resetScaleLines",value:function(n){pe.SO.clearChildren(n);var s=this.controlOption,f=s.metric,m=s.imperial,C=s.maxWidth,B=s.lockWidth;B&&pe.SO.addStyle(n,"width: ".concat(C,"px")),f&&(this.mScale=pe.SO.create("div","l7-control-scale-line",n)),m&&(this.iScale=pe.SO.create("div","l7-control-scale-line",n)),this.update()}},{key:"updateScale",value:function(n,s,f){var m=this.controlOption.maxWidth;n.style.width=Math.round(m*f)+"px",n.innerHTML=s}},{key:"getRoundNum",value:function(n){var s=Math.pow(10,(Math.floor(n)+"").length-1),f=n/s;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,s*f}},{key:"updateMetric",value:function(n){var s=this.getRoundNum(n),f=s<1e3?s+" m":s/1e3+" km";this.updateScale(this.mScale,f,s/n)}},{key:"updateImperial",value:function(n){var s=n*3.2808399,f,m,C;s>5280?(f=s/5280,m=this.getRoundNum(f),this.updateScale(this.iScale,m+" mi",m/f)):(C=this.getRoundNum(s),this.updateScale(this.iScale,C+" ft",C/s))}}]),i}(Ks);function rl(a){var l=Mu();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ml=function(a){(0,er.Z)(i,a);var l=rl(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"zoomIn",function(){!r.disabled&&r.mapsService.getZoom()<r.mapsService.getMaxZoom()&&r.mapsService.zoomIn()}),(0,pt.Z)((0,$t.Z)(r),"zoomOut",function(){!r.disabled&&r.mapsService.getZoom()>r.mapsService.getMinZoom()&&r.mapsService.zoomOut()}),(0,pt.Z)((0,$t.Z)(r),"updateDisabled",function(){var m=r.mapsService;r.zoomInButton.removeAttribute("disabled"),r.zoomOutButton.removeAttribute("disabled"),(r.disabled||m.getZoom()<=m.getMinZoom())&&r.zoomOutButton.setAttribute("disabled","true"),(r.disabled||m.getZoom()>=m.getMaxZoom())&&r.zoomInButton.setAttribute("disabled","true")}),r}return(0,Gn.Z)(i,[{key:"getDefault",value:function(n){return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{position:te.d.BOTTOMRIGHT,name:"zoom",zoomInText:ws("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:ws("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(n){(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),this.checkUpdateOption(n,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var n=pe.SO.create("div","l7-control-zoom");return this.resetButtonGroup(n),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),n}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(n){pe.SO.clearChildren(n),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",n,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",n,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(n,s,f,m,C){var B=pe.SO.create("button",f,m);return typeof n=="string"?B.innerHTML=n:B.append(n),B.title=s,B.addEventListener("click",C),B}}]),i}(Ks);function il(a){var l=po();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function po(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yl=function(a){(0,er.Z)(i,a);var l=il(i);function i(r){var n;(0,Kn.Z)(this,i),n=l.call(this),(0,pt.Z)((0,$t.Z)(n),"isShow",!0),(0,pt.Z)((0,$t.Z)(n),"onMouseMove",function(f){var m,C=n.mapsService.getMapContainer(),B=(m=C==null?void 0:C.getBoundingClientRect())!==null&&m!==void 0?m:{},J=B.left,re=J===void 0?0:J,Ce=B.top,Ge=Ce===void 0?0:Ce;n.setPopupPosition(f.clientX-re,f.clientY-Ge)}),(0,pt.Z)((0,$t.Z)(n),"updateLngLatPosition",function(){if(!(!n.mapsService||n.popupOption.followCursor)){var f=n.lngLat,m=f.lng,C=f.lat,B=n.mapsService.lngLatToContainer([m,C]),J=B.x,re=B.y;n.setPopupPosition(J,re)}}),(0,pt.Z)((0,$t.Z)(n),"onKeyDown",function(f){f.keyCode===27&&n.remove()}),(0,pt.Z)((0,$t.Z)(n),"onCloseButtonClick",function(f){f.stopPropagation&&f.stopPropagation(),n.hide()}),(0,pt.Z)((0,$t.Z)(n),"update",function(){var f=!!n.lngLat,m=n.popupOption,C=m.className,B=m.style,J=m.maxWidth,re=m.anchor,Ce=m.stopPropagation;if(!(!n.mapsService||!f||!n.content)){var Ge=n.mapsService.getMarkerContainer();if(!n.container&&Ge&&(n.container=pe.SO.create("div","l7-popup ".concat(C!=null?C:""," ").concat(n.isShow?"":"l7-popup-hide"),Ge),B&&n.container.setAttribute("style",B),n.tip=pe.SO.create("div","l7-popup-tip",n.container),n.container.appendChild(n.content),Ce&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Xt){n.container.addEventListener(Xt,function(cn){cn.stopPropagation()})}),n.container.style.whiteSpace="nowrap"),n.updateLngLatPosition(),pe.SO.setTransform(n.container,"".concat(pe.rQ[re])),(0,pe.zi)(n.container,re,"popup"),J){var et=n.container.getBoundingClientRect(),Je=et.width;Je>parseFloat(J)&&(n.container.style.width=J)}else n.container.style.removeProperty("width")}}),n.popupOption=(0,be.Z)((0,be.Z)({},n.getDefault(r!=null?r:{})),r);var s=n.popupOption.lngLat;return s&&(n.lngLat=s),n}return(0,Gn.Z)(i,[{key:"lngLat",get:function(){var n;return(n=this.popupOption.lngLat)!==null&&n!==void 0?n:{lng:0,lat:0}},set:function(n){this.popupOption.lngLat=n}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(n){this.mapsService=n.get(te.vK.IMapService),this.sceneService=n.get(te.vK.ISceneService),this.layerService=n.get(te.vK.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=n,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var s=this.popupOption,f=s.html,m=s.text,C=s.title;return f?this.setHTML(f):m&&this.setText(m),C&&this.setTitle(C),this.emit("open"),this}},{key:"remove",value:function(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&pe.SO.remove(this.content),this.container&&(pe.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(n){return this.show(),this.popupOption=(0,be.Z)((0,be.Z)({},this.popupOption),n),this.checkUpdateOption(n,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(pe.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(n,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(n,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(n,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(n,["html"])&&n.html?this.setHTML(n.html):this.checkUpdateOption(n,["text"])&&n.text&&this.setText(n.text),this.checkUpdateOption(n,["lngLat"])&&n.lngLat&&this.setLnglat(n.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&pe.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&pe.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(n){return this.popupOption.html=n,this.setDOMContent(n)}},{key:"setText",value:function(n){return this.popupOption.text=n,this.setDOMContent(window.document.createTextNode(n))}},{key:"setTitle",value:function(n){this.show(),this.popupOption.title=n,n?(this.contentTitle||(this.contentTitle=pe.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),pe.SO.clearChildren(this.contentTitle),pe.SO.appendElementType(this.contentTitle,n)):this.contentTitle&&(pe.SO.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var n=this.lngLat,s=n.lng,f=n.lat;return this.popupOption.autoPan&&this.mapsService.panTo([s,f]),this}},{key:"setLngLat",value:function(n){return this.setLnglat(n)}},{key:"setLnglat",value:function(n){var s=this;return this.show(),this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){s.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(n){return this.popupOption.maxWidth=n,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(n){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:pe.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(n){return this.show(),this.createContent(),pe.SO.appendElementType(this.contentPanel,n),this.update(),this}},{key:"updateCloseOnClick",value:function(n){var s=this,f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!n&&requestAnimationFrame(function(){f==null||f.on("click",s.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(n){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!n&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(n){var s,f=(s=this.mapsService)===null||s===void 0?void 0:s.getContainer();f&&(f==null||f.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!n&&(f==null||f.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var n=this;if(this.content&&pe.SO.remove(this.content),this.contentTitle=void 0,this.content=pe.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var s=ws("l7-icon-guanbi");pe.SO.addClass(s,"l7-popup-close-button"),this.content.appendChild(s),this.popupOption.closeButtonOffsets&&(s.style.right=this.popupOption.closeButtonOffsets[0]+"px",s.style.top=this.popupOption.closeButtonOffsets[1]+"px"),s.setAttribute("aria-label","Close popup"),s.addEventListener("click",function(){n.hide()}),this.closeButton=s}else this.closeButton=void 0;this.contentPanel=pe.SO.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(n,s){if(this.container){var f=this.popupOption.offsets;this.container.style.left=n+f[0]+"px",this.container.style.top=s-f[1]+"px"}}},{key:"checkUpdateOption",value:function(n,s){return s.some(function(f){return f in n})}}]),i}(Le.EventEmitter);function Zc(a){var l=zu();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _s=function(a){(0,er.Z)(i,a);var l=Zc(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"layerConfigMap",new WeakMap),r}return(0,Gn.Z)(i,[{key:"layerConfigItems",get:function(){var n,s=this.popupOption,f=s.config,m=s.items;return(n=f!=null?f:m)!==null&&n!==void 0?n:[]}},{key:"addTo",value:function(n){return(0,_a.Z)((0,Bt.Z)(i.prototype),"addTo",this).call(this,n),this.bindLayerEvent(),this.hide(),this}},{key:"remove",value:function(){return(0,_a.Z)((0,Bt.Z)(i.prototype),"remove",this).call(this),this.unbindLayerEvent(),this}},{key:"setOptions",value:function(n){return this.unbindLayerEvent(),(0,_a.Z)((0,Bt.Z)(i.prototype),"setOptions",this).call(this,n),this.bindLayerEvent(),this}},{key:"getDefault",value:function(n){var s=n.trigger==="click";return(0,be.Z)((0,be.Z)({},(0,_a.Z)((0,Bt.Z)(i.prototype),"getDefault",this).call(this,n)),{},{trigger:"hover",followCursor:!s,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!1,autoClose:!1,closeOnEsc:!1})}},{key:"bindLayerEvent",value:function(){var n=this,s=this.popupOption.trigger;this.layerConfigItems.forEach(function(f){var m,C=n.getLayerByConfig(f);if(C){var B=(0,be.Z)({},f);if(s==="hover"){var J=n.onLayerMouseMove.bind(n,C),re=n.onLayerMouseOut.bind(n,C);B.onMouseMove=J,B.onMouseOut=re,C==null||C.on("mousemove",J),C==null||C.on("mouseout",re)}else{var Ce=n.onLayerClick.bind(n,C);B.onClick=Ce,C==null||C.on("click",Ce)}var Ge=C==null||(m=C.getSource)===null||m===void 0?void 0:m.call(C),et=n.onSourceUpdate.bind(n,C);Ge==null||Ge.on("update",et),B.onSourceUpdate=et,n.layerConfigMap.set(C,B)}})}},{key:"unbindLayerEvent",value:function(){var n=this;this.layerConfigItems.forEach(function(s){var f=n.getLayerByConfig(s),m=f&&n.layerConfigMap.get(f);if(m){var C=m.onMouseMove,B=m.onMouseOut,J=m.onClick,re=m.onSourceUpdate;if(C&&f.off("mousemove",C),B&&f.off("mouseout",B),J&&f.off("click",J),re){var Ce;f==null||(Ce=f.getSource())===null||Ce===void 0||Ce.off("update",re)}}})}},{key:"onLayerMouseMove",value:function(n,s){if(!this.isSameFeature(n,s.featureId)){var f=this.getLayerInfoFrag(n,s),m=f.title,C=f.content;this.setDOMContent(C),this.setTitle(m),this.displayFeatureInfo={layer:n,featureId:s.featureId},this.show()}}},{key:"onLayerMouseOut",value:function(n,s){this.displayFeatureInfo=void 0,this.isShow&&this.hide()}},{key:"onLayerClick",value:function(n,s){if(this.isShow&&this.isSameFeature(n,s.featureId))this.hide();else{var f=this.getLayerInfoFrag(n,s),m=f.title,C=f.content;this.setDOMContent(C),this.setLnglat(s.lngLat),this.setTitle(m),this.displayFeatureInfo={layer:n,featureId:s.featureId},this.show()}}},{key:"onSourceUpdate",value:function(n){this.hide(),this.displayFeatureInfo=void 0}},{key:"getLayerInfoFrag",value:function(n,s){var f=this.layerConfigMap.get(n),m,C=document.createDocumentFragment();if(f){var B=s.feature;B.type==="Feature"&&"properties"in B&&"geometry"in B&&(B=B.properties);var J=f.title,re=f.fields,Ce=f.customContent;if(J){m=document.createDocumentFragment();var Ge=J instanceof Function?J(B):J;pe.SO.appendElementType(m,Ge)}if(Ce){var et=Ce instanceof Function?Ce(B):Ce;pe.SO.appendElementType(C,et)}else re!=null&&re.length&&(re==null||re.forEach(function(Je){var Xt,cn,xn=typeof Je=="string"?{field:Je}:Je,On=xn.field,ur=xn.formatField,_r=xn.formatValue,zr=xn.getValue,Ir=pe.SO.create("div","l7-layer-popup__row"),ii=zr?zr(s.feature):(0,He.get)(B,On),Gi=(Xt=ur instanceof Function?ur(On,B):ur)!==null&&Xt!==void 0?Xt:On,Hi=(cn=_r instanceof Function?_r(ii,B):_r)!==null&&cn!==void 0?cn:ii,hi=pe.SO.create("span","l7-layer-popup__key",Ir);pe.SO.appendElementType(hi,Gi),pe.SO.appendElementType(hi,document.createTextNode("\uFF1A"));var pa=pe.SO.create("span","l7-layer-popup__value",Ir);Array.isArray(Hi)&&Hi.every(function(Ya){return!(Ya instanceof Object)})&&(Hi=Hi.map(function(Ya){return String(Ya)}).join(",")),pe.SO.appendElementType(pa,Hi),C.appendChild(Ir)}))}return{title:m,content:C}}},{key:"getLayerByConfig",value:function(n){var s=n.layer;if(s instanceof Object)return s;if(typeof s=="string")return this.layerService.getLayer(s)||this.layerService.getLayerByName(s)}},{key:"isSameFeature",value:function(n,s){var f=this.displayFeatureInfo;return f&&n===f.layer&&s===f.featureId}}]),i}(yl);function pu(a,l){var i=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(i||r)&&(l||(l=document),!!l)){var n=l.head||l.getElementsByTagName("head")[0];if(!n){n=l.createElement("head");var s=l.body||l.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(n,s):l.documentElement.appendChild(n)}var f=l.createElement("style");return f.type="text/css",f.styleSheet?f.styleSheet.cssText=a:f.appendChild(l.createTextNode(a)),n.appendChild(f),f}}pu(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 1000;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 800;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  height: 24px;
  line-height: 24px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 16px;
  font-size: 12px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  height: 14px;
  width: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  padding: 12px 12px 0 12px;
  width: 474px;
  height: 320px;
  overflow: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-select-control--image .l7-select-control-item {
  margin-right: 12px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #fff;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  width: calc((100% - 36px) / 3);
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-bottom: 12px;
  position: relative;
  font-size: 12px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 142px;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  right: 0;
  top: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control--image .l7-select-control-item:nth-child(3n) {
  margin-right: 0;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  overflow: hidden;
}
.l7-control-zoom .l7-button-control {
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
  border-radius: 0;
  font-size: 16px;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:first-child {
  border-bottom: 1px solid #f0f0f0;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
`);var al=y(43269),vu=y(53229),os,Gs=(os={},(0,pt.Z)(os,te.h0.additive,{enable:!0,func:{srcRGB:te.gl.ONE,dstRGB:te.gl.ONE,srcAlpha:1,dstAlpha:1}}),(0,pt.Z)(os,te.h0.none,{enable:!1}),(0,pt.Z)(os,te.h0.normal,{enable:!0,func:{srcRGB:te.gl.SRC_ALPHA,dstRGB:te.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,pt.Z)(os,te.h0.subtractive,{enable:!0,func:{srcRGB:te.gl.ONE,dstRGB:te.gl.ONE,srcAlpha:te.gl.ZERO,dstAlpha:te.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:te.gl.FUNC_SUBTRACT,alpha:te.gl.FUNC_SUBTRACT}}),(0,pt.Z)(os,te.h0.max,{enable:!0,func:{srcRGB:te.gl.ONE,dstRGB:te.gl.ONE},equation:{rgb:te.gl.MAX_EXT}}),(0,pt.Z)(os,te.h0.min,{enable:!0,func:{srcRGB:te.gl.ONE,dstRGB:te.gl.ONE},equation:{rgb:te.gl.MIN_EXT}}),os);function Lo(a,l,i,r,n){l.updateStyleAttribute(a,i,r,n)}function gu(a,l){l.tileLayer||l.isTileLayer||(a.opacity&&Ms("opacity",l,a.opacity),a.strokeWidth&&Ms("strokeWidth",l,a.strokeWidth),a.strokeOpacity&&Ms("strokeOpacity",l,a.strokeOpacity),a.stroke&&No("stroke",l,a.stroke),a.offsets&&ou("offsets",l,a.offsets),a.textOffset&&ou("textOffset",l,a.textOffset),a.thetaOffset&&Ms("thetaOffset",l,a.thetaOffset))}function Ms(a,l,i){(0,He.isString)(i)?Lo(a,l,i,function(r){return r}):(0,He.isNumber)(i)||(Array.isArray(i)&&i.length===2?(0,He.isString)(i[0])&&(0,He.isFunction)(i[1])||(0,He.isString)(i[0])&&Array.isArray(i[1])&&(0,He.isNumber)(i[1][0])&&(0,He.isNumber)(i[1][1])?Lo(a,l,i[0],i[1]):Lo(a,l,[1],void 0):Lo(a,l,[1],void 0))}function ou(a,l,i){(0,He.isString)(i)?Lo(a,l,i,function(r){return r}):Array.isArray(i)&&i.length===2&&(0,He.isString)(i[0])&&(0,He.isFunction)(i[1])?Lo(a,l,i[0],i[1]):Array.isArray(i)&&i.length===2&&(0,He.isNumber)(i[0])&&(0,He.isNumber)(i[1])?Lo(a,l,i,void 0):Lo(a,l,[0,0],void 0)}function No(a,l,i){(0,He.isString)(i)||(Array.isArray(i)&&i.length===2&&((0,He.isString)(i[0])&&(0,He.isFunction)(i[1])||(0,He.isString)(i[0])&&Array.isArray(i[1])&&i[1].length>0)?Lo(a,l,i[0],i[1]):Lo(a,l,"#fff",void 0))}var qo=y(84859);function ol(a,l){var i=[l[0]-a[0],l[1]-a[1]],r=(0,pe.Fv)(i),n=[a[0]+r[0]*1e-4,a[1]+r[1]*1e-4];return n}function bs(a,l,i){if(a.length>0&&l.version===qo.G["GAODE2.x"]){var r=i.coordCenter;typeof a[0].coordinates[0]=="number"?a.filter(function(n){return!n.originCoordinates}).map(function(n){n.version=qo.G["GAODE2.x"],n.originCoordinates=(0,He.cloneDeep)(n.coordinates),n.coordinates=l.lngLatToCoordByLayer(n.coordinates,r)}):a.filter(function(n){return!n.originCoordinates}).map(function(n){n.version=qo.G["GAODE2.x"],n.originCoordinates=(0,He.cloneDeep)(n.coordinates),n.coordinates=l.lngLatToCoordsByLayer(n.coordinates,r)})}}function $l(a,l){a.length>0&&l.version===qo.G.SIMPLE&&a.map(function(i){i.simpleCoordinate||(i.coordinates=jl(i.coordinates,l),i.simpleCoordinate=!0)})}function jl(a,l){if(typeof a[0]=="number")return l.simpleMapCoord.unproject(a);if(a[0]&&a[0][0]instanceof Array){var i=[];return a.map(function(n){var s=[];n.map(function(f){s.push(l.simpleMapCoord.unproject(f))}),i.push(s)}),i}else{var r=[];return a.map(function(n){r.push(l.simpleMapCoord.unproject(n))}),r}}function Uc(a,l){var i;if(!a.scale)return[];var r=(a==null||(i=a.scale)===null||i===void 0?void 0:i.scalers)||[],n=[];r.forEach(function(f){var m,C=f.field;(l.hasOwnProperty(C)||((m=a.scale)===null||m===void 0?void 0:m.type)==="variable")&&n.push(l[C])});var s=a.mapping?a.mapping(n):[];return s}function ff(a,l,i,r,n){var s=n==null?void 0:n.getLayerConfig(),f=s.arrow,m=f===void 0?{enable:!1}:f,C=l.map(function(B){var J={id:B._id,coordinates:B.coordinates};if(a.filter(function(Ge){return Ge.scale!==void 0}).forEach(function(Ge){var et=Uc(Ge,B);Ge.needRemapping=!1,Ge.name==="color"&&(et=et.map(function(Je){return(0,pe.CI)(Je)})),J[Ge.name]=Array.isArray(et)&&et.length===1?et[0]:et,Ge.name==="shape"&&(J.shape=i.getIconFontKey(J[Ge.name]))}),J.shape==="line"&&m.enable){var re=J.coordinates,Ce=ol(re[0],re[1]);J.coordinates.splice(1,0,Ce,Ce)}return J});return bs(C,r,n),$l(C,r),C}function Vl(a,l,i,r,n,s){var f=new vs(n,s),m=r.getLayerStyleAttributes()||[],C=f.data.dataArray,B=C,J=ff(m,B,l,i,a);return f.destroy(),J}function _l(a){return a.map(function(l){return typeof l=="string"&&(l=[l,{}]),l})}function bl(a,l,i,r){var n=a.multiPassRenderer,s=a.getLayerConfig(),f=s.enableTAA;return f?n.add(r("taa")):n.add(r("render")),_l(l).forEach(function(m){var C=(0,qr.Z)(m,2),B=C[0],J=C[1];n.add(i(B),J)}),n.add(i("copy")),n}var zc=function(){function a(l){(0,Kn.Z)(this,a),this.layer=l}return(0,Gn.Z)(a,[{key:"pickRender",value:function(i){var r=this.layer.getContainer(),n=r.get(te.vK.ILayerService),s=this.layer;if(s.tileLayer)return s.tileLayer.pickRender(i);s.hooks.beforePickingEncode.call(),n.renderTileLayerMask(s),s.renderModels({ispick:!0}),s.hooks.afterPickingEncode.call()}},{key:"pick",value:function(i,r){var n=this.layer.getContainer(),s=n.get(te.vK.IPickingService);return i.type==="RasterLayer"?this.pickRasterLayer(i,r):(this.pickRender(r),s.pickFromPickingFBO(i,r))}},{key:"pickRasterLayer",value:function(i,r,n){var s=this.layer.getContainer(),f=s.get(te.vK.IPickingService),m=s.get(te.vK.IMapService),C=this.layer.getSource().extent,B=(0,pe.if)(r.lngLat,C),J={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},re=n||i;if(B){var Ce=this.readRasterValue(i,C,m,r.x,r.y);return J.rasterValue=Ce,f.triggerHoverOnLayer(re,J),!0}else return J.type=r.type==="mousemove"?"mouseout":"un"+r.type,f.triggerHoverOnLayer(re,(0,be.Z)((0,be.Z)({},J),{},{type:"unpick"})),f.triggerHoverOnLayer(re,J),!1}},{key:"readRasterValue",value:function(i,r,n,s,f){var m=i.getSource().data.dataArray[0],C=(0,qr.Z)(r,4),B=C[0],J=B===void 0?0:B,re=C[1],Ce=re===void 0?0:re,Ge=C[2],et=Ge===void 0?10:Ge,Je=C[3],Xt=Je===void 0?-10:Je,cn=n.lngLatToContainer([J,Ce]),xn=n.lngLatToContainer([et,Xt]),On=xn.x-cn.x,ur=cn.y-xn.y,_r=[(s-cn.x)/On,(f-xn.y)/ur],zr=m.width||1,Ir=m.height||1,ii=Math.floor(_r[0]*zr),Gi=Math.floor(_r[1]*Ir),Hi=Math.max(0,Gi-1)*zr+ii,hi=m.data[Hi];return hi}},{key:"selectFeature",value:function(i){var r=this.layer,n=(0,qr.Z)(i,3),s=n[0],f=n[1],m=n[2];r.hooks.beforeSelect.call([s,f,m])}},{key:"highlightPickedFeature",value:function(i){var r=(0,qr.Z)(i,3),n=r[0],s=r[1],f=r[2];this.layer.hooks.beforeHighlight.call([n,s,f])}},{key:"getFeatureById",value:function(i){return this.layer.getSource().getFeatureById(i)}}]),a}(),ac=function(){function a(l){(0,Kn.Z)(this,a),this.layer=l;var i=this.layer.getContainer();this.rendererService=i.get(te.vK.IRendererService)}return(0,Gn.Z)(a,[{key:"getColorTexture",value:function(i,r){var n=this.getTextureKey(i,r);return this.key===n?this.colorTexture:(this.createColorTexture(i,r),this.key=n,this.colorTexture)}},{key:"createColorTexture",value:function(i,r){var n=this.rendererService.createTexture2D,s=this.getColorRampBar(i,r),f=n({data:new Uint8Array(s.data),width:s.width,height:s.height,flipY:!1});return this.colorTexture=f,f}},{key:"setColorTexture",value:function(i,r,n){this.key=this.getTextureKey(r,n),this.colorTexture=i}},{key:"destroy",value:function(){var i;(i=this.colorTexture)===null||i===void 0||i.destroy()}},{key:"getColorRampBar",value:function(i,r){switch(i.type){case"cat":return(0,pe.hj)(i);case"quantize":return(0,pe.NJ)(i);case"custom":return(0,pe.Oc)(i,r);case"linear":return(0,pe.M4)(i,r);default:return(0,pe.Cl)(i)}}},{key:"getTextureKey",value:function(i,r){var n;return"".concat(i.colors.join("_"),"_").concat(i==null||(n=i.positions)===null||n===void 0?void 0:n.join("_"),"_").concat(i.type,"_").concat(r==null?void 0:r.join("_"))}}]),a}(),Ac=["passes"],Cc=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"],Bo,Qo,oc;function xl(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=wc(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function wc(a,l){if(a){if(typeof a=="string")return Ou(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ou(a,l)}}function Ou(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}function su(a){var l=no();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function no(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var sl=0,Zo=(Bo=(0,te.yT)(te.vK.IGlobalConfigService),Qo=function(a){(0,er.Z)(i,a);var l=su(i);function i(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Kn.Z)(this,i),r=l.call(this),(0,pt.Z)((0,$t.Z)(r),"id","".concat(sl++)),(0,pt.Z)((0,$t.Z)(r),"name","".concat(sl)),(0,pt.Z)((0,$t.Z)(r),"visible",!0),(0,pt.Z)((0,$t.Z)(r),"zIndex",0),(0,pt.Z)((0,$t.Z)(r),"inited",!1),(0,pt.Z)((0,$t.Z)(r),"layerModelNeedUpdate",!1),(0,pt.Z)((0,$t.Z)(r),"pickedFeatureID",null),(0,pt.Z)((0,$t.Z)(r),"selectedFeatureID",null),(0,pt.Z)((0,$t.Z)(r),"styleNeedUpdate",!1),(0,pt.Z)((0,$t.Z)(r),"forceRender",!1),(0,pt.Z)((0,$t.Z)(r),"clusterZoom",0),(0,pt.Z)((0,$t.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,pt.Z)((0,$t.Z)(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,pt.Z)((0,$t.Z)(r),"hooks",{init:new Ai.S$,afterInit:new Ai.oI,beforeRender:new Ai.oI,beforeRenderData:new Ai.bf,afterRender:new Ai.ni,beforePickingEncode:new Ai.ni,afterPickingEncode:new Ai.ni,beforeHighlight:new Ai.ni(["pickedColor"]),afterHighlight:new Ai.ni,beforeSelect:new Ai.ni(["pickedColor"]),afterSelect:new Ai.ni,beforeDestroy:new Ai.ni,afterDestroy:new Ai.ni}),(0,pt.Z)((0,$t.Z)(r),"models",[]),(0,pt.Z)((0,$t.Z)(r),"startInit",!1),(0,pt.Z)((0,$t.Z)(r),"layerChildren",[]),(0,pt.Z)((0,$t.Z)(r),"masks",[]),(0,al.Z)((0,$t.Z)(r),"configService",oc,(0,$t.Z)(r)),(0,pt.Z)((0,$t.Z)(r),"animateOptions",{enable:!1}),(0,pt.Z)((0,$t.Z)(r),"currentPickId",null),(0,pt.Z)((0,$t.Z)(r),"pendingStyleAttributes",[]),(0,pt.Z)((0,$t.Z)(r),"scaleOptions",{}),(0,pt.Z)((0,$t.Z)(r),"animateStatus",!1),(0,pt.Z)((0,$t.Z)(r),"isDestroyed",!1),(0,pt.Z)((0,$t.Z)(r),"encodeDataLength",0),(0,pt.Z)((0,$t.Z)(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var s=r.getLayerConfig();s&&s.autoFit&&r.fitBounds(s.fitBoundsOptions);var f=r.layerSource.getSourceCfg().autoRender;f&&r.reRender()}),r.name=n.name||r.id,r.zIndex=n.zIndex||0,r.rawConfig=n,r}return(0,Gn.Z)(i,[{key:"addMask",value:function(n){this.masks.push(n),this.enableMask()}},{key:"removeMask",value:function(n){var s=this.masks.indexOf(n);s>-1&&this.masks.splice(s,1)}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(n){this.masks.push(n)}},{key:"removeMaskLayer",value:function(n){var s=this.masks.indexOf(n);s>-1&&this.masks.splice(s,1),n.destroy()}},{key:"getAttribute",value:function(n){return this.styleAttributeService.getLayerStyleAttribute(n)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(n){var s=this;if(Object.keys(n).map(function(m){m in s.rawConfig&&(s.rawConfig[m]=n[m])}),!this.startInit)this.needUpdateConfig=(0,be.Z)((0,be.Z)({},this.needUpdateConfig),n);else{var f=this.container.get(te.vK.SceneID);gu(n,this),this.configService.setLayerConfig(f,this.id,(0,be.Z)((0,be.Z)((0,be.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),n)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(n,s){this.container=n,this.sceneContainer=s}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(n){return this.plugins.push(n),this}},{key:"init",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f=this,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:m=this.container.get(te.vK.SceneID),this.startInit=!0,this.configService.setLayerConfig(m,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(te.vK.IIconService),this.fontService=this.container.get(te.vK.IFontService),this.rendererService=this.container.get(te.vK.IRendererService),this.layerService=this.container.get(te.vK.ILayerService),this.debugService=this.container.get(te.vK.IDebugService),this.interactionService=this.container.get(te.vK.IInteractionService),this.pickingService=this.container.get(te.vK.IPickingService),this.mapService=this.container.get(te.vK.IMapService),C=this.getLayerConfig(),B=C.enableMultiPassRenderer,J=C.passes,B&&J!==null&&J!==void 0&&J.length&&J.length>0&&this.mapService.on("mapAfterFrameChange",function(){f.renderLayers()}),this.cameraService=this.container.get(te.vK.ICameraService),this.coordinateService=this.container.get(te.vK.ICoordinateSystemService),this.shaderModuleService=this.container.get(te.vK.IShaderModuleService),this.postProcessingPassFactory=this.container.get(te.vK.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(te.vK.IFactoryNormalPass),this.styleAttributeService=this.container.get(te.vK.IStyleAttributeService),B&&(this.multiPassRenderer=this.container.get(te.vK.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(Xt){var cn=Xt.attributeName,xn=Xt.attributeField,On=Xt.attributeValues,ur=Xt.updateOptions;f.styleAttributeService.updateStyleAttribute(cn,{scale:(0,be.Z)({field:xn},f.splitValuesAndCallbackInAttribute(On,f.getLayerConfig()[cn]))},ur)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(te.vK.ILayerPlugin),re=xl(this.plugins);try{for(re.s();!(Ce=re.n()).done;)Ge=Ce.value,Ge.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(Xt){re.e(Xt)}finally{re.f()}return this.layerPickService=new zc(this),this.textureService=new ac(this),this.log(te.Or.LayerInitStart),Je.next=31,this.hooks.init.promise();case 31:this.log(te.Or.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"log",value:function(n){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var m="".concat(this.id,".").concat(f,".").concat(n),C={id:this.id,type:this.type};(s=this.debugService)===null||s===void 0||s.log(m,C)}}},{key:"updateModelData",value:function(n){n.attributes&&n.elements?this.models.map(function(s){s.updateAttributesAndElements(n.attributes,n.elements)}):console.warn("data error")}},{key:"createModelData",value:function(n,s){var f;if((f=this.layerModel)!==null&&f!==void 0&&f.createModelData)return this.layerModel.createModelData(s);var m=this.calculateEncodeData(n,s),C=this.triangulation;return m&&C?this.styleAttributeService.createAttributesAndIndices(m,C):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(n){this.layerPickService=n}},{key:"calculateEncodeData",value:function(n,s){return this.inited?Vl(this,this.fontService,this.mapService,this.styleAttributeService,n,s):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig((0,be.Z)((0,be.Z)((0,be.Z)({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var n=this.getLayerConfig(),s=n.animateOption;s!=null&&s.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(n,s,f){return this.updateStyleAttribute("color",n,s,f),this}},{key:"texture",value:function(n,s,f){return this.updateStyleAttribute("texture",n,s,f),this}},{key:"rotate",value:function(n,s,f){return this.updateStyleAttribute("rotate",n,s,f),this}},{key:"size",value:function(n,s,f){return this.updateStyleAttribute("size",n,s,f),this}},{key:"filter",value:function(n,s,f){var m=this.updateStyleAttribute("filter",n,s,f);return this.dataState.dataSourceNeedUpdate=m&&this.inited,this}},{key:"shape",value:function(n,s,f){this.shapeOption={field:n,values:s};var m=this.updateStyleAttribute("shape",n,s,f);return this.dataState.dataSourceNeedUpdate=m&&this.inited,this}},{key:"label",value:function(n,s,f){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:n,attributeValues:s,updateOptions:f}),this}},{key:"animate",value:function(n){var s={};return(0,He.isObject)(n)?(s.enable=!0,s=(0,be.Z)((0,be.Z)({},s),n)):s.enable=n,this.updateLayerConfig({animateOption:s}),this}},{key:"source",value:function(n,s){return(n==null?void 0:n.type)==="source"?(this.setSource(n),this):(this.sourceOption={data:n,options:s},this.clusterZoom=0,this)}},{key:"setData",value:function(n,s){var f=this;return this.inited?(this.log(te.Or.SourceInitStart,te.KD.UPDATE),this.layerSource.setData(n,s),this.log(te.Or.SourceInitEnd,te.KD.UPDATE)):this.on("inited",function(){f.log(te.Or.SourceInitStart,te.KD.UPDATE);var m=f.getSource();m?f.layerSource.setData(n,s):f.source(new vs(n,s)),f.layerSource.once("update",function(){f.log(te.Or.SourceInitEnd,te.KD.UPDATE)})}),this}},{key:"style",value:function(n){var s=this,f=n.passes,m=(0,jt.Z)(n,Ac);return f&&_l(f).forEach(function(C){var B=s.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(C[0]);B&&B.updateOptions(C[1])}),this.rawConfig=(0,be.Z)((0,be.Z)({},this.rawConfig),m),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(n,s){var f=(0,be.Z)({},this.scaleOptions);if((0,He.isObject)(n)?this.scaleOptions=(0,be.Z)((0,be.Z)({},this.scaleOptions),n):this.scaleOptions[n]=s,this.styleAttributeService&&!(0,He.isEqual)(f,this.scaleOptions)){var m=(0,He.isObject)(n)?n:(0,pt.Z)({},n,s);this.styleAttributeService.updateScaleAttribute(m)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(n),this))}},{key:"renderMultiPass",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){m.next=2;break}return m.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){m.next=7;break}return m.next=5,this.multiPassRenderer.render();case 5:m.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"active",value:function(n){var s={};return s.enableHighlight=(0,He.isObject)(n)?!0:n,(0,He.isObject)(n)?(s.enableHighlight=!0,n.color&&(s.highlightColor=n.color),n.mix&&(s.activeMix=n.mix)):s.enableHighlight=!!n,this.updateLayerConfig(s),this}},{key:"setActive",value:function(n,s){var f=this;if((0,He.isObject)(n)){var m=n.x,C=m===void 0?0:m,B=n.y,J=B===void 0?0:B;this.updateLayerConfig({highlightColor:(0,He.isObject)(s)?s.color:this.getLayerConfig().highlightColor,activeMix:(0,He.isObject)(s)?s.mix:this.getLayerConfig().activeMix}),this.pick({x:C,y:J})}else this.updateLayerConfig({pickedFeatureID:n,highlightColor:(0,He.isObject)(s)?s.color:this.getLayerConfig().highlightColor,activeMix:(0,He.isObject)(s)?s.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,pe.Z6)(n)).then(function(){setTimeout(function(){f.reRender()},1)})}},{key:"select",value:function(n){var s={};return s.enableSelect=(0,He.isObject)(n)?!0:n,(0,He.isObject)(n)?(s.enableSelect=!0,n.color&&(s.selectColor=n.color),n.mix&&(s.selectMix=n.mix)):s.enableSelect=!!n,this.updateLayerConfig(s),this}},{key:"setSelect",value:function(n,s){var f=this;if((0,He.isObject)(n)){var m=n.x,C=m===void 0?0:m,B=n.y,J=B===void 0?0:B;this.updateLayerConfig({selectColor:(0,He.isObject)(s)?s.color:this.getLayerConfig().selectColor,selectMix:(0,He.isObject)(s)?s.mix:this.getLayerConfig().selectMix}),this.pick({x:C,y:J})}else this.updateLayerConfig({pickedFeatureID:n,selectColor:(0,He.isObject)(s)?s.color:this.getLayerConfig().selectColor,selectMix:(0,He.isObject)(s)?s.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,pe.Z6)(n)).then(function(){setTimeout(function(){f.reRender()},1)})}},{key:"setBlend",value:function(n){return this.updateLayerConfig({blend:n}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(n){return this.zIndex=n,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(n){this.currentPickId=n}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(n){this.selectedFeatureID=n}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var n=this.mapService.getZoom(),s=this.getLayerConfig(),f=s.visible,m=s.minZoom,C=m===void 0?-1/0:m,B=s.maxZoom,J=B===void 0?1/0:B;return!!f&&n>=C&&n<J}},{key:"setMultiPass",value:function(n,s){if(this.updateLayerConfig({enableMultiPassRenderer:n}),s&&this.updateLayerConfig({passes:s}),n){var f=this.getLayerConfig(),m=f.passes,C=m===void 0?[]:m;this.multiPassRenderer=bl(this,C,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var B=this.rendererService.getViewportSize(),J=B.width,re=B.height;this.multiPassRenderer.resize(J,re)}return this}},{key:"setMinZoom",value:function(n){return this.updateLayerConfig({minZoom:n}),this}},{key:"getMinZoom",value:function(){var n=this.getLayerConfig(),s=n.minZoom;return s}},{key:"getMaxZoom",value:function(){var n=this.getLayerConfig(),s=n.maxZoom;return s}},{key:"get",value:function(n){var s=this.getLayerConfig();return s[n]}},{key:"setMaxZoom",value:function(n){return this.updateLayerConfig({maxZoom:n}),this}},{key:"setAutoFit",value:function(n){return this.updateLayerConfig({autoFit:n}),this}},{key:"fitBounds",value:function(n){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var s=this.getSource(),f=s.extent,m=f.some(function(C){return Math.abs(C)===1/0});return m?this:(this.mapService.fitBounds([[f[0],f[1]],[f[2],f[3]]],n),this)}},{key:"destroy",value:function(){var n,s,f,m,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){this.layerChildren.map(function(re){return re.destroy(!1)}),this.layerChildren=[];var B=this.getLayerConfig(),J=B.maskfence;J&&(this.masks.map(function(re){return re.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(n=this.multiPassRenderer)===null||n===void 0||n.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(s=this.layerModel)===null||s===void 0||s.clearModels(C),(f=this.tileLayer)===null||f===void 0||f.destroy(),this.models=[],(m=this.debugService)===null||m===void 0||m.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var n;this.models.forEach(function(s){return s.destroy()}),(n=this.layerModel)===null||n===void 0||n.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(n){return n.needRescale||n.needRemapping||n.needRegenerateVertices}).length}},{key:"setSource",value:function(n){var s=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=n,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(m){var C=m.type;if(s.coordCenter===void 0){var B,J=s.layerSource.center;s.coordCenter=J,(B=s.mapService)!==null&&B!==void 0&&B.setCoordCenter&&s.mapService.setCoordCenter(J)}if(C==="update"){if(s.tileLayer){s.tileLayer.reload();return}s.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(n){this.encodedData=n,this.encodeDataLength=n.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(n){return this.styleAttributeService.getLayerAttributeScale(n)}},{key:"getLegend",value:function(n){var s,f,m,C=this.styleAttributeService.getLayerStyleAttribute(n),B=(C==null||(s=C.scale)===null||s===void 0?void 0:s.scalers)||[];return{type:(f=B[0].option)===null||f===void 0?void 0:f.type,field:C==null||(m=C.scale)===null||m===void 0?void 0:m.field,items:this.getLegendItems(n)}}},{key:"getLegendItems",value:function(n){var s=this.styleAttributeService.getLayerAttributeScale(n);if(!s)return[];if(s.invertExtent){var f=s.range().map(function(B){return(0,pt.Z)({value:s.invertExtent(B)},n,B)});return f}else if(s.ticks){var m=s.ticks().map(function(B){return(0,pt.Z)({value:B},n,s(B))});return m}else if(s!=null&&s.domain){var C=s.domain().filter(function(B){return!(0,He.isUndefined)(B)}).map(function(B){return(0,pt.Z)({value:B},n,s(B))});return C}return[]}},{key:"pick",value:function(n){var s=n.x,f=n.y;this.interactionService.triggerHover({x:s,y:f})}},{key:"boxSelect",value:function(n,s){this.pickingService.boxPickLayer(this,n,s)}},{key:"buildLayerModel",value:function(){var r=(0,We.Z)(Ze().mark(function s(f){var m=this,C,B,J,re,Ce,Ge,et,Je,Xt,cn,xn,On,ur,_r;return Ze().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return C=f.moduleName,B=f.vertexShader,J=f.fragmentShader,re=f.triangulation,Ce=f.segmentNumber,Ge=f.workerEnabled,et=Ge===void 0?!1:Ge,Je=f.workerOptions,Xt=(0,jt.Z)(f,Cc),this.shaderModuleService.registerModule(C,{vs:B,fs:J}),cn=this.shaderModuleService.getModule(C),xn=cn.vs,On=cn.fs,ur=cn.uniforms,_r=this.rendererService.createModel,Ir.abrupt("return",new Promise(function(ii,Gi){if(Je&&Je.modelType in pe.lN&&et)m.styleAttributeService.createAttributesAndIndicesAscy(m.encodedData,Ce,Je).then(function(Bu){var Lc=Bu.attributes,dl=Bu.elements,el=_r((0,be.Z)({attributes:Lc,uniforms:ur,fs:On,vs:xn,elements:dl,blend:Gs[te.h0.normal]},Xt));ii(el)}).catch(function(Bu){return Gi(Bu)});else{var Hi=m.styleAttributeService.createAttributesAndIndices(m.encodedData,re,Ce),hi=Hi.attributes,pa=Hi.elements,Ya=Hi.count,ps=(0,be.Z)({attributes:hi,uniforms:ur,fs:On,vs:xn,elements:pa,blend:Gs[te.h0.normal]},Xt);Ya&&(ps.count=Ya);var gc=_r(ps);ii(gc)}}));case 5:case"end":return Ir.stop()}},s,this)}));function n(s){return r.apply(this,arguments)}return n}()},{key:"createAttributes",value:function(n){var s=n.triangulation,f=this.styleAttributeService.createAttributes(this.encodedData,s),m=f.attributes;return m}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(n){var s=this.getLayerConfig(),f=s.enableHighlight,m=f===void 0?!0:f,C=s.enableSelect,B=C===void 0?!0:C,J=this.eventNames().indexOf(n)!==-1||this.eventNames().indexOf("un"+n)!==-1;return(n==="click"||n==="dblclick")&&B&&(J=!0),n==="mousemove"&&(m||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(J=!0),this.isVisible()&&J}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return m.stop()}},s)}));function n(){return r.apply(this,arguments)}return n}()},{key:"rebuildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.buildModels();case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"renderMulPass",value:function(){var r=(0,We.Z)(Ze().mark(function s(f){return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,f.render();case 2:case"end":return C.stop()}},s)}));function n(s){return r.apply(this,arguments)}return n}()},{key:"renderModels",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(f){f.draw({uniforms:n.layerModel.getUninforms(),blend:n.layerModel.getBlend(),stencil:n.layerModel.getStencil(s)},(s==null?void 0:s.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(n,s,f,m){var C=this.configService.getAttributeConfig(this.id)||{};return(0,He.isEqual)(C[n],{field:s,values:f})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(n)!==-1&&this.configService.setAttributeConfig(this.id,(0,pt.Z)({},n,{field:s,values:f})),this.startInit?this.styleAttributeService.updateStyleAttribute(n,{scale:(0,be.Z)({field:s},this.splitValuesAndCallbackInAttribute(f,this.getLayerConfig()[s]))},m):this.pendingStyleAttributes.push({attributeName:n,attributeField:s,attributeValues:f,updateOptions:m}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(n){console.warn("empty fn")}},{key:"processData",value:function(n){return n}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.models.forEach(function(C){return C.destroy()}),this.models=[],m.next=4,this.layerModel.initModels();case 4:this.models=m.sent;case 5:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(n,s){return{values:(0,He.isFunction)(n)?void 0:n||s,callback:(0,He.isFunction)(n)?n:void 0}}}]),i}(Le.EventEmitter),oc=(0,vu.Z)(Qo.prototype,"configService",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qo),uu=y(37620);function ul(a,l){return{enable:a,mask:255,func:{cmp:te.gl.EQUAL,ref:l?1:0,mask:1}}}function El(a){return a.maskOperation===te.lE.OR?{enable:!0,mask:255,func:{cmp:te.gl.ALWAYS,ref:1,mask:255},opFront:{fail:te.gl.KEEP,zfail:te.gl.REPLACE,zpass:te.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===te.yn.SINGLE||a.stencilIndex===0?te.gl.ALWAYS:te.gl.LESS,ref:a.stencilType===te.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:te.gl.KEEP,zfail:te.gl.REPLACE,zpass:te.gl.REPLACE}}}var lu,Ns,Gl;function le(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=X(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function X(a,l){if(a){if(typeof a=="string")return O(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(a,l)}}function O(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}var j=(lu=(0,te.yT)(te.vK.IGlobalConfigService),Ns=function(){function a(l){(0,Kn.Z)(this,a),(0,al.Z)(this,"configService",Gl,this),this.layer=l,this.rendererService=l.getContainer().get(te.vK.IRendererService),this.pickingService=l.getContainer().get(te.vK.IPickingService),this.shaderModuleService=l.getContainer().get(te.vK.IShaderModuleService),this.styleAttributeService=l.getContainer().get(te.vK.IStyleAttributeService),this.mapService=l.getContainer().get(te.vK.IMapService),this.iconService=l.getContainer().get(te.vK.IIconService),this.fontService=l.getContainer().get(te.vK.IFontService),this.cameraService=l.getContainer().get(te.vK.ICameraService),this.layerService=l.getContainer().get(te.vK.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var i=this.rendererService.createTexture2D;this.createTexture2D=i,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:te.gl.NEAREST,min:te.gl.NEAREST,width:1,height:1}))}return(0,Gn.Z)(a,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(i){var r=!1;return(0,He.isEqual)(i.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=i.thetaOffset),(0,He.isEqual)(i.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=i.opacity),(0,He.isEqual)(i.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=i.strokeOpacity),(0,He.isEqual)(i.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=i.strokeWidth),(0,He.isEqual)(i.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=i.stroke),(0,He.isEqual)(i.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=i.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(i){this.clearLastCalRes(),i.opacity!==void 0&&!(0,He.isNumber)(i.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),i.strokeOpacity!==void 0&&!(0,He.isNumber)(i.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),i.strokeWidth!==void 0&&!(0,He.isNumber)(i.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),i.stroke!==void 0&&!this.isStaticColor(i.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),i.offsets!==void 0&&!this.isOffsetStatic(i.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),i.thetaOffset!==void 0&&!(0,He.isNumber)(i.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(i){return(0,He.isString)(i)?!!(0,uu.ZP)(i):!1}},{key:"getStrokeColor",value:function(i){if(this.isStaticColor(i)){var r=(0,pe.CI)(i);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(i){return!!(Array.isArray(i)&&i.length===2&&(0,He.isNumber)(i[0])&&(0,He.isNumber)(i[1]))}},{key:"patchMod",value:function(i,r){for(var n=0;n<r;n++)i.push(-1)}},{key:"patchData",value:function(i,r,n){var s=le(n),f;try{for(s.s();!(f=s.n()).done;){var m=f.value,C=m.attr,B=m.count,J=r[C];J!==void 0?C==="stroke"?i.push.apply(i,(0,Ae.Z)((0,pe.CI)(J))):C==="offsets"?this.isOffsetStatic(J)?i.push(-J[0],J[1]):i.push(0,0):i.push((0,He.isNumber)(J)?J:1):this.patchMod(i,B)}}catch(re){s.e(re)}finally{s.f()}}},{key:"calDataFrame",value:function(i,r,n){for(var s=r.length,f=Math.ceil(s*i/this.DATA_TEXTURE_WIDTH),m=f*this.DATA_TEXTURE_WIDTH,C=[],B=0;B<s;B++){var J=r[B];this.patchData(C,J,n)}for(var re=C.length;re<m;re++)C.push(-1);return{data:C,width:this.DATA_TEXTURE_WIDTH,height:f}}},{key:"getBlend",value:function(){var i=this.layer.getLayerConfig(),r=i.blend,n=r===void 0?"normal":r;return Gs[te.h0[n]]}},{key:"getStencil",value:function(i){var r=this.layer.getLayerConfig(),n=r.mask,s=n===void 0?!1:n,f=r.maskInside,m=f===void 0?!0:f,C=r.enableMask,B=r.maskOperation,J=B===void 0?te.lE.AND:B;if(this.layer.type==="MaskLayer")return El({isStencil:!0,stencilType:te.yn.SINGLE});if(i.isStencil)return El((0,be.Z)((0,be.Z)({},i),{},{maskOperation:J}));var re=s||C&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return ul(re,m)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var l=(0,We.Z)(Ze().mark(function r(){return Ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",!1);case 1:case"end":return s.stop()}},r)}));function i(){return l.apply(this,arguments)}return i}()},{key:"buildModels",value:function(){var l=(0,We.Z)(Ze().mark(function r(){return Ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return s.stop()}},r)}));function i(){return l.apply(this,arguments)}return i}()},{key:"initModels",value:function(){var l=(0,We.Z)(Ze().mark(function r(){return Ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return s.stop()}},r)}));function i(){return l.apply(this,arguments)}return i}()},{key:"clearModels",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(i){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(i){return[i.enable?0:1,i.duration||4,i.interval||.2,i.trailLength||.1]}},{key:"startModelAnimate",value:function(){var i=this.layer.getLayerConfig(),r=i.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),a}(),Gl=(0,vu.Z)(Ns.prototype,"configService",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ns),Q=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),Re=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),se=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),At=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),Rt=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});function Ut(a){var l=Zn();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Zn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gr=`#define LineTypeSolid 0.0
uniform float u_opacity : 1.0;

varying vec4 v_color;

// dash
varying vec4 v_dash_array;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
 
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    // \u5B9E\u7EBF\u90E8\u5206
  } else {
    // \u865A\u7EBF\u90E8\u5206
    discard;
  };

  gl_FragColor = filterColor(gl_FragColor);
}
`,ni=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));
  } else {
    float lineHeight = a_Size.y;
 
    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Vr=`#define Animate 0.0
#define LineTexture 1.0
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;

uniform vec3 u_blur;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = styleMappingMat[3][3];
  if(blurV < 0.5) {
    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  gl_FragColor = filterColor(gl_FragColor);
}
`,wi=`
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,ji=`varying vec4 v_color;
uniform float u_linearDir: 1.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"


varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3][0]; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,da={solid:0,dash:1},wa=function(a){(0,er.Z)(i,a);var l=Ut(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"textureEventFlag",!1),(0,pt.Z)((0,$t.Z)(r),"texture",r.createTexture2D({data:[0,0,0,0],mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1,height:1})),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.lineType,Ce=re===void 0?"solid":re,Ge=n.dashArray,et=Ge===void 0?[10,5,0,0]:Ge,Je=n.lineTexture,Xt=Je===void 0?!1:Je,cn=n.iconStep,xn=cn===void 0?100:cn,On=n.vertexHeightScale,ur=On===void 0?20:On,_r=n.borderWidth,zr=_r===void 0?0:_r,Ir=n.borderColor,ii=Ir===void 0?"#ccc":Ir,Gi=n.raisingHeight,Hi=Gi===void 0?0:Gi,hi=n.heightfixed,pa=hi===void 0?!1:hi,Ya=n.linearDir,ps=Ya===void 0?Re.VERTICAL:Ya,gc=n.blur,Bu=gc===void 0?[1,1,1]:gc,Lc=n.arrow,dl=Lc===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:Lc;et.length===2&&et.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var el=0,Of=[0,0,0,0],lp=[0,0,0,0];if(m&&C&&(Of=(0,pe.CI)(m),lp=(0,pe.CI)(C),el=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var lv=this.layer.getEncodedData(),rd=this.calDataFrame(this.cellLength,lv,this.cellProperties),cp=rd.data,cv=rd.width,fp=rd.height;this.rowCount=fp,this.dataTexture=this.cellLength>0&&cp.length>0?this.createTexture2D({flipY:!0,data:cp,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:cv,height:fp}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J===se.NORMAL?0:1,u_line_type:da[Ce],u_dash_array:et,u_blur:Bu,u_texture:this.texture,u_line_texture:Xt?1:0,u_icon_step:xn,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:zr,u_borderColor:(0,pe.CI)(ii),u_linearDir:ps===Re.VERTICAL?1:0,u_linearColor:el,u_sourceColor:Of,u_targetColor:lp,u_heightfixed:Number(pa),u_vertexScale:ur,u_raisingHeight:Number(Hi),u_arrow:Number(dl.enable),u_arrowHeight:dl.arrowHeight||3,u_arrowWidth:dl.arrowWidth||2,u_tailWidth:dl.tailWidth===void 0?1:dl.tailWidth}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),m.abrupt("return",this.buildModels());case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge,et,Je,Xt;return Ze().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return f=this.layer.getLayerConfig(),m=f.depth,C=m===void 0?!1:m,B=f.workerEnabled,J=B===void 0?!1:B,re=f.enablePicking,Ce=this.getShaders(),Ge=Ce.frag,et=Ce.vert,Je=Ce.type,this.layer.triangulation=pe.sN,xn.next=5,this.layer.buildLayerModel({moduleName:"line"+Je,vertexShader:et,fragmentShader:Ge,triangulation:pe.sN,depth:{enable:C},workerEnabled:J,workerOptions:{modelType:"line"+Je,enablePicking:re,iconMap:this.iconService.getIconMap()}});case 5:return Xt=xn.sent,xn.abrupt("return",[Xt]);case 7:case"end":return xn.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.sourceColor,f=n.targetColor,m=n.lineType;return m==="dash"?{frag:gr,vert:ni,type:"Dash"}:s&&f?{frag:ji,vert:wi,type:"Linear"}:{frag:Vr,vert:wi,type:""}}},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f,m,C,B,J,re){return re===void 0?[C[3],10]:[C[3],re]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f,m,C){return[C[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0],C[1]]:[C,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(f,m,C,B,J){return J}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f,m,C){return[C[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j),to=y(9187),va=y.n(to),ba=100,ao=36,Mo=40;function so(a){return a/180*Math.acos(-1)}function ka(a){var l=so(a[0])+Math.PI/2,i=so(a[1]),r=ba+Math.random()*.4,n=r*Math.cos(i)*Math.cos(l),s=r*Math.cos(i)*Math.sin(l),f=r*Math.sin(i);return[s,f,n]}function zo(a,l){var i=mat4.create(),r=mat4.create(),n=vec3.fromValues(0,1,0),s=vec3.fromValues(0,0,0);l=l||{},a=typeof a!="undefined"?a:1;for(var f=typeof l.segments!="undefined"?l.segments:32,m=2+f,C=2*m,B=[],J=[],re=[],Ce=[],Ge=[],et=[],Je=0;Je<=m;Je++){for(var Xt=Je/m,cn=Xt*Math.PI,xn=0;xn<=C;xn++){var On=xn/C,ur=On*Math.PI*2;mat4.identity(r),mat4.rotateZ(r,r,-cn),mat4.identity(i),mat4.rotateY(i,i,ur),vec3.transformMat4(s,n,r),vec3.transformMat4(s,s,i),vec3.scale(s,s,-a),re.push(s.slice()),Ce.push.apply(Ce,_toConsumableArray(s.slice())),vec3.normalize(s,s),Ge.push.apply(Ge,_toConsumableArray(s.slice())),et.push([On,1-Xt]),Ce.push(On,1-Xt)}if(Je>0)for(var _r=re.length,zr=_r-2*(C+1);zr+C+2<_r;zr++)B.push([zr,zr+1,zr+C+1]),J.push(zr,zr+1,zr+C+1),B.push([zr+C+1,zr+1,zr+C+2]),J.push(zr+C+1,zr+1,zr+C+2)}return{cells:B,positions:re,uvs:et,positionsArr:Ce,indicesArr:J,normalArr:Ge}}var fi=y(31437),Go=fi.Ue(),mu=fi.Ue(),bo=fi.Ue(),ss=fi.Ue(),Pu=fi.Ue();function yu(a,l,i,r,n){fi.IH(a,i,r),fi.Fv(a,a),l=fi.al(-a[1],a[0]);var s=fi.al(-i[1],i[0]);return[n/fi.AK(l,s),l]}function cu(a,l){return fi.t8(a,-l[1],l[0])}function fu(a,l,i){return fi.lu(a,l,i),fi.Fv(a,a),a}function Fo(a,l){return a[0]===l[0]&&a[1]===l[1]}function Sl(a){for(var l=new Map,i=0;i<a.length;i++){var r=a[0].toString()+"-"+a[1].toString();l.get(r)?(a.splice(i,1),i++):l.set(r,r)}return a}var $c=function(){function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Kn.Z)(this,a),(0,pt.Z)(this,"lastFlip",-1),(0,pt.Z)(this,"miter",fi.al(0,0)),(0,pt.Z)(this,"started",!1),(0,pt.Z)(this,"dash",!1),(0,pt.Z)(this,"totalDistance",0),(0,pt.Z)(this,"currentIndex",0),this.join=l.join||"miter",this.cap=l.cap||"butt",this.miterLimit=l.miterLimit||10,this.thickness=l.thickness||1,this.dash=l.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,Gn.Z)(a,[{key:"simpleExtrude",value:function(i){var r=this.complex;if(i.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=i.length,s=r.startIndex,f=1;f<n;f++){var m=i[f-1],C=i[f],B=f<i.length-1?i[f+1]:null,J=this.simpleSegment(r,s,m,C,B);s+=J}if(this.dash)for(var re=0;re<r.positions.length/6;re++)r.positions[re*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(i,r){var n=this.complex;if(i.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var s=i.length,f=n.startIndex,m=1;m<s;m++){var C,B,J,re=i[m-1];re.push((C=r[m-1][2])!==null&&C!==void 0?C:0);var Ce=r[m-1],Ge=i[m];Ge.push((B=r[m][2])!==null&&B!==void 0?B:0);var et=r[m],Je=m<i.length-1?[].concat((0,Ae.Z)(i[m+1]),[(J=r[m+1][2])!==null&&J!==void 0?J:0]):null,Xt=m<r.length-1?r[m+1]:null,cn=this.simpleSegment(n,f,re,Ge,Je,Ce,et,Xt);f+=cn}if(this.dash)for(var xn=0;xn<n.positions.length/6;xn++)n.positions[xn*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude_gaode2",value:function(i,r){var n=this.complex;if(i.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var s=i.length,f=n.startIndex,m=1;m<s;m++){var C,B,J,re=i[m-1];re.push((C=r[m-1][2])!==null&&C!==void 0?C:0);var Ce=r[m-1],Ge=i[m];Ge.push((B=r[m][2])!==null&&B!==void 0?B:0);var et=r[m],Je=m<i.length-1?[].concat((0,Ae.Z)(i[m+1]),[(J=r[m+1][2])!==null&&J!==void 0?J:0]):null,Xt=m<r.length-1?r[m+1]:null,cn=this.segment_gaode2(n,f,re,Ge,Je,Ce,et,Xt);f+=cn}if(this.dash)for(var xn=0;xn<n.positions.length/6;xn++)n.positions[xn*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(i){var r=this.complex;if(i.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=i.length,s=r.startIndex,f=1;f<n;f++){var m=i[f-1],C=i[f],B=f<i.length-1?i[f+1]:null,J=this.segment(r,s,m,C,B);s+=J}if(this.dash)for(var re=0;re<r.positions.length/6;re++)r.positions[re*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleSegment",value:function(i,r,n,s,f){var m=0,C=i.indices,B=i.positions,J=i.normals,re=(0,pe.Z)([s[0],s[1]]),Ce=(0,pe.Z)([n[0],n[1]]);fu(bo,re,Ce);var Ge=0;if(this.dash&&(Ge=this.lineSegmentDistance(re,Ce),this.totalDistance+=Ge),this.normal||(this.normal=fi.Ue(),cu(this.normal,bo)),this.started||(this.started=!0,this.extrusions(B,J,n,this.normal,this.thickness,this.totalDistance-Ge)),C.push(r+0,r+1,r+2),!f)cu(this.normal,bo),this.extrusions(B,J,s,this.normal,this.thickness,this.totalDistance),C.push.apply(C,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),m+=2;else{var et=(0,pe.Z)([f[0],f[1]]);Fo(re,et)&&fi.IH(et,re,fi.Fv(et,fi.$X(et,re,Ce))),fu(ss,et,re);var Je=yu(Pu,fi.Ue(),bo,ss,this.thickness),Xt=(0,qr.Z)(Je,2),cn=Xt[0],xn=Xt[1],On=fi.AK(Pu,this.normal)<0?-1:1;this.extrusions(B,J,s,xn,cn,this.totalDistance),C.push.apply(C,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),On=-1,fi.JG(this.normal,xn),m+=2,this.lastFlip=On}return m}},{key:"segment_gaode2",value:function(i,r,n,s,f,m,C,B){var J=0,re=i.indices,Ce=i.positions,Ge=i.normals,et=this.cap==="square",Je=this.join==="bevel",Xt=(0,pe.Z)([C[0],C[1]]),cn=(0,pe.Z)([m[0],m[1]]);fu(bo,s,n);var xn=0;if(this.dash&&(xn=this.lineSegmentDistance(Xt,cn),this.totalDistance+=xn),this.normal||(this.normal=fi.Ue(),cu(this.normal,bo)),!this.started)if(this.started=!0,et){var On=fi.Ue(),ur=fi.Ue();fi.IH(On,this.normal,bo),fi.IH(ur,this.normal,bo),Ge.push(ur[0],ur[1],0),Ge.push(On[0],On[1],0),Ce.push(n[0],n[1],n[2]|0,this.totalDistance-xn,-this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(n[0],n[1],n[2]|0,this.totalDistance-xn,this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ce,Ge,n,this.normal,this.thickness,this.totalDistance-xn);if(re.push(r+0,r+1,r+2),f){Fo(s,f)&&fi.IH(f,s,fi.Fv(f,fi.$X(f,s,n))),fu(ss,f,s);var Ir=yu(Pu,fi.Ue(),bo,ss,this.thickness),ii=(0,qr.Z)(Ir,2),Gi=ii[0],Hi=ii[1],hi=fi.AK(Pu,this.normal)<0?-1:1,pa=Je;if(!pa&&this.join==="miter"){var Ya=Gi;Ya>this.miterLimit&&(pa=!0)}pa?(Ge.push(this.normal[0],this.normal[1],0),Ge.push(Hi[0],Hi[1],0),Ce.push(s[0],s[1],s[2]|0,this.totalDistance,-this.thickness*hi,s[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness*hi,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,re.push.apply(re,(0,Ae.Z)(this.lastFlip!==-hi?[r,r+2,r+3]:[r+2,r+1,r+3])),re.push(r+2,r+3,r+4),cu(Go,ss),fi.JG(this.normal,Go),Ge.push(this.normal[0],this.normal[1],0),Ce.push(s[0],s[1],s[2]|0,this.totalDistance,-this.thickness*hi,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,J+=3):(this.extrusions(Ce,Ge,s,Hi,Gi,this.totalDistance),re.push.apply(re,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),hi=-1,fi.JG(this.normal,Hi),J+=2),this.lastFlip=hi}else{if(cu(this.normal,bo),et){var _r=fi.Ue(),zr=fi.Ue();fi.lu(zr,bo,this.normal),fi.IH(_r,bo,this.normal),Ge.push(zr[0],zr[1],0),Ge.push(_r[0],_r[1],0),Ce.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness,s[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ce,Ge,s,this.normal,this.thickness,this.totalDistance);re.push.apply(re,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),J+=2}return J}},{key:"segment",value:function(i,r,n,s,f){var m=0,C=i.indices,B=i.positions,J=i.normals,re=this.cap==="square",Ce=this.join==="bevel",Ge=(0,pe.Z)([s[0],s[1]]),et=(0,pe.Z)([n[0],n[1]]);fu(bo,Ge,et);var Je=0;if(this.dash&&(Je=this.lineSegmentDistance(Ge,et),this.totalDistance+=Je),this.normal||(this.normal=fi.Ue(),cu(this.normal,bo)),!this.started)if(this.started=!0,re){var Xt=fi.Ue(),cn=fi.Ue();fi.IH(Xt,this.normal,bo),fi.IH(cn,this.normal,bo),J.push(cn[0],cn[1],0),J.push(Xt[0],Xt[1],0),B.push(n[0],n[1],n[2]|0,this.totalDistance-Je,-this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),B.push(n[0],n[1],n[2]|0,this.totalDistance-Je,this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(B,J,n,this.normal,this.thickness,this.totalDistance-Je);if(C.push(r+0,r+1,r+2),f){var ur=(0,pe.Z)([f[0],f[1]]);Fo(Ge,ur)&&fi.IH(ur,Ge,fi.Fv(ur,fi.$X(ur,Ge,et))),fu(ss,ur,Ge);var _r=yu(Pu,fi.Ue(),bo,ss,this.thickness),zr=(0,qr.Z)(_r,2),Ir=zr[0],ii=zr[1],Gi=fi.AK(Pu,this.normal)<0?-1:1,Hi=Ce;if(!Hi&&this.join==="miter"){var hi=Ir;hi>this.miterLimit&&(Hi=!0)}Hi?(J.push(this.normal[0],this.normal[1],0),J.push(ii[0],ii[1],0),B.push(s[0],s[1],s[2]|0,this.totalDistance,-this.thickness*Gi,s[2]|0),this.complex.indexes.push(this.currentIndex),B.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness*Gi,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,C.push.apply(C,(0,Ae.Z)(this.lastFlip!==-Gi?[r,r+2,r+3]:[r+2,r+1,r+3])),C.push(r+2,r+3,r+4),cu(Go,ss),fi.JG(this.normal,Go),J.push(this.normal[0],this.normal[1],0),B.push(s[0],s[1],s[2]|0,this.totalDistance,-this.thickness*Gi,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,m+=3):(this.extrusions(B,J,s,ii,Ir,this.totalDistance),C.push.apply(C,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Gi=-1,fi.JG(this.normal,ii),m+=2),this.lastFlip=Gi}else{if(cu(this.normal,bo),re){var xn=fi.Ue(),On=fi.Ue();fi.lu(On,bo,this.normal),fi.IH(xn,bo,this.normal),J.push(On[0],On[1],0),J.push(xn[0],xn[1],0),B.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness,s[2]|0),this.complex.indexes.push(this.currentIndex),B.push(s[0],s[1],s[2]|0,this.totalDistance,this.thickness,s[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(B,J,s,this.normal,this.thickness,this.totalDistance);C.push.apply(C,(0,Ae.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),m+=2}return m}},{key:"extrusions",value:function(i,r,n,s,f,m){r.push(s[0],s[1],0),r.push(s[0],s[1],0),i.push(n[0],n[1],n[2]|0,m,-f,n[2]|0),this.complex.indexes.push(this.currentIndex),i.push(n[0],n[1],n[2]|0,m,f,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(i,r){var n=r[0]-i[0],s=r[1]-i[1];return Math.sqrt(n*n+s*s)}}]),a}(),Ka=y(77160);function Qc(a){var l=a[0][0],i=a[0][a[0].length-1];l[0]===i[0]&&l[1]===i[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var r=a[0].length,n=earcut.flatten(a),s=n.vertices,f=n.dimensions,m=[],C=[],B=0;B<s.length/f;B++)f===2?m.push(s[B*2],s[B*2+1],1):m.push(s[B*3],s[B*3+1],1);var J=earcut(n.vertices,n.holes,n.dimensions);C.push.apply(C,_toConsumableArray(J));for(var re=function(){var et=n.vertices.slice(Ce*f,(Ce+1)*f),Je=n.vertices.slice((Ce+1)*f,(Ce+2)*f);Je.length===0&&(Je=n.vertices.slice(0,f));var Xt=m.length/3;m.push(et[0],et[1],1,Je[0],Je[1],1,et[0],et[1],0,Je[0],Je[1],0),C.push.apply(C,_toConsumableArray([0,2,1,2,3,1].map(function(cn){return cn+Xt})))},Ce=0;Ce<r;Ce++)re();return{positions:m,index:C}}function jc(a){var l=earcut.flatten(a),i=earcut(l.vertices,l.holes,l.dimensions);return{positions:l.vertices,index:i}}function Oo(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=a[0][0],r=a[0][a[0].length-1];i[0]===r[0]&&i[1]===r[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var n=a[0].length,s=va().flatten(a),f=s.vertices,m=s.dimensions,C=[],B=[],J=[],re=0;re<f.length/m;re++)m===2?C.push(f[re*2],f[re*2+1],1,-1,-1):C.push(f[re*3],f[re*3+1],1,-1,-1),J.push(0,0,1);var Ce=va()(s.vertices,s.holes,s.dimensions);B.push.apply(B,(0,Ae.Z)(Ce));for(var Ge=function(){var Xt=s.vertices.slice(et*m,(et+1)*m),cn=s.vertices.slice((et+1)*m,(et+2)*m);cn.length===0&&(cn=s.vertices.slice(0,m));var xn=C.length/5;C.push(Xt[0],Xt[1],1,0,0,cn[0],cn[1],1,.1,0,Xt[0],Xt[1],0,0,.8,cn[0],cn[1],0,.1,.8);var On=xs([cn[0],cn[1],1],[Xt[0],Xt[1],0],[Xt[0],Xt[1],1],l);J.push.apply(J,(0,Ae.Z)(On).concat((0,Ae.Z)(On),(0,Ae.Z)(On),(0,Ae.Z)(On))),B.push.apply(B,(0,Ae.Z)([1,2,0,3,2,1].map(function(ur){return ur+xn})))},et=0;et<n;et++)Ge();return{positions:C,index:B,normals:J}}function xs(a,l,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=Ka.create(),s=Ka.create(),f=Ka.create();r&&(a=(0,pe.vP)(a),l=(0,pe.vP)(l),i=(0,pe.vP)(i));var m=Ka.fromValues.apply(Ka,(0,Ae.Z)(a)),C=Ka.fromValues.apply(Ka,(0,Ae.Z)(l)),B=Ka.fromValues.apply(Ka,(0,Ae.Z)(i));Ka.sub(n,B,C),Ka.sub(s,m,C),Ka.cross(f,n,s);var J=Ka.create();return Ka.normalize(J,f),J}var Hs,Iu=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),Hl=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function $u(a){for(var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Math.PI*2/a,r=[],n=0;n<a;n++)r.push(i*n+l*Math.PI/12);var s=r.map(function(f){var m=Math.sin(f+Math.PI/4),C=Math.cos(f+Math.PI/4);return[m,C,0]});return s}function Wl(){return $u(30)}function Jc(){return $u(4)}function Xl(){return $u(3)}function Tl(){return $u(6,1)}function _u(){return $u(5)}var Al=(Hs={},(0,pt.Z)(Hs,Hl.CIRCLE,Wl),(0,pt.Z)(Hs,Hl.HEXAGON,Tl),(0,pt.Z)(Hs,Hl.TRIANGLE,Xl),(0,pt.Z)(Hs,Hl.SQUARE,Jc),(0,pt.Z)(Hs,Hl.PENTAGON,_u),(0,pt.Z)(Hs,Iu.CYLINDER,Wl),(0,pt.Z)(Hs,Iu.HEXAGONCOLUMN,Tl),(0,pt.Z)(Hs,Iu.TRIANGLECOLUMN,Xl),(0,pt.Z)(Hs,Iu.SQUARECOLUMN,Jc),(0,pt.Z)(Hs,Iu.PENTAGONCOLUMN,_u),Hs),Ru={};function Ho(a){var l=(0,pe.SI)(a.coordinates);return{vertices:[].concat((0,Ae.Z)(l),(0,Ae.Z)(l),(0,Ae.Z)(l),(0,Ae.Z)(l)),indices:[0,1,2,2,3,0],size:l.length}}function Cl(a){var l=(0,pe.SI)(a.coordinates),i=ka(l);return{vertices:[].concat((0,Ae.Z)(i),(0,Ae.Z)(i),(0,Ae.Z)(i),(0,Ae.Z)(i)),indices:[0,1,2,2,3,0],size:i.length}}function Mc(a){var l=a.shape,i=Os(l,!1),r=i.positions,n=i.index,s=i.normals;return{vertices:r,indices:n,normals:s,size:5}}function Yl(a){var l=(0,pe.SI)(a.coordinates);return{vertices:(0,Ae.Z)(l),indices:[0],size:l.length}}function ju(a){var l=a.coordinates,i=a.originCoordinates,r=a.version,n=new $c({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var s=l;Array.isArray(s[0][0])||(s=[l]);var f=i;Array.isArray(f[0][0])||(f=[i]);for(var m=0;m<s.length;m++){var C=s[m],B=f[m];n.extrude_gaode2(C,B)}}else{var J=l;J[0]&&!Array.isArray(J[0][0])&&(J=[l]),J.forEach(function(Ce){n.extrude(Ce)})}var re=n.complex;return{vertices:re.positions,indices:re.indices,normals:re.normals,indexes:re.indexes,size:6}}function us(a){var l=a.coordinates,i=[];if(!Array.isArray(l[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=ef(l),n=r.results,s=r.totalDistance;return n.map(function(f){i.push(f[0],f[1],f[2],f[3],0,s)}),{vertices:i,indices:[],normals:[],size:6,count:n.length}}function Oc(a){var l=a.coordinates,i=[];if(!Array.isArray(l[0]))return{vertices:[],indices:[],size:4,count:0};var r=sc(l),n=r.results;return n.map(function(s){i.push(s[0],s[1],s[2],s[3])}),{vertices:i,indices:[],size:4,count:n.length}}function Vc(a,l){var i=l[0]-a[0],r=l[1]-a[1];return Math.sqrt(i*i+r*r)}function Vu(a,l){return a.length<3&&a.push(0),l!==void 0&&a.push(l),a}function ef(a){var l=a;Array.isArray(l)&&Array.isArray(l[0])&&Array.isArray(l[0][0])&&(l=a.flat());var i=0;if(l.length<2)return{results:l,totalDistance:0};var r=[],n=Vu(l[0],i);r.push(n);for(var s=1;s<l.length-1;s++){var f=Vc(l[s-1],l[s]);i+=f;var m=Vu(l[s],i);r.push(m),r.push(m)}var C=Vc(l[l.length-2],l[l.length-1]);return i+=C,r.push(Vu(l[l.length-1],i)),{results:r,totalDistance:i}}function sc(a){if(a.length<2)return{results:a};var l=[],i=Vu(a[0]);l.push(i);for(var r=1;r<a.length-1;r++){var n=Vu(a[r]);l.push(n),l.push(n)}return l.push(Vu(a[a.length-1])),{results:l}}function ns(a){var l=a.coordinates,i=va().flatten(l),r=i.vertices,n=i.dimensions,s=i.holes;return{indices:va()(r,s,n),vertices:r,size:n}}function bu(a){var l=a.coordinates,i=va().flatten(l),r=i.vertices,n=i.dimensions,s=i.holes;return{indices:va()(r,s,n),vertices:Gc(r),size:n+4}}function Gc(a){for(var l=[],i=(0,pe.Rx)(a),r=i.center,n=i.radius,s=0;s<a.length;s+=2){var f=a[s],m=a[s+1];l.push.apply(l,[f,m,0].concat((0,Ae.Z)(r),[n]))}return l}function ll(a){var l=a.coordinates,i=Oo(l,!0),r=i.positions,n=i.index,s=i.normals;return{vertices:r,indices:n,normals:s,size:5}}function tf(a){var l=a.shape,i=df(l),r=i.positions,n=i.index;return{vertices:r,indices:n,size:3}}function uc(a){var l=a.coordinates,i=[].concat((0,Ae.Z)(l[0]),[0,0,1,l[1][0],l[0][1],0,1,1],(0,Ae.Z)(l[1]),[0,1,0],(0,Ae.Z)(l[0]),[0,0,1],(0,Ae.Z)(l[1]),[0,1,0,l[0][0],l[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:i,indices:r,size:5}}function ku(a,l){for(var i=l||30,r=a.coordinates,n=[],s=[],f=function(B){n.push(B,1,B,r[0][0],r[0][1],r[1][0],r[1][1],B,-1,B,r[0][0],r[0][1],r[1][0],r[1][1]),B!==i-1&&s.push.apply(s,(0,Ae.Z)([0,1,2,1,3,2].map(function(J){return B*2+J})))},m=0;m<i;m++)f(m);return{vertices:n,indices:s,size:7}}function nf(a){var l=a.coordinates;l.length===2&&l.push(0);var i=Kl(-1,1),r=Kl(1,1),n=Kl(-1,-1),s=Kl(1,-1),f=[].concat(_toConsumableArray(l),_toConsumableArray(i),_toConsumableArray(l),_toConsumableArray(n),_toConsumableArray(l),_toConsumableArray(s),_toConsumableArray(l),_toConsumableArray(r)),m=[0,1,2,3,0,2];return{vertices:f,indices:m,size:5}}function Os(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ru&&Ru[a])return Ru[a];var i=Al[a]?Al[a]():Al.cylinder(),r=Oo([i],l);return Ru[a]=r,r}function hf(a,l){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=new Float32Array(a.length/i*3),s,f,m,C=vec3.create(),B=vec3.create(),J=vec3.create(),re=0,Ce=l.length;re<Ce;re+=3){s=l[re+0]*3,f=l[re+1]*3,m=l[re+2]*3;var Ge=[a[s],a[s+1]],et=[a[f],a[f+1]],Je=[a[m],a[m+1]];r&&(Ge=lngLatToMeters(Ge),et=lngLatToMeters(et),Je=lngLatToMeters(Je));var Xt=Ge,cn=_slicedToArray(Xt,2),xn=cn[0],On=cn[1],ur=vec3.fromValues(xn,On,a[s+2]),_r=et,zr=_slicedToArray(_r,2),Ir=zr[0],ii=zr[1],Gi=vec3.fromValues(Ir,ii,a[f+2]),Hi=Je,hi=_slicedToArray(Hi,2),pa=hi[0],Ya=hi[1],ps=vec3.fromValues(pa,Ya,a[m+2]);vec3.sub(C,ps,Gi),vec3.sub(B,ur,Gi),vec3.cross(J,C,B),n[s]+=C[0],n[s+1]+=C[1],n[s+2]+=C[2],n[f]+=C[0],n[f+1]+=C[1],n[f+2]+=C[2],n[m]+=C[0],n[m+1]+=C[1],n[m+2]+=C[2]}return Pf(n),n}function Pf(a){for(var l=0,i=a.length;l<i;l+=3){var r=vec3.fromValues(a[l],a[l+1],a[l+2]),n=vec3.create();vec3.normalize(n,r),a.set(n,l)}}function If(a){var l=a[0][0],i=a[0][a[0].length-1];return l[0]===i[0]&&l[1]===i[1]}function df(a){var l=["cylinder","triangleColumn","hexagonColumn","squareColumn"],i=geometryShape[a]?geometryShape[a]():geometryShape.circle(),r=l.indexOf(a)===-1?fillPolygon([i]):extrudePolygon([i]);return r}function Kl(a,l){var i=(a+1)/2,r=(l+1)/2;return[i,r]}function pf(){var a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),l=a.positionsArr,i=a.indicesArr,r=a.normalArr;return{vertices:l,indices:i,size:5,normals:r}}function Pc(){var a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),l=a.positionsArr,i=a.indicesArr,r=a.normalArr;return{vertices:l,indices:i,size:5,normals:r}}function Hc(a){var l=bf();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function bf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var lc=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,cc=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }

  setPickingColor(a_PickingColor);
}
`,rf=function(a){(0,er.Z)(i,a);var l=Hc(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"raiseCount",0),(0,pt.Z)((0,$t.Z)(r),"raiseRepeat",0),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption,f=s===void 0?{enable:!1,speed:.01,repeat:!1}:s,m=n.opacity,C=m===void 0?1:m,B=n.sourceColor,J=n.targetColor,re=n.pickLight,Ce=re===void 0?!1:re,Ge=n.heightfixed,et=Ge===void 0?!1:Ge,Je=n.opacityLinear,Xt=Je===void 0?{enable:!1,dir:"up"}:Je,cn=n.lightEnable,xn=cn===void 0?!0:cn;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:C})){this.judgeStyleAttributes({opacity:C});var On=this.layer.getEncodedData(),ur=this.calDataFrame(this.cellLength,On,this.cellProperties),_r=ur.data,zr=ur.width,Ir=ur.height;this.rowCount=Ir,this.dataTexture=this.cellLength>0&&_r.length>0?this.createTexture2D({flipY:!0,data:_r,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:zr,height:Ir}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}var ii=0,Gi=[0,0,0,0],Hi=[0,0,0,0];if(B&&J&&(Gi=(0,pe.CI)(B),Hi=(0,pe.CI)(J),ii=1),this.raiseCount<1&&this.raiseRepeat>0&&f.enable){var hi=f.speed,pa=hi===void 0?.01:hi;this.raiseCount+=pa,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(Ce),u_heightfixed:Number(et),u_r:f.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(C)?C:1,u_linearColor:ii,u_sourceColor:Gi,u_targetColor:Hi,u_opacitylinear:Number(Xt.enable),u_opacitylinear_dir:Xt.dir==="up"?1:0,u_lightEnable:Number(xn)}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re;return Ze().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return f=this.layer.getLayerConfig(),m=f.depth,C=m===void 0?!0:m,B=f.animateOption.repeat,J=B===void 0?1:B,this.raiseRepeat=J,Ge.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:cc,fragmentShader:lc,triangulation:Mc,cull:{enable:!0,face:(0,pe.fj)(this.mapService.version)},depth:{enable:C}});case 4:return re=Ge.sent,Ge.abrupt("return",[re]);case 6:case"end":return Ge.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s){var f=s.size;if(f){var m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C,B){return B}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s){var f=(0,pe.SI)(s.coordinates);return[f[0],f[1],0]}}})}}]),i}(j);function af(a){var l=Ic();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var wl=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  
  // \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Wc=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(gl_FragColor.a < 0.01) {
    discard;
  } 
}
`,of=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;
if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_raisingHeight;

  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }
 

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position =  u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,fc=function(a){(0,er.Z)(i,a);var l=af(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.strokeOpacity,C=m===void 0?1:m,B=n.strokeWidth,J=B===void 0?0:B,re=n.stroke,Ce=re===void 0?"rgba(0,0,0,0)":re,Ge=n.offsets,et=Ge===void 0?[0,0]:Ge,Je=n.blend,Xt=n.blur,cn=Xt===void 0?0:Xt,xn=n.raisingHeight,On=xn===void 0?0:xn,ur=n.heightfixed,_r=ur===void 0?!1:ur,zr=n.unit,Ir=zr===void 0?"pixel":zr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,strokeOpacity:C,strokeWidth:J,stroke:Ce,offsets:et})){this.judgeStyleAttributes({opacity:f,strokeOpacity:C,strokeWidth:J,stroke:Ce,offsets:et});var ii=this.layer.getEncodedData(),Gi=this.calDataFrame(this.cellLength,ii,this.cellProperties),Hi=Gi.data,hi=Gi.width,pa=Gi.height;this.rowCount=pa,this.dataTexture=this.cellLength>0&&Hi.length>0?this.createTexture2D({flipY:!0,data:Hi,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:hi,height:pa}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(On),u_heightfixed:Number(_r),u_blur:cn,u_additive:Je==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_stroke_opacity:(0,He.isNumber)(C)?C:1,u_stroke_width:(0,He.isNumber)(J)?J:1,u_stroke_color:this.getStrokeColor(Ce),u_Size_Unit:At[Ir],u_offsets:this.isOffsetStatic(et)?et:[0,0]}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption,f=s===void 0?{enable:!1}:s;return{u_animate:this.animateOption2Array(f),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),pe.oX)}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge,et,Je,Xt,cn;return Ze().wrap(function(On){for(;;)switch(On.prev=On.next){case 0:return f=this.layer.getLayerConfig(),m=f.animateOption,C=m===void 0?{enable:!1}:m,B=f.workerEnabled,J=B===void 0?!1:B,re=f.enablePicking,Ce=f.shape2d,Ge=this.getShaders(C),et=Ge.frag,Je=Ge.vert,Xt=Ge.type,this.layer.triangulation=pe.oX,On.next=5,this.layer.buildLayerModel({moduleName:Xt,vertexShader:Je,fragmentShader:et,triangulation:pe.oX,depth:{enable:!1},workerEnabled:J,workerOptions:{modelType:Xt,enablePicking:re,shape2d:Ce}});case 5:return cn=On.sent,On.abrupt("return",[cn]);case 7:case"end":return On.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getShaders",value:function(n){if(n.enable)switch(n.type){case"wave":return{frag:wl,vert:of,type:"pointWave"};default:return{frag:wl,vert:of,type:"pointWave"}}else return{frag:Wc,vert:of,type:"pointFill"}}},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.speed||1,n.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var n=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(f,m,C,B){var J=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],re=B%4*3;return[J[re],J[re+1],J[re+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?5:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:te.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.shape,C=m===void 0?2:m,B=n.indexOf(C);return[B]}}})}}]),i}(j);function sf(a){var l=Ml();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ml(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Gu=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      
      if (gl_FragColor.a < 0.01) {
         discard;
      }
      gl_FragColor = filterColor(gl_FragColor);
}
`,Ol=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(textrueOffsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,Lu=function(a){(0,er.Z)(i,a);var l=sf(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){r.layerService.throttleRenderLayers()});return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.LINEAR,min:te.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.offsets,C=m===void 0?[0,0]:m,B=n.raisingHeight,J=B===void 0?0:B,re=n.heightfixed,Ce=re===void 0?!1:re;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,offsets:C})){this.judgeStyleAttributes({opacity:f,offsets:C});var Ge=this.layer.getEncodedData(),et=this.calDataFrame(this.cellLength,Ge,this.cellProperties),Je=et.data,Xt=et.width,cn=et.height;this.rowCount=cn,this.dataTexture=this.cellLength>0&&Je.length>0?this.createTexture2D({flipY:!0,data:Je,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:Xt,height:cn}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(J),u_heightfixed:Number(Ce),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,He.isNumber)(f)?f:1,u_offsets:this.isOffsetStatic(C)?C:[0,0]}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Ol,fragmentShader:Gu,triangulation:Yl,depth:{enable:!1},primitive:te.gl.POINTS});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?5:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.shape,B=m[C]||{x:-64,y:-64},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j);function Pl(a){var l=Hu();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var R=`uniform float u_opacity : 1;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
}
`,ut=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;

varying vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = a_Color;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
}
`;function Te(a){var l=a.coordinates;return{vertices:(0,Ae.Z)(l),indices:[0],size:l.length}}var fe=function(a){(0,er.Z)(i,a);var l=Pl(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s;return{u_opacity:(0,He.isNumber)(f)?f:1}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.layer.triangulation=Te,C.next=3,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:ut,fragmentShader:R,triangulation:Te,depth:{enable:!1},primitive:te.gl.POINTS,pick:!1});case 3:return f=C.sent,C.abrupt("return",[f]);case 5:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s){var f=s.size,m=f===void 0?1:f;return Array.isArray(m)?[m[0]]:[m]}}})}}]),i}(j),we=y(98333),je=y(85975);function _t(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=It(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function It(a,l){if(a){if(typeof a=="string")return Ct(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ct(a,l)}}function Ct(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}var Jt=function(){function a(l,i,r){(0,Kn.Z)(this,a),(0,pt.Z)(this,"boxCells",[]);var n=this.boxCells;this.xCellCount=Math.ceil(l/r),this.yCellCount=Math.ceil(i/r);for(var s=0;s<this.xCellCount*this.yCellCount;s++)n.push([]);this.boxKeys=[],this.bboxes=[],this.width=l,this.height=i,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/i,this.boxUid=0}return(0,Gn.Z)(a,[{key:"insert",value:function(i,r,n,s,f){this.forEachCell(r,n,s,f,this.insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(f)}},{key:"query",value:function(i,r,n,s,f){return this.queryHitTest(i,r,n,s,!1,f)}},{key:"hitTest",value:function(i,r,n,s,f){return this.queryHitTest(i,r,n,s,!0,f)}},{key:"insertBoxCell",value:function(i,r,n,s,f,m){this.boxCells[f].push(m)}},{key:"queryHitTest",value:function(i,r,n,s,f,m){if(n<0||i>this.width||s<0||r>this.height)return f?!1:[];var C=[];if(i<=0&&r<=0&&this.width<=n&&this.height<=s){if(f)return!0;for(var B=0;B<this.boxKeys.length;B++)C.push({key:this.boxKeys[B],x1:this.bboxes[B*4],y1:this.bboxes[B*4+1],x2:this.bboxes[B*4+2],y2:this.bboxes[B*4+3]});return m?C.filter(m):C}var J={hitTest:f,seenUids:{box:{},circle:{}}};return this.forEachCell(i,r,n,s,this.queryCell,C,J,m),f?C.length>0:C}},{key:"queryCell",value:function(i,r,n,s,f,m,C,B){var J=C.seenUids,re=this.boxCells[f];if(re!==null){var Ce=this.bboxes,Ge=_t(re),et;try{for(Ge.s();!(et=Ge.n()).done;){var Je=et.value;if(!J.box[Je]){J.box[Je]=!0;var Xt=Je*4;if(i<=Ce[Xt+2]&&r<=Ce[Xt+3]&&n>=Ce[Xt+0]&&s>=Ce[Xt+1]&&(!B||B(this.boxKeys[Je]))){if(C.hitTest)return m.push(!0),!0;m.push({key:this.boxKeys[Je],x1:Ce[Xt],y1:Ce[Xt+1],x2:Ce[Xt+2],y2:Ce[Xt+3]})}}}}catch(cn){Ge.e(cn)}finally{Ge.f()}}return!1}},{key:"forEachCell",value:function(i,r,n,s,f,m,C,B){for(var J=this.convertToXCellCoord(i),re=this.convertToYCellCoord(r),Ce=this.convertToXCellCoord(n),Ge=this.convertToYCellCoord(s),et=J;et<=Ce;et++)for(var Je=re;Je<=Ge;Je++){var Xt=this.xCellCount*Je+et;if(f.call(this,i,r,n,s,Xt,m,C,B))return}}},{key:"convertToXCellCoord",value:function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}},{key:"convertToYCellCoord",value:function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}}]),a}(),Wn=Jt,Mr=function(){function a(l,i){(0,Kn.Z)(this,a),(0,pt.Z)(this,"viewportPadding",100),this.width=l,this.height=i,this.viewportPadding=Math.max(l,i),this.grid=new Wn(l+this.viewportPadding,i+this.viewportPadding,25),this.screenRightBoundary=l+this.viewportPadding,this.screenBottomBoundary=i+this.viewportPadding,this.gridRightBoundary=l+2*this.viewportPadding,this.gridBottomBoundary=i+2*this.viewportPadding}return(0,Gn.Z)(a,[{key:"placeCollisionBox",value:function(i){var r=i.x1+i.anchorPointX+this.viewportPadding,n=i.y1+i.anchorPointY+this.viewportPadding,s=i.x2+i.anchorPointX+this.viewportPadding,f=i.y2+i.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,n,s,f)||this.grid.hitTest(r,n,s,f)?{box:[]}:{box:[r,n,s,f]}}},{key:"insertCollisionBox",value:function(i,r){var n={featureIndex:r};this.grid.insert(n,i[0],i[1],i[2],i[3])}},{key:"project",value:function(i,r,n){var s=we.al(r,n,0,1),f=we.Ue(),m=je.fromValues.apply(je,(0,Ae.Z)(i));return we.fF(f,s,m),{x:(f[0]/f[3]+1)/2*this.width+this.viewportPadding,y:(-f[1]/f[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(i,r,n,s){return n>=0&&i<this.gridRightBoundary&&s>=0&&r<this.gridBottomBoundary}}]),a}();function hr(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=kr(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function kr(a,l){if(a){if(typeof a=="string")return ia(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ia(a,l)}}function ia(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}function $i(a){var l=.5,i=.5;switch(a){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0;break;default:l=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0;break;default:i=.5}return{horizontalAlign:l,verticalAlign:i}}function zi(a,l,i,r,n){if(n){var s=a[r],f=s.glyph;if(f)for(var m=l[f].advance*s.scale,C=(a[r].x+m)*n,B=i;B<=r;B++)a[B].x-=C}}function Ea(a,l,i,r,n,s,f){var m=(l-i)*n,C=(-r*f+.5)*s,B=hr(a),J;try{for(B.s();!(J=B.n()).done;){var re=J.value;re.x+=m,re.y+=C}}catch(Ce){B.e(Ce)}finally{B.f()}}function qa(a,l,i,r,n,s,f){var m=-8,C=0,B=m,J=0,re=a.positionedGlyphs,Ce=s==="right"?1:s==="left"?0:.5,Ge=re.length;i.forEach(function(xn){if(xn.split("").forEach(function(ur){var _r=l[ur],zr=0;_r&&(re.push({glyph:ur,x:C,y:B+zr,vertical:!1,scale:1,metrics:_r}),C+=_r.advance+f)}),re.length!==Ge){var On=C-f;J=Math.max(On,J),zi(re,l,Ge,re.length-1,Ce)}C=0,B-=r+5});var et=$i(n),Je=et.horizontalAlign,Xt=et.verticalAlign;Ea(re,Ce,Je,Xt,J,r,i.length);var cn=B-m;a.top+=-Xt*cn,a.bottom=a.top-cn,a.left+=-Je*J,a.right=a.left+J}function ua(a,l,i,r,n,s,f){var m=-8,C=0,B=m,J=0,re=a.positionedGlyphs,Ce=s==="right"?1:s==="left"?0:.5,Ge=re.length;i.forEach(function(xn){var On=l[xn],ur=0;if(On&&(re.push({glyph:xn,x:On.advance/2,y:B+ur,vertical:!1,scale:1,metrics:On}),C+=On.advance+f),re.length!==Ge){var _r=C-f;J=Math.max(_r,J),zi(re,l,Ge,re.length-1,Ce)}C=0,B-=r+5});var et=$i(n),Je=et.horizontalAlign,Xt=et.verticalAlign;Ea(re,Ce,Je,Xt,J,r,i.length);var cn=B-m;a.top+=-Xt*cn,a.bottom=a.top-cn,a.left+=-Je*J,a.right=a.left+J}function rs(a,l,i,r,n,s){var f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],m=arguments.length>7?arguments[7]:void 0,C=a.split(`
`),B=[],J={positionedGlyphs:B,top:f[1],bottom:f[1],left:f[0],right:f[0],lineCount:C.length,text:a};return m?ua(J,l,C,i,r,n,s):qa(J,l,C,i,r,n,s),B.length?J:!1}function La(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],i=arguments.length>2?arguments[2]:void 0,r=a.positionedGlyphs,n=r===void 0?[]:r,s=[],f=hr(n),m;try{for(f.s();!(m=f.n()).done;){var C=m.value,B=C.metrics,J=4,re=B.advance*C.scale/2,Ce=i?[C.x+re,C.y]:[0,0],Ge=i?[0,0]:[C.x+re+l[0],C.y+l[1]],et=(0-J)*C.scale-re+Ge[0],Je=(0-J)*C.scale+Ge[1],Xt=et+B.width*C.scale,cn=Je+B.height*C.scale,xn={x:et,y:Je},On={x:Xt,y:Je},ur={x:et,y:cn},_r={x:Xt,y:cn};s.push({tl:xn,tr:On,bl:ur,br:_r,tex:B,glyphOffset:Ce})}}catch(zr){f.e(zr)}finally{f.f()}return s}function Po(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=Wo(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function Wo(a,l){if(a){if(typeof a=="string")return Xa(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xa(a,l)}}function Xa(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}function Ra(a){var l=To();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function To(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ls=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (gl_FragColor.a < 0.01) {
    discard;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,is=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp *(vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function Ps(a){var l=this,i=a.id,r=[],n=[];if(!l.glyphInfoMap||!l.glyphInfoMap[i])return{vertices:[],indices:[],size:7};var s=l.glyphInfoMap[i].centroid,f=s.length===2?[s[0],s[1],0]:s;return l.glyphInfoMap[i].glyphQuads.forEach(function(m,C){r.push.apply(r,(0,Ae.Z)(f).concat([m.tex.x,m.tex.y+m.tex.height,m.tl.x,m.tl.y],(0,Ae.Z)(f),[m.tex.x+m.tex.width,m.tex.y+m.tex.height,m.tr.x,m.tr.y],(0,Ae.Z)(f),[m.tex.x+m.tex.width,m.tex.y,m.br.x,m.br.y],(0,Ae.Z)(f),[m.tex.x,m.tex.y,m.bl.x,m.bl.y])),n.push(0+C*4,1+C*4,2+C*4,2+C*4,3+C*4,0+C*4)}),{vertices:r,indices:n,size:7}}var Il=function(a){(0,er.Z)(i,a);var l=Ra(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"glyphInfoMap",{}),(0,pt.Z)((0,$t.Z)(r),"currentZoom",-1),(0,pt.Z)((0,$t.Z)(r),"textureHeight",0),(0,pt.Z)((0,$t.Z)(r),"textCount",0),(0,pt.Z)((0,$t.Z)(r),"preTextStyle",{}),(0,pt.Z)((0,$t.Z)(r),"mapping",(0,We.Z)(Ze().mark(function m(){return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return r.initGlyph(),r.updateTexture(),B.next=4,r.reBuildModel();case 4:case"end":return B.stop()}},m)}))),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.stroke,C=m===void 0?"#fff":m,B=n.strokeWidth,J=B===void 0?0:B,re=n.halo,Ce=re===void 0?.5:re,Ge=n.gamma,et=Ge===void 0?2:Ge,Je=n.raisingHeight,Xt=Je===void 0?0:Je,cn=this.getFontServiceMapping(),xn=this.getFontServiceCanvas();if(cn&&Object.keys(cn).length!==this.textCount&&xn&&(this.updateTexture(),this.textCount=Object.keys(cn).length),this.preTextStyle=this.getTextStyle(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,strokeWidth:J,stroke:C})){this.judgeStyleAttributes({opacity:f,strokeWidth:J,stroke:C});var On=this.layer.getEncodedData(),ur=this.calDataFrame(this.cellLength,On,this.cellProperties),_r=ur.data,zr=ur.width,Ir=ur.height;this.rowCount=Ir,this.dataTexture=this.cellLength>0&&_r.length>0?this.createTexture2D({flipY:!0,data:_r,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:zr,height:Ir}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(Xt),u_opacity:(0,He.isNumber)(f)?f:1,u_stroke_width:(0,He.isNumber)(J)?J:1,u_stroke_color:this.getStrokeColor(C),u_sdf_map:this.texture,u_halo_blur:Ce,u_gamma_scale:et,u_sdf_map_size:[(xn==null?void 0:xn.width)||1,(xn==null?void 0:xn.height)||1]}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.preTextStyle=this.getTextStyle(),m.abrupt("return",this.buildModels());case 4:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.layer.getLayerConfig(),m=f.textAllowOverlap,C=m===void 0?!1:m,this.initGlyph(),this.updateTexture(),C||this.filterGlyphs(),re.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:is,fragmentShader:ls,triangulation:Ps.bind(this),depth:{enable:!1}});case 6:return B=re.sent,re.abrupt("return",[B]);case 8:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"needUpdate",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge,et,Je,Xt,cn;return Ze().wrap(function(On){for(;;)switch(On.prev=On.next){case 0:if(f=this.getTextStyle(),m=f.textAllowOverlap,C=m===void 0?!1:m,B=f.textAnchor,J=B===void 0?"center":B,re=f.textOffset,Ce=f.padding,Ge=f.fontFamily,et=f.fontWeight,!(!(0,He.isEqual)(Ce,this.preTextStyle.padding)||!(0,He.isEqual)(re,this.preTextStyle.textOffset)||!(0,He.isEqual)(J,this.preTextStyle.textAnchor)||!(0,He.isEqual)(Ge,this.preTextStyle.fontFamily)||!(0,He.isEqual)(et,this.preTextStyle.fontWeight))){On.next=5;break}return On.next=4,this.mapping();case 4:return On.abrupt("return",!0);case 5:if(!C){On.next=7;break}return On.abrupt("return",!1);case 7:if(Je=this.mapService.getZoom(),Xt=this.mapService.getBounds(),cn=(0,pe.oO)(this.extent,Xt),!(Math.abs(this.currentZoom-Je)>.5||!cn||C!==this.preTextStyle.textAllowOverlap)){On.next=14;break}return On.next=13,this.reBuildModel();case 13:return On.abrupt("return",!0);case 14:return On.abrupt("return",!1);case 15:case"end":return On.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:te.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s){var f=s.rotate,m=f===void 0?0:f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:te.GC.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[5],m[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s){var f=s.size,m=f===void 0?12:f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:te.GC.Attribute,descriptor:{name:"a_tex",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[3],m[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var n=this.mapService.getBounds();return(0,pe.yA)(n,.5)}},{key:"initTextFont",value:function(){var n=this.getTextStyle(),s=n.fontWeight,f=n.fontFamily,m=this.layer.getEncodedData(),C=[];m.forEach(function(B){var J=B.shape,re=J===void 0?"":J;re=re.toString();var Ce=Po(re),Ge;try{for(Ce.s();!(Ge=Ce.n()).done;){var et=Ge.value;C.indexOf(et)===-1&&C.push(et)}}catch(Je){Ce.e(Je)}finally{Ce.f()}}),this.fontService.setFontOptions({characterSet:C,fontWeight:s,fontFamily:f,iconfont:!1})}},{key:"initIconFontTex",value:function(){var n=this.getTextStyle(),s=n.fontWeight,f=n.fontFamily,m=this.layer.getEncodedData(),C=[];m.forEach(function(B){var J=B.shape,re=J===void 0?"":J;re="".concat(re),C.indexOf(re)===-1&&C.push(re)}),this.fontService.setFontOptions({characterSet:C,fontWeight:s,fontFamily:f,iconfont:!0})}},{key:"getTextStyle",value:function(){var n=this.layer.getLayerConfig(),s=n.fontWeight,f=s===void 0?"400":s,m=n.fontFamily,C=m===void 0?"sans-serif":m,B=n.textAllowOverlap,J=B===void 0?!1:B,re=n.padding,Ce=re===void 0?[0,0]:re,Ge=n.textAnchor,et=Ge===void 0?"center":Ge,Je=n.textOffset,Xt=Je===void 0?[0,0]:Je,cn=n.opacity,xn=cn===void 0?1:cn,On=n.strokeOpacity,ur=On===void 0?1:On,_r=n.strokeWidth,zr=_r===void 0?0:_r,Ir=n.stroke,ii=Ir===void 0?"#000":Ir;return{fontWeight:f,fontFamily:C,textAllowOverlap:J,padding:Ce,textAnchor:et,textOffset:Xt,opacity:xn,strokeOpacity:ur,strokeWidth:zr,stroke:ii}}},{key:"generateGlyphLayout",value:function(n){var s=this,f=this.getFontServiceMapping(),m=this.layer.getLayerConfig(),C=m.spacing,B=C===void 0?2:C,J=m.textAnchor,re=J===void 0?"center":J,Ce=m.textOffset,Ge=this.layer.getEncodedData();this.glyphInfo=Ge.map(function(et){var Je=et.shape,Xt=Je===void 0?"":Je,cn=et.id,xn=et.size,On=xn===void 0?1:xn,ur=rs(Xt.toString(),f,On,re,"left",B,Ce||et.textOffset||[0,0],n),_r=La(ur,Ce,!1);return et.shaping=ur,et.glyphQuads=_r,et.centroid=(0,pe.SI)(et.coordinates),et.originCentroid=et.version==="GAODE2.x"?(0,pe.SI)(et.originCoordinates):et.originCentroid=et.centroid,s.glyphInfoMap[cn]={shaping:ur,glyphQuads:_r,centroid:(0,pe.SI)(et.coordinates)},et})}},{key:"getFontServiceMapping",value:function(){var n=this.layer.getLayerConfig(),s=n.fontWeight,f=s===void 0?"400":s,m=n.fontFamily,C=m===void 0?"sans-serif":m;return this.fontService.getMappingByKey("".concat(C,"_").concat(f))}},{key:"getFontServiceCanvas",value:function(){var n=this.layer.getLayerConfig(),s=n.fontWeight,f=s===void 0?"400":s,m=n.fontFamily,C=m===void 0?"sans-serif":m;return this.fontService.getCanvasByKey("".concat(C,"_").concat(f))}},{key:"filterGlyphs",value:function(){var n=this,s=this.layer.getLayerConfig(),f=s.padding,m=f===void 0?[0,0]:f,C=s.textAllowOverlap,B=C===void 0?!1:C;if(!B){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var J=this.rendererService.getViewportSize(),re=J.width,Ce=J.height,Ge=new Mr(re,Ce),et=this.glyphInfo.filter(function(Je){var Xt=Je.shaping,cn=Je.id,xn=cn===void 0?0:cn,On=Je.version==="GAODE2.x"?Je.originCentroid:Je.centroid,ur=Je.size,_r=ur/16,zr=n.mapService.lngLatToContainer(On),Ir=Ge.placeCollisionBox({x1:Xt.left*_r-m[0],x2:Xt.right*_r+m[0],y1:Xt.top*_r-m[1],y2:Xt.bottom*_r+m[1],anchorPointX:zr.x,anchorPointY:zr.y}),ii=Ir.box;return ii&&ii.length?(Ge.insertCollisionBox(ii,xn),!0):!1});et.forEach(function(Je){n.glyphInfoMap[Je.id]=Je})}}},{key:"initGlyph",value:function(){var n=this.layer.getLayerConfig(),s=n.iconfont,f=s===void 0?!1:s;f?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(f)}},{key:"updateTexture",value:function(){var n=this.rendererService.createTexture2D,s=this.getFontServiceCanvas();this.textureHeight=s.height,this.texture&&this.texture.destroy(),this.texture=n({data:s,mag:te.gl.LINEAR,min:te.gl.LINEAR,width:s.width,height:s.height})}},{key:"reBuildModel",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.filterGlyphs(),C.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:is,fragmentShader:ls,triangulation:Ps.bind(this),depth:{enable:!1}});case 3:f=C.sent,this.layer.models=[f];case 5:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()}]),i}(j);function Qs(a){var l=Es();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Wu=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];  
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }

  } else {
     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fu=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,hu=`uniform sampler2D u_texture;
uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float lightWeight = styleMappingMat[3][1];
  float topU = styleMappingMat[2][2];
  float topV = styleMappingMat[2][3];

  float sidey = styleMappingMat[3][0];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = texture2D(u_texture, vec2(topU, topV));
  }
  

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ql=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_Color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[2][2] = a_uvs[0];
  styleMappingMat[2][3] = 1.0 - a_uvs[1];
  styleMappingMat[3][0] = a_uvs[2];


  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,Xu=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      // side notuse linear
       gl_FragColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
}
`,Rl=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,I=function(a){(0,er.Z)(i,a);var l=Qs(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.heightfixed,C=m===void 0?!1:m,B=n.raisingHeight,J=B===void 0?0:B,re=n.topsurface,Ce=re===void 0?!0:re,Ge=n.sidesurface,et=Ge===void 0?!0:Ge,Je=n.sourceColor,Xt=n.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var cn=this.layer.getEncodedData(),xn=this.calDataFrame(this.cellLength,cn,this.cellProperties),On=xn.data,ur=xn.width,_r=xn.height;this.rowCount=_r,this.dataTexture=this.cellLength>0&&On.length>0?this.createTexture2D({flipY:!0,data:On,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:ur,height:_r}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}var zr=0,Ir=[1,1,1,1],ii=[1,1,1,1];return Je&&Xt&&(Ir=(0,pe.CI)(Je),ii=(0,pe.CI)(Xt),zr=1),{u_topsurface:Number(Ce),u_sidesurface:Number(et),u_heightfixed:Number(C),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(J),u_opacity:(0,He.isNumber)(f)?f:1,u_linearColor:zr,u_sourceColor:Ir,u_targetColor:ii,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.loadTexture(),m.abrupt("return",this.buildModels());case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J;return Ze().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return f=this.getShaders(),m=f.frag,C=f.vert,B=f.type,Ce.next=3,this.layer.buildLayerModel({moduleName:B,vertexShader:C,fragmentShader:m,triangulation:ll});case 3:return J=Ce.sent,Ce.abrupt("return",[J]);case 5:case"end":return Ce.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.pickLight,f=n.mapTexture;return f?{frag:hu,vert:ql,type:"polygonExtrudeTexture"}:s?{frag:Xu,vert:Rl,type:"polygonExtrudePickLight"}:{frag:Wu,vert:Fu,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var n,s;(n=this.dataTexture)===null||n===void 0||n.destroy(),(s=this.texture)===null||s===void 0||s.destroy()}},{key:"registerBuiltinAttributes",value:function(){var n=this.layer.getSource().extent,s=(0,qr.Z)(n,4),f=s[0],m=s[1],C=s[2],B=s[3],J=C-f,re=B-m;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:te.GC.Attribute,descriptor:{name:"a_uvs",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(Ge,et,Je){var Xt=Je[0],cn=Je[1];return[(Xt-f)/J,(cn-m)/re,Je[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(Ge,et,Je,Xt,cn){return cn}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(Ge){var et=Ge.size,Je=et===void 0?10:et;return Array.isArray(Je)?[Je[0]]:[Je]}}})}},{key:"loadTexture",value:function(){var n=this,s=this.layer.getLayerConfig(),f=s.mapTexture,m=this.rendererService.createTexture2D;if(this.texture=m({height:0,width:0}),f){var C=new Image;C.crossOrigin="",C.src=f,C.onload=function(){n.texture=m({data:C,width:C.width,height:C.height,wrapS:te.gl.CLAMP_TO_EDGE,wrapT:te.gl.CLAMP_TO_EDGE,min:te.gl.LINEAR,mag:te.gl.LINEAR}),n.layerService.reRender()}}}}]),i}(j);function z(a){var l=$();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function $(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ee=`uniform float u_opacity: 1.0;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ge=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;


void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,xe=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}`,gt=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,Ft=function(a){(0,er.Z)(i,a);var l=z(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.raisingHeight,f=s===void 0?0:s,m=n.opacity,C=m===void 0?1:m,B=n.opacityLinear,J=B===void 0?{enable:!1,dir:"in"}:B;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:C})){this.judgeStyleAttributes({opacity:C});var re=this.layer.getEncodedData(),Ce=this.calDataFrame(this.cellLength,re,this.cellProperties),Ge=Ce.data,et=Ce.width,Je=Ce.height;this.rowCount=Je,this.dataTexture=this.cellLength>0&&Ge.length>0?this.createTexture2D({flipY:!0,data:Ge,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:et,height:Je}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(f),u_opacity:(0,He.isNumber)(C)?C:1,u_opacitylinear:Number(J.enable),u_dir:J.dir==="in"?1:0}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge,et,Je;return Ze().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return f=this.getModelParams(),m=f.frag,C=f.vert,B=f.triangulation,J=f.type,re=this.layer.getLayerConfig(),Ce=re.workerEnabled,Ge=Ce===void 0?!1:Ce,et=re.enablePicking,this.layer.triangulation=B,cn.next=5,this.layer.buildLayerModel({moduleName:J,vertexShader:C,fragmentShader:m,triangulation:B,primitive:te.gl.TRIANGLES,depth:{enable:!1},workerEnabled:Ge,workerOptions:{modelType:J,enablePicking:et}});case 5:return Je=cn.sent,cn.abrupt("return",[Je]);case 7:case"end":return cn.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){var n=this.layer.getLayerConfig(),s=n.opacityLinear,f=s===void 0?{enable:!1,dir:"in"}:s;f.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:te.GC.Attribute,descriptor:{name:"a_linear",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(C,B,J){return[J[3],J[4],J[5]]}}})}},{key:"getModelParams",value:function(){var n=this.layer.getLayerConfig(),s=n.opacityLinear,f=s===void 0?{enable:!1}:s;return f.enable?{frag:ge,vert:xe,type:"polygonLinear",triangulation:bu}:{frag:ee,vert:gt,type:"polygonFill",triangulation:pe.yR}}}]),i}(j);function Sn(a){var l=Mt();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Mt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var En=`
uniform float u_time: 0.0;
uniform float u_opacity: 1.0;

varying vec2 v_uv;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;
// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)
// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)
uniform vec4 u_watercolor;
uniform vec4 u_watercolor2;
vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture2D(u_texture2,p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture2D(u_texture1,fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    

  float opacity = u_opacity;
  gl_FragColor = vec4(col, opacity);  
}
`,lr=`attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,Di=function(a){(0,er.Z)(i,a);var l=Sn(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.watercolor,C=m===void 0?"#6D99A8":m,B=n.watercolor2,J=B===void 0?"#0F121C":B;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:(0,pe.CI)(C),u_watercolor2:(0,pe.CI)(J),u_opacity:(0,He.isNumber)(f)?f:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.loadTexture(),m.abrupt("return",this.buildModels());case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:lr,fragmentShader:En,triangulation:ns,primitive:te.gl.TRIANGLES,depth:{enable:!1}});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s,f;(n=this.texture1)===null||n===void 0||n.destroy(),(s=this.texture2)===null||s===void 0||s.destroy(),(f=this.texture3)===null||f===void 0||f.destroy()}},{key:"registerBuiltinAttributes",value:function(){var n=this.layer.getSource().extent,s=(0,qr.Z)(n,4),f=s[0],m=s[1],C=s[2],B=s[3],J=C-f,re=B-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:te.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(Ge,et,Je,Xt){var cn=Ge.version===qo.G["GAODE2.x"]?Ge.originCoordinates[0][Xt]:Je,xn=(0,qr.Z)(cn,2),On=xn[0],ur=xn[1];return[(On-f)/J,(ur-m)/re]}}})}},{key:"loadTexture",value:function(){var n=this,s=this.rendererService.createTexture2D,f={height:0,width:0};this.texture1=s(f),this.texture2=s(f),this.texture3=s(f),m(function(B){n.texture1=C(B[0]),n.texture2=C(B[1]),n.texture3=C(B[2]),n.layerService.reRender()});function m(B){var J=0,re=[],Ce=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];Ce.map(function(Ge){var et=new Image;et.crossOrigin="",et.src=Ge,re.push(et),et.onload=function(){J++,J===3&&B(re)}})}function C(B){return s({data:B,width:B.width,height:B.height,wrapS:te.gl.MIRRORED_REPEAT,wrapT:te.gl.MIRRORED_REPEAT,min:te.gl.LINEAR,mag:te.gl.LINEAR})}}}]),i}(j);function Zi(a){var l=Ri();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ri(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ki=`uniform sampler2D u_texture;
uniform float u_time: 0.0;
uniform float u_speed: 1.0;
uniform float u_opacity: 1.0;

varying vec4 v_Color;
varying vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  float opacity = u_opacity;
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;

  float spc = calSpc();
  gl_FragColor += spc * 0.4;
}
`,Ui=`attribute vec4 a_Color;
attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
varying vec2 v_uv;
uniform float u_opacity: 1.0;


#pragma include "projection"

void main() {
  v_uv = a_uv;

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,yi=function(a){(0,er.Z)(i,a);var l=Zi(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.speed,C=m===void 0?.5:m;return{u_texture:this.texture,u_speed:C,u_opacity:(0,He.isNumber)(f)?f:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.loadTexture(),m.abrupt("return",this.buildModels());case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Ui,fragmentShader:ki,triangulation:ns,primitive:te.gl.TRIANGLES,depth:{enable:!1}});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.texture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){var n=this.layer.getSource().extent,s=(0,qr.Z)(n,4),f=s[0],m=s[1],C=s[2],B=s[3],J=C-f,re=B-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:te.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(Ge,et,Je,Xt){var cn=Ge.version===qo.G["GAODE2.x"]?Ge.originCoordinates[0][Xt]:Je,xn=(0,qr.Z)(cn,2),On=xn[0],ur=xn[1];return[(On-f)/J,(ur-m)/re]}}})}},{key:"loadTexture",value:function(){var n=this,s=this.layer.getLayerConfig(),f=s.waterTexture,m=this.rendererService.createTexture2D;this.texture=m({height:0,width:0});var C=new Image;C.crossOrigin="",f?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),C.src=f):C.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",C.onload=function(){n.texture=m({data:C,width:C.width,height:C.height,wrapS:te.gl.MIRRORED_REPEAT,wrapT:te.gl.MIRRORED_REPEAT,min:te.gl.LINEAR,mag:te.gl.LINEAR}),n.layerService.reRender()}}}]),i}(j),na={fill:Ft,line:wa,extrude:I,text:Il,point_fill:fc,point_image:Lu,point_normal:fe,point_extrude:rf,water:yi,ocean:Di},Oa=na;function za(a){var l=Xo();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Xo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cs=function(a){(0,er.Z)(i,a);var l=za(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","PolygonLayer"),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel=new Oa[f](this),C.next=4,this.initLayerModels();case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getModelType",value:function(){var n,s=this.styleAttributeService.getLayerStyleAttribute("shape"),f=s==null||(n=s.scale)===null||n===void 0?void 0:n.field;return f==="fill"||!f?"fill":f==="extrude"?"extrude":f==="water"?"water":f==="ocean"?"ocean":f==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var n=this.getEncodedData(),s=this.getLayerConfig(),f=s.shape2d,m=s.shape3d,C=this.iconService.getIconMap(),B=n.find(function(re){return re.hasOwnProperty("shape")});if(B){var J=B.shape;return J==="dot"?"point_normal":(f==null?void 0:f.indexOf(J))!==-1?"point_fill":(m==null?void 0:m.indexOf(J))!==-1?"point_extrude":C.hasOwnProperty(J)?"point_image":"text"}else return"fill"}}]),i}(Zo);function Bs(a){var l=So();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function So(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Pa=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;
bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }


void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value))
      discard;
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
     discard;
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
    if(gl_FragColor.a < 0.01)
      discard;
   
  }
}
`,co=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Do=function(a){(0,er.Z)(i,a);var l=Bs(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.clampLow,C=m===void 0?!0:m,B=n.clampHigh,J=B===void 0?!0:B,re=n.noDataValue,Ce=re===void 0?-9999999:re,Ge=n.domain,et=n.rampColors,Je=Ge||(0,pe.ZB)(et);return this.colorTexture=this.layer.textureService.getColorTexture(et,Je),{u_opacity:f||1,u_texture:this.texture,u_domain:Je,u_clampLow:C,u_clampHigh:typeof J!="undefined"?J:C,u_noDataValue:Ce,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var r=(0,We.Z)(Ze().mark(function s(f){var m,C,B,J;return Ze().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!Array.isArray(f.data)){Ce.next=4;break}return Ce.abrupt("return",{data:f.data,width:f.width,height:f.height});case 4:return Ce.next=6,f.data;case 6:return m=Ce.sent,C=m.rasterData,B=m.width,J=m.height,Ce.abrupt("return",{data:Array.from(C),width:B,height:J});case 11:case"end":return Ce.stop()}},s)}));function n(s){return r.apply(this,arguments)}return n}()},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return f=this.layer.getSource(),m=this.rendererService.createTexture2D,C=f.data.dataArray[0],Je.next=5,this.getRasterData(C);case 5:return B=Je.sent,J=B.data,re=B.width,Ce=B.height,this.texture=m({data:J,width:re,height:Ce,format:te.gl.LUMINANCE,type:te.gl.FLOAT}),Je.next=12,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:co,fragmentShader:Pa,triangulation:uc,primitive:te.gl.TRIANGLES,depth:{enable:!1}});case 12:return Ge=Je.sent,Je.abrupt("return",[Ge]);case 14:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.initModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.colorTexture)===null||s===void 0||s.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[3],m[4]]}}})}}]),i}(j),Ws=["data"],Is=["rasterData"];function Xs(a){var l=kl();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function kl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Jo=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Yu=`precision mediump float;
uniform vec2 u_rminmax: vec2(0,255); 
uniform vec2 u_gminmax: vec2(0,255);
uniform vec2 u_bminmax: vec2(0,255);
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform float u_noDataValue : 0.0;
varying vec2 v_texCoord;

void main() {
  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;
  if(rgb == vec3(u_noDataValue)) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
  if(gl_FragColor.a < 0.01)
    discard;
 
}`,as=function(a){(0,er.Z)(i,a);var l=Xs(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"dataOption",{}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.noDataValue,C=m===void 0?0:m,B=this.dataOption,J=B.rMinMax,re=B.gMinMax,Ce=B.bMinMax;return{u_opacity:f||1,u_texture:this.texture,u_noDataValue:C,u_rminmax:J,u_gminmax:re,u_bminmax:Ce}}},{key:"getRasterData",value:function(){var r=(0,We.Z)(Ze().mark(function s(f){var m,C,B,J,re;return Ze().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(!Array.isArray(f.data)){Ge.next=4;break}return m=f.data,C=(0,jt.Z)(f,Ws),this.dataOption=C,Ge.abrupt("return",(0,be.Z)({data:m},C));case 4:return Ge.next=6,f.data;case 6:if(B=Ge.sent,J=B.rasterData,re=(0,jt.Z)(B,Is),this.dataOption=re,!Array.isArray(J)){Ge.next=14;break}return Ge.abrupt("return",(0,be.Z)({data:J},re));case 14:return Ge.abrupt("return",(0,be.Z)({data:Array.from(J)},re));case 15:case"end":return Ge.stop()}},s,this)}));function n(s){return r.apply(this,arguments)}return n}()},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return f=this.layer.getSource(),m=this.rendererService.createTexture2D,C=f.data.dataArray[0],Je.next=5,this.getRasterData(C);case 5:return B=Je.sent,J=B.data,re=B.width,Ce=B.height,this.texture=m({data:J,width:re,height:Ce,format:te.gl.RGB,type:te.gl.FLOAT}),Je.next=12,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:Jo,fragmentShader:Yu,triangulation:uc,primitive:te.gl.TRIANGLES,depth:{enable:!1}});case 12:return Ge=Je.sent,Je.abrupt("return",[Ge]);case 14:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.initModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.texture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[3],m[4]]}}})}}]),i}(j);function Ku(a){var l=Wf();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Wf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rc=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
uniform vec4 u_unpack;

float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data = texture2D(u_texture, coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return texture2D(u_colorTexture, coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    gl_FragColor = getColor(value);
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
      if(gl_FragColor.a < 0.01)
      discard;
  }
}
`,lh=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,ch=function(a){(0,er.Z)(i,a);var l=Ku(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=n.clampLow,m=f===void 0?!0:f,C=n.clampHigh,B=C===void 0?!0:C,J=n.noDataValue,re=J===void 0?-9999999:J,Ce=n.domain,Ge=n.rampColors,et=n.colorTexture,Je=n.rScaler,Xt=Je===void 0?6553.6:Je,cn=n.gScaler,xn=cn===void 0?25.6:cn,On=n.bScaler,ur=On===void 0?.1:On,_r=n.offset,zr=_r===void 0?1e4:_r,Ir=Ce||(0,pe.ZB)(Ge),ii=et;return et?this.layer.textureService.setColorTexture(et,Ge,Ir):ii=this.layer.textureService.getColorTexture(Ge,Ir),{u_opacity:s||1,u_texture:this.texture,u_domain:Ir,u_clampLow:m,u_clampHigh:typeof B!="undefined"?B:m,u_noDataValue:re,u_unpack:[Xt,xn,ur,zr],u_colorTexture:ii}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.layer.getSource(),m=this.rendererService.createTexture2D,re.next=4,f.data.images;case 4:return C=re.sent,this.texture=m({data:C[0],width:C[0].width,height:C[0].height,min:te.gl.LINEAR,mag:te.gl.LINEAR}),re.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:lh,fragmentShader:Rc,triangulation:uc,primitive:te.gl.TRIANGLES,depth:{enable:!1}});case 8:return B=re.sent,re.abrupt("return",[B]);case 10:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.texture)===null||n===void 0||n.destroy()}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.initModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[3],m[4]]}}})}}]),i}(j),Mh={raster:Do,rasterRgb:as,raster3d:Do,rasterTerrainRgb:ch},Xf=Mh;function Oh(a){var l=Ph();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ph(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ll=function(a){(0,er.Z)(i,a);var l=Oh(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","RasterLayer"),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel=new Xf[f](this),C.next=4,this.initLayerModels();case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getDefaultConfig",value:function(){var n=this.getModelType(),s={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return s[n]}},{key:"getModelType",value:function(){var n=this.layerSource.getParserType();switch(n){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),i}(Zo);function Yf(a){var l=Kf();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Kf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rf=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,xf=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,uf=function(a){(0,er.Z)(i,a);var l=Yf(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.color,C=m===void 0?"#000":m;return{u_opacity:(0,He.isNumber)(f)?f:0,u_color:(0,pe.CI)(C)}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:xf,fragmentShader:Rf,triangulation:ns,depth:{enable:!1},pick:!1});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),i}(j),Ma={fill:uf},kf=Ma;function Lf(a){var l=lf();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function lf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Me=function(a){(0,er.Z)(i,a);var l=Lf(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","MaskLayer"),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel=new kf[f](this),C.next=4,this.initLayerModels();case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getModelType",value:function(){return"fill"}}]),i}(Zo),ft=y(86700),Zt=y(28660),Dn,mr,Xn,ir,br,Or,Dr,jr=(Dn=(0,ft.b2)(),mr=(0,ft.f3)(te.vK.IMapService),Xn=(0,ft.f3)(te.vK.IFontService),Dn(ir=(br=function(){function a(){(0,Kn.Z)(this,a),(0,al.Z)(this,"mapService",Or,this),(0,al.Z)(this,"fontService",Dr,this)}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=this,s=r.styleAttributeService;i.hooks.init.tapPromise("DataMappingPlugin",(0,We.Z)(Ze().mark(function f(){return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:i.log(te.Or.MappingStart,te.KD.INIT),n.generateMaping(i,{styleAttributeService:s}),i.log(te.Or.MappingEnd,te.KD.INIT);case 3:case"end":return C.stop()}},f)}))),i.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var f=(0,We.Z)(Ze().mark(function m(C){var B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(C){re.next=2;break}return re.abrupt("return",C);case 2:return i.dataState.dataMappingNeedUpdate=!1,i.log(te.Or.MappingStart,te.KD.UPDATE),B=n.generateMaping(i,{styleAttributeService:s}),i.log(te.Or.MappingEnd,te.KD.UPDATE),re.abrupt("return",B);case 7:case"end":return re.stop()}},m)}));return function(m){return f.apply(this,arguments)}}()),i.hooks.beforeRender.tap("DataMappingPlugin",function(){var f=i.getSource();if(!(i.layerModelNeedUpdate||!f||!f.inited)){var m=s.getLayerStyleAttributes()||[],C=s.getLayerStyleAttribute("filter"),B=f.data.dataArray;if(!(Array.isArray(B)&&B.length===0)){var J=m.filter(function(Ge){return Ge.needRemapping}),re=B;if(C!=null&&C.needRemapping&&C!==null&&C!==void 0&&C.scale&&(re=B.filter(function(Ge){return n.applyAttributeMapping(C,Ge)[0]})),J.length){var Ce=n.mapping(i,J,re,i.getEncodedData());i.setEncodedData(Ce)}}}})}},{key:"generateMaping",value:function(i,r){var n=this,s=r.styleAttributeService,f=s.getLayerStyleAttributes()||[],m=s.getLayerStyleAttribute("filter"),C=i.getSource().data.dataArray,B=C;m!=null&&m.scale&&(B=C.filter(function(re){return n.applyAttributeMapping(m,re)[0]})),B=i.processData(B);var J=this.mapping(i,f,B,void 0);return i.setEncodedData(J),C.length===0&&i.encodeDataLength===0?!1:(i.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(i,r,n,s){var f=this,m=i.getLayerConfig(),C=m.arrow,B=C===void 0?{enable:!1}:C,J=r.filter(function(Ce){return Ce.scale!==void 0}).filter(function(Ce){return Ce.name!=="filter"}),re=n.map(function(Ce,Ge){var et=s?s[Ge]:{},Je=(0,be.Z)({id:Ce._id,coordinates:Ce.coordinates},et);if(J.forEach(function(xn){var On=f.applyAttributeMapping(xn,Ce);xn.name==="color"&&(On=On.map(function(ur){return(0,pe.CI)(ur)})),Je[xn.name]=Array.isArray(On)&&On.length===1?On[0]:On,xn.name==="shape"&&(Je.shape=f.fontService.getIconFontKey(Je[xn.name]))}),B.enable&&(Je.shape==="line"||Je.shape==="halfLine")){var Xt=Je.coordinates;if(i.arrowInsertCount<i.encodeDataLength){var cn=f.getArrowPoints(Xt[0],Xt[1]);Je.coordinates.splice(1,0,cn,cn),i.arrowInsertCount++}}return Je});return r.forEach(function(Ce){Ce.needRemapping=!1}),this.adjustData2Amap2Coordinates(re,i),this.adjustData2SimpleCoordinates(re),re}},{key:"adjustData2Amap2Coordinates",value:function(i,r){var n=this;if(i.length>0&&this.mapService.version===qo.G["GAODE2.x"]){var s=r.coordCenter||r.getSource().center;typeof i[0].coordinates[0]=="number"?i.filter(function(f){return!f.originCoordinates}).map(function(f){f.version=qo.G["GAODE2.x"],f.originCoordinates=(0,He.cloneDeep)(f.coordinates),f.coordinates=n.mapService.lngLatToCoordByLayer(f.coordinates,s)}):i.filter(function(f){return!f.originCoordinates}).map(function(f){f.version=qo.G["GAODE2.x"],f.originCoordinates=(0,He.cloneDeep)(f.coordinates),f.coordinates=n.mapService.lngLatToCoordsByLayer(f.coordinates,s)})}}},{key:"adjustData2SimpleCoordinates",value:function(i){var r=this;i.length>0&&this.mapService.version===qo.G.SIMPLE&&i.map(function(n){n.simpleCoordinate||(n.coordinates=r.unProjectCoordinates(n.coordinates),n.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(i){var r=this;if(typeof i[0]=="number")return this.mapService.simpleMapCoord.unproject(i);if(i[0]&&i[0][0]instanceof Array){var n=[];return i.map(function(f){var m=[];f.map(function(C){m.push(r.mapService.simpleMapCoord.unproject(C))}),n.push(m)}),n}else{var s=[];return i.map(function(f){s.push(r.mapService.simpleMapCoord.unproject(f))}),s}}},{key:"applyAttributeMapping",value:function(i,r){var n;if(!i.scale)return[];var s=(i==null||(n=i.scale)===null||n===void 0?void 0:n.scalers)||[],f=[];s.forEach(function(C){var B,J=C.field;(r.hasOwnProperty(J)||((B=i.scale)===null||B===void 0?void 0:B.type)==="variable")&&f.push(r[J])});var m=i.mapping?i.mapping(f):[];return m}},{key:"getArrowPoints",value:function(i,r){var n=[r[0]-i[0],r[1]-i[1]],s=(0,pe.Fv)(n),f=[i[0]+s[0]*1e-4,i[1]+s[1]*1e-4];return f}}]),a}(),Or=(0,vu.Z)(br.prototype,"mapService",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr=(0,vu.Z)(br.prototype,"fontService",[Xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br))||ir),Ur,Gr,xr=(Ur=(0,ft.b2)(),Ur(Gr=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){var r=this;this.mapService=i.getContainer().get(te.vK.IMapService),i.hooks.init.tapPromise("DataSourcePlugin",(0,We.Z)(Ze().mark(function n(){var s,f,m,C;return Ze().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(i.log(te.Or.SourceInitStart,te.KD.INIT),s=i.getSource(),s||(f=i.sourceOption||i.defaultSourceConfig,m=f.data,C=f.options,s=new vs(m,C),i.setSource(s)),!s.inited){J.next=8;break}r.updateClusterData(i),i.log(te.Or.SourceInitEnd,te.KD.INIT),J.next=10;break;case 8:return J.next=10,new Promise(function(re){s.on("update",function(Ce){Ce.type==="inited"&&(r.updateClusterData(i),i.log(te.Or.SourceInitEnd,te.KD.INIT)),re(null)})});case 10:case"end":return J.stop()}},n)}))),i.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,We.Z)(Ze().mark(function n(){var s,f,m;return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return s=r.updateClusterData(i),f=i.dataState.dataSourceNeedUpdate,i.dataState.dataSourceNeedUpdate=!1,m=s||f,B.abrupt("return",m);case 5:case"end":return B.stop()}},n)})))}},{key:"updateClusterData",value:function(i){if(i.isTileLayer||i.tileLayer||!i.getSource())return!1;var r=i.getSource(),n=r.cluster,s=r.clusterOptions.zoom,f=s===void 0?0:s,m=this.mapService.getZoom()-1,C=i.dataState.dataSourceNeedUpdate;return n&&C&&r.updateClusterData(Math.floor(m)),n&&Math.abs(i.clusterZoom-m)>=1?(f!==Math.floor(m)&&r.updateClusterData(Math.floor(m)),i.clusterZoom=m,!0):!1}}]),a}())||Gr);function Lr(a,l){return a<l?-1:a>l?1:a>=l?0:NaN}function Tn(a){return a.length===1&&(a=tr(a)),{left:function(l,i,r,n){for(r==null&&(r=0),n==null&&(n=l.length);r<n;){var s=r+n>>>1;a(l[s],i)<0?r=s+1:n=s}return r},right:function(l,i,r,n){for(r==null&&(r=0),n==null&&(n=l.length);r<n;){var s=r+n>>>1;a(l[s],i)>0?n=s:r=s+1}return r}}}function tr(a){return function(l,i){return Lr(a(l),i)}}var Fr=Tn(Lr),pi=Fr.right,Tr=Fr.left,ai=pi;function oi(a,l){var i=a.length,r=-1,n,s,f;if(l==null){for(;++r<i;)if((n=a[r])!=null&&n>=n)for(s=f=n;++r<i;)(n=a[r])!=null&&(s>n&&(s=n),f<n&&(f=n))}else for(;++r<i;)if((n=l(a[r],r,a))!=null&&n>=n)for(s=f=n;++r<i;)(n=l(a[r],r,a))!=null&&(s>n&&(s=n),f<n&&(f=n));return[s,f]}var Vi=Array.prototype,yr=Vi.slice,vr=Vi.map,xi=Math.sqrt(50),Qr=Math.sqrt(10),Rr=Math.sqrt(2);function ri(a,l,i){var r,n=-1,s,f,m;if(l=+l,a=+a,i=+i,a===l&&i>0)return[a];if((r=l<a)&&(s=a,a=l,l=s),(m=ei(a,l,i))===0||!isFinite(m))return[];if(m>0)for(a=Math.ceil(a/m),l=Math.floor(l/m),f=new Array(s=Math.ceil(l-a+1));++n<s;)f[n]=(a+n)*m;else for(a=Math.floor(a*m),l=Math.ceil(l*m),f=new Array(s=Math.ceil(a-l+1));++n<s;)f[n]=(a-n)/m;return r&&f.reverse(),f}function ei(a,l,i){var r=(l-a)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=xi?10:s>=Qr?5:s>=Rr?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=xi?10:s>=Qr?5:s>=Rr?2:1)}function ga(a,l,i){var r=Math.abs(l-a)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;return s>=xi?n*=10:s>=Qr?n*=5:s>=Rr&&(n*=2),l<a?-n:n}function Ki(){var a=identity,l=extent,i=sturges;function r(n){var s,f=n.length,m,C=new Array(f);for(s=0;s<f;++s)C[s]=a(n[s],s,n);var B=l(C),J=B[0],re=B[1],Ce=i(C,J,re);Array.isArray(Ce)||(Ce=tickStep(J,re,Ce),Ce=range(Math.ceil(J/Ce)*Ce,re,Ce));for(var Ge=Ce.length;Ce[0]<=J;)Ce.shift(),--Ge;for(;Ce[Ge-1]>re;)Ce.pop(),--Ge;var et=new Array(Ge+1),Je;for(s=0;s<=Ge;++s)Je=et[s]=[],Je.x0=s>0?Ce[s-1]:J,Je.x1=s<Ge?Ce[s]:re;for(s=0;s<f;++s)m=C[s],J<=m&&m<=re&&et[bisect(Ce,m,0,Ge)].push(n[s]);return et}return r.value=function(n){return arguments.length?(a=typeof n=="function"?n:constant(n),r):a},r.domain=function(n){return arguments.length?(l=typeof n=="function"?n:constant([n[0],n[1]]),r):l},r.thresholds=function(n){return arguments.length?(i=typeof n=="function"?n:Array.isArray(n)?constant(slice.call(n)):constant(n),r):i},r}function li(a,l,i){return a=map.call(a,number).sort(ascending),Math.ceil((i-l)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function di(a){return a===null?NaN:+a}function Yi(a,l,i){if(i==null&&(i=di),!!(r=a.length)){if((l=+l)<=0||r<2)return+i(a[0],0,a);if(l>=1)return+i(a[r-1],r-1,a);var r,n=(r-1)*l,s=Math.floor(n),f=+i(a[s],s,a),m=+i(a[s+1],s+1,a);return f+(m-f)*(n-s)}}function aa(a,l,i,r,n){var s=a*a,f=s*a;return((1-3*a+3*s-f)*l+(4-6*s+3*f)*i+(1+3*a+3*s-3*f)*r+f*n)/6}function $a(a){var l=a.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,l-1):Math.floor(i*l),n=a[r],s=a[r+1],f=r>0?a[r-1]:2*n-s,m=r<l-1?a[r+2]:2*s-n;return aa((i-r/l)*l,f,n,s,m)}}function xo(a){var l=a.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*l),n=a[(r+l-1)%l],s=a[r%l],f=a[(r+1)%l],m=a[(r+2)%l];return aa((i-r/l)*l,n,s,f,m)}}function Ao(a){return function(){return a}}function ja(a,l){return function(i){return a+i*l}}function Zs(a,l,i){return a=Math.pow(a,i),l=Math.pow(l,i)-a,i=1/i,function(r){return Math.pow(a+r*l,i)}}function Yo(a,l){var i=l-a;return i?ja(a,i>180||i<-180?i-360*Math.round(i/360):i):constant(isNaN(a)?l:a)}function Rs(a){return(a=+a)==1?fs:function(l,i){return i-l?Zs(l,i,a):Ao(isNaN(l)?i:l)}}function fs(a,l){var i=l-a;return i?ja(a,i):Ao(isNaN(a)?l:a)}var ks=function a(l){var i=Rs(l);function r(n,s){var f=i((n=(0,uu.B8)(n)).r,(s=(0,uu.B8)(s)).r),m=i(n.g,s.g),C=i(n.b,s.b),B=fs(n.opacity,s.opacity);return function(J){return n.r=f(J),n.g=m(J),n.b=C(J),n.opacity=B(J),n+""}}return r.gamma=a,r}(1);function Us(a){return function(l){var i=l.length,r=new Array(i),n=new Array(i),s=new Array(i),f,m;for(f=0;f<i;++f)m=(0,uu.B8)(l[f]),r[f]=m.r||0,n[f]=m.g||0,s[f]=m.b||0;return r=a(r),n=a(n),s=a(s),m.opacity=1,function(C){return m.r=r(C),m.g=n(C),m.b=s(C),m+""}}}var Js=Us($a),Ss=Us(xo),qi="$";function Ts(){}Ts.prototype=vo.prototype={constructor:Ts,has:function(a){return qi+a in this},get:function(a){return this[qi+a]},set:function(a,l){return this[qi+a]=l,this},remove:function(a){var l=qi+a;return l in this&&delete this[l]},clear:function(){for(var a in this)a[0]===qi&&delete this[a]},keys:function(){var a=[];for(var l in this)l[0]===qi&&a.push(l.slice(1));return a},values:function(){var a=[];for(var l in this)l[0]===qi&&a.push(this[l]);return a},entries:function(){var a=[];for(var l in this)l[0]===qi&&a.push({key:l.slice(1),value:this[l]});return a},size:function(){var a=0;for(var l in this)l[0]===qi&&++a;return a},empty:function(){for(var a in this)if(a[0]===qi)return!1;return!0},each:function(a){for(var l in this)l[0]===qi&&a(this[l],l.slice(1),this)}};function vo(a,l){var i=new Ts;if(a instanceof Ts)a.each(function(m,C){i.set(C,m)});else if(Array.isArray(a)){var r=-1,n=a.length,s;if(l==null)for(;++r<n;)i.set(r,a[r]);else for(;++r<n;)i.set(l(s=a[r],r,a),s)}else if(a)for(var f in a)i.set(f,a[f]);return i}var As=vo;function ra(){var a=[],l=[],i,r,n;function s(m,C,B,J){if(C>=a.length)return i!=null&&m.sort(i),r!=null?r(m):m;for(var re=-1,Ce=m.length,Ge=a[C++],et,Je,Xt=map(),cn,xn=B();++re<Ce;)(cn=Xt.get(et=Ge(Je=m[re])+""))?cn.push(Je):Xt.set(et,[Je]);return Xt.each(function(On,ur){J(xn,ur,s(On,C,B,J))}),xn}function f(m,C){if(++C>a.length)return m;var B,J=l[C-1];return r!=null&&C>=a.length?B=m.entries():(B=[],m.each(function(re,Ce){B.push({key:Ce,values:f(re,C)})})),J!=null?B.sort(function(re,Ce){return J(re.key,Ce.key)}):B}return n={object:function(m){return s(m,0,Za,Co)},map:function(m){return s(m,0,ds,hc)},entries:function(m){return f(s(m,0,ds,hc),0)},key:function(m){return a.push(m),n},sortKeys:function(m){return l[a.length-1]=m,n},sortValues:function(m){return i=m,n},rollup:function(m){return r=m,n}}}function Za(){return{}}function Co(a,l,i){a[l]=i}function ds(){return map()}function hc(a,l,i){a.set(l,i)}function kt(){}var Yn=As.prototype;kt.prototype=Nn.prototype={constructor:kt,has:Yn.has,add:function(a){return a+="",this[qi+a]=a,this},remove:Yn.remove,clear:Yn.clear,values:Yn.keys,size:Yn.size,empty:Yn.empty,each:Yn.each};function Nn(a,l){var i=new kt;if(a instanceof kt)a.each(function(s){i.add(s)});else if(a){var r=-1,n=a.length;if(l==null)for(;++r<n;)i.add(a[r]);else for(;++r<n;)i.add(l(a[r],r,a))}return i}var _i=null,Va=Array.prototype,St=Va.map,ot=Va.slice;function Wt(a,l){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(l).domain(a);break}return this}function yn(a,l){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(l).domain(a);break}return this}var qn={name:"implicit"};function sn(){var a=As(),l=[],i=[],r=qn;function n(s){var f=s+"",m=a.get(f);if(!m){if(r!==qn)return r;a.set(f,m=l.push(s))}return i[(m-1)%i.length]}return n.domain=function(s){if(!arguments.length)return l.slice();l=[],a=As();for(var f=-1,m=s.length,C,B;++f<m;)a.has(B=(C=s[f])+"")||a.set(B,l.push(C));return n},n.range=function(s){return arguments.length?(i=ot.call(s),n):i.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return sn(l,i).unknown(r)},Wt.apply(n,arguments),n}function an(){var a=ordinal().unknown(void 0),l=a.domain,i=a.range,r=[0,1],n,s,f=!1,m=0,C=0,B=.5;delete a.unknown;function J(){var re=l().length,Ce=r[1]<r[0],Ge=r[Ce-0],et=r[1-Ce];n=(et-Ge)/Math.max(1,re-m+C*2),f&&(n=Math.floor(n)),Ge+=(et-Ge-n*(re-m))*B,s=n*(1-m),f&&(Ge=Math.round(Ge),s=Math.round(s));var Je=sequence(re).map(function(Xt){return Ge+n*Xt});return i(Ce?Je.reverse():Je)}return a.domain=function(re){return arguments.length?(l(re),J()):l()},a.range=function(re){return arguments.length?(r=[+re[0],+re[1]],J()):r.slice()},a.rangeRound=function(re){return r=[+re[0],+re[1]],f=!0,J()},a.bandwidth=function(){return s},a.step=function(){return n},a.round=function(re){return arguments.length?(f=!!re,J()):f},a.padding=function(re){return arguments.length?(m=Math.min(1,C=+re),J()):m},a.paddingInner=function(re){return arguments.length?(m=Math.min(1,re),J()):m},a.paddingOuter=function(re){return arguments.length?(C=+re,J()):C},a.align=function(re){return arguments.length?(B=Math.max(0,Math.min(1,re)),J()):B},a.copy=function(){return an(l(),r).round(f).paddingInner(m).paddingOuter(C).align(B)},initRange.apply(J(),arguments)}function dn(a){var l=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return dn(l())},a}function bt(){return dn(an.apply(null,arguments).paddingInner(1))}function Qt(a,l){return(isNumberArray(l)?numberArray:Pt)(a,l)}function Pt(a,l){var i=l?l.length:0,r=a?Math.min(i,a.length):0,n=new Array(r),s=new Array(i),f;for(f=0;f<r;++f)n[f]=Si(a[f],l[f]);for(;f<i;++f)s[f]=l[f];return function(m){for(f=0;f<r;++f)s[f]=n[f](m);return s}}function Cn(a,l){var i=new Date;return a=+a,l=+l,function(r){return i.setTime(a*(1-r)+l*r),i}}function Fn(a,l){return a=+a,l=+l,function(i){return a*(1-i)+l*i}}function Ar(a,l){var i={},r={},n;(a===null||typeof a!="object")&&(a={}),(l===null||typeof l!="object")&&(l={});for(n in l)n in a?i[n]=Si(a[n],l[n]):r[n]=l[n];return function(s){for(n in i)r[n]=i[n](s);return r}}var Yr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kr=new RegExp(Yr.source,"g");function ci(a){return function(){return a}}function Wr(a){return function(l){return a(l)+""}}function Pi(a,l){var i=Yr.lastIndex=Kr.lastIndex=0,r,n,s,f=-1,m=[],C=[];for(a=a+"",l=l+"";(r=Yr.exec(a))&&(n=Kr.exec(l));)(s=n.index)>i&&(s=l.slice(i,s),m[f]?m[f]+=s:m[++f]=s),(r=r[0])===(n=n[0])?m[f]?m[f]+=n:m[++f]=n:(m[++f]=null,C.push({i:f,x:Fn(r,n)})),i=Kr.lastIndex;return i<l.length&&(s=l.slice(i),m[f]?m[f]+=s:m[++f]=s),m.length<2?C[0]?Wr(C[0].x):ci(l):(l=C.length,function(B){for(var J=0,re;J<l;++J)m[(re=C[J]).i]=re.x(B);return m.join("")})}function vi(a,l){l||(l=[]);var i=a?Math.min(l.length,a.length):0,r=l.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=a[n]*(1-s)+l[n]*s;return r}}function Mi(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Si(a,l){var i=typeof l,r;return l==null||i==="boolean"?Ao(l):(i==="number"?Fn:i==="string"?(r=(0,uu.ZP)(l))?(l=r,ks):Pi:l instanceof uu.ZP?ks:l instanceof Date?Cn:Mi(l)?vi:Array.isArray(l)?Pt:typeof l.valueOf!="function"&&typeof l.toString!="function"||isNaN(l)?Ar:Fn)(a,l)}function Ii(a,l){return a=+a,l=+l,function(i){return Math.round(a*(1-i)+l*i)}}function Qi(a){return function(){return a}}function Uo(a){return+a}var zs=[0,1];function hs(a){return a}function Ql(a,l){return(l-=a=+a)?function(i){return(i-a)/l}:Qi(isNaN(l)?NaN:.5)}function dc(a){var l=a[0],i=a[a.length-1],r;return l>i&&(r=l,l=i,i=r),function(n){return Math.max(l,Math.min(i,n))}}function xu(a,l,i){var r=a[0],n=a[1],s=l[0],f=l[1];return n<r?(r=Ql(n,r),s=i(f,s)):(r=Ql(r,n),s=i(s,f)),function(m){return s(r(m))}}function pc(a,l,i){var r=Math.min(a.length,l.length)-1,n=new Array(r),s=new Array(r),f=-1;for(a[r]<a[0]&&(a=a.slice().reverse(),l=l.slice().reverse());++f<r;)n[f]=Ql(a[f],a[f+1]),s[f]=i(l[f],l[f+1]);return function(m){var C=ai(a,m,1,r)-1;return s[C](n[C](m))}}function Du(a,l){return l.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Ff(){var a=zs,l=zs,i=Si,r,n,s,f=hs,m,C,B;function J(){return m=Math.min(a.length,l.length)>2?pc:xu,C=B=null,re}function re(Ce){return isNaN(Ce=+Ce)?s:(C||(C=m(a.map(r),l,i)))(r(f(Ce)))}return re.invert=function(Ce){return f(n((B||(B=m(l,a.map(r),Fn)))(Ce)))},re.domain=function(Ce){return arguments.length?(a=St.call(Ce,Uo),f===hs||(f=dc(a)),J()):a.slice()},re.range=function(Ce){return arguments.length?(l=ot.call(Ce),J()):l.slice()},re.rangeRound=function(Ce){return l=ot.call(Ce),i=Ii,J()},re.clamp=function(Ce){return arguments.length?(f=Ce?dc(a):hs,re):f!==hs},re.interpolate=function(Ce){return arguments.length?(i=Ce,J()):i},re.unknown=function(Ce){return arguments.length?(s=Ce,re):s},function(Ce,Ge){return r=Ce,n=Ge,J()}}function qu(a,l){return Ff()(a,l)}var qf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fh(a){if(!(l=qf.exec(a)))throw new Error("invalid format: "+a);var l;return new Ih({fill:l[1],align:l[2],sign:l[3],symbol:l[4],zero:l[5],width:l[6],comma:l[7],precision:l[8]&&l[8].slice(1),trim:l[9],type:l[10]})}fh.prototype=Ih.prototype;function Ih(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}Ih.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hp(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function hh(a,l){if((i=(a=l?a.toExponential(l-1):a.toExponential()).indexOf("e"))<0)return null;var i,r=a.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+a.slice(i+1)]}function Df(a){return a=hh(Math.abs(a)),a?a[1]:NaN}function dp(a,l){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Df(l)/3)))*3-Df(Math.abs(a)))}function pp(a,l){return function(i,r){for(var n=i.length,s=[],f=0,m=a[0],C=0;n>0&&m>0&&(C+m+1>r&&(m=Math.max(1,r-C)),s.push(i.substring(n-=m,n+m)),!((C+=m+1)>r));)m=a[f=(f+1)%a.length];return s.reverse().join(l)}}function vp(a){return function(l){return l.replace(/[0-9]/g,function(i){return a[+i]})}}function id(a){e:for(var l=a.length,i=1,r=-1,n;i<l;++i)switch(a[i]){case".":r=n=i;break;case"0":r===0&&(r=i),n=i;break;default:if(!+a[i])break e;r>0&&(r=0);break}return r>0?a.slice(0,r)+a.slice(n+1):a}var ad;function dh(a,l){var i=hh(a,l);if(!i)return a+"";var r=i[0],n=i[1],s=n-(ad=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,f=r.length;return s===f?r:s>f?r+new Array(s-f+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+hh(a,Math.max(0,l+s-1))[0]}function od(a,l){var i=hh(a,l);if(!i)return a+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var sd={"%":function(a,l){return(a*100).toFixed(l)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:hp,e:function(a,l){return a.toExponential(l)},f:function(a,l){return a.toFixed(l)},g:function(a,l){return a.toPrecision(l)},o:function(a){return Math.round(a).toString(8)},p:function(a,l){return od(a*100,l)},r:od,s:dh,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function ud(a){return a}var ld=Array.prototype.map,cd=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function gp(a){var l=a.grouping===void 0||a.thousands===void 0?ud:pp(ld.call(a.grouping,Number),a.thousands+""),i=a.currency===void 0?"":a.currency[0]+"",r=a.currency===void 0?"":a.currency[1]+"",n=a.decimal===void 0?".":a.decimal+"",s=a.numerals===void 0?ud:vp(ld.call(a.numerals,String)),f=a.percent===void 0?"%":a.percent+"",m=a.minus===void 0?"-":a.minus+"",C=a.nan===void 0?"NaN":a.nan+"";function B(re){re=fh(re);var Ce=re.fill,Ge=re.align,et=re.sign,Je=re.symbol,Xt=re.zero,cn=re.width,xn=re.comma,On=re.precision,ur=re.trim,_r=re.type;_r==="n"?(xn=!0,_r="g"):sd[_r]||(On===void 0&&(On=12),ur=!0,_r="g"),(Xt||Ce==="0"&&Ge==="=")&&(Xt=!0,Ce="0",Ge="=");var zr=Je==="$"?i:Je==="#"&&/[boxX]/.test(_r)?"0"+_r.toLowerCase():"",Ir=Je==="$"?r:/[%p]/.test(_r)?f:"",ii=sd[_r],Gi=/[defgprs%]/.test(_r);On=On===void 0?6:/[gprs]/.test(_r)?Math.max(1,Math.min(21,On)):Math.max(0,Math.min(20,On));function Hi(hi){var pa=zr,Ya=Ir,ps,gc,Bu;if(_r==="c")Ya=ii(hi)+Ya,hi="";else{hi=+hi;var Lc=hi<0||1/hi<0;if(hi=isNaN(hi)?C:ii(Math.abs(hi),On),ur&&(hi=id(hi)),Lc&&+hi==0&&et!=="+"&&(Lc=!1),pa=(Lc?et==="("?et:m:et==="-"||et==="("?"":et)+pa,Ya=(_r==="s"?cd[8+ad/3]:"")+Ya+(Lc&&et==="("?")":""),Gi){for(ps=-1,gc=hi.length;++ps<gc;)if(Bu=hi.charCodeAt(ps),48>Bu||Bu>57){Ya=(Bu===46?n+hi.slice(ps+1):hi.slice(ps))+Ya,hi=hi.slice(0,ps);break}}}xn&&!Xt&&(hi=l(hi,1/0));var dl=pa.length+hi.length+Ya.length,el=dl<cn?new Array(cn-dl+1).join(Ce):"";switch(xn&&Xt&&(hi=l(el+hi,el.length?cn-Ya.length:1/0),el=""),Ge){case"<":hi=pa+hi+Ya+el;break;case"=":hi=pa+el+hi+Ya;break;case"^":hi=el.slice(0,dl=el.length>>1)+pa+hi+Ya+el.slice(dl);break;default:hi=el+pa+hi+Ya;break}return s(hi)}return Hi.toString=function(){return re+""},Hi}function J(re,Ce){var Ge=B((re=fh(re),re.type="f",re)),et=Math.max(-8,Math.min(8,Math.floor(Df(Ce)/3)))*3,Je=Math.pow(10,-et),Xt=cd[8+et/3];return function(cn){return Ge(Je*cn)+Xt}}return{format:B,formatPrefix:J}}var ph,Rh,fd;mp({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function mp(a){return ph=gp(a),Rh=ph.format,fd=ph.formatPrefix,ph}function yp(a,l){return a=Math.abs(a),l=Math.abs(l)-a,Math.max(0,Df(l)-Df(a))+1}function _p(a){return Math.max(0,-Df(Math.abs(a)))}function bp(a,l,i,r){var n=ga(a,l,i),s;switch(r=fh(r==null?",f":r),r.type){case"s":{var f=Math.max(Math.abs(a),Math.abs(l));return r.precision==null&&!isNaN(s=dp(n,f))&&(r.precision=s),fd(r,f)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=yp(n,Math.max(Math.abs(a),Math.abs(l))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_p(n))&&(r.precision=s-(r.type==="%")*2);break}}return Rh(r)}function Qf(a){var l=a.domain;return a.ticks=function(i){var r=l();return ri(r[0],r[r.length-1],i==null?10:i)},a.tickFormat=function(i,r){var n=l();return bp(n[0],n[n.length-1],i==null?10:i,r)},a.nice=function(i){i==null&&(i=10);var r=l(),n=0,s=r.length-1,f=r[n],m=r[s],C;return m<f&&(C=f,f=m,m=C,C=n,n=s,s=C),C=ei(f,m,i),C>0?(f=Math.floor(f/C)*C,m=Math.ceil(m/C)*C,C=ei(f,m,i)):C<0&&(f=Math.ceil(f*C)/C,m=Math.floor(m*C)/C,C=ei(f,m,i)),C>0?(r[n]=Math.floor(f/C)*C,r[s]=Math.ceil(m/C)*C,l(r)):C<0&&(r[n]=Math.ceil(f*C)/C,r[s]=Math.floor(m*C)/C,l(r)),a},a}function hd(){var a=qu(hs,hs);return a.copy=function(){return Du(a,hd())},Wt.apply(a,arguments),Qf(a)}function xp(a){var l;function i(r){return isNaN(r=+r)?l:r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(a=map.call(r,number),i):a.slice()},i.unknown=function(r){return arguments.length?(l=r,i):l},i.copy=function(){return xp(a).unknown(l)},a=arguments.length?map.call(a,number):[0,1],linearish(i)}function kh(a,l){a=a.slice();var i=0,r=a.length-1,n=a[i],s=a[r],f;return s<n&&(f=i,i=r,r=f,f=n,n=s,s=f),a[i]=l.floor(n),a[r]=l.ceil(s),a}function Lh(a){return Math.log(a)}function dd(a){return Math.exp(a)}function Ep(a){return-Math.log(-a)}function Sp(a){return-Math.exp(-a)}function Tp(a){return isFinite(a)?+("1e"+a):a<0?0:a}function vh(a){return a===10?Tp:a===Math.E?Math.exp:function(l){return Math.pow(a,l)}}function Ap(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(l){return Math.log(l)/a})}function pd(a){return function(l){return-a(-l)}}function Cp(a){var l=a(Lh,dd),i=l.domain,r=10,n,s;function f(){return n=Ap(r),s=vh(r),i()[0]<0?(n=pd(n),s=pd(s),a(Ep,Sp)):a(Lh,dd),l}return l.base=function(m){return arguments.length?(r=+m,f()):r},l.domain=function(m){return arguments.length?(i(m),f()):i()},l.ticks=function(m){var C=i(),B=C[0],J=C[C.length-1],re;(re=J<B)&&(Ce=B,B=J,J=Ce);var Ce=n(B),Ge=n(J),et,Je,Xt,cn=m==null?10:+m,xn=[];if(!(r%1)&&Ge-Ce<cn){if(Ce=Math.round(Ce)-1,Ge=Math.round(Ge)+1,B>0){for(;Ce<Ge;++Ce)for(Je=1,et=s(Ce);Je<r;++Je)if(Xt=et*Je,!(Xt<B)){if(Xt>J)break;xn.push(Xt)}}else for(;Ce<Ge;++Ce)for(Je=r-1,et=s(Ce);Je>=1;--Je)if(Xt=et*Je,!(Xt<B)){if(Xt>J)break;xn.push(Xt)}}else xn=ri(Ce,Ge,Math.min(Ge-Ce,cn)).map(s);return re?xn.reverse():xn},l.tickFormat=function(m,C){if(C==null&&(C=r===10?".0e":","),typeof C!="function"&&(C=Rh(C)),m===1/0)return C;m==null&&(m=10);var B=Math.max(1,r*m/l.ticks().length);return function(J){var re=J/s(Math.round(n(J)));return re*r<r-.5&&(re*=r),re<=B?C(J):""}},l.nice=function(){return i(kh(i(),{floor:function(m){return s(Math.floor(n(m)))},ceil:function(m){return s(Math.ceil(n(m)))}}))},l}function vd(){var a=Cp(Ff()).domain([1,10]);return a.copy=function(){return Du(a,vd()).base(a.base())},Wt.apply(a,arguments),a}function gd(a){return function(l){return Math.sign(l)*Math.log1p(Math.abs(l/a))}}function md(a){return function(l){return Math.sign(l)*Math.expm1(Math.abs(l))*a}}function wp(a){var l=1,i=a(gd(l),md(l));return i.constant=function(r){return arguments.length?a(gd(l=+r),md(l)):l},linearish(i)}function Mp(){var a=wp(transformer());return a.copy=function(){return copy(a,Mp()).constant(a.constant())},initRange.apply(a,arguments)}function yd(a){return function(l){return l<0?-Math.pow(-l,a):Math.pow(l,a)}}function Op(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Pp(a){return a<0?-a*a:a*a}function gh(a){var l=a(hs,hs),i=1;function r(){return i===1?a(hs,hs):i===.5?a(Op,Pp):a(yd(i),yd(1/i))}return l.exponent=function(n){return arguments.length?(i=+n,r()):i},Qf(l)}function Fh(){var a=gh(Ff());return a.copy=function(){return Du(a,Fh()).exponent(a.exponent())},Wt.apply(a,arguments),a}function Ip(){return Fh.apply(null,arguments).exponent(.5)}function Dh(){var a=[],l=[],i=[],r;function n(){var f=0,m=Math.max(1,l.length);for(i=new Array(m-1);++f<m;)i[f-1]=Yi(a,f/m);return s}function s(f){return isNaN(f=+f)?r:l[ai(i,f)]}return s.invertExtent=function(f){var m=l.indexOf(f);return m<0?[NaN,NaN]:[m>0?i[m-1]:a[0],m<i.length?i[m]:a[a.length-1]]},s.domain=function(f){if(!arguments.length)return a.slice();a=[];for(var m=0,C=f.length,B;m<C;++m)B=f[m],B!=null&&!isNaN(B=+B)&&a.push(B);return a.sort(Lr),n()},s.range=function(f){return arguments.length?(l=ot.call(f),n()):l.slice()},s.unknown=function(f){return arguments.length?(r=f,s):r},s.quantiles=function(){return i.slice()},s.copy=function(){return Dh().domain(a).range(l).unknown(r)},Wt.apply(s,arguments)}function mh(){var a=0,l=1,i=1,r=[.5],n=[0,1],s;function f(C){return C<=C?n[ai(r,C,0,i)]:s}function m(){var C=-1;for(r=new Array(i);++C<i;)r[C]=((C+1)*l-(C-i)*a)/(i+1);return f}return f.domain=function(C){return arguments.length?(a=+C[0],l=+C[1],m()):[a,l]},f.range=function(C){return arguments.length?(i=(n=ot.call(C)).length-1,m()):n.slice()},f.invertExtent=function(C){var B=n.indexOf(C);return B<0?[NaN,NaN]:B<1?[a,r[0]]:B>=i?[r[i-1],l]:[r[B-1],r[B]]},f.unknown=function(C){return arguments.length&&(s=C),f},f.thresholds=function(){return r.slice()},f.copy=function(){return mh().domain([a,l]).range(n).unknown(s)},Wt.apply(Qf(f),arguments)}function Nh(){var a=[.5],l=[0,1],i,r=1;function n(s){return s<=s?l[ai(a,s,0,r)]:i}return n.domain=function(s){return arguments.length?(a=ot.call(s),r=Math.min(a.length,l.length-1),n):a.slice()},n.range=function(s){return arguments.length?(l=ot.call(s),r=Math.min(a.length,l.length-1),n):l.slice()},n.invertExtent=function(s){var f=l.indexOf(s);return[a[f-1],a[f]]},n.unknown=function(s){return arguments.length?(i=s,n):i},n.copy=function(){return Nh().domain(a).range(l).unknown(i)},Wt.apply(n,arguments)}var yh=new Date,_h=new Date;function Qu(a,l,i,r){function n(s){return a(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=function(s){return a(s=new Date(+s)),s},n.ceil=function(s){return a(s=new Date(s-1)),l(s,1),a(s),s},n.round=function(s){var f=n(s),m=n.ceil(s);return s-f<m-s?f:m},n.offset=function(s,f){return l(s=new Date(+s),f==null?1:Math.floor(f)),s},n.range=function(s,f,m){var C=[],B;if(s=n.ceil(s),m=m==null?1:Math.floor(m),!(s<f)||!(m>0))return C;do C.push(B=new Date(+s)),l(s,m),a(s);while(B<s&&s<f);return C},n.filter=function(s){return Qu(function(f){if(f>=f)for(;a(f),!s(f);)f.setTime(f-1)},function(f,m){if(f>=f)if(m<0)for(;++m<=0;)for(;l(f,-1),!s(f););else for(;--m>=0;)for(;l(f,1),!s(f););})},i&&(n.count=function(s,f){return yh.setTime(+s),_h.setTime(+f),a(yh),a(_h),Math.floor(i(yh,_h))},n.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(r?function(f){return r(f)%s===0}:function(f){return n.count(0,f)%s===0}):n}),n}var Bh=Qu(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,l){a.setFullYear(a.getFullYear()+l)},function(a,l){return l.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Bh.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Qu(function(l){l.setFullYear(Math.floor(l.getFullYear()/a)*a),l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,i){l.setFullYear(l.getFullYear()+i*a)})};var Nf=Bh,fv=Bh.range,Jf=Qu(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,l){a.setMonth(a.getMonth()+l)},function(a,l){return l.getMonth()-a.getMonth()+(l.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),bh=Jf,hv=Jf.range,xh=1e3,Ef=6e4,Zh=36e5,_d=864e5,bd=6048e5;function Sf(a){return Qu(function(l){l.setDate(l.getDate()-(l.getDay()+7-a)%7),l.setHours(0,0,0,0)},function(l,i){l.setDate(l.getDate()+i*7)},function(l,i){return(i-l-(i.getTimezoneOffset()-l.getTimezoneOffset())*Ef)/bd})}var Uh=Sf(0),Eh=Sf(1),Rp=Sf(2),kp=Sf(3),Bf=Sf(4),Lp=Sf(5),Fp=Sf(6),dv=Uh.range,pv=Eh.range,Xc=Rp.range,vv=kp.range,gv=Bf.range,Zf=Lp.range,ro=Fp.range,xd=Qu(function(a){a.setHours(0,0,0,0)},function(a,l){a.setDate(a.getDate()+l)},function(a,l){return(l-a-(l.getTimezoneOffset()-a.getTimezoneOffset())*Ef)/_d},function(a){return a.getDate()-1}),Ju=xd,eu=xd.range,Ed=Qu(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*xh-a.getMinutes()*Ef)},function(a,l){a.setTime(+a+l*Zh)},function(a,l){return(l-a)/Zh},function(a){return a.getHours()}),vf=Ed,mv=Ed.range,Sd=Qu(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*xh)},function(a,l){a.setTime(+a+l*Ef)},function(a,l){return(l-a)/Ef},function(a){return a.getMinutes()}),Dp=Sd,yv=Sd.range,Td=Qu(function(a){a.setTime(a-a.getMilliseconds())},function(a,l){a.setTime(+a+l*xh)},function(a,l){return(l-a)/xh},function(a){return a.getUTCSeconds()}),zh=Td,_v=Td.range,vc=Qu(function(){},function(a,l){a.setTime(+a+l)},function(a,l){return l-a});vc.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?Qu(function(l){l.setTime(Math.floor(l/a)*a)},function(l,i){l.setTime(+l+i*a)},function(l,i){return(i-l)/a}):vc};var Ad=vc,$h=vc.range;function es(a){return Qu(function(l){l.setUTCDate(l.getUTCDate()-(l.getUTCDay()+7-a)%7),l.setUTCHours(0,0,0,0)},function(l,i){l.setUTCDate(l.getUTCDate()+i*7)},function(l,i){return(i-l)/bd})}var Ls=es(0),eh=es(1),Np=es(2),Bp=es(3),Uf=es(4),Zp=es(5),Up=es(6),bv=Ls.range,zp=eh.range,Sh=Np.range,Cd=Bp.range,xv=Uf.range,$p=Zp.range,jh=Up.range,Fl=Qu(function(a){a.setUTCHours(0,0,0,0)},function(a,l){a.setUTCDate(a.getUTCDate()+l)},function(a,l){return(l-a)/_d},function(a){return a.getUTCDate()-1}),Tf=Fl,Ev=Fl.range,Vh=Qu(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,l){a.setUTCFullYear(a.getUTCFullYear()+l)},function(a,l){return l.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});Vh.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Qu(function(l){l.setUTCFullYear(Math.floor(l.getUTCFullYear()/a)*a),l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,i){l.setUTCFullYear(l.getUTCFullYear()+i*a)})};var th=Vh,Sv=Vh.range;function Gh(a){if(0<=a.y&&a.y<100){var l=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return l.setFullYear(a.y),l}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Th(a){if(0<=a.y&&a.y<100){var l=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return l.setUTCFullYear(a.y),l}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Jl(a,l,i){return{y:a,m:l,d:i,H:0,M:0,S:0,L:0}}function oo(a){var l=a.dateTime,i=a.date,r=a.time,n=a.periods,s=a.days,f=a.shortDays,m=a.months,C=a.shortMonths,B=zf(n),J=gf(n),re=zf(s),Ce=gf(s),Ge=zf(f),et=gf(f),Je=zf(m),Xt=gf(m),cn=zf(C),xn=gf(C),On={a:Lc,A:dl,b:el,B:Of,c:null,d:cl,e:cl,f:s0,g:p0,G:$f,H:i0,I:a0,j:o0,L:Yh,m:u0,M:l0,p:lp,q:lv,Q:Ud,s:zd,S:Rd,u:c0,U:f0,V:Ld,w:Fd,W:h0,x:null,X:null,y:d0,Y:v0,Z:g0,"%":Zd},ur={a:rd,A:cp,b:cv,B:fp,c:null,d:Dd,e:Dd,f:Nd,g:O0,G:I0,H:m0,I:y0,j:_0,L:Kh,m:b0,M:x0,p:Fy,q:Dy,Q:Ud,s:zd,S:E0,u:S0,U:T0,V:A0,w:C0,W:w0,x:null,X:null,y:M0,Y:P0,Z:R0,"%":Zd},_r={a:Hi,A:hi,b:pa,B:Ya,c:ps,d:Pd,e:Pd,f:t0,g:Od,G:Md,H:Id,I:Id,j:Jp,L:Xh,m:Qp,M:Wh,p:Gi,q:qp,Q:r0,s:Eu,S:e0,u:Hp,U:Wp,V:Xp,w:Gp,W:Yp,x:gc,X:Bu,y:Od,Y:Md,Z:Kp,"%":n0};On.x=zr(i,On),On.X=zr(r,On),On.c=zr(l,On),ur.x=zr(i,ur),ur.X=zr(r,ur),ur.c=zr(l,ur);function zr(ca,Io){return function(Ko){var bi=[],mc=-1,Cs=0,Fc=ca.length,Dc,uh,lg;for(Ko instanceof Date||(Ko=new Date(+Ko));++mc<Fc;)ca.charCodeAt(mc)===37&&(bi.push(ca.slice(Cs,mc)),(uh=Hh[Dc=ca.charAt(++mc)])!=null?Dc=ca.charAt(++mc):uh=Dc==="e"?" ":"0",(lg=Io[Dc])&&(Dc=lg(Ko,uh)),bi.push(Dc),Cs=mc+1);return bi.push(ca.slice(Cs,mc)),bi.join("")}}function Ir(ca,Io){return function(Ko){var bi=Jl(1900,void 0,1),mc=ii(bi,ca,Ko+="",0),Cs,Fc;if(mc!=Ko.length)return null;if("Q"in bi)return new Date(bi.Q);if("s"in bi)return new Date(bi.s*1e3+("L"in bi?bi.L:0));if(Io&&!("Z"in bi)&&(bi.Z=0),"p"in bi&&(bi.H=bi.H%12+bi.p*12),bi.m===void 0&&(bi.m="q"in bi?bi.q:0),"V"in bi){if(bi.V<1||bi.V>53)return null;"w"in bi||(bi.w=1),"Z"in bi?(Cs=Th(Jl(bi.y,0,1)),Fc=Cs.getUTCDay(),Cs=Fc>4||Fc===0?eh.ceil(Cs):eh(Cs),Cs=Tf.offset(Cs,(bi.V-1)*7),bi.y=Cs.getUTCFullYear(),bi.m=Cs.getUTCMonth(),bi.d=Cs.getUTCDate()+(bi.w+6)%7):(Cs=Gh(Jl(bi.y,0,1)),Fc=Cs.getDay(),Cs=Fc>4||Fc===0?Eh.ceil(Cs):Eh(Cs),Cs=Ju.offset(Cs,(bi.V-1)*7),bi.y=Cs.getFullYear(),bi.m=Cs.getMonth(),bi.d=Cs.getDate()+(bi.w+6)%7)}else("W"in bi||"U"in bi)&&("w"in bi||(bi.w="u"in bi?bi.u%7:"W"in bi?1:0),Fc="Z"in bi?Th(Jl(bi.y,0,1)).getUTCDay():Gh(Jl(bi.y,0,1)).getDay(),bi.m=0,bi.d="W"in bi?(bi.w+6)%7+bi.W*7-(Fc+5)%7:bi.w+bi.U*7-(Fc+6)%7);return"Z"in bi?(bi.H+=bi.Z/100|0,bi.M+=bi.Z%100,Th(bi)):Gh(bi)}}function ii(ca,Io,Ko,bi){for(var mc=0,Cs=Io.length,Fc=Ko.length,Dc,uh;mc<Cs;){if(bi>=Fc)return-1;if(Dc=Io.charCodeAt(mc++),Dc===37){if(Dc=Io.charAt(mc++),uh=_r[Dc in Hh?Io.charAt(mc++):Dc],!uh||(bi=uh(ca,Ko,bi))<0)return-1}else if(Dc!=Ko.charCodeAt(bi++))return-1}return bi}function Gi(ca,Io,Ko){var bi=B.exec(Io.slice(Ko));return bi?(ca.p=J[bi[0].toLowerCase()],Ko+bi[0].length):-1}function Hi(ca,Io,Ko){var bi=Ge.exec(Io.slice(Ko));return bi?(ca.w=et[bi[0].toLowerCase()],Ko+bi[0].length):-1}function hi(ca,Io,Ko){var bi=re.exec(Io.slice(Ko));return bi?(ca.w=Ce[bi[0].toLowerCase()],Ko+bi[0].length):-1}function pa(ca,Io,Ko){var bi=cn.exec(Io.slice(Ko));return bi?(ca.m=xn[bi[0].toLowerCase()],Ko+bi[0].length):-1}function Ya(ca,Io,Ko){var bi=Je.exec(Io.slice(Ko));return bi?(ca.m=Xt[bi[0].toLowerCase()],Ko+bi[0].length):-1}function ps(ca,Io,Ko){return ii(ca,l,Io,Ko)}function gc(ca,Io,Ko){return ii(ca,i,Io,Ko)}function Bu(ca,Io,Ko){return ii(ca,r,Io,Ko)}function Lc(ca){return f[ca.getDay()]}function dl(ca){return s[ca.getDay()]}function el(ca){return C[ca.getMonth()]}function Of(ca){return m[ca.getMonth()]}function lp(ca){return n[+(ca.getHours()>=12)]}function lv(ca){return 1+~~(ca.getMonth()/3)}function rd(ca){return f[ca.getUTCDay()]}function cp(ca){return s[ca.getUTCDay()]}function cv(ca){return C[ca.getUTCMonth()]}function fp(ca){return m[ca.getUTCMonth()]}function Fy(ca){return n[+(ca.getUTCHours()>=12)]}function Dy(ca){return 1+~~(ca.getUTCMonth()/3)}return{format:function(ca){var Io=zr(ca+="",On);return Io.toString=function(){return ca},Io},parse:function(ca){var Io=Ir(ca+="",!1);return Io.toString=function(){return ca},Io},utcFormat:function(ca){var Io=zr(ca+="",ur);return Io.toString=function(){return ca},Io},utcParse:function(ca){var Io=Ir(ca+="",!0);return Io.toString=function(){return ca},Io}}}var Hh={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,wd=/^%/,jp=/[\\^$*+?|[\]().{}]/g;function oa(a,l,i){var r=a<0?"-":"",n=(r?-a:a)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(l)+n:n)}function Vp(a){return a.replace(jp,"\\$&")}function zf(a){return new RegExp("^(?:"+a.map(Vp).join("|")+")","i")}function gf(a){for(var l={},i=-1,r=a.length;++i<r;)l[a[i].toLowerCase()]=i;return l}function Gp(a,l,i){var r=ts.exec(l.slice(i,i+1));return r?(a.w=+r[0],i+r[0].length):-1}function Hp(a,l,i){var r=ts.exec(l.slice(i,i+1));return r?(a.u=+r[0],i+r[0].length):-1}function Wp(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.U=+r[0],i+r[0].length):-1}function Xp(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.V=+r[0],i+r[0].length):-1}function Yp(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.W=+r[0],i+r[0].length):-1}function Md(a,l,i){var r=ts.exec(l.slice(i,i+4));return r?(a.y=+r[0],i+r[0].length):-1}function Od(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function Kp(a,l,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(l.slice(i,i+6));return r?(a.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function qp(a,l,i){var r=ts.exec(l.slice(i,i+1));return r?(a.q=r[0]*3-3,i+r[0].length):-1}function Qp(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.m=r[0]-1,i+r[0].length):-1}function Pd(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.d=+r[0],i+r[0].length):-1}function Jp(a,l,i){var r=ts.exec(l.slice(i,i+3));return r?(a.m=0,a.d=+r[0],i+r[0].length):-1}function Id(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.H=+r[0],i+r[0].length):-1}function Wh(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.M=+r[0],i+r[0].length):-1}function e0(a,l,i){var r=ts.exec(l.slice(i,i+2));return r?(a.S=+r[0],i+r[0].length):-1}function Xh(a,l,i){var r=ts.exec(l.slice(i,i+3));return r?(a.L=+r[0],i+r[0].length):-1}function t0(a,l,i){var r=ts.exec(l.slice(i,i+6));return r?(a.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function n0(a,l,i){var r=wd.exec(l.slice(i,i+1));return r?i+r[0].length:-1}function r0(a,l,i){var r=ts.exec(l.slice(i));return r?(a.Q=+r[0],i+r[0].length):-1}function Eu(a,l,i){var r=ts.exec(l.slice(i));return r?(a.s=+r[0],i+r[0].length):-1}function cl(a,l){return oa(a.getDate(),l,2)}function i0(a,l){return oa(a.getHours(),l,2)}function a0(a,l){return oa(a.getHours()%12||12,l,2)}function o0(a,l){return oa(1+Ju.count(Nf(a),a),l,3)}function Yh(a,l){return oa(a.getMilliseconds(),l,3)}function s0(a,l){return Yh(a,l)+"000"}function u0(a,l){return oa(a.getMonth()+1,l,2)}function l0(a,l){return oa(a.getMinutes(),l,2)}function Rd(a,l){return oa(a.getSeconds(),l,2)}function c0(a){var l=a.getDay();return l===0?7:l}function f0(a,l){return oa(Uh.count(Nf(a)-1,a),l,2)}function kd(a){var l=a.getDay();return l>=4||l===0?Bf(a):Bf.ceil(a)}function Ld(a,l){return a=kd(a),oa(Bf.count(Nf(a),a)+(Nf(a).getDay()===4),l,2)}function Fd(a){return a.getDay()}function h0(a,l){return oa(Eh.count(Nf(a)-1,a),l,2)}function d0(a,l){return oa(a.getFullYear()%100,l,2)}function p0(a,l){return a=kd(a),oa(a.getFullYear()%100,l,2)}function v0(a,l){return oa(a.getFullYear()%1e4,l,4)}function $f(a,l){var i=a.getDay();return a=i>=4||i===0?Bf(a):Bf.ceil(a),oa(a.getFullYear()%1e4,l,4)}function g0(a){var l=a.getTimezoneOffset();return(l>0?"-":(l*=-1,"+"))+oa(l/60|0,"0",2)+oa(l%60,"0",2)}function Dd(a,l){return oa(a.getUTCDate(),l,2)}function m0(a,l){return oa(a.getUTCHours(),l,2)}function y0(a,l){return oa(a.getUTCHours()%12||12,l,2)}function _0(a,l){return oa(1+Tf.count(th(a),a),l,3)}function Kh(a,l){return oa(a.getUTCMilliseconds(),l,3)}function Nd(a,l){return Kh(a,l)+"000"}function b0(a,l){return oa(a.getUTCMonth()+1,l,2)}function x0(a,l){return oa(a.getUTCMinutes(),l,2)}function E0(a,l){return oa(a.getUTCSeconds(),l,2)}function S0(a){var l=a.getUTCDay();return l===0?7:l}function T0(a,l){return oa(Ls.count(th(a)-1,a),l,2)}function Bd(a){var l=a.getUTCDay();return l>=4||l===0?Uf(a):Uf.ceil(a)}function A0(a,l){return a=Bd(a),oa(Uf.count(th(a),a)+(th(a).getUTCDay()===4),l,2)}function C0(a){return a.getUTCDay()}function w0(a,l){return oa(eh.count(th(a)-1,a),l,2)}function M0(a,l){return oa(a.getUTCFullYear()%100,l,2)}function O0(a,l){return a=Bd(a),oa(a.getUTCFullYear()%100,l,2)}function P0(a,l){return oa(a.getUTCFullYear()%1e4,l,4)}function I0(a,l){var i=a.getUTCDay();return a=i>=4||i===0?Uf(a):Uf.ceil(a),oa(a.getUTCFullYear()%1e4,l,4)}function R0(){return"+0000"}function Zd(){return"%"}function Ud(a){return+a}function zd(a){return Math.floor(+a/1e3)}var jf,$d,k0,L0,F0;D0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function D0(a){return jf=oo(a),$d=jf.format,k0=jf.parse,L0=jf.utcFormat,F0=jf.utcParse,jf}var nh=1e3,rh=nh*60,Af=rh*60,Vf=Af*24,jd=Vf*7,Vd=Vf*30,qh=Vf*365;function N0(a){return new Date(a)}function Qh(a){return a instanceof Date?+a:+new Date(+a)}function Gd(a,l,i,r,n,s,f,m,C){var B=qu(hs,hs),J=B.invert,re=B.domain,Ce=C(".%L"),Ge=C(":%S"),et=C("%I:%M"),Je=C("%I %p"),Xt=C("%a %d"),cn=C("%b %d"),xn=C("%B"),On=C("%Y"),ur=[[f,1,nh],[f,5,5*nh],[f,15,15*nh],[f,30,30*nh],[s,1,rh],[s,5,5*rh],[s,15,15*rh],[s,30,30*rh],[n,1,Af],[n,3,3*Af],[n,6,6*Af],[n,12,12*Af],[r,1,Vf],[r,2,2*Vf],[i,1,jd],[l,1,Vd],[l,3,3*Vd],[a,1,qh]];function _r(Ir){return(f(Ir)<Ir?Ce:s(Ir)<Ir?Ge:n(Ir)<Ir?et:r(Ir)<Ir?Je:l(Ir)<Ir?i(Ir)<Ir?Xt:cn:a(Ir)<Ir?xn:On)(Ir)}function zr(Ir,ii,Gi,Hi){if(Ir==null&&(Ir=10),typeof Ir=="number"){var hi=Math.abs(Gi-ii)/Ir,pa=Tn(function(Ya){return Ya[2]}).right(ur,hi);pa===ur.length?(Hi=ga(ii/qh,Gi/qh,Ir),Ir=a):pa?(pa=ur[hi/ur[pa-1][2]<ur[pa][2]/hi?pa-1:pa],Hi=pa[1],Ir=pa[0]):(Hi=Math.max(ga(ii,Gi,Ir),1),Ir=m)}return Hi==null?Ir:Ir.every(Hi)}return B.invert=function(Ir){return new Date(J(Ir))},B.domain=function(Ir){return arguments.length?re(St.call(Ir,Qh)):re().map(N0)},B.ticks=function(Ir,ii){var Gi=re(),Hi=Gi[0],hi=Gi[Gi.length-1],pa=hi<Hi,Ya;return pa&&(Ya=Hi,Hi=hi,hi=Ya),Ya=zr(Ir,Hi,hi,ii),Ya=Ya?Ya.range(Hi,hi+1):[],pa?Ya.reverse():Ya},B.tickFormat=function(Ir,ii){return ii==null?_r:C(ii)},B.nice=function(Ir,ii){var Gi=re();return(Ir=zr(Ir,Gi[0],Gi[Gi.length-1],ii))?re(kh(Gi,Ir)):B},B.copy=function(){return Du(B,Gd(a,l,i,r,n,s,f,m,C))},B}function B0(){return Wt.apply(Gd(Nf,bh,Uh,Ju,vf,Dp,zh,Ad,$d).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tv(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Nu(){var a=0,l=1,i,r,n,s,f=hs,m=!1,C;function B(J){return isNaN(J=+J)?C:f(n===0?.5:(J=(s(J)-i)*n,m?Math.max(0,Math.min(1,J)):J))}return B.domain=function(J){return arguments.length?(i=s(a=+J[0]),r=s(l=+J[1]),n=i===r?0:1/(r-i),B):[a,l]},B.clamp=function(J){return arguments.length?(m=!!J,B):m},B.interpolator=function(J){return arguments.length?(f=J,B):f},B.unknown=function(J){return arguments.length?(C=J,B):C},function(J){return s=J,i=J(a),r=J(l),n=i===r?0:1/(r-i),B}}function Cf(a,l){return l.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function Hd(){var a=Qf(Nu()(hs));return a.copy=function(){return Cf(a,Hd())},yn.apply(a,arguments)}function Z0(){var a=loggish(Nu()).domain([1,10]);return a.copy=function(){return Cf(a,Z0()).base(a.base())},initInterpolator.apply(a,arguments)}function U0(){var a=symlogish(Nu());return a.copy=function(){return Cf(a,U0()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Wd(){var a=powish(Nu());return a.copy=function(){return Cf(a,Wd()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Xd(){return Wd.apply(null,arguments).exponent(.5)}function z0(){var a=[],l=identity;function i(r){if(!isNaN(r=+r))return l((bisect(a,r)-1)/(a.length-1))}return i.domain=function(r){if(!arguments.length)return a.slice();a=[];for(var n=0,s=r.length,f;n<s;++n)f=r[n],f!=null&&!isNaN(f=+f)&&a.push(f);return a.sort(ascending),i},i.interpolator=function(r){return arguments.length?(l=r,i):l},i.copy=function(){return z0(l).domain(a)},initInterpolator.apply(i,arguments)}function Gf(){var a=0,l=.5,i=1,r,n,s,f,m,C=hs,B,J=!1,re;function Ce(Ge){return isNaN(Ge=+Ge)?re:(Ge=.5+((Ge=+B(Ge))-n)*(Ge<n?f:m),C(J?Math.max(0,Math.min(1,Ge)):Ge))}return Ce.domain=function(Ge){return arguments.length?(r=B(a=+Ge[0]),n=B(l=+Ge[1]),s=B(i=+Ge[2]),f=r===n?0:.5/(n-r),m=n===s?0:.5/(s-n),Ce):[a,l,i]},Ce.clamp=function(Ge){return arguments.length?(J=!!Ge,Ce):J},Ce.interpolator=function(Ge){return arguments.length?(C=Ge,Ce):C},Ce.unknown=function(Ge){return arguments.length?(re=Ge,Ce):re},function(Ge){return B=Ge,r=Ge(a),n=Ge(l),s=Ge(i),f=r===n?0:.5/(n-r),m=n===s?0:.5/(s-n),Ce}}function Yd(){var a=Qf(Gf()(hs));return a.copy=function(){return Cf(a,Yd())},yn.apply(a,arguments)}function $0(){var a=loggish(Gf()).domain([.1,1,10]);return a.copy=function(){return copy(a,$0()).base(a.base())},initInterpolator.apply(a,arguments)}function j0(){var a=symlogish(Gf());return a.copy=function(){return copy(a,j0()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Kd(){var a=powish(Gf());return a.copy=function(){return copy(a,Kd()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function V0(){return Kd.apply(null,arguments).exponent(.5)}function qd(a){var l,i=[];function r(n){return n==null?l:n}return r.invert=r,r.domain=r.range=function(n){return n?(i=n,n):i},r.unknown=function(n){return n?(l=n,n):l},r.copy=function(){return qd(a).unknown(l)},r}var ec,Qd,Ah,Jh=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,G0=(ec={},(0,pt.Z)(ec,te.vY.LINEAR,hd),(0,pt.Z)(ec,te.vY.POWER,Fh),(0,pt.Z)(ec,te.vY.LOG,vd),(0,pt.Z)(ec,te.vY.IDENTITY,qd),(0,pt.Z)(ec,te.vY.SEQUENTIAL,Hd),(0,pt.Z)(ec,te.vY.TIME,B0),(0,pt.Z)(ec,te.vY.QUANTILE,Dh),(0,pt.Z)(ec,te.vY.QUANTIZE,mh),(0,pt.Z)(ec,te.vY.THRESHOLD,Nh),(0,pt.Z)(ec,te.vY.CAT,sn),(0,pt.Z)(ec,te.vY.DIVERGING,Yd),ec),H0=(Qd=(0,ft.b2)(),Qd(Ah=function(){function a(){(0,Kn.Z)(this,a),(0,pt.Z)(this,"scaleOptions",{})}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=this,s=r.styleAttributeService;i.hooks.init.tapPromise("FeatureScalePlugin",(0,We.Z)(Ze().mark(function f(){var m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(i.log(te.Or.ScaleInitStart,te.KD.INIT),n.scaleOptions=i.getScaleOptions(),C=s.getLayerStyleAttributes(),B=(m=i.getSource())===null||m===void 0?void 0:m.data.dataArray,!(Array.isArray(B)&&B.length===0)){re.next=8;break}return re.abrupt("return");case 8:n.caculateScalesForAttributes(C||[],B);case 9:i.log(te.Or.ScaleInitEnd,te.KD.INIT);case 10:case"end":return re.stop()}},f)}))),i.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var f=(0,We.Z)(Ze().mark(function m(C){var B,J;return Ze().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(C){Ce.next=2;break}return Ce.abrupt("return",C);case 2:if(i.log(te.Or.ScaleInitStart,te.KD.UPDATE),n.scaleOptions=i.getScaleOptions(),B=s.getLayerStyleAttributes(),J=i.getSource().data.dataArray,!(Array.isArray(J)&&J.length===0)){Ce.next=8;break}return Ce.abrupt("return",!0);case 8:return n.caculateScalesForAttributes(B||[],J),i.log(te.Or.ScaleInitEnd,te.KD.UPDATE),i.layerModelNeedUpdate=!0,Ce.abrupt("return",!0);case 12:case"end":return Ce.stop()}},m)}));return function(m){return f.apply(this,arguments)}}()),i.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!i.layerModelNeedUpdate){n.scaleOptions=i.getScaleOptions();var f=s.getLayerStyleAttributes(),m=i.getSource().data.dataArray;if(!(Array.isArray(m)&&m.length===0)&&f){var C=f.filter(function(B){return B.needRescale});C.length&&n.caculateScalesForAttributes(C,m)}}})}},{key:"isNumber",value:function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},{key:"caculateScalesForAttributes",value:function(i,r){var n=this;i.forEach(function(s){if(s.scale){var f=s.scale;f.names=n.parseFields(s.scale.field||[]);var m=[];f.names.forEach(function(C){var B;m.push(n.createScale(C,s.name,(B=s.scale)===null||B===void 0?void 0:B.values,r))}),m.some(function(C){return C.type===te.ee.VARIABLE})?(f.type=te.ee.VARIABLE,m.forEach(function(C){if(!f.callback&&f.values!=="text"){var B;switch((B=C.option)===null||B===void 0?void 0:B.type){case te.vY.LOG:case te.vY.LINEAR:case te.vY.POWER:if(f.values&&f.values.length>2){var J=C.scale.ticks(f.values.length);C.scale.domain(J)}f.values?C.scale.range(f.values):C.scale.range(C.option.domain);break;case te.vY.QUANTILE:case te.vY.QUANTIZE:case te.vY.THRESHOLD:C.scale.range(f.values);break;case te.vY.IDENTITY:break;case te.vY.CAT:f.values?C.scale.range(f.values):C.scale.range(C.option.domain);break;case te.vY.DIVERGING:case te.vY.SEQUENTIAL:C.scale.interpolator(Js(f.values));break}}if(f.values==="text"){var re;C.scale.range((re=C.option)===null||re===void 0?void 0:re.domain)}})):(f.type=te.ee.CONSTANT,f.defaultValues=m.map(function(C,B){return C.scale(f.names[B])})),f.scalers=m.map(function(C){return{field:C.field,func:C.scale,option:C.option}}),s.needRescale=!1}})}},{key:"parseFields",value:function(i){return Array.isArray(i)?i:(0,He.isString)(i)?i.split("*"):[i]}},{key:"createScale",value:function(i,r,n,s){var f,m,C=this.scaleOptions[r]&&((f=this.scaleOptions[r])===null||f===void 0?void 0:f.field)===i?this.scaleOptions[r]:this.scaleOptions[i],B={field:i,scale:void 0,type:te.ee.VARIABLE,option:C};if(!s||!s.length)return C&&C.type?B.scale=this.createDefaultScale(C):(B.scale=sn([i]),B.type=te.ee.CONSTANT),B;var J=(m=s.find(function(Ge){return!(0,He.isNil)(Ge[i])}))===null||m===void 0?void 0:m[i];if(this.isNumber(i)||(0,He.isNil)(J)&&!C)B.scale=sn([i]),B.type=te.ee.CONSTANT;else{var re=C&&C.type||this.getDefaultType(J);n==="text"&&(re=te.vY.CAT);var Ce=this.createScaleConfig(re,i,C,s);B.scale=this.createDefaultScale(Ce),B.option=Ce}return B}},{key:"getDefaultType",value:function(i){var r=te.vY.LINEAR;return typeof i=="string"&&(r=Jh.test(i)?te.vY.TIME:te.vY.CAT),r}},{key:"createScaleConfig",value:function(i,r,n,s){var f={type:i},m=(s==null?void 0:s.map(function(J){return J[r]}))||[];if(n!=null&&n.domain)f.domain=n==null?void 0:n.domain;else if(i===te.vY.CAT||i===te.vY.IDENTITY)f.domain=(0,He.uniq)(m);else if(i===te.vY.QUANTILE)f.domain=m;else if(i===te.vY.DIVERGING){var C=oi(m),B=(n==null?void 0:n.neutral)!==void 0?n==null?void 0:n.neutral:(C[0]+C[1])/2;f.domain=[C[0],B,C[1]]}else f.domain=oi(m);return(0,be.Z)((0,be.Z)({},f),n)}},{key:"createDefaultScale",value:function(i){var r=i.type,n=i.domain,s=i.unknown,f=i.clamp,m=i.nice,C=G0[r]();return n&&C.domain&&C.domain(n),s&&C.unknown(s),f!==void 0&&C.clamp&&C.clamp(f),m!==void 0&&C.nice&&C.nice(m),C}}]),a}())||Ah),Jd,ep,W0=(Jd=(0,ft.b2)(),Jd(ep=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){i.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var r=i.animateStatus;r&&i.models.forEach(function(n){n.addUniforms((0,be.Z)({},i.layerModel.getAnimateUniforms()))})})}}]),a}())||ep),tp,np,X0=(tp=(0,ft.b2)(),tp(np=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){i.hooks.afterInit.tap("LayerMaskPlugin",function(){var r=i.getLayerConfig(),n=r.maskLayers,s=r.enableMask;if(!i.tileLayer&&n&&n.length>0){var f;(f=i.masks).push.apply(f,(0,Ae.Z)(n)),i.updateLayerConfig({mask:s})}})}}]),a}())||np),Y0=function(){function a(l){var i=l.rendererService,r=l.layerService,n=l.parent;(0,Kn.Z)(this,a),(0,pt.Z)(this,"tileResource",new Map),(0,pt.Z)(this,"layerTiles",[]),this.rendererService=i,this.layerService=r,this.parent=n}return(0,Gn.Z)(a,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(i){return this.layerTiles.some(function(r){return r.key===i})}},{key:"addTile",value:function(i){this.layerTiles.push(i)}},{key:"getTile",value:function(i){return this.layerTiles.find(function(r){return r.key===i})}},{key:"getVisibleTileBylngLat",value:function(i){return this.layerTiles.find(function(r){return r.isLoaded&&r.visible&&r.lnglatInBounds(i)})}},{key:"removeTile",value:function(i){var r=this.layerTiles.findIndex(function(s){return s.key===i}),n=this.layerTiles.splice(r,1);n[0]&&n[0].destroy()}},{key:"updateTileVisible",value:function(i){var r=this.getTile(i.key);r==null||r.updateVisible(i.isVisible)}},{key:"isParentLoaded",value:function(i){var r=i.parent;if(!r)return!0;var n=this.getTile(r==null?void 0:r.key);return!!(n!=null&&n.isLoaded)}},{key:"isChildrenLoaded",value:function(i){var r=this,n=i==null?void 0:i.children;return n.length===0?!0:n.some(function(s){var f=r.getTile(s==null?void 0:s.key);return(f==null?void 0:f.isLoaded)===!1})}},{key:"render",value:function(){var l=(0,We.Z)(Ze().mark(function r(){var n=this,s,f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:s=this.getRenderLayers(),f=s.map(function(){var B=(0,We.Z)(Ze().mark(function J(re){return Ze().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.next=2,n.layerService.renderTileLayer(re);case 2:case"end":return Ge.stop()}},J)}));return function(J){return B.apply(this,arguments)}}()),Promise.all(f);case 3:case"end":return C.stop()}},r,this)}));function i(){return l.apply(this,arguments)}return i}()},{key:"getRenderLayers",value:function(){var i=this.layerTiles.filter(function(n){return n.visible&&n.isLoaded}),r=[];return i.map(function(n){return r.push.apply(r,(0,Ae.Z)(n.getLayers()))}),r}},{key:"getLayers",value:function(){var i=this.layerTiles.filter(function(n){return n.isLoaded}),r=[];return i.map(function(n){return r.push.apply(r,(0,Ae.Z)(n.getLayers()))}),r}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(i){return i.destroy()}),this.tileResource.clear()}}]),a}(),K0=y(32676);function q0(a,l,i){i===void 0&&(i={});var r=lt(a),n=lt(l),s=K0.union(r.coordinates,n.coordinates);return s.length===0?null:s.length===1?(0,V.yu)(s[0],i.properties):(0,V.tw)(s,i.properties)}var Q0=q0,J0=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"getCombineFeature",value:function(i){var r=null,n=i[0];return i.map(function(s){var f=V.yu(s.coordinates);r===null?r=f:r=Q0(r,f)}),n&&(r.properties=(0,be.Z)({},n)),r}}]),a}(),ih="select",ah="active",ev=function(){function a(l){var i=l.layerService,r=l.tileLayerService,n=l.parent;(0,Kn.Z)(this,a),(0,pt.Z)(this,"tilePickID",new Map),this.layerService=i,this.tileLayerService=r,this.parent=n,this.tileSourceService=new J0}return(0,Gn.Z)(a,[{key:"pickRender",value:function(i){var r=this.tileLayerService.getVisibleTileBylngLat(i.lngLat);if(r){var n=r.getMainLayer();n==null||n.layerPickService.pickRender(i)}}},{key:"pick",value:function(i,r){var n=this.parent.getContainer(),s=n.get(te.vK.IPickingService);if(i.type==="RasterLayer"){var f=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(f&&f.getMainLayer()!==void 0){var m=f.getMainLayer();return m.layerPickService.pickRasterLayer(m,r,this.parent)}return!1}return this.pickRender(r),s.pickFromPickingFBO(i,r)}},{key:"selectFeature",value:function(i){var r=(0,qr.Z)(i,3),n=r[0],s=r[1],f=r[2],m=this.color2PickId(n,s,f);this.tilePickID.set(ih,m),this.updateHighLight(n,s,f,ih)}},{key:"highlightPickedFeature",value:function(i){var r=(0,qr.Z)(i,3),n=r[0],s=r[1],f=r[2],m=this.color2PickId(n,s,f);this.tilePickID.set(ah,m),this.updateHighLight(n,s,f,ah)}},{key:"updateHighLight",value:function(i,r,n,s){this.tileLayerService.tiles.map(function(f){var m=f.getMainLayer();switch(s){case ih:m==null||m.hooks.beforeSelect.call([i,r,n]);break;case ah:m==null||m.hooks.beforeHighlight.call([i,r,n]);break}})}},{key:"setPickState",value:function(){var i=this.tilePickID.get(ih),r=this.tilePickID.get(ah);if(i){var n=this.pickId2Color(i),s=(0,qr.Z)(n,3),f=s[0],m=s[1],C=s[2];this.updateHighLight(f,m,C,ih);return}if(r){var B=this.pickId2Color(r),J=(0,qr.Z)(B,3),re=J[0],Ce=J[1],Ge=J[2];this.updateHighLight(re,Ce,Ge,ah);return}}},{key:"color2PickId",value:function(i,r,n){return(0,pe.W0)(new Uint8Array([i,r,n]))}},{key:"pickId2Color",value:function(i){return(0,pe.Z6)(i)}},{key:"getFeatureById",value:function(i){var r=this.tileLayerService.getTiles().filter(function(s){return s.visible}),n=[];return r.forEach(function(s){n.push.apply(n,(0,Ae.Z)(s.getFeatureById(i)))}),n}},{key:"pickRasterLayer",value:function(i,r,n){return!1}}]),a}(),tv=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask"];function nv(a){var l=rv();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function rv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var iv=`
uniform float u_opacity;

varying vec4 v_dash_array;
varying vec4 v_color;

uniform float segmentNumber;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;

  float flag = 0.;
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    flag = 1.;
  };
  gl_FragColor.a *=flag;
  
  gl_FragColor = filterColor(gl_FragColor);
}`,av=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;


uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  vec2 s = source;
  vec2 t = target;
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;

  styleMappingMat[3].b = segmentIndex / segmentNumber;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  gl_PointSize = 5.0;
  setPickingColor(a_PickingColor);
}
`,h=`
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  
  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = styleMappingMat[3].g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = styleMappingMat[3].a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
}`,T=`#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  float arcThetaOffset = styleMappingMat[0][1];
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
     styleMappingMat[3].g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,U=`#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}`,Ee=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,qe={solid:0,dash:1},Et=function(a){(0,er.Z)(i,a);var l=nv(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.lineType,Ce=re===void 0?"solid":re,Ge=n.dashArray,et=Ge===void 0?[10,5]:Ge,Je=n.forward,Xt=Je===void 0?!0:Je,cn=n.lineTexture,xn=cn===void 0?!1:cn,On=n.iconStep,ur=On===void 0?100:On,_r=n.segmentNumber,zr=_r===void 0?30:_r,Ir=n.thetaOffset,ii=Ir===void 0?.314:Ir;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,thetaOffset:ii})){this.judgeStyleAttributes({opacity:f,thetaOffset:ii});var Gi=this.layer.getEncodedData(),Hi=this.calDataFrame(this.cellLength,Gi,this.cellProperties),hi=Hi.data,pa=Hi.width,Ya=Hi.height;this.rowCount=Ya,this.dataTexture=this.cellLength>0&&hi.length>0?this.createTexture2D({flipY:!0,data:hi,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:pa,height:Ya}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}et.length===2&&et.push(0,0);var ps=0,gc=[0,0,0,0],Bu=[0,0,0,0];return m&&C&&(gc=(0,pe.CI)(m),Bu=(0,pe.CI)(C),ps=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:(0,He.isNumber)(ii)?ii:0,u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J==="normal"?0:1,segmentNumber:zr,u_line_type:qe[Ce||"solid"],u_dash_array:et,u_blur:.9,u_lineDir:Xt?1:-1,u_texture:this.texture,u_line_texture:xn?1:0,u_icon_step:ur,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ps,u_sourceColor:gc,u_targetColor:Bu}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.sourceColor,f=n.targetColor,m=n.lineType;return m==="dash"?{frag:iv,vert:av,type:"Dash"}:s&&f?{frag:U,vert:Ee,type:"Linear"}:{frag:h,vert:T,type:""}}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return f=this.layer.getLayerConfig(),m=f.segmentNumber,C=m===void 0?30:m,B=this.getShaders(),J=B.frag,re=B.vert,Ce=B.type,Je.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+Ce,vertexShader:re,fragmentShader:J,triangulation:ku,depth:{enable:!1},segmentNumber:C});case 4:return Ge=Je.sent,Je.abrupt("return",[Ge]);case 6:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(f,m,C){return[C[3],C[4],C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j);function rn(a){var l=_n();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function _n(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Vn=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Nr=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Br=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Jr=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Bi={solid:0,dash:1},la=function(a){(0,er.Z)(i,a);var l=rn(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.lineType,Ce=re===void 0?"solid":re,Ge=n.dashArray,et=Ge===void 0?[10,5]:Ge,Je=n.lineTexture,Xt=Je===void 0?!1:Je,cn=n.iconStep,xn=cn===void 0?100:cn,On=n.segmentNumber,ur=On===void 0?30:On,_r=n.globalArcHeight,zr=_r===void 0?10:_r;et.length===2&&et.push(0,0);var Ir=0,ii=[0,0,0,0],Gi=[0,0,0,0];if(m&&C&&(ii=(0,pe.CI)(m),Gi=(0,pe.CI)(C),Ir=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var Hi=this.layer.getEncodedData(),hi=this.calDataFrame(this.cellLength,Hi,this.cellProperties),pa=hi.data,Ya=hi.width,ps=hi.height;this.rowCount=ps,this.dataTexture=this.cellLength>0&&pa.length>0?this.createTexture2D({flipY:!0,data:pa,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:Ya,height:ps}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:ba,u_global_height:zr,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J==="normal"?0:1,segmentNumber:ur,u_line_type:Bi[Ce]||0,u_dash_array:et,u_texture:this.texture,u_line_texture:Xt?1:0,u_icon_step:xn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Ir,u_sourceColor:ii,u_targetColor:Gi}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.sourceColor,f=n.targetColor;return s&&f?{frag:Br,vert:Jr,type:"Linear"}:{frag:Vn,vert:Nr,type:""}}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return f=this.layer.getLayerConfig(),m=f.segmentNumber,C=m===void 0?30:m,B=this.getShaders(),J=B.frag,re=B.vert,Ce=B.type,Je.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+Ce,vertexShader:re,fragmentShader:J,triangulation:ku,segmentNumber:C});case 4:return Ge=Je.sent,Je.abrupt("return",[Ge]);case 6:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(f,m,C){return[C[3],C[4],C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j);function Fa(a){var l=uo();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function uo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Da=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Eo=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,wo=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,tc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,fl={solid:0,dash:1},nc=function(a){(0,er.Z)(i,a);var l=Fa(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.lineType,Ce=re===void 0?"solid":re,Ge=n.dashArray,et=Ge===void 0?[10,5]:Ge,Je=n.lineTexture,Xt=Je===void 0?!1:Je,cn=n.iconStep,xn=cn===void 0?100:cn,On=n.segmentNumber,ur=On===void 0?30:On,_r=n.globalArcHeight,zr=_r===void 0?10:_r;et.length===2&&et.push(0,0);var Ir=0,ii=[0,0,0,0],Gi=[0,0,0,0];if(m&&C&&(ii=(0,pe.CI)(m),Gi=(0,pe.CI)(C),Ir=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var Hi=this.layer.getEncodedData(),hi=this.calDataFrame(this.cellLength,Hi,this.cellProperties),pa=hi.data,Ya=hi.width,ps=hi.height;this.rowCount=ps,this.dataTexture=this.cellLength>0&&pa.length>0?this.createTexture2D({flipY:!0,data:pa,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:Ya,height:ps}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:ba,u_global_height:zr,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J==="normal"?0:1,segmentNumber:ur,u_line_type:fl[Ce]||0,u_dash_array:et,u_texture:this.texture,u_line_texture:Xt?1:0,u_icon_step:xn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Ir,u_sourceColor:ii,u_targetColor:Gi}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.sourceColor,f=n.targetColor;return s&&f?{frag:wo,vert:tc,type:"Linear"}:{frag:Da,vert:Eo,type:""}}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return f=this.layer.getLayerConfig(),m=f.segmentNumber,C=m===void 0?30:m,B=this.getShaders(),J=B.frag,re=B.vert,Ce=B.type,Je.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+Ce,vertexShader:re,fragmentShader:J,triangulation:ku,depth:{enable:!0},segmentNumber:C});case 4:return Ge=Je.sent,Je.abrupt("return",[Ge]);case 6:case"end":return Je.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(f,m,C){return[C[3],C[4],C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j);function Ys(a){var l=kc();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function kc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cf=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0;
  float d_segmentIndex = styleMappingMat[3].g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = gl_FragColor.a/opacity;
    }

    float v = styleMappingMat[3].a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,rp=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  styleMappingMat[3].g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,dg={solid:0,dash:1},pg=function(a){(0,er.Z)(i,a);var l=Ys(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.lineType,Ce=re===void 0?"solid":re,Ge=n.dashArray,et=Ge===void 0?[10,5]:Ge,Je=n.lineTexture,Xt=Je===void 0?!1:Je,cn=n.iconStep,xn=cn===void 0?100:cn,On=n.segmentNumber,ur=On===void 0?30:On;et.length===2&&et.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var _r=0,zr=[0,0,0,0],Ir=[0,0,0,0];if(m&&C&&(zr=(0,pe.CI)(m),Ir=(0,pe.CI)(C),_r=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var ii=this.layer.getEncodedData(),Gi=this.calDataFrame(this.cellLength,ii,this.cellProperties),Hi=Gi.data,hi=Gi.width,pa=Gi.height;this.rowCount=pa,this.dataTexture=this.cellLength>0&&Hi.length>0?this.createTexture2D({flipY:!0,data:Hi,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:hi,height:pa}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J==="normal"?0:1,segmentNumber:ur,u_line_type:dg[Ce]||0,u_dash_array:et,u_texture:this.texture,u_line_texture:Xt?1:0,u_icon_step:xn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:_r,u_sourceColor:zr,u_targetColor:Ir}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:rp,fragmentShader:cf,triangulation:ku,depth:{enable:!1}});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(f,m,C){return[C[3],C[4],C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j);function vg(a){var l=gg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function gg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var mg=`#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
uniform float u_CoordinateSystem;
varying vec4 v_color;
uniform float u_arrow: 0.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

varying mat4 styleMappingMat;
void main() {
  float distanceAndIndex = styleMappingMat[0][3];
  float miter = styleMappingMat[0][2];

  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B


  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { 
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap
        discard;
      }
    } else { // amap2 mapbox map
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { 
        discard;
      }
    }
  } else { // line body
    if(miter < 0.0) {
      discard;
    }
  }


  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,yg=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute vec4 a_dirPoints;
attribute vec3 a_DistanceAndIndex;

uniform vec4 u_lineDir;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex
    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );
  styleMappingMat[0][3] = a_DistanceAndIndex.y;
  styleMappingMat[0][2] = a_Miter;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97


  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  // styleMappingMat[1].rg = a_Position.xy + offset;

  vec2 copyOffset = vec2(offset.x, offset.y);

  float lineDistance = a_DistanceAndIndex.x;
  float total_Distance = a_DistanceAndIndex.z;
  float currentLinePointRatio = lineDistance / total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z); // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }
  
  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {
    vec2 startPoint = a_dirPoints.rg;
    vec2 endPoint = a_dirPoints.ba;
    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));
    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));
    // TODO\uFF1A \u540E\u7EED\u4F18\u5316\u53EF\u4EE5\u628A\u4F4D\u7F6E\u8BA1\u7B97\u653E\u5728 cpu \u4E2D\u5B8C\u6210
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    } else {
      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    }
  }

  setPickingColor(a_PickingColor);
}
`,_g=function(a){(0,er.Z)(i,a);var l=vg(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.arrow,J=B===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:B,re=0,Ce=[0,0,0,0],Ge=[0,0,0,0];if(m&&C&&(Ce=(0,pe.CI)(m),Ge=(0,pe.CI)(C),re=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var et=this.layer.getEncodedData(),Je=this.calDataFrame(this.cellLength,et,this.cellProperties),Xt=Je.data,cn=Je.width,xn=Je.height;this.rowCount=xn,this.dataTexture=this.cellLength>0&&Xt.length>0?this.createTexture2D({flipY:!0,data:Xt,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:cn,height:xn}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_linearColor:re,u_sourceColor:Ce,u_targetColor:Ge,u_arrow:Number(J.enable),u_arrowHeight:J.arrowHeight||3,u_arrowWidth:J.arrowWidth||2,u_tailWidth:J.tailWidth===void 0?1:J.tailWidth}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce;return Ze().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return f=this.layer.getLayerConfig(),m=f.depth,C=m===void 0?!1:m,B=this.getShaders(),J=B.frag,re=B.vert,this.layer.triangulation=ju,et.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:re,fragmentShader:J,triangulation:ju,depth:{enable:C}});case 5:return Ce=et.sent,et.abrupt("return",[Ce]);case 7:case"end":return et.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getShaders",value:function(){return{frag:mg,vert:yg,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C,B,J){return J===void 0?[m[3],10,m[5]]:[m[3],J,m[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:te.GC.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(s){var f=s.coordinates[0]||[0,0],m=s.coordinates[3]||[0,0];return[f[0],f[1],m[0],m[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s){var f=s.size,m=f===void 0?1:f;return Array.isArray(m)?[m[0],m[1]]:[m,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C,B){return B}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s,f,m){return[m[4]]}}})}}]),i}(j);function bg(a){var l=xg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function xg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Eg=`uniform float u_opacity : 1.0;
uniform sampler2D u_texture;
uniform float u_linearDir: 1.0;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,Sg=`
attribute float a_Miter;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

uniform float u_opacity: 1.0;

#pragma include "projection"
#pragma include "picking"

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Tg=function(a){(0,er.Z)(i,a);var l=bg(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;r.colorTexture&&r.colorTexture.destroy();var C=r.layer.getLayerConfig(),B=C.rampColors,J=(0,pe.Cl)(B);r.colorTexture=m({data:new Uint8Array(J.data),width:J.width,height:J.height,wrapS:te.gl.CLAMP_TO_EDGE,wrapT:te.gl.CLAMP_TO_EDGE,min:te.gl.NEAREST,mag:te.gl.NEAREST,flipY:!1})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.vertexHeightScale,C=m===void 0?20:m,B=n.raisingHeight,J=B===void 0?0:B,re=n.heightfixed,Ce=re===void 0?!1:re,Ge=n.linearDir,et=Ge===void 0?Re.VERTICAL:Ge;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var Je=this.layer.getEncodedData(),Xt=this.calDataFrame(this.cellLength,Je,this.cellProperties),cn=Xt.data,xn=Xt.width,On=Xt.height;this.rowCount=On,this.dataTexture=this.cellLength>0&&cn.length>0?this.createTexture2D({flipY:!0,data:cn,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:xn,height:On}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:et===Re.VERTICAL?1:0,u_opacity:(0,He.isNumber)(f)?f:1,u_texture:this.colorTexture,u_heightfixed:Number(Ce),u_vertexScale:C,u_raisingHeight:Number(J)}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),m.abrupt("return",this.buildModels());case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;(n=this.colorTexture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy()}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.layer.getLayerConfig(),m=f.depth,C=m===void 0?!1:m,this.layer.triangulation=ju,re.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:Sg,fragmentShader:Eg,triangulation:ju,depth:{enable:C}});case 4:return B=re.sent,re.abrupt("return",[B]);case 6:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m,C,B,J){return J===void 0?[m[3],10]:[m[3],J]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s,f,m){return[m[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s){var f=s.size,m=f===void 0?1:f;return Array.isArray(m)?[m[0],m[1]]:[m,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C,B){return B}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s,f,m){return[m[4]]}}})}}]),i}(j);function Ag(a){var l=Cg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Cg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var wg=`
varying vec4 v_color;
varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,Mg=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];

  // styleMappingMat[3][0] \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,Av=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;

attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"

varying vec4 v_color;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  v_color = a_Color; 
  styleMappingMat[3][0] = a_Distance / a_Total_Distance;

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,Og=function(a){(0,er.Z)(i,a);var l=Ag(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.vertexHeightScale,J=B===void 0?20:B,re=0,Ce=[0,0,0,0],Ge=[0,0,0,0];if(m&&C&&(Ce=(0,pe.CI)(m),Ge=(0,pe.CI)(C),re=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f})){this.judgeStyleAttributes({opacity:f});var et=this.layer.getEncodedData(),Je=this.calDataFrame(this.cellLength,et,this.cellProperties),Xt=Je.data,cn=Je.width,xn=Je.height;this.rowCount=xn,this.dataTexture=this.cellLength>0&&Xt.length>0?this.createTexture2D({flipY:!0,data:Xt,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:cn,height:xn}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_linearColor:re,u_sourceColor:Ce,u_targetColor:Ge,u_vertexScale:J}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"getShaders",value:function(){var n=this.layer.getLayerConfig(),s=n.sourceColor,f=n.targetColor;return s&&f?{frag:Mg,vert:Av,type:"lineSimpleLinear"}:{frag:wg,vert:Av,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J;return Ze().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return f=this.getShaders(),m=f.frag,C=f.vert,B=f.type,Ce.next=3,this.layer.buildLayerModel({moduleName:B,vertexShader:C,fragmentShader:m,triangulation:us,primitive:te.gl.LINES,depth:{enable:!1},pick:!1});case 3:return J=Ce.sent,Ce.abrupt("return",[J]);case 5:case"end":return Ce.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:te.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s,f,m){return[m[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s,f,m){return[m[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s){var f=s.size,m=f===void 0?1:f;return Array.isArray(m)?[m[0],m[1]]:[m,0]}}})}}]),i}(j);function Pg(a){var l=Ig();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ig(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rg=`#define Animate 0.0
#define LineTexture 1.0

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying vec2 v_iconMapUV;
varying float v_blur;
varying float v_radio;
varying vec4 v_color;
varying vec4 v_dataset;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,kg=`#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;
uniform float u_linearColor: 0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;
varying vec4 v_color;
varying float v_blur;
varying float v_radio;
varying vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Lg=function(a){(0,er.Z)(i,a);var l=Pg(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.NEAREST,min:te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.sourceColor,C=n.targetColor,B=n.textureBlend,J=B===void 0?"normal":B,re=n.heightfixed,Ce=re===void 0?!1:re,Ge=n.lineTexture,et=Ge===void 0?!1:Ge,Je=n.iconStep,Xt=Je===void 0?100:Je,cn=n.iconStepCount,xn=cn===void 0?1:cn;this.rendererService.getDirty()&&this.texture.bind();var On=0,ur=[0,0,0,0],_r=[0,0,0,0];return m&&C&&(ur=(0,pe.CI)(m),_r=(0,pe.CI)(C),On=1),{u_heightfixed:Number(Ce),u_opacity:(0,He.isNumber)(f)?f:1,u_textureBlend:J==="normal"?0:1,u_texture:this.texture,u_line_texture:et?1:0,u_iconStepCount:xn,u_icon_step:Xt,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:On,u_sourceColor:ur,u_targetColor:_r}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption;return{u_animate:this.animateOption2Array(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.texture)===null||n===void 0||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:kg,fragmentShader:Rg,triangulation:ju,depth:{enable:!1},blend:this.getBlend()});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:te.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f,m,C){return[C[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f,m,C){return[C[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=f.size,C=m===void 0?1:m;return Array.isArray(C)?[C[0],C[1]]:[C,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(f,m,C,B,J){return J}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f,m,C){return[C[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.texture,B=m[C]||{x:0,y:0},J=B.x,re=B.y;return[J,re]}}})}}]),i}(j),Fg={arc:Et,arc3d:la,greatcircle:pg,wall:Lg,line:wa,halfLine:_g,simple:Og,linearline:Tg,earthArc3d:nc},Dg=Fg;function Ng(a){var l=Bg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Bg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Cv=function(a){(0,er.Z)(i,a);var l=Ng(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","LineLayer"),(0,pt.Z)((0,$t.Z)(r),"arrowInsertCount",0),(0,pt.Z)((0,$t.Z)(r),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel=new Dg[f](this),C.next=4,this.initLayerModels();case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getDefaultConfig",value:function(){var n=this.getModelType(),s={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return s[n]}},{key:"getModelType",value:function(){var n;if(this.layerType)return this.layerType;var s=this.styleAttributeService.getLayerStyleAttribute("shape"),f=s==null||(n=s.scale)===null||n===void 0?void 0:n.field;return f||"line"}},{key:"processData",value:function(n){if(this.getModelType()!=="simple")return n;var s=[];return n.map(function(f){if(Array.isArray(f.coordinates)&&Array.isArray(f.coordinates[0])&&Array.isArray(f.coordinates[0][0])){var m=(0,be.Z)({},f);f.coordinates.map(function(C){s.push((0,be.Z)((0,be.Z)({},m),{},{coordinates:C}))})}else s.push(f)}),s}}]),i}(Zo);function Zg(a){var l=Ug();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ug(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zg=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,$g=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,jg=function(a){(0,er.Z)(i,a);var l=Zg(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"raiseCount",0),(0,pt.Z)((0,$t.Z)(r),"raiseRepeat",0),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption,f=s===void 0?{enable:!1,speed:.01,repeat:!1}:s,m=n.opacity,C=m===void 0?1:m,B=n.sourceColor,J=n.targetColor,re=n.pickLight,Ce=re===void 0?!1:re,Ge=n.heightfixed,et=Ge===void 0?!1:Ge,Je=n.opacityLinear,Xt=Je===void 0?{enable:!1,dir:"up"}:Je,cn=n.lightEnable,xn=cn===void 0?!0:cn;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:C})){this.judgeStyleAttributes({opacity:C});var On=this.layer.getEncodedData(),ur=this.calDataFrame(this.cellLength,On,this.cellProperties),_r=ur.data,zr=ur.width,Ir=ur.height;this.rowCount=Ir,this.dataTexture=this.cellLength>0&&_r.length>0?this.createTexture2D({flipY:!0,data:_r,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:zr,height:Ir}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}var ii=0,Gi=[0,0,0,0],Hi=[0,0,0,0];if(B&&J&&(Gi=(0,pe.CI)(B),Hi=(0,pe.CI)(J),ii=1),this.raiseCount<1&&this.raiseRepeat>0&&f.enable){var hi=f.speed,pa=hi===void 0?.01:hi;this.raiseCount+=pa,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(Ce),u_heightfixed:Number(et),u_r:f.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(C)?C:1,u_linearColor:ii,u_sourceColor:Gi,u_targetColor:Hi,u_opacitylinear:Number(Xt.enable),u_opacitylinear_dir:Xt.dir==="up"?1:0,u_lightEnable:Number(xn)}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.layer.getLayerConfig(),m=f.animateOption.repeat,C=m===void 0?1:m,this.raiseRepeat=C,re.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:$g,fragmentShader:zg,triangulation:Mc,depth:{enable:!0},cull:{enable:!0,face:(0,pe.fj)(this.mapService.version)},blend:this.getBlend()});case 4:return B=re.sent,re.abrupt("return",[B]);case 6:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s){var f=s.size;if(f){var m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:te.gl.STATIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C,B){return B}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s){var f=(0,pe.SI)(s.coordinates);return ka([f[0],f[1]])}}})}}]),i}(j);function Vg(a){var l=Gg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Gg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Hg=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Wg=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);

  setPickingColor(a_PickingColor);
}
`,Xg=function(a){(0,er.Z)(i,a);var l=Vg(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.strokeOpacity,C=m===void 0?1:m,B=n.strokeWidth,J=B===void 0?0:B,re=n.stroke,Ce=re===void 0?"rgba(0,0,0,0)":re,Ge=n.offsets,et=Ge===void 0?[0,0]:Ge,Je=n.blend,Xt=n.blur,cn=Xt===void 0?0:Xt;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,strokeOpacity:C,strokeWidth:J,stroke:Ce,offsets:et})){this.judgeStyleAttributes({opacity:f,strokeOpacity:C,strokeWidth:J,stroke:Ce,offsets:et});var xn=this.layer.getEncodedData(),On=this.calDataFrame(this.cellLength,xn,this.cellProperties),ur=On.data,_r=On.width,zr=On.height;this.rowCount=zr,this.dataTexture=this.cellLength>0&&ur.length>0?this.createTexture2D({flipY:!0,data:ur,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:_r,height:zr}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_blur:cn,u_additive:Je==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_stroke_opacity:(0,He.isNumber)(C)?C:1,u_stroke_width:(0,He.isNumber)(J)?J:1,u_stroke_color:this.getStrokeColor(Ce),u_offsets:this.isOffsetStatic(et)?et:[0,0]}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption,f=s===void 0?{enable:!1}:s;return{u_animate:this.animateOption2Array(f),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.layer.triangulation=Cl,C.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:Wg,fragmentShader:Hg,triangulation:Cl,depth:{enable:!0},blend:this.getBlend()});case 3:return f=C.sent,C.abrupt("return",[f]);case 5:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.speed||1,n.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(f,m,C,B){var J=(0,qr.Z)(C,3),re=J[0],Ce=J[1],Ge=J[2],et=Ka.fromValues(0,0,1),Je=Ka.fromValues(re,0,Ge),Xt=re>=0?Ka.angle(et,Je):Math.PI*2-Ka.angle(et,Je),cn=Math.PI*2-Math.asin(Ce/100),xn=je.create();je.rotateY(xn,xn,Xt),je.rotateX(xn,xn,cn);var On=Ka.fromValues(1,1,0);Ka.transformMat4(On,On,xn),Ka.normalize(On,On);var ur=Ka.fromValues(-1,1,0);Ka.transformMat4(ur,ur,xn),Ka.normalize(ur,ur);var _r=Ka.fromValues(-1,-1,0);Ka.transformMat4(_r,_r,xn),Ka.normalize(_r,_r);var zr=Ka.fromValues(1,-1,0);Ka.transformMat4(zr,zr,xn),Ka.normalize(zr,zr);var Ir=[].concat((0,Ae.Z)(On),(0,Ae.Z)(ur),(0,Ae.Z)(_r),(0,Ae.Z)(zr)),ii=B%4*3;return[Ir[ii],Ir[ii+1],Ir[ii+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?5:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:te.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.shape,C=m===void 0?2:m,B=n.layer.getLayerConfig().shape2d,J=B.indexOf(C);return[J]}}})}}]),i}(j);function Yg(a){var l=Kg();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Kg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var qg=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Qg=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform int u_Size_Unit;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;
uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float newSize = a_Size;
  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (newSize) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Jg=function(a){(0,er.Z)(i,a);var l=Yg(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"meter2coord",1),(0,pt.Z)((0,$t.Z)(r),"isMeter",!1),(0,pt.Z)((0,$t.Z)(r),"radian",0),(0,pt.Z)((0,$t.Z)(r),"updateTexture",function(){var m=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layerService.throttleRenderLayers();return}r.texture=m({data:r.iconService.getCanvas(),mag:te.gl.LINEAR,min:te.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.offsets,C=m===void 0?[0,0]:m,B=n.rotation,J=n.raisingHeight,re=J===void 0?0:J,Ce=n.heightfixed,Ge=Ce===void 0?!1:Ce,et=n.unit,Je=et===void 0?"pixel":et;this.rendererService.getDirty()&&this.texture.bind();var Xt=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(Xt=-1),this.radian=B!==void 0?Xt*Math.PI*B/180:Xt*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,offsets:C})){this.judgeStyleAttributes({opacity:f,offsets:C});var cn=this.layer.getEncodedData(),xn=this.calDataFrame(this.cellLength,cn,this.cellProperties),On=xn.data,ur=xn.width,_r=xn.height;this.rowCount=_r,this.dataTexture=this.cellLength>0&&On.length>0?this.createTexture2D({flipY:!0,data:On,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:ur,height:_r}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(re),u_heightfixed:Number(Ge),u_Size_Unit:At[Je],u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,He.isNumber)(f)?f:1,u_offsets:this.isOffsetStatic(C)?C:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ho)}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),m.abrupt("return",this.buildModels());case 3:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:Qg,fragmentShader:qg,triangulation:Ho,depth:{enable:!1},cull:{enable:!0,face:(0,pe.fj)(this.mapService.version)}});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n,s;this.iconService.off("imageUpdate",this.updateTexture),(n=this.texture)===null||n===void 0||n.destroy(),(s=this.dataTexture)===null||s===void 0||s.destroy()}},{key:"registerBuiltinAttributes",value:function(){var n=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:te.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.rotate,C=m===void 0?0:m;return Array.isArray(C)?[C[0]]:[C]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(f){var m=n.iconService.getIconMap(),C=f.shape,B=m[C]||{x:-64,y:-64},J=B.x,re=B.y;return[J,re]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(f,m,C,B){var J=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],re=B%4*3;return[J[re],J[re+1],J[re+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(f){var m=f.size,C=m===void 0?5:m;return Array.isArray(C)?[C[0]]:[C]}}})}}]),i}(j);function em(a){var l=tm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function tm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var nm=`
uniform float u_additive;
uniform float u_opacity: 1.0;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;
#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  v_exteude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,rm=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
uniform float u_speed: 1.0;
uniform float u_time;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_exteude = rotateMatrix * a_Extrude.xy;

  // unpack color(vec2)
  v_color = a_Color;



  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
  offset = project_pixel(offset);
  
  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,im=function(a){(0,er.Z)(i,a);var l=em(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.blend,C=n.speed,B=C===void 0?1:C,J=n.unit,re=J===void 0?"pixel":J;return{u_Size_Unit:At[re],u_speed:B,u_additive:m==="additive"?1:0,u_opacity:(0,He.isNumber)(f)?f:1}}},{key:"getAnimateUniforms",value:function(){var n=this.layer.getLayerConfig(),s=n.animateOption,f=s===void 0?{enable:!1}:s;return{u_animate:this.animateOption2Array(f),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ho)}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:rm,fragmentShader:nm,triangulation:Ho,depth:{enable:!1}});case 2:return f=C.sent,C.abrupt("return",[f]);case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.speed||1,n.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:3,update:function(s,f,m,C){var B=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],J=C%4*3;return[B[J],B[J+1],B[J+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s){var f=s.size,m=f===void 0?5:f;return Array.isArray(m)?[m[0]]:[m]}}})}}]),i}(j);function am(a){var l=om();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function om(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var sm=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,um=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function wv(a){var l=a.coordinates;return{vertices:(0,Ae.Z)(l),indices:[0],size:l.length}}var lm=function(a){(0,er.Z)(i,a);var l=am(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity,f=s===void 0?1:s,m=n.offsets,C=m===void 0?[0,0]:m,B=n.blend,J=n.strokeOpacity,re=J===void 0?1:J,Ce=n.strokeWidth,Ge=Ce===void 0?0:Ce,et=n.stroke,Je=et===void 0?"#fff":et;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:f,offsets:C})){this.judgeStyleAttributes({opacity:f,offsets:C});var Xt=this.layer.getEncodedData(),cn=this.calDataFrame(this.cellLength,Xt,this.cellProperties),xn=cn.data,On=cn.width,ur=cn.height;this.rowCount=ur,this.dataTexture=this.cellLength>0&&xn.length>0?this.createTexture2D({flipY:!0,data:xn,format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:On,height:ur}):this.createTexture2D({flipY:!0,data:[1],format:te.gl.LUMINANCE,type:te.gl.FLOAT,width:1,height:1})}return{u_additive:B==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,He.isNumber)(f)?f:1,u_offsets:this.isOffsetStatic(C)?C:[0,0],u_stroke_opacity:(0,He.isNumber)(re)?re:1,u_stroke_width:(0,He.isNumber)(Ge)?Ge:1,u_stroke_color:this.getStrokeColor(Je)}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.buildModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.layer.triangulation=wv,C.next=3,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:um,fragmentShader:sm,triangulation:wv,depth:{enable:!1},primitive:te.gl.POINTS});case 3:return f=C.sent,C.abrupt("return",[f]);case 5:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.dataTexture)===null||n===void 0||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(s){var f=s.size,m=f===void 0?1:f;return Array.isArray(m)?[m[0]]:[m]}}})}}]),i}(j),cm={fillImage:Jg,fill:fc,radar:im,image:Lu,normal:fe,simplePoint:lm,extrude:rf,text:Il,earthFill:Xg,earthExtrude:jg},fm=cm;function hm(a,l){var i=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!i){if(Array.isArray(a)||(i=dm(a))||l&&a&&typeof a.length=="number"){i&&(a=i);var r=0,n=function(){};return{s:n,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(B){throw B},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,f=!1,m;return{s:function(){i=i.call(a)},n:function(){var B=i.next();return s=B.done,B},e:function(B){f=!0,m=B},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(f)throw m}}}}function dm(a,l){if(a){if(typeof a=="string")return Mv(a,l);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Mv(a,l)}}function Mv(a,l){(l==null||l>a.length)&&(l=a.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=a[i];return r}function pm(a){var l=vm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function vm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ov=function(a){(0,er.Z)(i,a);var l=pm(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","PointLayer"),(0,pt.Z)((0,$t.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new fm[f](this),C.next=5,this.initLayerModels();case 5:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"rebuildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.buildModels();case 2:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var n=this.shapeOption,s=n.field,f=n.values,m=this.getLayerConfig(),C=m.shape2d,B=this.iconService.getIconMap();if(s&&(C==null?void 0:C.indexOf(s))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){var J=hm(f),re;try{for(J.s();!(re=J.n()).done;){var Ce=re.value;if(typeof Ce=="string"&&B.hasOwnProperty(Ce))return"image"}}catch(Ge){J.e(Ge)}finally{J.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var n=this.getModelType(),s={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return s[n]}},{key:"getModelType",value:function(){var n=this.getEncodedData(),s=this.getLayerConfig(),f=s.shape2d,m=s.shape3d,C=this.iconService.getIconMap(),B=n.find(function(re){return re.hasOwnProperty("shape")});if(B){var J=B.shape;return J==="dot"?"normal":J==="simple"?"simplePoint":J==="radar"?"radar":this.layerType==="fillImage"?"fillImage":(f==null?void 0:f.indexOf(J))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(J))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":C.hasOwnProperty(J)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),i}(Zo);function gm(a){return a==="PolygonLayer"?cs:a==="LineLayer"?Cv:ov}function mm(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}var oh=function(){function a(l,i){(0,Kn.Z)(this,a),(0,pt.Z)(this,"visible",!0),(0,pt.Z)(this,"layers",[]),(0,pt.Z)(this,"isLoaded",!1),(0,pt.Z)(this,"tileMaskLayers",[]),this.parent=i,this.sourceTile=l,this.x=l.x,this.y=l.y,this.z=l.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return(0,Gn.Z)(a,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(i){var r=(0,qr.Z)(this.sourceTile.bounds,4),n=r[0],s=r[1],f=r[2],m=r[3],C=i.lng,B=i.lat;return C>=n&&C<=f&&B>=s&&B<=m}},{key:"getLayerOptions",value:function(){var i,r=this.parent.getLayerConfig();return(0,be.Z)((0,be.Z)({},r),{},{autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:mm(this.parent.type),mask:r.mask||((i=r.maskLayers)===null||i===void 0?void 0:i.length)!==0&&r.enableMask})}},{key:"getMaskLayer",value:function(){var i=this,r=this.parent.getLayerConfig(),n=r.maskLayers,s=[];return n==null||n.forEach(function(f){if(!f.tileLayer)return s.push(f),f;var m=f.tileLayer,C=m.getTile(i.sourceTile.key),B=C==null?void 0:C.getLayers()[0];B&&s.push(B)}),s}},{key:"addTileMask",value:function(){var l=(0,We.Z)(Ze().mark(function r(){var n,s,f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return n=new cs({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill"),s=(0,te.e7)(this.parent.sceneContainer),n.setContainer(s,this.parent.sceneContainer),C.next=5,n.init();case 5:return this.tileMask=n,f=this.getMainLayer(),f!==void 0&&(f.tileMask=n),C.abrupt("return",n);case 9:case"end":return C.stop()}},r,this)}));function i(){return l.apply(this,arguments)}return i}()},{key:"addMask",value:function(){var l=(0,We.Z)(Ze().mark(function r(n,s){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=(0,te.e7)(this.parent.sceneContainer),s.setContainer(f,this.parent.sceneContainer),C.next=4,s.init();case 4:n.addMask(s),this.tileMaskLayers.push(s);case 6:case"end":return C.stop()}},r,this)}));function i(r,n){return l.apply(this,arguments)}return i}()},{key:"addLayer",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){var s;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return n.isTileLayer=!0,s=(0,te.e7)(this.parent.sceneContainer),n.setContainer(s,this.parent.sceneContainer),this.layers.push(n),m.next=6,n.init();case 6:case"end":return m.stop()}},r,this)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"updateVisible",value:function(i){this.visible=i,this.updateOptions("visible",i)}},{key:"updateOptions",value:function(i,r){this.layers.forEach(function(n){n.updateLayerConfig((0,pt.Z)({},i,r))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(i){return[]}},{key:"getFeatureById",value:function(i){return[]}},{key:"destroy",value:function(){var i;(i=this.tileMask)===null||i===void 0||i.destroy(),this.layers.forEach(function(r){return r.destroy()})}}]),a}();function ym(a){var l=_m();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function _m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bm=function(a){(0,er.Z)(i,a);var l=ym(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.getSourceOption(),m=f.data.features[0].properties,C=new Cv().source(f.data,f.options).size(1).shape("line").color("red"),B=new ov({minZoom:this.z-1,maxZoom:this.z+1}).source([m],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),re.next=6,this.addLayer(C);case 6:return re.next=8,this.addLayer(B);case 8:this.isLoaded=!0;case 9:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource(),s=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:s},options:{parser:{type:"geojson"},transforms:n.transforms}}}}]),i}(oh);function xm(a){var l=Em();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Em(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sm=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
  if(gl_FragColor.a < 0.01)
    discard;
}
`,Tm=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Am=function(a){(0,er.Z)(i,a);var l=xm(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),s=n.opacity;return{u_opacity:s||1,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f=this,m,C,B,J,re,Ce;return Ze().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(m=this.layer.getSource(),C=this.rendererService.createTexture2D,this.texture=C({height:0,width:0}),!pe.eW){et.next=11;break}B=this.layerService.sceneService.getSceneConfig().canvas,J=B.createImage(),J.crossOrigin="anonymous",J.src=m.data.originData,J.onload=function(){f.texture=C({data:J,width:J.width,height:J.height}),f.layerService.reRender()},et.next=15;break;case 11:return et.next=13,m.data.images;case 13:re=et.sent,this.texture=C({data:re[0],width:re[0].width,height:re[0].height,mag:te.gl.LINEAR,min:te.gl.LINEAR});case 15:return et.next=17,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Tm,fragmentShader:Sm,triangulation:uc,primitive:te.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 17:return Ce=et.sent,et.abrupt("return",[Ce]);case 19:case"end":return et.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n;(n=this.texture)===null||n===void 0||n.destroy()}},{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.initModels());case 1:case"end":return m.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:2,update:function(s,f,m){return[m[3],m[4]]}}})}}]),i}(j),Cm={image:Am},wm=Cm;function Mm(a){var l=Om();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Om(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Pm=function(a){(0,er.Z)(i,a);var l=Mm(i);function i(){var r;(0,Kn.Z)(this,i);for(var n=arguments.length,s=new Array(n),f=0;f<n;f++)s[f]=arguments[f];return r=l.call.apply(l,[this].concat(s)),(0,pt.Z)((0,$t.Z)(r),"type","ImageLayer"),r}return(0,Gn.Z)(i,[{key:"buildModels",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=this.getModelType(),this.layerModel=new wm[f](this),C.next=4,this.initLayerModels();case 4:case"end":return C.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getDefaultConfig",value:function(){var n=this.getModelType(),s={image:{}};return s[n]}},{key:"getModelType",value:function(){return"image"}}]),i}(Zo);function Im(a){var l=Rm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Rm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var km=function(a){(0,er.Z)(i,a);var l=Im(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=this.getSourceOption(),B=new Pm((0,be.Z)({},m)).source(C.data,C.options),f&&Object.keys(f).forEach(function(Ce){var Ge,et,Je=Ce;B[Je]((Ge=f[Je])===null||Ge===void 0?void 0:Ge.field,(et=f[Je])===null||et===void 0?void 0:et.values)}),re.next=7,this.addLayer(B);case 7:this.isLoaded=!0;case 8:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:n.transforms}}}}]),i}(oh);function Lm(a){var l=Fm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Fm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Dm=function(a){(0,er.Z)(i,a);var l=Lm(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=this.getSourceOption(),B=new Me((0,be.Z)({},m)).source(C.data,C.options),f&&Object.keys(f).forEach(function(Ce){var Ge,et,Je=Ce;B[Je]((Ge=f[Je])===null||Ge===void 0?void 0:Ge.field,(et=f[Je])===null||et===void 0?void 0:et.values)}),re.next=7,this.addLayer(B);case 7:this.isLoaded=!0;case 8:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getFeatures",value:function(n){if(!n)return[];var s=this.sourceTile.data;return s.getTileData(n)}},{key:"getSourceOption",value:function(){var n=this.parent.getSource(),s=this.parent.getLayerConfig(),f=s.sourceLayer,m=s.featureId,C=this.getFeatures(f);return{data:{type:"FeatureCollection",features:C},options:{parser:{type:"geojson",featureId:m},transforms:n.transforms}}}}]),i}(oh),Nm=["rasterData"];function Bm(a){var l=Zm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Zm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Um=function(a){(0,er.Z)(i,a);var l=Bm(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=this.getSourceOption(),B=new Ll((0,be.Z)({},m)).source(C.data,C.options),f&&Object.keys(f).forEach(function(Ce){var Ge,et,Je=Ce;B[Je]((Ge=f[Je])===null||Ge===void 0?void 0:Ge.field,(et=f[Je])===null||et===void 0?void 0:et.values)}),re.next=7,this.addLayer(B);case 7:this.isLoaded=!0;case 8:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource(),s=this.sourceTile.data.data,f=s.rasterData,m=(0,jt.Z)(s,Nm);return{data:f,options:{parser:(0,be.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},m),transforms:n.transforms}}}}]),i}(oh);function zm(a){var l=$m();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function $m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var jm=function(a){(0,er.Z)(i,a);var l=zm(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B;return Ze().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=this.getSourceOption(),B=new Ll((0,be.Z)({},m)).source(C.data,C.options),f&&Object.keys(f).forEach(function(Ce){var Ge,et,Je=Ce;B[Je]((Ge=f[Je])===null||Ge===void 0?void 0:Ge.field,(et=f[Je])===null||et===void 0?void 0:et.values)}),re.next=7,this.addLayer(B);case 7:this.isLoaded=!0;case 8:case"end":return re.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:n.transforms}}}}]),i}(oh),Vm=["rasterData"];function Gm(a){var l=Hm();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Hm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Wm={positions:[0,1],colors:["#000","#fff"]},Xm=function(a){(0,er.Z)(i,a);var l=Gm(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J,re,Ce;return Ze().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=this.getSourceOption(),B=this.getLayerOptions(),J=B.rampColors,re=B.domain,this.colorTexture=this.parent.textureService.getColorTexture(J,re),Ce=new Ll((0,be.Z)((0,be.Z)({},m),{},{colorTexture:this.colorTexture})).source(C.data,C.options),f&&Object.keys(f).forEach(function(Je){var Xt,cn,xn=Je;Ce[xn]((Xt=f[xn])===null||Xt===void 0?void 0:Xt.field,(cn=f[xn])===null||cn===void 0?void 0:cn.values)}),et.next=9,this.addLayer(Ce);case 9:this.isLoaded=!0;case 10:case"end":return et.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource(),s=this.sourceTile.data.data,f=s.rasterData,m=(0,jt.Z)(s,Vm);return{data:f,options:{parser:(0,be.Z)({type:"raster",extent:this.sourceTile.bounds},m),transforms:n.transforms}}}},{key:"styleUpdate",value:function(){for(var n=this,s=arguments.length,f=new Array(s),m=0;m<s;m++)f[m]=arguments[m];var C=f,B=C.rampColors,J=B===void 0?Wm:B,re=C.domain;this.colorTexture=this.parent.textureService.getColorTexture(J,re||(0,pe.ZB)(J)),this.layers.forEach(function(Ce){return Ce.style({colorTexture:n.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(n){return n.destroy()})}}]),i}(oh);function Ym(a){var l=Km();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Km(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ip=function(a){(0,er.Z)(i,a);var l=Ym(i);function i(){return(0,Kn.Z)(this,i),l.apply(this,arguments)}return(0,Gn.Z)(i,[{key:"initTileLayer",value:function(){var r=(0,We.Z)(Ze().mark(function s(){var f,m,C,B,J;return Ze().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(f=this.parent.getLayerAttributeConfig(),m=this.getLayerOptions(),C=gm(this.parent.type),B=this.getSourceOption(),B){Ce.next=7;break}return this.isLoaded=!0,Ce.abrupt("return");case 7:return J=new C((0,be.Z)({},m)).source(B.data,B.options),Object.keys(f).forEach(function(Ge){var et,Je,Xt=Ge;J[Xt]((et=f[Xt])===null||et===void 0?void 0:et.field,(Je=f[Xt])===null||Je===void 0?void 0:Je.values)}),Ce.next=11,this.addLayer(J);case 11:if(!m.tileMask){Ce.next=14;break}return Ce.next=14,this.addTileMask();case 14:this.setLayerMinMaxZoom(J),this.isLoaded=!0;case 16:case"end":return Ce.stop()}},s,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"getSourceOption",value:function(){var n=this.parent.getSource(),s=this.parent.getLayerConfig(),f=s.sourceLayer,m=f===void 0?"defaultLayer":f,C=s.featureId,B=C===void 0?"id":C,J=this.getFeatures(m);return{data:{type:"FeatureCollection",features:J},options:{parser:{type:"geojson",featureId:B},transforms:n.transforms}}}},{key:"setLayerMinMaxZoom",value:function(n){n.getModelType()==="text"&&n.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(n){var s=this.sourceTile.data;return s.getTileData(n)}},{key:"getFeatureById",value:function(n){var s=this.getMainLayer();if(!s)return[];var f=s.getSource().data.dataArray.filter(function(m){return m._id===n});return f}}]),i}(oh);function qm(a){var l=a.type;switch(l){case"PolygonLayer":return ip;case"LineLayer":return ip;case"PointLayer":return ip;case"TileDebugLayer":return bm;case"MaskLayer":return Dm;case"RasterLayer":var i=a.getSource().parser.dataType;switch(i){case te.n3.RGB:case te.n3.CUSTOMRGB:return Um;case te.n3.ARRAYBUFFER:case te.n3.CUSTOMARRAYBUFFER:return Xm;case te.n3.TERRAINRGB:case te.n3.CUSTOMTERRAINRGB:return jm;default:return km}default:return ip}}var Ov=function(){function a(l){var i=this;(0,Kn.Z)(this,a),(0,pt.Z)(this,"initedTileset",!1),(0,pt.Z)(this,"mapchange",function(){var n,s=i.getCurrentView(),f=s.latLonBounds,m=s.zoom;if(i.mapService.version==="GAODE1.x"){var C=i.parent.getLayerConfig(),B=C.visible;m<2&&B?(i.parent.updateLayerConfig({visible:!1}),i.layerService.reRender()):m>=2&&!B&&(i.parent.updateLayerConfig({visible:!0}),i.layerService.reRender())}i.lastViewStates&&i.lastViewStates.zoom===m&&i.lastViewStates.latLonBounds.toString()===f.toString()||(i.lastViewStates={zoom:m,latLonBounds:f},(n=i.tilesetManager)===null||n===void 0||n.throttleUpdate(m,f))}),(0,pt.Z)(this,"viewchange",(0,He.debounce)(this.mapchange,24)),this.parent=l;var r=this.parent.getContainer();this.rendererService=r.get(te.vK.IRendererService),this.layerService=r.get(te.vK.ILayerService),this.mapService=r.get(te.vK.IMapService),this.pickingService=r.get(te.vK.IPickingService),this.tileLayerService=new Y0({rendererService:this.rendererService,layerService:this.layerService,parent:l}),this.tilePickService=new ev({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:l}),this.parent.setLayerPickService(this.tilePickService),this.proxy(l),this.initTileSetManager()}return(0,Gn.Z)(a,[{key:"initTileSetManager",value:function(){var i,r=this.parent.getSource();this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var n=this.getCurrentView(),s=n.latLonBounds,f=n.zoom;(i=this.tilesetManager)===null||i===void 0||i.update(f,s)}},{key:"getCurrentView",value:function(){var i=this.mapService.getBounds(),r=[i[0][0],i[0][1],i[1][0],i[1][1]],n=this.mapService.getZoom();return{latLonBounds:r,zoom:n}}},{key:"bindTilesetEvent",value:function(){var i=this;this.tilesetManager.on("tile-loaded",function(r){}),this.tilesetManager.on("tile-unload",function(r){i.tileUnLoad(r)}),this.tilesetManager.on("tile-error",function(r,n){i.tileError(r)}),this.tilesetManager.on("tile-update",function(){i.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(i){return this.tileLayerService.getTile(i)}},{key:"tileLoaded",value:function(i){}},{key:"tileError",value:function(i){console.warn("error:",i)}},{key:"destroy",value:function(){var i;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(i=this.tilesetManager)===null||i===void 0||i.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var i;this.tilesetManager.clear();var r=this.getCurrentView(),n=r.latLonBounds,s=r.zoom;(i=this.tilesetManager)===null||i===void 0||i.update(s,n)}},{key:"tileUnLoad",value:function(i){this.tileLayerService.removeTile(i.key)}},{key:"tileUpdate",value:function(){var l=(0,We.Z)(Ze().mark(function r(){var n=this,s,f;return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(this.tilesetManager){C.next=2;break}return C.abrupt("return");case 2:return s=this.parent.getMinZoom(),f=this.parent.getMaxZoom(),C.next=6,Promise.all(this.tilesetManager.tiles.filter(function(B){return B.isLoaded}).filter(function(B){return B.isVisibleChange}).filter(function(B){return B.data}).filter(function(B){return B.z>=s&&B.z<f}).map(function(){var B=(0,We.Z)(Ze().mark(function J(re){var Ce,Ge;return Ze().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(n.tileLayerService.hasTile(re.key)){Je.next=9;break}return Ce=qm(n.parent),Ge=new Ce(re,n.parent),Je.next=5,Ge.initTileLayer();case 5:n.tilePickService.setPickState(),Ge.getLayers().length!==0&&(n.tileLayerService.addTile(Ge),n.tileLayerService.updateTileVisible(re),n.layerService.reRender()),Je.next=12;break;case 9:n.tileLayerService.updateTileVisible(re),n.tilePickService.setPickState(),n.layerService.reRender();case 12:case"end":return Je.stop()}},J)}));return function(J){return B.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return C.stop()}},r,this)}));function i(){return l.apply(this,arguments)}return i}()},{key:"setPickState",value:function(i){}},{key:"pickRender",value:function(i){this.tilePickService.pickRender(i)}},{key:"selectFeature",value:function(i){this.tilePickService.selectFeature(i)}},{key:"highlightPickedFeature",value:function(i){this.tilePickService.highlightPickedFeature(i)}},{key:"proxy",value:function(i){var r=this;tv.forEach(function(n){var s=i[n].bind(i);i[n]=function(){for(var f=arguments.length,m=new Array(f),C=0;C<f;C++)m[C]=arguments[C];return s.apply(void 0,m),r.getLayers().map(function(B){B[n].apply(B,m)}),n==="style"&&r.getTiles().forEach(function(B){return B.styleUpdate.apply(B,m)}),i}})}}]),a}(),Pv,Iv,Qm=(Pv=(0,ft.b2)(),Pv(Iv=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"build",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n.prepareBuildModel(),f.next=3,n.buildModels();case 3:case"end":return f.stop()}},r)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"initLayerModel",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.build(n);case 2:n.styleNeedUpdate=!1;case 3:case"end":return f.stop()}},r,this)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"prepareLayerModel",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.build(n);case 2:case"end":return f.stop()}},r,this)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"apply",value:function(i){var r=this;i.hooks.init.tapPromise("LayerModelPlugin",(0,We.Z)(Ze().mark(function n(){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!i.getSource().isTile){f.next=4;break}return i.prepareBuildModel(),i.tileLayer=new Ov(i),f.abrupt("return");case 4:return i.log(te.Or.BuildModelStart,te.KD.INIT),f.next=7,r.initLayerModel(i);case 7:i.log(te.Or.BuildModelEnd,te.KD.INIT);case 8:case"end":return f.stop()}},n)}))),i.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var n=(0,We.Z)(Ze().mark(function s(f){return Ze().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(f){C.next=2;break}return C.abrupt("return",!1);case 2:if(!i.getSource().isTile){C.next=5;break}return i.tileLayer=new Ov(i),C.abrupt("return",!1);case 5:return i.log(te.Or.BuildModelStart,te.KD.UPDATE),C.next=8,r.prepareLayerModel(i);case 8:return i.log(te.Or.BuildModelEnd,te.KD.UPDATE),C.abrupt("return",!0);case 10:case"end":return C.stop()}},s)}));return function(s){return n.apply(this,arguments)}}())}}]),a}())||Iv),Rv,kv,Jm=(Rv=(0,ft.b2)(),Rv(kv=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){i.hooks.afterInit.tap("LayerStylePlugin",function(){var r=i.getLayerConfig(),n=r.autoFit,s=r.fitBoundsOptions;n&&i.fitBounds(s)})}}]),a}())||kv),Lv,Fv,ey=["type"],Dv={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},ty={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},ny={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},ry={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function iy(a){var l={u_DirectionalLights:new Array(3).fill((0,be.Z)({},ny)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,be.Z)({},ry)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[ty]),a.forEach(function(i){var r=i.type,n=r===void 0?"directional":r,s=(0,jt.Z)(i,ey),f=Dv[n].lights,m=Dv[n].num,C=l[m];l[f][C]=(0,be.Z)((0,be.Z)({},l[f][C]),s),l[m]++}),l}var ay=(Lv=(0,ft.b2)(),Lv(Fv=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){i.hooks.beforeRender.tap("LightingPlugin",function(){var r=i.getLayerConfig(),n=r.enableLighting;n&&i.models.forEach(function(s){return s.addUniforms((0,be.Z)({},iy()))})})}}]),a}())||Fv),Nv,Bv,oy=(Nv=(0,ft.b2)(),Nv(Bv=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=this,s=r.rendererService,f=r.postProcessingPassFactory,m=r.normalPassFactory;i.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var C=i.getLayerConfig(),B=C.enableMultiPassRenderer,J=C.passes,re=J===void 0?[]:J;n.enabled=!!B&&i.getLayerConfig().enableMultiPassRenderer!==!1,n.enabled&&(i.multiPassRenderer=bl(i,re,f,m),i.multiPassRenderer.setRenderFlag(!0))}),i.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(n.enabled){var C=s.getViewportSize(),B=C.width,J=C.height;i.multiPassRenderer.resize(B,J)}})}}]),a}())||Bv),Zv,Uv,ap={NONE:0,ENCODE:1,HIGHLIGHT:2},sy=(Zv=(0,ft.b2)(),Zv(Uv=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=r.styleAttributeService;i.hooks.init.tapPromise("PixelPickingPlugin",function(){var s=i.getLayerConfig(),f=s.enablePicking;n.registerStyleAttribute({name:"pickingColor",type:te.GC.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:te.gl.FLOAT},size:3,update:function(C){var B=C.id;return f?(0,pe.Z6)(B):[0,0,0]}}})}),i.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var s=i.getLayerConfig(),f=s.enablePicking;f&&i.isVisible()&&i.models.forEach(function(m){return m.addUniforms({u_PickingStage:ap.ENCODE})})}),i.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var s=i.getLayerConfig(),f=s.enablePicking;f&&i.isVisible()&&i.models.forEach(function(m){return m.addUniforms({u_PickingStage:ap.HIGHLIGHT})})}),i.hooks.beforeHighlight.tap("PixelPickingPlugin",function(s){var f=i.getLayerConfig(),m=f.highlightColor,C=f.activeMix,B=C===void 0?0:C,J=typeof m=="string"?(0,pe.CI)(m):m||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:(0,pe.W0)(new Uint8Array(s))}),i.models.forEach(function(re){return re.addUniforms({u_PickingStage:ap.HIGHLIGHT,u_PickingColor:s,u_HighlightColor:J.map(function(Ce){return Ce*255}),u_activeMix:B})})}),i.hooks.beforeSelect.tap("PixelPickingPlugin",function(s){var f=i.getLayerConfig(),m=f.selectColor,C=f.selectMix,B=C===void 0?0:C,J=typeof m=="string"?(0,pe.CI)(m):m||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:(0,pe.W0)(new Uint8Array(s))}),i.models.forEach(function(re){return re.addUniforms({u_PickingStage:ap.HIGHLIGHT,u_PickingColor:s,u_HighlightColor:J.map(function(Ce){return Ce*255}),u_activeMix:B,u_CurrentSelectedId:s,u_SelectColor:J.map(function(Ce){return Ce*255}),u_EnableSelect:1})})})}}]),a}())||Uv),uy=["mvt","geojsonvt","testTile"];function ly(a){var l=a.getSource();return uy.includes(l.parser.type)}function Uy(a){return a.getContext?{width:a.width/DOM.DPR,height:a.height/DOM.DPR}:a.getBoundingClientRect()}var zv,$v,cy=(zv=(0,ft.b2)(),zv($v=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=this,s=r.styleAttributeService;i.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){ly(i)||n.registerBuiltinAttributes(s,i)})}},{key:"registerBuiltinAttributes",value:function(i,r){if(r.type==="MaskLayer"){this.registerPositionAttribute(i);return}this.registerPositionAttribute(i),this.registerColorAttribute(i),this.registerVertexIdAttribute(i)}},{key:"registerPositionAttribute",value:function(i){i.registerStyleAttribute({name:"position",type:te.GC.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:te.gl.FLOAT},size:3,update:function(n,s,f){return f.length===2?[f[0],f[1],0]:[f[0],f[1],f[2]]}}})}},{key:"registerFilterAttribute",value:function(i){i.registerStyleAttribute({name:"filter",type:te.GC.Attribute,descriptor:{name:"filter",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(n){var s=n.filter;return s?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(i){i.registerStyleAttribute({name:"color",type:te.GC.Attribute,descriptor:{name:"a_Color",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:4,update:function(n){var s=n.color;return!s||!s.length?[1,1,1,1]:s}}})}},{key:"registerVertexIdAttribute",value:function(i){i.registerStyleAttribute({name:"vertexId",type:te.GC.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:te.gl.DYNAMIC_DRAW,data:[],type:te.gl.FLOAT},size:1,update:function(n,s){return[s]}}})}}]),a}())||$v),jv,Vv,Gv,Hv,Wv,Xv,Ch,Yv,Kv,qv,Qv,fy=(jv=(0,ft.b2)(),Vv=(0,ft.f3)(te.vK.ICameraService),Gv=(0,ft.f3)(te.vK.ICoordinateSystemService),Hv=(0,ft.f3)(te.vK.IRendererService),Wv=(0,ft.f3)(te.vK.IMapService),jv(Xv=(Ch=function(){function a(){(0,Kn.Z)(this,a),(0,al.Z)(this,"cameraService",Yv,this),(0,al.Z)(this,"coordinateSystemService",Kv,this),(0,al.Z)(this,"rendererService",qv,this),(0,al.Z)(this,"mapService",Qv,this)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){var r=this,n=this.mapService.version,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[0,0];i.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var m=i.getLayerConfig().tileOrigin;r.coordinateSystemService.refresh(m),n==="GAODE2.x"&&(r.setLayerCenter(i),s=r.mapService.map.customCoords.getMVPMatrix(),f=r.mapService.getCustomCoordCenter());var C=r.rendererService.getViewportSize(),B=C.width,J=C.height;i.models.forEach(function(re){var Ce;re.addUniforms((Ce={},(0,pt.Z)(Ce,te.lv.ProjectionMatrix,r.cameraService.getProjectionMatrix()),(0,pt.Z)(Ce,te.lv.ViewMatrix,r.cameraService.getViewMatrix()),(0,pt.Z)(Ce,te.lv.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),(0,pt.Z)(Ce,te.lv.Zoom,r.cameraService.getZoom()),(0,pt.Z)(Ce,te.lv.ZoomScale,r.cameraService.getZoomScale()),(0,pt.Z)(Ce,te.lv.FocalDistance,r.cameraService.getFocalDistance()),(0,pt.Z)(Ce,te.lv.CameraPosition,r.cameraService.getCameraPosition()),(0,pt.Z)(Ce,te.kw.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),(0,pt.Z)(Ce,te.kw.ViewportCenter,r.coordinateSystemService.getViewportCenter()),(0,pt.Z)(Ce,te.kw.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),(0,pt.Z)(Ce,te.kw.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),(0,pt.Z)(Ce,te.kw.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),(0,pt.Z)(Ce,te.kw.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),(0,pt.Z)(Ce,te.kw.Mvp,s),(0,pt.Z)(Ce,"u_SceneCenterMKT",f),(0,pt.Z)(Ce,"u_ViewportSize",[B,J]),(0,pt.Z)(Ce,"u_ModelMatrix",r.cameraService.getModelMatrix()),(0,pt.Z)(Ce,"u_DevicePixelRatio",pe.vO.devicePixelRatio),(0,pt.Z)(Ce,"u_PickingBuffer",i.getLayerConfig().pickingBuffer||0),(0,pt.Z)(Ce,"u_shaderPick",Number(i.getShaderPickStat())),Ce))})})}},{key:"setLayerCenter",value:function(i){i.coordCenter===void 0&&(i.coordCenter=i.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(i.coordCenter)}}]),a}(),Yv=(0,vu.Z)(Ch.prototype,"cameraService",[Vv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=(0,vu.Z)(Ch.prototype,"coordinateSystemService",[Gv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qv=(0,vu.Z)(Ch.prototype,"rendererService",[Hv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qv=(0,vu.Z)(Ch.prototype,"mapService",[Wv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ch))||Xv),Jv,eg,hy=(Jv=(0,ft.b2)(),Jv(eg=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i){i.hooks.beforeRender.tap("UpdateModelPlugin",function(){i.layerModel&&i.layerModel.needUpdate().then(function(r){r&&i.renderLayers()})}),i.hooks.afterRender.tap("UpdateModelPlugin",function(){i.layerModelNeedUpdate=!1})}}]),a}())||eg),tg,ng,dy=(tg=(0,ft.b2)(),tg(ng=function(){function a(){(0,Kn.Z)(this,a)}return(0,Gn.Z)(a,[{key:"apply",value:function(i,r){var n=this,s=r.styleAttributeService;i.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){n.initStyleAttribute(i,{styleAttributeService:s})}),i.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){i.layerModelNeedUpdate||i.inited&&n.updateStyleAttribute(i,{styleAttributeService:s})})}},{key:"updateStyleAttribute",value:function(i,r){var n=r.styleAttributeService,s=n.getLayerStyleAttributes()||[],f=n.getLayerStyleAttribute("filter");if(f&&f.needRegenerateVertices){i.layerModelNeedUpdate=!0,s.forEach(function(m){return m.needRegenerateVertices=!1});return}s.filter(function(m){return m.needRegenerateVertices}).forEach(function(m){n.updateAttributeByFeatureRange(m.name,i.getEncodedData(),m.featureRange.startIndex,m.featureRange.endIndex,i),m.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(i,r){var n=r.styleAttributeService,s=n.getLayerStyleAttributes()||[];s.filter(function(f){return f.needRegenerateVertices}).forEach(function(f){n.updateAttributeByFeatureRange(f.name,i.getEncodedData(),f.featureRange.startIndex,f.featureRange.endIndex),f.needRegenerateVertices=!1})}}]),a}())||ng);te.nC.bind(te.vK.ILayerPlugin).to(xr).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(cy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(H0).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(jr).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(Jm).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(X0).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(dy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(hy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(oy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(fy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(W0).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(ay).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(sy).inRequestScope(),te.nC.bind(te.vK.ILayerPlugin).to(Qm).inRequestScope();var py=y(88307),vy=y.n(py),gy=function(){function a(l,i){(0,Kn.Z)(this,a);var r=i.buffer,n=i.offset,s=i.stride,f=i.normalized,m=i.size,C=i.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:n||0,stride:s||0,normalized:f||!1,divisor:C||0},m&&(this.attribute.size=m)}return(0,Gn.Z)(a,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),a}(),wf,ed,Mf,Yc,td,Hf,nd,op,mf,sh,hl,yf,_f,sp,yy=(wf={},(0,pt.Z)(wf,te.gl.POINTS,"points"),(0,pt.Z)(wf,te.gl.LINES,"lines"),(0,pt.Z)(wf,te.gl.LINE_LOOP,"line loop"),(0,pt.Z)(wf,te.gl.LINE_STRIP,"line strip"),(0,pt.Z)(wf,te.gl.TRIANGLES,"triangles"),(0,pt.Z)(wf,te.gl.TRIANGLE_FAN,"triangle fan"),(0,pt.Z)(wf,te.gl.TRIANGLE_STRIP,"triangle strip"),wf),rg=(ed={},(0,pt.Z)(ed,te.gl.STATIC_DRAW,"static"),(0,pt.Z)(ed,te.gl.DYNAMIC_DRAW,"dynamic"),(0,pt.Z)(ed,te.gl.STREAM_DRAW,"stream"),ed),sv=(Mf={},(0,pt.Z)(Mf,te.gl.BYTE,"int8"),(0,pt.Z)(Mf,te.gl.UNSIGNED_INT,"int16"),(0,pt.Z)(Mf,te.gl.INT,"int32"),(0,pt.Z)(Mf,te.gl.UNSIGNED_BYTE,"uint8"),(0,pt.Z)(Mf,te.gl.UNSIGNED_SHORT,"uint16"),(0,pt.Z)(Mf,te.gl.UNSIGNED_INT,"uint32"),(0,pt.Z)(Mf,te.gl.FLOAT,"float"),Mf),_y=(Yc={},(0,pt.Z)(Yc,te.gl.ALPHA,"alpha"),(0,pt.Z)(Yc,te.gl.LUMINANCE,"luminance"),(0,pt.Z)(Yc,te.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,pt.Z)(Yc,te.gl.RGB,"rgb"),(0,pt.Z)(Yc,te.gl.RGBA,"rgba"),(0,pt.Z)(Yc,te.gl.RGBA4,"rgba4"),(0,pt.Z)(Yc,te.gl.RGB5_A1,"rgb5 a1"),(0,pt.Z)(Yc,te.gl.RGB565,"rgb565"),(0,pt.Z)(Yc,te.gl.DEPTH_COMPONENT,"depth"),(0,pt.Z)(Yc,te.gl.DEPTH_STENCIL,"depth stencil"),Yc),by=(td={},(0,pt.Z)(td,te.gl.DONT_CARE,"dont care"),(0,pt.Z)(td,te.gl.NICEST,"nice"),(0,pt.Z)(td,te.gl.FASTEST,"fast"),td),ig=(Hf={},(0,pt.Z)(Hf,te.gl.NEAREST,"nearest"),(0,pt.Z)(Hf,te.gl.LINEAR,"linear"),(0,pt.Z)(Hf,te.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,pt.Z)(Hf,te.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,pt.Z)(Hf,te.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,pt.Z)(Hf,te.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Hf),ag=(nd={},(0,pt.Z)(nd,te.gl.REPEAT,"repeat"),(0,pt.Z)(nd,te.gl.CLAMP_TO_EDGE,"clamp"),(0,pt.Z)(nd,te.gl.MIRRORED_REPEAT,"mirror"),nd),xy=(op={},(0,pt.Z)(op,te.gl.NONE,"none"),(0,pt.Z)(op,te.gl.BROWSER_DEFAULT_WEBGL,"browser"),op),Ey=(mf={},(0,pt.Z)(mf,te.gl.NEVER,"never"),(0,pt.Z)(mf,te.gl.ALWAYS,"always"),(0,pt.Z)(mf,te.gl.LESS,"less"),(0,pt.Z)(mf,te.gl.LEQUAL,"lequal"),(0,pt.Z)(mf,te.gl.GREATER,"greater"),(0,pt.Z)(mf,te.gl.GEQUAL,"gequal"),(0,pt.Z)(mf,te.gl.EQUAL,"equal"),(0,pt.Z)(mf,te.gl.NOTEQUAL,"notequal"),mf),og=(sh={},(0,pt.Z)(sh,te.gl.FUNC_ADD,"add"),(0,pt.Z)(sh,te.gl.MIN_EXT,"min"),(0,pt.Z)(sh,te.gl.MAX_EXT,"max"),(0,pt.Z)(sh,te.gl.FUNC_SUBTRACT,"subtract"),(0,pt.Z)(sh,te.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),sh),up=(hl={},(0,pt.Z)(hl,te.gl.ZERO,"zero"),(0,pt.Z)(hl,te.gl.ONE,"one"),(0,pt.Z)(hl,te.gl.SRC_COLOR,"src color"),(0,pt.Z)(hl,te.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,pt.Z)(hl,te.gl.SRC_ALPHA,"src alpha"),(0,pt.Z)(hl,te.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,pt.Z)(hl,te.gl.DST_COLOR,"dst color"),(0,pt.Z)(hl,te.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,pt.Z)(hl,te.gl.DST_ALPHA,"dst alpha"),(0,pt.Z)(hl,te.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,pt.Z)(hl,te.gl.CONSTANT_COLOR,"constant color"),(0,pt.Z)(hl,te.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,pt.Z)(hl,te.gl.CONSTANT_ALPHA,"constant alpha"),(0,pt.Z)(hl,te.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,pt.Z)(hl,te.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),hl),Sy=(yf={},(0,pt.Z)(yf,te.gl.NEVER,"never"),(0,pt.Z)(yf,te.gl.ALWAYS,"always"),(0,pt.Z)(yf,te.gl.LESS,"less"),(0,pt.Z)(yf,te.gl.LEQUAL,"lequal"),(0,pt.Z)(yf,te.gl.GREATER,"greater"),(0,pt.Z)(yf,te.gl.GEQUAL,"gequal"),(0,pt.Z)(yf,te.gl.EQUAL,"equal"),(0,pt.Z)(yf,te.gl.NOTEQUAL,"notequal"),yf),wh=(_f={},(0,pt.Z)(_f,te.gl.ZERO,"zero"),(0,pt.Z)(_f,te.gl.KEEP,"keep"),(0,pt.Z)(_f,te.gl.REPLACE,"replace"),(0,pt.Z)(_f,te.gl.INVERT,"invert"),(0,pt.Z)(_f,te.gl.INCR,"increment"),(0,pt.Z)(_f,te.gl.DECR,"decrement"),(0,pt.Z)(_f,te.gl.INCR_WRAP,"increment wrap"),(0,pt.Z)(_f,te.gl.DECR_WRAP,"decrement wrap"),_f),Ty=(sp={},(0,pt.Z)(sp,te.gl.FRONT,"front"),(0,pt.Z)(sp,te.gl.BACK,"back"),sp),Ay=function(){function a(l,i){(0,Kn.Z)(this,a);var r=i.data,n=i.usage,s=i.type;this.buffer=l.buffer({data:r,usage:rg[n||te.gl.STATIC_DRAW],type:sv[s||te.gl.UNSIGNED_BYTE]})}return(0,Gn.Z)(a,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(i){var r=i.data,n=i.offset;this.buffer.subdata(r,n)}}]),a}(),Cy=function(){function a(l,i){(0,Kn.Z)(this,a);var r=i.data,n=i.usage,s=i.type,f=i.count;this.elements=l.elements({data:r,usage:rg[n||te.gl.STATIC_DRAW],type:sv[s||te.gl.UNSIGNED_BYTE],count:f})}return(0,Gn.Z)(a,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(i){var r=i.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),a}(),wy=function(){function a(l,i){(0,Kn.Z)(this,a);var r=i.width,n=i.height,s=i.color,f=i.colors,m={width:r,height:n};Array.isArray(f)&&(m.colors=f.map(function(C){return C.get()})),s&&typeof s!="boolean"&&(m.color=s.get()),this.framebuffer=l.framebuffer(m)}return(0,Gn.Z)(a,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(i){var r=i.width,n=i.height;this.framebuffer.resize(r,n)}}]),a}(),My=function(){function a(l,i){(0,Kn.Z)(this,a),(0,pt.Z)(this,"destroyed",!1),(0,pt.Z)(this,"uniforms",{}),this.reGl=l;var r=i.vs,n=i.fs,s=i.attributes,f=i.uniforms,m=i.primitive,C=i.count,B=i.elements,J=i.depth,re=i.cull,Ce=i.instances,Ge={};this.options=i,f&&(this.uniforms=this.extractUniforms(f),Object.keys(f).forEach(function(Xt){Ge[Xt]=l.prop(Xt)}));var et={};Object.keys(s).forEach(function(Xt){et[Xt]=s[Xt].get()});var Je={attributes:et,frag:n,uniforms:Ge,vert:r,colorMask:l.prop("colorMask"),blend:{enable:l.prop("blend.enable"),func:l.prop("blend.func"),equation:l.prop("blend.equation"),color:l.prop("blend.color")},stencil:{enable:l.prop("stencil.enable"),mask:l.prop("stencil.mask"),func:l.prop("stencil.func"),opFront:l.prop("stencil.opFront"),opBack:l.prop("stencil.opBack")},primitive:yy[m===void 0?te.gl.TRIANGLES:m]};Ce&&(Je.instances=Ce),C?Je.count=C:B&&(Je.elements=B.get()),this.initDepthDrawParams({depth:J},Je),this.initCullDrawParams({cull:re},Je),this.drawCommand=l(Je),this.drawParams=Je}return(0,Gn.Z)(a,[{key:"updateAttributesAndElements",value:function(i,r){var n={};Object.keys(i).forEach(function(s){n[s]=i[s].get()}),this.drawParams.attributes=n,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(i){var r={};Object.keys(i).forEach(function(n){r[n]=i[n].get()}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(i){this.uniforms=(0,be.Z)((0,be.Z)({},this.uniforms),this.extractUniforms(i))}},{key:"draw",value:function(i,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var n=(0,be.Z)((0,be.Z)({},this.uniforms),this.extractUniforms(i.uniforms||{})),s={};Object.keys(n).forEach(function(f){var m=(0,st.Z)(n[f]);m==="boolean"||m==="number"||Array.isArray(n[f])||n[f].BYTES_PER_ELEMENT?s[f]=n[f]:s[f]=n[f].get()}),s.blend=r?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(i),s.stencil=this.getStencilDrawParams(i),s.colorMask=this.getColorMaskDrawParams(i,r),this.drawCommand(s)}}},{key:"destroy",value:function(){var i,r;(i=this.drawParams)===null||i===void 0||(r=i.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(n){n==null||n.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(i,r){var n=i.depth;n&&(r.depth={enable:n.enable===void 0?!0:!!n.enable,mask:n.mask===void 0?!0:!!n.mask,func:Ey[n.func||te.gl.LESS],range:n.range||[0,1]})}},{key:"getBlendDrawParams",value:function(i){var r=i.blend,n=r||{},s=n.enable,f=n.func,m=n.equation,C=n.color,B=C===void 0?[0,0,0,0]:C;return{enable:!!s,func:{srcRGB:up[f&&f.srcRGB||te.gl.SRC_ALPHA],srcAlpha:up[f&&f.srcAlpha||te.gl.SRC_ALPHA],dstRGB:up[f&&f.dstRGB||te.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:up[f&&f.dstAlpha||te.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:og[m&&m.rgb||te.gl.FUNC_ADD],alpha:og[m&&m.alpha||te.gl.FUNC_ADD]},color:B}}},{key:"getStencilDrawParams",value:function(i){var r=i.stencil,n=r||{},s=n.enable,f=n.mask,m=f===void 0?-1:f,C=n.func,B=C===void 0?{cmp:te.gl.ALWAYS,ref:0,mask:-1}:C,J=n.opFront,re=J===void 0?{fail:te.gl.KEEP,zfail:te.gl.KEEP,zpass:te.gl.KEEP}:J,Ce=n.opBack,Ge=Ce===void 0?{fail:te.gl.KEEP,zfail:te.gl.KEEP,zpass:te.gl.KEEP}:Ce;return{enable:!!s,mask:m,func:(0,be.Z)((0,be.Z)({},B),{},{cmp:Sy[B.cmp]}),opFront:{fail:wh[re.fail],zfail:wh[re.zfail],zpass:wh[re.zpass]},opBack:{fail:wh[Ge.fail],zfail:wh[Ge.zfail],zpass:wh[Ge.zpass]}}}},{key:"getColorMaskDrawParams",value:function(i,r){var n=i.stencil,s=n!=null&&n.enable&&n.opFront&&!r?[!1,!1,!1,!1]:[!0,!0,!0,!0];return s}},{key:"initCullDrawParams",value:function(i,r){var n=i.cull;if(n){var s=n.enable,f=n.face,m=f===void 0?te.gl.BACK:f;r.cull={enable:!!s,face:Ty[m]}}}},{key:"extractUniforms",value:function(i){var r=this,n={};return Object.keys(i).forEach(function(s){r.extractUniformsRecursively(s,i[s],n,"")}),n}},{key:"extractUniformsRecursively",value:function(i,r,n,s){var f=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||(0,He.isTypedArray)(r)||r===""||"resize"in r){n["".concat(s&&s+".").concat(i)]=r;return}(0,He.isPlainObject)(r)&&Object.keys(r).forEach(function(m){f.extractUniformsRecursively(m,r[m],n,"".concat(s&&s+".").concat(i))}),Array.isArray(r)&&r.forEach(function(m,C){Object.keys(m).forEach(function(B){f.extractUniformsRecursively(B,m[B],n,"".concat(s&&s+".").concat(i,"[").concat(C,"]"))})})}}]),a}(),Oy=function(){function a(l,i){(0,Kn.Z)(this,a),(0,pt.Z)(this,"isDestroy",!1);var r=i.data,n=i.type,s=n===void 0?te.gl.UNSIGNED_BYTE:n,f=i.width,m=i.height,C=i.flipY,B=C===void 0?!1:C,J=i.format,re=J===void 0?te.gl.RGBA:J,Ce=i.mipmap,Ge=Ce===void 0?!1:Ce,et=i.wrapS,Je=et===void 0?te.gl.CLAMP_TO_EDGE:et,Xt=i.wrapT,cn=Xt===void 0?te.gl.CLAMP_TO_EDGE:Xt,xn=i.aniso,On=xn===void 0?0:xn,ur=i.alignment,_r=ur===void 0?1:ur,zr=i.premultiplyAlpha,Ir=zr===void 0?!1:zr,ii=i.mag,Gi=ii===void 0?te.gl.NEAREST:ii,Hi=i.min,hi=Hi===void 0?te.gl.NEAREST:Hi,pa=i.colorSpace,Ya=pa===void 0?te.gl.BROWSER_DEFAULT_WEBGL:pa,ps=i.x,gc=ps===void 0?0:ps,Bu=i.y,Lc=Bu===void 0?0:Bu,dl=i.copy,el=dl===void 0?!1:dl;this.width=f,this.height=m;var Of={width:f,height:m,type:sv[s],format:_y[re],wrapS:ag[Je],wrapT:ag[cn],mag:ig[Gi],min:ig[hi],alignment:_r,flipY:B,colorSpace:xy[Ya],premultiplyAlpha:Ir,aniso:On,x:gc,y:Lc,copy:el};r&&(Of.data=r),typeof Ge=="number"?Of.mipmap=by[Ge]:typeof Ge=="boolean"&&(Of.mipmap=Ge),this.texture=l.texture(Of)}return(0,Gn.Z)(a,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(i)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(i){var r=i.width,n=i.height;this.texture.resize(r,n),this.width=r,this.height=n}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var i;(i=this.texture)===null||i===void 0||i.destroy()}this.isDestroy=!0}}]),a}(),sg,ug,Py=(sg=(0,ft.b2)(),sg(ug=function(){function a(){var l=this;(0,Kn.Z)(this,a),(0,pt.Z)(this,"createModel",function(i){return new My(l.gl,i)}),(0,pt.Z)(this,"createAttribute",function(i){return new gy(l.gl,i)}),(0,pt.Z)(this,"createBuffer",function(i){return new Ay(l.gl,i)}),(0,pt.Z)(this,"createElements",function(i){return new Cy(l.gl,i)}),(0,pt.Z)(this,"createTexture2D",function(i){return new Oy(l.gl,i)}),(0,pt.Z)(this,"createFramebuffer",function(i){return new wy(l.gl,i)}),(0,pt.Z)(this,"useFramebuffer",function(i,r){l.gl({framebuffer:i?i.get():null})(r)}),(0,pt.Z)(this,"clear",function(i){var r,n=i.color,s=i.depth,f=i.stencil,m=i.framebuffer,C=m===void 0?null:m,B={color:n,depth:s,stencil:f};B.framebuffer=C===null?C:C.get(),(r=l.gl)===null||r===void 0||r.clear(B)}),(0,pt.Z)(this,"viewport",function(i){var r=i.x,n=i.y,s=i.width,f=i.height;l.gl._gl.viewport(r,n,s,f),l.width=s,l.height=f,l.gl._refresh()}),(0,pt.Z)(this,"readPixels",function(i){var r=i.framebuffer,n=i.x,s=i.y,f=i.width,m=i.height,C={x:n,y:s,width:f,height:m};return r&&(C.framebuffer=r.get()),l.gl.read(C)}),(0,pt.Z)(this,"getViewportSize",function(){return{width:l.gl._gl.drawingBufferWidth,height:l.gl._gl.drawingBufferHeight}}),(0,pt.Z)(this,"getContainer",function(){if(pe.eW)return l.canvas;var i;return(i=l.canvas)===null||i===void 0?void 0:i.parentElement}),(0,pt.Z)(this,"getCanvas",function(){return l.canvas}),(0,pt.Z)(this,"getGLContext",function(){return l.gl._gl}),(0,pt.Z)(this,"destroy",function(){var i,r,n;l.canvas=null,(i=l.gl)===null||i===void 0||(r=i._gl)===null||r===void 0||(n=r.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext(),l.gl.destroy(),l.gl=null})}return(0,Gn.Z)(a,[{key:"init",value:function(){var l=(0,We.Z)(Ze().mark(function r(n,s,f){var m=this;return Ze().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.canvas=n,!f){B.next=5;break}this.gl=f,B.next=8;break;case 5:return B.next=7,new Promise(function(J,re){vy()({canvas:m.canvas,attributes:{alpha:!0,antialias:s.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:s.preserveDrawingBuffer,stencil:s.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(Ge,et){(Ge||!et)&&re(Ge),J(et)}})});case 7:this.gl=B.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return B.stop()}},r,this)}));function i(r,n,s){return l.apply(this,arguments)}return i}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(i){return!!this.getGLContext().getExtension(i)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var i=this.getGLContext();i.disable(i.CULL_FACE)}},{key:"setDirty",value:function(i){this.isDirty=i}},{key:"getDirty",value:function(){return this.isDirty}}]),a}())||ug);function Iy(a){var l=Ry();return function(){var r=(0,Bt.Z)(a),n;if(l){var s=(0,Bt.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,Jn.Z)(this,n)}}function Ry(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var uv=["selectstart","selecting","selectend"],ky=function(a){(0,er.Z)(i,a);var l=Iy(i);function i(r){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Kn.Z)(this,i),n=l.call(this),(0,pt.Z)((0,$t.Z)(n),"isEnable",!1),(0,pt.Z)((0,$t.Z)(n),"onDragStart",function(f){n.box.style.display="block",n.startEvent=n.endEvent=f,n.syncBoxBound(),n.emit("selectstart",n.getLngLatBox(),n.startEvent,n.endEvent)}),(0,pt.Z)((0,$t.Z)(n),"onDragging",function(f){n.endEvent=f,n.syncBoxBound(),n.emit("selecting",n.getLngLatBox(),n.startEvent,n.endEvent)}),(0,pt.Z)((0,$t.Z)(n),"onDragEnd",function(f){n.endEvent=f,n.box.style.display="none",n.emit("selectend",n.getLngLatBox(),n.startEvent,n.endEvent)}),n.scene=r,n.options=s,n}return(0,Gn.Z)(i,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var n=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var s=pe.SO.create("div",void 0,this.container);s.classList.add("l7-select-box"),n&&s.classList.add(n),s.style.display="none",this.box=s}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var n=this.startEvent,s=n.x,f=n.y,m=this.endEvent,C=m.x,B=m.y,J=Math.min(s,C),re=Math.min(f,B),Ce=Math.abs(s-C),Ge=Math.abs(f-B);this.box.style.top="".concat(re,"px"),this.box.style.left="".concat(J,"px"),this.box.style.width="".concat(Ce,"px"),this.box.style.height="".concat(Ge,"px")}},{key:"getLngLatBox",value:function(){var n=this.startEvent.lngLat,s=n.lng,f=n.lat,m=this.endEvent.lngLat,C=m.lng,B=m.lat;return(0,pe.Ol)([[s,f],[C,B]])}}]),i}(Le.EventEmitter),Ly=function(){function a(l){(0,Kn.Z)(this,a);var i=l.id,r=l.map,n=l.canvas,s=l.hasBaseMap,f=(0,te.Hp)();this.container=f,r.setContainer(f,i,n,s),f.bind(te.vK.IRendererService).to(Py).inSingletonScope(),this.sceneService=f.get(te.vK.ISceneService),this.mapService=f.get(te.vK.IMapService),this.iconService=f.get(te.vK.IIconService),this.fontService=f.get(te.vK.IFontService),this.controlService=f.get(te.vK.IControlService),this.layerService=f.get(te.vK.ILayerService),this.debugService=f.get(te.vK.IDebugService),this.debugService.setEnable(l.debug),this.markerService=f.get(te.vK.IMarkerService),this.interactionService=f.get(te.vK.IInteractionService),this.popupService=f.get(te.vK.IPopupService),this.boxSelect=new ky(this,{}),(0,pe.a)((l==null?void 0:l.isMini)||!1),pe.eW?this.sceneService.initMiniScene(l):(this.initComponent(i),this.sceneService.init(l),this.initControl())}return(0,Gn.Z)(a,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.sceneService.exportPng(n));case 1:case"end":return f.stop()}},r,this)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"exportMap",value:function(){var l=(0,We.Z)(Ze().mark(function r(n){return Ze().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.sceneService.exportPng(n));case 1:case"end":return f.stop()}},r,this)}));function i(r){return l.apply(this,arguments)}return i}()},{key:"registerRenderService",value:function(i){var r=this;if(this.sceneService.loaded){var n=new i(this);n.init()}else this.on("loaded",function(){var s=new i(r);s.init()})}},{key:"setBgColor",value:function(i){this.mapService.setBgColor(i)}},{key:"addLayer",value:function(i){var r=this,n=(0,te.e7)(this.container);if(i.setContainer(n,this.container),this.sceneService.addLayer(i),i.inited){var s=this.initMask(i);this.addMask(s,i.id)}else i.on("inited",function(){var f=r.initMask(i);r.addMask(f,i.id)})}},{key:"initMask",value:function(i){var r=i.getLayerConfig(),n=r.mask,s=r.maskfence,f=r.maskColor,m=f===void 0?"#000":f,C=r.maskOpacity,B=C===void 0?0:C;if(!(!n||!s)){var J=new Me().source(s).shape("fill").style({color:m,opacity:B});return J}}},{key:"addMask",value:function(i,r){if(i){var n=this.getLayer(r);if(n){var s=(0,te.e7)(this.container);i.setContainer(s,this.container),n.addMaskLayer(i),this.sceneService.addMask(i)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(i){return this.layerService.getLayer(i)}},{key:"getLayerByName",value:function(i){return this.layerService.getLayerByName(i)}},{key:"removeLayer",value:function(){var l=(0,We.Z)(Ze().mark(function r(n,s){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.layerService.remove(n,s);case 2:case"end":return m.stop()}},r,this)}));function i(r,n){return l.apply(this,arguments)}return i}()},{key:"removeAllLayer",value:function(){var l=(0,We.Z)(Ze().mark(function r(){return Ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.layerService.removeAllLayers();case 2:case"end":return s.stop()}},r,this)}));function i(){return l.apply(this,arguments)}return i}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(i){this.layerService.setEnableRender(i)}},{key:"addIconFont",value:function(i,r){this.fontService.addIconFont(i,r)}},{key:"addIconFonts",value:function(i){var r=this;i.forEach(function(n){var s=(0,qr.Z)(n,2),f=s[0],m=s[1];r.fontService.addIconFont(f,m)})}},{key:"addFontFace",value:function(i,r){var n=this;this.fontService.once("fontloaded",function(s){n.emit("fontloaded",s)}),this.fontService.addFontFace(i,r)}},{key:"addImage",value:function(){var l=(0,We.Z)(Ze().mark(function r(n,s){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(pe.eW){m.next=5;break}return m.next=3,this.iconService.addImage(n,s);case 3:m.next=6;break;case 5:this.iconService.addImageMini(n,s,this.sceneService);case 6:case"end":return m.stop()}},r,this)}));function i(r,n){return l.apply(this,arguments)}return i}()},{key:"hasImage",value:function(i){return this.iconService.hasImage(i)}},{key:"removeImage",value:function(i){this.iconService.removeImage(i)}},{key:"addIconFontGlyphs",value:function(i,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(i){this.controlService.addControl(i,this.container)}},{key:"removeControl",value:function(i){this.controlService.removeControl(i)}},{key:"getControlByName",value:function(i){return this.controlService.getControlByName(i)}},{key:"addMarker",value:function(i){this.markerService.addMarker(i)}},{key:"addMarkerLayer",value:function(i){this.markerService.addMarkerLayer(i)}},{key:"removeMarkerLayer",value:function(i){this.markerService.removeMarkerLayer(i)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(i){this.popupService.addPopup(i)}},{key:"removePopup",value:function(i){this.popupService.removePopup(i)}},{key:"on",value:function(i,r){if(uv.includes(i)){var n;(n=this.boxSelect)===null||n===void 0||n.on(i,r)}else te.P7.includes(i)?this.sceneService.on(i,r):this.mapService.on(i,r)}},{key:"once",value:function(i,r){if(uv.includes(i)){var n;(n=this.boxSelect)===null||n===void 0||n.once(i,r)}else te.P7.includes(i)?this.sceneService.once(i,r):this.mapService.once(i,r)}},{key:"emit",value:function(i,r){te.P7.indexOf(i)===-1?this.mapService.on(i,r):this.sceneService.emit(i,r)}},{key:"off",value:function(i,r){if(uv.includes(i)){var n;(n=this.boxSelect)===null||n===void 0||n.off(i,r)}else te.P7.includes(i)?this.sceneService.off(i,r):this.mapService.off(i,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(i){return this.mapService.getCenter(i)}},{key:"setCenter",value:function(i,r){return this.mapService.setCenter(i,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(i){return this.mapService.setPitch(i)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(i){this.mapService.setRotation(i)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(i){this.mapService.panTo(i)}},{key:"panBy",value:function(i,r){this.mapService.panBy(i,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(i){this.mapService.setZoom(i)}},{key:"fitBounds",value:function(i,r){var n=this.sceneService.getSceneConfig(),s=n.fitBoundsOptions,f=n.animate;this.mapService.fitBounds(i,r||(0,be.Z)((0,be.Z)({},s),{},{animate:f}))}},{key:"setZoomAndCenter",value:function(i,r){this.mapService.setZoomAndCenter(i,r)}},{key:"setMapStyle",value:function(i){this.mapService.setMapStyle(i)}},{key:"setMapStatus",value:function(i){this.mapService.setMapStatus(i)}},{key:"pixelToLngLat",value:function(i){return this.mapService.pixelToLngLat(i)}},{key:"lngLatToPixel",value:function(i){return this.mapService.lngLatToPixel(i)}},{key:"containerToLngLat",value:function(i){return this.mapService.containerToLngLat(i)}},{key:"lngLatToContainer",value:function(i){return this.mapService.lngLatToContainer(i)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(i,r){this.container.bind(te.vK.IPostProcessingPass).to(i).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),r&&this.boxSelect.once("selectend",function(){i.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(i){this.controlService.init({container:pe.SO.getContainer(i)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var i=this.sceneService.getSceneConfig(),r=i.logoVisible,n=i.logoPosition;r&&this.addControl(new In({position:n}))}}]),a}(),zy="2.15.4"},86500:function(Ie,S,y){"use strict";y.d(S,{T6:function(){return c},VD:function(){return b},WE:function(){return v},Yt:function(){return A},lC:function(){return M},py:function(){return x},rW:function(){return p},s:function(){return t},ve:function(){return g},vq:function(){return u}});var E=y(90279);function p(w,D,F){return{r:(0,E.sh)(w,255)*255,g:(0,E.sh)(D,255)*255,b:(0,E.sh)(F,255)*255}}function M(w,D,F){w=(0,E.sh)(w,255),D=(0,E.sh)(D,255),F=(0,E.sh)(F,255);var Z=Math.max(w,D,F),L=Math.min(w,D,F),W=0,k=0,de=(Z+L)/2;if(Z===L)k=0,W=0;else{var H=Z-L;switch(k=de>.5?H/(2-Z-L):H/(Z+L),Z){case w:W=(D-F)/H+(D<F?6:0);break;case D:W=(F-w)/H+2;break;case F:W=(w-D)/H+4;break;default:break}W/=6}return{h:W,s:k,l:de}}function d(w,D,F){return F<0&&(F+=1),F>1&&(F-=1),F<1/6?w+(D-w)*(6*F):F<1/2?D:F<2/3?w+(D-w)*(2/3-F)*6:w}function g(w,D,F){var Z,L,W;if(w=(0,E.sh)(w,360),D=(0,E.sh)(D,100),F=(0,E.sh)(F,100),D===0)L=F,W=F,Z=F;else{var k=F<.5?F*(1+D):F+D-F*D,de=2*F-k;Z=d(de,k,w+1/3),L=d(de,k,w),W=d(de,k,w-1/3)}return{r:Z*255,g:L*255,b:W*255}}function x(w,D,F){w=(0,E.sh)(w,255),D=(0,E.sh)(D,255),F=(0,E.sh)(F,255);var Z=Math.max(w,D,F),L=Math.min(w,D,F),W=0,k=Z,de=Z-L,H=Z===0?0:de/Z;if(Z===L)W=0;else{switch(Z){case w:W=(D-F)/de+(D<F?6:0);break;case D:W=(F-w)/de+2;break;case F:W=(w-D)/de+4;break;default:break}W/=6}return{h:W,s:H,v:k}}function v(w,D,F){w=(0,E.sh)(w,360)*6,D=(0,E.sh)(D,100),F=(0,E.sh)(F,100);var Z=Math.floor(w),L=w-Z,W=F*(1-D),k=F*(1-L*D),de=F*(1-(1-L)*D),H=Z%6,ue=[F,k,W,W,de,F][H],ve=[de,F,F,k,W,W][H],ke=[W,W,de,F,F,k][H];return{r:ue*255,g:ve*255,b:ke*255}}function u(w,D,F,Z){var L=[(0,E.FZ)(Math.round(w).toString(16)),(0,E.FZ)(Math.round(D).toString(16)),(0,E.FZ)(Math.round(F).toString(16))];return Z&&L[0].startsWith(L[0].charAt(1))&&L[1].startsWith(L[1].charAt(1))&&L[2].startsWith(L[2].charAt(1))?L[0].charAt(0)+L[1].charAt(0)+L[2].charAt(0):L.join("")}function t(w,D,F,Z,L){var W=[(0,E.FZ)(Math.round(w).toString(16)),(0,E.FZ)(Math.round(D).toString(16)),(0,E.FZ)(Math.round(F).toString(16)),(0,E.FZ)(o(Z))];return L&&W[0].startsWith(W[0].charAt(1))&&W[1].startsWith(W[1].charAt(1))&&W[2].startsWith(W[2].charAt(1))&&W[3].startsWith(W[3].charAt(1))?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0)+W[3].charAt(0):W.join("")}function e(w,D,F,Z){var L=[pad2(o(Z)),pad2(Math.round(w).toString(16)),pad2(Math.round(D).toString(16)),pad2(Math.round(F).toString(16))];return L.join("")}function o(w){return Math.round(parseFloat(w)*255).toString(16)}function c(w){return b(w)/255}function b(w){return parseInt(w,16)}function A(w){return{r:w>>16,g:(w&65280)>>8,b:w&255}}},48701:function(Ie,S,y){"use strict";y.d(S,{R:function(){return E}});var E={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},1350:function(Ie,S,y){"use strict";y.d(S,{uA:function(){return d}});var E=y(86500),p=y(48701),M=y(90279);function d(b){var A={r:0,g:0,b:0},w=1,D=null,F=null,Z=null,L=!1,W=!1;return typeof b=="string"&&(b=o(b)),typeof b=="object"&&(c(b.r)&&c(b.g)&&c(b.b)?(A=(0,E.rW)(b.r,b.g,b.b),L=!0,W=String(b.r).substr(-1)==="%"?"prgb":"rgb"):c(b.h)&&c(b.s)&&c(b.v)?(D=(0,M.JX)(b.s),F=(0,M.JX)(b.v),A=(0,E.WE)(b.h,D,F),L=!0,W="hsv"):c(b.h)&&c(b.s)&&c(b.l)&&(D=(0,M.JX)(b.s),Z=(0,M.JX)(b.l),A=(0,E.ve)(b.h,D,Z),L=!0,W="hsl"),Object.prototype.hasOwnProperty.call(b,"a")&&(w=b.a)),w=(0,M.Yq)(w),{ok:L,format:b.format||W,r:Math.min(255,Math.max(A.r,0)),g:Math.min(255,Math.max(A.g,0)),b:Math.min(255,Math.max(A.b,0)),a:w}}var g="[-\\+]?\\d+%?",x="[-\\+]?\\d*\\.\\d+%?",v="(?:".concat(x,")|(?:").concat(g,")"),u="[\\s|\\(]+(".concat(v,")[,|\\s]+(").concat(v,")[,|\\s]+(").concat(v,")\\s*\\)?"),t="[\\s|\\(]+(".concat(v,")[,|\\s]+(").concat(v,")[,|\\s]+(").concat(v,")[,|\\s]+(").concat(v,")\\s*\\)?"),e={CSS_UNIT:new RegExp(v),rgb:new RegExp("rgb"+u),rgba:new RegExp("rgba"+t),hsl:new RegExp("hsl"+u),hsla:new RegExp("hsla"+t),hsv:new RegExp("hsv"+u),hsva:new RegExp("hsva"+t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function o(b){if(b=b.trim().toLowerCase(),b.length===0)return!1;var A=!1;if(p.R[b])b=p.R[b],A=!0;else if(b==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var w=e.rgb.exec(b);return w?{r:w[1],g:w[2],b:w[3]}:(w=e.rgba.exec(b),w?{r:w[1],g:w[2],b:w[3],a:w[4]}:(w=e.hsl.exec(b),w?{h:w[1],s:w[2],l:w[3]}:(w=e.hsla.exec(b),w?{h:w[1],s:w[2],l:w[3],a:w[4]}:(w=e.hsv.exec(b),w?{h:w[1],s:w[2],v:w[3]}:(w=e.hsva.exec(b),w?{h:w[1],s:w[2],v:w[3],a:w[4]}:(w=e.hex8.exec(b),w?{r:(0,E.VD)(w[1]),g:(0,E.VD)(w[2]),b:(0,E.VD)(w[3]),a:(0,E.T6)(w[4]),format:A?"name":"hex8"}:(w=e.hex6.exec(b),w?{r:(0,E.VD)(w[1]),g:(0,E.VD)(w[2]),b:(0,E.VD)(w[3]),format:A?"name":"hex"}:(w=e.hex4.exec(b),w?{r:(0,E.VD)(w[1]+w[1]),g:(0,E.VD)(w[2]+w[2]),b:(0,E.VD)(w[3]+w[3]),a:(0,E.T6)(w[4]+w[4]),format:A?"name":"hex8"}:(w=e.hex3.exec(b),w?{r:(0,E.VD)(w[1]+w[1]),g:(0,E.VD)(w[2]+w[2]),b:(0,E.VD)(w[3]+w[3]),format:A?"name":"hex"}:!1)))))))))}function c(b){return Boolean(e.CSS_UNIT.exec(String(b)))}},10274:function(Ie,S,y){"use strict";y.d(S,{C:function(){return g}});var E=y(86500),p=y(48701),M=y(1350),d=y(90279),g=function(){function v(u,t){u===void 0&&(u=""),t===void 0&&(t={});var e;if(u instanceof v)return u;typeof u=="number"&&(u=(0,E.Yt)(u)),this.originalInput=u;var o=(0,M.uA)(u);this.originalInput=u,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(e=t.format)!==null&&e!==void 0?e:o.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return v.prototype.isDark=function(){return this.getBrightness()<128},v.prototype.isLight=function(){return!this.isDark()},v.prototype.getBrightness=function(){var u=this.toRgb();return(u.r*299+u.g*587+u.b*114)/1e3},v.prototype.getLuminance=function(){var u=this.toRgb(),t,e,o,c=u.r/255,b=u.g/255,A=u.b/255;return c<=.03928?t=c/12.92:t=Math.pow((c+.055)/1.055,2.4),b<=.03928?e=b/12.92:e=Math.pow((b+.055)/1.055,2.4),A<=.03928?o=A/12.92:o=Math.pow((A+.055)/1.055,2.4),.2126*t+.7152*e+.0722*o},v.prototype.getAlpha=function(){return this.a},v.prototype.setAlpha=function(u){return this.a=(0,d.Yq)(u),this.roundA=Math.round(100*this.a)/100,this},v.prototype.isMonochrome=function(){var u=this.toHsl().s;return u===0},v.prototype.toHsv=function(){var u=(0,E.py)(this.r,this.g,this.b);return{h:u.h*360,s:u.s,v:u.v,a:this.a}},v.prototype.toHsvString=function(){var u=(0,E.py)(this.r,this.g,this.b),t=Math.round(u.h*360),e=Math.round(u.s*100),o=Math.round(u.v*100);return this.a===1?"hsv(".concat(t,", ").concat(e,"%, ").concat(o,"%)"):"hsva(".concat(t,", ").concat(e,"%, ").concat(o,"%, ").concat(this.roundA,")")},v.prototype.toHsl=function(){var u=(0,E.lC)(this.r,this.g,this.b);return{h:u.h*360,s:u.s,l:u.l,a:this.a}},v.prototype.toHslString=function(){var u=(0,E.lC)(this.r,this.g,this.b),t=Math.round(u.h*360),e=Math.round(u.s*100),o=Math.round(u.l*100);return this.a===1?"hsl(".concat(t,", ").concat(e,"%, ").concat(o,"%)"):"hsla(".concat(t,", ").concat(e,"%, ").concat(o,"%, ").concat(this.roundA,")")},v.prototype.toHex=function(u){return u===void 0&&(u=!1),(0,E.vq)(this.r,this.g,this.b,u)},v.prototype.toHexString=function(u){return u===void 0&&(u=!1),"#"+this.toHex(u)},v.prototype.toHex8=function(u){return u===void 0&&(u=!1),(0,E.s)(this.r,this.g,this.b,this.a,u)},v.prototype.toHex8String=function(u){return u===void 0&&(u=!1),"#"+this.toHex8(u)},v.prototype.toHexShortString=function(u){return u===void 0&&(u=!1),this.a===1?this.toHexString(u):this.toHex8String(u)},v.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},v.prototype.toRgbString=function(){var u=Math.round(this.r),t=Math.round(this.g),e=Math.round(this.b);return this.a===1?"rgb(".concat(u,", ").concat(t,", ").concat(e,")"):"rgba(".concat(u,", ").concat(t,", ").concat(e,", ").concat(this.roundA,")")},v.prototype.toPercentageRgb=function(){var u=function(t){return"".concat(Math.round((0,d.sh)(t,255)*100),"%")};return{r:u(this.r),g:u(this.g),b:u(this.b),a:this.a}},v.prototype.toPercentageRgbString=function(){var u=function(t){return Math.round((0,d.sh)(t,255)*100)};return this.a===1?"rgb(".concat(u(this.r),"%, ").concat(u(this.g),"%, ").concat(u(this.b),"%)"):"rgba(".concat(u(this.r),"%, ").concat(u(this.g),"%, ").concat(u(this.b),"%, ").concat(this.roundA,")")},v.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var u="#"+(0,E.vq)(this.r,this.g,this.b,!1),t=0,e=Object.entries(p.R);t<e.length;t++){var o=e[t],c=o[0],b=o[1];if(u===b)return c}return!1},v.prototype.toString=function(u){var t=Boolean(u);u=u!=null?u:this.format;var e=!1,o=this.a<1&&this.a>=0,c=!t&&o&&(u.startsWith("hex")||u==="name");return c?u==="name"&&this.a===0?this.toName():this.toRgbString():(u==="rgb"&&(e=this.toRgbString()),u==="prgb"&&(e=this.toPercentageRgbString()),(u==="hex"||u==="hex6")&&(e=this.toHexString()),u==="hex3"&&(e=this.toHexString(!0)),u==="hex4"&&(e=this.toHex8String(!0)),u==="hex8"&&(e=this.toHex8String()),u==="name"&&(e=this.toName()),u==="hsl"&&(e=this.toHslString()),u==="hsv"&&(e=this.toHsvString()),e||this.toHexString())},v.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},v.prototype.clone=function(){return new v(this.toString())},v.prototype.lighten=function(u){u===void 0&&(u=10);var t=this.toHsl();return t.l+=u/100,t.l=(0,d.V2)(t.l),new v(t)},v.prototype.brighten=function(u){u===void 0&&(u=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(u/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(u/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(u/100)))),new v(t)},v.prototype.darken=function(u){u===void 0&&(u=10);var t=this.toHsl();return t.l-=u/100,t.l=(0,d.V2)(t.l),new v(t)},v.prototype.tint=function(u){return u===void 0&&(u=10),this.mix("white",u)},v.prototype.shade=function(u){return u===void 0&&(u=10),this.mix("black",u)},v.prototype.desaturate=function(u){u===void 0&&(u=10);var t=this.toHsl();return t.s-=u/100,t.s=(0,d.V2)(t.s),new v(t)},v.prototype.saturate=function(u){u===void 0&&(u=10);var t=this.toHsl();return t.s+=u/100,t.s=(0,d.V2)(t.s),new v(t)},v.prototype.greyscale=function(){return this.desaturate(100)},v.prototype.spin=function(u){var t=this.toHsl(),e=(t.h+u)%360;return t.h=e<0?360+e:e,new v(t)},v.prototype.mix=function(u,t){t===void 0&&(t=50);var e=this.toRgb(),o=new v(u).toRgb(),c=t/100,b={r:(o.r-e.r)*c+e.r,g:(o.g-e.g)*c+e.g,b:(o.b-e.b)*c+e.b,a:(o.a-e.a)*c+e.a};return new v(b)},v.prototype.analogous=function(u,t){u===void 0&&(u=6),t===void 0&&(t=30);var e=this.toHsl(),o=360/t,c=[this];for(e.h=(e.h-(o*u>>1)+720)%360;--u;)e.h=(e.h+o)%360,c.push(new v(e));return c},v.prototype.complement=function(){var u=this.toHsl();return u.h=(u.h+180)%360,new v(u)},v.prototype.monochromatic=function(u){u===void 0&&(u=6);for(var t=this.toHsv(),e=t.h,o=t.s,c=t.v,b=[],A=1/u;u--;)b.push(new v({h:e,s:o,v:c})),c=(c+A)%1;return b},v.prototype.splitcomplement=function(){var u=this.toHsl(),t=u.h;return[this,new v({h:(t+72)%360,s:u.s,l:u.l}),new v({h:(t+216)%360,s:u.s,l:u.l})]},v.prototype.onBackground=function(u){var t=this.toRgb(),e=new v(u).toRgb(),o=t.a+e.a*(1-t.a);return new v({r:(t.r*t.a+e.r*e.a*(1-t.a))/o,g:(t.g*t.a+e.g*e.a*(1-t.a))/o,b:(t.b*t.a+e.b*e.a*(1-t.a))/o,a:o})},v.prototype.triad=function(){return this.polyad(3)},v.prototype.tetrad=function(){return this.polyad(4)},v.prototype.polyad=function(u){for(var t=this.toHsl(),e=t.h,o=[this],c=360/u,b=1;b<u;b++)o.push(new v({h:(e+b*c)%360,s:t.s,l:t.l}));return o},v.prototype.equals=function(u){return this.toRgbString()===new v(u).toRgbString()},v}();function x(v,u){return v===void 0&&(v=""),u===void 0&&(u={}),new g(v,u)}},90279:function(Ie,S,y){"use strict";y.d(S,{FZ:function(){return v},JX:function(){return x},V2:function(){return p},Yq:function(){return g},sh:function(){return E}});function E(u,t){M(u)&&(u="100%");var e=d(u);return u=t===360?u:Math.min(t,Math.max(0,parseFloat(u))),e&&(u=parseInt(String(u*t),10)/100),Math.abs(u-t)<1e-6?1:(t===360?u=(u<0?u%t+t:u%t)/parseFloat(String(t)):u=u%t/parseFloat(String(t)),u)}function p(u){return Math.min(1,Math.max(0,u))}function M(u){return typeof u=="string"&&u.indexOf(".")!==-1&&parseFloat(u)===1}function d(u){return typeof u=="string"&&u.indexOf("%")!==-1}function g(u){return u=parseFloat(u),(isNaN(u)||u<0||u>1)&&(u=1),u}function x(u){return u<=1?"".concat(Number(u)*100,"%"):u}function v(u){return u.length===1?"0"+u:String(u)}},38163:function(Ie){Ie.exports=S;function S(p,M){var d=p&&p.type,g;if(d==="FeatureCollection")for(g=0;g<p.features.length;g++)S(p.features[g],M);else if(d==="GeometryCollection")for(g=0;g<p.geometries.length;g++)S(p.geometries[g],M);else if(d==="Feature")S(p.geometry,M);else if(d==="Polygon")y(p.coordinates,M);else if(d==="MultiPolygon")for(g=0;g<p.coordinates.length;g++)y(p.coordinates[g],M);return p}function y(p,M){if(p.length!==0){E(p[0],M);for(var d=1;d<p.length;d++)E(p[d],!M)}}function E(p,M){for(var d=0,g=0,x=0,v=p.length,u=v-1;x<v;u=x++){var t=(p[x][0]-p[u][0])*(p[u][1]+p[x][1]),e=d+t;g+=Math.abs(d)>=Math.abs(t)?d-e+t:t-e+d,d=e}d+g>=0!=!!M&&p.reverse()}},75550:function(Ie){"use strict";Ie.exports=S;function S(y,E){this.x=y,this.y=E}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,E){return this.clone()._rotateAround(y,E)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var E=y.x-this.x,p=y.y-this.y;return E*E+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,E){return Math.atan2(this.x*E-this.y*y,this.x*y+this.y*E)},_matMult:function(y){var E=y[0]*this.x+y[1]*this.y,p=y[2]*this.x+y[3]*this.y;return this.x=E,this.y=p,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var E=Math.cos(y),p=Math.sin(y),M=E*this.x-p*this.y,d=p*this.x+E*this.y;return this.x=M,this.y=d,this},_rotateAround:function(y,E){var p=Math.cos(y),M=Math.sin(y),d=E.x+p*(this.x-E.x)-M*(this.y-E.y),g=E.y+M*(this.x-E.x)+p*(this.y-E.y);return this.x=d,this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(y){return y instanceof S?y:Array.isArray(y)?new S(y[0],y[1]):y}},99874:function(Ie){Ie.exports=S;function S(y,E,p,M){this.cx=3*y,this.bx=3*(p-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(M-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=M,this.p2x=p,this.p2y=M}S.prototype.sampleCurveX=function(y){return((this.ax*y+this.bx)*y+this.cx)*y},S.prototype.sampleCurveY=function(y){return((this.ay*y+this.by)*y+this.cy)*y},S.prototype.sampleCurveDerivativeX=function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},S.prototype.solveCurveX=function(y,E){typeof E=="undefined"&&(E=1e-6);var p,M,d,g,x;for(d=y,x=0;x<8;x++){if(g=this.sampleCurveX(d)-y,Math.abs(g)<E)return d;var v=this.sampleCurveDerivativeX(d);if(Math.abs(v)<1e-6)break;d=d-g/v}if(p=0,M=1,d=y,d<p)return p;if(d>M)return M;for(;p<M;){if(g=this.sampleCurveX(d),Math.abs(g-y)<E)return d;y>g?p=d:M=d,d=(M-p)*.5+p}return d},S.prototype.solve=function(y,E){return this.sampleCurveY(this.solveCurveX(y,E))}},38929:function(Ie,S,y){Ie.exports.VectorTile=y(22779),y(66024),y(59701)},22779:function(Ie,S,y){"use strict";var E=y(59701);Ie.exports=p;function p(d,g){this.layers=d.readFields(M,{},g)}function M(d,g,x){if(d===3){var v=new E(x,x.readVarint()+x.pos);v.length&&(g[v.name]=v)}}},66024:function(Ie,S,y){"use strict";var E=y(75550);Ie.exports=p;function p(v,u,t,e,o){this.properties={},this.extent=t,this.type=0,this._pbf=v,this._geometry=-1,this._keys=e,this._values=o,v.readFields(M,this,u)}function M(v,u,t){v==1?u.id=t.readVarint():v==2?d(t,u):v==3?u.type=t.readVarint():v==4&&(u._geometry=t.pos)}function d(v,u){for(var t=v.readVarint()+v.pos;v.pos<t;){var e=u._keys[v.readVarint()],o=u._values[v.readVarint()];u.properties[e]=o}}p.types=["Unknown","Point","LineString","Polygon"],p.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var u=v.readVarint()+v.pos,t=1,e=0,o=0,c=0,b=[],A;v.pos<u;){if(e<=0){var w=v.readVarint();t=w&7,e=w>>3}if(e--,t===1||t===2)o+=v.readSVarint(),c+=v.readSVarint(),t===1&&(A&&b.push(A),A=[]),A.push(new E(o,c));else if(t===7)A&&A.push(A[0].clone());else throw new Error("unknown command "+t)}return A&&b.push(A),b},p.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var u=v.readVarint()+v.pos,t=1,e=0,o=0,c=0,b=1/0,A=-1/0,w=1/0,D=-1/0;v.pos<u;){if(e<=0){var F=v.readVarint();t=F&7,e=F>>3}if(e--,t===1||t===2)o+=v.readSVarint(),c+=v.readSVarint(),o<b&&(b=o),o>A&&(A=o),c<w&&(w=c),c>D&&(D=c);else if(t!==7)throw new Error("unknown command "+t)}return[b,w,A,D]},p.prototype.toGeoJSON=function(v,u,t){var e=this.extent*Math.pow(2,t),o=this.extent*v,c=this.extent*u,b=this.loadGeometry(),A=p.types[this.type],w,D;function F(W){for(var k=0;k<W.length;k++){var de=W[k],H=180-(de.y+c)*360/e;W[k]=[(de.x+o)*360/e-180,360/Math.PI*Math.atan(Math.exp(H*Math.PI/180))-90]}}switch(this.type){case 1:var Z=[];for(w=0;w<b.length;w++)Z[w]=b[w][0];b=Z,F(b);break;case 2:for(w=0;w<b.length;w++)F(b[w]);break;case 3:for(b=g(b),w=0;w<b.length;w++)for(D=0;D<b[w].length;D++)F(b[w][D]);break}b.length===1?b=b[0]:A="Multi"+A;var L={type:"Feature",geometry:{type:A,coordinates:b},properties:this.properties};return"id"in this&&(L.id=this.id),L};function g(v){var u=v.length;if(u<=1)return[v];for(var t=[],e,o,c=0;c<u;c++){var b=x(v[c]);b!==0&&(o===void 0&&(o=b<0),o===b<0?(e&&t.push(e),e=[v[c]]):e.push(v[c]))}return e&&t.push(e),t}function x(v){for(var u=0,t=0,e=v.length,o=e-1,c,b;t<e;o=t++)c=v[t],b=v[o],u+=(b.x-c.x)*(c.y+b.y);return u}},59701:function(Ie,S,y){"use strict";var E=y(66024);Ie.exports=p;function p(g,x){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=g,this._keys=[],this._values=[],this._features=[],g.readFields(M,this,x),this.length=this._features.length}function M(g,x,v){g===15?x.version=v.readVarint():g===1?x.name=v.readString():g===5?x.extent=v.readVarint():g===2?x._features.push(v.pos):g===3?x._keys.push(v.readString()):g===4&&x._values.push(d(v))}function d(g){for(var x=null,v=g.readVarint()+g.pos;g.pos<v;){var u=g.readVarint()>>3;x=u===1?g.readString():u===2?g.readFloat():u===3?g.readDouble():u===4?g.readVarint64():u===5?g.readVarint():u===6?g.readSVarint():u===7?g.readBoolean():null}return x}p.prototype.feature=function(g){if(g<0||g>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[g];var x=this._pbf.readVarint()+this._pbf.pos;return new E(this._pbf,x,this.extent,this._keys,this._values)}},96159:function(Ie,S,y){"use strict";var E;y.d(S,{M2:function(){return d},Tm:function(){return x},l$:function(){return M}});var p=y(67294);const{isValidElement:M}=E||(E=y.t(p,2));function d(v){return v&&M(v)&&v.type===p.Fragment}function g(v,u,t){return M(v)?p.cloneElement(v,typeof t=="function"?t(v.props||{}):t):u}function x(v,u){return g(v,v,u)}},91622:function(Ie,S,y){"use strict";y.d(S,{ZP:function(){return si}});var E=y(94184),p=y.n(E),M=y(98423),d=y(42550),g=y(67294),x=y(5110),v=y(53124),u=y(96159),t=y(67968);const e=it=>{const{componentCls:Qn,colorPrimary:pe}=it;return{[Qn]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${pe})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${it.motionEaseOutCirc}`,`opacity 2s ${it.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}};var o=(0,t.Z)("Wave",it=>[e(it)]),c=y(82225),b=y(38135),A=y(75164);function w(it){const Qn=(it||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return Qn&&Qn[1]&&Qn[2]&&Qn[3]?!(Qn[1]===Qn[2]&&Qn[2]===Qn[3]):!0}function D(it){return it&&it!=="#fff"&&it!=="#ffffff"&&it!=="rgb(255, 255, 255)"&&it!=="rgba(255, 255, 255, 1)"&&w(it)&&!/rgba\((?:\d*, ){3}0\)/.test(it)&&it!=="transparent"}function F(it){const{borderTopColor:Qn,borderColor:pe,backgroundColor:at}=getComputedStyle(it);return D(Qn)?Qn:D(pe)?pe:D(at)?at:null}function Z(it){return Number.isNaN(it)?0:it}const L=it=>{const{className:Qn,target:pe}=it,at=g.useRef(null),[Dt,vn]=g.useState(null),[bn,Pn]=g.useState([]),[ar,Zr]=g.useState(0),[Xr,ui]=g.useState(0),[qr,Ti]=g.useState(0),[fa,Bn]=g.useState(0),[Li,Ji]=g.useState(!1),Na={left:ar,top:Xr,width:qr,height:fa,borderRadius:bn.map(ha=>`${ha}px`).join(" ")};Dt&&(Na["--wave-color"]=Dt);function ea(){const ha=getComputedStyle(pe);vn(F(pe));const Ta=ha.position==="static",{borderLeftWidth:Aa,borderTopWidth:Wi}=ha;Zr(Ta?pe.offsetLeft:Z(-parseFloat(Aa))),ui(Ta?pe.offsetTop:Z(-parseFloat(Wi))),Ti(pe.offsetWidth),Bn(pe.offsetHeight);const{borderTopLeftRadius:go,borderTopRightRadius:Ja,borderBottomLeftRadius:$o,borderBottomRightRadius:Ua}=ha;Pn([go,Ja,Ua,$o].map(Wa=>Z(parseFloat(Wa))))}return g.useEffect(()=>{if(pe){const ha=(0,A.Z)(()=>{ea(),Ji(!0)});let Ta;return typeof ResizeObserver!="undefined"&&(Ta=new ResizeObserver(ea),Ta.observe(pe)),()=>{A.Z.cancel(ha),Ta==null||Ta.disconnect()}}},[]),Li?g.createElement(c.ZP,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(ha,Ta)=>{var Aa;if(Ta.deadline||Ta.propertyName==="opacity"){const Wi=(Aa=at.current)===null||Aa===void 0?void 0:Aa.parentElement;(0,b.v)(Wi).then(()=>{Wi==null||Wi.remove()})}return!1}},ha=>{let{className:Ta}=ha;return g.createElement("div",{ref:at,className:p()(Qn,Ta),style:Na})}):null};function W(it,Qn){const pe=document.createElement("div");pe.style.position="absolute",pe.style.left="0px",pe.style.top="0px",it==null||it.insertBefore(pe,it==null?void 0:it.firstChild),(0,b.s)(g.createElement(L,{target:it,className:Qn}),pe)}function k(it,Qn){function pe(){const at=it.current;W(at,Qn)}return pe}var H=it=>{const{children:Qn,disabled:pe}=it,{getPrefixCls:at}=(0,g.useContext)(v.E_),Dt=(0,g.useRef)(null),vn=at("wave"),[,bn]=o(vn),Pn=k(Dt,p()(vn,bn));if(g.useEffect(()=>{const Zr=Dt.current;if(!Zr||Zr.nodeType!==1||pe)return;const Xr=ui=>{ui.target.tagName==="INPUT"||!(0,x.Z)(ui.target)||!Zr.getAttribute||Zr.getAttribute("disabled")||Zr.disabled||Zr.className.includes("disabled")||Zr.className.includes("-leave")||Pn()};return Zr.addEventListener("click",Xr,!0),()=>{Zr.removeEventListener("click",Xr,!0)}},[pe]),!g.isValidElement(Qn))return Qn!=null?Qn:null;const ar=(0,d.Yr)(Qn)?(0,d.sQ)(Qn.ref,Dt):Dt;return(0,u.Tm)(Qn,{ref:ar})},ue=y(98866),ve=y(97647),ke=y(50344),Ae=function(it,Qn){var pe={};for(var at in it)Object.prototype.hasOwnProperty.call(it,at)&&Qn.indexOf(at)<0&&(pe[at]=it[at]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Dt=0,at=Object.getOwnPropertySymbols(it);Dt<at.length;Dt++)Qn.indexOf(at[Dt])<0&&Object.prototype.propertyIsEnumerable.call(it,at[Dt])&&(pe[at[Dt]]=it[at[Dt]]);return pe};const be=g.createContext(null),G=(it,Qn)=>{const pe=g.useContext(be),at=g.useMemo(()=>{if(!pe)return"";const{compactDirection:Dt,isFirstItem:vn,isLastItem:bn}=pe,Pn=Dt==="vertical"?"-vertical-":"-";return p()({[`${it}-compact${Pn}item`]:!0,[`${it}-compact${Pn}first-item`]:vn,[`${it}-compact${Pn}last-item`]:bn,[`${it}-compact${Pn}item-rtl`]:Qn==="rtl"})},[it,Qn,pe]);return{compactSize:pe==null?void 0:pe.compactSize,compactDirection:pe==null?void 0:pe.compactDirection,compactItemClassnames:at}},ie=it=>{let{children:Qn}=it;return React.createElement(be.Provider,{value:null},Qn)},V=it=>{var{children:Qn}=it,pe=Ae(it,["children"]);return React.createElement(be.Provider,{value:pe},Qn)},ae=it=>{const{getPrefixCls:Qn,direction:pe}=React.useContext(ConfigContext),{size:at="middle",direction:Dt,block:vn,prefixCls:bn,className:Pn,rootClassName:ar,children:Zr}=it,Xr=Ae(it,["size","direction","block","prefixCls","className","rootClassName","children"]),ui=Qn("space-compact",bn),[qr,Ti]=useStyle(ui),fa=classNames(ui,Ti,{[`${ui}-rtl`]:pe==="rtl",[`${ui}-block`]:vn,[`${ui}-vertical`]:Dt==="vertical"},Pn,ar),Bn=React.useContext(be),Li=toArray(Zr),Ji=React.useMemo(()=>Li.map((Na,ea)=>{const ha=Na&&Na.key||`${ui}-item-${ea}`;return React.createElement(V,{key:ha,compactSize:at,compactDirection:Dt,isFirstItem:ea===0&&(!Bn||(Bn==null?void 0:Bn.isFirstItem)),isLastItem:ea===Li.length-1&&(!Bn||(Bn==null?void 0:Bn.isLastItem))},Na)}),[at,Li,Bn]);return Li.length===0?null:qr(React.createElement("div",Object.assign({className:fa},Xr),Ji))};var K=null,he=y(50888);const Se=()=>({width:0,opacity:0,transform:"scale(0)"}),Fe=it=>({width:it.scrollWidth,opacity:1,transform:"scale(1)"});var lt=it=>{let{prefixCls:Qn,loading:pe,existIcon:at}=it;const Dt=!!pe;return at?g.createElement("span",{className:`${Qn}-loading-icon`},g.createElement(he.Z,null)):g.createElement(c.ZP,{visible:Dt,motionName:`${Qn}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:Se,onAppearActive:Fe,onEnterStart:Se,onEnterActive:Fe,onLeaveStart:Fe,onLeaveActive:Se},(vn,bn)=>{let{className:Pn,style:ar}=vn;return g.createElement("span",{className:`${Qn}-loading-icon`,style:ar,ref:bn},g.createElement(he.Z,{className:Pn}))})},Gt=y(21823),pn=function(it,Qn){var pe={};for(var at in it)Object.prototype.hasOwnProperty.call(it,at)&&Qn.indexOf(at)<0&&(pe[at]=it[at]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Dt=0,at=Object.getOwnPropertySymbols(it);Dt<at.length;Dt++)Qn.indexOf(at[Dt])<0&&Object.prototype.propertyIsEnumerable.call(it,at[Dt])&&(pe[at[Dt]]=it[at[Dt]]);return pe};const $n=g.createContext(void 0);var st=it=>{const{getPrefixCls:Qn,direction:pe}=g.useContext(v.E_),{prefixCls:at,size:Dt,className:vn}=it,bn=pn(it,["prefixCls","size","className"]),Pn=Qn("btn-group",at),[,,ar]=(0,Gt.dQ)();let Zr="";switch(Dt){case"large":Zr="lg";break;case"small":Zr="sm";break;case"middle":case void 0:break;default:}const Xr=p()(Pn,{[`${Pn}-${Zr}`]:Zr,[`${Pn}-rtl`]:pe==="rtl"},vn,ar);return g.createElement($n.Provider,{value:Dt},g.createElement("div",Object.assign({},bn,{className:Xr})))};const xt=/^[\u4e00-\u9fa5]{2}$/,tn=xt.test.bind(xt);function Un(it){return typeof it=="string"}function We(it){return it==="text"||it==="link"}function Yt(it,Qn){if(it==null)return;const pe=Qn?" ":"";return typeof it!="string"&&typeof it!="number"&&Un(it.type)&&tn(it.props.children)?(0,u.Tm)(it,{children:it.props.children.split("").join(pe)}):typeof it=="string"?tn(it)?g.createElement("span",null,it.split("").join(pe)):g.createElement("span",null,it):(0,u.M2)(it)?g.createElement("span",null,it):it}function Ze(it,Qn){let pe=!1;const at=[];return g.Children.forEach(it,Dt=>{const vn=typeof Dt,bn=vn==="string"||vn==="number";if(pe&&bn){const Pn=at.length-1,ar=at[Pn];at[Pn]=`${ar}${Dt}`}else at.push(Dt);pe=bn}),g.Children.map(at,Dt=>Yt(Dt,Qn))}const Pe=null,ze=null,ht=null;var P=y(45503);const ne=(it,Qn)=>({[`> span, > ${it}`]:{"&:not(:last-child)":{[`&, & > ${it}`]:{"&:not(:disabled)":{borderInlineEndColor:Qn}}},"&:not(:first-child)":{[`&, & > ${it}`]:{"&:not(:disabled)":{borderInlineStartColor:Qn}}}}});var oe=it=>{const{componentCls:Qn,fontSize:pe,lineWidth:at,colorPrimaryHover:Dt,colorErrorHover:vn}=it;return{[`${Qn}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${Qn}`]:{"&:not(:last-child)":{[`&, & > ${Qn}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-at,[`&, & > ${Qn}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[Qn]:{position:"relative",zIndex:1,[`&:hover,
          &:focus,
          &:active`]:{zIndex:2},"&[disabled]":{zIndex:0}},[`${Qn}-icon-only`]:{fontSize:pe}},ne(`${Qn}-primary`,Dt),ne(`${Qn}-danger`,vn)]}},ce=y(14747);function ye(it,Qn,pe){const{focusElCls:at,focus:Dt,borderElCls:vn}=pe,bn=vn?"> *":"",Pn=["hover",Dt?"focus":null,"active"].filter(Boolean).map(ar=>`&:${ar} ${bn}`).join(",");return{[`&-item:not(${Qn}-last-item)`]:{marginInlineEnd:-it.lineWidth},"&-item":Object.assign(Object.assign({[Pn]:{zIndex:2}},at?{[`&${at}`]:{zIndex:2}}:{}),{[`&[disabled] ${bn}`]:{zIndex:0}})}}function Y(it,Qn,pe){const{borderElCls:at}=pe,Dt=at?`> ${at}`:"";return{[`&-item:not(${Qn}-first-item):not(${Qn}-last-item) ${Dt}`]:{borderRadius:0},[`&-item:not(${Qn}-last-item)${Qn}-first-item`]:{[`& ${Dt}, &${it}-sm ${Dt}, &${it}-lg ${Dt}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${Qn}-first-item)${Qn}-last-item`]:{[`& ${Dt}, &${it}-sm ${Dt}, &${it}-lg ${Dt}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Ne(it){let Qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:pe}=it,at=`${pe}-compact`;return{[at]:Object.assign(Object.assign({},ye(it,at,Qn)),Y(pe,at,Qn))}}function Qe(it,Qn){return{[`&-item:not(${Qn}-last-item)`]:{marginBottom:-it.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function mt(it,Qn){return{[`&-item:not(${Qn}-first-item):not(${Qn}-last-item)`]:{borderRadius:0},[`&-item${Qn}-first-item:not(${Qn}-last-item)`]:{[`&, &${it}-sm, &${it}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${Qn}-last-item:not(${Qn}-first-item)`]:{[`&, &${it}-sm, &${it}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Ve(it){const Qn=`${it.componentCls}-compact-vertical`;return{[Qn]:Object.assign(Object.assign({},Qe(it,Qn)),mt(it.componentCls,Qn))}}const rt=it=>{const{componentCls:Qn,iconCls:pe}=it;return{[Qn]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${it.lineWidth}px ${it.lineType} transparent`,cursor:"pointer",transition:`all ${it.motionDurationMid} ${it.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:it.lineHeight,color:it.colorText,"> span":{display:"inline-block"},[`> ${pe} + span, > span + ${pe}`]:{marginInlineStart:it.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},(0,ce.Qy)(it)),[`&-icon-only${Qn}-compact-item`]:{flex:"none"},[`&-compact-item${Qn}-primary`]:{[`&:not([disabled]) + ${Qn}-compact-item${Qn}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-it.lineWidth,insetInlineStart:-it.lineWidth,display:"inline-block",width:it.lineWidth,height:`calc(100% + ${it.lineWidth*2}px)`,backgroundColor:it.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${Qn}-primary`]:{[`&:not([disabled]) + ${Qn}-compact-vertical-item${Qn}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-it.lineWidth,insetInlineStart:-it.lineWidth,display:"inline-block",width:`calc(100% + ${it.lineWidth*2}px)`,height:it.lineWidth,backgroundColor:it.colorPrimaryHover,content:'""'}}}}}}},yt=(it,Qn)=>({"&:not(:disabled)":{"&:hover":it,"&:active":Qn}}),Tt=it=>({minWidth:it.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Ht=it=>({borderRadius:it.controlHeight,paddingInlineStart:it.controlHeight/2,paddingInlineEnd:it.controlHeight/2}),en=it=>({cursor:"not-allowed",borderColor:it.colorBorder,color:it.colorTextDisabled,backgroundColor:it.colorBgContainerDisabled,boxShadow:"none"}),wt=(it,Qn,pe,at,Dt,vn,bn)=>({[`&${it}-background-ghost`]:Object.assign(Object.assign({color:Qn||void 0,backgroundColor:"transparent",borderColor:pe||void 0,boxShadow:"none"},yt(Object.assign({backgroundColor:"transparent"},vn),Object.assign({backgroundColor:"transparent"},bn))),{"&:disabled":{cursor:"not-allowed",color:at||void 0,borderColor:Dt||void 0}})}),Mn=it=>({"&:disabled":Object.assign({},en(it))}),kn=it=>Object.assign({},Mn(it)),jn=it=>({"&:disabled":{cursor:"not-allowed",color:it.colorTextDisabled}}),mn=it=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},kn(it)),{backgroundColor:it.colorBgContainer,borderColor:it.colorBorder,boxShadow:`0 ${it.controlOutlineWidth}px 0 ${it.controlTmpOutline}`}),yt({color:it.colorPrimaryHover,borderColor:it.colorPrimaryHover},{color:it.colorPrimaryActive,borderColor:it.colorPrimaryActive})),wt(it.componentCls,it.colorBgContainer,it.colorBgContainer,it.colorTextDisabled,it.colorBorder)),{[`&${it.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:it.colorError,borderColor:it.colorError},yt({color:it.colorErrorHover,borderColor:it.colorErrorBorderHover},{color:it.colorErrorActive,borderColor:it.colorErrorActive})),wt(it.componentCls,it.colorError,it.colorError,it.colorTextDisabled,it.colorBorder)),Mn(it))}),cr=it=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},kn(it)),{color:it.colorTextLightSolid,backgroundColor:it.colorPrimary,boxShadow:`0 ${it.controlOutlineWidth}px 0 ${it.controlOutline}`}),yt({color:it.colorTextLightSolid,backgroundColor:it.colorPrimaryHover},{color:it.colorTextLightSolid,backgroundColor:it.colorPrimaryActive})),wt(it.componentCls,it.colorPrimary,it.colorPrimary,it.colorTextDisabled,it.colorBorder,{color:it.colorPrimaryHover,borderColor:it.colorPrimaryHover},{color:it.colorPrimaryActive,borderColor:it.colorPrimaryActive})),{[`&${it.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:it.colorError,boxShadow:`0 ${it.controlOutlineWidth}px 0 ${it.colorErrorOutline}`},yt({backgroundColor:it.colorErrorHover},{backgroundColor:it.colorErrorActive})),wt(it.componentCls,it.colorError,it.colorError,it.colorTextDisabled,it.colorBorder,{color:it.colorErrorHover,borderColor:it.colorErrorHover},{color:it.colorErrorActive,borderColor:it.colorErrorActive})),Mn(it))}),Cr=it=>Object.assign(Object.assign({},mn(it)),{borderStyle:"dashed"}),mi=it=>Object.assign(Object.assign(Object.assign({color:it.colorLink},yt({color:it.colorLinkHover},{color:it.colorLinkActive})),jn(it)),{[`&${it.componentCls}-dangerous`]:Object.assign(Object.assign({color:it.colorError},yt({color:it.colorErrorHover},{color:it.colorErrorActive})),jn(it))}),$r=it=>Object.assign(Object.assign(Object.assign({},yt({color:it.colorText,backgroundColor:it.colorBgTextHover},{color:it.colorText,backgroundColor:it.colorBgTextActive})),jn(it)),{[`&${it.componentCls}-dangerous`]:Object.assign(Object.assign({color:it.colorError},jn(it)),yt({color:it.colorErrorHover,backgroundColor:it.colorErrorBg},{color:it.colorErrorHover,backgroundColor:it.colorErrorBg}))}),Sr=it=>Object.assign(Object.assign({},en(it)),{[`&${it.componentCls}:hover`]:Object.assign({},en(it))}),dr=it=>{const{componentCls:Qn}=it;return{[`${Qn}-default`]:mn(it),[`${Qn}-primary`]:cr(it),[`${Qn}-dashed`]:Cr(it),[`${Qn}-link`]:mi(it),[`${Qn}-text`]:$r(it),[`${Qn}-disabled`]:Sr(it)}},Pr=function(it){let Qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:pe,iconCls:at,controlHeight:Dt,fontSize:vn,lineHeight:bn,lineWidth:Pn,borderRadius:ar,buttonPaddingHorizontal:Zr}=it,Xr=Math.max(0,(Dt-vn*bn)/2-Pn),ui=Zr-Pn,qr=`${pe}-icon-only`;return[{[`${pe}${Qn}`]:{fontSize:vn,height:Dt,padding:`${Xr}px ${ui}px`,borderRadius:ar,[`&${qr}`]:{width:Dt,paddingInlineStart:0,paddingInlineEnd:0,[`&${pe}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${pe}-loading`]:{opacity:it.opacityLoading,cursor:"default"},[`${pe}-loading-icon`]:{transition:`width ${it.motionDurationSlow} ${it.motionEaseInOut}, opacity ${it.motionDurationSlow} ${it.motionEaseInOut}`},[`&:not(${qr}) ${pe}-loading-icon > ${at}`]:{marginInlineEnd:it.marginXS}}},{[`${pe}${pe}-circle${Qn}`]:Tt(it)},{[`${pe}${pe}-round${Qn}`]:Ht(it)}]},Hr=it=>Pr(it),Xi=it=>{const Qn=(0,P.TS)(it,{controlHeight:it.controlHeightSM,padding:it.paddingXS,buttonPaddingHorizontal:8,borderRadius:it.borderRadiusSM});return Pr(Qn,`${it.componentCls}-sm`)},Kn=it=>{const Qn=(0,P.TS)(it,{controlHeight:it.controlHeightLG,fontSize:it.fontSizeLG,borderRadius:it.borderRadiusLG});return Pr(Qn,`${it.componentCls}-lg`)},Gn=it=>{const{componentCls:Qn}=it;return{[Qn]:{[`&${Qn}-block`]:{width:"100%"}}}};var pt=(0,t.Z)("Button",it=>{const{controlTmpOutline:Qn,paddingContentHorizontal:pe}=it,at=(0,P.TS)(it,{colorOutlineDefault:Qn,buttonPaddingHorizontal:pe});return[rt(at),Xi(at),Hr(at),Kn(at),Gn(at),dr(at),oe(at),Ne(it),Ve(it)]}),Ha=function(it,Qn){var pe={};for(var at in it)Object.prototype.hasOwnProperty.call(it,at)&&Qn.indexOf(at)<0&&(pe[at]=it[at]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Dt=0,at=Object.getOwnPropertySymbols(it);Dt<at.length;Dt++)Qn.indexOf(at[Dt])<0&&Object.prototype.propertyIsEnumerable.call(it,at[Dt])&&(pe[at[Dt]]=it[at[Dt]]);return pe};function Sa(it){return it==="danger"?{danger:!0}:{type:it}}function Qa(it){if(typeof it=="object"&&it){const Qn=it==null?void 0:it.delay;return{loading:!1,delay:!Number.isNaN(Qn)&&typeof Qn=="number"?Qn:0}}return{loading:!!it,delay:0}}const ma=(it,Qn)=>{const{loading:pe=!1,prefixCls:at,type:Dt="default",danger:vn,shape:bn="default",size:Pn,disabled:ar,className:Zr,rootClassName:Xr,children:ui,icon:qr,ghost:Ti=!1,block:fa=!1,htmlType:Bn="button"}=it,Li=Ha(it,["loading","prefixCls","type","danger","shape","size","disabled","className","rootClassName","children","icon","ghost","block","htmlType"]),{getPrefixCls:Ji,autoInsertSpaceInButton:Na,direction:ea}=(0,g.useContext)(v.E_),ha=Ji("btn",at),[Ta,Aa]=pt(ha),Wi=(0,g.useContext)(ve.Z),go=(0,g.useContext)(ue.Z),Ja=ar!=null?ar:go,$o=(0,g.useContext)($n),Ua=(0,g.useMemo)(()=>Qa(pe),[pe]),[Wa,mo]=(0,g.useState)(Ua.loading),[fo,Ro]=(0,g.useState)(!1),te=(0,g.createRef)(),ho=(0,d.sQ)(Qn,te),wn=g.Children.count(ui)===1&&!qr&&!We(Dt);(0,g.useEffect)(()=>{let un=null;Ua.delay>0?un=setTimeout(()=>{un=null,mo(!0)},Ua.delay):mo(Ua.loading);function Hn(){un&&(clearTimeout(un),un=null)}return Hn},[Ua]),(0,g.useEffect)(()=>{if(!ho||!ho.current||Na===!1)return;const un=ho.current.textContent;wn&&tn(un)?fo||Ro(!0):fo&&Ro(!1)},[ho]);const tt=un=>{const{onClick:Hn}=it;if(Wa||Ja){un.preventDefault();return}Hn==null||Hn(un)},$e=Na!==!1,{compactSize:dt,compactItemClassnames:Ke}=G(ha,ea),qt={large:"lg",small:"sm",middle:void 0},nn=dt||$o||Pn||Wi,ln=nn&&qt[nn]||"",An=Wa?"loading":qr,Oe=(0,M.Z)(Li,["navigate"]),De=Oe.href!==void 0&&Ja,Be=p()(ha,Aa,{[`${ha}-${bn}`]:bn!=="default"&&bn,[`${ha}-${Dt}`]:Dt,[`${ha}-${ln}`]:ln,[`${ha}-icon-only`]:!ui&&ui!==0&&!!An,[`${ha}-background-ghost`]:Ti&&!We(Dt),[`${ha}-loading`]:Wa,[`${ha}-two-chinese-chars`]:fo&&$e&&!Wa,[`${ha}-block`]:fa,[`${ha}-dangerous`]:!!vn,[`${ha}-rtl`]:ea==="rtl",[`${ha}-disabled`]:De},Ke,Zr,Xr),Ye=qr&&!Wa?qr:g.createElement(lt,{existIcon:!!qr,prefixCls:ha,loading:!!Wa}),Nt=ui||ui===0?Ze(ui,wn&&$e):null;if(Oe.href!==void 0)return Ta(g.createElement("a",Object.assign({},Oe,{className:Be,onClick:tt,ref:ho}),Ye,Nt));let jt=g.createElement("button",Object.assign({},Li,{type:Bn,className:Be,onClick:tt,disabled:Ja,ref:ho}),Ye,Nt);return We(Dt)||(jt=g.createElement(H,{disabled:!!Wa},jt)),Ta(jt)},Ei=(0,g.forwardRef)(ma);Ei.Group=st,Ei.__ANT_BUTTON=!0;var Ia=Ei,si=Ia},98866:function(Ie,S,y){"use strict";y.d(S,{n:function(){return M}});var E=y(67294);const p=E.createContext(!1),M=d=>{let{children:g,disabled:x}=d;const v=E.useContext(p);return E.createElement(p.Provider,{value:x!=null?x:v},g)};S.Z=p},97647:function(Ie,S,y){"use strict";y.d(S,{q:function(){return M}});var E=y(67294);const p=E.createContext(void 0),M=d=>{let{children:g,size:x}=d;const v=E.useContext(p);return E.createElement(p.Provider,{value:x||v},g)};S.Z=p},53124:function(Ie,S,y){"use strict";y.d(S,{E_:function(){return d},oR:function(){return p}});var E=y(67294);const p="anticon",M=(x,v)=>v||(x?`ant-${x}`:"ant"),d=E.createContext({getPrefixCls:M,iconPrefixCls:p}),{Consumer:g}=d},95168:function(Ie,S,y){"use strict";y.d(S,{ZP:function(){return De}});var E=y(74902),p=y(38135),M=y(67294),d=y(27431),g=y(63017),x=y(18335),v=y(53236),u=y(56982),t={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},o=e,b={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},w={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},o),timePickerLocale:Object.assign({},b)},D=w;const F="${label} is not a valid ${type}";var L={locale:"en",Pagination:t,DatePicker:w,TimePicker:b,Calendar:D,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:F,method:F,array:F,object:F,number:F,date:F,boolean:F,integer:F,float:F,regexp:F,email:F,url:F,hex:F},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}};let W=Object.assign({},L.Modal);function k(Be){Be?W=Object.assign(Object.assign({},W),Be):W=Object.assign({},L.Modal)}function de(){return W}var ue=(0,M.createContext)(void 0);const ve="internalMark";var Ae=Be=>{const{locale:Ye={},children:Nt,_ANT_MARK__:jt}=Be;M.useEffect(()=>(k(Ye&&Ye.Modal),()=>{k()}),[Ye]);const un=M.useMemo(()=>Object.assign(Object.assign({},Ye),{exist:!0}),[Ye]);return M.createElement(ue.Provider,{value:un},Nt)},be=y(21823),G=y(2790),ie=y(53124),V=y(16397),ae=y(10274),K=y(98924),he=y(44958);const Se=`-ant-${Date.now()}-${Math.random()}`;function Fe(Be,Ye){const Nt={},jt=(Rn,fr)=>{let or=Rn.clone();return or=(fr==null?void 0:fr(or))||or,or.toRgbString()},un=(Rn,fr)=>{const or=new ae.C(Rn),$t=(0,V.R_)(or.toRgbString());Nt[`${fr}-color`]=jt(or),Nt[`${fr}-color-disabled`]=$t[1],Nt[`${fr}-color-hover`]=$t[4],Nt[`${fr}-color-active`]=$t[6],Nt[`${fr}-color-outline`]=or.clone().setAlpha(.2).toRgbString(),Nt[`${fr}-color-deprecated-bg`]=$t[0],Nt[`${fr}-color-deprecated-border`]=$t[2]};if(Ye.primaryColor){un(Ye.primaryColor,"primary");const Rn=new ae.C(Ye.primaryColor),fr=(0,V.R_)(Rn.toRgbString());fr.forEach(($t,er)=>{Nt[`primary-${er+1}`]=$t}),Nt["primary-color-deprecated-l-35"]=jt(Rn,$t=>$t.lighten(35)),Nt["primary-color-deprecated-l-20"]=jt(Rn,$t=>$t.lighten(20)),Nt["primary-color-deprecated-t-20"]=jt(Rn,$t=>$t.tint(20)),Nt["primary-color-deprecated-t-50"]=jt(Rn,$t=>$t.tint(50)),Nt["primary-color-deprecated-f-12"]=jt(Rn,$t=>$t.setAlpha($t.getAlpha()*.12));const or=new ae.C(fr[0]);Nt["primary-color-active-deprecated-f-30"]=jt(or,$t=>$t.setAlpha($t.getAlpha()*.3)),Nt["primary-color-active-deprecated-d-02"]=jt(or,$t=>$t.darken(2))}return Ye.successColor&&un(Ye.successColor,"success"),Ye.warningColor&&un(Ye.warningColor,"warning"),Ye.errorColor&&un(Ye.errorColor,"error"),Ye.infoColor&&un(Ye.infoColor,"info"),`
  :root {
    ${Object.keys(Nt).map(Rn=>`--${Be}-${Rn}: ${Nt[Rn]};`).join(`
`)}
  }
  `.trim()}function nt(Be,Ye){const Nt=Fe(Be,Ye);(0,K.Z)()&&(0,he.hq)(Nt,`${Se}-dynamic-theme`)}var lt=y(98866),Gt=y(97647);function pn(){const Be=(0,M.useContext)(lt.Z),Ye=(0,M.useContext)(Gt.Z);return{componentDisabled:Be,componentSize:Ye}}var $n=pn,Ln=y(91881);function st(Be,Ye){const Nt=Be||{},jt=Nt.inherit===!1||!Ye?be.u_:Ye;return(0,u.Z)(()=>{if(!Be)return Ye;const Hn=Object.assign({},jt.components);return Object.keys(Be.components||{}).forEach(Rn=>{Hn[Rn]=Object.assign(Object.assign({},Hn[Rn]),Be.components[Rn])}),Object.assign(Object.assign(Object.assign({},jt),Nt),{token:Object.assign(Object.assign({},jt.token),Nt.token),components:Hn})},[Nt,jt],(Hn,Rn)=>Hn.some((fr,or)=>{const $t=Rn[or];return!(0,Ln.Z)(fr,$t,!0)}))}var xt=y(14747),Un=(Be,Ye)=>{const[Nt,jt]=(0,be.dQ)();return(0,d.xy)({theme:Nt,token:jt,hashId:"",path:["ant-design-icons",Be],nonce:()=>Ye==null?void 0:Ye.nonce},()=>[{[`.${Be}`]:Object.assign(Object.assign({},(0,xt.Ro)()),{[`.${Be} .${Be}-icon`]:{display:"block"}})}])},We=function(Be,Ye){var Nt={};for(var jt in Be)Object.prototype.hasOwnProperty.call(Be,jt)&&Ye.indexOf(jt)<0&&(Nt[jt]=Be[jt]);if(Be!=null&&typeof Object.getOwnPropertySymbols=="function")for(var un=0,jt=Object.getOwnPropertySymbols(Be);un<jt.length;un++)Ye.indexOf(jt[un])<0&&Object.prototype.propertyIsEnumerable.call(Be,jt[un])&&(Nt[jt[un]]=Be[jt[un]]);return Nt};let Yt=!1;const Ze=null,Pe=null,ze=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],ht="ant";let P,ne;function _e(){return P||ht}function oe(){return ne||ie.oR}const ce=Be=>{let{prefixCls:Ye,iconPrefixCls:Nt,theme:jt}=Be;Ye!==void 0&&(P=Ye),Nt!==void 0&&(ne=Nt),jt&&nt(_e(),jt)},ye=()=>({getPrefixCls:(Be,Ye)=>Ye||(Be?`${_e()}-${Be}`:_e()),getIconPrefixCls:oe,getRootPrefixCls:()=>P||_e()}),Y=Be=>{const{children:Ye,csp:Nt,autoInsertSpaceInButton:jt,form:un,locale:Hn,componentSize:Rn,direction:fr,space:or,virtual:$t,dropdownMatchSelectWidth:er,legacyLocale:Jn,parentContext:Bt,iconPrefixCls:Ai,theme:Le,componentDisabled:Xe}=Be,He=M.useCallback((me,q)=>{const{prefixCls:Ue}=Be;if(q)return q;const ct=Ue||Bt.getPrefixCls("");return me?`${ct}-${me}`:ct},[Bt.getPrefixCls,Be.prefixCls]),Ot=Ai||Bt.iconPrefixCls||ie.oR,Vt=Ot!==Bt.iconPrefixCls,gn=Nt||Bt.csp,vt=Un(Ot,gn),zt=st(Le,Bt.theme),Kt={csp:gn,autoInsertSpaceInButton:jt,locale:Hn||Jn,direction:fr,space:or,virtual:$t,dropdownMatchSelectWidth:er,getPrefixCls:He,iconPrefixCls:Ot,theme:zt},fn=Object.assign({},Bt);Object.keys(Kt).forEach(me=>{Kt[me]!==void 0&&(fn[me]=Kt[me])}),ze.forEach(me=>{const q=Be[me];q&&(fn[me]=q)});const zn=(0,u.Z)(()=>fn,fn,(me,q)=>{const Ue=Object.keys(me),ct=Object.keys(q);return Ue.length!==ct.length||Ue.some(Lt=>me[Lt]!==q[Lt])}),wr=M.useMemo(()=>({prefixCls:Ot,csp:gn}),[Ot,gn]);let Er=Vt?vt(Ye):Ye;const _=M.useMemo(()=>{var me,q,Ue;return(0,v.gg)({},((me=L.Form)===null||me===void 0?void 0:me.defaultValidateMessages)||{},((Ue=(q=zn.locale)===null||q===void 0?void 0:q.Form)===null||Ue===void 0?void 0:Ue.defaultValidateMessages)||{},(un==null?void 0:un.validateMessages)||{})},[zn,un==null?void 0:un.validateMessages]);Object.keys(_).length>0&&(Er=M.createElement(x.RV,{validateMessages:_},Ye)),Hn&&(Er=M.createElement(Ae,{locale:Hn,_ANT_MARK__:ve},Er)),(Ot||gn)&&(Er=M.createElement(g.Z.Provider,{value:wr},Er)),Rn&&(Er=M.createElement(Gt.q,{size:Rn},Er));const N=M.useMemo(()=>{const me=zt||{},{algorithm:q,token:Ue}=me,ct=We(me,["algorithm","token"]),Lt=q&&(!Array.isArray(q)||q.length>0)?(0,d.jG)(q):void 0;return Object.assign(Object.assign({},ct),{theme:Lt,token:Object.assign(Object.assign({},G.Z),Ue)})},[zt]);return Le&&(Er=M.createElement(be.Mj.Provider,{value:N},Er)),Xe!==void 0&&(Er=M.createElement(lt.n,{disabled:Xe},Er)),M.createElement(ie.E_.Provider,{value:zn},Er)},Ne=Be=>{const Ye=M.useContext(ie.E_),Nt=M.useContext(ue);return M.createElement(Y,Object.assign({parentContext:Ye,legacyLocale:Nt},Be))};Ne.ConfigContext=ie.E_,Ne.SizeContext=Gt.Z,Ne.config=ce,Ne.useConfig=$n,Object.defineProperty(Ne,"SizeContext",{get:()=>Gt.Z});var Qe=Ne,mt=y(50888),Ve=y(1413),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},yt=rt,Tt=y(42135),Ht=function(Ye,Nt){return M.createElement(Tt.Z,(0,Ve.Z)((0,Ve.Z)({},Ye),{},{ref:Nt,icon:yt}))};Ht.displayName="ExclamationCircleFilled";var en=M.forwardRef(Ht),wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Mn=wt,kn=function(Ye,Nt){return M.createElement(Tt.Z,(0,Ve.Z)((0,Ve.Z)({},Ye),{},{ref:Nt,icon:Mn}))};kn.displayName="CloseCircleFilled";var jn=M.forwardRef(kn),mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},cr=mn,Cr=function(Ye,Nt){return M.createElement(Tt.Z,(0,Ve.Z)((0,Ve.Z)({},Ye),{},{ref:Nt,icon:cr}))};Cr.displayName="CheckCircleFilled";var mi=M.forwardRef(Cr),$r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Sr=$r,dr=function(Ye,Nt){return M.createElement(Tt.Z,(0,Ve.Z)((0,Ve.Z)({},Ye),{},{ref:Nt,icon:Sr}))};dr.displayName="InfoCircleFilled";var Pr=M.forwardRef(dr),Hr=y(97685),Xi=y(91),Kn=y(87462),Gn=y(73935),pt=y(82225),Ha=y(94184),Sa=y.n(Ha),Qa=y(4942),ma=y(15105),Ei=M.forwardRef(function(Be,Ye){var Nt=Be.prefixCls,jt=Be.style,un=Be.className,Hn=Be.duration,Rn=Hn===void 0?4.5:Hn,fr=Be.eventKey,or=Be.content,$t=Be.closable,er=Be.closeIcon,Jn=er===void 0?"x":er,Bt=Be.props,Ai=Be.onClick,Le=Be.onNoticeClose,Xe=Be.times,He=M.useState(!1),Ot=(0,Hr.Z)(He,2),Vt=Ot[0],gn=Ot[1],vt=function(){Le(fr)},zt=function(zn){(zn.key==="Enter"||zn.code==="Enter"||zn.keyCode===ma.Z.ENTER)&&vt()};M.useEffect(function(){if(!Vt&&Rn>0){var fn=setTimeout(function(){vt()},Rn*1e3);return function(){clearTimeout(fn)}}},[Rn,Vt,Xe]);var Kt="".concat(Nt,"-notice");return M.createElement("div",(0,Kn.Z)({},Bt,{ref:Ye,className:Sa()(Kt,un,(0,Qa.Z)({},"".concat(Kt,"-closable"),$t)),style:jt,onMouseEnter:function(){gn(!0)},onMouseLeave:function(){gn(!1)},onClick:Ai}),M.createElement("div",{className:"".concat(Kt,"-content")},or),$t&&M.createElement("a",{tabIndex:0,className:"".concat(Kt,"-close"),onKeyDown:zt,onClick:function(zn){zn.preventDefault(),zn.stopPropagation(),vt()}},Jn))}),Ia=Ei,si=M.forwardRef(function(Be,Ye){var Nt=Be.prefixCls,jt=Nt===void 0?"rc-notification":Nt,un=Be.container,Hn=Be.motion,Rn=Be.maxCount,fr=Be.className,or=Be.style,$t=Be.onAllRemoved,er=M.useState([]),Jn=(0,Hr.Z)(er,2),Bt=Jn[0],Ai=Jn[1],Le=function(fn){var zn,wr=Bt.find(function(Er){return Er.key===fn});wr==null||(zn=wr.onClose)===null||zn===void 0||zn.call(wr),Ai(function(Er){return Er.filter(function(_){return _.key!==fn})})};M.useImperativeHandle(Ye,function(){return{open:function(fn){Ai(function(zn){var wr=(0,E.Z)(zn),Er=wr.findIndex(function(me){return me.key===fn.key}),_=(0,Ve.Z)({},fn);if(Er>=0){var N;_.times=(((N=zn[Er])===null||N===void 0?void 0:N.times)||0)+1,wr[Er]=_}else _.times=0,wr.push(_);return Rn>0&&wr.length>Rn&&(wr=wr.slice(-Rn)),wr})},close:function(fn){Le(fn)},destroy:function(){Ai([])}}});var Xe=M.useState({}),He=(0,Hr.Z)(Xe,2),Ot=He[0],Vt=He[1];M.useEffect(function(){var Kt={};Bt.forEach(function(fn){var zn=fn.placement,wr=zn===void 0?"topRight":zn;wr&&(Kt[wr]=Kt[wr]||[],Kt[wr].push(fn))}),Object.keys(Ot).forEach(function(fn){Kt[fn]=Kt[fn]||[]}),Vt(Kt)},[Bt]);var gn=function(fn){Vt(function(zn){var wr=(0,Ve.Z)({},zn),Er=wr[fn]||[];return Er.length||delete wr[fn],wr})},vt=M.useRef(!1);if(M.useEffect(function(){Object.keys(Ot).length>0?vt.current=!0:vt.current&&($t==null||$t(),vt.current=!1)},[Ot]),!un)return null;var zt=Object.keys(Ot);return(0,Gn.createPortal)(M.createElement(M.Fragment,null,zt.map(function(Kt){var fn=Ot[Kt],zn=fn.map(function(Er){return{config:Er,key:Er.key}}),wr=typeof Hn=="function"?Hn(Kt):Hn;return M.createElement(pt.V4,(0,Kn.Z)({key:Kt,className:Sa()(jt,"".concat(jt,"-").concat(Kt),fr==null?void 0:fr(Kt)),style:or==null?void 0:or(Kt),keys:zn,motionAppear:!0},wr,{onAllRemoved:function(){gn(Kt)}}),function(Er,_){var N=Er.config,me=Er.className,q=Er.style,Ue=N.key,ct=N.times,Lt=N.className,hn=N.style;return M.createElement(Ia,(0,Kn.Z)({},N,{ref:_,prefixCls:jt,className:Sa()(me,Lt),style:(0,Ve.Z)((0,Ve.Z)({},q),hn),times:ct,key:Ue,eventKey:Ue,onNoticeClose:Le}))})})),un)}),it=si,Qn=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],pe=function(){return document.body},at=0;function Dt(){for(var Be={},Ye=arguments.length,Nt=new Array(Ye),jt=0;jt<Ye;jt++)Nt[jt]=arguments[jt];return Nt.forEach(function(un){un&&Object.keys(un).forEach(function(Hn){var Rn=un[Hn];Rn!==void 0&&(Be[Hn]=Rn)})}),Be}function vn(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ye=Be.getContainer,Nt=Ye===void 0?pe:Ye,jt=Be.motion,un=Be.prefixCls,Hn=Be.maxCount,Rn=Be.className,fr=Be.style,or=Be.onAllRemoved,$t=(0,Xi.Z)(Be,Qn),er=M.useState(),Jn=(0,Hr.Z)(er,2),Bt=Jn[0],Ai=Jn[1],Le=M.useRef(),Xe=M.createElement(it,{container:Bt,ref:Le,prefixCls:un,motion:jt,maxCount:Hn,className:Rn,style:fr,onAllRemoved:or}),He=M.useState([]),Ot=(0,Hr.Z)(He,2),Vt=Ot[0],gn=Ot[1],vt=M.useMemo(function(){return{open:function(Kt){var fn=Dt($t,Kt);(fn.key===null||fn.key===void 0)&&(fn.key="rc-notification-".concat(at),at+=1),gn(function(zn){return[].concat((0,E.Z)(zn),[{type:"open",config:fn}])})},close:function(Kt){gn(function(fn){return[].concat((0,E.Z)(fn),[{type:"close",key:Kt}])})},destroy:function(){gn(function(Kt){return[].concat((0,E.Z)(Kt),[{type:"destroy"}])})}}},[]);return M.useEffect(function(){Ai(Nt())}),M.useEffect(function(){Le.current&&Vt.length&&(Vt.forEach(function(zt){switch(zt.type){case"open":Le.current.open(zt.config);break;case"close":Le.current.close(zt.key);break;case"destroy":Le.current.destroy();break}}),gn([]))},[Vt]),[vt,Xe]}var bn=y(67968),Pn=y(45503);const ar=Be=>{const{componentCls:Ye,iconCls:Nt,boxShadow:jt,colorText:un,colorBgElevated:Hn,colorSuccess:Rn,colorError:fr,colorWarning:or,colorInfo:$t,fontSizeLG:er,motionEaseInOutCirc:Jn,motionDurationSlow:Bt,marginXS:Ai,paddingXS:Le,borderRadiusLG:Xe,zIndexPopup:He,messageNoticeContentPadding:Ot}=Be,Vt=`${Ye}-notice`,gn=new d.E4("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:Le,transform:"translateY(0)",opacity:1}}),vt=new d.E4("MessageMoveOut",{"0%":{maxHeight:Be.height,padding:Le,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),zt={padding:Le,textAlign:"center",[`${Ye}-custom-content > ${Nt}`]:{verticalAlign:"text-bottom",marginInlineEnd:Ai,fontSize:er},[`${Vt}-content`]:{display:"inline-block",padding:Ot,background:Hn,borderRadius:Xe,boxShadow:jt,pointerEvents:"all"},[`${Ye}-success > ${Nt}`]:{color:Rn},[`${Ye}-error > ${Nt}`]:{color:fr},[`${Ye}-warning > ${Nt}`]:{color:or},[`${Ye}-info > ${Nt},
      ${Ye}-loading > ${Nt}`]:{color:$t}};return[{[Ye]:Object.assign(Object.assign({},(0,xt.Wf)(Be)),{color:un,position:"fixed",top:Ai,width:"100%",pointerEvents:"none",zIndex:He,[`${Ye}-move-up`]:{animationFillMode:"forwards"},[`
        ${Ye}-move-up-appear,
        ${Ye}-move-up-enter
      `]:{animationName:gn,animationDuration:Bt,animationPlayState:"paused",animationTimingFunction:Jn},[`
        ${Ye}-move-up-appear${Ye}-move-up-appear-active,
        ${Ye}-move-up-enter${Ye}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${Ye}-move-up-leave`]:{animationName:vt,animationDuration:Bt,animationPlayState:"paused",animationTimingFunction:Jn},[`${Ye}-move-up-leave${Ye}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[Ye]:{[Vt]:Object.assign({},zt)}},{[`${Ye}-notice-pure-panel`]:Object.assign(Object.assign({},zt),{padding:0,textAlign:"start"})}]};var Zr=(0,bn.Z)("Message",Be=>{const Ye=(0,Pn.TS)(Be,{messageNoticeContentPadding:`${(Be.controlHeightLG-Be.fontSize*Be.lineHeight)/2}px ${Be.paddingSM}px`});return[ar(Ye)]},Be=>({height:150,zIndexPopup:Be.zIndexPopupBase+10})),Xr=function(Be,Ye){var Nt={};for(var jt in Be)Object.prototype.hasOwnProperty.call(Be,jt)&&Ye.indexOf(jt)<0&&(Nt[jt]=Be[jt]);if(Be!=null&&typeof Object.getOwnPropertySymbols=="function")for(var un=0,jt=Object.getOwnPropertySymbols(Be);un<jt.length;un++)Ye.indexOf(jt[un])<0&&Object.prototype.propertyIsEnumerable.call(Be,jt[un])&&(Nt[jt[un]]=Be[jt[un]]);return Nt};const ui={info:M.createElement(Pr,null),success:M.createElement(mi,null),error:M.createElement(jn,null),warning:M.createElement(en,null),loading:M.createElement(mt.Z,null)};function qr(Be){let{prefixCls:Ye,type:Nt,icon:jt,children:un}=Be;return M.createElement("div",{className:Sa()(`${Ye}-custom-content`,`${Ye}-${Nt}`)},jt||ui[Nt],M.createElement("span",null,un))}function Ti(Be){const{prefixCls:Ye,className:Nt,type:jt,icon:un,content:Hn}=Be,Rn=Xr(Be,["prefixCls","className","type","icon","content"]),{getPrefixCls:fr}=M.useContext(ie.E_),or=Ye||fr("message"),[,$t]=Zr(or);return M.createElement(Ia,Object.assign({},Rn,{prefixCls:or,className:Sa()(Nt,$t,`${or}-notice-pure-panel`),eventKey:"pure",duration:null,content:M.createElement(qr,{prefixCls:or,type:jt,icon:un},Hn)}))}var fa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Bn=fa,Li=function(Ye,Nt){return M.createElement(Tt.Z,(0,Ve.Z)((0,Ve.Z)({},Ye),{},{ref:Nt,icon:Bn}))};Li.displayName="CloseOutlined";var Ji=M.forwardRef(Li);function Na(Be,Ye){return{motionName:Ye!=null?Ye:`${Be}-move-up`}}function ea(Be){let Ye;const Nt=new Promise(un=>{Ye=Be(()=>{un(!0)})}),jt=()=>{Ye==null||Ye()};return jt.then=(un,Hn)=>Nt.then(un,Hn),jt.promise=Nt,jt}var ha=function(Be,Ye){var Nt={};for(var jt in Be)Object.prototype.hasOwnProperty.call(Be,jt)&&Ye.indexOf(jt)<0&&(Nt[jt]=Be[jt]);if(Be!=null&&typeof Object.getOwnPropertySymbols=="function")for(var un=0,jt=Object.getOwnPropertySymbols(Be);un<jt.length;un++)Ye.indexOf(jt[un])<0&&Object.prototype.propertyIsEnumerable.call(Be,jt[un])&&(Nt[jt[un]]=Be[jt[un]]);return Nt};const Ta=8,Aa=3,Wi=M.forwardRef((Be,Ye)=>{const{top:Nt,prefixCls:jt,getContainer:un,maxCount:Hn,duration:Rn=Aa,rtl:fr,transitionName:or,onAllRemoved:$t}=Be,{getPrefixCls:er,getPopupContainer:Jn}=M.useContext(ie.E_),Bt=jt||er("message"),[,Ai]=Zr(Bt),Le=()=>({left:"50%",transform:"translateX(-50%)",top:Nt!=null?Nt:Ta}),Xe=()=>Sa()(Ai,fr?`${Bt}-rtl`:""),He=()=>Na(Bt,or),Ot=M.createElement("span",{className:`${Bt}-close-x`},M.createElement(Ji,{className:`${Bt}-close-icon`})),[Vt,gn]=vn({prefixCls:Bt,style:Le,className:Xe,motion:He,closable:!1,closeIcon:Ot,duration:Rn,getContainer:()=>(un==null?void 0:un())||(Jn==null?void 0:Jn())||document.body,maxCount:Hn,onAllRemoved:$t});return M.useImperativeHandle(Ye,()=>Object.assign(Object.assign({},Vt),{prefixCls:Bt,hashId:Ai})),gn});let go=0;function Ja(Be){const Ye=M.useRef(null);return[M.useMemo(()=>{const jt=or=>{var $t;($t=Ye.current)===null||$t===void 0||$t.close(or)},un=or=>{if(!Ye.current){const zt=()=>{};return zt.then=()=>{},zt}const{open:$t,prefixCls:er,hashId:Jn}=Ye.current,Bt=`${er}-notice`,{content:Ai,icon:Le,type:Xe,key:He,className:Ot,onClose:Vt}=or,gn=ha(or,["content","icon","type","key","className","onClose"]);let vt=He;return vt==null&&(go+=1,vt=`antd-message-${go}`),ea(zt=>($t(Object.assign(Object.assign({},gn),{key:vt,content:M.createElement(qr,{prefixCls:er,type:Xe,icon:Le},Ai),placement:"top",className:Sa()(Xe&&`${Bt}-${Xe}`,Jn,Ot),onClose:()=>{Vt==null||Vt(),zt()}})),()=>{jt(vt)}))},Rn={open:un,destroy:or=>{var $t;or!==void 0?jt(or):($t=Ye.current)===null||$t===void 0||$t.destroy()}};return["info","success","warning","error","loading"].forEach(or=>{const $t=(er,Jn,Bt)=>{let Ai;er&&typeof er=="object"&&"content"in er?Ai=er:Ai={content:er};let Le,Xe;typeof Jn=="function"?Xe=Jn:(Le=Jn,Xe=Bt);const He=Object.assign(Object.assign({onClose:Xe,duration:Le},Ai),{type:or});return un(He)};Rn[or]=$t}),Rn},[]),M.createElement(Wi,Object.assign({key:"message-holder"},Be,{ref:Ye}))]}function $o(Be){return Ja(Be)}let Ua=null,Wa=Be=>Be(),mo=[],fo={};function Ro(){const{prefixCls:Be,getContainer:Ye,duration:Nt,rtl:jt,maxCount:un,top:Hn}=fo,Rn=Be!=null?Be:ye().getPrefixCls("message"),fr=(Ye==null?void 0:Ye())||document.body;return{prefixCls:Rn,container:fr,duration:Nt,rtl:jt,maxCount:un,top:Hn}}const te=M.forwardRef((Be,Ye)=>{const Nt=()=>{const{prefixCls:Jn,container:Bt,maxCount:Ai,duration:Le,rtl:Xe,top:He}=Ro();return{prefixCls:Jn,getContainer:()=>Bt,maxCount:Ai,duration:Le,rtl:Xe,top:He}},[jt,un]=M.useState(Nt),[Hn,Rn]=Ja(jt),fr=ye(),or=fr.getRootPrefixCls(),$t=fr.getIconPrefixCls(),er=()=>{un(Nt)};return M.useEffect(er,[]),M.useImperativeHandle(Ye,()=>{const Jn=Object.assign({},Hn);return Object.keys(Jn).forEach(Bt=>{Jn[Bt]=function(){return er(),Hn[Bt].apply(Hn,arguments)}}),{instance:Jn,sync:er}}),M.createElement(Qe,{prefixCls:or,iconPrefixCls:$t},Rn)});function ho(){if(!Ua){const Be=document.createDocumentFragment(),Ye={fragment:Be};Ua=Ye,Wa(()=>{(0,p.s)(M.createElement(te,{ref:Nt=>{const{instance:jt,sync:un}=Nt||{};Promise.resolve().then(()=>{!Ye.instance&&jt&&(Ye.instance=jt,Ye.sync=un,ho())})}}),Be)});return}Ua.instance&&(mo.forEach(Be=>{const{type:Ye,skipped:Nt}=Be;if(!Nt)switch(Ye){case"open":{Wa(()=>{const jt=Ua.instance.open(Object.assign(Object.assign({},fo),Be.config));jt==null||jt.then(Be.resolve),Be.setCloseFn(jt)});break}case"destroy":Wa(()=>{Ua==null||Ua.instance.destroy(Be.key)});break;default:Wa(()=>{var jt;const un=(jt=Ua.instance)[Ye].apply(jt,(0,E.Z)(Be.args));un==null||un.then(Be.resolve),Be.setCloseFn(un)})}}),mo=[])}function wn(Be){fo=Object.assign(Object.assign({},fo),Be),Wa(()=>{var Ye;(Ye=Ua==null?void 0:Ua.sync)===null||Ye===void 0||Ye.call(Ua)})}function tt(Be){const Ye=ea(Nt=>{let jt;const un={type:"open",config:Be,resolve:Nt,setCloseFn:Hn=>{jt=Hn}};return mo.push(un),()=>{jt?Wa(()=>{jt()}):un.skipped=!0}});return ho(),Ye}function $e(Be,Ye){const Nt=ea(jt=>{let un;const Hn={type:Be,args:Ye,resolve:jt,setCloseFn:Rn=>{un=Rn}};return mo.push(Hn),()=>{un?Wa(()=>{un()}):Hn.skipped=!0}});return ho(),Nt}function dt(Be){mo.push({type:"destroy",key:Be}),ho()}const Ke=["success","info","warning","error","loading"],nn={open:tt,destroy:dt,config:wn,useMessage:$o,_InternalPanelDoNotUseOrYouWillBeFired:Ti};Ke.forEach(Be=>{nn[Be]=function(){for(var Ye=arguments.length,Nt=new Array(Ye),jt=0;jt<Ye;jt++)Nt[jt]=arguments[jt];return $e(Be,Nt)}});const ln=()=>{};let An=null,Oe=null;var De=nn},73771:function(Ie,S,y){"use strict";y.d(S,{ZP:function(){return Ze}});var E=y(94184),p=y.n(E),M=y(21770),d=y(67294),g=y(53124),x=y(97647);function v(Pe){return Object.keys(Pe).reduce((ze,ht)=>((ht.startsWith("data-")||ht.startsWith("aria-")||ht==="role")&&!ht.startsWith("data-__")&&(ze[ht]=Pe[ht]),ze),{})}const u=d.createContext(null),t=u.Provider;var e=u;const o=d.createContext(null),c=o.Provider;var b=y(87462),A=y(1413),w=y(4942),D=y(97685),F=y(91),Z=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],L=(0,d.forwardRef)(function(Pe,ze){var ht,P=Pe.prefixCls,ne=P===void 0?"rc-checkbox":P,_e=Pe.className,oe=Pe.style,ce=Pe.checked,ye=Pe.disabled,Y=Pe.defaultChecked,Ne=Y===void 0?!1:Y,Qe=Pe.type,mt=Qe===void 0?"checkbox":Qe,Ve=Pe.onChange,rt=(0,F.Z)(Pe,Z),yt=(0,d.useRef)(null),Tt=(0,M.Z)(Ne,{value:ce}),Ht=(0,D.Z)(Tt,2),en=Ht[0],wt=Ht[1];(0,d.useImperativeHandle)(ze,function(){return{focus:function(){var mn;(mn=yt.current)===null||mn===void 0||mn.focus()},blur:function(){var mn;(mn=yt.current)===null||mn===void 0||mn.blur()},input:yt.current}});var Mn=p()(ne,_e,(ht={},(0,w.Z)(ht,"".concat(ne,"-checked"),en),(0,w.Z)(ht,"".concat(ne,"-disabled"),ye),ht)),kn=function(mn){ye||("checked"in Pe||wt(mn.target.checked),Ve==null||Ve({target:(0,A.Z)((0,A.Z)({},Pe),{},{type:mt,checked:mn.target.checked}),stopPropagation:function(){mn.stopPropagation()},preventDefault:function(){mn.preventDefault()},nativeEvent:mn.nativeEvent}))};return d.createElement("span",{className:Mn,style:oe},d.createElement("input",(0,b.Z)({},rt,{className:"".concat(ne,"-input"),ref:yt,onChange:kn,disabled:ye,checked:!!en,type:mt})),d.createElement("span",{className:"".concat(ne,"-inner")}))}),W=L,k=y(42550),de=y(98866),H=y(18335);const ue=d.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),ve=null,ke=Pe=>{const ze=omit(Pe,["prefixCls"]);return React.createElement(RcFormProvider,Object.assign({},ze))},Ae=d.createContext({prefixCls:""}),be=d.createContext({}),G=Pe=>{let{children:ze,status:ht,override:P}=Pe;const ne=useContext(be),_e=useMemo(()=>{const oe=Object.assign({},ne);return P&&delete oe.isFormItemInput,ht&&(delete oe.status,delete oe.hasFeedback,delete oe.feedbackIcon),oe},[ht,P,ne]);return React.createElement(be.Provider,{value:_e},ze)};var ie=y(27431),V=y(67968),ae=y(45503),K=y(14747);const he=new ie.E4("antRadioEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),Se=Pe=>{const{componentCls:ze,antCls:ht}=Pe,P=`${ze}-group`;return{[P]:Object.assign(Object.assign({},(0,K.Wf)(Pe)),{display:"inline-block",fontSize:0,[`&${P}-rtl`]:{direction:"rtl"},[`${ht}-badge ${ht}-badge-count`]:{zIndex:1},[`> ${ht}-badge:not(:first-child) > ${ht}-button-wrapper`]:{borderInlineStart:"none"}})}},Fe=Pe=>{const{componentCls:ze,radioWrapperMarginRight:ht,radioCheckedColor:P,radioSize:ne,motionDurationSlow:_e,motionDurationMid:oe,motionEaseInOut:ce,motionEaseInOutCirc:ye,radioButtonBg:Y,colorBorder:Ne,lineWidth:Qe,radioDotSize:mt,colorBgContainerDisabled:Ve,colorTextDisabled:rt,paddingXS:yt,radioDotDisabledColor:Tt,lineType:Ht,radioDotDisabledSize:en,wireframe:wt,colorWhite:Mn}=Pe,kn=`${ze}-inner`;return{[`${ze}-wrapper`]:Object.assign(Object.assign({},(0,K.Wf)(Pe)),{position:"relative",display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:ht,cursor:"pointer",[`&${ze}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:Pe.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${ze}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${Qe}px ${Ht} ${P}`,borderRadius:"50%",visibility:"hidden",animationName:he,animationDuration:_e,animationTimingFunction:ce,animationFillMode:"both",content:'""'},[ze]:Object.assign(Object.assign({},(0,K.Wf)(Pe)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center"}),[`${ze}-wrapper:hover &,
        &:hover ${kn}`]:{borderColor:P},[`${ze}-input:focus-visible + ${kn}`]:Object.assign({},(0,K.oN)(Pe)),[`${ze}:hover::after, ${ze}-wrapper:hover &::after`]:{visibility:"visible"},[`${ze}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:ne,height:ne,marginBlockStart:ne/-2,marginInlineStart:ne/-2,backgroundColor:wt?P:Mn,borderBlockStart:0,borderInlineStart:0,borderRadius:ne,transform:"scale(0)",opacity:0,transition:`all ${_e} ${ye}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:ne,height:ne,backgroundColor:Y,borderColor:Ne,borderStyle:"solid",borderWidth:Qe,borderRadius:"50%",transition:`all ${oe}`},[`${ze}-input`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,insetBlockEnd:0,insetInlineStart:0,zIndex:1,cursor:"pointer",opacity:0},[`${ze}-checked`]:{[kn]:{borderColor:P,backgroundColor:wt?Y:P,"&::after":{transform:`scale(${mt/ne})`,opacity:1,transition:`all ${_e} ${ye}`}}},[`${ze}-disabled`]:{cursor:"not-allowed",[kn]:{backgroundColor:Ve,borderColor:Ne,cursor:"not-allowed","&::after":{backgroundColor:Tt}},[`${ze}-input`]:{cursor:"not-allowed"},[`${ze}-disabled + span`]:{color:rt,cursor:"not-allowed"},[`&${ze}-checked`]:{[kn]:{"&::after":{transform:`scale(${en/ne})`}}}},[`span${ze} + *`]:{paddingInlineStart:yt,paddingInlineEnd:yt}})}},nt=Pe=>{const{radioButtonColor:ze,controlHeight:ht,componentCls:P,lineWidth:ne,lineType:_e,colorBorder:oe,motionDurationSlow:ce,motionDurationMid:ye,radioButtonPaddingHorizontal:Y,fontSize:Ne,radioButtonBg:Qe,fontSizeLG:mt,controlHeightLG:Ve,controlHeightSM:rt,paddingXS:yt,borderRadius:Tt,borderRadiusSM:Ht,borderRadiusLG:en,radioCheckedColor:wt,radioButtonCheckedBg:Mn,radioButtonHoverColor:kn,radioButtonActiveColor:jn,radioSolidCheckedColor:mn,colorTextDisabled:cr,colorBgContainerDisabled:Cr,radioDisabledButtonCheckedColor:mi,radioDisabledButtonCheckedBg:$r}=Pe;return{[`${P}-button-wrapper`]:{position:"relative",display:"inline-block",height:ht,margin:0,paddingInline:Y,paddingBlock:0,color:ze,fontSize:Ne,lineHeight:`${ht-ne*2}px`,background:Qe,border:`${ne}px ${_e} ${oe}`,borderBlockStartWidth:ne+.02,borderInlineStartWidth:0,borderInlineEndWidth:ne,cursor:"pointer",transition:[`color ${ye}`,`background ${ye}`,`border-color ${ye}`,`box-shadow ${ye}`].join(","),a:{color:ze},[`> ${P}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-ne,insetInlineStart:-ne,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:ne,paddingInline:0,backgroundColor:oe,transition:`background-color ${ce}`,content:'""'}},"&:first-child":{borderInlineStart:`${ne}px ${_e} ${oe}`,borderStartStartRadius:Tt,borderEndStartRadius:Tt},"&:last-child":{borderStartEndRadius:Tt,borderEndEndRadius:Tt},"&:first-child:last-child":{borderRadius:Tt},[`${P}-group-large &`]:{height:Ve,fontSize:mt,lineHeight:`${Ve-ne*2}px`,"&:first-child":{borderStartStartRadius:en,borderEndStartRadius:en},"&:last-child":{borderStartEndRadius:en,borderEndEndRadius:en}},[`${P}-group-small &`]:{height:rt,paddingInline:yt-ne,paddingBlock:0,lineHeight:`${rt-ne*2}px`,"&:first-child":{borderStartStartRadius:Ht,borderEndStartRadius:Ht},"&:last-child":{borderStartEndRadius:Ht,borderEndEndRadius:Ht}},"&:hover":{position:"relative",color:wt},"&:has(:focus-visible)":Object.assign({},(0,K.oN)(Pe)),[`${P}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${P}-button-wrapper-disabled)`]:{zIndex:1,color:wt,background:Mn,borderColor:wt,"&::before":{backgroundColor:wt},"&:first-child":{borderColor:wt},"&:hover":{color:kn,borderColor:kn,"&::before":{backgroundColor:kn}},"&:active":{color:jn,borderColor:jn,"&::before":{backgroundColor:jn}}},[`${P}-group-solid &-checked:not(${P}-button-wrapper-disabled)`]:{color:mn,background:wt,borderColor:wt,"&:hover":{color:mn,background:kn,borderColor:kn},"&:active":{color:mn,background:jn,borderColor:jn}},"&-disabled":{color:cr,backgroundColor:Cr,borderColor:oe,cursor:"not-allowed","&:first-child, &:hover":{color:cr,backgroundColor:Cr,borderColor:oe}},[`&-disabled${P}-button-wrapper-checked`]:{color:mi,backgroundColor:$r,borderColor:oe,boxShadow:"none"}}}};var lt=(0,V.Z)("Radio",Pe=>{const{padding:ze,lineWidth:ht,controlItemBgActiveDisabled:P,colorTextDisabled:ne,colorBgContainer:_e,fontSizeLG:oe,controlOutline:ce,colorPrimaryHover:ye,colorPrimaryActive:Y,colorText:Ne,colorPrimary:Qe,marginXS:mt,controlOutlineWidth:Ve,colorTextLightSolid:rt,wireframe:yt}=Pe,Tt=`0 0 0 ${Ve}px ${ce}`,Ht=Tt,en=oe,wt=4,Mn=en-wt*2,kn=yt?Mn:en-(wt+ht)*2,jn=Qe,mn=Ne,cr=ye,Cr=Y,mi=ze-ht,$r=ne,Sr=mt,dr=(0,ae.TS)(Pe,{radioFocusShadow:Tt,radioButtonFocusShadow:Ht,radioSize:en,radioDotSize:kn,radioDotDisabledSize:Mn,radioCheckedColor:jn,radioDotDisabledColor:ne,radioSolidCheckedColor:rt,radioButtonBg:_e,radioButtonCheckedBg:_e,radioButtonColor:mn,radioButtonHoverColor:cr,radioButtonActiveColor:Cr,radioButtonPaddingHorizontal:mi,radioDisabledButtonCheckedBg:P,radioDisabledButtonCheckedColor:$r,radioWrapperMarginRight:Sr});return[Se(dr),Fe(dr),nt(dr)]}),Gt=function(Pe,ze){var ht={};for(var P in Pe)Object.prototype.hasOwnProperty.call(Pe,P)&&ze.indexOf(P)<0&&(ht[P]=Pe[P]);if(Pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,P=Object.getOwnPropertySymbols(Pe);ne<P.length;ne++)ze.indexOf(P[ne])<0&&Object.prototype.propertyIsEnumerable.call(Pe,P[ne])&&(ht[P[ne]]=Pe[P[ne]]);return ht};const pn=(Pe,ze)=>{var ht,P;const ne=d.useContext(e),_e=d.useContext(o),{getPrefixCls:oe,direction:ce}=d.useContext(g.E_),ye=d.useRef(null),Y=(0,k.sQ)(ze,ye),{isFormItemInput:Ne}=d.useContext(be),Qe=Cr=>{var mi,$r;(mi=Pe.onChange)===null||mi===void 0||mi.call(Pe,Cr),($r=ne==null?void 0:ne.onChange)===null||$r===void 0||$r.call(ne,Cr)},{prefixCls:mt,className:Ve,rootClassName:rt,children:yt,style:Tt}=Pe,Ht=Gt(Pe,["prefixCls","className","rootClassName","children","style"]),en=oe("radio",mt),wt=((ne==null?void 0:ne.optionType)||_e)==="button"?`${en}-button`:en,[Mn,kn]=lt(en),jn=Object.assign({},Ht),mn=d.useContext(de.Z);ne&&(jn.name=ne.name,jn.onChange=Qe,jn.checked=Pe.value===ne.value,jn.disabled=(ht=jn.disabled)!==null&&ht!==void 0?ht:ne.disabled),jn.disabled=(P=jn.disabled)!==null&&P!==void 0?P:mn;const cr=p()(`${wt}-wrapper`,{[`${wt}-wrapper-checked`]:jn.checked,[`${wt}-wrapper-disabled`]:jn.disabled,[`${wt}-wrapper-rtl`]:ce==="rtl",[`${wt}-wrapper-in-form-item`]:Ne},Ve,rt,kn);return Mn(d.createElement("label",{className:cr,style:Tt,onMouseEnter:Pe.onMouseEnter,onMouseLeave:Pe.onMouseLeave},d.createElement(W,Object.assign({},jn,{type:"radio",prefixCls:wt,ref:Y})),yt!==void 0?d.createElement("span",null,yt):null))};var Ln=d.forwardRef(pn);const st=d.forwardRef((Pe,ze)=>{const{getPrefixCls:ht,direction:P}=d.useContext(g.E_),ne=d.useContext(x.Z),[_e,oe]=(0,M.Z)(Pe.defaultValue,{value:Pe.value}),ce=dr=>{const Pr=_e,Hr=dr.target.value;"value"in Pe||oe(Hr);const{onChange:Xi}=Pe;Xi&&Hr!==Pr&&Xi(dr)},{prefixCls:ye,className:Y,rootClassName:Ne,options:Qe,buttonStyle:mt="outline",disabled:Ve,children:rt,size:yt,style:Tt,id:Ht,onMouseEnter:en,onMouseLeave:wt,onFocus:Mn,onBlur:kn}=Pe,jn=ht("radio",ye),mn=`${jn}-group`,[cr,Cr]=lt(jn);let mi=rt;Qe&&Qe.length>0&&(mi=Qe.map(dr=>typeof dr=="string"||typeof dr=="number"?d.createElement(Ln,{key:dr.toString(),prefixCls:jn,disabled:Ve,value:dr,checked:_e===dr},dr):d.createElement(Ln,{key:`radio-group-value-options-${dr.value}`,prefixCls:jn,disabled:dr.disabled||Ve,value:dr.value,checked:_e===dr.value,style:dr.style},dr.label)));const $r=yt||ne,Sr=p()(mn,`${mn}-${mt}`,{[`${mn}-${$r}`]:$r,[`${mn}-rtl`]:P==="rtl"},Y,Ne,Cr);return cr(d.createElement("div",Object.assign({},v(Pe),{className:Sr,style:Tt,onMouseEnter:en,onMouseLeave:wt,onFocus:Mn,onBlur:kn,id:Ht,ref:ze}),d.createElement(t,{value:{onChange:ce,value:_e,disabled:Pe.disabled,name:Pe.name,optionType:Pe.optionType}},mi)))});var xt=d.memo(st),tn=function(Pe,ze){var ht={};for(var P in Pe)Object.prototype.hasOwnProperty.call(Pe,P)&&ze.indexOf(P)<0&&(ht[P]=Pe[P]);if(Pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,P=Object.getOwnPropertySymbols(Pe);ne<P.length;ne++)ze.indexOf(P[ne])<0&&Object.prototype.propertyIsEnumerable.call(Pe,P[ne])&&(ht[P[ne]]=Pe[P[ne]]);return ht};const Un=(Pe,ze)=>{const{getPrefixCls:ht}=d.useContext(g.E_),{prefixCls:P}=Pe,ne=tn(Pe,["prefixCls"]),_e=ht("radio",P);return d.createElement(c,{value:"button"},d.createElement(Ln,Object.assign({prefixCls:_e},ne,{type:"radio",ref:ze})))};var We=d.forwardRef(Un);const Yt=Ln;Yt.Button=We,Yt.Group=xt,Yt.__ANT_RADIO=!0;var Ze=Yt},75081:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return ue}});var E=y(94184),p=y.n(E);function M(ve,ke,Ae){var be=Ae||{},G=be.noTrailing,ie=G===void 0?!1:G,V=be.noLeading,ae=V===void 0?!1:V,K=be.debounceMode,he=K===void 0?void 0:K,Se,Fe=!1,nt=0;function lt(){Se&&clearTimeout(Se)}function Gt($n){var Ln=$n||{},st=Ln.upcomingOnly,xt=st===void 0?!1:st;lt(),Fe=!xt}function pn(){for(var $n=arguments.length,Ln=new Array($n),st=0;st<$n;st++)Ln[st]=arguments[st];var xt=this,tn=Date.now()-nt;if(Fe)return;function Un(){nt=Date.now(),ke.apply(xt,Ln)}function We(){Se=void 0}!ae&&he&&!Se&&Un(),lt(),he===void 0&&tn>ve?ae?(nt=Date.now(),ie||(Se=setTimeout(he?We:Un,ve))):Un():ie!==!0&&(Se=setTimeout(he?We:Un,he===void 0?ve-tn:ve))}return pn.cancel=Gt,pn}function d(ve,ke,Ae){var be=Ae||{},G=be.atBegin,ie=G===void 0?!1:G;return M(ve,ke,{debounceMode:ie!==!1})}var g=y(98423),x=y(67294),v=y(53124),u=y(96159),t=y(27431),e=y(67968),o=y(45503),c=y(14747);const b=new t.E4("antSpinMove",{to:{opacity:1}}),A=new t.E4("antRotate",{to:{transform:"rotate(405deg)"}}),w=ve=>({[`${ve.componentCls}`]:Object.assign(Object.assign({},(0,c.Wf)(ve)),{position:"absolute",display:"none",color:ve.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${ve.motionDurationSlow} ${ve.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${ve.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:ve.contentHeight,[`${ve.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-ve.spinDotSize/2},[`${ve.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(ve.spinDotSize-ve.fontSize)/2+2,textShadow:`0 1px 2px ${ve.colorBgContainer}`,fontSize:ve.fontSize},[`&${ve.componentCls}-show-text ${ve.componentCls}-dot`]:{marginTop:-(ve.spinDotSize/2)-10},"&-sm":{[`${ve.componentCls}-dot`]:{margin:-ve.spinDotSizeSM/2},[`${ve.componentCls}-text`]:{paddingTop:(ve.spinDotSizeSM-ve.fontSize)/2+2},[`&${ve.componentCls}-show-text ${ve.componentCls}-dot`]:{marginTop:-(ve.spinDotSizeSM/2)-10}},"&-lg":{[`${ve.componentCls}-dot`]:{margin:-(ve.spinDotSizeLG/2)},[`${ve.componentCls}-text`]:{paddingTop:(ve.spinDotSizeLG-ve.fontSize)/2+2},[`&${ve.componentCls}-show-text ${ve.componentCls}-dot`]:{marginTop:-(ve.spinDotSizeLG/2)-10}}},[`${ve.componentCls}-container`]:{position:"relative",transition:`opacity ${ve.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:ve.colorBgContainer,opacity:0,transition:`all ${ve.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${ve.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:ve.spinDotDefault},[`${ve.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:ve.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(ve.spinDotSize-ve.marginXXS/2)/2,height:(ve.spinDotSize-ve.marginXXS/2)/2,backgroundColor:ve.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:b,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:A,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${ve.componentCls}-dot`]:{fontSize:ve.spinDotSizeSM,i:{width:(ve.spinDotSizeSM-ve.marginXXS/2)/2,height:(ve.spinDotSizeSM-ve.marginXXS/2)/2}},[`&-lg ${ve.componentCls}-dot`]:{fontSize:ve.spinDotSizeLG,i:{width:(ve.spinDotSizeLG-ve.marginXXS)/2,height:(ve.spinDotSizeLG-ve.marginXXS)/2}},[`&${ve.componentCls}-show-text ${ve.componentCls}-text`]:{display:"block"}})});var D=(0,e.Z)("Spin",ve=>{const ke=(0,o.TS)(ve,{spinDotDefault:ve.colorTextDescription,spinDotSize:ve.controlHeightLG/2,spinDotSizeSM:ve.controlHeightLG*.35,spinDotSizeLG:ve.controlHeight});return[w(ke)]},{contentHeight:400}),F=function(ve,ke){var Ae={};for(var be in ve)Object.prototype.hasOwnProperty.call(ve,be)&&ke.indexOf(be)<0&&(Ae[be]=ve[be]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,be=Object.getOwnPropertySymbols(ve);G<be.length;G++)ke.indexOf(be[G])<0&&Object.prototype.propertyIsEnumerable.call(ve,be[G])&&(Ae[be[G]]=ve[be[G]]);return Ae};const Z=null;let L=null;function W(ve,ke){const{indicator:Ae}=ke,be=`${ve}-dot`;return Ae===null?null:(0,u.l$)(Ae)?(0,u.Tm)(Ae,{className:p()(Ae.props.className,be)}):(0,u.l$)(L)?(0,u.Tm)(L,{className:p()(L.props.className,be)}):x.createElement("span",{className:p()(be,`${ve}-dot-spin`)},x.createElement("i",{className:`${ve}-dot-item`}),x.createElement("i",{className:`${ve}-dot-item`}),x.createElement("i",{className:`${ve}-dot-item`}),x.createElement("i",{className:`${ve}-dot-item`}))}function k(ve,ke){return!!ve&&!!ke&&!isNaN(Number(ke))}const de=ve=>{const{spinPrefixCls:ke,spinning:Ae=!0,delay:be=0,className:G,rootClassName:ie,size:V="default",tip:ae,wrapperClassName:K,style:he,children:Se,hashId:Fe}=ve,nt=F(ve,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[lt,Gt]=x.useState(()=>Ae&&!k(Ae,be));x.useEffect(()=>{if(Ae){const Un=d(be,()=>{Gt(!0)});return Un(),()=>{var We;(We=Un==null?void 0:Un.cancel)===null||We===void 0||We.call(Un)}}Gt(!1)},[be,Ae]);const pn=x.useMemo(()=>typeof Se!="undefined",[Se]),{direction:$n}=x.useContext(v.E_),Ln=p()(ke,{[`${ke}-sm`]:V==="small",[`${ke}-lg`]:V==="large",[`${ke}-spinning`]:lt,[`${ke}-show-text`]:!!ae,[`${ke}-rtl`]:$n==="rtl"},G,ie,Fe),st=p()(`${ke}-container`,{[`${ke}-blur`]:lt}),xt=(0,g.Z)(nt,["indicator","prefixCls"]),tn=x.createElement("div",Object.assign({},xt,{style:he,className:Ln,"aria-live":"polite","aria-busy":lt}),W(ke,ve),ae?x.createElement("div",{className:`${ke}-text`},ae):null);return pn?x.createElement("div",Object.assign({},xt,{className:p()(`${ke}-nested-loading`,K,Fe)}),lt&&x.createElement("div",{key:"loading"},tn),x.createElement("div",{className:st,key:"container"},Se)):tn},H=ve=>{const{prefixCls:ke}=ve,{getPrefixCls:Ae}=x.useContext(v.E_),be=Ae("spin",ke),[G,ie]=D(be),V=Object.assign(Object.assign({},ve),{spinPrefixCls:be,hashId:ie});return G(x.createElement(de,Object.assign({},V)))};H.setDefaultIndicator=ve=>{L=ve};var ue=H},14747:function(Ie,S,y){"use strict";y.d(S,{Lx:function(){return g},Qy:function(){return u},Ro:function(){return M},Wf:function(){return p},du:function(){return x},oN:function(){return v}});const E={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},p=t=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:t.fontFamily}),M=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),d=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),g=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),x=(t,e)=>{const{fontFamily:o,fontSize:c}=t,b=`[class^="${e}"], [class*=" ${e}"]`;return{[b]:{fontFamily:o,fontSize:c,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[b]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},v=t=>({outline:`${t.lineWidthFocus}px solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),u=t=>({"&:focus-visible":Object.assign({},v(t))})},21823:function(Ie,S,y){"use strict";y.d(S,{Mj:function(){return ie},u_:function(){return G},dQ:function(){return V}});var E=y(27431),p=y(67294),M="5.4.7",d=M,g=y(16397),v=ae=>{const{controlHeight:K}=ae;return{controlHeightSM:K*.75,controlHeightXS:K*.5,controlHeightLG:K*1.25}};function u(ae){const{sizeUnit:K,sizeStep:he}=ae;return{sizeXXL:K*(he+8),sizeXL:K*(he+4),sizeLG:K*(he+2),sizeMD:K*(he+1),sizeMS:K*he,size:K*he,sizeSM:K*(he-1),sizeXS:K*(he-2),sizeXXS:K*(he-3)}}var t=y(2790),e=y(10274);function o(ae,K){let{generateColorPalettes:he,generateNeutralColorPalettes:Se}=K;const{colorSuccess:Fe,colorWarning:nt,colorError:lt,colorInfo:Gt,colorPrimary:pn,colorBgBase:$n,colorTextBase:Ln}=ae,st=he(pn),xt=he(Fe),tn=he(nt),Un=he(lt),We=he(Gt),Yt=Se($n,Ln);return Object.assign(Object.assign({},Yt),{colorPrimaryBg:st[1],colorPrimaryBgHover:st[2],colorPrimaryBorder:st[3],colorPrimaryBorderHover:st[4],colorPrimaryHover:st[5],colorPrimary:st[6],colorPrimaryActive:st[7],colorPrimaryTextHover:st[8],colorPrimaryText:st[9],colorPrimaryTextActive:st[10],colorSuccessBg:xt[1],colorSuccessBgHover:xt[2],colorSuccessBorder:xt[3],colorSuccessBorderHover:xt[4],colorSuccessHover:xt[4],colorSuccess:xt[6],colorSuccessActive:xt[7],colorSuccessTextHover:xt[8],colorSuccessText:xt[9],colorSuccessTextActive:xt[10],colorErrorBg:Un[1],colorErrorBgHover:Un[2],colorErrorBorder:Un[3],colorErrorBorderHover:Un[4],colorErrorHover:Un[5],colorError:Un[6],colorErrorActive:Un[7],colorErrorTextHover:Un[8],colorErrorText:Un[9],colorErrorTextActive:Un[10],colorWarningBg:tn[1],colorWarningBgHover:tn[2],colorWarningBorder:tn[3],colorWarningBorderHover:tn[4],colorWarningHover:tn[4],colorWarning:tn[6],colorWarningActive:tn[7],colorWarningTextHover:tn[8],colorWarningText:tn[9],colorWarningTextActive:tn[10],colorInfoBg:We[1],colorInfoBgHover:We[2],colorInfoBorder:We[3],colorInfoBorderHover:We[4],colorInfoHover:We[4],colorInfo:We[6],colorInfoActive:We[7],colorInfoTextHover:We[8],colorInfoText:We[9],colorInfoTextActive:We[10],colorBgMask:new e.C("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var b=ae=>{let K=ae,he=ae,Se=ae,Fe=ae;return ae<6&&ae>=5?K=ae+1:ae<16&&ae>=6?K=ae+2:ae>=16&&(K=16),ae<7&&ae>=5?he=4:ae<8&&ae>=7?he=5:ae<14&&ae>=8?he=6:ae<16&&ae>=14?he=7:ae>=16&&(he=8),ae<6&&ae>=2?Se=1:ae>=6&&(Se=2),ae>4&&ae<8?Fe=4:ae>=8&&(Fe=6),{borderRadius:ae>16?16:ae,borderRadiusXS:Se,borderRadiusSM:he,borderRadiusLG:K,borderRadiusOuter:Fe}};function A(ae){const{motionUnit:K,motionBase:he,borderRadius:Se,lineWidth:Fe}=ae;return Object.assign({motionDurationFast:`${(he+K).toFixed(1)}s`,motionDurationMid:`${(he+K*2).toFixed(1)}s`,motionDurationSlow:`${(he+K*3).toFixed(1)}s`,lineWidthBold:Fe+1},b(Se))}const w=(ae,K)=>new e.C(ae).setAlpha(K).toRgbString(),D=(ae,K)=>new e.C(ae).darken(K).toHexString(),F=ae=>{const K=(0,g.R_)(ae);return{1:K[0],2:K[1],3:K[2],4:K[3],5:K[4],6:K[5],7:K[6],8:K[4],9:K[5],10:K[6]}},Z=(ae,K)=>{const he=ae||"#fff",Se=K||"#000";return{colorBgBase:he,colorTextBase:Se,colorText:w(Se,.88),colorTextSecondary:w(Se,.65),colorTextTertiary:w(Se,.45),colorTextQuaternary:w(Se,.25),colorFill:w(Se,.15),colorFillSecondary:w(Se,.06),colorFillTertiary:w(Se,.04),colorFillQuaternary:w(Se,.02),colorBgLayout:D(he,4),colorBgContainer:D(he,0),colorBgElevated:D(he,0),colorBgSpotlight:w(Se,.85),colorBorder:D(he,15),colorBorderSecondary:D(he,6)}};function L(ae){const K=new Array(10).fill(null).map((he,Se)=>{const Fe=Se-1,nt=ae*Math.pow(2.71828,Fe/5),lt=Se>1?Math.floor(nt):Math.ceil(nt);return Math.floor(lt/2)*2});return K[1]=ae,K.map(he=>{const Se=he+8;return{size:he,lineHeight:Se/he}})}var k=ae=>{const K=L(ae),he=K.map(Fe=>Fe.size),Se=K.map(Fe=>Fe.lineHeight);return{fontSizeSM:he[0],fontSize:he[1],fontSizeLG:he[2],fontSizeXL:he[3],fontSizeHeading1:he[6],fontSizeHeading2:he[5],fontSizeHeading3:he[4],fontSizeHeading4:he[3],fontSizeHeading5:he[2],lineHeight:Se[1],lineHeightLG:Se[2],lineHeightSM:Se[0],lineHeightHeading1:Se[6],lineHeightHeading2:Se[5],lineHeightHeading3:Se[4],lineHeightHeading4:Se[3],lineHeightHeading5:Se[2]}};function de(ae){const K=Object.keys(t.M).map(he=>{const Se=(0,g.R_)(ae[he]);return new Array(10).fill(1).reduce((Fe,nt,lt)=>(Fe[`${he}-${lt+1}`]=Se[lt],Fe[`${he}${lt+1}`]=Se[lt],Fe),{})}).reduce((he,Se)=>(he=Object.assign(Object.assign({},he),Se),he),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ae),K),o(ae,{generateColorPalettes:F,generateNeutralColorPalettes:Z})),k(ae.fontSize)),u(ae)),v(ae)),A(ae))}function H(ae){return ae>=0&&ae<=255}function ue(ae,K){const{r:he,g:Se,b:Fe,a:nt}=new e.C(ae).toRgb();if(nt<1)return ae;const{r:lt,g:Gt,b:pn}=new e.C(K).toRgb();for(let $n=.01;$n<=1;$n+=.01){const Ln=Math.round((he-lt*(1-$n))/$n),st=Math.round((Se-Gt*(1-$n))/$n),xt=Math.round((Fe-pn*(1-$n))/$n);if(H(Ln)&&H(st)&&H(xt))return new e.C({r:Ln,g:st,b:xt,a:Math.round($n*100)/100}).toRgbString()}return new e.C({r:he,g:Se,b:Fe,a:1}).toRgbString()}var ve=ue,ke=function(ae,K){var he={};for(var Se in ae)Object.prototype.hasOwnProperty.call(ae,Se)&&K.indexOf(Se)<0&&(he[Se]=ae[Se]);if(ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Fe=0,Se=Object.getOwnPropertySymbols(ae);Fe<Se.length;Fe++)K.indexOf(Se[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ae,Se[Fe])&&(he[Se[Fe]]=ae[Se[Fe]]);return he};function Ae(ae){const{override:K}=ae,he=ke(ae,["override"]),Se=Object.assign({},K);Object.keys(t.Z).forEach(xt=>{delete Se[xt]});const Fe=Object.assign(Object.assign({},he),Se),nt=480,lt=576,Gt=768,pn=992,$n=1200,Ln=1600;return Object.assign(Object.assign(Object.assign({},Fe),{colorLink:Fe.colorInfoText,colorLinkHover:Fe.colorInfoHover,colorLinkActive:Fe.colorInfoActive,colorFillContent:Fe.colorFillSecondary,colorFillContentHover:Fe.colorFill,colorFillAlter:Fe.colorFillQuaternary,colorBgContainerDisabled:Fe.colorFillTertiary,colorBorderBg:Fe.colorBgContainer,colorSplit:ve(Fe.colorBorderSecondary,Fe.colorBgContainer),colorTextPlaceholder:Fe.colorTextQuaternary,colorTextDisabled:Fe.colorTextQuaternary,colorTextHeading:Fe.colorText,colorTextLabel:Fe.colorTextSecondary,colorTextDescription:Fe.colorTextTertiary,colorTextLightSolid:Fe.colorWhite,colorHighlight:Fe.colorError,colorBgTextHover:Fe.colorFillSecondary,colorBgTextActive:Fe.colorFill,colorIcon:Fe.colorTextTertiary,colorIconHover:Fe.colorText,colorErrorOutline:ve(Fe.colorErrorBg,Fe.colorBgContainer),colorWarningOutline:ve(Fe.colorWarningBg,Fe.colorBgContainer),fontSizeIcon:Fe.fontSizeSM,lineWidthFocus:Fe.lineWidth*4,lineWidth:Fe.lineWidth,controlOutlineWidth:Fe.lineWidth*2,controlInteractiveSize:Fe.controlHeight/2,controlItemBgHover:Fe.colorFillTertiary,controlItemBgActive:Fe.colorPrimaryBg,controlItemBgActiveHover:Fe.colorPrimaryBgHover,controlItemBgActiveDisabled:Fe.colorFill,controlTmpOutline:Fe.colorFillQuaternary,controlOutline:ve(Fe.colorPrimaryBg,Fe.colorBgContainer),lineType:Fe.lineType,borderRadius:Fe.borderRadius,borderRadiusXS:Fe.borderRadiusXS,borderRadiusSM:Fe.borderRadiusSM,borderRadiusLG:Fe.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:Fe.sizeXXS,paddingXS:Fe.sizeXS,paddingSM:Fe.sizeSM,padding:Fe.size,paddingMD:Fe.sizeMD,paddingLG:Fe.sizeLG,paddingXL:Fe.sizeXL,paddingContentHorizontalLG:Fe.sizeLG,paddingContentVerticalLG:Fe.sizeMS,paddingContentHorizontal:Fe.sizeMS,paddingContentVertical:Fe.sizeSM,paddingContentHorizontalSM:Fe.size,paddingContentVerticalSM:Fe.sizeXS,marginXXS:Fe.sizeXXS,marginXS:Fe.sizeXS,marginSM:Fe.sizeSM,margin:Fe.size,marginMD:Fe.sizeMD,marginLG:Fe.sizeLG,marginXL:Fe.sizeXL,marginXXL:Fe.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:nt,screenXSMin:nt,screenXSMax:lt-1,screenSM:lt,screenSMMin:lt,screenSMMax:Gt-1,screenMD:Gt,screenMDMin:Gt,screenMDMax:pn-1,screenLG:pn,screenLGMin:pn,screenLGMax:$n-1,screenXL:$n,screenXLMin:$n,screenXLMax:Ln-1,screenXXL:Ln,screenXXLMin:Ln,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new e.C("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new e.C("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new e.C("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Se)}const be=(0,E.jG)(de),G={token:t.Z,hashed:!0},ie=p.createContext(G);function V(){const{token:ae,hashed:K,theme:he,components:Se}=p.useContext(ie),Fe=`${d}-${K||""}`,nt=he||be,[lt,Gt]=(0,E.fp)(nt,[t.Z,ae],{salt:Fe,override:Object.assign({override:ae},Se),formatToken:Ae});return[nt,lt,K?Gt:""]}},2790:function(Ie,S,y){"use strict";y.d(S,{M:function(){return E}});const E={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},p=Object.assign(Object.assign({},E),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1});S.Z=p},67968:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return v}});var E=y(27431),p=y(67294),M=y(53124),d=y(14747),g=y(21823),x=y(45503);function v(u,t,e,o){return c=>{const[b,A,w]=(0,g.dQ)(),{getPrefixCls:D,iconPrefixCls:F,csp:Z}=(0,p.useContext)(M.E_),L=D(),W={theme:b,token:A,hashId:w,nonce:()=>Z==null?void 0:Z.nonce};return(0,E.xy)(Object.assign(Object.assign({},W),{path:["Shared",L]}),()=>[{"&":(0,d.Lx)(A)}]),[(0,E.xy)(Object.assign(Object.assign({},W),{path:[u,c,F]}),()=>{const{token:k,flush:de}=(0,x.ZP)(A),H=typeof e=="function"?e(k):e,ue=Object.assign(Object.assign({},H),A[u]),ve=`.${c}`,ke=(0,x.TS)(k,{componentCls:ve,prefixCls:c,iconCls:`.${F}`,antCls:`.${L}`},ue),Ae=t(ke,{hashId:w,prefixCls:c,rootPrefixCls:L,iconPrefixCls:F,overrideComponentToken:A[u]});return de(u,ue),[(o==null?void 0:o.resetStyle)===!1?null:(0,d.du)(A,c),Ae]}),w]}}},45503:function(Ie,S,y){"use strict";y.d(S,{TS:function(){return M},ZP:function(){return v}});const E=typeof CSSINJS_STATISTIC!="undefined";let p=!0;function M(){for(var u=arguments.length,t=new Array(u),e=0;e<u;e++)t[e]=arguments[e];if(!E)return Object.assign.apply(Object,[{}].concat(t));p=!1;const o={};return t.forEach(c=>{Object.keys(c).forEach(A=>{Object.defineProperty(o,A,{configurable:!0,enumerable:!0,get:()=>c[A]})})}),p=!0,o}const d={},g={};function x(){}function v(u){let t,e=u,o=x;return E&&(t=new Set,e=new Proxy(u,{get(c,b){return p&&t.add(b),c[b]}}),o=(c,b)=>{d[c]={global:Array.from(t),component:b}}),{token:e,keys:t,flush:o}}},54098:function(Ie,S){var y=typeof self!="undefined"?self:this,E=function(){function M(){this.fetch=!1,this.DOMException=y.DOMException}return M.prototype=y,new M}();(function(M){var d=function(g){var x={searchParams:"URLSearchParams"in M,iterable:"Symbol"in M&&"iterator"in Symbol,blob:"FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch(G){return!1}}(),formData:"FormData"in M,arrayBuffer:"ArrayBuffer"in M};function v(G){return G&&DataView.prototype.isPrototypeOf(G)}if(x.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(G){return G&&u.indexOf(Object.prototype.toString.call(G))>-1};function e(G){if(typeof G!="string"&&(G=String(G)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(G))throw new TypeError("Invalid character in header field name");return G.toLowerCase()}function o(G){return typeof G!="string"&&(G=String(G)),G}function c(G){var ie={next:function(){var V=G.shift();return{done:V===void 0,value:V}}};return x.iterable&&(ie[Symbol.iterator]=function(){return ie}),ie}function b(G){this.map={},G instanceof b?G.forEach(function(ie,V){this.append(V,ie)},this):Array.isArray(G)?G.forEach(function(ie){this.append(ie[0],ie[1])},this):G&&Object.getOwnPropertyNames(G).forEach(function(ie){this.append(ie,G[ie])},this)}b.prototype.append=function(G,ie){G=e(G),ie=o(ie);var V=this.map[G];this.map[G]=V?V+", "+ie:ie},b.prototype.delete=function(G){delete this.map[e(G)]},b.prototype.get=function(G){return G=e(G),this.has(G)?this.map[G]:null},b.prototype.has=function(G){return this.map.hasOwnProperty(e(G))},b.prototype.set=function(G,ie){this.map[e(G)]=o(ie)},b.prototype.forEach=function(G,ie){for(var V in this.map)this.map.hasOwnProperty(V)&&G.call(ie,this.map[V],V,this)},b.prototype.keys=function(){var G=[];return this.forEach(function(ie,V){G.push(V)}),c(G)},b.prototype.values=function(){var G=[];return this.forEach(function(ie){G.push(ie)}),c(G)},b.prototype.entries=function(){var G=[];return this.forEach(function(ie,V){G.push([V,ie])}),c(G)},x.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function A(G){if(G.bodyUsed)return Promise.reject(new TypeError("Already read"));G.bodyUsed=!0}function w(G){return new Promise(function(ie,V){G.onload=function(){ie(G.result)},G.onerror=function(){V(G.error)}})}function D(G){var ie=new FileReader,V=w(ie);return ie.readAsArrayBuffer(G),V}function F(G){var ie=new FileReader,V=w(ie);return ie.readAsText(G),V}function Z(G){for(var ie=new Uint8Array(G),V=new Array(ie.length),ae=0;ae<ie.length;ae++)V[ae]=String.fromCharCode(ie[ae]);return V.join("")}function L(G){if(G.slice)return G.slice(0);var ie=new Uint8Array(G.byteLength);return ie.set(new Uint8Array(G)),ie.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(G){this._bodyInit=G,G?typeof G=="string"?this._bodyText=G:x.blob&&Blob.prototype.isPrototypeOf(G)?this._bodyBlob=G:x.formData&&FormData.prototype.isPrototypeOf(G)?this._bodyFormData=G:x.searchParams&&URLSearchParams.prototype.isPrototypeOf(G)?this._bodyText=G.toString():x.arrayBuffer&&x.blob&&v(G)?(this._bodyArrayBuffer=L(G.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):x.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(G)||t(G))?this._bodyArrayBuffer=L(G):this._bodyText=G=Object.prototype.toString.call(G):this._bodyText="",this.headers.get("content-type")||(typeof G=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):x.searchParams&&URLSearchParams.prototype.isPrototypeOf(G)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},x.blob&&(this.blob=function(){var G=A(this);if(G)return G;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(D)}),this.text=function(){var G=A(this);if(G)return G;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},x.formData&&(this.formData=function(){return this.text().then(ue)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function de(G){var ie=G.toUpperCase();return k.indexOf(ie)>-1?ie:G}function H(G,ie){ie=ie||{};var V=ie.body;if(G instanceof H){if(G.bodyUsed)throw new TypeError("Already read");this.url=G.url,this.credentials=G.credentials,ie.headers||(this.headers=new b(G.headers)),this.method=G.method,this.mode=G.mode,this.signal=G.signal,!V&&G._bodyInit!=null&&(V=G._bodyInit,G.bodyUsed=!0)}else this.url=String(G);if(this.credentials=ie.credentials||this.credentials||"same-origin",(ie.headers||!this.headers)&&(this.headers=new b(ie.headers)),this.method=de(ie.method||this.method||"GET"),this.mode=ie.mode||this.mode||null,this.signal=ie.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function ue(G){var ie=new FormData;return G.trim().split("&").forEach(function(V){if(V){var ae=V.split("="),K=ae.shift().replace(/\+/g," "),he=ae.join("=").replace(/\+/g," ");ie.append(decodeURIComponent(K),decodeURIComponent(he))}}),ie}function ve(G){var ie=new b,V=G.replace(/\r?\n[\t ]+/g," ");return V.split(/\r?\n/).forEach(function(ae){var K=ae.split(":"),he=K.shift().trim();if(he){var Se=K.join(":").trim();ie.append(he,Se)}}),ie}W.call(H.prototype);function ke(G,ie){ie||(ie={}),this.type="default",this.status=ie.status===void 0?200:ie.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ie?ie.statusText:"OK",this.headers=new b(ie.headers),this.url=ie.url||"",this._initBody(G)}W.call(ke.prototype),ke.prototype.clone=function(){return new ke(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},ke.error=function(){var G=new ke(null,{status:0,statusText:""});return G.type="error",G};var Ae=[301,302,303,307,308];ke.redirect=function(G,ie){if(Ae.indexOf(ie)===-1)throw new RangeError("Invalid status code");return new ke(null,{status:ie,headers:{location:G}})},g.DOMException=M.DOMException;try{new g.DOMException}catch(G){g.DOMException=function(ie,V){this.message=ie,this.name=V;var ae=Error(ie);this.stack=ae.stack},g.DOMException.prototype=Object.create(Error.prototype),g.DOMException.prototype.constructor=g.DOMException}function be(G,ie){return new Promise(function(V,ae){var K=new H(G,ie);if(K.signal&&K.signal.aborted)return ae(new g.DOMException("Aborted","AbortError"));var he=new XMLHttpRequest;function Se(){he.abort()}he.onload=function(){var Fe={status:he.status,statusText:he.statusText,headers:ve(he.getAllResponseHeaders()||"")};Fe.url="responseURL"in he?he.responseURL:Fe.headers.get("X-Request-URL");var nt="response"in he?he.response:he.responseText;V(new ke(nt,Fe))},he.onerror=function(){ae(new TypeError("Network request failed"))},he.ontimeout=function(){ae(new TypeError("Network request failed"))},he.onabort=function(){ae(new g.DOMException("Aborted","AbortError"))},he.open(K.method,K.url,!0),K.credentials==="include"?he.withCredentials=!0:K.credentials==="omit"&&(he.withCredentials=!1),"responseType"in he&&x.blob&&(he.responseType="blob"),K.headers.forEach(function(Fe,nt){he.setRequestHeader(nt,Fe)}),K.signal&&(K.signal.addEventListener("abort",Se),he.onreadystatechange=function(){he.readyState===4&&K.signal.removeEventListener("abort",Se)}),he.send(typeof K._bodyInit=="undefined"?null:K._bodyInit)})}return be.polyfill=!0,M.fetch||(M.fetch=be,M.Headers=b,M.Request=H,M.Response=ke),g.Headers=b,g.Request=H,g.Response=ke,g.fetch=be,Object.defineProperty(g,"__esModule",{value:!0}),g}({})})(E),E.fetch.ponyfill=!0,delete E.fetch.polyfill;var p=E;S=p.fetch,S.default=p.fetch,S.fetch=p.fetch,S.Headers=p.Headers,S.Request=p.Request,S.Response=p.Response,Ie.exports=S},37620:function(Ie,S,y){"use strict";y.d(S,{ZP:function(){return W},B8:function(){return ue}});function E(he,Se,Fe){he.prototype=Se.prototype=Fe,Fe.constructor=he}function p(he,Se){var Fe=Object.create(he.prototype);for(var nt in Se)Fe[nt]=Se[nt];return Fe}function M(){}var d=.7,g=1/d,x="\\s*([+-]?\\d+)\\s*",v="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t=/^#([0-9a-f]{3,8})$/,e=new RegExp("^rgb\\("+[x,x,x]+"\\)$"),o=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),c=new RegExp("^rgba\\("+[x,x,x,v]+"\\)$"),b=new RegExp("^rgba\\("+[u,u,u,v]+"\\)$"),A=new RegExp("^hsl\\("+[v,u,u]+"\\)$"),w=new RegExp("^hsla\\("+[v,u,u,v]+"\\)$"),D={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};E(M,W,{copy:function(he){return Object.assign(new this.constructor,this,he)},displayable:function(){return this.rgb().displayable()},hex:F,formatHex:F,formatHsl:Z,formatRgb:L,toString:L});function F(){return this.rgb().formatHex()}function Z(){return ie(this).formatHsl()}function L(){return this.rgb().formatRgb()}function W(he){var Se,Fe;return he=(he+"").trim().toLowerCase(),(Se=t.exec(he))?(Fe=Se[1].length,Se=parseInt(Se[1],16),Fe===6?k(Se):Fe===3?new ve(Se>>8&15|Se>>4&240,Se>>4&15|Se&240,(Se&15)<<4|Se&15,1):Fe===8?de(Se>>24&255,Se>>16&255,Se>>8&255,(Se&255)/255):Fe===4?de(Se>>12&15|Se>>8&240,Se>>8&15|Se>>4&240,Se>>4&15|Se&240,((Se&15)<<4|Se&15)/255):null):(Se=e.exec(he))?new ve(Se[1],Se[2],Se[3],1):(Se=o.exec(he))?new ve(Se[1]*255/100,Se[2]*255/100,Se[3]*255/100,1):(Se=c.exec(he))?de(Se[1],Se[2],Se[3],Se[4]):(Se=b.exec(he))?de(Se[1]*255/100,Se[2]*255/100,Se[3]*255/100,Se[4]):(Se=A.exec(he))?G(Se[1],Se[2]/100,Se[3]/100,1):(Se=w.exec(he))?G(Se[1],Se[2]/100,Se[3]/100,Se[4]):D.hasOwnProperty(he)?k(D[he]):he==="transparent"?new ve(NaN,NaN,NaN,0):null}function k(he){return new ve(he>>16&255,he>>8&255,he&255,1)}function de(he,Se,Fe,nt){return nt<=0&&(he=Se=Fe=NaN),new ve(he,Se,Fe,nt)}function H(he){return he instanceof M||(he=W(he)),he?(he=he.rgb(),new ve(he.r,he.g,he.b,he.opacity)):new ve}function ue(he,Se,Fe,nt){return arguments.length===1?H(he):new ve(he,Se,Fe,nt==null?1:nt)}function ve(he,Se,Fe,nt){this.r=+he,this.g=+Se,this.b=+Fe,this.opacity=+nt}E(ve,ue,p(M,{brighter:function(he){return he=he==null?g:Math.pow(g,he),new ve(this.r*he,this.g*he,this.b*he,this.opacity)},darker:function(he){return he=he==null?d:Math.pow(d,he),new ve(this.r*he,this.g*he,this.b*he,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ke,formatHex:ke,formatRgb:Ae,toString:Ae}));function ke(){return"#"+be(this.r)+be(this.g)+be(this.b)}function Ae(){var he=this.opacity;return he=isNaN(he)?1:Math.max(0,Math.min(1,he)),(he===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(he===1?")":", "+he+")")}function be(he){return he=Math.max(0,Math.min(255,Math.round(he)||0)),(he<16?"0":"")+he.toString(16)}function G(he,Se,Fe,nt){return nt<=0?he=Se=Fe=NaN:Fe<=0||Fe>=1?he=Se=NaN:Se<=0&&(he=NaN),new ae(he,Se,Fe,nt)}function ie(he){if(he instanceof ae)return new ae(he.h,he.s,he.l,he.opacity);if(he instanceof M||(he=W(he)),!he)return new ae;if(he instanceof ae)return he;he=he.rgb();var Se=he.r/255,Fe=he.g/255,nt=he.b/255,lt=Math.min(Se,Fe,nt),Gt=Math.max(Se,Fe,nt),pn=NaN,$n=Gt-lt,Ln=(Gt+lt)/2;return $n?(Se===Gt?pn=(Fe-nt)/$n+(Fe<nt)*6:Fe===Gt?pn=(nt-Se)/$n+2:pn=(Se-Fe)/$n+4,$n/=Ln<.5?Gt+lt:2-Gt-lt,pn*=60):$n=Ln>0&&Ln<1?0:pn,new ae(pn,$n,Ln,he.opacity)}function V(he,Se,Fe,nt){return arguments.length===1?ie(he):new ae(he,Se,Fe,nt==null?1:nt)}function ae(he,Se,Fe,nt){this.h=+he,this.s=+Se,this.l=+Fe,this.opacity=+nt}E(ae,V,p(M,{brighter:function(he){return he=he==null?g:Math.pow(g,he),new ae(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=he==null?d:Math.pow(d,he),new ae(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=this.h%360+(this.h<0)*360,Se=isNaN(he)||isNaN(this.s)?0:this.s,Fe=this.l,nt=Fe+(Fe<.5?Fe:1-Fe)*Se,lt=2*Fe-nt;return new ve(K(he>=240?he-240:he+120,lt,nt),K(he,lt,nt),K(he<120?he+240:he-120,lt,nt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var he=this.opacity;return he=isNaN(he)?1:Math.max(0,Math.min(1,he)),(he===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(he===1?")":", "+he+")")}}));function K(he,Se,Fe){return(he<60?Se+(Fe-Se)*he/60:he<180?Fe:he<240?Se+(Fe-Se)*(240-he)/60:Se)*255}},9187:function(Ie){"use strict";Ie.exports=S,Ie.exports.default=S;function S(V,ae,K){K=K||2;var he=ae&&ae.length,Se=he?ae[0]*K:V.length,Fe=y(V,0,Se,K,!0),nt=[];if(!Fe||Fe.next===Fe.prev)return nt;var lt,Gt,pn,$n,Ln,st,xt;if(he&&(Fe=v(V,ae,Fe,K)),V.length>80*K){lt=pn=V[0],Gt=$n=V[1];for(var tn=K;tn<Se;tn+=K)Ln=V[tn],st=V[tn+1],Ln<lt&&(lt=Ln),st<Gt&&(Gt=st),Ln>pn&&(pn=Ln),st>$n&&($n=st);xt=Math.max(pn-lt,$n-Gt),xt=xt!==0?32767/xt:0}return p(Fe,nt,K,lt,Gt,xt,0),nt}function y(V,ae,K,he,Se){var Fe,nt;if(Se===ie(V,ae,K,he)>0)for(Fe=ae;Fe<K;Fe+=he)nt=Ae(Fe,V[Fe],V[Fe+1],nt);else for(Fe=K-he;Fe>=ae;Fe-=he)nt=Ae(Fe,V[Fe],V[Fe+1],nt);return nt&&L(nt,nt.next)&&(be(nt),nt=nt.next),nt}function E(V,ae){if(!V)return V;ae||(ae=V);var K=V,he;do if(he=!1,!K.steiner&&(L(K,K.next)||Z(K.prev,K,K.next)===0)){if(be(K),K=ae=K.prev,K===K.next)break;he=!0}else K=K.next;while(he||K!==ae);return ae}function p(V,ae,K,he,Se,Fe,nt){if(V){!nt&&Fe&&c(V,he,Se,Fe);for(var lt=V,Gt,pn;V.prev!==V.next;){if(Gt=V.prev,pn=V.next,Fe?d(V,he,Se,Fe):M(V)){ae.push(Gt.i/K|0),ae.push(V.i/K|0),ae.push(pn.i/K|0),be(V),V=pn.next,lt=pn.next;continue}if(V=pn,V===lt){nt?nt===1?(V=g(E(V),ae,K),p(V,ae,K,he,Se,Fe,2)):nt===2&&x(V,ae,K,he,Se,Fe):p(E(V),ae,K,he,Se,Fe,1);break}}}}function M(V){var ae=V.prev,K=V,he=V.next;if(Z(ae,K,he)>=0)return!1;for(var Se=ae.x,Fe=K.x,nt=he.x,lt=ae.y,Gt=K.y,pn=he.y,$n=Se<Fe?Se<nt?Se:nt:Fe<nt?Fe:nt,Ln=lt<Gt?lt<pn?lt:pn:Gt<pn?Gt:pn,st=Se>Fe?Se>nt?Se:nt:Fe>nt?Fe:nt,xt=lt>Gt?lt>pn?lt:pn:Gt>pn?Gt:pn,tn=he.next;tn!==ae;){if(tn.x>=$n&&tn.x<=st&&tn.y>=Ln&&tn.y<=xt&&D(Se,lt,Fe,Gt,nt,pn,tn.x,tn.y)&&Z(tn.prev,tn,tn.next)>=0)return!1;tn=tn.next}return!0}function d(V,ae,K,he){var Se=V.prev,Fe=V,nt=V.next;if(Z(Se,Fe,nt)>=0)return!1;for(var lt=Se.x,Gt=Fe.x,pn=nt.x,$n=Se.y,Ln=Fe.y,st=nt.y,xt=lt<Gt?lt<pn?lt:pn:Gt<pn?Gt:pn,tn=$n<Ln?$n<st?$n:st:Ln<st?Ln:st,Un=lt>Gt?lt>pn?lt:pn:Gt>pn?Gt:pn,We=$n>Ln?$n>st?$n:st:Ln>st?Ln:st,Yt=A(xt,tn,ae,K,he),Ze=A(Un,We,ae,K,he),Pe=V.prevZ,ze=V.nextZ;Pe&&Pe.z>=Yt&&ze&&ze.z<=Ze;){if(Pe.x>=xt&&Pe.x<=Un&&Pe.y>=tn&&Pe.y<=We&&Pe!==Se&&Pe!==nt&&D(lt,$n,Gt,Ln,pn,st,Pe.x,Pe.y)&&Z(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,ze.x>=xt&&ze.x<=Un&&ze.y>=tn&&ze.y<=We&&ze!==Se&&ze!==nt&&D(lt,$n,Gt,Ln,pn,st,ze.x,ze.y)&&Z(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Pe&&Pe.z>=Yt;){if(Pe.x>=xt&&Pe.x<=Un&&Pe.y>=tn&&Pe.y<=We&&Pe!==Se&&Pe!==nt&&D(lt,$n,Gt,Ln,pn,st,Pe.x,Pe.y)&&Z(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;ze&&ze.z<=Ze;){if(ze.x>=xt&&ze.x<=Un&&ze.y>=tn&&ze.y<=We&&ze!==Se&&ze!==nt&&D(lt,$n,Gt,Ln,pn,st,ze.x,ze.y)&&Z(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function g(V,ae,K){var he=V;do{var Se=he.prev,Fe=he.next.next;!L(Se,Fe)&&W(Se,he,he.next,Fe)&&ue(Se,Fe)&&ue(Fe,Se)&&(ae.push(Se.i/K|0),ae.push(he.i/K|0),ae.push(Fe.i/K|0),be(he),be(he.next),he=V=Fe),he=he.next}while(he!==V);return E(he)}function x(V,ae,K,he,Se,Fe){var nt=V;do{for(var lt=nt.next.next;lt!==nt.prev;){if(nt.i!==lt.i&&F(nt,lt)){var Gt=ke(nt,lt);nt=E(nt,nt.next),Gt=E(Gt,Gt.next),p(nt,ae,K,he,Se,Fe,0),p(Gt,ae,K,he,Se,Fe,0);return}lt=lt.next}nt=nt.next}while(nt!==V)}function v(V,ae,K,he){var Se=[],Fe,nt,lt,Gt,pn;for(Fe=0,nt=ae.length;Fe<nt;Fe++)lt=ae[Fe]*he,Gt=Fe<nt-1?ae[Fe+1]*he:V.length,pn=y(V,lt,Gt,he,!1),pn===pn.next&&(pn.steiner=!0),Se.push(w(pn));for(Se.sort(u),Fe=0;Fe<Se.length;Fe++)K=t(Se[Fe],K);return K}function u(V,ae){return V.x-ae.x}function t(V,ae){var K=e(V,ae);if(!K)return ae;var he=ke(K,V);return E(he,he.next),E(K,K.next)}function e(V,ae){var K=ae,he=V.x,Se=V.y,Fe=-1/0,nt;do{if(Se<=K.y&&Se>=K.next.y&&K.next.y!==K.y){var lt=K.x+(Se-K.y)*(K.next.x-K.x)/(K.next.y-K.y);if(lt<=he&&lt>Fe&&(Fe=lt,nt=K.x<K.next.x?K:K.next,lt===he))return nt}K=K.next}while(K!==ae);if(!nt)return null;var Gt=nt,pn=nt.x,$n=nt.y,Ln=1/0,st;K=nt;do he>=K.x&&K.x>=pn&&he!==K.x&&D(Se<$n?he:Fe,Se,pn,$n,Se<$n?Fe:he,Se,K.x,K.y)&&(st=Math.abs(Se-K.y)/(he-K.x),ue(K,V)&&(st<Ln||st===Ln&&(K.x>nt.x||K.x===nt.x&&o(nt,K)))&&(nt=K,Ln=st)),K=K.next;while(K!==Gt);return nt}function o(V,ae){return Z(V.prev,V,ae.prev)<0&&Z(ae.next,V,V.next)<0}function c(V,ae,K,he){var Se=V;do Se.z===0&&(Se.z=A(Se.x,Se.y,ae,K,he)),Se.prevZ=Se.prev,Se.nextZ=Se.next,Se=Se.next;while(Se!==V);Se.prevZ.nextZ=null,Se.prevZ=null,b(Se)}function b(V){var ae,K,he,Se,Fe,nt,lt,Gt,pn=1;do{for(K=V,V=null,Fe=null,nt=0;K;){for(nt++,he=K,lt=0,ae=0;ae<pn&&(lt++,he=he.nextZ,!!he);ae++);for(Gt=pn;lt>0||Gt>0&&he;)lt!==0&&(Gt===0||!he||K.z<=he.z)?(Se=K,K=K.nextZ,lt--):(Se=he,he=he.nextZ,Gt--),Fe?Fe.nextZ=Se:V=Se,Se.prevZ=Fe,Fe=Se;K=he}Fe.nextZ=null,pn*=2}while(nt>1);return V}function A(V,ae,K,he,Se){return V=(V-K)*Se|0,ae=(ae-he)*Se|0,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,ae=(ae|ae<<8)&16711935,ae=(ae|ae<<4)&252645135,ae=(ae|ae<<2)&858993459,ae=(ae|ae<<1)&1431655765,V|ae<<1}function w(V){var ae=V,K=V;do(ae.x<K.x||ae.x===K.x&&ae.y<K.y)&&(K=ae),ae=ae.next;while(ae!==V);return K}function D(V,ae,K,he,Se,Fe,nt,lt){return(Se-nt)*(ae-lt)>=(V-nt)*(Fe-lt)&&(V-nt)*(he-lt)>=(K-nt)*(ae-lt)&&(K-nt)*(Fe-lt)>=(Se-nt)*(he-lt)}function F(V,ae){return V.next.i!==ae.i&&V.prev.i!==ae.i&&!H(V,ae)&&(ue(V,ae)&&ue(ae,V)&&ve(V,ae)&&(Z(V.prev,V,ae.prev)||Z(V,ae.prev,ae))||L(V,ae)&&Z(V.prev,V,V.next)>0&&Z(ae.prev,ae,ae.next)>0)}function Z(V,ae,K){return(ae.y-V.y)*(K.x-ae.x)-(ae.x-V.x)*(K.y-ae.y)}function L(V,ae){return V.x===ae.x&&V.y===ae.y}function W(V,ae,K,he){var Se=de(Z(V,ae,K)),Fe=de(Z(V,ae,he)),nt=de(Z(K,he,V)),lt=de(Z(K,he,ae));return!!(Se!==Fe&&nt!==lt||Se===0&&k(V,K,ae)||Fe===0&&k(V,he,ae)||nt===0&&k(K,V,he)||lt===0&&k(K,ae,he))}function k(V,ae,K){return ae.x<=Math.max(V.x,K.x)&&ae.x>=Math.min(V.x,K.x)&&ae.y<=Math.max(V.y,K.y)&&ae.y>=Math.min(V.y,K.y)}function de(V){return V>0?1:V<0?-1:0}function H(V,ae){var K=V;do{if(K.i!==V.i&&K.next.i!==V.i&&K.i!==ae.i&&K.next.i!==ae.i&&W(K,K.next,V,ae))return!0;K=K.next}while(K!==V);return!1}function ue(V,ae){return Z(V.prev,V,V.next)<0?Z(V,ae,V.next)>=0&&Z(V,V.prev,ae)>=0:Z(V,ae,V.prev)<0||Z(V,V.next,ae)<0}function ve(V,ae){var K=V,he=!1,Se=(V.x+ae.x)/2,Fe=(V.y+ae.y)/2;do K.y>Fe!=K.next.y>Fe&&K.next.y!==K.y&&Se<(K.next.x-K.x)*(Fe-K.y)/(K.next.y-K.y)+K.x&&(he=!he),K=K.next;while(K!==V);return he}function ke(V,ae){var K=new G(V.i,V.x,V.y),he=new G(ae.i,ae.x,ae.y),Se=V.next,Fe=ae.prev;return V.next=ae,ae.prev=V,K.next=Se,Se.prev=K,he.next=K,K.prev=he,Fe.next=he,he.prev=Fe,he}function Ae(V,ae,K,he){var Se=new G(V,ae,K);return he?(Se.next=he.next,Se.prev=he,he.next.prev=Se,he.next=Se):(Se.prev=Se,Se.next=Se),Se}function be(V){V.next.prev=V.prev,V.prev.next=V.next,V.prevZ&&(V.prevZ.nextZ=V.nextZ),V.nextZ&&(V.nextZ.prevZ=V.prevZ)}function G(V,ae,K){this.i=V,this.x=ae,this.y=K,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}S.deviation=function(V,ae,K,he){var Se=ae&&ae.length,Fe=Se?ae[0]*K:V.length,nt=Math.abs(ie(V,0,Fe,K));if(Se)for(var lt=0,Gt=ae.length;lt<Gt;lt++){var pn=ae[lt]*K,$n=lt<Gt-1?ae[lt+1]*K:V.length;nt-=Math.abs(ie(V,pn,$n,K))}var Ln=0;for(lt=0;lt<he.length;lt+=3){var st=he[lt]*K,xt=he[lt+1]*K,tn=he[lt+2]*K;Ln+=Math.abs((V[st]-V[tn])*(V[xt+1]-V[st+1])-(V[st]-V[xt])*(V[tn+1]-V[st+1]))}return nt===0&&Ln===0?0:Math.abs((Ln-nt)/nt)};function ie(V,ae,K,he){for(var Se=0,Fe=ae,nt=K-he;Fe<K;Fe+=he)Se+=(V[nt]-V[Fe])*(V[Fe+1]+V[nt+1]),nt=Fe;return Se}S.flatten=function(V){for(var ae=V[0][0].length,K={vertices:[],holes:[],dimensions:ae},he=0,Se=0;Se<V.length;Se++){for(var Fe=0;Fe<V[Se].length;Fe++)for(var nt=0;nt<ae;nt++)K.vertices.push(V[Se][Fe][nt]);Se>0&&(he+=V[Se-1].length,K.holes.push(he))}return K}},67709:function(Ie){function S(E){var p=E.target||E.srcElement;p.__resizeRAF__&&cancelAnimationFrame(p.__resizeRAF__),p.__resizeRAF__=requestAnimationFrame(function(){var M=p.__resizeTrigger__,d=M&&M.__resizeListeners__;d&&d.forEach(function(g){g.call(M,E)})})}var y=function(p,M){var d=this,g=d.document,x,v=g.attachEvent;typeof navigator!="undefined"&&(x=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function u(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",S)}if(!p.__resizeListeners__)if(p.__resizeListeners__=[],v)p.__resizeTrigger__=p,p.attachEvent("onresize",S);else{getComputedStyle(p).position==="static"&&(p.style.position="relative");var t=p.__resizeTrigger__=g.createElement("object");t.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),t.setAttribute("class","resize-sensor"),t.setAttribute("tabindex","-1"),t.setAttribute("title",""),t.__resizeElement__=p,t.onload=u,t.type="text/html",x&&p.appendChild(t),t.data="about:blank",x||p.appendChild(t)}p.__resizeListeners__.push(M)};Ie.exports=typeof window=="undefined"?y:y.bind(window),Ie.exports.unbind=function(E,p){var M=document.attachEvent,d=E.__resizeListeners__||[];if(p){var g=d.indexOf(p);g!==-1&&d.splice(g,1)}else d=E.__resizeListeners__=[];if(!d.length){if(M)E.detachEvent("onresize",S);else if(E.__resizeTrigger__){var x=E.__resizeTrigger__.contentDocument,v=x&&x.defaultView;v&&(v.removeEventListener("resize",S),delete v.__resizeTrigger__),E.__resizeTrigger__=!E.removeChild(E.__resizeTrigger__)}delete E.__resizeListeners__}}},26729:function(Ie){"use strict";var S=Object.prototype.hasOwnProperty,y="~";function E(){}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(y=!1));function p(x,v,u){this.fn=x,this.context=v,this.once=u||!1}function M(x,v,u,t,e){if(typeof u!="function")throw new TypeError("The listener must be a function");var o=new p(u,t||x,e),c=y?y+v:v;return x._events[c]?x._events[c].fn?x._events[c]=[x._events[c],o]:x._events[c].push(o):(x._events[c]=o,x._eventsCount++),x}function d(x,v){--x._eventsCount===0?x._events=new E:delete x._events[v]}function g(){this._events=new E,this._eventsCount=0}g.prototype.eventNames=function(){var v=[],u,t;if(this._eventsCount===0)return v;for(t in u=this._events)S.call(u,t)&&v.push(y?t.slice(1):t);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(u)):v},g.prototype.listeners=function(v){var u=y?y+v:v,t=this._events[u];if(!t)return[];if(t.fn)return[t.fn];for(var e=0,o=t.length,c=new Array(o);e<o;e++)c[e]=t[e].fn;return c},g.prototype.listenerCount=function(v){var u=y?y+v:v,t=this._events[u];return t?t.fn?1:t.length:0},g.prototype.emit=function(v,u,t,e,o,c){var b=y?y+v:v;if(!this._events[b])return!1;var A=this._events[b],w=arguments.length,D,F;if(A.fn){switch(A.once&&this.removeListener(v,A.fn,void 0,!0),w){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,u),!0;case 3:return A.fn.call(A.context,u,t),!0;case 4:return A.fn.call(A.context,u,t,e),!0;case 5:return A.fn.call(A.context,u,t,e,o),!0;case 6:return A.fn.call(A.context,u,t,e,o,c),!0}for(F=1,D=new Array(w-1);F<w;F++)D[F-1]=arguments[F];A.fn.apply(A.context,D)}else{var Z=A.length,L;for(F=0;F<Z;F++)switch(A[F].once&&this.removeListener(v,A[F].fn,void 0,!0),w){case 1:A[F].fn.call(A[F].context);break;case 2:A[F].fn.call(A[F].context,u);break;case 3:A[F].fn.call(A[F].context,u,t);break;case 4:A[F].fn.call(A[F].context,u,t,e);break;default:if(!D)for(L=1,D=new Array(w-1);L<w;L++)D[L-1]=arguments[L];A[F].fn.apply(A[F].context,D)}}return!0},g.prototype.on=function(v,u,t){return M(this,v,u,t,!1)},g.prototype.once=function(v,u,t){return M(this,v,u,t,!0)},g.prototype.removeListener=function(v,u,t,e){var o=y?y+v:v;if(!this._events[o])return this;if(!u)return d(this,o),this;var c=this._events[o];if(c.fn)c.fn===u&&(!e||c.once)&&(!t||c.context===t)&&d(this,o);else{for(var b=0,A=[],w=c.length;b<w;b++)(c[b].fn!==u||e&&!c[b].once||t&&c[b].context!==t)&&A.push(c[b]);A.length?this._events[o]=A.length===1?A[0]:A:d(this,o)}return this},g.prototype.removeAllListeners=function(v){var u;return v?(u=y?y+v:v,this._events[u]&&d(this,u)):(this._events=new E,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=y,g.EventEmitter=g,Ie.exports=g},49685:function(Ie,S,y){"use strict";y.d(S,{FD:function(){return M},Ib:function(){return E},WT:function(){return p}});var E=1e-6,p=typeof Float32Array!="undefined"?Float32Array:Array,M=Math.random;function d(u){p=u}var g=Math.PI/180;function x(u){return u*g}function v(u,t){return Math.abs(u-t)<=E*Math.max(1,Math.abs(u),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var u=0,t=arguments.length;t--;)u+=arguments[t]*arguments[t];return Math.sqrt(u)})},85975:function(Ie,S,y){"use strict";y.r(S),y.d(S,{add:function(){return tn},adjoint:function(){return e},clone:function(){return M},copy:function(){return d},create:function(){return p},determinant:function(){return o},equals:function(){return Pe},exactEquals:function(){return Ze},frob:function(){return xt},fromQuat:function(){return ae},fromQuat2:function(){return ke},fromRotation:function(){return k},fromRotationTranslation:function(){return ve},fromRotationTranslationScale:function(){return ie},fromRotationTranslationScaleOrigin:function(){return V},fromScaling:function(){return W},fromTranslation:function(){return L},fromValues:function(){return g},fromXRotation:function(){return de},fromYRotation:function(){return H},fromZRotation:function(){return ue},frustum:function(){return K},getRotation:function(){return G},getScaling:function(){return be},getTranslation:function(){return Ae},identity:function(){return v},invert:function(){return t},lookAt:function(){return $n},mul:function(){return ze},multiply:function(){return c},multiplyScalar:function(){return We},multiplyScalarAndAdd:function(){return Yt},ortho:function(){return Gt},orthoNO:function(){return lt},orthoZO:function(){return pn},perspective:function(){return Se},perspectiveFromFieldOfView:function(){return nt},perspectiveNO:function(){return he},perspectiveZO:function(){return Fe},rotate:function(){return w},rotateX:function(){return D},rotateY:function(){return F},rotateZ:function(){return Z},scale:function(){return A},set:function(){return x},str:function(){return st},sub:function(){return ht},subtract:function(){return Un},targetTo:function(){return Ln},translate:function(){return b},transpose:function(){return u}});var E=y(49685);function p(){var P=new E.WT(16);return E.WT!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[11]=0,P[12]=0,P[13]=0,P[14]=0),P[0]=1,P[5]=1,P[10]=1,P[15]=1,P}function M(P){var ne=new E.WT(16);return ne[0]=P[0],ne[1]=P[1],ne[2]=P[2],ne[3]=P[3],ne[4]=P[4],ne[5]=P[5],ne[6]=P[6],ne[7]=P[7],ne[8]=P[8],ne[9]=P[9],ne[10]=P[10],ne[11]=P[11],ne[12]=P[12],ne[13]=P[13],ne[14]=P[14],ne[15]=P[15],ne}function d(P,ne){return P[0]=ne[0],P[1]=ne[1],P[2]=ne[2],P[3]=ne[3],P[4]=ne[4],P[5]=ne[5],P[6]=ne[6],P[7]=ne[7],P[8]=ne[8],P[9]=ne[9],P[10]=ne[10],P[11]=ne[11],P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15],P}function g(P,ne,_e,oe,ce,ye,Y,Ne,Qe,mt,Ve,rt,yt,Tt,Ht,en){var wt=new E.WT(16);return wt[0]=P,wt[1]=ne,wt[2]=_e,wt[3]=oe,wt[4]=ce,wt[5]=ye,wt[6]=Y,wt[7]=Ne,wt[8]=Qe,wt[9]=mt,wt[10]=Ve,wt[11]=rt,wt[12]=yt,wt[13]=Tt,wt[14]=Ht,wt[15]=en,wt}function x(P,ne,_e,oe,ce,ye,Y,Ne,Qe,mt,Ve,rt,yt,Tt,Ht,en,wt){return P[0]=ne,P[1]=_e,P[2]=oe,P[3]=ce,P[4]=ye,P[5]=Y,P[6]=Ne,P[7]=Qe,P[8]=mt,P[9]=Ve,P[10]=rt,P[11]=yt,P[12]=Tt,P[13]=Ht,P[14]=en,P[15]=wt,P}function v(P){return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function u(P,ne){if(P===ne){var _e=ne[1],oe=ne[2],ce=ne[3],ye=ne[6],Y=ne[7],Ne=ne[11];P[1]=ne[4],P[2]=ne[8],P[3]=ne[12],P[4]=_e,P[6]=ne[9],P[7]=ne[13],P[8]=oe,P[9]=ye,P[11]=ne[14],P[12]=ce,P[13]=Y,P[14]=Ne}else P[0]=ne[0],P[1]=ne[4],P[2]=ne[8],P[3]=ne[12],P[4]=ne[1],P[5]=ne[5],P[6]=ne[9],P[7]=ne[13],P[8]=ne[2],P[9]=ne[6],P[10]=ne[10],P[11]=ne[14],P[12]=ne[3],P[13]=ne[7],P[14]=ne[11],P[15]=ne[15];return P}function t(P,ne){var _e=ne[0],oe=ne[1],ce=ne[2],ye=ne[3],Y=ne[4],Ne=ne[5],Qe=ne[6],mt=ne[7],Ve=ne[8],rt=ne[9],yt=ne[10],Tt=ne[11],Ht=ne[12],en=ne[13],wt=ne[14],Mn=ne[15],kn=_e*Ne-oe*Y,jn=_e*Qe-ce*Y,mn=_e*mt-ye*Y,cr=oe*Qe-ce*Ne,Cr=oe*mt-ye*Ne,mi=ce*mt-ye*Qe,$r=Ve*en-rt*Ht,Sr=Ve*wt-yt*Ht,dr=Ve*Mn-Tt*Ht,Pr=rt*wt-yt*en,Hr=rt*Mn-Tt*en,Xi=yt*Mn-Tt*wt,Kn=kn*Xi-jn*Hr+mn*Pr+cr*dr-Cr*Sr+mi*$r;return Kn?(Kn=1/Kn,P[0]=(Ne*Xi-Qe*Hr+mt*Pr)*Kn,P[1]=(ce*Hr-oe*Xi-ye*Pr)*Kn,P[2]=(en*mi-wt*Cr+Mn*cr)*Kn,P[3]=(yt*Cr-rt*mi-Tt*cr)*Kn,P[4]=(Qe*dr-Y*Xi-mt*Sr)*Kn,P[5]=(_e*Xi-ce*dr+ye*Sr)*Kn,P[6]=(wt*mn-Ht*mi-Mn*jn)*Kn,P[7]=(Ve*mi-yt*mn+Tt*jn)*Kn,P[8]=(Y*Hr-Ne*dr+mt*$r)*Kn,P[9]=(oe*dr-_e*Hr-ye*$r)*Kn,P[10]=(Ht*Cr-en*mn+Mn*kn)*Kn,P[11]=(rt*mn-Ve*Cr-Tt*kn)*Kn,P[12]=(Ne*Sr-Y*Pr-Qe*$r)*Kn,P[13]=(_e*Pr-oe*Sr+ce*$r)*Kn,P[14]=(en*jn-Ht*cr-wt*kn)*Kn,P[15]=(Ve*cr-rt*jn+yt*kn)*Kn,P):null}function e(P,ne){var _e=ne[0],oe=ne[1],ce=ne[2],ye=ne[3],Y=ne[4],Ne=ne[5],Qe=ne[6],mt=ne[7],Ve=ne[8],rt=ne[9],yt=ne[10],Tt=ne[11],Ht=ne[12],en=ne[13],wt=ne[14],Mn=ne[15];return P[0]=Ne*(yt*Mn-Tt*wt)-rt*(Qe*Mn-mt*wt)+en*(Qe*Tt-mt*yt),P[1]=-(oe*(yt*Mn-Tt*wt)-rt*(ce*Mn-ye*wt)+en*(ce*Tt-ye*yt)),P[2]=oe*(Qe*Mn-mt*wt)-Ne*(ce*Mn-ye*wt)+en*(ce*mt-ye*Qe),P[3]=-(oe*(Qe*Tt-mt*yt)-Ne*(ce*Tt-ye*yt)+rt*(ce*mt-ye*Qe)),P[4]=-(Y*(yt*Mn-Tt*wt)-Ve*(Qe*Mn-mt*wt)+Ht*(Qe*Tt-mt*yt)),P[5]=_e*(yt*Mn-Tt*wt)-Ve*(ce*Mn-ye*wt)+Ht*(ce*Tt-ye*yt),P[6]=-(_e*(Qe*Mn-mt*wt)-Y*(ce*Mn-ye*wt)+Ht*(ce*mt-ye*Qe)),P[7]=_e*(Qe*Tt-mt*yt)-Y*(ce*Tt-ye*yt)+Ve*(ce*mt-ye*Qe),P[8]=Y*(rt*Mn-Tt*en)-Ve*(Ne*Mn-mt*en)+Ht*(Ne*Tt-mt*rt),P[9]=-(_e*(rt*Mn-Tt*en)-Ve*(oe*Mn-ye*en)+Ht*(oe*Tt-ye*rt)),P[10]=_e*(Ne*Mn-mt*en)-Y*(oe*Mn-ye*en)+Ht*(oe*mt-ye*Ne),P[11]=-(_e*(Ne*Tt-mt*rt)-Y*(oe*Tt-ye*rt)+Ve*(oe*mt-ye*Ne)),P[12]=-(Y*(rt*wt-yt*en)-Ve*(Ne*wt-Qe*en)+Ht*(Ne*yt-Qe*rt)),P[13]=_e*(rt*wt-yt*en)-Ve*(oe*wt-ce*en)+Ht*(oe*yt-ce*rt),P[14]=-(_e*(Ne*wt-Qe*en)-Y*(oe*wt-ce*en)+Ht*(oe*Qe-ce*Ne)),P[15]=_e*(Ne*yt-Qe*rt)-Y*(oe*yt-ce*rt)+Ve*(oe*Qe-ce*Ne),P}function o(P){var ne=P[0],_e=P[1],oe=P[2],ce=P[3],ye=P[4],Y=P[5],Ne=P[6],Qe=P[7],mt=P[8],Ve=P[9],rt=P[10],yt=P[11],Tt=P[12],Ht=P[13],en=P[14],wt=P[15],Mn=ne*Y-_e*ye,kn=ne*Ne-oe*ye,jn=ne*Qe-ce*ye,mn=_e*Ne-oe*Y,cr=_e*Qe-ce*Y,Cr=oe*Qe-ce*Ne,mi=mt*Ht-Ve*Tt,$r=mt*en-rt*Tt,Sr=mt*wt-yt*Tt,dr=Ve*en-rt*Ht,Pr=Ve*wt-yt*Ht,Hr=rt*wt-yt*en;return Mn*Hr-kn*Pr+jn*dr+mn*Sr-cr*$r+Cr*mi}function c(P,ne,_e){var oe=ne[0],ce=ne[1],ye=ne[2],Y=ne[3],Ne=ne[4],Qe=ne[5],mt=ne[6],Ve=ne[7],rt=ne[8],yt=ne[9],Tt=ne[10],Ht=ne[11],en=ne[12],wt=ne[13],Mn=ne[14],kn=ne[15],jn=_e[0],mn=_e[1],cr=_e[2],Cr=_e[3];return P[0]=jn*oe+mn*Ne+cr*rt+Cr*en,P[1]=jn*ce+mn*Qe+cr*yt+Cr*wt,P[2]=jn*ye+mn*mt+cr*Tt+Cr*Mn,P[3]=jn*Y+mn*Ve+cr*Ht+Cr*kn,jn=_e[4],mn=_e[5],cr=_e[6],Cr=_e[7],P[4]=jn*oe+mn*Ne+cr*rt+Cr*en,P[5]=jn*ce+mn*Qe+cr*yt+Cr*wt,P[6]=jn*ye+mn*mt+cr*Tt+Cr*Mn,P[7]=jn*Y+mn*Ve+cr*Ht+Cr*kn,jn=_e[8],mn=_e[9],cr=_e[10],Cr=_e[11],P[8]=jn*oe+mn*Ne+cr*rt+Cr*en,P[9]=jn*ce+mn*Qe+cr*yt+Cr*wt,P[10]=jn*ye+mn*mt+cr*Tt+Cr*Mn,P[11]=jn*Y+mn*Ve+cr*Ht+Cr*kn,jn=_e[12],mn=_e[13],cr=_e[14],Cr=_e[15],P[12]=jn*oe+mn*Ne+cr*rt+Cr*en,P[13]=jn*ce+mn*Qe+cr*yt+Cr*wt,P[14]=jn*ye+mn*mt+cr*Tt+Cr*Mn,P[15]=jn*Y+mn*Ve+cr*Ht+Cr*kn,P}function b(P,ne,_e){var oe=_e[0],ce=_e[1],ye=_e[2],Y,Ne,Qe,mt,Ve,rt,yt,Tt,Ht,en,wt,Mn;return ne===P?(P[12]=ne[0]*oe+ne[4]*ce+ne[8]*ye+ne[12],P[13]=ne[1]*oe+ne[5]*ce+ne[9]*ye+ne[13],P[14]=ne[2]*oe+ne[6]*ce+ne[10]*ye+ne[14],P[15]=ne[3]*oe+ne[7]*ce+ne[11]*ye+ne[15]):(Y=ne[0],Ne=ne[1],Qe=ne[2],mt=ne[3],Ve=ne[4],rt=ne[5],yt=ne[6],Tt=ne[7],Ht=ne[8],en=ne[9],wt=ne[10],Mn=ne[11],P[0]=Y,P[1]=Ne,P[2]=Qe,P[3]=mt,P[4]=Ve,P[5]=rt,P[6]=yt,P[7]=Tt,P[8]=Ht,P[9]=en,P[10]=wt,P[11]=Mn,P[12]=Y*oe+Ve*ce+Ht*ye+ne[12],P[13]=Ne*oe+rt*ce+en*ye+ne[13],P[14]=Qe*oe+yt*ce+wt*ye+ne[14],P[15]=mt*oe+Tt*ce+Mn*ye+ne[15]),P}function A(P,ne,_e){var oe=_e[0],ce=_e[1],ye=_e[2];return P[0]=ne[0]*oe,P[1]=ne[1]*oe,P[2]=ne[2]*oe,P[3]=ne[3]*oe,P[4]=ne[4]*ce,P[5]=ne[5]*ce,P[6]=ne[6]*ce,P[7]=ne[7]*ce,P[8]=ne[8]*ye,P[9]=ne[9]*ye,P[10]=ne[10]*ye,P[11]=ne[11]*ye,P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15],P}function w(P,ne,_e,oe){var ce=oe[0],ye=oe[1],Y=oe[2],Ne=Math.hypot(ce,ye,Y),Qe,mt,Ve,rt,yt,Tt,Ht,en,wt,Mn,kn,jn,mn,cr,Cr,mi,$r,Sr,dr,Pr,Hr,Xi,Kn,Gn;return Ne<E.Ib?null:(Ne=1/Ne,ce*=Ne,ye*=Ne,Y*=Ne,Qe=Math.sin(_e),mt=Math.cos(_e),Ve=1-mt,rt=ne[0],yt=ne[1],Tt=ne[2],Ht=ne[3],en=ne[4],wt=ne[5],Mn=ne[6],kn=ne[7],jn=ne[8],mn=ne[9],cr=ne[10],Cr=ne[11],mi=ce*ce*Ve+mt,$r=ye*ce*Ve+Y*Qe,Sr=Y*ce*Ve-ye*Qe,dr=ce*ye*Ve-Y*Qe,Pr=ye*ye*Ve+mt,Hr=Y*ye*Ve+ce*Qe,Xi=ce*Y*Ve+ye*Qe,Kn=ye*Y*Ve-ce*Qe,Gn=Y*Y*Ve+mt,P[0]=rt*mi+en*$r+jn*Sr,P[1]=yt*mi+wt*$r+mn*Sr,P[2]=Tt*mi+Mn*$r+cr*Sr,P[3]=Ht*mi+kn*$r+Cr*Sr,P[4]=rt*dr+en*Pr+jn*Hr,P[5]=yt*dr+wt*Pr+mn*Hr,P[6]=Tt*dr+Mn*Pr+cr*Hr,P[7]=Ht*dr+kn*Pr+Cr*Hr,P[8]=rt*Xi+en*Kn+jn*Gn,P[9]=yt*Xi+wt*Kn+mn*Gn,P[10]=Tt*Xi+Mn*Kn+cr*Gn,P[11]=Ht*Xi+kn*Kn+Cr*Gn,ne!==P&&(P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15]),P)}function D(P,ne,_e){var oe=Math.sin(_e),ce=Math.cos(_e),ye=ne[4],Y=ne[5],Ne=ne[6],Qe=ne[7],mt=ne[8],Ve=ne[9],rt=ne[10],yt=ne[11];return ne!==P&&(P[0]=ne[0],P[1]=ne[1],P[2]=ne[2],P[3]=ne[3],P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15]),P[4]=ye*ce+mt*oe,P[5]=Y*ce+Ve*oe,P[6]=Ne*ce+rt*oe,P[7]=Qe*ce+yt*oe,P[8]=mt*ce-ye*oe,P[9]=Ve*ce-Y*oe,P[10]=rt*ce-Ne*oe,P[11]=yt*ce-Qe*oe,P}function F(P,ne,_e){var oe=Math.sin(_e),ce=Math.cos(_e),ye=ne[0],Y=ne[1],Ne=ne[2],Qe=ne[3],mt=ne[8],Ve=ne[9],rt=ne[10],yt=ne[11];return ne!==P&&(P[4]=ne[4],P[5]=ne[5],P[6]=ne[6],P[7]=ne[7],P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15]),P[0]=ye*ce-mt*oe,P[1]=Y*ce-Ve*oe,P[2]=Ne*ce-rt*oe,P[3]=Qe*ce-yt*oe,P[8]=ye*oe+mt*ce,P[9]=Y*oe+Ve*ce,P[10]=Ne*oe+rt*ce,P[11]=Qe*oe+yt*ce,P}function Z(P,ne,_e){var oe=Math.sin(_e),ce=Math.cos(_e),ye=ne[0],Y=ne[1],Ne=ne[2],Qe=ne[3],mt=ne[4],Ve=ne[5],rt=ne[6],yt=ne[7];return ne!==P&&(P[8]=ne[8],P[9]=ne[9],P[10]=ne[10],P[11]=ne[11],P[12]=ne[12],P[13]=ne[13],P[14]=ne[14],P[15]=ne[15]),P[0]=ye*ce+mt*oe,P[1]=Y*ce+Ve*oe,P[2]=Ne*ce+rt*oe,P[3]=Qe*ce+yt*oe,P[4]=mt*ce-ye*oe,P[5]=Ve*ce-Y*oe,P[6]=rt*ce-Ne*oe,P[7]=yt*ce-Qe*oe,P}function L(P,ne){return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=ne[0],P[13]=ne[1],P[14]=ne[2],P[15]=1,P}function W(P,ne){return P[0]=ne[0],P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=ne[1],P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=ne[2],P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function k(P,ne,_e){var oe=_e[0],ce=_e[1],ye=_e[2],Y=Math.hypot(oe,ce,ye),Ne,Qe,mt;return Y<E.Ib?null:(Y=1/Y,oe*=Y,ce*=Y,ye*=Y,Ne=Math.sin(ne),Qe=Math.cos(ne),mt=1-Qe,P[0]=oe*oe*mt+Qe,P[1]=ce*oe*mt+ye*Ne,P[2]=ye*oe*mt-ce*Ne,P[3]=0,P[4]=oe*ce*mt-ye*Ne,P[5]=ce*ce*mt+Qe,P[6]=ye*ce*mt+oe*Ne,P[7]=0,P[8]=oe*ye*mt+ce*Ne,P[9]=ce*ye*mt-oe*Ne,P[10]=ye*ye*mt+Qe,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P)}function de(P,ne){var _e=Math.sin(ne),oe=Math.cos(ne);return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=oe,P[6]=_e,P[7]=0,P[8]=0,P[9]=-_e,P[10]=oe,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function H(P,ne){var _e=Math.sin(ne),oe=Math.cos(ne);return P[0]=oe,P[1]=0,P[2]=-_e,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=_e,P[9]=0,P[10]=oe,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function ue(P,ne){var _e=Math.sin(ne),oe=Math.cos(ne);return P[0]=oe,P[1]=_e,P[2]=0,P[3]=0,P[4]=-_e,P[5]=oe,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function ve(P,ne,_e){var oe=ne[0],ce=ne[1],ye=ne[2],Y=ne[3],Ne=oe+oe,Qe=ce+ce,mt=ye+ye,Ve=oe*Ne,rt=oe*Qe,yt=oe*mt,Tt=ce*Qe,Ht=ce*mt,en=ye*mt,wt=Y*Ne,Mn=Y*Qe,kn=Y*mt;return P[0]=1-(Tt+en),P[1]=rt+kn,P[2]=yt-Mn,P[3]=0,P[4]=rt-kn,P[5]=1-(Ve+en),P[6]=Ht+wt,P[7]=0,P[8]=yt+Mn,P[9]=Ht-wt,P[10]=1-(Ve+Tt),P[11]=0,P[12]=_e[0],P[13]=_e[1],P[14]=_e[2],P[15]=1,P}function ke(P,ne){var _e=new E.WT(3),oe=-ne[0],ce=-ne[1],ye=-ne[2],Y=ne[3],Ne=ne[4],Qe=ne[5],mt=ne[6],Ve=ne[7],rt=oe*oe+ce*ce+ye*ye+Y*Y;return rt>0?(_e[0]=(Ne*Y+Ve*oe+Qe*ye-mt*ce)*2/rt,_e[1]=(Qe*Y+Ve*ce+mt*oe-Ne*ye)*2/rt,_e[2]=(mt*Y+Ve*ye+Ne*ce-Qe*oe)*2/rt):(_e[0]=(Ne*Y+Ve*oe+Qe*ye-mt*ce)*2,_e[1]=(Qe*Y+Ve*ce+mt*oe-Ne*ye)*2,_e[2]=(mt*Y+Ve*ye+Ne*ce-Qe*oe)*2),ve(P,ne,_e),P}function Ae(P,ne){return P[0]=ne[12],P[1]=ne[13],P[2]=ne[14],P}function be(P,ne){var _e=ne[0],oe=ne[1],ce=ne[2],ye=ne[4],Y=ne[5],Ne=ne[6],Qe=ne[8],mt=ne[9],Ve=ne[10];return P[0]=Math.hypot(_e,oe,ce),P[1]=Math.hypot(ye,Y,Ne),P[2]=Math.hypot(Qe,mt,Ve),P}function G(P,ne){var _e=new E.WT(3);be(_e,ne);var oe=1/_e[0],ce=1/_e[1],ye=1/_e[2],Y=ne[0]*oe,Ne=ne[1]*ce,Qe=ne[2]*ye,mt=ne[4]*oe,Ve=ne[5]*ce,rt=ne[6]*ye,yt=ne[8]*oe,Tt=ne[9]*ce,Ht=ne[10]*ye,en=Y+Ve+Ht,wt=0;return en>0?(wt=Math.sqrt(en+1)*2,P[3]=.25*wt,P[0]=(rt-Tt)/wt,P[1]=(yt-Qe)/wt,P[2]=(Ne-mt)/wt):Y>Ve&&Y>Ht?(wt=Math.sqrt(1+Y-Ve-Ht)*2,P[3]=(rt-Tt)/wt,P[0]=.25*wt,P[1]=(Ne+mt)/wt,P[2]=(yt+Qe)/wt):Ve>Ht?(wt=Math.sqrt(1+Ve-Y-Ht)*2,P[3]=(yt-Qe)/wt,P[0]=(Ne+mt)/wt,P[1]=.25*wt,P[2]=(rt+Tt)/wt):(wt=Math.sqrt(1+Ht-Y-Ve)*2,P[3]=(Ne-mt)/wt,P[0]=(yt+Qe)/wt,P[1]=(rt+Tt)/wt,P[2]=.25*wt),P}function ie(P,ne,_e,oe){var ce=ne[0],ye=ne[1],Y=ne[2],Ne=ne[3],Qe=ce+ce,mt=ye+ye,Ve=Y+Y,rt=ce*Qe,yt=ce*mt,Tt=ce*Ve,Ht=ye*mt,en=ye*Ve,wt=Y*Ve,Mn=Ne*Qe,kn=Ne*mt,jn=Ne*Ve,mn=oe[0],cr=oe[1],Cr=oe[2];return P[0]=(1-(Ht+wt))*mn,P[1]=(yt+jn)*mn,P[2]=(Tt-kn)*mn,P[3]=0,P[4]=(yt-jn)*cr,P[5]=(1-(rt+wt))*cr,P[6]=(en+Mn)*cr,P[7]=0,P[8]=(Tt+kn)*Cr,P[9]=(en-Mn)*Cr,P[10]=(1-(rt+Ht))*Cr,P[11]=0,P[12]=_e[0],P[13]=_e[1],P[14]=_e[2],P[15]=1,P}function V(P,ne,_e,oe,ce){var ye=ne[0],Y=ne[1],Ne=ne[2],Qe=ne[3],mt=ye+ye,Ve=Y+Y,rt=Ne+Ne,yt=ye*mt,Tt=ye*Ve,Ht=ye*rt,en=Y*Ve,wt=Y*rt,Mn=Ne*rt,kn=Qe*mt,jn=Qe*Ve,mn=Qe*rt,cr=oe[0],Cr=oe[1],mi=oe[2],$r=ce[0],Sr=ce[1],dr=ce[2],Pr=(1-(en+Mn))*cr,Hr=(Tt+mn)*cr,Xi=(Ht-jn)*cr,Kn=(Tt-mn)*Cr,Gn=(1-(yt+Mn))*Cr,pt=(wt+kn)*Cr,Ha=(Ht+jn)*mi,Sa=(wt-kn)*mi,Qa=(1-(yt+en))*mi;return P[0]=Pr,P[1]=Hr,P[2]=Xi,P[3]=0,P[4]=Kn,P[5]=Gn,P[6]=pt,P[7]=0,P[8]=Ha,P[9]=Sa,P[10]=Qa,P[11]=0,P[12]=_e[0]+$r-(Pr*$r+Kn*Sr+Ha*dr),P[13]=_e[1]+Sr-(Hr*$r+Gn*Sr+Sa*dr),P[14]=_e[2]+dr-(Xi*$r+pt*Sr+Qa*dr),P[15]=1,P}function ae(P,ne){var _e=ne[0],oe=ne[1],ce=ne[2],ye=ne[3],Y=_e+_e,Ne=oe+oe,Qe=ce+ce,mt=_e*Y,Ve=oe*Y,rt=oe*Ne,yt=ce*Y,Tt=ce*Ne,Ht=ce*Qe,en=ye*Y,wt=ye*Ne,Mn=ye*Qe;return P[0]=1-rt-Ht,P[1]=Ve+Mn,P[2]=yt-wt,P[3]=0,P[4]=Ve-Mn,P[5]=1-mt-Ht,P[6]=Tt+en,P[7]=0,P[8]=yt+wt,P[9]=Tt-en,P[10]=1-mt-rt,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}function K(P,ne,_e,oe,ce,ye,Y){var Ne=1/(_e-ne),Qe=1/(ce-oe),mt=1/(ye-Y);return P[0]=ye*2*Ne,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=ye*2*Qe,P[6]=0,P[7]=0,P[8]=(_e+ne)*Ne,P[9]=(ce+oe)*Qe,P[10]=(Y+ye)*mt,P[11]=-1,P[12]=0,P[13]=0,P[14]=Y*ye*2*mt,P[15]=0,P}function he(P,ne,_e,oe,ce){var ye=1/Math.tan(ne/2),Y;return P[0]=ye/_e,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=ye,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[11]=-1,P[12]=0,P[13]=0,P[15]=0,ce!=null&&ce!==1/0?(Y=1/(oe-ce),P[10]=(ce+oe)*Y,P[14]=2*ce*oe*Y):(P[10]=-1,P[14]=-2*oe),P}var Se=he;function Fe(P,ne,_e,oe,ce){var ye=1/Math.tan(ne/2),Y;return P[0]=ye/_e,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=ye,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[11]=-1,P[12]=0,P[13]=0,P[15]=0,ce!=null&&ce!==1/0?(Y=1/(oe-ce),P[10]=ce*Y,P[14]=ce*oe*Y):(P[10]=-1,P[14]=-oe),P}function nt(P,ne,_e,oe){var ce=Math.tan(ne.upDegrees*Math.PI/180),ye=Math.tan(ne.downDegrees*Math.PI/180),Y=Math.tan(ne.leftDegrees*Math.PI/180),Ne=Math.tan(ne.rightDegrees*Math.PI/180),Qe=2/(Y+Ne),mt=2/(ce+ye);return P[0]=Qe,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=mt,P[6]=0,P[7]=0,P[8]=-((Y-Ne)*Qe*.5),P[9]=(ce-ye)*mt*.5,P[10]=oe/(_e-oe),P[11]=-1,P[12]=0,P[13]=0,P[14]=oe*_e/(_e-oe),P[15]=0,P}function lt(P,ne,_e,oe,ce,ye,Y){var Ne=1/(ne-_e),Qe=1/(oe-ce),mt=1/(ye-Y);return P[0]=-2*Ne,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=-2*Qe,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=2*mt,P[11]=0,P[12]=(ne+_e)*Ne,P[13]=(ce+oe)*Qe,P[14]=(Y+ye)*mt,P[15]=1,P}var Gt=lt;function pn(P,ne,_e,oe,ce,ye,Y){var Ne=1/(ne-_e),Qe=1/(oe-ce),mt=1/(ye-Y);return P[0]=-2*Ne,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=-2*Qe,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=mt,P[11]=0,P[12]=(ne+_e)*Ne,P[13]=(ce+oe)*Qe,P[14]=ye*mt,P[15]=1,P}function $n(P,ne,_e,oe){var ce,ye,Y,Ne,Qe,mt,Ve,rt,yt,Tt,Ht=ne[0],en=ne[1],wt=ne[2],Mn=oe[0],kn=oe[1],jn=oe[2],mn=_e[0],cr=_e[1],Cr=_e[2];return Math.abs(Ht-mn)<E.Ib&&Math.abs(en-cr)<E.Ib&&Math.abs(wt-Cr)<E.Ib?v(P):(Ve=Ht-mn,rt=en-cr,yt=wt-Cr,Tt=1/Math.hypot(Ve,rt,yt),Ve*=Tt,rt*=Tt,yt*=Tt,ce=kn*yt-jn*rt,ye=jn*Ve-Mn*yt,Y=Mn*rt-kn*Ve,Tt=Math.hypot(ce,ye,Y),Tt?(Tt=1/Tt,ce*=Tt,ye*=Tt,Y*=Tt):(ce=0,ye=0,Y=0),Ne=rt*Y-yt*ye,Qe=yt*ce-Ve*Y,mt=Ve*ye-rt*ce,Tt=Math.hypot(Ne,Qe,mt),Tt?(Tt=1/Tt,Ne*=Tt,Qe*=Tt,mt*=Tt):(Ne=0,Qe=0,mt=0),P[0]=ce,P[1]=Ne,P[2]=Ve,P[3]=0,P[4]=ye,P[5]=Qe,P[6]=rt,P[7]=0,P[8]=Y,P[9]=mt,P[10]=yt,P[11]=0,P[12]=-(ce*Ht+ye*en+Y*wt),P[13]=-(Ne*Ht+Qe*en+mt*wt),P[14]=-(Ve*Ht+rt*en+yt*wt),P[15]=1,P)}function Ln(P,ne,_e,oe){var ce=ne[0],ye=ne[1],Y=ne[2],Ne=oe[0],Qe=oe[1],mt=oe[2],Ve=ce-_e[0],rt=ye-_e[1],yt=Y-_e[2],Tt=Ve*Ve+rt*rt+yt*yt;Tt>0&&(Tt=1/Math.sqrt(Tt),Ve*=Tt,rt*=Tt,yt*=Tt);var Ht=Qe*yt-mt*rt,en=mt*Ve-Ne*yt,wt=Ne*rt-Qe*Ve;return Tt=Ht*Ht+en*en+wt*wt,Tt>0&&(Tt=1/Math.sqrt(Tt),Ht*=Tt,en*=Tt,wt*=Tt),P[0]=Ht,P[1]=en,P[2]=wt,P[3]=0,P[4]=rt*wt-yt*en,P[5]=yt*Ht-Ve*wt,P[6]=Ve*en-rt*Ht,P[7]=0,P[8]=Ve,P[9]=rt,P[10]=yt,P[11]=0,P[12]=ce,P[13]=ye,P[14]=Y,P[15]=1,P}function st(P){return"mat4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+", "+P[4]+", "+P[5]+", "+P[6]+", "+P[7]+", "+P[8]+", "+P[9]+", "+P[10]+", "+P[11]+", "+P[12]+", "+P[13]+", "+P[14]+", "+P[15]+")"}function xt(P){return Math.hypot(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15])}function tn(P,ne,_e){return P[0]=ne[0]+_e[0],P[1]=ne[1]+_e[1],P[2]=ne[2]+_e[2],P[3]=ne[3]+_e[3],P[4]=ne[4]+_e[4],P[5]=ne[5]+_e[5],P[6]=ne[6]+_e[6],P[7]=ne[7]+_e[7],P[8]=ne[8]+_e[8],P[9]=ne[9]+_e[9],P[10]=ne[10]+_e[10],P[11]=ne[11]+_e[11],P[12]=ne[12]+_e[12],P[13]=ne[13]+_e[13],P[14]=ne[14]+_e[14],P[15]=ne[15]+_e[15],P}function Un(P,ne,_e){return P[0]=ne[0]-_e[0],P[1]=ne[1]-_e[1],P[2]=ne[2]-_e[2],P[3]=ne[3]-_e[3],P[4]=ne[4]-_e[4],P[5]=ne[5]-_e[5],P[6]=ne[6]-_e[6],P[7]=ne[7]-_e[7],P[8]=ne[8]-_e[8],P[9]=ne[9]-_e[9],P[10]=ne[10]-_e[10],P[11]=ne[11]-_e[11],P[12]=ne[12]-_e[12],P[13]=ne[13]-_e[13],P[14]=ne[14]-_e[14],P[15]=ne[15]-_e[15],P}function We(P,ne,_e){return P[0]=ne[0]*_e,P[1]=ne[1]*_e,P[2]=ne[2]*_e,P[3]=ne[3]*_e,P[4]=ne[4]*_e,P[5]=ne[5]*_e,P[6]=ne[6]*_e,P[7]=ne[7]*_e,P[8]=ne[8]*_e,P[9]=ne[9]*_e,P[10]=ne[10]*_e,P[11]=ne[11]*_e,P[12]=ne[12]*_e,P[13]=ne[13]*_e,P[14]=ne[14]*_e,P[15]=ne[15]*_e,P}function Yt(P,ne,_e,oe){return P[0]=ne[0]+_e[0]*oe,P[1]=ne[1]+_e[1]*oe,P[2]=ne[2]+_e[2]*oe,P[3]=ne[3]+_e[3]*oe,P[4]=ne[4]+_e[4]*oe,P[5]=ne[5]+_e[5]*oe,P[6]=ne[6]+_e[6]*oe,P[7]=ne[7]+_e[7]*oe,P[8]=ne[8]+_e[8]*oe,P[9]=ne[9]+_e[9]*oe,P[10]=ne[10]+_e[10]*oe,P[11]=ne[11]+_e[11]*oe,P[12]=ne[12]+_e[12]*oe,P[13]=ne[13]+_e[13]*oe,P[14]=ne[14]+_e[14]*oe,P[15]=ne[15]+_e[15]*oe,P}function Ze(P,ne){return P[0]===ne[0]&&P[1]===ne[1]&&P[2]===ne[2]&&P[3]===ne[3]&&P[4]===ne[4]&&P[5]===ne[5]&&P[6]===ne[6]&&P[7]===ne[7]&&P[8]===ne[8]&&P[9]===ne[9]&&P[10]===ne[10]&&P[11]===ne[11]&&P[12]===ne[12]&&P[13]===ne[13]&&P[14]===ne[14]&&P[15]===ne[15]}function Pe(P,ne){var _e=P[0],oe=P[1],ce=P[2],ye=P[3],Y=P[4],Ne=P[5],Qe=P[6],mt=P[7],Ve=P[8],rt=P[9],yt=P[10],Tt=P[11],Ht=P[12],en=P[13],wt=P[14],Mn=P[15],kn=ne[0],jn=ne[1],mn=ne[2],cr=ne[3],Cr=ne[4],mi=ne[5],$r=ne[6],Sr=ne[7],dr=ne[8],Pr=ne[9],Hr=ne[10],Xi=ne[11],Kn=ne[12],Gn=ne[13],pt=ne[14],Ha=ne[15];return Math.abs(_e-kn)<=E.Ib*Math.max(1,Math.abs(_e),Math.abs(kn))&&Math.abs(oe-jn)<=E.Ib*Math.max(1,Math.abs(oe),Math.abs(jn))&&Math.abs(ce-mn)<=E.Ib*Math.max(1,Math.abs(ce),Math.abs(mn))&&Math.abs(ye-cr)<=E.Ib*Math.max(1,Math.abs(ye),Math.abs(cr))&&Math.abs(Y-Cr)<=E.Ib*Math.max(1,Math.abs(Y),Math.abs(Cr))&&Math.abs(Ne-mi)<=E.Ib*Math.max(1,Math.abs(Ne),Math.abs(mi))&&Math.abs(Qe-$r)<=E.Ib*Math.max(1,Math.abs(Qe),Math.abs($r))&&Math.abs(mt-Sr)<=E.Ib*Math.max(1,Math.abs(mt),Math.abs(Sr))&&Math.abs(Ve-dr)<=E.Ib*Math.max(1,Math.abs(Ve),Math.abs(dr))&&Math.abs(rt-Pr)<=E.Ib*Math.max(1,Math.abs(rt),Math.abs(Pr))&&Math.abs(yt-Hr)<=E.Ib*Math.max(1,Math.abs(yt),Math.abs(Hr))&&Math.abs(Tt-Xi)<=E.Ib*Math.max(1,Math.abs(Tt),Math.abs(Xi))&&Math.abs(Ht-Kn)<=E.Ib*Math.max(1,Math.abs(Ht),Math.abs(Kn))&&Math.abs(en-Gn)<=E.Ib*Math.max(1,Math.abs(en),Math.abs(Gn))&&Math.abs(wt-pt)<=E.Ib*Math.max(1,Math.abs(wt),Math.abs(pt))&&Math.abs(Mn-Ha)<=E.Ib*Math.max(1,Math.abs(Mn),Math.abs(Ha))}var ze=c,ht=Un},31437:function(Ie,S,y){"use strict";y.d(S,{$X:function(){return u},AK:function(){return ve},Fv:function(){return ue},IH:function(){return v},JG:function(){return g},Ue:function(){return p},al:function(){return d},lu:function(){return pn},t7:function(){return Ae},t8:function(){return x},tk:function(){return de}});var E=y(49685);function p(){var We=new E.WT(2);return E.WT!=Float32Array&&(We[0]=0,We[1]=0),We}function M(We){var Yt=new glMatrix.ARRAY_TYPE(2);return Yt[0]=We[0],Yt[1]=We[1],Yt}function d(We,Yt){var Ze=new E.WT(2);return Ze[0]=We,Ze[1]=Yt,Ze}function g(We,Yt){return We[0]=Yt[0],We[1]=Yt[1],We}function x(We,Yt,Ze){return We[0]=Yt,We[1]=Ze,We}function v(We,Yt,Ze){return We[0]=Yt[0]+Ze[0],We[1]=Yt[1]+Ze[1],We}function u(We,Yt,Ze){return We[0]=Yt[0]-Ze[0],We[1]=Yt[1]-Ze[1],We}function t(We,Yt,Ze){return We[0]=Yt[0]*Ze[0],We[1]=Yt[1]*Ze[1],We}function e(We,Yt,Ze){return We[0]=Yt[0]/Ze[0],We[1]=Yt[1]/Ze[1],We}function o(We,Yt){return We[0]=Math.ceil(Yt[0]),We[1]=Math.ceil(Yt[1]),We}function c(We,Yt){return We[0]=Math.floor(Yt[0]),We[1]=Math.floor(Yt[1]),We}function b(We,Yt,Ze){return We[0]=Math.min(Yt[0],Ze[0]),We[1]=Math.min(Yt[1],Ze[1]),We}function A(We,Yt,Ze){return We[0]=Math.max(Yt[0],Ze[0]),We[1]=Math.max(Yt[1],Ze[1]),We}function w(We,Yt){return We[0]=Math.round(Yt[0]),We[1]=Math.round(Yt[1]),We}function D(We,Yt,Ze){return We[0]=Yt[0]*Ze,We[1]=Yt[1]*Ze,We}function F(We,Yt,Ze,Pe){return We[0]=Yt[0]+Ze[0]*Pe,We[1]=Yt[1]+Ze[1]*Pe,We}function Z(We,Yt){var Ze=Yt[0]-We[0],Pe=Yt[1]-We[1];return Math.hypot(Ze,Pe)}function L(We,Yt){var Ze=Yt[0]-We[0],Pe=Yt[1]-We[1];return Ze*Ze+Pe*Pe}function W(We){var Yt=We[0],Ze=We[1];return Math.hypot(Yt,Ze)}function k(We){var Yt=We[0],Ze=We[1];return Yt*Yt+Ze*Ze}function de(We,Yt){return We[0]=-Yt[0],We[1]=-Yt[1],We}function H(We,Yt){return We[0]=1/Yt[0],We[1]=1/Yt[1],We}function ue(We,Yt){var Ze=Yt[0],Pe=Yt[1],ze=Ze*Ze+Pe*Pe;return ze>0&&(ze=1/Math.sqrt(ze)),We[0]=Yt[0]*ze,We[1]=Yt[1]*ze,We}function ve(We,Yt){return We[0]*Yt[0]+We[1]*Yt[1]}function ke(We,Yt,Ze){var Pe=Yt[0]*Ze[1]-Yt[1]*Ze[0];return We[0]=We[1]=0,We[2]=Pe,We}function Ae(We,Yt,Ze,Pe){var ze=Yt[0],ht=Yt[1];return We[0]=ze+Pe*(Ze[0]-ze),We[1]=ht+Pe*(Ze[1]-ht),We}function be(We,Yt){Yt=Yt||1;var Ze=glMatrix.RANDOM()*2*Math.PI;return We[0]=Math.cos(Ze)*Yt,We[1]=Math.sin(Ze)*Yt,We}function G(We,Yt,Ze){var Pe=Yt[0],ze=Yt[1];return We[0]=Ze[0]*Pe+Ze[2]*ze,We[1]=Ze[1]*Pe+Ze[3]*ze,We}function ie(We,Yt,Ze){var Pe=Yt[0],ze=Yt[1];return We[0]=Ze[0]*Pe+Ze[2]*ze+Ze[4],We[1]=Ze[1]*Pe+Ze[3]*ze+Ze[5],We}function V(We,Yt,Ze){var Pe=Yt[0],ze=Yt[1];return We[0]=Ze[0]*Pe+Ze[3]*ze+Ze[6],We[1]=Ze[1]*Pe+Ze[4]*ze+Ze[7],We}function ae(We,Yt,Ze){var Pe=Yt[0],ze=Yt[1];return We[0]=Ze[0]*Pe+Ze[4]*ze+Ze[12],We[1]=Ze[1]*Pe+Ze[5]*ze+Ze[13],We}function K(We,Yt,Ze,Pe){var ze=Yt[0]-Ze[0],ht=Yt[1]-Ze[1],P=Math.sin(Pe),ne=Math.cos(Pe);return We[0]=ze*ne-ht*P+Ze[0],We[1]=ze*P+ht*ne+Ze[1],We}function he(We,Yt){var Ze=We[0],Pe=We[1],ze=Yt[0],ht=Yt[1],P=Math.sqrt(Ze*Ze+Pe*Pe)*Math.sqrt(ze*ze+ht*ht),ne=P&&(Ze*ze+Pe*ht)/P;return Math.acos(Math.min(Math.max(ne,-1),1))}function Se(We){return We[0]=0,We[1]=0,We}function Fe(We){return"vec2("+We[0]+", "+We[1]+")"}function nt(We,Yt){return We[0]===Yt[0]&&We[1]===Yt[1]}function lt(We,Yt){var Ze=We[0],Pe=We[1],ze=Yt[0],ht=Yt[1];return Math.abs(Ze-ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(ze))&&Math.abs(Pe-ht)<=glMatrix.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(ht))}var Gt=null,pn=u,$n=null,Ln=null,st=null,xt=null,tn=null,Un=function(){var We=p();return function(Yt,Ze,Pe,ze,ht,P){var ne,_e;for(Ze||(Ze=2),Pe||(Pe=0),ze?_e=Math.min(ze*Ze+Pe,Yt.length):_e=Yt.length,ne=Pe;ne<_e;ne+=Ze)We[0]=Yt[ne],We[1]=Yt[ne+1],ht(We,We,P),Yt[ne]=We[0],Yt[ne+1]=We[1];return Yt}}()},77160:function(Ie,S,y){"use strict";y.r(S),y.d(S,{add:function(){return u},angle:function(){return nt},bezier:function(){return G},ceil:function(){return c},clone:function(){return M},copy:function(){return x},create:function(){return p},cross:function(){return ke},dist:function(){return tn},distance:function(){return L},div:function(){return xt},divide:function(){return o},dot:function(){return ve},equals:function(){return $n},exactEquals:function(){return pn},floor:function(){return b},forEach:function(){return Ze},fromValues:function(){return g},hermite:function(){return be},inverse:function(){return H},len:function(){return We},length:function(){return d},lerp:function(){return Ae},max:function(){return w},min:function(){return A},mul:function(){return st},multiply:function(){return e},negate:function(){return de},normalize:function(){return ue},random:function(){return ie},rotateX:function(){return he},rotateY:function(){return Se},rotateZ:function(){return Fe},round:function(){return D},scale:function(){return F},scaleAndAdd:function(){return Z},set:function(){return v},sqrDist:function(){return Un},sqrLen:function(){return Yt},squaredDistance:function(){return W},squaredLength:function(){return k},str:function(){return Gt},sub:function(){return Ln},subtract:function(){return t},transformMat3:function(){return ae},transformMat4:function(){return V},transformQuat:function(){return K},zero:function(){return lt}});var E=y(49685);function p(){var Pe=new E.WT(3);return E.WT!=Float32Array&&(Pe[0]=0,Pe[1]=0,Pe[2]=0),Pe}function M(Pe){var ze=new E.WT(3);return ze[0]=Pe[0],ze[1]=Pe[1],ze[2]=Pe[2],ze}function d(Pe){var ze=Pe[0],ht=Pe[1],P=Pe[2];return Math.hypot(ze,ht,P)}function g(Pe,ze,ht){var P=new E.WT(3);return P[0]=Pe,P[1]=ze,P[2]=ht,P}function x(Pe,ze){return Pe[0]=ze[0],Pe[1]=ze[1],Pe[2]=ze[2],Pe}function v(Pe,ze,ht,P){return Pe[0]=ze,Pe[1]=ht,Pe[2]=P,Pe}function u(Pe,ze,ht){return Pe[0]=ze[0]+ht[0],Pe[1]=ze[1]+ht[1],Pe[2]=ze[2]+ht[2],Pe}function t(Pe,ze,ht){return Pe[0]=ze[0]-ht[0],Pe[1]=ze[1]-ht[1],Pe[2]=ze[2]-ht[2],Pe}function e(Pe,ze,ht){return Pe[0]=ze[0]*ht[0],Pe[1]=ze[1]*ht[1],Pe[2]=ze[2]*ht[2],Pe}function o(Pe,ze,ht){return Pe[0]=ze[0]/ht[0],Pe[1]=ze[1]/ht[1],Pe[2]=ze[2]/ht[2],Pe}function c(Pe,ze){return Pe[0]=Math.ceil(ze[0]),Pe[1]=Math.ceil(ze[1]),Pe[2]=Math.ceil(ze[2]),Pe}function b(Pe,ze){return Pe[0]=Math.floor(ze[0]),Pe[1]=Math.floor(ze[1]),Pe[2]=Math.floor(ze[2]),Pe}function A(Pe,ze,ht){return Pe[0]=Math.min(ze[0],ht[0]),Pe[1]=Math.min(ze[1],ht[1]),Pe[2]=Math.min(ze[2],ht[2]),Pe}function w(Pe,ze,ht){return Pe[0]=Math.max(ze[0],ht[0]),Pe[1]=Math.max(ze[1],ht[1]),Pe[2]=Math.max(ze[2],ht[2]),Pe}function D(Pe,ze){return Pe[0]=Math.round(ze[0]),Pe[1]=Math.round(ze[1]),Pe[2]=Math.round(ze[2]),Pe}function F(Pe,ze,ht){return Pe[0]=ze[0]*ht,Pe[1]=ze[1]*ht,Pe[2]=ze[2]*ht,Pe}function Z(Pe,ze,ht,P){return Pe[0]=ze[0]+ht[0]*P,Pe[1]=ze[1]+ht[1]*P,Pe[2]=ze[2]+ht[2]*P,Pe}function L(Pe,ze){var ht=ze[0]-Pe[0],P=ze[1]-Pe[1],ne=ze[2]-Pe[2];return Math.hypot(ht,P,ne)}function W(Pe,ze){var ht=ze[0]-Pe[0],P=ze[1]-Pe[1],ne=ze[2]-Pe[2];return ht*ht+P*P+ne*ne}function k(Pe){var ze=Pe[0],ht=Pe[1],P=Pe[2];return ze*ze+ht*ht+P*P}function de(Pe,ze){return Pe[0]=-ze[0],Pe[1]=-ze[1],Pe[2]=-ze[2],Pe}function H(Pe,ze){return Pe[0]=1/ze[0],Pe[1]=1/ze[1],Pe[2]=1/ze[2],Pe}function ue(Pe,ze){var ht=ze[0],P=ze[1],ne=ze[2],_e=ht*ht+P*P+ne*ne;return _e>0&&(_e=1/Math.sqrt(_e)),Pe[0]=ze[0]*_e,Pe[1]=ze[1]*_e,Pe[2]=ze[2]*_e,Pe}function ve(Pe,ze){return Pe[0]*ze[0]+Pe[1]*ze[1]+Pe[2]*ze[2]}function ke(Pe,ze,ht){var P=ze[0],ne=ze[1],_e=ze[2],oe=ht[0],ce=ht[1],ye=ht[2];return Pe[0]=ne*ye-_e*ce,Pe[1]=_e*oe-P*ye,Pe[2]=P*ce-ne*oe,Pe}function Ae(Pe,ze,ht,P){var ne=ze[0],_e=ze[1],oe=ze[2];return Pe[0]=ne+P*(ht[0]-ne),Pe[1]=_e+P*(ht[1]-_e),Pe[2]=oe+P*(ht[2]-oe),Pe}function be(Pe,ze,ht,P,ne,_e){var oe=_e*_e,ce=oe*(2*_e-3)+1,ye=oe*(_e-2)+_e,Y=oe*(_e-1),Ne=oe*(3-2*_e);return Pe[0]=ze[0]*ce+ht[0]*ye+P[0]*Y+ne[0]*Ne,Pe[1]=ze[1]*ce+ht[1]*ye+P[1]*Y+ne[1]*Ne,Pe[2]=ze[2]*ce+ht[2]*ye+P[2]*Y+ne[2]*Ne,Pe}function G(Pe,ze,ht,P,ne,_e){var oe=1-_e,ce=oe*oe,ye=_e*_e,Y=ce*oe,Ne=3*_e*ce,Qe=3*ye*oe,mt=ye*_e;return Pe[0]=ze[0]*Y+ht[0]*Ne+P[0]*Qe+ne[0]*mt,Pe[1]=ze[1]*Y+ht[1]*Ne+P[1]*Qe+ne[1]*mt,Pe[2]=ze[2]*Y+ht[2]*Ne+P[2]*Qe+ne[2]*mt,Pe}function ie(Pe,ze){ze=ze||1;var ht=E.FD()*2*Math.PI,P=E.FD()*2-1,ne=Math.sqrt(1-P*P)*ze;return Pe[0]=Math.cos(ht)*ne,Pe[1]=Math.sin(ht)*ne,Pe[2]=P*ze,Pe}function V(Pe,ze,ht){var P=ze[0],ne=ze[1],_e=ze[2],oe=ht[3]*P+ht[7]*ne+ht[11]*_e+ht[15];return oe=oe||1,Pe[0]=(ht[0]*P+ht[4]*ne+ht[8]*_e+ht[12])/oe,Pe[1]=(ht[1]*P+ht[5]*ne+ht[9]*_e+ht[13])/oe,Pe[2]=(ht[2]*P+ht[6]*ne+ht[10]*_e+ht[14])/oe,Pe}function ae(Pe,ze,ht){var P=ze[0],ne=ze[1],_e=ze[2];return Pe[0]=P*ht[0]+ne*ht[3]+_e*ht[6],Pe[1]=P*ht[1]+ne*ht[4]+_e*ht[7],Pe[2]=P*ht[2]+ne*ht[5]+_e*ht[8],Pe}function K(Pe,ze,ht){var P=ht[0],ne=ht[1],_e=ht[2],oe=ht[3],ce=ze[0],ye=ze[1],Y=ze[2],Ne=ne*Y-_e*ye,Qe=_e*ce-P*Y,mt=P*ye-ne*ce,Ve=ne*mt-_e*Qe,rt=_e*Ne-P*mt,yt=P*Qe-ne*Ne,Tt=oe*2;return Ne*=Tt,Qe*=Tt,mt*=Tt,Ve*=2,rt*=2,yt*=2,Pe[0]=ce+Ne+Ve,Pe[1]=ye+Qe+rt,Pe[2]=Y+mt+yt,Pe}function he(Pe,ze,ht,P){var ne=[],_e=[];return ne[0]=ze[0]-ht[0],ne[1]=ze[1]-ht[1],ne[2]=ze[2]-ht[2],_e[0]=ne[0],_e[1]=ne[1]*Math.cos(P)-ne[2]*Math.sin(P),_e[2]=ne[1]*Math.sin(P)+ne[2]*Math.cos(P),Pe[0]=_e[0]+ht[0],Pe[1]=_e[1]+ht[1],Pe[2]=_e[2]+ht[2],Pe}function Se(Pe,ze,ht,P){var ne=[],_e=[];return ne[0]=ze[0]-ht[0],ne[1]=ze[1]-ht[1],ne[2]=ze[2]-ht[2],_e[0]=ne[2]*Math.sin(P)+ne[0]*Math.cos(P),_e[1]=ne[1],_e[2]=ne[2]*Math.cos(P)-ne[0]*Math.sin(P),Pe[0]=_e[0]+ht[0],Pe[1]=_e[1]+ht[1],Pe[2]=_e[2]+ht[2],Pe}function Fe(Pe,ze,ht,P){var ne=[],_e=[];return ne[0]=ze[0]-ht[0],ne[1]=ze[1]-ht[1],ne[2]=ze[2]-ht[2],_e[0]=ne[0]*Math.cos(P)-ne[1]*Math.sin(P),_e[1]=ne[0]*Math.sin(P)+ne[1]*Math.cos(P),_e[2]=ne[2],Pe[0]=_e[0]+ht[0],Pe[1]=_e[1]+ht[1],Pe[2]=_e[2]+ht[2],Pe}function nt(Pe,ze){var ht=Pe[0],P=Pe[1],ne=Pe[2],_e=ze[0],oe=ze[1],ce=ze[2],ye=Math.sqrt(ht*ht+P*P+ne*ne),Y=Math.sqrt(_e*_e+oe*oe+ce*ce),Ne=ye*Y,Qe=Ne&&ve(Pe,ze)/Ne;return Math.acos(Math.min(Math.max(Qe,-1),1))}function lt(Pe){return Pe[0]=0,Pe[1]=0,Pe[2]=0,Pe}function Gt(Pe){return"vec3("+Pe[0]+", "+Pe[1]+", "+Pe[2]+")"}function pn(Pe,ze){return Pe[0]===ze[0]&&Pe[1]===ze[1]&&Pe[2]===ze[2]}function $n(Pe,ze){var ht=Pe[0],P=Pe[1],ne=Pe[2],_e=ze[0],oe=ze[1],ce=ze[2];return Math.abs(ht-_e)<=E.Ib*Math.max(1,Math.abs(ht),Math.abs(_e))&&Math.abs(P-oe)<=E.Ib*Math.max(1,Math.abs(P),Math.abs(oe))&&Math.abs(ne-ce)<=E.Ib*Math.max(1,Math.abs(ne),Math.abs(ce))}var Ln=t,st=e,xt=o,tn=L,Un=W,We=d,Yt=k,Ze=function(){var Pe=p();return function(ze,ht,P,ne,_e,oe){var ce,ye;for(ht||(ht=3),P||(P=0),ne?ye=Math.min(ne*ht+P,ze.length):ye=ze.length,ce=P;ce<ye;ce+=ht)Pe[0]=ze[ce],Pe[1]=ze[ce+1],Pe[2]=ze[ce+2],_e(Pe,Pe,oe),ze[ce]=Pe[0],ze[ce+1]=Pe[1],ze[ce+2]=Pe[2];return ze}}()},98333:function(Ie,S,y){"use strict";y.d(S,{Ue:function(){return p},al:function(){return d},bA:function(){return D},fF:function(){return G}});var E=y(49685);function p(){var st=new E.WT(4);return E.WT!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0),st}function M(st){var xt=new glMatrix.ARRAY_TYPE(4);return xt[0]=st[0],xt[1]=st[1],xt[2]=st[2],xt[3]=st[3],xt}function d(st,xt,tn,Un){var We=new E.WT(4);return We[0]=st,We[1]=xt,We[2]=tn,We[3]=Un,We}function g(st,xt){return st[0]=xt[0],st[1]=xt[1],st[2]=xt[2],st[3]=xt[3],st}function x(st,xt,tn,Un,We){return st[0]=xt,st[1]=tn,st[2]=Un,st[3]=We,st}function v(st,xt,tn){return st[0]=xt[0]+tn[0],st[1]=xt[1]+tn[1],st[2]=xt[2]+tn[2],st[3]=xt[3]+tn[3],st}function u(st,xt,tn){return st[0]=xt[0]-tn[0],st[1]=xt[1]-tn[1],st[2]=xt[2]-tn[2],st[3]=xt[3]-tn[3],st}function t(st,xt,tn){return st[0]=xt[0]*tn[0],st[1]=xt[1]*tn[1],st[2]=xt[2]*tn[2],st[3]=xt[3]*tn[3],st}function e(st,xt,tn){return st[0]=xt[0]/tn[0],st[1]=xt[1]/tn[1],st[2]=xt[2]/tn[2],st[3]=xt[3]/tn[3],st}function o(st,xt){return st[0]=Math.ceil(xt[0]),st[1]=Math.ceil(xt[1]),st[2]=Math.ceil(xt[2]),st[3]=Math.ceil(xt[3]),st}function c(st,xt){return st[0]=Math.floor(xt[0]),st[1]=Math.floor(xt[1]),st[2]=Math.floor(xt[2]),st[3]=Math.floor(xt[3]),st}function b(st,xt,tn){return st[0]=Math.min(xt[0],tn[0]),st[1]=Math.min(xt[1],tn[1]),st[2]=Math.min(xt[2],tn[2]),st[3]=Math.min(xt[3],tn[3]),st}function A(st,xt,tn){return st[0]=Math.max(xt[0],tn[0]),st[1]=Math.max(xt[1],tn[1]),st[2]=Math.max(xt[2],tn[2]),st[3]=Math.max(xt[3],tn[3]),st}function w(st,xt){return st[0]=Math.round(xt[0]),st[1]=Math.round(xt[1]),st[2]=Math.round(xt[2]),st[3]=Math.round(xt[3]),st}function D(st,xt,tn){return st[0]=xt[0]*tn,st[1]=xt[1]*tn,st[2]=xt[2]*tn,st[3]=xt[3]*tn,st}function F(st,xt,tn,Un){return st[0]=xt[0]+tn[0]*Un,st[1]=xt[1]+tn[1]*Un,st[2]=xt[2]+tn[2]*Un,st[3]=xt[3]+tn[3]*Un,st}function Z(st,xt){var tn=xt[0]-st[0],Un=xt[1]-st[1],We=xt[2]-st[2],Yt=xt[3]-st[3];return Math.hypot(tn,Un,We,Yt)}function L(st,xt){var tn=xt[0]-st[0],Un=xt[1]-st[1],We=xt[2]-st[2],Yt=xt[3]-st[3];return tn*tn+Un*Un+We*We+Yt*Yt}function W(st){var xt=st[0],tn=st[1],Un=st[2],We=st[3];return Math.hypot(xt,tn,Un,We)}function k(st){var xt=st[0],tn=st[1],Un=st[2],We=st[3];return xt*xt+tn*tn+Un*Un+We*We}function de(st,xt){return st[0]=-xt[0],st[1]=-xt[1],st[2]=-xt[2],st[3]=-xt[3],st}function H(st,xt){return st[0]=1/xt[0],st[1]=1/xt[1],st[2]=1/xt[2],st[3]=1/xt[3],st}function ue(st,xt){var tn=xt[0],Un=xt[1],We=xt[2],Yt=xt[3],Ze=tn*tn+Un*Un+We*We+Yt*Yt;return Ze>0&&(Ze=1/Math.sqrt(Ze)),st[0]=tn*Ze,st[1]=Un*Ze,st[2]=We*Ze,st[3]=Yt*Ze,st}function ve(st,xt){return st[0]*xt[0]+st[1]*xt[1]+st[2]*xt[2]+st[3]*xt[3]}function ke(st,xt,tn,Un){var We=tn[0]*Un[1]-tn[1]*Un[0],Yt=tn[0]*Un[2]-tn[2]*Un[0],Ze=tn[0]*Un[3]-tn[3]*Un[0],Pe=tn[1]*Un[2]-tn[2]*Un[1],ze=tn[1]*Un[3]-tn[3]*Un[1],ht=tn[2]*Un[3]-tn[3]*Un[2],P=xt[0],ne=xt[1],_e=xt[2],oe=xt[3];return st[0]=ne*ht-_e*ze+oe*Pe,st[1]=-(P*ht)+_e*Ze-oe*Yt,st[2]=P*ze-ne*Ze+oe*We,st[3]=-(P*Pe)+ne*Yt-_e*We,st}function Ae(st,xt,tn,Un){var We=xt[0],Yt=xt[1],Ze=xt[2],Pe=xt[3];return st[0]=We+Un*(tn[0]-We),st[1]=Yt+Un*(tn[1]-Yt),st[2]=Ze+Un*(tn[2]-Ze),st[3]=Pe+Un*(tn[3]-Pe),st}function be(st,xt){xt=xt||1;var tn,Un,We,Yt,Ze,Pe;do tn=glMatrix.RANDOM()*2-1,Un=glMatrix.RANDOM()*2-1,Ze=tn*tn+Un*Un;while(Ze>=1);do We=glMatrix.RANDOM()*2-1,Yt=glMatrix.RANDOM()*2-1,Pe=We*We+Yt*Yt;while(Pe>=1);var ze=Math.sqrt((1-Ze)/Pe);return st[0]=xt*tn,st[1]=xt*Un,st[2]=xt*We*ze,st[3]=xt*Yt*ze,st}function G(st,xt,tn){var Un=xt[0],We=xt[1],Yt=xt[2],Ze=xt[3];return st[0]=tn[0]*Un+tn[4]*We+tn[8]*Yt+tn[12]*Ze,st[1]=tn[1]*Un+tn[5]*We+tn[9]*Yt+tn[13]*Ze,st[2]=tn[2]*Un+tn[6]*We+tn[10]*Yt+tn[14]*Ze,st[3]=tn[3]*Un+tn[7]*We+tn[11]*Yt+tn[15]*Ze,st}function ie(st,xt,tn){var Un=xt[0],We=xt[1],Yt=xt[2],Ze=tn[0],Pe=tn[1],ze=tn[2],ht=tn[3],P=ht*Un+Pe*Yt-ze*We,ne=ht*We+ze*Un-Ze*Yt,_e=ht*Yt+Ze*We-Pe*Un,oe=-Ze*Un-Pe*We-ze*Yt;return st[0]=P*ht+oe*-Ze+ne*-ze-_e*-Pe,st[1]=ne*ht+oe*-Pe+_e*-Ze-P*-ze,st[2]=_e*ht+oe*-ze+P*-Pe-ne*-Ze,st[3]=xt[3],st}function V(st){return st[0]=0,st[1]=0,st[2]=0,st[3]=0,st}function ae(st){return"vec4("+st[0]+", "+st[1]+", "+st[2]+", "+st[3]+")"}function K(st,xt){return st[0]===xt[0]&&st[1]===xt[1]&&st[2]===xt[2]&&st[3]===xt[3]}function he(st,xt){var tn=st[0],Un=st[1],We=st[2],Yt=st[3],Ze=xt[0],Pe=xt[1],ze=xt[2],ht=xt[3];return Math.abs(tn-Ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(tn),Math.abs(Ze))&&Math.abs(Un-Pe)<=glMatrix.EPSILON*Math.max(1,Math.abs(Un),Math.abs(Pe))&&Math.abs(We-ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(We),Math.abs(ze))&&Math.abs(Yt-ht)<=glMatrix.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(ht))}var Se=null,Fe=null,nt=null,lt=null,Gt=null,pn=null,$n=null,Ln=function(){var st=p();return function(xt,tn,Un,We,Yt,Ze){var Pe,ze;for(tn||(tn=4),Un||(Un=0),We?ze=Math.min(We*tn+Un,xt.length):ze=xt.length,Pe=Un;Pe<ze;Pe+=tn)st[0]=xt[Pe],st[1]=xt[Pe+1],st[2]=xt[Pe+2],st[3]=xt[Pe+3],Yt(st,st,Ze),xt[Pe]=st[0],xt[Pe+1]=st[1],xt[Pe+2]=st[2],xt[Pe+3]=st[3];return xt}}()},80645:function(Ie,S){S.read=function(y,E,p,M,d){var g,x,v=d*8-M-1,u=(1<<v)-1,t=u>>1,e=-7,o=p?d-1:0,c=p?-1:1,b=y[E+o];for(o+=c,g=b&(1<<-e)-1,b>>=-e,e+=v;e>0;g=g*256+y[E+o],o+=c,e-=8);for(x=g&(1<<-e)-1,g>>=-e,e+=M;e>0;x=x*256+y[E+o],o+=c,e-=8);if(g===0)g=1-t;else{if(g===u)return x?NaN:(b?-1:1)*(1/0);x=x+Math.pow(2,M),g=g-t}return(b?-1:1)*x*Math.pow(2,g-M)},S.write=function(y,E,p,M,d,g){var x,v,u,t=g*8-d-1,e=(1<<t)-1,o=e>>1,c=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=M?0:g-1,A=M?1:-1,w=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(v=isNaN(E)?1:0,x=e):(x=Math.floor(Math.log(E)/Math.LN2),E*(u=Math.pow(2,-x))<1&&(x--,u*=2),x+o>=1?E+=c/u:E+=c*Math.pow(2,1-o),E*u>=2&&(x++,u/=2),x+o>=e?(v=0,x=e):x+o>=1?(v=(E*u-1)*Math.pow(2,d),x=x+o):(v=E*Math.pow(2,o-1)*Math.pow(2,d),x=0));d>=8;y[p+b]=v&255,b+=A,v/=256,d-=8);for(x=x<<d|v,t+=d;t>0;y[p+b]=x&255,b+=A,x/=256,t-=8);y[p+b-A]|=w*128}},7375:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var y=Symbol.for("INJECTION");function E(x,v,u,t){function e(){return t&&!Reflect.hasMetadata(y,this,v)&&Reflect.defineMetadata(y,u(),this,v),Reflect.hasMetadata(y,this,v)?Reflect.getMetadata(y,this,v):u()}function o(c){Reflect.defineMetadata(y,c,this,v)}Object.defineProperty(x,v,{configurable:!0,enumerable:!0,get:e,set:o})}function p(x,v){return function(u){return function(t,e){var o=function(){return x.get(u)};E(t,e,o,v)}}}S.makePropertyInjectDecorator=p;function M(x,v){return function(u,t){return function(e,o){var c=function(){return x.getNamed(u,t)};E(e,o,c,v)}}}S.makePropertyInjectNamedDecorator=M;function d(x,v){return function(u,t,e){return function(o,c){var b=function(){return x.getTagged(u,t,e)};E(o,c,b,v)}}}S.makePropertyInjectTaggedDecorator=d;function g(x,v){return function(u){return function(t,e){var o=function(){return x.getAll(u)};E(t,e,o,v)}}}S.makePropertyMultiInjectDecorator=g},84879:function(Ie,S,y){"use strict";var E;E={value:!0};var p=y(7375);function M(d,g){g===void 0&&(g=!0);var x=p.makePropertyInjectDecorator(d,g),v=p.makePropertyInjectNamedDecorator(d,g),u=p.makePropertyInjectTaggedDecorator(d,g),t=p.makePropertyMultiInjectDecorator(d,g);return{lazyInject:x,lazyInjectNamed:v,lazyInjectTagged:u,lazyMultiInject:t}}S.Z=M},99934:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tagProperty=S.tagParameter=S.decorate=void 0;var E=y(16674),p=y(6867);function M(t,e,o,c){var b=p.TAGGED;g(b,t,e,c,o)}S.tagParameter=M;function d(t,e,o){var c=p.TAGGED_PROP;g(c,t.constructor,e,o)}S.tagProperty=d;function g(t,e,o,c,b){var A={},w=typeof b=="number",D=b!==void 0&&w?b.toString():o;if(w&&o!==void 0)throw new Error(E.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(A=Reflect.getMetadata(t,e));var F=A[D];if(!Array.isArray(F))F=[];else for(var Z=0,L=F;Z<L.length;Z++){var W=L[Z];if(W.key===c.key)throw new Error(E.DUPLICATED_METADATA+" "+W.key.toString())}F.push(c),A[D]=F,Reflect.defineMetadata(t,A,e)}function x(t,e){Reflect.decorate(t,e)}function v(t,e){return function(o,c){e(o,c,t)}}function u(t,e,o){typeof o=="number"?x([v(o,t)],e):typeof o=="string"?Reflect.decorate([t],e,o):x([t],e)}S.decorate=u},5744:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.inject=S.LazyServiceIdentifer=void 0;var E=y(16674),p=y(6867),M=y(47738),d=y(99934),g=function(){function v(u){this._cb=u}return v.prototype.unwrap=function(){return this._cb()},v}();S.LazyServiceIdentifer=g;function x(v){return function(u,t,e){if(v===void 0)throw new Error(E.UNDEFINED_INJECT_ANNOTATION(u.name));var o=new M.Metadata(p.INJECT_TAG,v);typeof e=="number"?d.tagParameter(u,t,e,o):d.tagProperty(u,t,o)}}S.inject=x},64315:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.injectable=void 0;var E=y(16674),p=y(6867);function M(){return function(d){if(Reflect.hasOwnMetadata(p.PARAM_TYPES,d))throw new Error(E.DUPLICATED_INJECTABLE_DECORATOR);var g=Reflect.getMetadata(p.DESIGN_PARAM_TYPES,d)||[];return Reflect.defineMetadata(p.PARAM_TYPES,g,d),d}}S.injectable=M},71693:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.multiInject=void 0;var E=y(6867),p=y(47738),M=y(99934);function d(g){return function(x,v,u){var t=new p.Metadata(E.MULTI_INJECT_TAG,g);typeof u=="number"?M.tagParameter(x,v,u,t):M.tagProperty(x,v,t)}}S.multiInject=d},38085:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.named=void 0;var E=y(6867),p=y(47738),M=y(99934);function d(g){return function(x,v,u){var t=new p.Metadata(E.NAMED_TAG,g);typeof u=="number"?M.tagParameter(x,v,u,t):M.tagProperty(x,v,t)}}S.named=d},6515:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.optional=void 0;var E=y(6867),p=y(47738),M=y(99934);function d(){return function(g,x,v){var u=new p.Metadata(E.OPTIONAL_TAG,!0);typeof v=="number"?M.tagParameter(g,x,v,u):M.tagProperty(g,x,u)}}S.optional=d},7014:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.postConstruct=void 0;var E=y(16674),p=y(6867),M=y(47738);function d(){return function(g,x,v){var u=new M.Metadata(p.POST_CONSTRUCT,x);if(Reflect.hasOwnMetadata(p.POST_CONSTRUCT,g.constructor))throw new Error(E.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(p.POST_CONSTRUCT,u,g.constructor)}}S.postConstruct=d},32052:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tagged=void 0;var E=y(47738),p=y(99934);function M(d,g){return function(x,v,u){var t=new E.Metadata(d,g);typeof u=="number"?p.tagParameter(x,v,u,t):p.tagProperty(x,v,t)}}S.tagged=M},55638:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.targetName=void 0;var E=y(6867),p=y(47738),M=y(99934);function d(g){return function(x,v,u){var t=new p.Metadata(E.NAME_TAG,g);M.tagParameter(x,v,u,t)}}S.targetName=d},86757:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.unmanaged=void 0;var E=y(6867),p=y(47738),M=y(99934);function d(){return function(g,x,v){var u=new p.Metadata(E.UNMANAGED_TAG,!0);M.tagParameter(g,x,v,u)}}S.unmanaged=d},44290:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Binding=void 0;var E=y(28421),p=y(37791),M=function(){function d(g,x){this.id=p.id(),this.activated=!1,this.serviceIdentifier=g,this.scope=x,this.type=E.BindingTypeEnum.Invalid,this.constraint=function(v){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return d.prototype.clone=function(){var g=new d(this.serviceIdentifier,this.scope);return g.activated=g.scope===E.BindingScopeEnum.Singleton?this.activated:!1,g.implementationType=this.implementationType,g.dynamicValue=this.dynamicValue,g.scope=this.scope,g.type=this.type,g.factory=this.factory,g.provider=this.provider,g.constraint=this.constraint,g.onActivation=this.onActivation,g.cache=this.cache,g},d}();S.Binding=M},23184:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingCount=void 0;var y={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};S.BindingCount=y},16674:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.STACK_OVERFLOW=S.CIRCULAR_DEPENDENCY_IN_FACTORY=S.POST_CONSTRUCT_ERROR=S.MULTIPLE_POST_CONSTRUCT_METHODS=S.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=S.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=S.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=S.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=S.ARGUMENTS_LENGTH_MISMATCH=S.INVALID_DECORATOR_OPERATION=S.INVALID_TO_SELF_VALUE=S.INVALID_FUNCTION_BINDING=S.INVALID_MIDDLEWARE_RETURN=S.NO_MORE_SNAPSHOTS_AVAILABLE=S.INVALID_BINDING_TYPE=S.NOT_IMPLEMENTED=S.CIRCULAR_DEPENDENCY=S.UNDEFINED_INJECT_ANNOTATION=S.MISSING_INJECT_ANNOTATION=S.MISSING_INJECTABLE_ANNOTATION=S.NOT_REGISTERED=S.CANNOT_UNBIND=S.AMBIGUOUS_MATCH=S.KEY_NOT_FOUND=S.NULL_ARGUMENT=S.DUPLICATED_METADATA=S.DUPLICATED_INJECTABLE_DECORATOR=void 0,S.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",S.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",S.NULL_ARGUMENT="NULL argument",S.KEY_NOT_FOUND="Key Not Found",S.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",S.CANNOT_UNBIND="Could not unbind serviceIdentifier:",S.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",S.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",S.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var y=function(d){return"@inject called with undefined this could mean that the class "+d+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};S.UNDEFINED_INJECT_ANNOTATION=y,S.CIRCULAR_DEPENDENCY="Circular dependency found:",S.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",S.INVALID_BINDING_TYPE="Invalid binding type:",S.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",S.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",S.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",S.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",S.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var E=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return"The number of constructor arguments in the derived class "+(d[0]+" must be >= than the number of constructor arguments of its base class.")};S.ARGUMENTS_LENGTH_MISMATCH=E,S.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",S.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",S.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",S.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",S.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var p=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return"@postConstruct error in class "+d[0]+": "+d[1]};S.POST_CONSTRUCT_ERROR=p;var M=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return"It looks like there is a circular dependency "+("in one of the '"+d[0]+"' bindings. Please investigate bindings with")+("service identifier '"+d[1]+"'.")};S.CIRCULAR_DEPENDENCY_IN_FACTORY=M,S.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TargetTypeEnum=S.BindingTypeEnum=S.BindingScopeEnum=void 0;var y={Request:"Request",Singleton:"Singleton",Transient:"Transient"};S.BindingScopeEnum=y;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};S.BindingTypeEnum=E;var p={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};S.TargetTypeEnum=p},6867:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.NON_CUSTOM_TAG_KEYS=S.POST_CONSTRUCT=S.DESIGN_PARAM_TYPES=S.PARAM_TYPES=S.TAGGED_PROP=S.TAGGED=S.MULTI_INJECT_TAG=S.INJECT_TAG=S.OPTIONAL_TAG=S.UNMANAGED_TAG=S.NAME_TAG=S.NAMED_TAG=void 0,S.NAMED_TAG="named",S.NAME_TAG="name",S.UNMANAGED_TAG="unmanaged",S.OPTIONAL_TAG="optional",S.INJECT_TAG="inject",S.MULTI_INJECT_TAG="multi_inject",S.TAGGED="inversify:tagged",S.TAGGED_PROP="inversify:tagged_props",S.PARAM_TYPES="inversify:paramtypes",S.DESIGN_PARAM_TYPES="design:paramtypes",S.POST_CONSTRUCT="post_construct";function y(){return[S.INJECT_TAG,S.MULTI_INJECT_TAG,S.NAME_TAG,S.UNMANAGED_TAG,S.NAMED_TAG,S.OPTIONAL_TAG]}S.NON_CUSTOM_TAG_KEYS=y()},51389:function(Ie,S,y){"use strict";var E=this&&this.__awaiter||function(F,Z,L,W){function k(de){return de instanceof L?de:new L(function(H){H(de)})}return new(L||(L=Promise))(function(de,H){function ue(Ae){try{ke(W.next(Ae))}catch(be){H(be)}}function ve(Ae){try{ke(W.throw(Ae))}catch(be){H(be)}}function ke(Ae){Ae.done?de(Ae.value):k(Ae.value).then(ue,ve)}ke((W=W.apply(F,Z||[])).next())})},p=this&&this.__generator||function(F,Z){var L={label:0,sent:function(){if(de[0]&1)throw de[1];return de[1]},trys:[],ops:[]},W,k,de,H;return H={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function ue(ke){return function(Ae){return ve([ke,Ae])}}function ve(ke){if(W)throw new TypeError("Generator is already executing.");for(;L;)try{if(W=1,k&&(de=ke[0]&2?k.return:ke[0]?k.throw||((de=k.return)&&de.call(k),0):k.next)&&!(de=de.call(k,ke[1])).done)return de;switch(k=0,de&&(ke=[ke[0]&2,de.value]),ke[0]){case 0:case 1:de=ke;break;case 4:return L.label++,{value:ke[1],done:!1};case 5:L.label++,k=ke[1],ke=[0];continue;case 7:ke=L.ops.pop(),L.trys.pop();continue;default:if(de=L.trys,!(de=de.length>0&&de[de.length-1])&&(ke[0]===6||ke[0]===2)){L=0;continue}if(ke[0]===3&&(!de||ke[1]>de[0]&&ke[1]<de[3])){L.label=ke[1];break}if(ke[0]===6&&L.label<de[1]){L.label=de[1],de=ke;break}if(de&&L.label<de[2]){L.label=de[2],L.ops.push(ke);break}de[2]&&L.ops.pop(),L.trys.pop();continue}ke=Z.call(F,L)}catch(Ae){ke=[6,Ae],k=0}finally{W=de=0}if(ke[0]&5)throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}},M=this&&this.__spreadArray||function(F,Z){for(var L=0,W=Z.length,k=F.length;L<W;L++,k++)F[k]=Z[L];return F};Object.defineProperty(S,"__esModule",{value:!0}),S.Container=void 0;var d=y(44290),g=y(16674),x=y(28421),v=y(6867),u=y(51377),t=y(86311),e=y(31927),o=y(51860),c=y(37791),b=y(55800),A=y(85700),w=y(80175),D=function(){function F(Z){this._appliedMiddleware=[];var L=Z||{};if(typeof L!="object")throw new Error(""+g.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(L.defaultScope===void 0)L.defaultScope=x.BindingScopeEnum.Transient;else if(L.defaultScope!==x.BindingScopeEnum.Singleton&&L.defaultScope!==x.BindingScopeEnum.Transient&&L.defaultScope!==x.BindingScopeEnum.Request)throw new Error(""+g.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(L.autoBindInjectable===void 0)L.autoBindInjectable=!1;else if(typeof L.autoBindInjectable!="boolean")throw new Error(""+g.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(L.skipBaseClassChecks===void 0)L.skipBaseClassChecks=!1;else if(typeof L.skipBaseClassChecks!="boolean")throw new Error(""+g.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:L.autoBindInjectable,defaultScope:L.defaultScope,skipBaseClassChecks:L.skipBaseClassChecks},this.id=c.id(),this._bindingDictionary=new w.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return F.merge=function(Z,L){for(var W=[],k=2;k<arguments.length;k++)W[k-2]=arguments[k];var de=new F,H=M([Z,L],W).map(function(ke){return t.getBindingDictionary(ke)}),ue=t.getBindingDictionary(de);function ve(ke,Ae){ke.traverse(function(be,G){G.forEach(function(ie){Ae.add(ie.serviceIdentifier,ie.clone())})})}return H.forEach(function(ke){ve(ke,ue)}),de},F.prototype.load=function(){for(var Z=[],L=0;L<arguments.length;L++)Z[L]=arguments[L];for(var W=this._getContainerModuleHelpersFactory(),k=0,de=Z;k<de.length;k++){var H=de[k],ue=W(H.id);H.registry(ue.bindFunction,ue.unbindFunction,ue.isboundFunction,ue.rebindFunction)}},F.prototype.loadAsync=function(){for(var Z=[],L=0;L<arguments.length;L++)Z[L]=arguments[L];return E(this,void 0,void 0,function(){var W,k,de,H,ue;return p(this,function(ve){switch(ve.label){case 0:W=this._getContainerModuleHelpersFactory(),k=0,de=Z,ve.label=1;case 1:return k<de.length?(H=de[k],ue=W(H.id),[4,H.registry(ue.bindFunction,ue.unbindFunction,ue.isboundFunction,ue.rebindFunction)]):[3,4];case 2:ve.sent(),ve.label=3;case 3:return k++,[3,1];case 4:return[2]}})})},F.prototype.unload=function(){for(var Z=this,L=[],W=0;W<arguments.length;W++)L[W]=arguments[W];var k=function(de){return function(H){return H.moduleId===de}};L.forEach(function(de){var H=k(de.id);Z._bindingDictionary.removeByCondition(H)})},F.prototype.bind=function(Z){var L=this.options.defaultScope||x.BindingScopeEnum.Transient,W=new d.Binding(Z,L);return this._bindingDictionary.add(Z,W),new o.BindingToSyntax(W)},F.prototype.rebind=function(Z){return this.unbind(Z),this.bind(Z)},F.prototype.unbind=function(Z){try{this._bindingDictionary.remove(Z)}catch(L){throw new Error(g.CANNOT_UNBIND+" "+b.getServiceIdentifierAsString(Z))}},F.prototype.unbindAll=function(){this._bindingDictionary=new w.Lookup},F.prototype.isBound=function(Z){var L=this._bindingDictionary.hasKey(Z);return!L&&this.parent&&(L=this.parent.isBound(Z)),L},F.prototype.isBoundNamed=function(Z,L){return this.isBoundTagged(Z,v.NAMED_TAG,L)},F.prototype.isBoundTagged=function(Z,L,W){var k=!1;if(this._bindingDictionary.hasKey(Z)){var de=this._bindingDictionary.get(Z),H=t.createMockRequest(this,Z,L,W);k=de.some(function(ue){return ue.constraint(H)})}return!k&&this.parent&&(k=this.parent.isBoundTagged(Z,L,W)),k},F.prototype.snapshot=function(){this._snapshots.push(A.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},F.prototype.restore=function(){var Z=this._snapshots.pop();if(Z===void 0)throw new Error(g.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=Z.bindings,this._middleware=Z.middleware},F.prototype.createChild=function(Z){var L=new F(Z||this.options);return L.parent=this,L},F.prototype.applyMiddleware=function(){for(var Z=[],L=0;L<arguments.length;L++)Z[L]=arguments[L];this._appliedMiddleware=this._appliedMiddleware.concat(Z);var W=this._middleware?this._middleware:this._planAndResolve();this._middleware=Z.reduce(function(k,de){return de(k)},W)},F.prototype.applyCustomMetadataReader=function(Z){this._metadataReader=Z},F.prototype.get=function(Z){return this._get(!1,!1,x.TargetTypeEnum.Variable,Z)},F.prototype.getTagged=function(Z,L,W){return this._get(!1,!1,x.TargetTypeEnum.Variable,Z,L,W)},F.prototype.getNamed=function(Z,L){return this.getTagged(Z,v.NAMED_TAG,L)},F.prototype.getAll=function(Z){return this._get(!0,!0,x.TargetTypeEnum.Variable,Z)},F.prototype.getAllTagged=function(Z,L,W){return this._get(!1,!0,x.TargetTypeEnum.Variable,Z,L,W)},F.prototype.getAllNamed=function(Z,L){return this.getAllTagged(Z,v.NAMED_TAG,L)},F.prototype.resolve=function(Z){var L=this.createChild();return L.bind(Z).toSelf(),this._appliedMiddleware.forEach(function(W){L.applyMiddleware(W)}),L.get(Z)},F.prototype._getContainerModuleHelpersFactory=function(){var Z=this,L=function(ue,ve){ue._binding.moduleId=ve},W=function(ue){return function(ve){var ke=Z.bind.bind(Z),Ae=ke(ve);return L(Ae,ue),Ae}},k=function(ue){return function(ve){var ke=Z.unbind.bind(Z);ke(ve)}},de=function(ue){return function(ve){var ke=Z.isBound.bind(Z);return ke(ve)}},H=function(ue){return function(ve){var ke=Z.rebind.bind(Z),Ae=ke(ve);return L(Ae,ue),Ae}};return function(ue){return{bindFunction:W(ue),isboundFunction:de(ue),rebindFunction:H(ue),unbindFunction:k(ue)}}},F.prototype._get=function(Z,L,W,k,de,H){var ue=null,ve={avoidConstraints:Z,contextInterceptor:function(ke){return ke},isMultiInject:L,key:de,serviceIdentifier:k,targetType:W,value:H};if(this._middleware){if(ue=this._middleware(ve),ue==null)throw new Error(g.INVALID_MIDDLEWARE_RETURN)}else ue=this._planAndResolve()(ve);return ue},F.prototype._planAndResolve=function(){var Z=this;return function(L){var W=t.plan(Z._metadataReader,Z,L.isMultiInject,L.targetType,L.serviceIdentifier,L.key,L.value,L.avoidConstraints);W=L.contextInterceptor(W);var k=e.resolve(W);return k}},F}();S.Container=D},33244:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AsyncContainerModule=S.ContainerModule=void 0;var E=y(37791),p=function(){function d(g){this.id=E.id(),this.registry=g}return d}();S.ContainerModule=p;var M=function(){function d(g){this.id=E.id(),this.registry=g}return d}();S.AsyncContainerModule=M},85700:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ContainerSnapshot=void 0;var y=function(){function E(){}return E.of=function(p,M){var d=new E;return d.bindings=p,d.middleware=M,d},E}();S.ContainerSnapshot=y},80175:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Lookup=void 0;var E=y(16674),p=function(){function M(){this._map=new Map}return M.prototype.getMap=function(){return this._map},M.prototype.add=function(d,g){if(d==null)throw new Error(E.NULL_ARGUMENT);if(g==null)throw new Error(E.NULL_ARGUMENT);var x=this._map.get(d);x!==void 0?(x.push(g),this._map.set(d,x)):this._map.set(d,[g])},M.prototype.get=function(d){if(d==null)throw new Error(E.NULL_ARGUMENT);var g=this._map.get(d);if(g!==void 0)return g;throw new Error(E.KEY_NOT_FOUND)},M.prototype.remove=function(d){if(d==null)throw new Error(E.NULL_ARGUMENT);if(!this._map.delete(d))throw new Error(E.KEY_NOT_FOUND)},M.prototype.removeByCondition=function(d){var g=this;this._map.forEach(function(x,v){var u=x.filter(function(t){return!d(t)});u.length>0?g._map.set(v,u):g._map.delete(v)})},M.prototype.hasKey=function(d){if(d==null)throw new Error(E.NULL_ARGUMENT);return this._map.has(d)},M.prototype.clone=function(){var d=new M;return this._map.forEach(function(g,x){g.forEach(function(v){return d.add(x,v.clone())})}),d},M.prototype.traverse=function(d){this._map.forEach(function(g,x){d(x,g)})},M}();S.Lookup=p},86700:function(Ie,S,y){"use strict";var E;E={value:!0},E=E=E=E=E=E=S.GW=E=E=S.zY=E=E=E=E=E=S.f3=E=E=S.b2=E=E=E=E=E=S.W2=E=void 0;var p=y(6867);E=p;var M=y(51389);Object.defineProperty(S,"W2",{enumerable:!0,get:function(){return M.Container}});var d=y(28421);E={enumerable:!0,get:function(){return d.BindingScopeEnum}},E={enumerable:!0,get:function(){return d.BindingTypeEnum}},E={enumerable:!0,get:function(){return d.TargetTypeEnum}};var g=y(33244);E={enumerable:!0,get:function(){return g.AsyncContainerModule}},E={enumerable:!0,get:function(){return g.ContainerModule}};var x=y(64315);Object.defineProperty(S,"b2",{enumerable:!0,get:function(){return x.injectable}});var v=y(32052);E={enumerable:!0,get:function(){return v.tagged}};var u=y(38085);E={enumerable:!0,get:function(){return u.named}};var t=y(5744);Object.defineProperty(S,"f3",{enumerable:!0,get:function(){return t.inject}}),E={enumerable:!0,get:function(){return t.LazyServiceIdentifer}};var e=y(6515);E={enumerable:!0,get:function(){return e.optional}};var o=y(86757);E={enumerable:!0,get:function(){return o.unmanaged}};var c=y(71693);E={enumerable:!0,get:function(){return c.multiInject}};var b=y(55638);E={enumerable:!0,get:function(){return b.targetName}};var A=y(7014);Object.defineProperty(S,"zY",{enumerable:!0,get:function(){return A.postConstruct}});var w=y(51377);E={enumerable:!0,get:function(){return w.MetadataReader}};var D=y(37791);E={enumerable:!0,get:function(){return D.id}};var F=y(99934);Object.defineProperty(S,"GW",{enumerable:!0,get:function(){return F.decorate}});var Z=y(80758);E={enumerable:!0,get:function(){return Z.traverseAncerstors}},E={enumerable:!0,get:function(){return Z.taggedConstraint}},E={enumerable:!0,get:function(){return Z.namedConstraint}},E={enumerable:!0,get:function(){return Z.typeConstraint}};var L=y(55800);E={enumerable:!0,get:function(){return L.getServiceIdentifierAsString}};var W=y(70600);E={enumerable:!0,get:function(){return W.multiBindToService}}},95228:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Context=void 0;var E=y(37791),p=function(){function M(d){this.id=E.id(),this.container=d}return M.prototype.addPlan=function(d){this.plan=d},M.prototype.setCurrentRequest=function(d){this.currentRequest=d},M}();S.Context=p},47738:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Metadata=void 0;var E=y(6867),p=function(){function M(d,g){this.key=d,this.value=g}return M.prototype.toString=function(){return this.key===E.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},M}();S.Metadata=p},51377:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MetadataReader=void 0;var E=y(6867),p=function(){function M(){}return M.prototype.getConstructorMetadata=function(d){var g=Reflect.getMetadata(E.PARAM_TYPES,d),x=Reflect.getMetadata(E.TAGGED,d);return{compilerGeneratedMetadata:g,userGeneratedMetadata:x||{}}},M.prototype.getPropertiesMetadata=function(d){var g=Reflect.getMetadata(E.TAGGED_PROP,d)||[];return g},M}();S.MetadataReader=p},55314:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Plan=void 0;var y=function(){function E(p,M){this.parentContext=p,this.rootRequest=M}return E}();S.Plan=y},86311:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getBindingDictionary=S.createMockRequest=S.plan=void 0;var E=y(23184),p=y(16674),M=y(28421),d=y(6867),g=y(85265),x=y(55800),v=y(95228),u=y(47738),t=y(55314),e=y(6e3),o=y(6748),c=y(18924);function b(k){return k._bindingDictionary}S.getBindingDictionary=b;function A(k,de,H,ue,ve,ke){var Ae=k?d.MULTI_INJECT_TAG:d.INJECT_TAG,be=new u.Metadata(Ae,H),G=new c.Target(de,ue,H,be);if(ve!==void 0){var ie=new u.Metadata(ve,ke);G.metadata.push(ie)}return G}function w(k,de,H,ue,ve){var ke=Z(H.container,ve.serviceIdentifier),Ae=[];return ke.length===E.BindingCount.NoBindingsAvailable&&H.container.options.autoBindInjectable&&typeof ve.serviceIdentifier=="function"&&k.getConstructorMetadata(ve.serviceIdentifier).compilerGeneratedMetadata&&(H.container.bind(ve.serviceIdentifier).toSelf(),ke=Z(H.container,ve.serviceIdentifier)),de?Ae=ke:Ae=ke.filter(function(be){var G=new o.Request(be.serviceIdentifier,H,ue,be,ve);return be.constraint(G)}),D(ve.serviceIdentifier,Ae,ve,H.container),Ae}function D(k,de,H,ue){switch(de.length){case E.BindingCount.NoBindingsAvailable:if(H.isOptional())return de;var ve=x.getServiceIdentifierAsString(k),ke=p.NOT_REGISTERED;throw ke+=x.listMetadataForTarget(ve,H),ke+=x.listRegisteredBindingsForServiceIdentifier(ue,ve,Z),new Error(ke);case E.BindingCount.OnlyOneBindingAvailable:if(!H.isArray())return de;case E.BindingCount.MultipleBindingsAvailable:default:if(H.isArray())return de;var ve=x.getServiceIdentifierAsString(k),ke=p.AMBIGUOUS_MATCH+" "+ve;throw ke+=x.listRegisteredBindingsForServiceIdentifier(ue,ve,Z),new Error(ke)}}function F(k,de,H,ue,ve,ke){var Ae,be;if(ve===null){Ae=w(k,de,ue,null,ke),be=new o.Request(H,ue,null,Ae,ke);var G=new t.Plan(ue,be);ue.addPlan(G)}else Ae=w(k,de,ue,ve,ke),be=ve.addChildRequest(ke.serviceIdentifier,Ae,ke);Ae.forEach(function(ie){var V=null;if(ke.isArray())V=be.addChildRequest(ie.serviceIdentifier,ie,ke);else{if(ie.cache)return;V=be}if(ie.type===M.BindingTypeEnum.Instance&&ie.implementationType!==null){var ae=e.getDependencies(k,ie.implementationType);if(!ue.container.options.skipBaseClassChecks){var K=e.getBaseClassDependencyCount(k,ie.implementationType);if(ae.length<K){var he=p.ARGUMENTS_LENGTH_MISMATCH(e.getFunctionName(ie.implementationType));throw new Error(he)}}ae.forEach(function(Se){F(k,!1,Se.serviceIdentifier,ue,V,Se)})}})}function Z(k,de){var H=[],ue=b(k);return ue.hasKey(de)?H=ue.get(de):k.parent!==null&&(H=Z(k.parent,de)),H}function L(k,de,H,ue,ve,ke,Ae,be){be===void 0&&(be=!1);var G=new v.Context(de),ie=A(H,ue,ve,"",ke,Ae);try{return F(k,be,ve,G,null,ie),G}catch(V){throw g.isStackOverflowExeption(V)&&G.plan&&x.circularDependencyToException(G.plan.rootRequest),V}}S.plan=L;function W(k,de,H,ue){var ve=new c.Target(M.TargetTypeEnum.Variable,"",de,new u.Metadata(H,ue)),ke=new v.Context(k),Ae=new o.Request(de,ke,null,[],ve);return Ae}S.createMockRequest=W},88460:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.QueryableString=void 0;var y=function(){function E(p){this.str=p}return E.prototype.startsWith=function(p){return this.str.indexOf(p)===0},E.prototype.endsWith=function(p){var M="",d=p.split("").reverse().join("");return M=this.str.split("").reverse().join(""),this.startsWith.call({str:M},d)},E.prototype.contains=function(p){return this.str.indexOf(p)!==-1},E.prototype.equals=function(p){return this.str===p},E.prototype.value=function(){return this.str},E}();S.QueryableString=y},6e3:function(Ie,S,y){"use strict";var E=this&&this.__spreadArray||function(w,D){for(var F=0,Z=D.length,L=w.length;F<Z;F++,L++)w[L]=D[F];return w};Object.defineProperty(S,"__esModule",{value:!0}),S.getFunctionName=S.getBaseClassDependencyCount=S.getDependencies=void 0;var p=y(5744),M=y(16674),d=y(28421),g=y(6867),x=y(55800);Object.defineProperty(S,"getFunctionName",{enumerable:!0,get:function(){return x.getFunctionName}});var v=y(18924);function u(w,D){var F=x.getFunctionName(D),Z=t(w,F,D,!1);return Z}S.getDependencies=u;function t(w,D,F,Z){var L=w.getConstructorMetadata(F),W=L.compilerGeneratedMetadata;if(W===void 0){var k=M.MISSING_INJECTABLE_ANNOTATION+" "+D+".";throw new Error(k)}var de=L.userGeneratedMetadata,H=Object.keys(de),ue=F.length===0&&H.length>0,ve=H.length>F.length,ke=ue||ve?H.length:F.length,Ae=o(Z,D,W,de,ke),be=c(w,F),G=E(E([],Ae),be);return G}function e(w,D,F,Z,L){var W=L[w.toString()]||[],k=A(W),de=k.unmanaged!==!0,H=Z[w],ue=k.inject||k.multiInject;if(H=ue||H,H instanceof p.LazyServiceIdentifer&&(H=H.unwrap()),de){var ve=H===Object,ke=H===Function,Ae=H===void 0,be=ve||ke||Ae;if(!D&&be){var G=M.MISSING_INJECT_ANNOTATION+" argument "+w+" in class "+F+".";throw new Error(G)}var ie=new v.Target(d.TargetTypeEnum.ConstructorArgument,k.targetName,H);return ie.metadata=W,ie}return null}function o(w,D,F,Z,L){for(var W=[],k=0;k<L;k++){var de=k,H=e(de,w,D,F,Z);H!==null&&W.push(H)}return W}function c(w,D){for(var F=w.getPropertiesMetadata(D),Z=[],L=Object.keys(F),W=0,k=L;W<k.length;W++){var de=k[W],H=F[de],ue=A(F[de]),ve=ue.targetName||de,ke=ue.inject||ue.multiInject,Ae=new v.Target(d.TargetTypeEnum.ClassProperty,ve,ke);Ae.metadata=H,Z.push(Ae)}var be=Object.getPrototypeOf(D.prototype).constructor;if(be!==Object){var G=c(w,be);Z=E(E([],Z),G)}return Z}function b(w,D){var F=Object.getPrototypeOf(D.prototype).constructor;if(F!==Object){var Z=x.getFunctionName(F),L=t(w,Z,F,!0),W=L.map(function(H){return H.metadata.filter(function(ue){return ue.key===g.UNMANAGED_TAG})}),k=[].concat.apply([],W).length,de=L.length-k;return de>0?de:b(w,F)}else return 0}S.getBaseClassDependencyCount=b;function A(w){var D={};return w.forEach(function(F){D[F.key.toString()]=F.value}),{inject:D[g.INJECT_TAG],multiInject:D[g.MULTI_INJECT_TAG],targetName:D[g.NAME_TAG],unmanaged:D[g.UNMANAGED_TAG]}}},6748:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Request=void 0;var E=y(37791),p=function(){function M(d,g,x,v,u){this.id=E.id(),this.serviceIdentifier=d,this.parentContext=g,this.parentRequest=x,this.target=u,this.childRequests=[],this.bindings=Array.isArray(v)?v:[v],this.requestScope=x===null?new Map:null}return M.prototype.addChildRequest=function(d,g,x){var v=new M(d,this.parentContext,this,g,x);return this.childRequests.push(v),v},M}();S.Request=p},18924:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Target=void 0;var E=y(6867),p=y(37791),M=y(47738),d=y(88460),g=function(){function x(v,u,t,e){this.id=p.id(),this.type=v,this.serviceIdentifier=t,this.name=new d.QueryableString(u||""),this.metadata=new Array;var o=null;typeof e=="string"?o=new M.Metadata(E.NAMED_TAG,e):e instanceof M.Metadata&&(o=e),o!==null&&this.metadata.push(o)}return x.prototype.hasTag=function(v){for(var u=0,t=this.metadata;u<t.length;u++){var e=t[u];if(e.key===v)return!0}return!1},x.prototype.isArray=function(){return this.hasTag(E.MULTI_INJECT_TAG)},x.prototype.matchesArray=function(v){return this.matchesTag(E.MULTI_INJECT_TAG)(v)},x.prototype.isNamed=function(){return this.hasTag(E.NAMED_TAG)},x.prototype.isTagged=function(){return this.metadata.some(function(v){return E.NON_CUSTOM_TAG_KEYS.every(function(u){return v.key!==u})})},x.prototype.isOptional=function(){return this.matchesTag(E.OPTIONAL_TAG)(!0)},x.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(v){return v.key===E.NAMED_TAG})[0]:null},x.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(v){return E.NON_CUSTOM_TAG_KEYS.every(function(u){return v.key!==u})}):null},x.prototype.matchesNamedTag=function(v){return this.matchesTag(E.NAMED_TAG)(v)},x.prototype.matchesTag=function(v){var u=this;return function(t){for(var e=0,o=u.metadata;e<o.length;e++){var c=o[e];if(c.key===v&&c.value===t)return!0}return!1}},x}();S.Target=g},52279:function(Ie,S,y){"use strict";var E=this&&this.__spreadArray||function(t,e){for(var o=0,c=e.length,b=t.length;o<c;o++,b++)t[b]=e[o];return t};Object.defineProperty(S,"__esModule",{value:!0}),S.resolveInstance=void 0;var p=y(16674),M=y(28421),d=y(6867);function g(t,e,o){var c=e.filter(function(A){return A.target!==null&&A.target.type===M.TargetTypeEnum.ClassProperty}),b=c.map(o);return c.forEach(function(A,w){var D="";D=A.target.name.value();var F=b[w];t[D]=F}),t}function x(t,e){return new(t.bind.apply(t,E([void 0],e)))}function v(t,e){if(Reflect.hasMetadata(d.POST_CONSTRUCT,t)){var o=Reflect.getMetadata(d.POST_CONSTRUCT,t);try{e[o.value]()}catch(c){throw new Error(p.POST_CONSTRUCT_ERROR(t.name,c.message))}}}function u(t,e,o){var c=null;if(e.length>0){var b=e.filter(function(w){return w.target!==null&&w.target.type===M.TargetTypeEnum.ConstructorArgument}),A=b.map(o);c=x(t,A),c=g(c,e,o)}else c=new t;return v(t,c),c}S.resolveInstance=u},31927:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.resolve=void 0;var E=y(16674),p=y(28421),M=y(85265),d=y(55800),g=y(52279),x=function(t,e,o){try{return o()}catch(c){throw M.isStackOverflowExeption(c)?new Error(E.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):c}},v=function(t){return function(e){e.parentContext.setCurrentRequest(e);var o=e.bindings,c=e.childRequests,b=e.target&&e.target.isArray(),A=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(b&&A)return c.map(function(W){var k=v(t);return k(W)});var w=null;if(e.target.isOptional()&&o.length===0)return;var D=o[0],F=D.scope===p.BindingScopeEnum.Singleton,Z=D.scope===p.BindingScopeEnum.Request;if(F&&D.activated)return D.cache;if(Z&&t!==null&&t.has(D.id))return t.get(D.id);if(D.type===p.BindingTypeEnum.ConstantValue)w=D.cache,D.activated=!0;else if(D.type===p.BindingTypeEnum.Function)w=D.cache,D.activated=!0;else if(D.type===p.BindingTypeEnum.Constructor)w=D.implementationType;else if(D.type===p.BindingTypeEnum.DynamicValue&&D.dynamicValue!==null)w=x("toDynamicValue",D.serviceIdentifier,function(){return D.dynamicValue(e.parentContext)});else if(D.type===p.BindingTypeEnum.Factory&&D.factory!==null)w=x("toFactory",D.serviceIdentifier,function(){return D.factory(e.parentContext)});else if(D.type===p.BindingTypeEnum.Provider&&D.provider!==null)w=x("toProvider",D.serviceIdentifier,function(){return D.provider(e.parentContext)});else if(D.type===p.BindingTypeEnum.Instance&&D.implementationType!==null)w=g.resolveInstance(D.implementationType,c,v(t));else{var L=d.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(E.INVALID_BINDING_TYPE+" "+L)}return typeof D.onActivation=="function"&&(w=D.onActivation(e.parentContext,w)),F&&(D.cache=w,D.activated=!0),Z&&t!==null&&!t.has(D.id)&&t.set(D.id,w),w}};function u(t){var e=v(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}S.resolve=u},83366:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingInSyntax=void 0;var E=y(28421),p=y(71325),M=function(){function d(g){this._binding=g}return d.prototype.inRequestScope=function(){return this._binding.scope=E.BindingScopeEnum.Request,new p.BindingWhenOnSyntax(this._binding)},d.prototype.inSingletonScope=function(){return this._binding.scope=E.BindingScopeEnum.Singleton,new p.BindingWhenOnSyntax(this._binding)},d.prototype.inTransientScope=function(){return this._binding.scope=E.BindingScopeEnum.Transient,new p.BindingWhenOnSyntax(this._binding)},d}();S.BindingInSyntax=M},99812:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingInWhenOnSyntax=void 0;var E=y(83366),p=y(51811),M=y(98370),d=function(){function g(x){this._binding=x,this._bindingWhenSyntax=new M.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding),this._bindingInSyntax=new E.BindingInSyntax(x)}return g.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},g.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},g.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},g.prototype.when=function(x){return this._bindingWhenSyntax.when(x)},g.prototype.whenTargetNamed=function(x){return this._bindingWhenSyntax.whenTargetNamed(x)},g.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},g.prototype.whenTargetTagged=function(x,v){return this._bindingWhenSyntax.whenTargetTagged(x,v)},g.prototype.whenInjectedInto=function(x){return this._bindingWhenSyntax.whenInjectedInto(x)},g.prototype.whenParentNamed=function(x){return this._bindingWhenSyntax.whenParentNamed(x)},g.prototype.whenParentTagged=function(x,v){return this._bindingWhenSyntax.whenParentTagged(x,v)},g.prototype.whenAnyAncestorIs=function(x){return this._bindingWhenSyntax.whenAnyAncestorIs(x)},g.prototype.whenNoAncestorIs=function(x){return this._bindingWhenSyntax.whenNoAncestorIs(x)},g.prototype.whenAnyAncestorNamed=function(x){return this._bindingWhenSyntax.whenAnyAncestorNamed(x)},g.prototype.whenAnyAncestorTagged=function(x,v){return this._bindingWhenSyntax.whenAnyAncestorTagged(x,v)},g.prototype.whenNoAncestorNamed=function(x){return this._bindingWhenSyntax.whenNoAncestorNamed(x)},g.prototype.whenNoAncestorTagged=function(x,v){return this._bindingWhenSyntax.whenNoAncestorTagged(x,v)},g.prototype.whenAnyAncestorMatches=function(x){return this._bindingWhenSyntax.whenAnyAncestorMatches(x)},g.prototype.whenNoAncestorMatches=function(x){return this._bindingWhenSyntax.whenNoAncestorMatches(x)},g.prototype.onActivation=function(x){return this._bindingOnSyntax.onActivation(x)},g}();S.BindingInWhenOnSyntax=d},51811:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingOnSyntax=void 0;var E=y(98370),p=function(){function M(d){this._binding=d}return M.prototype.onActivation=function(d){return this._binding.onActivation=d,new E.BindingWhenSyntax(this._binding)},M}();S.BindingOnSyntax=p},51860:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingToSyntax=void 0;var E=y(16674),p=y(28421),M=y(99812),d=y(71325),g=function(){function x(v){this._binding=v}return x.prototype.to=function(v){return this._binding.type=p.BindingTypeEnum.Instance,this._binding.implementationType=v,new M.BindingInWhenOnSyntax(this._binding)},x.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+E.INVALID_TO_SELF_VALUE);var v=this._binding.serviceIdentifier;return this.to(v)},x.prototype.toConstantValue=function(v){return this._binding.type=p.BindingTypeEnum.ConstantValue,this._binding.cache=v,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},x.prototype.toDynamicValue=function(v){return this._binding.type=p.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=v,this._binding.implementationType=null,new M.BindingInWhenOnSyntax(this._binding)},x.prototype.toConstructor=function(v){return this._binding.type=p.BindingTypeEnum.Constructor,this._binding.implementationType=v,this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},x.prototype.toFactory=function(v){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=v,this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},x.prototype.toFunction=function(v){if(typeof v!="function")throw new Error(E.INVALID_FUNCTION_BINDING);var u=this.toConstantValue(v);return this._binding.type=p.BindingTypeEnum.Function,this._binding.scope=p.BindingScopeEnum.Singleton,u},x.prototype.toAutoFactory=function(v){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=function(u){var t=function(){return u.container.get(v)};return t},this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},x.prototype.toProvider=function(v){return this._binding.type=p.BindingTypeEnum.Provider,this._binding.provider=v,this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},x.prototype.toService=function(v){this.toDynamicValue(function(u){return u.container.get(v)})},x}();S.BindingToSyntax=g},71325:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingWhenOnSyntax=void 0;var E=y(51811),p=y(98370),M=function(){function d(g){this._binding=g,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding)}return d.prototype.when=function(g){return this._bindingWhenSyntax.when(g)},d.prototype.whenTargetNamed=function(g){return this._bindingWhenSyntax.whenTargetNamed(g)},d.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},d.prototype.whenTargetTagged=function(g,x){return this._bindingWhenSyntax.whenTargetTagged(g,x)},d.prototype.whenInjectedInto=function(g){return this._bindingWhenSyntax.whenInjectedInto(g)},d.prototype.whenParentNamed=function(g){return this._bindingWhenSyntax.whenParentNamed(g)},d.prototype.whenParentTagged=function(g,x){return this._bindingWhenSyntax.whenParentTagged(g,x)},d.prototype.whenAnyAncestorIs=function(g){return this._bindingWhenSyntax.whenAnyAncestorIs(g)},d.prototype.whenNoAncestorIs=function(g){return this._bindingWhenSyntax.whenNoAncestorIs(g)},d.prototype.whenAnyAncestorNamed=function(g){return this._bindingWhenSyntax.whenAnyAncestorNamed(g)},d.prototype.whenAnyAncestorTagged=function(g,x){return this._bindingWhenSyntax.whenAnyAncestorTagged(g,x)},d.prototype.whenNoAncestorNamed=function(g){return this._bindingWhenSyntax.whenNoAncestorNamed(g)},d.prototype.whenNoAncestorTagged=function(g,x){return this._bindingWhenSyntax.whenNoAncestorTagged(g,x)},d.prototype.whenAnyAncestorMatches=function(g){return this._bindingWhenSyntax.whenAnyAncestorMatches(g)},d.prototype.whenNoAncestorMatches=function(g){return this._bindingWhenSyntax.whenNoAncestorMatches(g)},d.prototype.onActivation=function(g){return this._bindingOnSyntax.onActivation(g)},d}();S.BindingWhenOnSyntax=M},98370:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingWhenSyntax=void 0;var E=y(51811),p=y(80758),M=function(){function d(g){this._binding=g}return d.prototype.when=function(g){return this._binding.constraint=g,new E.BindingOnSyntax(this._binding)},d.prototype.whenTargetNamed=function(g){return this._binding.constraint=p.namedConstraint(g),new E.BindingOnSyntax(this._binding)},d.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(g){var x=g.target!==null&&!g.target.isNamed()&&!g.target.isTagged();return x},new E.BindingOnSyntax(this._binding)},d.prototype.whenTargetTagged=function(g,x){return this._binding.constraint=p.taggedConstraint(g)(x),new E.BindingOnSyntax(this._binding)},d.prototype.whenInjectedInto=function(g){return this._binding.constraint=function(x){return p.typeConstraint(g)(x.parentRequest)},new E.BindingOnSyntax(this._binding)},d.prototype.whenParentNamed=function(g){return this._binding.constraint=function(x){return p.namedConstraint(g)(x.parentRequest)},new E.BindingOnSyntax(this._binding)},d.prototype.whenParentTagged=function(g,x){return this._binding.constraint=function(v){return p.taggedConstraint(g)(x)(v.parentRequest)},new E.BindingOnSyntax(this._binding)},d.prototype.whenAnyAncestorIs=function(g){return this._binding.constraint=function(x){return p.traverseAncerstors(x,p.typeConstraint(g))},new E.BindingOnSyntax(this._binding)},d.prototype.whenNoAncestorIs=function(g){return this._binding.constraint=function(x){return!p.traverseAncerstors(x,p.typeConstraint(g))},new E.BindingOnSyntax(this._binding)},d.prototype.whenAnyAncestorNamed=function(g){return this._binding.constraint=function(x){return p.traverseAncerstors(x,p.namedConstraint(g))},new E.BindingOnSyntax(this._binding)},d.prototype.whenNoAncestorNamed=function(g){return this._binding.constraint=function(x){return!p.traverseAncerstors(x,p.namedConstraint(g))},new E.BindingOnSyntax(this._binding)},d.prototype.whenAnyAncestorTagged=function(g,x){return this._binding.constraint=function(v){return p.traverseAncerstors(v,p.taggedConstraint(g)(x))},new E.BindingOnSyntax(this._binding)},d.prototype.whenNoAncestorTagged=function(g,x){return this._binding.constraint=function(v){return!p.traverseAncerstors(v,p.taggedConstraint(g)(x))},new E.BindingOnSyntax(this._binding)},d.prototype.whenAnyAncestorMatches=function(g){return this._binding.constraint=function(x){return p.traverseAncerstors(x,g)},new E.BindingOnSyntax(this._binding)},d.prototype.whenNoAncestorMatches=function(g){return this._binding.constraint=function(x){return!p.traverseAncerstors(x,g)},new E.BindingOnSyntax(this._binding)},d}();S.BindingWhenSyntax=M},80758:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.typeConstraint=S.namedConstraint=S.taggedConstraint=S.traverseAncerstors=void 0;var E=y(6867),p=y(47738),M=function(v,u){var t=v.parentRequest;return t!==null?u(t)?!0:M(t,u):!1};S.traverseAncerstors=M;var d=function(v){return function(u){var t=function(e){return e!==null&&e.target!==null&&e.target.matchesTag(v)(u)};return t.metaData=new p.Metadata(v,u),t}};S.taggedConstraint=d;var g=d(E.NAMED_TAG);S.namedConstraint=g;var x=function(v){return function(u){var t=null;if(u!==null)if(t=u.bindings[0],typeof v=="string"){var e=t.serviceIdentifier;return e===v}else{var o=u.bindings[0].implementationType;return v===o}return!1}};S.typeConstraint=x},70600:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.multiBindToService=void 0;var y=function(E){return function(p){return function(){for(var M=[],d=0;d<arguments.length;d++)M[d]=arguments[d];return M.forEach(function(g){return E.bind(g).toService(p)})}}};S.multiBindToService=y},85265:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isStackOverflowExeption=void 0;var E=y(16674);function p(M){return M instanceof RangeError||M.message===E.STACK_OVERFLOW}S.isStackOverflowExeption=p},37791:function(Ie,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.id=void 0;var y=0;function E(){return y++}S.id=E},55800:function(Ie,S,y){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.circularDependencyToException=S.listMetadataForTarget=S.listRegisteredBindingsForServiceIdentifier=S.getServiceIdentifierAsString=S.getFunctionName=void 0;var E=y(16674);function p(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}S.getServiceIdentifierAsString=p;function M(t,e,o){var c="",b=o(t,e);return b.length!==0&&(c=`
Registered bindings:`,b.forEach(function(A){var w="Object";A.implementationType!==null&&(w=u(A.implementationType)),c=c+`
 `+w,A.constraint.metaData&&(c=c+" - "+A.constraint.metaData)})),c}S.listRegisteredBindingsForServiceIdentifier=M;function d(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:d(t.parentRequest,e)}function g(t){function e(c,b){b===void 0&&(b=[]);var A=p(c.serviceIdentifier);return b.push(A),c.parentRequest!==null?e(c.parentRequest,b):b}var o=e(t);return o.reverse().join(" --> ")}function x(t){t.childRequests.forEach(function(e){if(d(e,e.serviceIdentifier)){var o=g(e);throw new Error(E.CIRCULAR_DEPENDENCY+" "+o)}else x(e)})}S.circularDependencyToException=x;function v(t,e){if(e.isTagged()||e.isNamed()){var o="",c=e.getNamedTag(),b=e.getCustomTags();return c!==null&&(o+=c.toString()+`
`),b!==null&&b.forEach(function(A){o+=A.toString()+`
`})," "+t+`
 `+t+" - "+o}else return" "+t}S.listMetadataForTarget=v;function u(t){if(t.name)return t.name;var e=t.toString(),o=e.match(/^function\s*([^\s(]+)/);return o?o[1]:"Anonymous function: "+e}S.getFunctionName=u},31745:function(Ie){"use strict";Ie.exports=y,Ie.exports.default=y;var S=1e20;function y(g,x,v,u,t,e){this.fontSize=g||24,this.buffer=x===void 0?3:x,this.cutoff=u||.25,this.fontFamily=t||"sans-serif",this.fontWeight=e||"normal",this.radius=v||8;var o=this.size=this.fontSize+this.buffer*2,c=o+this.buffer*2,b=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;b?this.canvas=my.createOffscreenCanvas(o,o,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,b?this.middle=Math.round(o/2*1):this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function E(g,x,v,u,t,e,o){e.fill(S,0,x*v),o.fill(0,0,x*v);for(var c=(x-u)/2,b=0;b<t;b++)for(var A=0;A<u;A++){var w=(b+c)*x+A+c,D=g.data[4*(b*u+A)+3]/255;if(D===1)e[w]=0,o[w]=S;else if(D===0)e[w]=S,o[w]=0;else{var F=Math.max(0,.5-D),Z=Math.max(0,D-.5);e[w]=F*F,o[w]=Z*Z}}}function p(g,x,v,u,t,e,o){for(var c=0;c<x*v;c++){var b=Math.sqrt(u[c])-Math.sqrt(t[c]);g[c]=Math.round(255-255*(b/e+o))}}y.prototype._draw=function(g,x){var v=this.ctx.measureText(g),u=v.width,t=2*this.buffer,e,o,c,b,A,w,D,F;x&&this.useMetrics?(A=Math.floor(v.actualBoundingBoxAscent),F=this.buffer+Math.ceil(v.actualBoundingBoxAscent),w=this.buffer,D=this.buffer,o=Math.min(this.size,Math.ceil(v.actualBoundingBoxRight-v.actualBoundingBoxLeft)),b=Math.min(this.size-w,Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent)),e=o+t,c=b+t,this.ctx.textBaseline="alphabetic"):(e=o=this.size,c=b=this.size,A=19*this.fontSize/24,w=D=0,F=this.middle,this.ctx.textBaseline="middle");var Z;o&&b&&(this.ctx.clearRect(D,w,o,b),this.ctx.fillText(g,this.buffer,F),Z=this.ctx.getImageData(D,w,o,b));var L=new Uint8ClampedArray(e*c);return E(Z,e,c,o,b,this.gridOuter,this.gridInner),M(this.gridOuter,e,c,this.f,this.v,this.z),M(this.gridInner,e,c,this.f,this.v,this.z),p(L,e,c,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:L,metrics:{width:o,height:b,sdfWidth:e,sdfHeight:c,top:A,left:0,advance:u}}},y.prototype.draw=function(g){return this._draw(g,!1).data},y.prototype.drawWithMetrics=function(g){return this._draw(g,!0)};function M(g,x,v,u,t,e){for(var o=0;o<x;o++)d(g,o,x,v,u,t,e);for(var c=0;c<v;c++)d(g,c*x,1,x,u,t,e)}function d(g,x,v,u,t,e,o){var c,b,A,w;for(e[0]=0,o[0]=-S,o[1]=S,c=0;c<u;c++)t[c]=g[x+c*v];for(c=1,b=0,A=0;c<u;c++){do w=e[b],A=(t[c]-t[w]+c*c-w*w)/(c-w)/2;while(A<=o[b]&&--b>-1);b++,e[b]=c,o[b]=A,o[b+1]=S}for(c=0,b=0;c<u;c++){for(;o[b+1]<c;)b++;w=e[b],g[x+c*v]=t[w]+(c-w)*(c-w)}}},51260:function(Ie,S,y){"use strict";y.r(S),y.d(S,{Function:function(){return wr},Interpreter:function(){return Vt},default:function(){return Er},evaluate:function(){return zn},vm:function(){return E}});var E={};y.r(E),y.d(E,{Script:function(){return fn},compileFunction:function(){return vt},createContext:function(){return gn},runInContext:function(){return zt},runInNewContext:function(){return Kt}});var p={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},M="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",d={5:M,"5module":M+" export import",6:M+" const class extends export import super"},g=/^in(stanceof)?$/,x="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",v="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",u=new RegExp("["+x+"]"),t=new RegExp("["+x+v+"]");x=v=null;var e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],o=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function c(_,N){for(var me=65536,q=0;q<N.length;q+=2){if(me+=N[q],me>_)return!1;if(me+=N[q+1],me>=_)return!0}}function b(_,N){return _<65?_===36:_<91?!0:_<97?_===95:_<123?!0:_<=65535?_>=170&&u.test(String.fromCharCode(_)):N===!1?!1:c(_,e)}function A(_,N){return _<48?_===36:_<58?!0:_<65?!1:_<91?!0:_<97?_===95:_<123?!0:_<=65535?_>=170&&t.test(String.fromCharCode(_)):N===!1?!1:c(_,e)||c(_,o)}var w=function(N,me){me===void 0&&(me={}),this.label=N,this.keyword=me.keyword,this.beforeExpr=!!me.beforeExpr,this.startsExpr=!!me.startsExpr,this.isLoop=!!me.isLoop,this.isAssign=!!me.isAssign,this.prefix=!!me.prefix,this.postfix=!!me.postfix,this.binop=me.binop||null,this.updateContext=null};function D(_,N){return new w(_,{beforeExpr:!0,binop:N})}var F={beforeExpr:!0},Z={startsExpr:!0},L={};function W(_,N){return N===void 0&&(N={}),N.keyword=_,L[_]=new w(_,N)}var k={num:new w("num",Z),regexp:new w("regexp",Z),string:new w("string",Z),name:new w("name",Z),eof:new w("eof"),bracketL:new w("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new w("]"),braceL:new w("{",{beforeExpr:!0,startsExpr:!0}),braceR:new w("}"),parenL:new w("(",{beforeExpr:!0,startsExpr:!0}),parenR:new w(")"),comma:new w(",",F),semi:new w(";",F),colon:new w(":",F),dot:new w("."),question:new w("?",F),questionDot:new w("?."),arrow:new w("=>",F),template:new w("template"),invalidTemplate:new w("invalidTemplate"),ellipsis:new w("...",F),backQuote:new w("`",Z),dollarBraceL:new w("${",{beforeExpr:!0,startsExpr:!0}),eq:new w("=",{beforeExpr:!0,isAssign:!0}),assign:new w("_=",{beforeExpr:!0,isAssign:!0}),incDec:new w("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new w("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:D("||",1),logicalAND:D("&&",2),bitwiseOR:D("|",3),bitwiseXOR:D("^",4),bitwiseAND:D("&",5),equality:D("==/!=/===/!==",6),relational:D("</>/<=/>=",7),bitShift:D("<</>>/>>>",8),plusMin:new w("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:D("%",10),star:D("*",10),slash:D("/",10),starstar:new w("**",{beforeExpr:!0}),coalesce:D("??",1),_break:W("break"),_case:W("case",F),_catch:W("catch"),_continue:W("continue"),_debugger:W("debugger"),_default:W("default",F),_do:W("do",{isLoop:!0,beforeExpr:!0}),_else:W("else",F),_finally:W("finally"),_for:W("for",{isLoop:!0}),_function:W("function",Z),_if:W("if"),_return:W("return",F),_switch:W("switch"),_throw:W("throw",F),_try:W("try"),_var:W("var"),_const:W("const"),_while:W("while",{isLoop:!0}),_with:W("with"),_new:W("new",{beforeExpr:!0,startsExpr:!0}),_this:W("this",Z),_super:W("super",Z),_class:W("class",Z),_extends:W("extends",F),_export:W("export"),_import:W("import",Z),_null:W("null",Z),_true:W("true",Z),_false:W("false",Z),_in:W("in",{beforeExpr:!0,binop:7}),_instanceof:W("instanceof",{beforeExpr:!0,binop:7}),_typeof:W("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:W("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:W("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},de=/\r\n?|\n|\u2028|\u2029/,H=new RegExp(de.source,"g");function ue(_,N){return _===10||_===13||!N&&(_===8232||_===8233)}var ve=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ke=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ae=Object.prototype,be=Ae.hasOwnProperty,G=Ae.toString;function ie(_,N){return be.call(_,N)}var V=Array.isArray||function(_){return G.call(_)==="[object Array]"};function ae(_){return new RegExp("^(?:"+_.replace(/ /g,"|")+")$")}var K=function(N,me){this.line=N,this.column=me};K.prototype.offset=function(N){return new K(this.line,this.column+N)};var he=function(N,me,q){this.start=me,this.end=q,N.sourceFile!==null&&(this.source=N.sourceFile)};function Se(_,N){for(var me=1,q=0;;){H.lastIndex=q;var Ue=H.exec(_);if(Ue&&Ue.index<N)++me,q=Ue.index+Ue[0].length;else return new K(me,N-q)}}var Fe={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function nt(_){var N={};for(var me in Fe)N[me]=_&&ie(_,me)?_[me]:Fe[me];if(N.ecmaVersion>=2015&&(N.ecmaVersion-=2009),N.allowReserved==null&&(N.allowReserved=N.ecmaVersion<5),V(N.onToken)){var q=N.onToken;N.onToken=function(Ue){return q.push(Ue)}}return V(N.onComment)&&(N.onComment=lt(N,N.onComment)),N}function lt(_,N){return function(me,q,Ue,ct,Lt,hn){var on={type:me?"Block":"Line",value:q,start:Ue,end:ct};_.locations&&(on.loc=new he(this,Lt,hn)),_.ranges&&(on.range=[Ue,ct]),N.push(on)}}var Gt=1,pn=2,$n=Gt|pn,Ln=4,st=8,xt=16,tn=32,Un=64,We=128;function Yt(_,N){return pn|(_?Ln:0)|(N?st:0)}var Ze=0,Pe=1,ze=2,ht=3,P=4,ne=5,_e=function(N,me,q){this.options=N=nt(N),this.sourceFile=N.sourceFile,this.keywords=ae(d[N.ecmaVersion>=6?6:N.sourceType==="module"?"5module":5]);var Ue="";if(N.allowReserved!==!0){for(var ct=N.ecmaVersion;!(Ue=p[ct]);ct--);N.sourceType==="module"&&(Ue+=" await")}this.reservedWords=ae(Ue);var Lt=(Ue?Ue+" ":"")+p.strict;this.reservedWordsStrict=ae(Lt),this.reservedWordsStrictBind=ae(Lt+" "+p.strictBind),this.input=String(me),this.containsEsc=!1,q?(this.pos=q,this.lineStart=this.input.lastIndexOf(`
`,q-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(de).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=k.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=N.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&N.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Gt),this.regexpState=null},oe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};_e.prototype.parse=function(){var N=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(N)},oe.inFunction.get=function(){return(this.currentVarScope().flags&pn)>0},oe.inGenerator.get=function(){return(this.currentVarScope().flags&st)>0},oe.inAsync.get=function(){return(this.currentVarScope().flags&Ln)>0},oe.allowSuper.get=function(){return(this.currentThisScope().flags&Un)>0},oe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&We)>0},oe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},_e.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&pn)>0},_e.extend=function(){for(var N=[],me=arguments.length;me--;)N[me]=arguments[me];for(var q=this,Ue=0;Ue<N.length;Ue++)q=N[Ue](q);return q},_e.parse=function(N,me){return new this(me,N).parse()},_e.parseExpressionAt=function(N,me,q){var Ue=new this(q,N,me);return Ue.nextToken(),Ue.parseExpression()},_e.tokenizer=function(N,me){return new this(me,N)},Object.defineProperties(_e.prototype,oe);var ce=_e.prototype,ye=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ce.strictDirective=function(_){for(;;){ke.lastIndex=_,_+=ke.exec(this.input)[0].length;var N=ye.exec(this.input.slice(_));if(!N)return!1;if((N[1]||N[2])==="use strict"){ke.lastIndex=_+N[0].length;var me=ke.exec(this.input),q=me.index+me[0].length,Ue=this.input.charAt(q);return Ue===";"||Ue==="}"||de.test(me[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ue)||Ue==="!"&&this.input.charAt(q+1)==="=")}_+=N[0].length,ke.lastIndex=_,_+=ke.exec(this.input)[0].length,this.input[_]===";"&&_++}},ce.eat=function(_){return this.type===_?(this.next(),!0):!1},ce.isContextual=function(_){return this.type===k.name&&this.value===_&&!this.containsEsc},ce.eatContextual=function(_){return this.isContextual(_)?(this.next(),!0):!1},ce.expectContextual=function(_){this.eatContextual(_)||this.unexpected()},ce.canInsertSemicolon=function(){return this.type===k.eof||this.type===k.braceR||de.test(this.input.slice(this.lastTokEnd,this.start))},ce.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ce.semicolon=function(){!this.eat(k.semi)&&!this.insertSemicolon()&&this.unexpected()},ce.afterTrailingComma=function(_,N){if(this.type===_)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),N||this.next(),!0},ce.expect=function(_){this.eat(_)||this.unexpected()},ce.unexpected=function(_){this.raise(_!=null?_:this.start,"Unexpected token")};function Y(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ce.checkPatternErrors=function(_,N){if(_){_.trailingComma>-1&&this.raiseRecoverable(_.trailingComma,"Comma is not permitted after the rest element");var me=N?_.parenthesizedAssign:_.parenthesizedBind;me>-1&&this.raiseRecoverable(me,"Parenthesized pattern")}},ce.checkExpressionErrors=function(_,N){if(!_)return!1;var me=_.shorthandAssign,q=_.doubleProto;if(!N)return me>=0||q>=0;me>=0&&this.raise(me,"Shorthand property assignments are valid only in destructuring patterns"),q>=0&&this.raiseRecoverable(q,"Redefinition of __proto__ property")},ce.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ce.isSimpleAssignTarget=function(_){return _.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(_.expression):_.type==="Identifier"||_.type==="MemberExpression"};var Ne=_e.prototype;Ne.parseTopLevel=function(_){var N={};for(_.body||(_.body=[]);this.type!==k.eof;){var me=this.parseStatement(null,!0,N);_.body.push(me)}if(this.inModule)for(var q=0,Ue=Object.keys(this.undefinedExports);q<Ue.length;q+=1){var ct=Ue[q];this.raiseRecoverable(this.undefinedExports[ct].start,"Export '"+ct+"' is not defined")}return this.adaptDirectivePrologue(_.body),this.next(),_.sourceType=this.options.sourceType,this.finishNode(_,"Program")};var Qe={kind:"loop"},mt={kind:"switch"};Ne.isLet=function(_){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ke.lastIndex=this.pos;var N=ke.exec(this.input),me=this.pos+N[0].length,q=this.input.charCodeAt(me);if(q===91)return!0;if(_)return!1;if(q===123)return!0;if(b(q,!0)){for(var Ue=me+1;A(this.input.charCodeAt(Ue),!0);)++Ue;var ct=this.input.slice(me,Ue);if(!g.test(ct))return!0}return!1},Ne.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ke.lastIndex=this.pos;var _=ke.exec(this.input),N=this.pos+_[0].length;return!de.test(this.input.slice(this.pos,N))&&this.input.slice(N,N+8)==="function"&&(N+8===this.input.length||!A(this.input.charAt(N+8)))},Ne.parseStatement=function(_,N,me){var q=this.type,Ue=this.startNode(),ct;switch(this.isLet(_)&&(q=k._var,ct="let"),q){case k._break:case k._continue:return this.parseBreakContinueStatement(Ue,q.keyword);case k._debugger:return this.parseDebuggerStatement(Ue);case k._do:return this.parseDoStatement(Ue);case k._for:return this.parseForStatement(Ue);case k._function:return _&&(this.strict||_!=="if"&&_!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ue,!1,!_);case k._class:return _&&this.unexpected(),this.parseClass(Ue,!0);case k._if:return this.parseIfStatement(Ue);case k._return:return this.parseReturnStatement(Ue);case k._switch:return this.parseSwitchStatement(Ue);case k._throw:return this.parseThrowStatement(Ue);case k._try:return this.parseTryStatement(Ue);case k._const:case k._var:return ct=ct||this.value,_&&ct!=="var"&&this.unexpected(),this.parseVarStatement(Ue,ct);case k._while:return this.parseWhileStatement(Ue);case k._with:return this.parseWithStatement(Ue);case k.braceL:return this.parseBlock(!0,Ue);case k.semi:return this.parseEmptyStatement(Ue);case k._export:case k._import:if(this.options.ecmaVersion>10&&q===k._import){ke.lastIndex=this.pos;var Lt=ke.exec(this.input),hn=this.pos+Lt[0].length,on=this.input.charCodeAt(hn);if(on===40||on===46)return this.parseExpressionStatement(Ue,this.parseExpression())}return this.options.allowImportExportEverywhere||(N||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),q===k._import?this.parseImport(Ue):this.parseExport(Ue,me);default:if(this.isAsyncFunction())return _&&this.unexpected(),this.next(),this.parseFunctionStatement(Ue,!0,!_);var nr=this.value,sr=this.parseExpression();return q===k.name&&sr.type==="Identifier"&&this.eat(k.colon)?this.parseLabeledStatement(Ue,nr,sr,_):this.parseExpressionStatement(Ue,sr)}},Ne.parseBreakContinueStatement=function(_,N){var me=N==="break";this.next(),this.eat(k.semi)||this.insertSemicolon()?_.label=null:this.type!==k.name?this.unexpected():(_.label=this.parseIdent(),this.semicolon());for(var q=0;q<this.labels.length;++q){var Ue=this.labels[q];if((_.label==null||Ue.name===_.label.name)&&(Ue.kind!=null&&(me||Ue.kind==="loop")||_.label&&me))break}return q===this.labels.length&&this.raise(_.start,"Unsyntactic "+N),this.finishNode(_,me?"BreakStatement":"ContinueStatement")},Ne.parseDebuggerStatement=function(_){return this.next(),this.semicolon(),this.finishNode(_,"DebuggerStatement")},Ne.parseDoStatement=function(_){return this.next(),this.labels.push(Qe),_.body=this.parseStatement("do"),this.labels.pop(),this.expect(k._while),_.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(k.semi):this.semicolon(),this.finishNode(_,"DoWhileStatement")},Ne.parseForStatement=function(_){this.next();var N=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Qe),this.enterScope(0),this.expect(k.parenL),this.type===k.semi)return N>-1&&this.unexpected(N),this.parseFor(_,null);var me=this.isLet();if(this.type===k._var||this.type===k._const||me){var q=this.startNode(),Ue=me?"let":this.value;return this.next(),this.parseVar(q,!0,Ue),this.finishNode(q,"VariableDeclaration"),(this.type===k._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&q.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===k._in?N>-1&&this.unexpected(N):_.await=N>-1),this.parseForIn(_,q)):(N>-1&&this.unexpected(N),this.parseFor(_,q))}var ct=new Y,Lt=this.parseExpression(!0,ct);return this.type===k._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===k._in?N>-1&&this.unexpected(N):_.await=N>-1),this.toAssignable(Lt,!1,ct),this.checkLVal(Lt),this.parseForIn(_,Lt)):(this.checkExpressionErrors(ct,!0),N>-1&&this.unexpected(N),this.parseFor(_,Lt))},Ne.parseFunctionStatement=function(_,N,me){return this.next(),this.parseFunction(_,rt|(me?0:yt),!1,N)},Ne.parseIfStatement=function(_){return this.next(),_.test=this.parseParenExpression(),_.consequent=this.parseStatement("if"),_.alternate=this.eat(k._else)?this.parseStatement("if"):null,this.finishNode(_,"IfStatement")},Ne.parseReturnStatement=function(_){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(k.semi)||this.insertSemicolon()?_.argument=null:(_.argument=this.parseExpression(),this.semicolon()),this.finishNode(_,"ReturnStatement")},Ne.parseSwitchStatement=function(_){this.next(),_.discriminant=this.parseParenExpression(),_.cases=[],this.expect(k.braceL),this.labels.push(mt),this.enterScope(0);for(var N,me=!1;this.type!==k.braceR;)if(this.type===k._case||this.type===k._default){var q=this.type===k._case;N&&this.finishNode(N,"SwitchCase"),_.cases.push(N=this.startNode()),N.consequent=[],this.next(),q?N.test=this.parseExpression():(me&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),me=!0,N.test=null),this.expect(k.colon)}else N||this.unexpected(),N.consequent.push(this.parseStatement(null));return this.exitScope(),N&&this.finishNode(N,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(_,"SwitchStatement")},Ne.parseThrowStatement=function(_){return this.next(),de.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),_.argument=this.parseExpression(),this.semicolon(),this.finishNode(_,"ThrowStatement")};var Ve=[];Ne.parseTryStatement=function(_){if(this.next(),_.block=this.parseBlock(),_.handler=null,this.type===k._catch){var N=this.startNode();if(this.next(),this.eat(k.parenL)){N.param=this.parseBindingAtom();var me=N.param.type==="Identifier";this.enterScope(me?tn:0),this.checkLVal(N.param,me?P:ze),this.expect(k.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),N.param=null,this.enterScope(0);N.body=this.parseBlock(!1),this.exitScope(),_.handler=this.finishNode(N,"CatchClause")}return _.finalizer=this.eat(k._finally)?this.parseBlock():null,!_.handler&&!_.finalizer&&this.raise(_.start,"Missing catch or finally clause"),this.finishNode(_,"TryStatement")},Ne.parseVarStatement=function(_,N){return this.next(),this.parseVar(_,!1,N),this.semicolon(),this.finishNode(_,"VariableDeclaration")},Ne.parseWhileStatement=function(_){return this.next(),_.test=this.parseParenExpression(),this.labels.push(Qe),_.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(_,"WhileStatement")},Ne.parseWithStatement=function(_){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),_.object=this.parseParenExpression(),_.body=this.parseStatement("with"),this.finishNode(_,"WithStatement")},Ne.parseEmptyStatement=function(_){return this.next(),this.finishNode(_,"EmptyStatement")},Ne.parseLabeledStatement=function(_,N,me,q){for(var Ue=0,ct=this.labels;Ue<ct.length;Ue+=1){var Lt=ct[Ue];Lt.name===N&&this.raise(me.start,"Label '"+N+"' is already declared")}for(var hn=this.type.isLoop?"loop":this.type===k._switch?"switch":null,on=this.labels.length-1;on>=0;on--){var nr=this.labels[on];if(nr.statementStart===_.start)nr.statementStart=this.start,nr.kind=hn;else break}return this.labels.push({name:N,kind:hn,statementStart:this.start}),_.body=this.parseStatement(q?q.indexOf("label")===-1?q+"label":q:"label"),this.labels.pop(),_.label=me,this.finishNode(_,"LabeledStatement")},Ne.parseExpressionStatement=function(_,N){return _.expression=N,this.semicolon(),this.finishNode(_,"ExpressionStatement")},Ne.parseBlock=function(_,N,me){for(_===void 0&&(_=!0),N===void 0&&(N=this.startNode()),N.body=[],this.expect(k.braceL),_&&this.enterScope(0);this.type!==k.braceR;){var q=this.parseStatement(null);N.body.push(q)}return me&&(this.strict=!1),this.next(),_&&this.exitScope(),this.finishNode(N,"BlockStatement")},Ne.parseFor=function(_,N){return _.init=N,this.expect(k.semi),_.test=this.type===k.semi?null:this.parseExpression(),this.expect(k.semi),_.update=this.type===k.parenR?null:this.parseExpression(),this.expect(k.parenR),_.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(_,"ForStatement")},Ne.parseForIn=function(_,N){var me=this.type===k._in;return this.next(),N.type==="VariableDeclaration"&&N.declarations[0].init!=null&&(!me||this.options.ecmaVersion<8||this.strict||N.kind!=="var"||N.declarations[0].id.type!=="Identifier")?this.raise(N.start,(me?"for-in":"for-of")+" loop variable declaration may not have an initializer"):N.type==="AssignmentPattern"&&this.raise(N.start,"Invalid left-hand side in for-loop"),_.left=N,_.right=me?this.parseExpression():this.parseMaybeAssign(),this.expect(k.parenR),_.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(_,me?"ForInStatement":"ForOfStatement")},Ne.parseVar=function(_,N,me){for(_.declarations=[],_.kind=me;;){var q=this.startNode();if(this.parseVarId(q,me),this.eat(k.eq)?q.init=this.parseMaybeAssign(N):me==="const"&&!(this.type===k._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():q.id.type!=="Identifier"&&!(N&&(this.type===k._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):q.init=null,_.declarations.push(this.finishNode(q,"VariableDeclarator")),!this.eat(k.comma))break}return _},Ne.parseVarId=function(_,N){_.id=this.parseBindingAtom(),this.checkLVal(_.id,N==="var"?Pe:ze,!1)};var rt=1,yt=2,Tt=4;Ne.parseFunction=function(_,N,me,q){this.initFunction(_),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!q)&&(this.type===k.star&&N&yt&&this.unexpected(),_.generator=this.eat(k.star)),this.options.ecmaVersion>=8&&(_.async=!!q),N&rt&&(_.id=N&Tt&&this.type!==k.name?null:this.parseIdent(),_.id&&!(N&yt)&&this.checkLVal(_.id,this.strict||_.generator||_.async?this.treatFunctionsAsVar?Pe:ze:ht));var Ue=this.yieldPos,ct=this.awaitPos,Lt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Yt(_.async,_.generator)),N&rt||(_.id=this.type===k.name?this.parseIdent():null),this.parseFunctionParams(_),this.parseFunctionBody(_,me,!1),this.yieldPos=Ue,this.awaitPos=ct,this.awaitIdentPos=Lt,this.finishNode(_,N&rt?"FunctionDeclaration":"FunctionExpression")},Ne.parseFunctionParams=function(_){this.expect(k.parenL),_.params=this.parseBindingList(k.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Ne.parseClass=function(_,N){this.next();var me=this.strict;this.strict=!0,this.parseClassId(_,N),this.parseClassSuper(_);var q=this.startNode(),Ue=!1;for(q.body=[],this.expect(k.braceL);this.type!==k.braceR;){var ct=this.parseClassElement(_.superClass!==null);ct&&(q.body.push(ct),ct.type==="MethodDefinition"&&ct.kind==="constructor"&&(Ue&&this.raise(ct.start,"Duplicate constructor in the same class"),Ue=!0))}return this.strict=me,this.next(),_.body=this.finishNode(q,"ClassBody"),this.finishNode(_,N?"ClassDeclaration":"ClassExpression")},Ne.parseClassElement=function(_){var N=this;if(this.eat(k.semi))return null;var me=this.startNode(),q=function(on,nr){nr===void 0&&(nr=!1);var sr=N.start,ti=N.startLoc;return N.eatContextual(on)?N.type!==k.parenL&&(!nr||!N.canInsertSemicolon())?!0:(me.key&&N.unexpected(),me.computed=!1,me.key=N.startNodeAt(sr,ti),me.key.name=on,N.finishNode(me.key,"Identifier"),!1):!1};me.kind="method",me.static=q("static");var Ue=this.eat(k.star),ct=!1;Ue||(this.options.ecmaVersion>=8&&q("async",!0)?(ct=!0,Ue=this.options.ecmaVersion>=9&&this.eat(k.star)):q("get")?me.kind="get":q("set")&&(me.kind="set")),me.key||this.parsePropertyName(me);var Lt=me.key,hn=!1;return!me.computed&&!me.static&&(Lt.type==="Identifier"&&Lt.name==="constructor"||Lt.type==="Literal"&&Lt.value==="constructor")?(me.kind!=="method"&&this.raise(Lt.start,"Constructor can't have get/set modifier"),Ue&&this.raise(Lt.start,"Constructor can't be a generator"),ct&&this.raise(Lt.start,"Constructor can't be an async method"),me.kind="constructor",hn=_):me.static&&Lt.type==="Identifier"&&Lt.name==="prototype"&&this.raise(Lt.start,"Classes may not have a static property named prototype"),this.parseClassMethod(me,Ue,ct,hn),me.kind==="get"&&me.value.params.length!==0&&this.raiseRecoverable(me.value.start,"getter should have no params"),me.kind==="set"&&me.value.params.length!==1&&this.raiseRecoverable(me.value.start,"setter should have exactly one param"),me.kind==="set"&&me.value.params[0].type==="RestElement"&&this.raiseRecoverable(me.value.params[0].start,"Setter cannot use rest params"),me},Ne.parseClassMethod=function(_,N,me,q){return _.value=this.parseMethod(N,me,q),this.finishNode(_,"MethodDefinition")},Ne.parseClassId=function(_,N){this.type===k.name?(_.id=this.parseIdent(),N&&this.checkLVal(_.id,ze,!1)):(N===!0&&this.unexpected(),_.id=null)},Ne.parseClassSuper=function(_){_.superClass=this.eat(k._extends)?this.parseExprSubscripts():null},Ne.parseExport=function(_,N){if(this.next(),this.eat(k.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(_.exported=this.parseIdent(!0),this.checkExport(N,_.exported.name,this.lastTokStart)):_.exported=null),this.expectContextual("from"),this.type!==k.string&&this.unexpected(),_.source=this.parseExprAtom(),this.semicolon(),this.finishNode(_,"ExportAllDeclaration");if(this.eat(k._default)){this.checkExport(N,"default",this.lastTokStart);var me;if(this.type===k._function||(me=this.isAsyncFunction())){var q=this.startNode();this.next(),me&&this.next(),_.declaration=this.parseFunction(q,rt|Tt,!1,me)}else if(this.type===k._class){var Ue=this.startNode();_.declaration=this.parseClass(Ue,"nullableID")}else _.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(_,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())_.declaration=this.parseStatement(null),_.declaration.type==="VariableDeclaration"?this.checkVariableExport(N,_.declaration.declarations):this.checkExport(N,_.declaration.id.name,_.declaration.id.start),_.specifiers=[],_.source=null;else{if(_.declaration=null,_.specifiers=this.parseExportSpecifiers(N),this.eatContextual("from"))this.type!==k.string&&this.unexpected(),_.source=this.parseExprAtom();else{for(var ct=0,Lt=_.specifiers;ct<Lt.length;ct+=1){var hn=Lt[ct];this.checkUnreserved(hn.local),this.checkLocalExport(hn.local)}_.source=null}this.semicolon()}return this.finishNode(_,"ExportNamedDeclaration")},Ne.checkExport=function(_,N,me){_&&(ie(_,N)&&this.raiseRecoverable(me,"Duplicate export '"+N+"'"),_[N]=!0)},Ne.checkPatternExport=function(_,N){var me=N.type;if(me==="Identifier")this.checkExport(_,N.name,N.start);else if(me==="ObjectPattern")for(var q=0,Ue=N.properties;q<Ue.length;q+=1){var ct=Ue[q];this.checkPatternExport(_,ct)}else if(me==="ArrayPattern")for(var Lt=0,hn=N.elements;Lt<hn.length;Lt+=1){var on=hn[Lt];on&&this.checkPatternExport(_,on)}else me==="Property"?this.checkPatternExport(_,N.value):me==="AssignmentPattern"?this.checkPatternExport(_,N.left):me==="RestElement"?this.checkPatternExport(_,N.argument):me==="ParenthesizedExpression"&&this.checkPatternExport(_,N.expression)},Ne.checkVariableExport=function(_,N){if(_)for(var me=0,q=N;me<q.length;me+=1){var Ue=q[me];this.checkPatternExport(_,Ue.id)}},Ne.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},Ne.parseExportSpecifiers=function(_){var N=[],me=!0;for(this.expect(k.braceL);!this.eat(k.braceR);){if(me)me=!1;else if(this.expect(k.comma),this.afterTrailingComma(k.braceR))break;var q=this.startNode();q.local=this.parseIdent(!0),q.exported=this.eatContextual("as")?this.parseIdent(!0):q.local,this.checkExport(_,q.exported.name,q.exported.start),N.push(this.finishNode(q,"ExportSpecifier"))}return N},Ne.parseImport=function(_){return this.next(),this.type===k.string?(_.specifiers=Ve,_.source=this.parseExprAtom()):(_.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),_.source=this.type===k.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(_,"ImportDeclaration")},Ne.parseImportSpecifiers=function(){var _=[],N=!0;if(this.type===k.name){var me=this.startNode();if(me.local=this.parseIdent(),this.checkLVal(me.local,ze),_.push(this.finishNode(me,"ImportDefaultSpecifier")),!this.eat(k.comma))return _}if(this.type===k.star){var q=this.startNode();return this.next(),this.expectContextual("as"),q.local=this.parseIdent(),this.checkLVal(q.local,ze),_.push(this.finishNode(q,"ImportNamespaceSpecifier")),_}for(this.expect(k.braceL);!this.eat(k.braceR);){if(N)N=!1;else if(this.expect(k.comma),this.afterTrailingComma(k.braceR))break;var Ue=this.startNode();Ue.imported=this.parseIdent(!0),this.eatContextual("as")?Ue.local=this.parseIdent():(this.checkUnreserved(Ue.imported),Ue.local=Ue.imported),this.checkLVal(Ue.local,ze),_.push(this.finishNode(Ue,"ImportSpecifier"))}return _},Ne.adaptDirectivePrologue=function(_){for(var N=0;N<_.length&&this.isDirectiveCandidate(_[N]);++N)_[N].directive=_[N].expression.raw.slice(1,-1)},Ne.isDirectiveCandidate=function(_){return _.type==="ExpressionStatement"&&_.expression.type==="Literal"&&typeof _.expression.value=="string"&&(this.input[_.start]==='"'||this.input[_.start]==="'")};var Ht=_e.prototype;Ht.toAssignable=function(_,N,me){if(this.options.ecmaVersion>=6&&_)switch(_.type){case"Identifier":this.inAsync&&_.name==="await"&&this.raise(_.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":_.type="ObjectPattern",me&&this.checkPatternErrors(me,!0);for(var q=0,Ue=_.properties;q<Ue.length;q+=1){var ct=Ue[q];this.toAssignable(ct,N),ct.type==="RestElement"&&(ct.argument.type==="ArrayPattern"||ct.argument.type==="ObjectPattern")&&this.raise(ct.argument.start,"Unexpected token")}break;case"Property":_.kind!=="init"&&this.raise(_.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(_.value,N);break;case"ArrayExpression":_.type="ArrayPattern",me&&this.checkPatternErrors(me,!0),this.toAssignableList(_.elements,N);break;case"SpreadElement":_.type="RestElement",this.toAssignable(_.argument,N),_.argument.type==="AssignmentPattern"&&this.raise(_.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":_.operator!=="="&&this.raise(_.left.end,"Only '=' operator can be used for specifying default value."),_.type="AssignmentPattern",delete _.operator,this.toAssignable(_.left,N);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(_.expression,N,me);break;case"ChainExpression":this.raiseRecoverable(_.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!N)break;default:this.raise(_.start,"Assigning to rvalue")}else me&&this.checkPatternErrors(me,!0);return _},Ht.toAssignableList=function(_,N){for(var me=_.length,q=0;q<me;q++){var Ue=_[q];Ue&&this.toAssignable(Ue,N)}if(me){var ct=_[me-1];this.options.ecmaVersion===6&&N&&ct&&ct.type==="RestElement"&&ct.argument.type!=="Identifier"&&this.unexpected(ct.argument.start)}return _},Ht.parseSpread=function(_){var N=this.startNode();return this.next(),N.argument=this.parseMaybeAssign(!1,_),this.finishNode(N,"SpreadElement")},Ht.parseRestBinding=function(){var _=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==k.name&&this.unexpected(),_.argument=this.parseBindingAtom(),this.finishNode(_,"RestElement")},Ht.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case k.bracketL:var _=this.startNode();return this.next(),_.elements=this.parseBindingList(k.bracketR,!0,!0),this.finishNode(_,"ArrayPattern");case k.braceL:return this.parseObj(!0)}return this.parseIdent()},Ht.parseBindingList=function(_,N,me){for(var q=[],Ue=!0;!this.eat(_);)if(Ue?Ue=!1:this.expect(k.comma),N&&this.type===k.comma)q.push(null);else{if(me&&this.afterTrailingComma(_))break;if(this.type===k.ellipsis){var ct=this.parseRestBinding();this.parseBindingListItem(ct),q.push(ct),this.type===k.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(_);break}else{var Lt=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(Lt),q.push(Lt)}}return q},Ht.parseBindingListItem=function(_){return _},Ht.parseMaybeDefault=function(_,N,me){if(me=me||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(k.eq))return me;var q=this.startNodeAt(_,N);return q.left=me,q.right=this.parseMaybeAssign(),this.finishNode(q,"AssignmentPattern")},Ht.checkLVal=function(_,N,me){switch(N===void 0&&(N=Ze),_.type){case"Identifier":N===ze&&_.name==="let"&&this.raiseRecoverable(_.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(_.name)&&this.raiseRecoverable(_.start,(N?"Binding ":"Assigning to ")+_.name+" in strict mode"),me&&(ie(me,_.name)&&this.raiseRecoverable(_.start,"Argument name clash"),me[_.name]=!0),N!==Ze&&N!==ne&&this.declareName(_.name,N,_.start);break;case"ChainExpression":this.raiseRecoverable(_.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":N&&this.raiseRecoverable(_.start,"Binding member expression");break;case"ObjectPattern":for(var q=0,Ue=_.properties;q<Ue.length;q+=1){var ct=Ue[q];this.checkLVal(ct,N,me)}break;case"Property":this.checkLVal(_.value,N,me);break;case"ArrayPattern":for(var Lt=0,hn=_.elements;Lt<hn.length;Lt+=1){var on=hn[Lt];on&&this.checkLVal(on,N,me)}break;case"AssignmentPattern":this.checkLVal(_.left,N,me);break;case"RestElement":this.checkLVal(_.argument,N,me);break;case"ParenthesizedExpression":this.checkLVal(_.expression,N,me);break;default:this.raise(_.start,(N?"Binding":"Assigning to")+" rvalue")}};var en=_e.prototype;en.checkPropClash=function(_,N,me){if(!(this.options.ecmaVersion>=9&&_.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(_.computed||_.method||_.shorthand))){var q=_.key,Ue;switch(q.type){case"Identifier":Ue=q.name;break;case"Literal":Ue=String(q.value);break;default:return}var ct=_.kind;if(this.options.ecmaVersion>=6){Ue==="__proto__"&&ct==="init"&&(N.proto&&(me?me.doubleProto<0&&(me.doubleProto=q.start):this.raiseRecoverable(q.start,"Redefinition of __proto__ property")),N.proto=!0);return}Ue="$"+Ue;var Lt=N[Ue];if(Lt){var hn;ct==="init"?hn=this.strict&&Lt.init||Lt.get||Lt.set:hn=Lt.init||Lt[ct],hn&&this.raiseRecoverable(q.start,"Redefinition of property")}else Lt=N[Ue]={init:!1,get:!1,set:!1};Lt[ct]=!0}},en.parseExpression=function(_,N){var me=this.start,q=this.startLoc,Ue=this.parseMaybeAssign(_,N);if(this.type===k.comma){var ct=this.startNodeAt(me,q);for(ct.expressions=[Ue];this.eat(k.comma);)ct.expressions.push(this.parseMaybeAssign(_,N));return this.finishNode(ct,"SequenceExpression")}return Ue},en.parseMaybeAssign=function(_,N,me){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(_);this.exprAllowed=!1}var q=!1,Ue=-1,ct=-1;N?(Ue=N.parenthesizedAssign,ct=N.trailingComma,N.parenthesizedAssign=N.trailingComma=-1):(N=new Y,q=!0);var Lt=this.start,hn=this.startLoc;(this.type===k.parenL||this.type===k.name)&&(this.potentialArrowAt=this.start);var on=this.parseMaybeConditional(_,N);if(me&&(on=me.call(this,on,Lt,hn)),this.type.isAssign){var nr=this.startNodeAt(Lt,hn);return nr.operator=this.value,nr.left=this.type===k.eq?this.toAssignable(on,!1,N):on,q||(N.parenthesizedAssign=N.trailingComma=N.doubleProto=-1),N.shorthandAssign>=nr.left.start&&(N.shorthandAssign=-1),this.checkLVal(on),this.next(),nr.right=this.parseMaybeAssign(_),this.finishNode(nr,"AssignmentExpression")}else q&&this.checkExpressionErrors(N,!0);return Ue>-1&&(N.parenthesizedAssign=Ue),ct>-1&&(N.trailingComma=ct),on},en.parseMaybeConditional=function(_,N){var me=this.start,q=this.startLoc,Ue=this.parseExprOps(_,N);if(this.checkExpressionErrors(N))return Ue;if(this.eat(k.question)){var ct=this.startNodeAt(me,q);return ct.test=Ue,ct.consequent=this.parseMaybeAssign(),this.expect(k.colon),ct.alternate=this.parseMaybeAssign(_),this.finishNode(ct,"ConditionalExpression")}return Ue},en.parseExprOps=function(_,N){var me=this.start,q=this.startLoc,Ue=this.parseMaybeUnary(N,!1);return this.checkExpressionErrors(N)||Ue.start===me&&Ue.type==="ArrowFunctionExpression"?Ue:this.parseExprOp(Ue,me,q,-1,_)},en.parseExprOp=function(_,N,me,q,Ue){var ct=this.type.binop;if(ct!=null&&(!Ue||this.type!==k._in)&&ct>q){var Lt=this.type===k.logicalOR||this.type===k.logicalAND,hn=this.type===k.coalesce;hn&&(ct=k.logicalAND.binop);var on=this.value;this.next();var nr=this.start,sr=this.startLoc,ti=this.parseExprOp(this.parseMaybeUnary(null,!1),nr,sr,ct,Ue),Fi=this.buildBinary(N,me,_,ti,on,Lt||hn);return(Lt&&this.type===k.coalesce||hn&&(this.type===k.logicalOR||this.type===k.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Fi,N,me,q,Ue)}return _},en.buildBinary=function(_,N,me,q,Ue,ct){var Lt=this.startNodeAt(_,N);return Lt.left=me,Lt.operator=Ue,Lt.right=q,this.finishNode(Lt,ct?"LogicalExpression":"BinaryExpression")},en.parseMaybeUnary=function(_,N){var me=this.start,q=this.startLoc,Ue;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))Ue=this.parseAwait(),N=!0;else if(this.type.prefix){var ct=this.startNode(),Lt=this.type===k.incDec;ct.operator=this.value,ct.prefix=!0,this.next(),ct.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(_,!0),Lt?this.checkLVal(ct.argument):this.strict&&ct.operator==="delete"&&ct.argument.type==="Identifier"?this.raiseRecoverable(ct.start,"Deleting local variable in strict mode"):N=!0,Ue=this.finishNode(ct,Lt?"UpdateExpression":"UnaryExpression")}else{if(Ue=this.parseExprSubscripts(_),this.checkExpressionErrors(_))return Ue;for(;this.type.postfix&&!this.canInsertSemicolon();){var hn=this.startNodeAt(me,q);hn.operator=this.value,hn.prefix=!1,hn.argument=Ue,this.checkLVal(Ue),this.next(),Ue=this.finishNode(hn,"UpdateExpression")}}return!N&&this.eat(k.starstar)?this.buildBinary(me,q,Ue,this.parseMaybeUnary(null,!1),"**",!1):Ue},en.parseExprSubscripts=function(_){var N=this.start,me=this.startLoc,q=this.parseExprAtom(_);if(q.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return q;var Ue=this.parseSubscripts(q,N,me);return _&&Ue.type==="MemberExpression"&&(_.parenthesizedAssign>=Ue.start&&(_.parenthesizedAssign=-1),_.parenthesizedBind>=Ue.start&&(_.parenthesizedBind=-1)),Ue},en.parseSubscripts=function(_,N,me,q){for(var Ue=this.options.ecmaVersion>=8&&_.type==="Identifier"&&_.name==="async"&&this.lastTokEnd===_.end&&!this.canInsertSemicolon()&&_.end-_.start===5&&this.potentialArrowAt===_.start,ct=!1;;){var Lt=this.parseSubscript(_,N,me,q,Ue,ct);if(Lt.optional&&(ct=!0),Lt===_||Lt.type==="ArrowFunctionExpression"){if(ct){var hn=this.startNodeAt(N,me);hn.expression=Lt,Lt=this.finishNode(hn,"ChainExpression")}return Lt}_=Lt}},en.parseSubscript=function(_,N,me,q,Ue,ct){var Lt=this.options.ecmaVersion>=11,hn=Lt&&this.eat(k.questionDot);q&&hn&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var on=this.eat(k.bracketL);if(on||hn&&this.type!==k.parenL&&this.type!==k.backQuote||this.eat(k.dot)){var nr=this.startNodeAt(N,me);nr.object=_,nr.property=on?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),nr.computed=!!on,on&&this.expect(k.bracketR),Lt&&(nr.optional=hn),_=this.finishNode(nr,"MemberExpression")}else if(!q&&this.eat(k.parenL)){var sr=new Y,ti=this.yieldPos,Fi=this.awaitPos,Ci=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var ta=this.parseExprList(k.parenR,this.options.ecmaVersion>=8,!1,sr);if(Ue&&!hn&&!this.canInsertSemicolon()&&this.eat(k.arrow))return this.checkPatternErrors(sr,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ti,this.awaitPos=Fi,this.awaitIdentPos=Ci,this.parseArrowExpression(this.startNodeAt(N,me),ta,!0);this.checkExpressionErrors(sr,!0),this.yieldPos=ti||this.yieldPos,this.awaitPos=Fi||this.awaitPos,this.awaitIdentPos=Ci||this.awaitIdentPos;var Ni=this.startNodeAt(N,me);Ni.callee=_,Ni.arguments=ta,Lt&&(Ni.optional=hn),_=this.finishNode(Ni,"CallExpression")}else if(this.type===k.backQuote){(hn||ct)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Oi=this.startNodeAt(N,me);Oi.tag=_,Oi.quasi=this.parseTemplate({isTagged:!0}),_=this.finishNode(Oi,"TaggedTemplateExpression")}return _},en.parseExprAtom=function(_){this.type===k.slash&&this.readRegexp();var N,me=this.potentialArrowAt===this.start;switch(this.type){case k._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),N=this.startNode(),this.next(),this.type===k.parenL&&!this.allowDirectSuper&&this.raise(N.start,"super() call outside constructor of a subclass"),this.type!==k.dot&&this.type!==k.bracketL&&this.type!==k.parenL&&this.unexpected(),this.finishNode(N,"Super");case k._this:return N=this.startNode(),this.next(),this.finishNode(N,"ThisExpression");case k.name:var q=this.start,Ue=this.startLoc,ct=this.containsEsc,Lt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!ct&&Lt.name==="async"&&!this.canInsertSemicolon()&&this.eat(k._function))return this.parseFunction(this.startNodeAt(q,Ue),0,!1,!0);if(me&&!this.canInsertSemicolon()){if(this.eat(k.arrow))return this.parseArrowExpression(this.startNodeAt(q,Ue),[Lt],!1);if(this.options.ecmaVersion>=8&&Lt.name==="async"&&this.type===k.name&&!ct)return Lt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(k.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(q,Ue),[Lt],!0)}return Lt;case k.regexp:var hn=this.value;return N=this.parseLiteral(hn.value),N.regex={pattern:hn.pattern,flags:hn.flags},N;case k.num:case k.string:return this.parseLiteral(this.value);case k._null:case k._true:case k._false:return N=this.startNode(),N.value=this.type===k._null?null:this.type===k._true,N.raw=this.type.keyword,this.next(),this.finishNode(N,"Literal");case k.parenL:var on=this.start,nr=this.parseParenAndDistinguishExpression(me);return _&&(_.parenthesizedAssign<0&&!this.isSimpleAssignTarget(nr)&&(_.parenthesizedAssign=on),_.parenthesizedBind<0&&(_.parenthesizedBind=on)),nr;case k.bracketL:return N=this.startNode(),this.next(),N.elements=this.parseExprList(k.bracketR,!0,!0,_),this.finishNode(N,"ArrayExpression");case k.braceL:return this.parseObj(!1,_);case k._function:return N=this.startNode(),this.next(),this.parseFunction(N,0);case k._class:return this.parseClass(this.startNode(),!1);case k._new:return this.parseNew();case k.backQuote:return this.parseTemplate();case k._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},en.parseExprImport=function(){var _=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var N=this.parseIdent(!0);switch(this.type){case k.parenL:return this.parseDynamicImport(_);case k.dot:return _.meta=N,this.parseImportMeta(_);default:this.unexpected()}},en.parseDynamicImport=function(_){if(this.next(),_.source=this.parseMaybeAssign(),!this.eat(k.parenR)){var N=this.start;this.eat(k.comma)&&this.eat(k.parenR)?this.raiseRecoverable(N,"Trailing comma is not allowed in import()"):this.unexpected(N)}return this.finishNode(_,"ImportExpression")},en.parseImportMeta=function(_){this.next();var N=this.containsEsc;return _.property=this.parseIdent(!0),_.property.name!=="meta"&&this.raiseRecoverable(_.property.start,"The only valid meta property for import is 'import.meta'"),N&&this.raiseRecoverable(_.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(_.start,"Cannot use 'import.meta' outside a module"),this.finishNode(_,"MetaProperty")},en.parseLiteral=function(_){var N=this.startNode();return N.value=_,N.raw=this.input.slice(this.start,this.end),N.raw.charCodeAt(N.raw.length-1)===110&&(N.bigint=N.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(N,"Literal")},en.parseParenExpression=function(){this.expect(k.parenL);var _=this.parseExpression();return this.expect(k.parenR),_},en.parseParenAndDistinguishExpression=function(_){var N=this.start,me=this.startLoc,q,Ue=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var ct=this.start,Lt=this.startLoc,hn=[],on=!0,nr=!1,sr=new Y,ti=this.yieldPos,Fi=this.awaitPos,Ci;for(this.yieldPos=0,this.awaitPos=0;this.type!==k.parenR;)if(on?on=!1:this.expect(k.comma),Ue&&this.afterTrailingComma(k.parenR,!0)){nr=!0;break}else if(this.type===k.ellipsis){Ci=this.start,hn.push(this.parseParenItem(this.parseRestBinding())),this.type===k.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else hn.push(this.parseMaybeAssign(!1,sr,this.parseParenItem));var ta=this.start,Ni=this.startLoc;if(this.expect(k.parenR),_&&!this.canInsertSemicolon()&&this.eat(k.arrow))return this.checkPatternErrors(sr,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ti,this.awaitPos=Fi,this.parseParenArrowList(N,me,hn);(!hn.length||nr)&&this.unexpected(this.lastTokStart),Ci&&this.unexpected(Ci),this.checkExpressionErrors(sr,!0),this.yieldPos=ti||this.yieldPos,this.awaitPos=Fi||this.awaitPos,hn.length>1?(q=this.startNodeAt(ct,Lt),q.expressions=hn,this.finishNodeAt(q,"SequenceExpression",ta,Ni)):q=hn[0]}else q=this.parseParenExpression();if(this.options.preserveParens){var Oi=this.startNodeAt(N,me);return Oi.expression=q,this.finishNode(Oi,"ParenthesizedExpression")}else return q},en.parseParenItem=function(_){return _},en.parseParenArrowList=function(_,N,me){return this.parseArrowExpression(this.startNodeAt(_,N),me)};var wt=[];en.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var _=this.startNode(),N=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(k.dot)){_.meta=N;var me=this.containsEsc;return _.property=this.parseIdent(!0),_.property.name!=="target"&&this.raiseRecoverable(_.property.start,"The only valid meta property for new is 'new.target'"),me&&this.raiseRecoverable(_.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(_.start,"'new.target' can only be used in functions"),this.finishNode(_,"MetaProperty")}var q=this.start,Ue=this.startLoc,ct=this.type===k._import;return _.callee=this.parseSubscripts(this.parseExprAtom(),q,Ue,!0),ct&&_.callee.type==="ImportExpression"&&this.raise(q,"Cannot use new with import()"),this.eat(k.parenL)?_.arguments=this.parseExprList(k.parenR,this.options.ecmaVersion>=8,!1):_.arguments=wt,this.finishNode(_,"NewExpression")},en.parseTemplateElement=function(_){var N=_.isTagged,me=this.startNode();return this.type===k.invalidTemplate?(N||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),me.value={raw:this.value,cooked:null}):me.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),me.tail=this.type===k.backQuote,this.finishNode(me,"TemplateElement")},en.parseTemplate=function(_){_===void 0&&(_={});var N=_.isTagged;N===void 0&&(N=!1);var me=this.startNode();this.next(),me.expressions=[];var q=this.parseTemplateElement({isTagged:N});for(me.quasis=[q];!q.tail;)this.type===k.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(k.dollarBraceL),me.expressions.push(this.parseExpression()),this.expect(k.braceR),me.quasis.push(q=this.parseTemplateElement({isTagged:N}));return this.next(),this.finishNode(me,"TemplateLiteral")},en.isAsyncProp=function(_){return!_.computed&&_.key.type==="Identifier"&&_.key.name==="async"&&(this.type===k.name||this.type===k.num||this.type===k.string||this.type===k.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===k.star)&&!de.test(this.input.slice(this.lastTokEnd,this.start))},en.parseObj=function(_,N){var me=this.startNode(),q=!0,Ue={};for(me.properties=[],this.next();!this.eat(k.braceR);){if(q)q=!1;else if(this.expect(k.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(k.braceR))break;var ct=this.parseProperty(_,N);_||this.checkPropClash(ct,Ue,N),me.properties.push(ct)}return this.finishNode(me,_?"ObjectPattern":"ObjectExpression")},en.parseProperty=function(_,N){var me=this.startNode(),q,Ue,ct,Lt;if(this.options.ecmaVersion>=9&&this.eat(k.ellipsis))return _?(me.argument=this.parseIdent(!1),this.type===k.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(me,"RestElement")):(this.type===k.parenL&&N&&(N.parenthesizedAssign<0&&(N.parenthesizedAssign=this.start),N.parenthesizedBind<0&&(N.parenthesizedBind=this.start)),me.argument=this.parseMaybeAssign(!1,N),this.type===k.comma&&N&&N.trailingComma<0&&(N.trailingComma=this.start),this.finishNode(me,"SpreadElement"));this.options.ecmaVersion>=6&&(me.method=!1,me.shorthand=!1,(_||N)&&(ct=this.start,Lt=this.startLoc),_||(q=this.eat(k.star)));var hn=this.containsEsc;return this.parsePropertyName(me),!_&&!hn&&this.options.ecmaVersion>=8&&!q&&this.isAsyncProp(me)?(Ue=!0,q=this.options.ecmaVersion>=9&&this.eat(k.star),this.parsePropertyName(me,N)):Ue=!1,this.parsePropertyValue(me,_,q,Ue,ct,Lt,N,hn),this.finishNode(me,"Property")},en.parsePropertyValue=function(_,N,me,q,Ue,ct,Lt,hn){if((me||q)&&this.type===k.colon&&this.unexpected(),this.eat(k.colon))_.value=N?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Lt),_.kind="init";else if(this.options.ecmaVersion>=6&&this.type===k.parenL)N&&this.unexpected(),_.kind="init",_.method=!0,_.value=this.parseMethod(me,q);else if(!N&&!hn&&this.options.ecmaVersion>=5&&!_.computed&&_.key.type==="Identifier"&&(_.key.name==="get"||_.key.name==="set")&&this.type!==k.comma&&this.type!==k.braceR&&this.type!==k.eq){(me||q)&&this.unexpected(),_.kind=_.key.name,this.parsePropertyName(_),_.value=this.parseMethod(!1);var on=_.kind==="get"?0:1;if(_.value.params.length!==on){var nr=_.value.start;_.kind==="get"?this.raiseRecoverable(nr,"getter should have no params"):this.raiseRecoverable(nr,"setter should have exactly one param")}else _.kind==="set"&&_.value.params[0].type==="RestElement"&&this.raiseRecoverable(_.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!_.computed&&_.key.type==="Identifier"?((me||q)&&this.unexpected(),this.checkUnreserved(_.key),_.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ue),_.kind="init",N?_.value=this.parseMaybeDefault(Ue,ct,_.key):this.type===k.eq&&Lt?(Lt.shorthandAssign<0&&(Lt.shorthandAssign=this.start),_.value=this.parseMaybeDefault(Ue,ct,_.key)):_.value=_.key,_.shorthand=!0):this.unexpected()},en.parsePropertyName=function(_){if(this.options.ecmaVersion>=6){if(this.eat(k.bracketL))return _.computed=!0,_.key=this.parseMaybeAssign(),this.expect(k.bracketR),_.key;_.computed=!1}return _.key=this.type===k.num||this.type===k.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},en.initFunction=function(_){_.id=null,this.options.ecmaVersion>=6&&(_.generator=_.expression=!1),this.options.ecmaVersion>=8&&(_.async=!1)},en.parseMethod=function(_,N,me){var q=this.startNode(),Ue=this.yieldPos,ct=this.awaitPos,Lt=this.awaitIdentPos;return this.initFunction(q),this.options.ecmaVersion>=6&&(q.generator=_),this.options.ecmaVersion>=8&&(q.async=!!N),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Yt(N,q.generator)|Un|(me?We:0)),this.expect(k.parenL),q.params=this.parseBindingList(k.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(q,!1,!0),this.yieldPos=Ue,this.awaitPos=ct,this.awaitIdentPos=Lt,this.finishNode(q,"FunctionExpression")},en.parseArrowExpression=function(_,N,me){var q=this.yieldPos,Ue=this.awaitPos,ct=this.awaitIdentPos;return this.enterScope(Yt(me,!1)|xt),this.initFunction(_),this.options.ecmaVersion>=8&&(_.async=!!me),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,_.params=this.toAssignableList(N,!0),this.parseFunctionBody(_,!0,!1),this.yieldPos=q,this.awaitPos=Ue,this.awaitIdentPos=ct,this.finishNode(_,"ArrowFunctionExpression")},en.parseFunctionBody=function(_,N,me){var q=N&&this.type!==k.braceL,Ue=this.strict,ct=!1;if(q)_.body=this.parseMaybeAssign(),_.expression=!0,this.checkParams(_,!1);else{var Lt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(_.params);(!Ue||Lt)&&(ct=this.strictDirective(this.end),ct&&Lt&&this.raiseRecoverable(_.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var hn=this.labels;this.labels=[],ct&&(this.strict=!0),this.checkParams(_,!Ue&&!ct&&!N&&!me&&this.isSimpleParamList(_.params)),this.strict&&_.id&&this.checkLVal(_.id,ne),_.body=this.parseBlock(!1,void 0,ct&&!Ue),_.expression=!1,this.adaptDirectivePrologue(_.body.body),this.labels=hn}this.exitScope()},en.isSimpleParamList=function(_){for(var N=0,me=_;N<me.length;N+=1){var q=me[N];if(q.type!=="Identifier")return!1}return!0},en.checkParams=function(_,N){for(var me={},q=0,Ue=_.params;q<Ue.length;q+=1){var ct=Ue[q];this.checkLVal(ct,Pe,N?null:me)}},en.parseExprList=function(_,N,me,q){for(var Ue=[],ct=!0;!this.eat(_);){if(ct)ct=!1;else if(this.expect(k.comma),N&&this.afterTrailingComma(_))break;var Lt=void 0;me&&this.type===k.comma?Lt=null:this.type===k.ellipsis?(Lt=this.parseSpread(q),q&&this.type===k.comma&&q.trailingComma<0&&(q.trailingComma=this.start)):Lt=this.parseMaybeAssign(!1,q),Ue.push(Lt)}return Ue},en.checkUnreserved=function(_){var N=_.start,me=_.end,q=_.name;if(this.inGenerator&&q==="yield"&&this.raiseRecoverable(N,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&q==="await"&&this.raiseRecoverable(N,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(q)&&this.raise(N,"Unexpected keyword '"+q+"'"),!(this.options.ecmaVersion<6&&this.input.slice(N,me).indexOf("\\")!==-1)){var Ue=this.strict?this.reservedWordsStrict:this.reservedWords;Ue.test(q)&&(!this.inAsync&&q==="await"&&this.raiseRecoverable(N,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(N,"The keyword '"+q+"' is reserved"))}},en.parseIdent=function(_,N){var me=this.startNode();return this.type===k.name?me.name=this.value:this.type.keyword?(me.name=this.type.keyword,(me.name==="class"||me.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!_),this.finishNode(me,"Identifier"),_||(this.checkUnreserved(me),me.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=me.start)),me},en.parseYield=function(_){this.yieldPos||(this.yieldPos=this.start);var N=this.startNode();return this.next(),this.type===k.semi||this.canInsertSemicolon()||this.type!==k.star&&!this.type.startsExpr?(N.delegate=!1,N.argument=null):(N.delegate=this.eat(k.star),N.argument=this.parseMaybeAssign(_)),this.finishNode(N,"YieldExpression")},en.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var _=this.startNode();return this.next(),_.argument=this.parseMaybeUnary(null,!1),this.finishNode(_,"AwaitExpression")};var Mn=_e.prototype;Mn.raise=function(_,N){var me=Se(this.input,_);N+=" ("+me.line+":"+me.column+")";var q=new SyntaxError(N);throw q.pos=_,q.loc=me,q.raisedAt=this.pos,q},Mn.raiseRecoverable=Mn.raise,Mn.curPosition=function(){if(this.options.locations)return new K(this.curLine,this.pos-this.lineStart)};var kn=_e.prototype,jn=function(N){this.flags=N,this.var=[],this.lexical=[],this.functions=[]};kn.enterScope=function(_){this.scopeStack.push(new jn(_))},kn.exitScope=function(){this.scopeStack.pop()},kn.treatFunctionsAsVarInScope=function(_){return _.flags&pn||!this.inModule&&_.flags&Gt},kn.declareName=function(_,N,me){var q=!1;if(N===ze){var Ue=this.currentScope();q=Ue.lexical.indexOf(_)>-1||Ue.functions.indexOf(_)>-1||Ue.var.indexOf(_)>-1,Ue.lexical.push(_),this.inModule&&Ue.flags&Gt&&delete this.undefinedExports[_]}else if(N===P){var ct=this.currentScope();ct.lexical.push(_)}else if(N===ht){var Lt=this.currentScope();this.treatFunctionsAsVar?q=Lt.lexical.indexOf(_)>-1:q=Lt.lexical.indexOf(_)>-1||Lt.var.indexOf(_)>-1,Lt.functions.push(_)}else for(var hn=this.scopeStack.length-1;hn>=0;--hn){var on=this.scopeStack[hn];if(on.lexical.indexOf(_)>-1&&!(on.flags&tn&&on.lexical[0]===_)||!this.treatFunctionsAsVarInScope(on)&&on.functions.indexOf(_)>-1){q=!0;break}if(on.var.push(_),this.inModule&&on.flags&Gt&&delete this.undefinedExports[_],on.flags&$n)break}q&&this.raiseRecoverable(me,"Identifier '"+_+"' has already been declared")},kn.checkLocalExport=function(_){this.scopeStack[0].lexical.indexOf(_.name)===-1&&this.scopeStack[0].var.indexOf(_.name)===-1&&(this.undefinedExports[_.name]=_)},kn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},kn.currentVarScope=function(){for(var _=this.scopeStack.length-1;;_--){var N=this.scopeStack[_];if(N.flags&$n)return N}},kn.currentThisScope=function(){for(var _=this.scopeStack.length-1;;_--){var N=this.scopeStack[_];if(N.flags&$n&&!(N.flags&xt))return N}};var mn=function(N,me,q){this.type="",this.start=me,this.end=0,N.options.locations&&(this.loc=new he(N,q)),N.options.directSourceFile&&(this.sourceFile=N.options.directSourceFile),N.options.ranges&&(this.range=[me,0])},cr=_e.prototype;cr.startNode=function(){return new mn(this,this.start,this.startLoc)},cr.startNodeAt=function(_,N){return new mn(this,_,N)};function Cr(_,N,me,q){return _.type=N,_.end=me,this.options.locations&&(_.loc.end=q),this.options.ranges&&(_.range[1]=me),_}cr.finishNode=function(_,N){return Cr.call(this,_,N,this.lastTokEnd,this.lastTokEndLoc)},cr.finishNodeAt=function(_,N,me,q){return Cr.call(this,_,N,me,q)};var mi=function(N,me,q,Ue,ct){this.token=N,this.isExpr=!!me,this.preserveSpace=!!q,this.override=Ue,this.generator=!!ct},$r={b_stat:new mi("{",!1),b_expr:new mi("{",!0),b_tmpl:new mi("${",!1),p_stat:new mi("(",!1),p_expr:new mi("(",!0),q_tmpl:new mi("`",!0,!0,function(_){return _.tryReadTemplateToken()}),f_stat:new mi("function",!1),f_expr:new mi("function",!0),f_expr_gen:new mi("function",!0,!1,null,!0),f_gen:new mi("function",!1,!1,null,!0)},Sr=_e.prototype;Sr.initialContext=function(){return[$r.b_stat]},Sr.braceIsBlock=function(_){var N=this.curContext();return N===$r.f_expr||N===$r.f_stat?!0:_===k.colon&&(N===$r.b_stat||N===$r.b_expr)?!N.isExpr:_===k._return||_===k.name&&this.exprAllowed?de.test(this.input.slice(this.lastTokEnd,this.start)):_===k._else||_===k.semi||_===k.eof||_===k.parenR||_===k.arrow?!0:_===k.braceL?N===$r.b_stat:_===k._var||_===k._const||_===k.name?!1:!this.exprAllowed},Sr.inGeneratorContext=function(){for(var _=this.context.length-1;_>=1;_--){var N=this.context[_];if(N.token==="function")return N.generator}return!1},Sr.updateContext=function(_){var N,me=this.type;me.keyword&&_===k.dot?this.exprAllowed=!1:(N=me.updateContext)?N.call(this,_):this.exprAllowed=me.beforeExpr},k.parenR.updateContext=k.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var _=this.context.pop();_===$r.b_stat&&this.curContext().token==="function"&&(_=this.context.pop()),this.exprAllowed=!_.isExpr},k.braceL.updateContext=function(_){this.context.push(this.braceIsBlock(_)?$r.b_stat:$r.b_expr),this.exprAllowed=!0},k.dollarBraceL.updateContext=function(){this.context.push($r.b_tmpl),this.exprAllowed=!0},k.parenL.updateContext=function(_){var N=_===k._if||_===k._for||_===k._with||_===k._while;this.context.push(N?$r.p_stat:$r.p_expr),this.exprAllowed=!0},k.incDec.updateContext=function(){},k._function.updateContext=k._class.updateContext=function(_){_.beforeExpr&&_!==k.semi&&_!==k._else&&!(_===k._return&&de.test(this.input.slice(this.lastTokEnd,this.start)))&&!((_===k.colon||_===k.braceL)&&this.curContext()===$r.b_stat)?this.context.push($r.f_expr):this.context.push($r.f_stat),this.exprAllowed=!1},k.backQuote.updateContext=function(){this.curContext()===$r.q_tmpl?this.context.pop():this.context.push($r.q_tmpl),this.exprAllowed=!1},k.star.updateContext=function(_){if(_===k._function){var N=this.context.length-1;this.context[N]===$r.f_expr?this.context[N]=$r.f_expr_gen:this.context[N]=$r.f_gen}this.exprAllowed=!0},k.name.updateContext=function(_){var N=!1;this.options.ecmaVersion>=6&&_!==k.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(N=!0),this.exprAllowed=N};var dr="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Pr=dr+" Extended_Pictographic",Hr=Pr,Xi={9:dr,10:Pr,11:Hr},Kn="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Gn="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",pt=Gn+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ha=pt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Sa={9:Gn,10:pt,11:Ha},Qa={};function ma(_){var N=Qa[_]={binary:ae(Xi[_]+" "+Kn),nonBinary:{General_Category:ae(Kn),Script:ae(Sa[_])}};N.nonBinary.Script_Extensions=N.nonBinary.Script,N.nonBinary.gc=N.nonBinary.General_Category,N.nonBinary.sc=N.nonBinary.Script,N.nonBinary.scx=N.nonBinary.Script_Extensions}ma(9),ma(10),ma(11);var Ei=_e.prototype,Ia=function(N){this.parser=N,this.validFlags="gim"+(N.options.ecmaVersion>=6?"uy":"")+(N.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Qa[N.options.ecmaVersion>=11?11:N.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ia.prototype.reset=function(N,me,q){var Ue=q.indexOf("u")!==-1;this.start=N|0,this.source=me+"",this.flags=q,this.switchU=Ue&&this.parser.options.ecmaVersion>=6,this.switchN=Ue&&this.parser.options.ecmaVersion>=9},Ia.prototype.raise=function(N){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+N)},Ia.prototype.at=function(N,me){me===void 0&&(me=!1);var q=this.source,Ue=q.length;if(N>=Ue)return-1;var ct=q.charCodeAt(N);if(!(me||this.switchU)||ct<=55295||ct>=57344||N+1>=Ue)return ct;var Lt=q.charCodeAt(N+1);return Lt>=56320&&Lt<=57343?(ct<<10)+Lt-56613888:ct},Ia.prototype.nextIndex=function(N,me){me===void 0&&(me=!1);var q=this.source,Ue=q.length;if(N>=Ue)return Ue;var ct=q.charCodeAt(N),Lt;return!(me||this.switchU)||ct<=55295||ct>=57344||N+1>=Ue||(Lt=q.charCodeAt(N+1))<56320||Lt>57343?N+1:N+2},Ia.prototype.current=function(N){return N===void 0&&(N=!1),this.at(this.pos,N)},Ia.prototype.lookahead=function(N){return N===void 0&&(N=!1),this.at(this.nextIndex(this.pos,N),N)},Ia.prototype.advance=function(N){N===void 0&&(N=!1),this.pos=this.nextIndex(this.pos,N)},Ia.prototype.eat=function(N,me){return me===void 0&&(me=!1),this.current(me)===N?(this.advance(me),!0):!1};function si(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}Ei.validateRegExpFlags=function(_){for(var N=_.validFlags,me=_.flags,q=0;q<me.length;q++){var Ue=me.charAt(q);N.indexOf(Ue)===-1&&this.raise(_.start,"Invalid regular expression flag"),me.indexOf(Ue,q+1)>-1&&this.raise(_.start,"Duplicate regular expression flag")}},Ei.validateRegExpPattern=function(_){this.regexp_pattern(_),!_.switchN&&this.options.ecmaVersion>=9&&_.groupNames.length>0&&(_.switchN=!0,this.regexp_pattern(_))},Ei.regexp_pattern=function(_){_.pos=0,_.lastIntValue=0,_.lastStringValue="",_.lastAssertionIsQuantifiable=!1,_.numCapturingParens=0,_.maxBackReference=0,_.groupNames.length=0,_.backReferenceNames.length=0,this.regexp_disjunction(_),_.pos!==_.source.length&&(_.eat(41)&&_.raise("Unmatched ')'"),(_.eat(93)||_.eat(125))&&_.raise("Lone quantifier brackets")),_.maxBackReference>_.numCapturingParens&&_.raise("Invalid escape");for(var N=0,me=_.backReferenceNames;N<me.length;N+=1){var q=me[N];_.groupNames.indexOf(q)===-1&&_.raise("Invalid named capture referenced")}},Ei.regexp_disjunction=function(_){for(this.regexp_alternative(_);_.eat(124);)this.regexp_alternative(_);this.regexp_eatQuantifier(_,!0)&&_.raise("Nothing to repeat"),_.eat(123)&&_.raise("Lone quantifier brackets")},Ei.regexp_alternative=function(_){for(;_.pos<_.source.length&&this.regexp_eatTerm(_););},Ei.regexp_eatTerm=function(_){return this.regexp_eatAssertion(_)?(_.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(_)&&_.switchU&&_.raise("Invalid quantifier"),!0):(_.switchU?this.regexp_eatAtom(_):this.regexp_eatExtendedAtom(_))?(this.regexp_eatQuantifier(_),!0):!1},Ei.regexp_eatAssertion=function(_){var N=_.pos;if(_.lastAssertionIsQuantifiable=!1,_.eat(94)||_.eat(36))return!0;if(_.eat(92)){if(_.eat(66)||_.eat(98))return!0;_.pos=N}if(_.eat(40)&&_.eat(63)){var me=!1;if(this.options.ecmaVersion>=9&&(me=_.eat(60)),_.eat(61)||_.eat(33))return this.regexp_disjunction(_),_.eat(41)||_.raise("Unterminated group"),_.lastAssertionIsQuantifiable=!me,!0}return _.pos=N,!1},Ei.regexp_eatQuantifier=function(_,N){return N===void 0&&(N=!1),this.regexp_eatQuantifierPrefix(_,N)?(_.eat(63),!0):!1},Ei.regexp_eatQuantifierPrefix=function(_,N){return _.eat(42)||_.eat(43)||_.eat(63)||this.regexp_eatBracedQuantifier(_,N)},Ei.regexp_eatBracedQuantifier=function(_,N){var me=_.pos;if(_.eat(123)){var q=0,Ue=-1;if(this.regexp_eatDecimalDigits(_)&&(q=_.lastIntValue,_.eat(44)&&this.regexp_eatDecimalDigits(_)&&(Ue=_.lastIntValue),_.eat(125)))return Ue!==-1&&Ue<q&&!N&&_.raise("numbers out of order in {} quantifier"),!0;_.switchU&&!N&&_.raise("Incomplete quantifier"),_.pos=me}return!1},Ei.regexp_eatAtom=function(_){return this.regexp_eatPatternCharacters(_)||_.eat(46)||this.regexp_eatReverseSolidusAtomEscape(_)||this.regexp_eatCharacterClass(_)||this.regexp_eatUncapturingGroup(_)||this.regexp_eatCapturingGroup(_)},Ei.regexp_eatReverseSolidusAtomEscape=function(_){var N=_.pos;if(_.eat(92)){if(this.regexp_eatAtomEscape(_))return!0;_.pos=N}return!1},Ei.regexp_eatUncapturingGroup=function(_){var N=_.pos;if(_.eat(40)){if(_.eat(63)&&_.eat(58)){if(this.regexp_disjunction(_),_.eat(41))return!0;_.raise("Unterminated group")}_.pos=N}return!1},Ei.regexp_eatCapturingGroup=function(_){if(_.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(_):_.current()===63&&_.raise("Invalid group"),this.regexp_disjunction(_),_.eat(41))return _.numCapturingParens+=1,!0;_.raise("Unterminated group")}return!1},Ei.regexp_eatExtendedAtom=function(_){return _.eat(46)||this.regexp_eatReverseSolidusAtomEscape(_)||this.regexp_eatCharacterClass(_)||this.regexp_eatUncapturingGroup(_)||this.regexp_eatCapturingGroup(_)||this.regexp_eatInvalidBracedQuantifier(_)||this.regexp_eatExtendedPatternCharacter(_)},Ei.regexp_eatInvalidBracedQuantifier=function(_){return this.regexp_eatBracedQuantifier(_,!0)&&_.raise("Nothing to repeat"),!1},Ei.regexp_eatSyntaxCharacter=function(_){var N=_.current();return it(N)?(_.lastIntValue=N,_.advance(),!0):!1};function it(_){return _===36||_>=40&&_<=43||_===46||_===63||_>=91&&_<=94||_>=123&&_<=125}Ei.regexp_eatPatternCharacters=function(_){for(var N=_.pos,me=0;(me=_.current())!==-1&&!it(me);)_.advance();return _.pos!==N},Ei.regexp_eatExtendedPatternCharacter=function(_){var N=_.current();return N!==-1&&N!==36&&!(N>=40&&N<=43)&&N!==46&&N!==63&&N!==91&&N!==94&&N!==124?(_.advance(),!0):!1},Ei.regexp_groupSpecifier=function(_){if(_.eat(63)){if(this.regexp_eatGroupName(_)){_.groupNames.indexOf(_.lastStringValue)!==-1&&_.raise("Duplicate capture group name"),_.groupNames.push(_.lastStringValue);return}_.raise("Invalid group")}},Ei.regexp_eatGroupName=function(_){if(_.lastStringValue="",_.eat(60)){if(this.regexp_eatRegExpIdentifierName(_)&&_.eat(62))return!0;_.raise("Invalid capture group name")}return!1},Ei.regexp_eatRegExpIdentifierName=function(_){if(_.lastStringValue="",this.regexp_eatRegExpIdentifierStart(_)){for(_.lastStringValue+=si(_.lastIntValue);this.regexp_eatRegExpIdentifierPart(_);)_.lastStringValue+=si(_.lastIntValue);return!0}return!1},Ei.regexp_eatRegExpIdentifierStart=function(_){var N=_.pos,me=this.options.ecmaVersion>=11,q=_.current(me);return _.advance(me),q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(_,me)&&(q=_.lastIntValue),Qn(q)?(_.lastIntValue=q,!0):(_.pos=N,!1)};function Qn(_){return b(_,!0)||_===36||_===95}Ei.regexp_eatRegExpIdentifierPart=function(_){var N=_.pos,me=this.options.ecmaVersion>=11,q=_.current(me);return _.advance(me),q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(_,me)&&(q=_.lastIntValue),pe(q)?(_.lastIntValue=q,!0):(_.pos=N,!1)};function pe(_){return A(_,!0)||_===36||_===95||_===8204||_===8205}Ei.regexp_eatAtomEscape=function(_){return this.regexp_eatBackReference(_)||this.regexp_eatCharacterClassEscape(_)||this.regexp_eatCharacterEscape(_)||_.switchN&&this.regexp_eatKGroupName(_)?!0:(_.switchU&&(_.current()===99&&_.raise("Invalid unicode escape"),_.raise("Invalid escape")),!1)},Ei.regexp_eatBackReference=function(_){var N=_.pos;if(this.regexp_eatDecimalEscape(_)){var me=_.lastIntValue;if(_.switchU)return me>_.maxBackReference&&(_.maxBackReference=me),!0;if(me<=_.numCapturingParens)return!0;_.pos=N}return!1},Ei.regexp_eatKGroupName=function(_){if(_.eat(107)){if(this.regexp_eatGroupName(_))return _.backReferenceNames.push(_.lastStringValue),!0;_.raise("Invalid named reference")}return!1},Ei.regexp_eatCharacterEscape=function(_){return this.regexp_eatControlEscape(_)||this.regexp_eatCControlLetter(_)||this.regexp_eatZero(_)||this.regexp_eatHexEscapeSequence(_)||this.regexp_eatRegExpUnicodeEscapeSequence(_,!1)||!_.switchU&&this.regexp_eatLegacyOctalEscapeSequence(_)||this.regexp_eatIdentityEscape(_)},Ei.regexp_eatCControlLetter=function(_){var N=_.pos;if(_.eat(99)){if(this.regexp_eatControlLetter(_))return!0;_.pos=N}return!1},Ei.regexp_eatZero=function(_){return _.current()===48&&!ar(_.lookahead())?(_.lastIntValue=0,_.advance(),!0):!1},Ei.regexp_eatControlEscape=function(_){var N=_.current();return N===116?(_.lastIntValue=9,_.advance(),!0):N===110?(_.lastIntValue=10,_.advance(),!0):N===118?(_.lastIntValue=11,_.advance(),!0):N===102?(_.lastIntValue=12,_.advance(),!0):N===114?(_.lastIntValue=13,_.advance(),!0):!1},Ei.regexp_eatControlLetter=function(_){var N=_.current();return at(N)?(_.lastIntValue=N%32,_.advance(),!0):!1};function at(_){return _>=65&&_<=90||_>=97&&_<=122}Ei.regexp_eatRegExpUnicodeEscapeSequence=function(_,N){N===void 0&&(N=!1);var me=_.pos,q=N||_.switchU;if(_.eat(117)){if(this.regexp_eatFixedHexDigits(_,4)){var Ue=_.lastIntValue;if(q&&Ue>=55296&&Ue<=56319){var ct=_.pos;if(_.eat(92)&&_.eat(117)&&this.regexp_eatFixedHexDigits(_,4)){var Lt=_.lastIntValue;if(Lt>=56320&&Lt<=57343)return _.lastIntValue=(Ue-55296)*1024+(Lt-56320)+65536,!0}_.pos=ct,_.lastIntValue=Ue}return!0}if(q&&_.eat(123)&&this.regexp_eatHexDigits(_)&&_.eat(125)&&Dt(_.lastIntValue))return!0;q&&_.raise("Invalid unicode escape"),_.pos=me}return!1};function Dt(_){return _>=0&&_<=1114111}Ei.regexp_eatIdentityEscape=function(_){if(_.switchU)return this.regexp_eatSyntaxCharacter(_)?!0:_.eat(47)?(_.lastIntValue=47,!0):!1;var N=_.current();return N!==99&&(!_.switchN||N!==107)?(_.lastIntValue=N,_.advance(),!0):!1},Ei.regexp_eatDecimalEscape=function(_){_.lastIntValue=0;var N=_.current();if(N>=49&&N<=57){do _.lastIntValue=10*_.lastIntValue+(N-48),_.advance();while((N=_.current())>=48&&N<=57);return!0}return!1},Ei.regexp_eatCharacterClassEscape=function(_){var N=_.current();if(vn(N))return _.lastIntValue=-1,_.advance(),!0;if(_.switchU&&this.options.ecmaVersion>=9&&(N===80||N===112)){if(_.lastIntValue=-1,_.advance(),_.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(_)&&_.eat(125))return!0;_.raise("Invalid property name")}return!1};function vn(_){return _===100||_===68||_===115||_===83||_===119||_===87}Ei.regexp_eatUnicodePropertyValueExpression=function(_){var N=_.pos;if(this.regexp_eatUnicodePropertyName(_)&&_.eat(61)){var me=_.lastStringValue;if(this.regexp_eatUnicodePropertyValue(_)){var q=_.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(_,me,q),!0}}if(_.pos=N,this.regexp_eatLoneUnicodePropertyNameOrValue(_)){var Ue=_.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(_,Ue),!0}return!1},Ei.regexp_validateUnicodePropertyNameAndValue=function(_,N,me){ie(_.unicodeProperties.nonBinary,N)||_.raise("Invalid property name"),_.unicodeProperties.nonBinary[N].test(me)||_.raise("Invalid property value")},Ei.regexp_validateUnicodePropertyNameOrValue=function(_,N){_.unicodeProperties.binary.test(N)||_.raise("Invalid property name")},Ei.regexp_eatUnicodePropertyName=function(_){var N=0;for(_.lastStringValue="";bn(N=_.current());)_.lastStringValue+=si(N),_.advance();return _.lastStringValue!==""};function bn(_){return at(_)||_===95}Ei.regexp_eatUnicodePropertyValue=function(_){var N=0;for(_.lastStringValue="";Pn(N=_.current());)_.lastStringValue+=si(N),_.advance();return _.lastStringValue!==""};function Pn(_){return bn(_)||ar(_)}Ei.regexp_eatLoneUnicodePropertyNameOrValue=function(_){return this.regexp_eatUnicodePropertyValue(_)},Ei.regexp_eatCharacterClass=function(_){if(_.eat(91)){if(_.eat(94),this.regexp_classRanges(_),_.eat(93))return!0;_.raise("Unterminated character class")}return!1},Ei.regexp_classRanges=function(_){for(;this.regexp_eatClassAtom(_);){var N=_.lastIntValue;if(_.eat(45)&&this.regexp_eatClassAtom(_)){var me=_.lastIntValue;_.switchU&&(N===-1||me===-1)&&_.raise("Invalid character class"),N!==-1&&me!==-1&&N>me&&_.raise("Range out of order in character class")}}},Ei.regexp_eatClassAtom=function(_){var N=_.pos;if(_.eat(92)){if(this.regexp_eatClassEscape(_))return!0;if(_.switchU){var me=_.current();(me===99||ui(me))&&_.raise("Invalid class escape"),_.raise("Invalid escape")}_.pos=N}var q=_.current();return q!==93?(_.lastIntValue=q,_.advance(),!0):!1},Ei.regexp_eatClassEscape=function(_){var N=_.pos;if(_.eat(98))return _.lastIntValue=8,!0;if(_.switchU&&_.eat(45))return _.lastIntValue=45,!0;if(!_.switchU&&_.eat(99)){if(this.regexp_eatClassControlLetter(_))return!0;_.pos=N}return this.regexp_eatCharacterClassEscape(_)||this.regexp_eatCharacterEscape(_)},Ei.regexp_eatClassControlLetter=function(_){var N=_.current();return ar(N)||N===95?(_.lastIntValue=N%32,_.advance(),!0):!1},Ei.regexp_eatHexEscapeSequence=function(_){var N=_.pos;if(_.eat(120)){if(this.regexp_eatFixedHexDigits(_,2))return!0;_.switchU&&_.raise("Invalid escape"),_.pos=N}return!1},Ei.regexp_eatDecimalDigits=function(_){var N=_.pos,me=0;for(_.lastIntValue=0;ar(me=_.current());)_.lastIntValue=10*_.lastIntValue+(me-48),_.advance();return _.pos!==N};function ar(_){return _>=48&&_<=57}Ei.regexp_eatHexDigits=function(_){var N=_.pos,me=0;for(_.lastIntValue=0;Zr(me=_.current());)_.lastIntValue=16*_.lastIntValue+Xr(me),_.advance();return _.pos!==N};function Zr(_){return _>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102}function Xr(_){return _>=65&&_<=70?10+(_-65):_>=97&&_<=102?10+(_-97):_-48}Ei.regexp_eatLegacyOctalEscapeSequence=function(_){if(this.regexp_eatOctalDigit(_)){var N=_.lastIntValue;if(this.regexp_eatOctalDigit(_)){var me=_.lastIntValue;N<=3&&this.regexp_eatOctalDigit(_)?_.lastIntValue=N*64+me*8+_.lastIntValue:_.lastIntValue=N*8+me}else _.lastIntValue=N;return!0}return!1},Ei.regexp_eatOctalDigit=function(_){var N=_.current();return ui(N)?(_.lastIntValue=N-48,_.advance(),!0):(_.lastIntValue=0,!1)};function ui(_){return _>=48&&_<=55}Ei.regexp_eatFixedHexDigits=function(_,N){var me=_.pos;_.lastIntValue=0;for(var q=0;q<N;++q){var Ue=_.current();if(!Zr(Ue))return _.pos=me,!1;_.lastIntValue=16*_.lastIntValue+Xr(Ue),_.advance()}return!0};var qr=function(N){this.type=N.type,this.value=N.value,this.start=N.start,this.end=N.end,N.options.locations&&(this.loc=new he(N,N.startLoc,N.endLoc)),N.options.ranges&&(this.range=[N.start,N.end])},Ti=_e.prototype;Ti.next=function(_){!_&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ti.getToken=function(){return this.next(),new qr(this)},typeof Symbol!="undefined"&&(Ti[Symbol.iterator]=function(){var _=this;return{next:function(){var N=_.getToken();return{done:N.type===k.eof,value:N}}}}),Ti.curContext=function(){return this.context[this.context.length-1]},Ti.nextToken=function(){var _=this.curContext();if((!_||!_.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(k.eof);if(_.override)return _.override(this);this.readToken(this.fullCharCodeAtPos())},Ti.readToken=function(_){return b(_,this.options.ecmaVersion>=6)||_===92?this.readWord():this.getTokenFromCode(_)},Ti.fullCharCodeAtPos=function(){var _=this.input.charCodeAt(this.pos);if(_<=55295||_>=57344)return _;var N=this.input.charCodeAt(this.pos+1);return(_<<10)+N-56613888},Ti.skipBlockComment=function(){var _=this.options.onComment&&this.curPosition(),N=this.pos,me=this.input.indexOf("*/",this.pos+=2);if(me===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=me+2,this.options.locations){H.lastIndex=N;for(var q;(q=H.exec(this.input))&&q.index<this.pos;)++this.curLine,this.lineStart=q.index+q[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(N+2,me),N,this.pos,_,this.curPosition())},Ti.skipLineComment=function(_){for(var N=this.pos,me=this.options.onComment&&this.curPosition(),q=this.input.charCodeAt(this.pos+=_);this.pos<this.input.length&&!ue(q);)q=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(N+_,this.pos),N,this.pos,me,this.curPosition())},Ti.skipSpace=function(){e:for(;this.pos<this.input.length;){var _=this.input.charCodeAt(this.pos);switch(_){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(_>8&&_<14||_>=5760&&ve.test(String.fromCharCode(_)))++this.pos;else break e}}},Ti.finishToken=function(_,N){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var me=this.type;this.type=_,this.value=N,this.updateContext(me)},Ti.readToken_dot=function(){var _=this.input.charCodeAt(this.pos+1);if(_>=48&&_<=57)return this.readNumber(!0);var N=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&_===46&&N===46?(this.pos+=3,this.finishToken(k.ellipsis)):(++this.pos,this.finishToken(k.dot))},Ti.readToken_slash=function(){var _=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):_===61?this.finishOp(k.assign,2):this.finishOp(k.slash,1)},Ti.readToken_mult_modulo_exp=function(_){var N=this.input.charCodeAt(this.pos+1),me=1,q=_===42?k.star:k.modulo;return this.options.ecmaVersion>=7&&_===42&&N===42&&(++me,q=k.starstar,N=this.input.charCodeAt(this.pos+2)),N===61?this.finishOp(k.assign,me+1):this.finishOp(q,me)},Ti.readToken_pipe_amp=function(_){var N=this.input.charCodeAt(this.pos+1);if(N===_){if(this.options.ecmaVersion>=12){var me=this.input.charCodeAt(this.pos+2);if(me===61)return this.finishOp(k.assign,3)}return this.finishOp(_===124?k.logicalOR:k.logicalAND,2)}return N===61?this.finishOp(k.assign,2):this.finishOp(_===124?k.bitwiseOR:k.bitwiseAND,1)},Ti.readToken_caret=function(){var _=this.input.charCodeAt(this.pos+1);return _===61?this.finishOp(k.assign,2):this.finishOp(k.bitwiseXOR,1)},Ti.readToken_plus_min=function(_){var N=this.input.charCodeAt(this.pos+1);return N===_?N===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||de.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(k.incDec,2):N===61?this.finishOp(k.assign,2):this.finishOp(k.plusMin,1)},Ti.readToken_lt_gt=function(_){var N=this.input.charCodeAt(this.pos+1),me=1;return N===_?(me=_===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+me)===61?this.finishOp(k.assign,me+1):this.finishOp(k.bitShift,me)):N===33&&_===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(N===61&&(me=2),this.finishOp(k.relational,me))},Ti.readToken_eq_excl=function(_){var N=this.input.charCodeAt(this.pos+1);return N===61?this.finishOp(k.equality,this.input.charCodeAt(this.pos+2)===61?3:2):_===61&&N===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(k.arrow)):this.finishOp(_===61?k.eq:k.prefix,1)},Ti.readToken_question=function(){var _=this.options.ecmaVersion;if(_>=11){var N=this.input.charCodeAt(this.pos+1);if(N===46){var me=this.input.charCodeAt(this.pos+2);if(me<48||me>57)return this.finishOp(k.questionDot,2)}if(N===63){if(_>=12){var q=this.input.charCodeAt(this.pos+2);if(q===61)return this.finishOp(k.assign,3)}return this.finishOp(k.coalesce,2)}}return this.finishOp(k.question,1)},Ti.getTokenFromCode=function(_){switch(_){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(k.parenL);case 41:return++this.pos,this.finishToken(k.parenR);case 59:return++this.pos,this.finishToken(k.semi);case 44:return++this.pos,this.finishToken(k.comma);case 91:return++this.pos,this.finishToken(k.bracketL);case 93:return++this.pos,this.finishToken(k.bracketR);case 123:return++this.pos,this.finishToken(k.braceL);case 125:return++this.pos,this.finishToken(k.braceR);case 58:return++this.pos,this.finishToken(k.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(k.backQuote);case 48:var N=this.input.charCodeAt(this.pos+1);if(N===120||N===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(N===111||N===79)return this.readRadixNumber(8);if(N===98||N===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(_);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(_);case 124:case 38:return this.readToken_pipe_amp(_);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(_);case 60:case 62:return this.readToken_lt_gt(_);case 61:case 33:return this.readToken_eq_excl(_);case 63:return this.readToken_question();case 126:return this.finishOp(k.prefix,1)}this.raise(this.pos,"Unexpected character '"+Li(_)+"'")},Ti.finishOp=function(_,N){var me=this.input.slice(this.pos,this.pos+N);return this.pos+=N,this.finishToken(_,me)},Ti.readRegexp=function(){for(var _,N,me=this.pos;;){this.pos>=this.input.length&&this.raise(me,"Unterminated regular expression");var q=this.input.charAt(this.pos);if(de.test(q)&&this.raise(me,"Unterminated regular expression"),_)_=!1;else{if(q==="[")N=!0;else if(q==="]"&&N)N=!1;else if(q==="/"&&!N)break;_=q==="\\"}++this.pos}var Ue=this.input.slice(me,this.pos);++this.pos;var ct=this.pos,Lt=this.readWord1();this.containsEsc&&this.unexpected(ct);var hn=this.regexpState||(this.regexpState=new Ia(this));hn.reset(me,Ue,Lt),this.validateRegExpFlags(hn),this.validateRegExpPattern(hn);var on=null;try{on=new RegExp(Ue,Lt)}catch(nr){}return this.finishToken(k.regexp,{pattern:Ue,flags:Lt,value:on})},Ti.readInt=function(_,N,me){for(var q=this.options.ecmaVersion>=12&&N===void 0,Ue=me&&this.input.charCodeAt(this.pos)===48,ct=this.pos,Lt=0,hn=0,on=0,nr=N==null?1/0:N;on<nr;++on,++this.pos){var sr=this.input.charCodeAt(this.pos),ti=void 0;if(q&&sr===95){Ue&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),hn===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),on===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),hn=sr;continue}if(sr>=97?ti=sr-97+10:sr>=65?ti=sr-65+10:sr>=48&&sr<=57?ti=sr-48:ti=1/0,ti>=_)break;hn=sr,Lt=Lt*_+ti}return q&&hn===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ct||N!=null&&this.pos-ct!==N?null:Lt};function fa(_,N){return N?parseInt(_,8):parseFloat(_.replace(/_/g,""))}function Bn(_){return typeof BigInt!="function"?null:BigInt(_.replace(/_/g,""))}Ti.readRadixNumber=function(_){var N=this.pos;this.pos+=2;var me=this.readInt(_);return me==null&&this.raise(this.start+2,"Expected number in radix "+_),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(me=Bn(this.input.slice(N,this.pos)),++this.pos):b(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(k.num,me)},Ti.readNumber=function(_){var N=this.pos;!_&&this.readInt(10,void 0,!0)===null&&this.raise(N,"Invalid number");var me=this.pos-N>=2&&this.input.charCodeAt(N)===48;me&&this.strict&&this.raise(N,"Invalid number");var q=this.input.charCodeAt(this.pos);if(!me&&!_&&this.options.ecmaVersion>=11&&q===110){var Ue=Bn(this.input.slice(N,this.pos));return++this.pos,b(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(k.num,Ue)}me&&/[89]/.test(this.input.slice(N,this.pos))&&(me=!1),q===46&&!me&&(++this.pos,this.readInt(10),q=this.input.charCodeAt(this.pos)),(q===69||q===101)&&!me&&(q=this.input.charCodeAt(++this.pos),(q===43||q===45)&&++this.pos,this.readInt(10)===null&&this.raise(N,"Invalid number")),b(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ct=fa(this.input.slice(N,this.pos),me);return this.finishToken(k.num,ct)},Ti.readCodePoint=function(){var _=this.input.charCodeAt(this.pos),N;if(_===123){this.options.ecmaVersion<6&&this.unexpected();var me=++this.pos;N=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,N>1114111&&this.invalidStringToken(me,"Code point out of bounds")}else N=this.readHexChar(4);return N};function Li(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}Ti.readString=function(_){for(var N="",me=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var q=this.input.charCodeAt(this.pos);if(q===_)break;q===92?(N+=this.input.slice(me,this.pos),N+=this.readEscapedChar(!1),me=this.pos):(ue(q,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return N+=this.input.slice(me,this.pos++),this.finishToken(k.string,N)};var Ji={};Ti.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(_){if(_===Ji)this.readInvalidTemplateToken();else throw _}this.inTemplateElement=!1},Ti.invalidStringToken=function(_,N){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ji;this.raise(_,N)},Ti.readTmplToken=function(){for(var _="",N=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var me=this.input.charCodeAt(this.pos);if(me===96||me===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===k.template||this.type===k.invalidTemplate)?me===36?(this.pos+=2,this.finishToken(k.dollarBraceL)):(++this.pos,this.finishToken(k.backQuote)):(_+=this.input.slice(N,this.pos),this.finishToken(k.template,_));if(me===92)_+=this.input.slice(N,this.pos),_+=this.readEscapedChar(!0),N=this.pos;else if(ue(me)){switch(_+=this.input.slice(N,this.pos),++this.pos,me){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:_+=`
`;break;default:_+=String.fromCharCode(me);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),N=this.pos}else++this.pos}},Ti.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(k.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Ti.readEscapedChar=function(_){var N=this.input.charCodeAt(++this.pos);switch(++this.pos,N){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Li(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(_){var me=this.pos-1;return this.invalidStringToken(me,"Invalid escape sequence in template string"),null}default:if(N>=48&&N<=55){var q=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ue=parseInt(q,8);return Ue>255&&(q=q.slice(0,-1),Ue=parseInt(q,8)),this.pos+=q.length-1,N=this.input.charCodeAt(this.pos),(q!=="0"||N===56||N===57)&&(this.strict||_)&&this.invalidStringToken(this.pos-1-q.length,_?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ue)}return ue(N)?"":String.fromCharCode(N)}},Ti.readHexChar=function(_){var N=this.pos,me=this.readInt(16,_);return me===null&&this.invalidStringToken(N,"Bad character escape sequence"),me},Ti.readWord1=function(){this.containsEsc=!1;for(var _="",N=!0,me=this.pos,q=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ue=this.fullCharCodeAtPos();if(A(Ue,q))this.pos+=Ue<=65535?1:2;else if(Ue===92){this.containsEsc=!0,_+=this.input.slice(me,this.pos);var ct=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Lt=this.readCodePoint();(N?b:A)(Lt,q)||this.invalidStringToken(ct,"Invalid Unicode escape"),_+=Li(Lt),me=this.pos}else break;N=!1}return _+this.input.slice(me,this.pos)},Ti.readWord=function(){var _=this.readWord1(),N=k.name;return this.keywords.test(_)&&(N=L[_]),this.finishToken(N,_)};var Na="7.4.1";_e.acorn={Parser:_e,version:Na,defaultOptions:Fe,Position:K,SourceLocation:he,getLineInfo:Se,Node:mn,TokenType:w,tokTypes:k,keywordTypes:L,TokContext:mi,tokContexts:$r,isIdentifierChar:A,isIdentifierStart:b,Token:qr,isNewLine:ue,lineBreak:de,lineBreakG:H,nonASCIIwhitespace:ve};function ea(_,N){return _e.parse(_,N)}function ha(_,N,me){return _e.parseExpressionAt(_,N,me)}function Ta(_,N){return _e.tokenizer(_,N)}function Aa(_,N){_.prototype=Object.create(N.prototype),_.prototype.constructor=_,_.__proto__=N}function Wi(_){var N=typeof Map=="function"?new Map:void 0;return Wi=function(q){if(q===null||!$o(q))return q;if(typeof q!="function")throw new TypeError("Super expression must either be null or a function");if(typeof N!="undefined"){if(N.has(q))return N.get(q);N.set(q,Ue)}function Ue(){return Ja(q,arguments,Wa(this).constructor)}return Ue.prototype=Object.create(q.prototype,{constructor:{value:Ue,enumerable:!1,writable:!0,configurable:!0}}),Ua(Ue,q)},Wi(_)}function go(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}function Ja(_,N,me){return go()?Ja=Reflect.construct:Ja=function(Ue,ct,Lt){var hn=[null];hn.push.apply(hn,ct);var on=Function.bind.apply(Ue,hn),nr=new on;return Lt&&Ua(nr,Lt.prototype),nr},Ja.apply(null,arguments)}function $o(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function Ua(_,N){return Ua=Object.setPrototypeOf||function(q,Ue){return q.__proto__=Ue,q},Ua(_,N)}function Wa(_){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)},Wa(_)}var mo=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(Wi(Error)),fo=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(Wi(SyntaxError)),Ro=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(Wi(ReferenceError)),te=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(Wi(TypeError)),ho=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(mo),wn=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(fo),tt=function(_){Aa(N,_);function N(){return _.apply(this,arguments)||this}return N}(Ro),$e={UnknownError:[3001,"%0",ho],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",ho],NodeTypeSyntaxError:[1001,"Unknown node type: %0",tt],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",tt],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",tt],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",tt],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",tt],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",tt],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",tt],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",tt],ParamTypeSyntaxError:[1009,"Unknown param type: %0",tt],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",tt],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Ro],VariableUndefinedReferenceError:[2002,"%0 is not defined",Ro],IsNotConstructor:[2003,"%0 is not a constructor",te]};function dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}function Ke(_,N,me){return dt()?Ke=Reflect.construct:Ke=function(Ue,ct,Lt){var hn=[null];hn.push.apply(hn,ct);var on=Function.bind.apply(Ue,hn),nr=new on;return Lt&&qt(nr,Lt.prototype),nr},Ke.apply(null,arguments)}function qt(_,N){return qt=Object.setPrototypeOf||function(q,Ue){return q.__proto__=Ue,q},qt(_,N)}var nn="0.0.3";function ln(_,N){Object.defineProperty(_,"name",{value:N,writable:!1,enumerable:!1,configurable:!0})}var An=Object.prototype.hasOwnProperty,Oe=Symbol("Break"),De=Symbol("Continue"),Be=Symbol("DefaultCase"),Ye=Symbol("EmptyStatementReturn"),Nt=Symbol("WithScopeName"),jt=Symbol("SuperScopeName"),un=Symbol("RootScopeName"),Hn=Symbol("GlobalScopeName");function Rn(_){return typeof _=="function"}var fr=function(){function _(me){this.interpreter=me}var N=_.prototype;return N.generator=function(){var q=this.interpreter;function Ue(){return this.getCurrentScope()}function ct(){return this.getGlobalScope()}function Lt(){return this.getCurrentContext()}return{getOptions:q.getOptions.bind(q),getCurrentScope:Ue.bind(q),getGlobalScope:ct.bind(q),getCurrentContext:Lt.bind(q),getExecStartTime:q.getExecStartTime.bind(q)}},_}();function or(_,N,me){if(me===void 0&&(me=!0),!(_ instanceof fr))throw new Error("Illegal call");if(typeof N!="string")return N;if(N){var q=_.generator(),Ue=q.getOptions(),ct={timeout:Ue.timeout,_initEnv:function(){me||this.setCurrentContext(q.getCurrentContext()),this.execStartTime=q.getExecStartTime(),this.execEndTime=this.execStartTime}},Lt=me?q.getGlobalScope():q.getCurrentScope(),hn=new Vt(Lt,ct);return hn.evaluate(N)}}Object.defineProperty(or,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function $t(_){if(!(_ instanceof fr))throw new Error("Illegal call");for(var N=_.generator(),me=arguments.length,q=new Array(me>1?me-1:0),Ue=1;Ue<me;Ue++)q[Ue-1]=arguments[Ue];var ct=q.pop(),Lt=new Vt(N.getGlobalScope(),N.getOptions()),hn=`
		    (function anonymous(`+q.join(",")+`){
		        `+ct+`
		    });
		    `;return Lt.evaluate(hn)}Object.defineProperty($t,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var er=function(N){this.value=N},Jn=function(N){this.value=N},Bt=function(N){this.value=N},Ai=function(N,me,q){me===void 0&&(me=null),this.name=q,this.parent=me,this.data=N,this.labelStack=[]};function Le(){}function Xe(_,N){return _===void 0&&(_=null),new Ai(Object.create(null),_,N)}function He(_){return Object.create(_)}var Ot={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:or,Function:$t};typeof JSON!="undefined"&&(Ot.JSON=JSON),typeof Promise!="undefined"&&(Ot.Promise=Promise),typeof Set!="undefined"&&(Ot.Set=Set),typeof Map!="undefined"&&(Ot.Map=Map),typeof Symbol!="undefined"&&(Ot.Symbol=Symbol),typeof Proxy!="undefined"&&(Ot.Proxy=Proxy),typeof WeakMap!="undefined"&&(Ot.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(Ot.WeakSet=WeakSet),typeof Reflect!="undefined"&&(Ot.Reflect=Reflect);var Vt=function(){function _(me,q){me===void 0&&(me=_.global),q===void 0&&(q={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:q.ecmaVersion||_.ecmaVersion,timeout:q.timeout||0,rootContext:q.rootContext,globalContextInFunction:q.globalContextInFunction===void 0?_.globalContextInFunction:q.globalContextInFunction,_initEnv:q._initEnv},this.context=me||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var N=_.prototype;return N.initEnvironment=function(q){var Ue;if(q instanceof Ai)Ue=q;else{var ct=null,Lt=this.createSuperScope(q);this.options.rootContext&&(ct=new Ai(He(this.options.rootContext),Lt,un)),Ue=new Ai(q,ct||Lt,Hn)}this.globalScope=Ue,this.currentScope=this.globalScope,this.globalContext=Ue.data,this.currentContext=Ue.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var hn=this.options._initEnv;hn&&hn.call(this)},N.getExecStartTime=function(){return this.execStartTime},N.getExecutionTime=function(){return this.execEndTime-this.execStartTime},N.setExecTimeout=function(q){q===void 0&&(q=0),this.options.timeout=q},N.getOptions=function(){return this.options},N.getGlobalScope=function(){return this.globalScope},N.getCurrentScope=function(){return this.currentScope},N.getCurrentContext=function(){return this.currentContext},N.isInterruptThrow=function(q){return q instanceof ho||q instanceof tt||q instanceof wn},N.createSuperScope=function(q){var Ue=Object.assign({},Ot),ct=Object.keys(Ue);return ct.forEach(function(Lt){Lt in q&&delete Ue[Lt]}),new Ai(Ue,null,jt)},N.setCurrentContext=function(q){this.currentContext=q},N.setCurrentScope=function(q){this.currentScope=q},N.evaluate=function(q){q===void 0&&(q="");var Ue;if(q)return Ue=ea(q,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||_.ecmaVersion}),this.evaluateNode(Ue,q)},N.appendCode=function(q){return this.evaluate(q)},N.evaluateNode=function(q,Ue){var ct=this;Ue===void 0&&(Ue=""),this.value=void 0,this.source=Ue,this.sourceList.push(Ue),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Lt=this.getCurrentScope(),hn=this.getCurrentContext(),on=Lt.labelStack.concat([]),nr=this.callStack.concat([]),sr=function(){ct.setCurrentScope(Lt),ct.setCurrentContext(hn),Lt.labelStack=on,ct.callStack=nr};try{var ti=this.createClosure(q);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),ti()}catch(Fi){throw Fi}finally{sr(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},N.createErrorMessage=function(q,Ue,ct){var Lt=q[1].replace("%0",String(Ue));return ct!==null&&(Lt+=this.getNodePosition(ct||this.lastExecNode)),Lt},N.createError=function(q,Ue){return new Ue(q)},N.createThrowError=function(q,Ue){return this.createError(q,Ue)},N.createInternalThrowError=function(q,Ue,ct){return this.createError(this.createErrorMessage(q,Ue,ct),q[2])},N.checkTimeout=function(){if(!this.isRunning)return!1;var q=this.options.timeout||0,Ue=Date.now();return Ue-this.execStartTime>q},N.getNodePosition=function(q){if(q){var Ue="";return q.loc?" ["+q.loc.start.line+":"+q.loc.start.column+"]"+Ue:""}return""},N.createClosure=function(q){var Ue=this,ct;switch(q.type){case"BinaryExpression":ct=this.binaryExpressionHandler(q);break;case"LogicalExpression":ct=this.logicalExpressionHandler(q);break;case"UnaryExpression":ct=this.unaryExpressionHandler(q);break;case"UpdateExpression":ct=this.updateExpressionHandler(q);break;case"ObjectExpression":ct=this.objectExpressionHandler(q);break;case"ArrayExpression":ct=this.arrayExpressionHandler(q);break;case"CallExpression":ct=this.callExpressionHandler(q);break;case"NewExpression":ct=this.newExpressionHandler(q);break;case"MemberExpression":ct=this.memberExpressionHandler(q);break;case"ThisExpression":ct=this.thisExpressionHandler(q);break;case"SequenceExpression":ct=this.sequenceExpressionHandler(q);break;case"Literal":ct=this.literalHandler(q);break;case"Identifier":ct=this.identifierHandler(q);break;case"AssignmentExpression":ct=this.assignmentExpressionHandler(q);break;case"FunctionDeclaration":ct=this.functionDeclarationHandler(q);break;case"VariableDeclaration":ct=this.variableDeclarationHandler(q);break;case"BlockStatement":case"Program":ct=this.programHandler(q);break;case"ExpressionStatement":ct=this.expressionStatementHandler(q);break;case"EmptyStatement":ct=this.emptyStatementHandler(q);break;case"ReturnStatement":ct=this.returnStatementHandler(q);break;case"FunctionExpression":ct=this.functionExpressionHandler(q);break;case"IfStatement":ct=this.ifStatementHandler(q);break;case"ConditionalExpression":ct=this.conditionalExpressionHandler(q);break;case"ForStatement":ct=this.forStatementHandler(q);break;case"WhileStatement":ct=this.whileStatementHandler(q);break;case"DoWhileStatement":ct=this.doWhileStatementHandler(q);break;case"ForInStatement":ct=this.forInStatementHandler(q);break;case"WithStatement":ct=this.withStatementHandler(q);break;case"ThrowStatement":ct=this.throwStatementHandler(q);break;case"TryStatement":ct=this.tryStatementHandler(q);break;case"ContinueStatement":ct=this.continueStatementHandler(q);break;case"BreakStatement":ct=this.breakStatementHandler(q);break;case"SwitchStatement":ct=this.switchStatementHandler(q);break;case"LabeledStatement":ct=this.labeledStatementHandler(q);break;case"DebuggerStatement":ct=this.debuggerStatementHandler(q);break;default:throw this.createInternalThrowError($e.NodeTypeSyntaxError,q.type,q)}return function(){var Lt=Ue.options.timeout;if(Lt&&Lt>0&&Ue.checkTimeout())throw Ue.createInternalThrowError($e.ExecutionTimeOutError,Lt,null);return Ue.lastExecNode=q,ct.apply(void 0,arguments)}},N.binaryExpressionHandler=function(q){var Ue=this,ct=this.createClosure(q.left),Lt=this.createClosure(q.right);return function(){var hn=ct(),on=Lt();switch(q.operator){case"==":return hn==on;case"!=":return hn!=on;case"===":return hn===on;case"!==":return hn!==on;case"<":return hn<on;case"<=":return hn<=on;case">":return hn>on;case">=":return hn>=on;case"<<":return hn<<on;case">>":return hn>>on;case">>>":return hn>>>on;case"+":return hn+on;case"-":return hn-on;case"*":return hn*on;case"**":return Math.pow(hn,on);case"/":return hn/on;case"%":return hn%on;case"|":return hn|on;case"^":return hn^on;case"&":return hn&on;case"in":return hn in on;case"instanceof":return hn instanceof on;default:throw Ue.createInternalThrowError($e.BinaryOperatorSyntaxError,q.operator,q)}}},N.logicalExpressionHandler=function(q){var Ue=this,ct=this.createClosure(q.left),Lt=this.createClosure(q.right);return function(){switch(q.operator){case"||":return ct()||Lt();case"&&":return ct()&&Lt();default:throw Ue.createInternalThrowError($e.LogicalOperatorSyntaxError,q.operator,q)}}},N.unaryExpressionHandler=function(q){var Ue=this;switch(q.operator){case"delete":var ct=this.createObjectGetter(q.argument),Lt=this.createNameGetter(q.argument);return function(){var sr=ct(),ti=Lt();return delete sr[ti]};default:var hn;if(q.operator==="typeof"&&q.argument.type==="Identifier"){var on=this.createObjectGetter(q.argument),nr=this.createNameGetter(q.argument);hn=function(){return on()[nr()]}}else hn=this.createClosure(q.argument);return function(){var sr=hn();switch(q.operator){case"-":return-sr;case"+":return+sr;case"!":return!sr;case"~":return~sr;case"void":return;case"typeof":return typeof sr;default:throw Ue.createInternalThrowError($e.UnaryOperatorSyntaxError,q.operator,q)}}}},N.updateExpressionHandler=function(q){var Ue=this,ct=this.createObjectGetter(q.argument),Lt=this.createNameGetter(q.argument);return function(){var hn=ct(),on=Lt();switch(Ue.assertVariable(hn,on,q),q.operator){case"++":return q.prefix?++hn[on]:hn[on]++;case"--":return q.prefix?--hn[on]:hn[on]--;default:throw Ue.createInternalThrowError($e.UpdateOperatorSyntaxError,q.operator,q)}}},N.objectExpressionHandler=function(q){var Ue=this,ct=[];function Lt(on){return on.type==="Identifier"?on.name:on.type==="Literal"?on.value:this.throwError($e.ObjectStructureSyntaxError,on.type,on)}var hn=Object.create(null);return q.properties.forEach(function(on){var nr=on.kind,sr=Lt(on.key);(!hn[sr]||nr==="init")&&(hn[sr]={}),hn[sr][nr]=Ue.createClosure(on.value),ct.push({key:sr,property:on})}),function(){for(var on={},nr=ct.length,sr=0;sr<nr;sr++){var ti=ct[sr],Fi=ti.key,Ci=hn[Fi],ta=Ci.init?Ci.init():void 0,Ni=Ci.get?Ci.get():function(){},Oi=Ci.set?Ci.set():function(xa){};if("set"in Ci||"get"in Ci){var yo={configurable:!0,enumerable:!0,get:Ni,set:Oi};Object.defineProperty(on,Fi,yo)}else{var ya=ti.property,Ba=ya.kind;ya.key.type==="Identifier"&&ya.value.type==="FunctionExpression"&&Ba==="init"&&!ya.value.id&&ln(ta,ya.key.name),on[Fi]=ta}}return on}},N.arrayExpressionHandler=function(q){var Ue=this,ct=q.elements.map(function(Lt){return Lt&&Ue.createClosure(Lt)});return function(){for(var Lt=ct.length,hn=Array(Lt),on=0;on<Lt;on++){var nr=ct[on];nr&&(hn[on]=nr())}return hn}},N.safeObjectGet=function(q,Ue,ct){return q[Ue]},N.createCallFunctionGetter=function(q){var Ue=this;switch(q.type){case"MemberExpression":var ct=this.createClosure(q.object),Lt=this.createMemberKeyGetter(q),hn=this.source;return function(){var nr=ct(),sr=Lt(),ti=Ue.safeObjectGet(nr,sr,q);if(!ti||!Rn(ti)){var Fi=hn.slice(q.start,q.end);throw Ue.createInternalThrowError($e.FunctionUndefinedReferenceError,Fi,q)}return ti.__IS_EVAL_FUNC?function(Ci){return ti(new fr(Ue),Ci,!0)}:ti.__IS_FUNCTION_FUNC?function(){for(var Ci=arguments.length,ta=new Array(Ci),Ni=0;Ni<Ci;Ni++)ta[Ni]=arguments[Ni];return ti.apply(void 0,[new fr(Ue)].concat(ta))}:ti.bind(nr)};default:var on=this.createClosure(q);return function(){var nr="";q.type==="Identifier"&&(nr=q.name);var sr=on();if(!sr||!Rn(sr))throw Ue.createInternalThrowError($e.FunctionUndefinedReferenceError,nr,q);if(q.type==="Identifier"&&sr.__IS_EVAL_FUNC&&nr==="eval")return function(Ci){var ta=Ue.getScopeFromName(nr,Ue.getCurrentScope()),Ni=ta.name===jt||ta.name===Hn||ta.name===un;return sr(new fr(Ue),Ci,!Ni)};if(sr.__IS_EVAL_FUNC)return function(Ci){return sr(new fr(Ue),Ci,!0)};if(sr.__IS_FUNCTION_FUNC)return function(){for(var Ci=arguments.length,ta=new Array(Ci),Ni=0;Ni<Ci;Ni++)ta[Ni]=arguments[Ni];return sr.apply(void 0,[new fr(Ue)].concat(ta))};var ti=Ue.options.globalContextInFunction;if(q.type==="Identifier"){var Fi=Ue.getIdentifierScope(q);Fi.name===Nt&&(ti=Fi.data)}return sr.bind(ti)}}},N.callExpressionHandler=function(q){var Ue=this,ct=this.createCallFunctionGetter(q.callee),Lt=q.arguments.map(function(hn){return Ue.createClosure(hn)});return function(){return ct().apply(void 0,Lt.map(function(hn){return hn()}))}},N.functionExpressionHandler=function(q){var Ue=this,ct=this,Lt=this.source,hn=this.collectDeclVars,on=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var nr=q.id?q.id.name:"",sr=q.params.length,ti=q.params.map(function(Ni){return Ue.createParamNameGetter(Ni)}),Fi=this.createClosure(q.body),Ci=this.collectDeclVars,ta=this.collectDeclFuncs;return this.collectDeclVars=hn,this.collectDeclFuncs=on,function(){var Ni=ct.getCurrentScope(),Oi=function yo(){for(var ya=arguments.length,Ba=new Array(ya),xa=0;xa<ya;xa++)Ba[xa]=arguments[xa];ct.callStack.push(""+nr);var sa=ct.getCurrentScope(),jo=Xe(Ni,"FunctionScope("+nr+")");ct.setCurrentScope(jo),ct.addDeclarationsToScope(Ci,ta,jo),nr&&(jo.data[nr]=yo),jo.data.arguments=arguments,ti.forEach(function(Fs,tu){jo.data[Fs()]=Ba[tu]});var vs=ct.getCurrentContext();ct.setCurrentContext(this);var $s=Fi();if(ct.setCurrentContext(vs),ct.setCurrentScope(sa),ct.callStack.pop(),$s instanceof er)return $s.value};return ln(Oi,nr),Object.defineProperty(Oi,"length",{value:sr,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(Oi,"toString",{value:function(){return Lt.slice(q.start,q.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Oi,"valueOf",{value:function(){return Lt.slice(q.start,q.end)},writable:!0,configurable:!0,enumerable:!1}),Oi}},N.newExpressionHandler=function(q){var Ue=this,ct=this.source,Lt=this.createClosure(q.callee),hn=q.arguments.map(function(on){return Ue.createClosure(on)});return function(){var on=Lt();if(!Rn(on)||on.__IS_EVAL_FUNC){var nr=q.callee,sr=ct.slice(nr.start,nr.end);throw Ue.createInternalThrowError($e.IsNotConstructor,sr,q)}return on.__IS_FUNCTION_FUNC?on.apply(void 0,[new fr(Ue)].concat(hn.map(function(ti){return ti()}))):Ke(on,hn.map(function(ti){return ti()}))}},N.memberExpressionHandler=function(q){var Ue=this.createClosure(q.object),ct=this.createMemberKeyGetter(q);return function(){var Lt=Ue(),hn=ct();return Lt[hn]}},N.thisExpressionHandler=function(q){var Ue=this;return function(){return Ue.getCurrentContext()}},N.sequenceExpressionHandler=function(q){var Ue=this,ct=q.expressions.map(function(Lt){return Ue.createClosure(Lt)});return function(){for(var Lt,hn=ct.length,on=0;on<hn;on++){var nr=ct[on];Lt=nr()}return Lt}},N.literalHandler=function(q){return function(){return q.regex?new RegExp(q.regex.pattern,q.regex.flags):q.value}},N.identifierHandler=function(q){var Ue=this;return function(){var ct=Ue.getCurrentScope(),Lt=Ue.getScopeDataFromName(q.name,ct);return Ue.assertVariable(Lt,q.name,q),Lt[q.name]}},N.getIdentifierScope=function(q){var Ue=this.getCurrentScope(),ct=this.getScopeFromName(q.name,Ue);return ct},N.assignmentExpressionHandler=function(q){var Ue=this;q.left.type==="Identifier"&&q.right.type==="FunctionExpression"&&!q.right.id&&(q.right.id={type:"Identifier",name:q.left.name});var ct=this.createObjectGetter(q.left),Lt=this.createNameGetter(q.left),hn=this.createClosure(q.right);return function(){var on=ct(),nr=Lt(),sr=hn();switch(q.operator!=="="&&Ue.assertVariable(on,nr,q),q.operator){case"=":return on[nr]=sr;case"+=":return on[nr]+=sr;case"-=":return on[nr]-=sr;case"*=":return on[nr]*=sr;case"**=":return on[nr]=Math.pow(on[nr],sr);case"/=":return on[nr]/=sr;case"%=":return on[nr]%=sr;case"<<=":return on[nr]<<=sr;case">>=":return on[nr]>>=sr;case">>>=":return on[nr]>>>=sr;case"&=":return on[nr]&=sr;case"^=":return on[nr]^=sr;case"|=":return on[nr]|=sr;default:throw Ue.createInternalThrowError($e.AssignmentExpressionSyntaxError,q.type,q)}}},N.functionDeclarationHandler=function(q){if(q.id){var Ue=this.functionExpressionHandler(q);Object.defineProperty(Ue,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(q.id.name,Ue)}return function(){return Ye}},N.getVariableName=function(q){if(q.type==="Identifier")return q.name;throw this.createInternalThrowError($e.VariableTypeSyntaxError,q.type,q)},N.variableDeclarationHandler=function(q){for(var Ue=this,ct,Lt=[],hn=0;hn<q.declarations.length;hn++){var on=q.declarations[hn];this.varDeclaration(this.getVariableName(on.id)),on.init&&Lt.push({type:"AssignmentExpression",operator:"=",left:on.id,right:on.init})}return Lt.length&&(ct=this.createClosure({type:"BlockStatement",body:Lt})),function(){if(ct){var nr=Ue.isVarDeclMode;Ue.isVarDeclMode=!0,ct(),Ue.isVarDeclMode=nr}return Ye}},N.assertVariable=function(q,Ue,ct){if(q===this.globalScope.data&&!(Ue in q))throw this.createInternalThrowError($e.VariableUndefinedReferenceError,Ue,ct)},N.programHandler=function(q){var Ue=this,ct=q.body.map(function(Lt){return Ue.createClosure(Lt)});return function(){for(var Lt=Ye,hn=0;hn<ct.length;hn++){var on=ct[hn],nr=Ue.setValue(on());if(nr!==Ye&&(Lt=nr,Lt instanceof er||Lt instanceof Jn||Lt instanceof Bt||Lt===Oe||Lt===De))break}return Lt}},N.expressionStatementHandler=function(q){return this.createClosure(q.expression)},N.emptyStatementHandler=function(q){return function(){return Ye}},N.returnStatementHandler=function(q){var Ue=q.argument?this.createClosure(q.argument):Le;return function(){return new er(Ue())}},N.ifStatementHandler=function(q){var Ue=this.createClosure(q.test),ct=this.createClosure(q.consequent),Lt=q.alternate?this.createClosure(q.alternate):function(){return Ye};return function(){return Ue()?ct():Lt()}},N.conditionalExpressionHandler=function(q){return this.ifStatementHandler(q)},N.forStatementHandler=function(q){var Ue=this,ct=Le,Lt=q.test?this.createClosure(q.test):function(){return!0},hn=Le,on=this.createClosure(q.body);return q.type==="ForStatement"&&(ct=q.init?this.createClosure(q.init):ct,hn=q.update?this.createClosure(q.update):Le),function(nr){var sr,ti=Ye,Fi=q.type==="DoWhileStatement";for(nr&&nr.type==="LabeledStatement"&&(sr=nr.label.name),ct();Fi||Lt();hn()){Fi=!1;var Ci=Ue.setValue(on());if(!(Ci===Ye||Ci===De)){if(Ci===Oe)break;if(ti=Ci,ti instanceof Bt&&ti.value===sr){ti=Ye;continue}if(ti instanceof er||ti instanceof Jn||ti instanceof Bt)break}}return ti}},N.whileStatementHandler=function(q){return this.forStatementHandler(q)},N.doWhileStatementHandler=function(q){return this.forStatementHandler(q)},N.forInStatementHandler=function(q){var Ue=this,ct=q.left,Lt=this.createClosure(q.right),hn=this.createClosure(q.body);return q.left.type==="VariableDeclaration"&&(this.createClosure(q.left)(),ct=q.left.declarations[0].id),function(on){var nr,sr=Ye,ti;on&&on.type==="LabeledStatement"&&(nr=on.label.name);var Fi=Lt();for(ti in Fi){Ue.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:ct,right:{type:"Literal",value:ti}})();var Ci=Ue.setValue(hn());if(!(Ci===Ye||Ci===De)){if(Ci===Oe)break;if(sr=Ci,sr instanceof Bt&&sr.value===nr){sr=Ye;continue}if(sr instanceof er||sr instanceof Jn||sr instanceof Bt)break}}return sr}},N.withStatementHandler=function(q){var Ue=this,ct=this.createClosure(q.object),Lt=this.createClosure(q.body);return function(){var hn=ct(),on=Ue.getCurrentScope(),nr=new Ai(hn,on,Nt);Ue.setCurrentScope(nr);var sr=Ue.setValue(Lt());return Ue.setCurrentScope(on),sr}},N.throwStatementHandler=function(q){var Ue=this,ct=this.createClosure(q.argument);return function(){throw Ue.setValue(void 0),ct()}},N.tryStatementHandler=function(q){var Ue=this,ct=this.createClosure(q.block),Lt=q.handler?this.catchClauseHandler(q.handler):null,hn=q.finalizer?this.createClosure(q.finalizer):null;return function(){var on=Ue.getCurrentScope(),nr=Ue.getCurrentContext(),sr=on.labelStack.concat([]),ti=Ue.callStack.concat([]),Fi=Ye,Ci,ta,Ni=function(){Ue.setCurrentScope(on),Ue.setCurrentContext(nr),on.labelStack=sr,Ue.callStack=ti};try{Fi=Ue.setValue(ct()),Fi instanceof er&&(Ci=Fi)}catch(Oi){if(Ni(),Ue.isInterruptThrow(Oi))throw Oi;if(Lt)try{Fi=Ue.setValue(Lt(Oi)),Fi instanceof er&&(Ci=Fi)}catch(yo){if(Ni(),Ue.isInterruptThrow(yo))throw yo;ta=yo}}if(hn)try{Fi=hn(),Fi instanceof er&&(Ci=Fi)}catch(Oi){if(Ni(),Ue.isInterruptThrow(Oi))throw Oi;ta=Oi}if(ta)throw ta;return Ci||Fi}},N.catchClauseHandler=function(q){var Ue=this,ct=this.createParamNameGetter(q.param),Lt=this.createClosure(q.body);return function(hn){var on,nr=Ue.getCurrentScope(),sr=nr.data,ti=ct(),Fi=An.call(sr,ti),Ci=sr[ti];return sr[ti]=hn,on=Lt(),Fi?sr[ti]=Ci:delete sr[ti],on}},N.continueStatementHandler=function(q){return function(){return q.label?new Bt(q.label.name):De}},N.breakStatementHandler=function(q){return function(){return q.label?new Jn(q.label.name):Oe}},N.switchStatementHandler=function(q){var Ue=this,ct=this.createClosure(q.discriminant),Lt=q.cases.map(function(hn){return Ue.switchCaseHandler(hn)});return function(){for(var hn=ct(),on=!1,nr,sr,ti,Fi=0;Fi<Lt.length;Fi++){var Ci=Lt[Fi](),ta=Ci.testClosure();if(ta===Be){ti=Ci;continue}if(on||ta===hn){if(on=!0,sr=Ue.setValue(Ci.bodyClosure()),sr===Ye)continue;if(sr===Oe||(nr=sr,nr instanceof er||nr instanceof Jn||nr instanceof Bt||nr===De))break}}if(!on&&ti){sr=Ue.setValue(ti.bodyClosure());var Ni=sr===Ye||sr===Oe||sr===De;Ni||(nr=sr)}return nr}},N.switchCaseHandler=function(q){var Ue=q.test?this.createClosure(q.test):function(){return Be},ct=this.createClosure({type:"BlockStatement",body:q.consequent});return function(){return{testClosure:Ue,bodyClosure:ct}}},N.labeledStatementHandler=function(q){var Ue=this,ct=q.label.name,Lt=this.createClosure(q.body);return function(){var hn,on=Ue.getCurrentScope();return on.labelStack.push(ct),hn=Lt(q),hn instanceof Jn&&hn.value===ct&&(hn=Ye),on.labelStack.pop(),hn}},N.debuggerStatementHandler=function(q){return function(){debugger;return Ye}},N.createParamNameGetter=function(q){if(q.type==="Identifier")return function(){return q.name};throw this.createInternalThrowError($e.ParamTypeSyntaxError,q.type,q)},N.createObjectKeyGetter=function(q){var Ue;return q.type==="Identifier"?Ue=function(){return q.name}:Ue=this.createClosure(q),function(){return Ue()}},N.createMemberKeyGetter=function(q){return q.computed?this.createClosure(q.property):this.createObjectKeyGetter(q.property)},N.createObjectGetter=function(q){var Ue=this;switch(q.type){case"Identifier":return function(){return Ue.getScopeDataFromName(q.name,Ue.getCurrentScope())};case"MemberExpression":return this.createClosure(q.object);default:throw this.createInternalThrowError($e.AssignmentTypeSyntaxError,q.type,q)}},N.createNameGetter=function(q){switch(q.type){case"Identifier":return function(){return q.name};case"MemberExpression":return this.createMemberKeyGetter(q);default:throw this.createInternalThrowError($e.AssignmentTypeSyntaxError,q.type,q)}},N.varDeclaration=function(q){var Ue=this.collectDeclVars;Ue[q]=void 0},N.funcDeclaration=function(q,Ue){var ct=this.collectDeclFuncs;ct[q]=Ue},N.addDeclarationsToScope=function(q,Ue,ct){var Lt=ct.data;for(var hn in Ue){var on=Ue[hn];Lt[hn]=on&&on()}for(var nr in q)nr in Lt||(Lt[nr]=void 0)},N.getScopeValue=function(q,Ue){var ct=this.getScopeFromName(q,Ue);return ct.data[q]},N.getScopeDataFromName=function(q,Ue){return this.getScopeFromName(q,Ue).data},N.getScopeFromName=function(q,Ue){var ct=Ue;do if(q in ct.data)return ct;while(ct=ct.parent);return this.globalScope},N.setValue=function(q){var Ue=this.callStack.length;return this.isVarDeclMode||Ue||q===Ye||q===Oe||q===De||q instanceof Jn||q instanceof Bt||(this.value=q instanceof er?q.value:q),q},N.getValue=function(){return this.value},_}();Vt.version=nn,Vt.eval=or,Vt.Function=$t,Vt.ecmaVersion=5,Vt.globalContextInFunction=void 0,Vt.global=Object.create(null);function gn(_){return _===void 0&&(_=Object.create(null)),_}function vt(_,N,me){N===void 0&&(N=[]),me===void 0&&(me={});var q=me.parsingContext,Ue=me.timeout===void 0?0:me.timeout,ct=`
    (function anonymous(`+N.join(",")+`){
         `+_+`
    });
    `,Lt=new Vt(q,{ecmaVersion:me.ecmaVersion,timeout:Ue,rootContext:me.rootContext,globalContextInFunction:me.globalContextInFunction});return Lt.evaluate(ct)}function zt(_,N,me){var q=new Vt(N,me);return q.evaluate(_)}var Kt=zt,fn=function(){function _(me){this._code=me}var N=_.prototype;return N.runInContext=function(q){return zt(this._code,q)},N.runInNewContext=function(q){return zt(this._code,q)},_}(),zn=function(_,N,me){return zt(_,N,me)};function wr(){for(var _=arguments.length,N=new Array(_),me=0;me<_;me++)N[me]=arguments[me];var q=N.pop();return vt(q||"",N)}var Er=zn},20396:function(Ie,S,y){var E;(function(p,M,d,g){"use strict";var x=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,v=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),u=x||v,t=["","webkit","Moz","MS","ms","o"],e=u?"":M.createElement("div"),o="function",c=Math.round,b=Math.abs,A=Date.now;function w(Oe,De,Be){return setTimeout(H(Oe,Be),De)}function D(Oe,De,Be){return Array.isArray(Oe)?(F(Oe,Be[De],Be),!0):!1}function F(Oe,De,Be){var Ye;if(Oe)if(Oe.forEach)Oe.forEach(De,Be);else if(Oe.length!==g)for(Ye=0;Ye<Oe.length;)De.call(Be,Oe[Ye],Ye,Oe),Ye++;else for(Ye in Oe)Oe.hasOwnProperty(Ye)&&De.call(Be,Oe[Ye],Ye,Oe)}function Z(Oe,De,Be){var Ye="DEPRECATED METHOD: "+De+`
`+Be+` AT 
`;return function(){var Nt=new Error("get-stack-trace"),jt=Nt&&Nt.stack?Nt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",un=p.console&&(p.console.warn||p.console.log);return un&&un.call(p.console,Ye,jt),Oe.apply(this,arguments)}}var L;typeof Object.assign!="function"?L=function(De){if(De===g||De===null)throw new TypeError("Cannot convert undefined or null to object");for(var Be=Object(De),Ye=1;Ye<arguments.length;Ye++){var Nt=arguments[Ye];if(Nt!==g&&Nt!==null)for(var jt in Nt)Nt.hasOwnProperty(jt)&&(Be[jt]=Nt[jt])}return Be}:L=Object.assign;var W=Z(function(De,Be,Ye){for(var Nt=Object.keys(Be),jt=0;jt<Nt.length;)(!Ye||Ye&&De[Nt[jt]]===g)&&(De[Nt[jt]]=Be[Nt[jt]]),jt++;return De},"extend","Use `assign`."),k=Z(function(De,Be){return W(De,Be,!0)},"merge","Use `assign`.");function de(Oe,De,Be){var Ye=De.prototype,Nt;Nt=Oe.prototype=Object.create(Ye),Nt.constructor=Oe,Nt._super=Ye,Be&&L(Nt,Be)}function H(Oe,De){return function(){return Oe.apply(De,arguments)}}function ue(Oe,De){return typeof Oe==o?Oe.apply(De&&De[0]||g,De):Oe}function ve(Oe,De){return Oe===g?De:Oe}function ke(Oe,De,Be){F(ie(De),function(Ye){Oe.addEventListener(Ye,Be,!1)})}function Ae(Oe,De,Be){F(ie(De),function(Ye){Oe.removeEventListener(Ye,Be,!1)})}function be(Oe,De){for(;Oe;){if(Oe==De)return!0;Oe=Oe.parentNode}return!1}function G(Oe,De){return Oe.indexOf(De)>-1}function ie(Oe){return Oe.trim().split(/\s+/g)}function V(Oe,De,Be){if(Oe.indexOf&&!Be)return Oe.indexOf(De);for(var Ye=0;Ye<Oe.length;){if(Be&&Oe[Ye][Be]==De||!Be&&Oe[Ye]===De)return Ye;Ye++}return-1}function ae(Oe){return Array.prototype.slice.call(Oe,0)}function K(Oe,De,Be){for(var Ye=[],Nt=[],jt=0;jt<Oe.length;){var un=De?Oe[jt][De]:Oe[jt];V(Nt,un)<0&&Ye.push(Oe[jt]),Nt[jt]=un,jt++}return Be&&(De?Ye=Ye.sort(function(Rn,fr){return Rn[De]>fr[De]}):Ye=Ye.sort()),Ye}function he(Oe,De){for(var Be,Ye,Nt=De[0].toUpperCase()+De.slice(1),jt=0;jt<t.length;){if(Be=t[jt],Ye=Be?Be+Nt:De,Ye in Oe)return Ye;jt++}return g}var Se=1;function Fe(){return Se++}function nt(Oe){var De=Oe.ownerDocument||Oe;return De.defaultView||De.parentWindow||p}var lt=/mobile|tablet|ip(ad|hone|od)|android/i,Gt="ontouchstart"in p,pn=he(p,"PointerEvent")!==g,$n=Gt&&lt.test(navigator.userAgent),Ln="touch",st="pen",xt="mouse",tn="kinect",Un=25,We=1,Yt=2,Ze=4,Pe=8,ze=1,ht=2,P=4,ne=8,_e=16,oe=ht|P,ce=ne|_e,ye=oe|ce,Y=["x","y"],Ne=["clientX","clientY"];function Qe(Oe,De){var Be=this;this.manager=Oe,this.callback=De,this.element=Oe.element,this.target=Oe.options.inputTarget,this.domHandler=function(Ye){ue(Oe.options.enable,[Oe])&&Be.handler(Ye)},this.init()}Qe.prototype={handler:function(){},init:function(){this.evEl&&ke(this.element,this.evEl,this.domHandler),this.evTarget&&ke(this.target,this.evTarget,this.domHandler),this.evWin&&ke(nt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ae(this.element,this.evEl,this.domHandler),this.evTarget&&Ae(this.target,this.evTarget,this.domHandler),this.evWin&&Ae(nt(this.element),this.evWin,this.domHandler)}};function mt(Oe){var De,Be=Oe.options.inputClass;return Be?De=Be:pn?De=Kn:$n?De=Ia:Gt?De=pe:De=Sr,new De(Oe,Ve)}function Ve(Oe,De,Be){var Ye=Be.pointers.length,Nt=Be.changedPointers.length,jt=De&We&&Ye-Nt===0,un=De&(Ze|Pe)&&Ye-Nt===0;Be.isFirst=!!jt,Be.isFinal=!!un,jt&&(Oe.session={}),Be.eventType=De,rt(Oe,Be),Oe.emit("hammer.input",Be),Oe.recognize(Be),Oe.session.prevInput=Be}function rt(Oe,De){var Be=Oe.session,Ye=De.pointers,Nt=Ye.length;Be.firstInput||(Be.firstInput=Ht(De)),Nt>1&&!Be.firstMultiple?Be.firstMultiple=Ht(De):Nt===1&&(Be.firstMultiple=!1);var jt=Be.firstInput,un=Be.firstMultiple,Hn=un?un.center:jt.center,Rn=De.center=en(Ye);De.timeStamp=A(),De.deltaTime=De.timeStamp-jt.timeStamp,De.angle=jn(Hn,Rn),De.distance=kn(Hn,Rn),yt(Be,De),De.offsetDirection=Mn(De.deltaX,De.deltaY);var fr=wt(De.deltaTime,De.deltaX,De.deltaY);De.overallVelocityX=fr.x,De.overallVelocityY=fr.y,De.overallVelocity=b(fr.x)>b(fr.y)?fr.x:fr.y,De.scale=un?cr(un.pointers,Ye):1,De.rotation=un?mn(un.pointers,Ye):0,De.maxPointers=Be.prevInput?De.pointers.length>Be.prevInput.maxPointers?De.pointers.length:Be.prevInput.maxPointers:De.pointers.length,Tt(Be,De);var or=Oe.element;be(De.srcEvent.target,or)&&(or=De.srcEvent.target),De.target=or}function yt(Oe,De){var Be=De.center,Ye=Oe.offsetDelta||{},Nt=Oe.prevDelta||{},jt=Oe.prevInput||{};(De.eventType===We||jt.eventType===Ze)&&(Nt=Oe.prevDelta={x:jt.deltaX||0,y:jt.deltaY||0},Ye=Oe.offsetDelta={x:Be.x,y:Be.y}),De.deltaX=Nt.x+(Be.x-Ye.x),De.deltaY=Nt.y+(Be.y-Ye.y)}function Tt(Oe,De){var Be=Oe.lastInterval||De,Ye=De.timeStamp-Be.timeStamp,Nt,jt,un,Hn;if(De.eventType!=Pe&&(Ye>Un||Be.velocity===g)){var Rn=De.deltaX-Be.deltaX,fr=De.deltaY-Be.deltaY,or=wt(Ye,Rn,fr);jt=or.x,un=or.y,Nt=b(or.x)>b(or.y)?or.x:or.y,Hn=Mn(Rn,fr),Oe.lastInterval=De}else Nt=Be.velocity,jt=Be.velocityX,un=Be.velocityY,Hn=Be.direction;De.velocity=Nt,De.velocityX=jt,De.velocityY=un,De.direction=Hn}function Ht(Oe){for(var De=[],Be=0;Be<Oe.pointers.length;)De[Be]={clientX:c(Oe.pointers[Be].clientX),clientY:c(Oe.pointers[Be].clientY)},Be++;return{timeStamp:A(),pointers:De,center:en(De),deltaX:Oe.deltaX,deltaY:Oe.deltaY}}function en(Oe){var De=Oe.length;if(De===1)return{x:c(Oe[0].clientX),y:c(Oe[0].clientY)};for(var Be=0,Ye=0,Nt=0;Nt<De;)Be+=Oe[Nt].clientX,Ye+=Oe[Nt].clientY,Nt++;return{x:c(Be/De),y:c(Ye/De)}}function wt(Oe,De,Be){return{x:De/Oe||0,y:Be/Oe||0}}function Mn(Oe,De){return Oe===De?ze:b(Oe)>=b(De)?Oe<0?ht:P:De<0?ne:_e}function kn(Oe,De,Be){Be||(Be=Y);var Ye=De[Be[0]]-Oe[Be[0]],Nt=De[Be[1]]-Oe[Be[1]];return Math.sqrt(Ye*Ye+Nt*Nt)}function jn(Oe,De,Be){Be||(Be=Y);var Ye=De[Be[0]]-Oe[Be[0]],Nt=De[Be[1]]-Oe[Be[1]];return Math.atan2(Nt,Ye)*180/Math.PI}function mn(Oe,De){return jn(De[1],De[0],Ne)+jn(Oe[1],Oe[0],Ne)}function cr(Oe,De){return kn(De[0],De[1],Ne)/kn(Oe[0],Oe[1],Ne)}var Cr={mousedown:We,mousemove:Yt,mouseup:Ze},mi="mousedown",$r="mousemove mouseup";function Sr(){this.evEl=mi,this.evWin=$r,this.pressed=!1,Qe.apply(this,arguments)}de(Sr,Qe,{handler:function(De){var Be=Cr[De.type];Be&We&&De.button===0&&(this.pressed=!0),Be&Yt&&De.which!==1&&(Be=Ze),this.pressed&&(Be&Ze&&(this.pressed=!1),this.callback(this.manager,Be,{pointers:[De],changedPointers:[De],pointerType:xt,srcEvent:De}))}});var dr={pointerdown:We,pointermove:Yt,pointerup:Ze,pointercancel:Pe,pointerout:Pe},Pr={2:Ln,3:st,4:xt,5:tn},Hr="pointerdown",Xi="pointermove pointerup pointercancel";!u&&p.MSPointerEvent&&!p.PointerEvent&&(Hr="MSPointerDown",Xi="MSPointerMove MSPointerUp MSPointerCancel");function Kn(){this.evEl=Hr,this.evWin=Xi,Qe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}de(Kn,Qe,{handler:function(De){var Be=this.store,Ye=!1,Nt=De.type.toLowerCase().replace("ms",""),jt=dr[Nt],un=Pr[De.pointerType]||De.pointerType,Hn=un==Ln,Rn=V(Be,De.pointerId,"pointerId");jt&We&&(De.button===0||Hn)?Rn<0&&(Be.push(De),Rn=Be.length-1):jt&(Ze|Pe)&&(Ye=!0),!(Rn<0)&&(Be[Rn]=De,this.callback(this.manager,jt,{pointers:Be,changedPointers:[De],pointerType:un,srcEvent:De}),Ye&&Be.splice(Rn,1))}});var Gn={touchstart:We,touchmove:Yt,touchend:Ze,touchcancel:Pe},pt="touchstart",Ha="touchstart touchmove touchend touchcancel";function Sa(){this.evTarget=pt,this.evWin=Ha,this.started=!1,Qe.apply(this,arguments)}de(Sa,Qe,{handler:function(De){var Be=Gn[De.type];if(Be===We&&(this.started=!0),!!this.started){var Ye=Qa.call(this,De,Be);Be&(Ze|Pe)&&Ye[0].length-Ye[1].length===0&&(this.started=!1),this.callback(this.manager,Be,{pointers:Ye[0],changedPointers:Ye[1],pointerType:Ln,srcEvent:De})}}});function Qa(Oe,De){var Be=ae(Oe.touches),Ye=ae(Oe.changedTouches);return De&(Ze|Pe)&&(Be=K(Be.concat(Ye),"identifier",!0)),[Be,Ye]}var ma={touchstart:We,touchmove:Yt,touchend:Ze,touchcancel:Pe},Ei="touchstart touchmove touchend touchcancel";function Ia(){this.evTarget=Ei,this.targetIds={},Qe.apply(this,arguments)}de(Ia,Qe,{handler:function(De){var Be=ma[De.type],Ye=si.call(this,De,Be);Ye&&this.callback(this.manager,Be,{pointers:Ye[0],changedPointers:Ye[1],pointerType:Ln,srcEvent:De})}});function si(Oe,De){var Be=ae(Oe.touches),Ye=this.targetIds;if(De&(We|Yt)&&Be.length===1)return Ye[Be[0].identifier]=!0,[Be,Be];var Nt,jt,un=ae(Oe.changedTouches),Hn=[],Rn=this.target;if(jt=Be.filter(function(fr){return be(fr.target,Rn)}),De===We)for(Nt=0;Nt<jt.length;)Ye[jt[Nt].identifier]=!0,Nt++;for(Nt=0;Nt<un.length;)Ye[un[Nt].identifier]&&Hn.push(un[Nt]),De&(Ze|Pe)&&delete Ye[un[Nt].identifier],Nt++;if(Hn.length)return[K(jt.concat(Hn),"identifier",!0),Hn]}var it=2500,Qn=25;function pe(){Qe.apply(this,arguments);var Oe=H(this.handler,this);this.touch=new Ia(this.manager,Oe),this.mouse=new Sr(this.manager,Oe),this.primaryTouch=null,this.lastTouches=[]}de(pe,Qe,{handler:function(De,Be,Ye){var Nt=Ye.pointerType==Ln,jt=Ye.pointerType==xt;if(!(jt&&Ye.sourceCapabilities&&Ye.sourceCapabilities.firesTouchEvents)){if(Nt)at.call(this,Be,Ye);else if(jt&&vn.call(this,Ye))return;this.callback(De,Be,Ye)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function at(Oe,De){Oe&We?(this.primaryTouch=De.changedPointers[0].identifier,Dt.call(this,De)):Oe&(Ze|Pe)&&Dt.call(this,De)}function Dt(Oe){var De=Oe.changedPointers[0];if(De.identifier===this.primaryTouch){var Be={x:De.clientX,y:De.clientY};this.lastTouches.push(Be);var Ye=this.lastTouches,Nt=function(){var jt=Ye.indexOf(Be);jt>-1&&Ye.splice(jt,1)};setTimeout(Nt,it)}}function vn(Oe){for(var De=Oe.srcEvent.clientX,Be=Oe.srcEvent.clientY,Ye=0;Ye<this.lastTouches.length;Ye++){var Nt=this.lastTouches[Ye],jt=Math.abs(De-Nt.x),un=Math.abs(Be-Nt.y);if(jt<=Qn&&un<=Qn)return!0}return!1}var bn=u?g:he(e.style,"touchAction"),Pn=bn!==g,ar="compute",Zr="auto",Xr="manipulation",ui="none",qr="pan-x",Ti="pan-y",fa=Ji();function Bn(Oe,De){this.manager=Oe,this.set(De)}Bn.prototype={set:function(Oe){Oe==ar&&(Oe=this.compute()),Pn&&this.manager.element.style&&fa[Oe]&&(this.manager.element.style[bn]=Oe),this.actions=Oe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Oe=[];return F(this.manager.recognizers,function(De){ue(De.options.enable,[De])&&(Oe=Oe.concat(De.getTouchAction()))}),Li(Oe.join(" "))},preventDefaults:function(Oe){var De=Oe.srcEvent,Be=Oe.offsetDirection;if(this.manager.session.prevented){De.preventDefault();return}var Ye=this.actions,Nt=G(Ye,ui)&&!fa[ui],jt=G(Ye,Ti)&&!fa[Ti],un=G(Ye,qr)&&!fa[qr];if(Nt){var Hn=Oe.pointers.length===1,Rn=Oe.distance<2,fr=Oe.deltaTime<250;if(Hn&&Rn&&fr)return}if(!(un&&jt)&&(Nt||jt&&Be&oe||un&&Be&ce))return this.preventSrc(De)},preventSrc:function(Oe){this.manager.session.prevented=!0,Oe.preventDefault()}};function Li(Oe){if(G(Oe,ui))return ui;var De=G(Oe,qr),Be=G(Oe,Ti);return De&&Be?ui:De||Be?De?qr:Ti:G(Oe,Xr)?Xr:Zr}function Ji(){if(!Pn)return!1;var Oe={};if(u)return Oe;var De=p.CSS&&p.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Be){Oe[Be]=De?p.CSS.supports("touch-action",Be):!0}),Oe}var Na=1,ea=2,ha=4,Ta=8,Aa=Ta,Wi=16,go=32;function Ja(Oe){this.options=L({},this.defaults,Oe||{}),this.id=Fe(),this.manager=null,this.options.enable=ve(this.options.enable,!0),this.state=Na,this.simultaneous={},this.requireFail=[]}Ja.prototype={defaults:{},set:function(Oe){return L(this.options,Oe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Oe){if(D(Oe,"recognizeWith",this))return this;var De=this.simultaneous;return Oe=Wa(Oe,this),De[Oe.id]||(De[Oe.id]=Oe,Oe.recognizeWith(this)),this},dropRecognizeWith:function(Oe){return D(Oe,"dropRecognizeWith",this)?this:(Oe=Wa(Oe,this),delete this.simultaneous[Oe.id],this)},requireFailure:function(Oe){if(D(Oe,"requireFailure",this))return this;var De=this.requireFail;return Oe=Wa(Oe,this),V(De,Oe)===-1&&(De.push(Oe),Oe.requireFailure(this)),this},dropRequireFailure:function(Oe){if(D(Oe,"dropRequireFailure",this))return this;Oe=Wa(Oe,this);var De=V(this.requireFail,Oe);return De>-1&&this.requireFail.splice(De,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Oe){return!!this.simultaneous[Oe.id]},emit:function(Oe){var De=this,Be=this.state;function Ye(Nt){De.manager.emit(Nt,Oe)}Be<Ta&&Ye(De.options.event+$o(Be)),Ye(De.options.event),Oe.additionalEvent&&Ye(Oe.additionalEvent),Be>=Ta&&Ye(De.options.event+$o(Be))},tryEmit:function(Oe){if(this.canEmit())return this.emit(Oe);this.state=go},canEmit:function(){for(var Oe=0;Oe<this.requireFail.length;){if(!(this.requireFail[Oe].state&(go|Na)))return!1;Oe++}return!0},recognize:function(Oe){var De=L({},Oe);if(!ue(this.options.enable,[this,De])){this.reset(),this.state=go;return}this.state&(Aa|Wi|go)&&(this.state=Na),this.state=this.process(De),this.state&(ea|ha|Ta|Wi)&&this.tryEmit(De)},process:function(Oe){},getTouchAction:function(){},reset:function(){}};function $o(Oe){return Oe&Wi?"cancel":Oe&Ta?"end":Oe&ha?"move":Oe&ea?"start":""}function Ua(Oe){return Oe==_e?"down":Oe==ne?"up":Oe==ht?"left":Oe==P?"right":""}function Wa(Oe,De){var Be=De.manager;return Be?Be.get(Oe):Oe}function mo(){Ja.apply(this,arguments)}de(mo,Ja,{defaults:{pointers:1},attrTest:function(Oe){var De=this.options.pointers;return De===0||Oe.pointers.length===De},process:function(Oe){var De=this.state,Be=Oe.eventType,Ye=De&(ea|ha),Nt=this.attrTest(Oe);return Ye&&(Be&Pe||!Nt)?De|Wi:Ye||Nt?Be&Ze?De|Ta:De&ea?De|ha:ea:go}});function fo(){mo.apply(this,arguments),this.pX=null,this.pY=null}de(fo,mo,{defaults:{event:"pan",threshold:10,pointers:1,direction:ye},getTouchAction:function(){var Oe=this.options.direction,De=[];return Oe&oe&&De.push(Ti),Oe&ce&&De.push(qr),De},directionTest:function(Oe){var De=this.options,Be=!0,Ye=Oe.distance,Nt=Oe.direction,jt=Oe.deltaX,un=Oe.deltaY;return Nt&De.direction||(De.direction&oe?(Nt=jt===0?ze:jt<0?ht:P,Be=jt!=this.pX,Ye=Math.abs(Oe.deltaX)):(Nt=un===0?ze:un<0?ne:_e,Be=un!=this.pY,Ye=Math.abs(Oe.deltaY))),Oe.direction=Nt,Be&&Ye>De.threshold&&Nt&De.direction},attrTest:function(Oe){return mo.prototype.attrTest.call(this,Oe)&&(this.state&ea||!(this.state&ea)&&this.directionTest(Oe))},emit:function(Oe){this.pX=Oe.deltaX,this.pY=Oe.deltaY;var De=Ua(Oe.direction);De&&(Oe.additionalEvent=this.options.event+De),this._super.emit.call(this,Oe)}});function Ro(){mo.apply(this,arguments)}de(Ro,mo,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ui]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.scale-1)>this.options.threshold||this.state&ea)},emit:function(Oe){if(Oe.scale!==1){var De=Oe.scale<1?"in":"out";Oe.additionalEvent=this.options.event+De}this._super.emit.call(this,Oe)}});function te(){Ja.apply(this,arguments),this._timer=null,this._input=null}de(te,Ja,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Zr]},process:function(Oe){var De=this.options,Be=Oe.pointers.length===De.pointers,Ye=Oe.distance<De.threshold,Nt=Oe.deltaTime>De.time;if(this._input=Oe,!Ye||!Be||Oe.eventType&(Ze|Pe)&&!Nt)this.reset();else if(Oe.eventType&We)this.reset(),this._timer=w(function(){this.state=Aa,this.tryEmit()},De.time,this);else if(Oe.eventType&Ze)return Aa;return go},reset:function(){clearTimeout(this._timer)},emit:function(Oe){this.state===Aa&&(Oe&&Oe.eventType&Ze?this.manager.emit(this.options.event+"up",Oe):(this._input.timeStamp=A(),this.manager.emit(this.options.event,this._input)))}});function ho(){mo.apply(this,arguments)}de(ho,mo,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ui]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.rotation)>this.options.threshold||this.state&ea)}});function wn(){mo.apply(this,arguments)}de(wn,mo,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:oe|ce,pointers:1},getTouchAction:function(){return fo.prototype.getTouchAction.call(this)},attrTest:function(Oe){var De=this.options.direction,Be;return De&(oe|ce)?Be=Oe.overallVelocity:De&oe?Be=Oe.overallVelocityX:De&ce&&(Be=Oe.overallVelocityY),this._super.attrTest.call(this,Oe)&&De&Oe.offsetDirection&&Oe.distance>this.options.threshold&&Oe.maxPointers==this.options.pointers&&b(Be)>this.options.velocity&&Oe.eventType&Ze},emit:function(Oe){var De=Ua(Oe.offsetDirection);De&&this.manager.emit(this.options.event+De,Oe),this.manager.emit(this.options.event,Oe)}});function tt(){Ja.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}de(tt,Ja,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xr]},process:function(Oe){var De=this.options,Be=Oe.pointers.length===De.pointers,Ye=Oe.distance<De.threshold,Nt=Oe.deltaTime<De.time;if(this.reset(),Oe.eventType&We&&this.count===0)return this.failTimeout();if(Ye&&Nt&&Be){if(Oe.eventType!=Ze)return this.failTimeout();var jt=this.pTime?Oe.timeStamp-this.pTime<De.interval:!0,un=!this.pCenter||kn(this.pCenter,Oe.center)<De.posThreshold;this.pTime=Oe.timeStamp,this.pCenter=Oe.center,!un||!jt?this.count=1:this.count+=1,this._input=Oe;var Hn=this.count%De.taps;if(Hn===0)return this.hasRequireFailures()?(this._timer=w(function(){this.state=Aa,this.tryEmit()},De.interval,this),ea):Aa}return go},failTimeout:function(){return this._timer=w(function(){this.state=go},this.options.interval,this),go},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Aa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function $e(Oe,De){return De=De||{},De.recognizers=ve(De.recognizers,$e.defaults.preset),new qt(Oe,De)}$e.VERSION="2.0.7",$e.defaults={domEvents:!1,touchAction:ar,enable:!0,inputTarget:null,inputClass:null,preset:[[ho,{enable:!1}],[Ro,{enable:!1},["rotate"]],[wn,{direction:oe}],[fo,{direction:oe},["swipe"]],[tt],[tt,{event:"doubletap",taps:2},["tap"]],[te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dt=1,Ke=2;function qt(Oe,De){this.options=L({},$e.defaults,De||{}),this.options.inputTarget=this.options.inputTarget||Oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Oe,this.input=mt(this),this.touchAction=new Bn(this,this.options.touchAction),nn(this,!0),F(this.options.recognizers,function(Be){var Ye=this.add(new Be[0](Be[1]));Be[2]&&Ye.recognizeWith(Be[2]),Be[3]&&Ye.requireFailure(Be[3])},this)}qt.prototype={set:function(Oe){return L(this.options,Oe),Oe.touchAction&&this.touchAction.update(),Oe.inputTarget&&(this.input.destroy(),this.input.target=Oe.inputTarget,this.input.init()),this},stop:function(Oe){this.session.stopped=Oe?Ke:dt},recognize:function(Oe){var De=this.session;if(!De.stopped){this.touchAction.preventDefaults(Oe);var Be,Ye=this.recognizers,Nt=De.curRecognizer;(!Nt||Nt&&Nt.state&Aa)&&(Nt=De.curRecognizer=null);for(var jt=0;jt<Ye.length;)Be=Ye[jt],De.stopped!==Ke&&(!Nt||Be==Nt||Be.canRecognizeWith(Nt))?Be.recognize(Oe):Be.reset(),!Nt&&Be.state&(ea|ha|Ta)&&(Nt=De.curRecognizer=Be),jt++}},get:function(Oe){if(Oe instanceof Ja)return Oe;for(var De=this.recognizers,Be=0;Be<De.length;Be++)if(De[Be].options.event==Oe)return De[Be];return null},add:function(Oe){if(D(Oe,"add",this))return this;var De=this.get(Oe.options.event);return De&&this.remove(De),this.recognizers.push(Oe),Oe.manager=this,this.touchAction.update(),Oe},remove:function(Oe){if(D(Oe,"remove",this))return this;if(Oe=this.get(Oe),Oe){var De=this.recognizers,Be=V(De,Oe);Be!==-1&&(De.splice(Be,1),this.touchAction.update())}return this},on:function(Oe,De){if(Oe!==g&&De!==g){var Be=this.handlers;return F(ie(Oe),function(Ye){Be[Ye]=Be[Ye]||[],Be[Ye].push(De)}),this}},off:function(Oe,De){if(Oe!==g){var Be=this.handlers;return F(ie(Oe),function(Ye){De?Be[Ye]&&Be[Ye].splice(V(Be[Ye],De),1):delete Be[Ye]}),this}},emit:function(Oe,De){this.options.domEvents&&ln(Oe,De);var Be=this.handlers[Oe]&&this.handlers[Oe].slice();if(!(!Be||!Be.length)){De.type=Oe,De.preventDefault=function(){De.srcEvent.preventDefault()};for(var Ye=0;Ye<Be.length;)Be[Ye](De),Ye++}},destroy:function(){this.element&&nn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function nn(Oe,De){var Be=Oe.element;if(Be.style){var Ye;F(Oe.options.cssProps,function(Nt,jt){Ye=he(Be.style,jt),De?(Oe.oldCssProps[Ye]=Be.style[Ye],Be.style[Ye]=Nt):Be.style[Ye]=Oe.oldCssProps[Ye]||""}),De||(Oe.oldCssProps={})}}function ln(Oe,De){if(!u){var Be=M.createEvent("Event");Be.initEvent(Oe,!0,!0),Be.gesture=De,De.target.dispatchEvent(Be)}}if(!u){L($e,{INPUT_START:We,INPUT_MOVE:Yt,INPUT_END:Ze,INPUT_CANCEL:Pe,STATE_POSSIBLE:Na,STATE_BEGAN:ea,STATE_CHANGED:ha,STATE_ENDED:Ta,STATE_RECOGNIZED:Aa,STATE_CANCELLED:Wi,STATE_FAILED:go,DIRECTION_NONE:ze,DIRECTION_LEFT:ht,DIRECTION_RIGHT:P,DIRECTION_UP:ne,DIRECTION_DOWN:_e,DIRECTION_HORIZONTAL:oe,DIRECTION_VERTICAL:ce,DIRECTION_ALL:ye,Manager:qt,Input:Qe,TouchAction:Bn,TouchInput:Ia,MouseInput:Sr,PointerEventInput:Kn,TouchMouseInput:pe,SingleTouchInput:Sa,Recognizer:Ja,AttrRecognizer:mo,Tap:tt,Pan:fo,Swipe:wn,Pinch:Ro,Rotate:ho,Press:te,on:ke,off:Ae,each:F,merge:k,extend:W,assign:L,inherit:de,bindFn:H,prefixed:he});var An=typeof window!="undefined"?window:typeof self!="undefined"?self:{};An.Hammer=$e,E=function(){return $e}.call(S,y,S,Ie),E!==g&&(Ie.exports=E)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},88307:function(Ie,S,y){(function(E,p){Ie.exports=p(y(51260))})(this,function(E){"use strict";var p=function(Me){return Me instanceof Uint8Array||Me instanceof Uint16Array||Me instanceof Uint32Array||Me instanceof Int8Array||Me instanceof Int16Array||Me instanceof Int32Array||Me instanceof Float32Array||Me instanceof Float64Array||Me instanceof Uint8ClampedArray},M=function(Me,ft){for(var Zt=Object.keys(ft),Dn=0;Dn<Zt.length;++Dn)Me[Zt[Dn]]=ft[Zt[Dn]];return Me},d=`
`;function g(Me){return typeof atob!="undefined"?atob(Me):"base64:"+Me}function x(Me){var ft=new Error("(regl) "+Me);throw console.error(ft),ft}function v(Me,ft){Me||x(ft)}function u(Me){return Me?": "+Me:""}function t(Me,ft,Zt){Me in ft||x("unknown parameter ("+Me+")"+u(Zt)+". possible values: "+Object.keys(ft).join())}function e(Me,ft){p(Me)||x("invalid parameter type"+u(ft)+". must be a typed array")}function o(Me,ft){switch(ft){case"number":return typeof Me=="number";case"object":return typeof Me=="object";case"string":return typeof Me=="string";case"boolean":return typeof Me=="boolean";case"function":return typeof Me=="function";case"undefined":return typeof Me=="undefined";case"symbol":return typeof Me=="symbol"}}function c(Me,ft,Zt){o(Me,ft)||x("invalid parameter type"+u(Zt)+". expected "+ft+", got "+typeof Me)}function b(Me,ft){Me>=0&&(Me|0)===Me||x("invalid parameter type, ("+Me+")"+u(ft)+". must be a nonnegative integer")}function A(Me,ft,Zt){ft.indexOf(Me)<0&&x("invalid value"+u(Zt)+". must be one of: "+ft)}var w=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function D(Me){Object.keys(Me).forEach(function(ft){w.indexOf(ft)<0&&x('invalid regl constructor argument "'+ft+'". must be one of '+w)})}function F(Me,ft){for(Me=Me+"";Me.length<ft;)Me=" "+Me;return Me}function Z(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function L(Me,ft){this.number=Me,this.line=ft,this.errors=[]}function W(Me,ft,Zt){this.file=Me,this.line=ft,this.message=Zt}function k(){var Me=new Error,ft=(Me.stack||Me).toString(),Zt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ft);if(Zt)return Zt[1];var Dn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ft);return Dn?Dn[1]:"unknown"}function de(){var Me=new Error,ft=(Me.stack||Me).toString(),Zt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ft);if(Zt)return Zt[1];var Dn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ft);return Dn?Dn[1]:"unknown"}function H(Me,ft){var Zt=Me.split(`
`),Dn=1,mr=0,Xn={unknown:new Z,0:new Z};Xn.unknown.name=Xn[0].name=ft||k(),Xn.unknown.lines.push(new L(0,""));for(var ir=0;ir<Zt.length;++ir){var br=Zt[ir],Or=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(br);if(Or)switch(Or[1]){case"line":var Dr=/(\d+)(\s+\d+)?/.exec(Or[2]);Dr&&(Dn=Dr[1]|0,Dr[2]&&(mr=Dr[2]|0,mr in Xn||(Xn[mr]=new Z)));break;case"define":var jr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Or[2]);jr&&(Xn[mr].name=jr[1]?g(jr[2]):jr[2]);break}Xn[mr].lines.push(new L(Dn++,br))}return Object.keys(Xn).forEach(function(Ur){var Gr=Xn[Ur];Gr.lines.forEach(function(xr){Gr.index[xr.number]=xr})}),Xn}function ue(Me){var ft=[];return Me.split(`
`).forEach(function(Zt){if(!(Zt.length<5)){var Dn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Zt);Dn?ft.push(new W(Dn[1]|0,Dn[2]|0,Dn[3].trim())):Zt.length>0&&ft.push(new W("unknown",0,Zt))}}),ft}function ve(Me,ft){ft.forEach(function(Zt){var Dn=Me[Zt.file];if(Dn){var mr=Dn.index[Zt.line];if(mr){mr.errors.push(Zt),Dn.hasErrors=!0;return}}Me.unknown.hasErrors=!0,Me.unknown.lines[0].errors.push(Zt)})}function ke(Me,ft,Zt,Dn,mr){if(!Me.getShaderParameter(ft,Me.COMPILE_STATUS)){var Xn=Me.getShaderInfoLog(ft),ir=Dn===Me.FRAGMENT_SHADER?"fragment":"vertex";K(Zt,"string",ir+" shader source must be a string",mr);var br=H(Zt,mr),Or=ue(Xn);ve(br,Or),Object.keys(br).forEach(function(Dr){var jr=br[Dr];if(!jr.hasErrors)return;var Ur=[""],Gr=[""];function xr(Lr,Tn){Ur.push(Lr),Gr.push(Tn||"")}xr("file number "+Dr+": "+jr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),jr.lines.forEach(function(Lr){if(Lr.errors.length>0){xr(F(Lr.number,4)+"|  ","background-color:yellow; font-weight:bold"),xr(Lr.line+d,"color:red; background-color:yellow; font-weight:bold");var Tn=0;Lr.errors.forEach(function(tr){var Fr=tr.message,pi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Fr);if(pi){var Tr=pi[1];switch(Fr=pi[2],Tr){case"assign":Tr="=";break}Tn=Math.max(Lr.line.indexOf(Tr,Tn),0)}else Tn=0;xr(F("| ",6)),xr(F("^^^",Tn+3)+d,"font-weight:bold"),xr(F("| ",6)),xr(Fr+d,"font-weight:bold")}),xr(F("| ",6)+d)}else xr(F(Lr.number,4)+"|  "),xr(Lr.line+d,"color:red")}),typeof document!="undefined"&&!window.chrome?(Gr[0]=Ur.join("%c"),console.log.apply(console,Gr)):console.log(Ur.join(""))}),v.raise("Error compiling "+ir+" shader, "+br[0].name)}}function Ae(Me,ft,Zt,Dn,mr){if(!Me.getProgramParameter(ft,Me.LINK_STATUS)){var Xn=Me.getProgramInfoLog(ft),ir=H(Zt,mr),br=H(Dn,mr),Or='Error linking program with vertex shader, "'+br[0].name+'", and fragment shader "'+ir[0].name+'"';typeof document!="undefined"?console.log("%c"+Or+d+"%c"+Xn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Or+d+Xn),v.raise(Or)}}function be(Me){Me._commandRef=k()}function G(Me,ft,Zt,Dn){be(Me);function mr(Or){return Or?Dn.id(Or):0}Me._fragId=mr(Me.static.frag),Me._vertId=mr(Me.static.vert);function Xn(Or,Dr){Object.keys(Dr).forEach(function(jr){Or[Dn.id(jr)]=!0})}var ir=Me._uniformSet={};Xn(ir,ft.static),Xn(ir,ft.dynamic);var br=Me._attributeSet={};Xn(br,Zt.static),Xn(br,Zt.dynamic),Me._hasCount="count"in Me.static||"count"in Me.dynamic||"elements"in Me.static||"elements"in Me.dynamic}function ie(Me,ft){var Zt=de();x(Me+" in command "+(ft||k())+(Zt==="unknown"?"":" called from "+Zt))}function V(Me,ft,Zt){Me||ie(ft,Zt||k())}function ae(Me,ft,Zt,Dn){Me in ft||ie("unknown parameter ("+Me+")"+u(Zt)+". possible values: "+Object.keys(ft).join(),Dn||k())}function K(Me,ft,Zt,Dn){o(Me,ft)||ie("invalid parameter type"+u(Zt)+". expected "+ft+", got "+typeof Me,Dn||k())}function he(Me){Me()}function Se(Me,ft,Zt){Me.texture?A(Me.texture._texture.internalformat,ft,"unsupported texture format for attachment"):A(Me.renderbuffer._renderbuffer.format,Zt,"unsupported renderbuffer format for attachment")}var Fe=33071,nt=9728,lt=9984,Gt=9985,pn=9986,$n=9987,Ln=5120,st=5121,xt=5122,tn=5123,Un=5124,We=5125,Yt=5126,Ze=32819,Pe=32820,ze=33635,ht=34042,P=36193,ne={};ne[Ln]=ne[st]=1,ne[xt]=ne[tn]=ne[P]=ne[ze]=ne[Ze]=ne[Pe]=2,ne[Un]=ne[We]=ne[Yt]=ne[ht]=4;function _e(Me,ft){return Me===Pe||Me===Ze||Me===ze?2:Me===ht?4:ne[Me]*ft}function oe(Me){return!(Me&Me-1)&&!!Me}function ce(Me,ft,Zt){var Dn,mr=ft.width,Xn=ft.height,ir=ft.channels;v(mr>0&&mr<=Zt.maxTextureSize&&Xn>0&&Xn<=Zt.maxTextureSize,"invalid texture shape"),(Me.wrapS!==Fe||Me.wrapT!==Fe)&&v(oe(mr)&&oe(Xn),"incompatible wrap mode for texture, both width and height must be power of 2"),ft.mipmask===1?mr!==1&&Xn!==1&&v(Me.minFilter!==lt&&Me.minFilter!==pn&&Me.minFilter!==Gt&&Me.minFilter!==$n,"min filter requires mipmap"):(v(oe(mr)&&oe(Xn),"texture must be a square power of 2 to support mipmapping"),v(ft.mipmask===(mr<<1)-1,"missing or incomplete mipmap data")),ft.type===Yt&&(Zt.extensions.indexOf("oes_texture_float_linear")<0&&v(Me.minFilter===nt&&Me.magFilter===nt,"filter not supported, must enable oes_texture_float_linear"),v(!Me.genMipmaps,"mipmap generation not supported with float textures"));var br=ft.images;for(Dn=0;Dn<16;++Dn)if(br[Dn]){var Or=mr>>Dn,Dr=Xn>>Dn;v(ft.mipmask&1<<Dn,"missing mipmap data");var jr=br[Dn];if(v(jr.width===Or&&jr.height===Dr,"invalid shape for mip images"),v(jr.format===ft.format&&jr.internalformat===ft.internalformat&&jr.type===ft.type,"incompatible type for mip image"),!jr.compressed)if(jr.data){var Ur=Math.ceil(_e(jr.type,ir)*Or/jr.unpackAlignment)*jr.unpackAlignment;v(jr.data.byteLength===Ur*Dr,"invalid data for image, buffer size is inconsistent with image format")}else jr.element||jr.copy}else Me.genMipmaps||v((ft.mipmask&1<<Dn)===0,"extra mipmap data");ft.compressed&&v(!Me.genMipmaps,"mipmap generation for compressed images not supported")}function ye(Me,ft,Zt,Dn){var mr=Me.width,Xn=Me.height,ir=Me.channels;v(mr>0&&mr<=Dn.maxTextureSize&&Xn>0&&Xn<=Dn.maxTextureSize,"invalid texture shape"),v(mr===Xn,"cube map must be square"),v(ft.wrapS===Fe&&ft.wrapT===Fe,"wrap mode not supported by cube map");for(var br=0;br<Zt.length;++br){var Or=Zt[br];v(Or.width===mr&&Or.height===Xn,"inconsistent cube map face shape"),ft.genMipmaps&&(v(!Or.compressed,"can not generate mipmap for compressed textures"),v(Or.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Dr=Or.images,jr=0;jr<16;++jr){var Ur=Dr[jr];if(Ur){var Gr=mr>>jr,xr=Xn>>jr;v(Or.mipmask&1<<jr,"missing mipmap data"),v(Ur.width===Gr&&Ur.height===xr,"invalid shape for mip images"),v(Ur.format===Me.format&&Ur.internalformat===Me.internalformat&&Ur.type===Me.type,"incompatible type for mip image"),Ur.compressed||(Ur.data?v(Ur.data.byteLength===Gr*xr*Math.max(_e(Ur.type,ir),Ur.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ur.element||Ur.copy)}}}}var Y=M(v,{optional:he,raise:x,commandRaise:ie,command:V,parameter:t,commandParameter:ae,constructor:D,type:c,commandType:K,isTypedArray:e,nni:b,oneOf:A,shaderError:ke,linkError:Ae,callSite:de,saveCommandRef:be,saveDrawInfo:G,framebufferFormat:Se,guessCommand:k,texture2D:ce,textureCube:ye}),Ne=0,Qe=0,mt=5,Ve=6;function rt(Me,ft){this.id=Ne++,this.type=Me,this.data=ft}function yt(Me){return Me.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Tt(Me){if(Me.length===0)return[];var ft=Me.charAt(0),Zt=Me.charAt(Me.length-1);if(Me.length>1&&ft===Zt&&(ft==='"'||ft==="'"))return['"'+yt(Me.substr(1,Me.length-2))+'"'];var Dn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Me);if(Dn)return Tt(Me.substr(0,Dn.index)).concat(Tt(Dn[1])).concat(Tt(Me.substr(Dn.index+Dn[0].length)));var mr=Me.split(".");if(mr.length===1)return['"'+yt(Me)+'"'];for(var Xn=[],ir=0;ir<mr.length;++ir)Xn=Xn.concat(Tt(mr[ir]));return Xn}function Ht(Me){return"["+Tt(Me).join("][")+"]"}function en(Me,ft){return new rt(Me,Ht(ft+""))}function wt(Me){return typeof Me=="function"&&!Me._reglType||Me instanceof rt}function Mn(Me,ft){if(typeof Me=="function")return new rt(Qe,Me);if(typeof Me=="number"||typeof Me=="boolean")return new rt(mt,Me);if(Array.isArray(Me))return new rt(Ve,Me.map(function(Zt,Dn){return Mn(Zt,ft+"["+Dn+"]")}));if(Me instanceof rt)return Me;Y(!1,"invalid option type in uniform "+ft)}var kn={DynamicVariable:rt,define:en,isDynamic:wt,unbox:Mn,accessor:Ht},jn={next:typeof requestAnimationFrame=="function"?function(Me){return requestAnimationFrame(Me)}:function(Me){return setTimeout(Me,16)},cancel:typeof cancelAnimationFrame=="function"?function(Me){return cancelAnimationFrame(Me)}:clearTimeout},mn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,cr=mn?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Cr(){var Me={"":0},ft=[""];return{id:function(Zt){var Dn=Me[Zt];return Dn||(Dn=Me[Zt]=ft.length,ft.push(Zt),Dn)},str:function(Zt){return ft[Zt]}}}function mi(Me,ft,Zt){var Dn=document.createElement("canvas");M(Dn.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Me.appendChild(Dn),Me===document.body&&(Dn.style.position="absolute",M(Me.style,{margin:0,padding:0}));function mr(){var br=window.innerWidth,Or=window.innerHeight;if(Me!==document.body){var Dr=Dn.getBoundingClientRect();br=Dr.right-Dr.left,Or=Dr.bottom-Dr.top}Dn.width=Zt*br,Dn.height=Zt*Or}var Xn;Me!==document.body&&typeof ResizeObserver=="function"?(Xn=new ResizeObserver(function(){setTimeout(mr)}),Xn.observe(Me)):window.addEventListener("resize",mr,!1);function ir(){Xn?Xn.disconnect():window.removeEventListener("resize",mr),Me.removeChild(Dn)}return mr(),{canvas:Dn,onDestroy:ir}}function $r(Me,ft){function Zt(Dn){try{return Me.getContext(Dn,ft)}catch(mr){return null}}return Zt("webgl")||Zt("experimental-webgl")||Zt("webgl-experimental")}function Sr(Me){return typeof Me.nodeName=="string"&&typeof Me.appendChild=="function"&&typeof Me.getBoundingClientRect=="function"}function dr(Me){return typeof Me.drawArrays=="function"||typeof Me.drawElements=="function"}function Pr(Me){return typeof Me=="string"?Me.split():(Y(Array.isArray(Me),"invalid extension array"),Me)}function Hr(Me){return typeof Me=="string"?(Y(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Me)):Me}function Xi(Me){var ft=Me||{},Zt,Dn,mr,Xn,ir={},br=[],Or=[],Dr=typeof window=="undefined"?1:window.devicePixelRatio,jr=!1,Ur=function(Lr){Lr&&Y.raise(Lr)},Gr=function(){};if(typeof ft=="string"?(Y(typeof document!="undefined","selector queries only supported in DOM environments"),Zt=document.querySelector(ft),Y(Zt,"invalid query string for element")):typeof ft=="object"?Sr(ft)?Zt=ft:dr(ft)?(Xn=ft,mr=Xn.canvas):(Y.constructor(ft),"gl"in ft?Xn=ft.gl:"canvas"in ft?mr=Hr(ft.canvas):"container"in ft&&(Dn=Hr(ft.container)),"attributes"in ft&&(ir=ft.attributes,Y.type(ir,"object","invalid context attributes")),"extensions"in ft&&(br=Pr(ft.extensions)),"optionalExtensions"in ft&&(Or=Pr(ft.optionalExtensions)),"onDone"in ft&&(Y.type(ft.onDone,"function","invalid or missing onDone callback"),Ur=ft.onDone),"profile"in ft&&(jr=!!ft.profile),"pixelRatio"in ft&&(Dr=+ft.pixelRatio,Y(Dr>0,"invalid pixel ratio"))):Y.raise("invalid arguments to regl"),Zt&&(Zt.nodeName.toLowerCase()==="canvas"?mr=Zt:Dn=Zt),!Xn){if(!mr){Y(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var xr=mi(Dn||document.body,Ur,Dr);if(!xr)return null;mr=xr.canvas,Gr=xr.onDestroy}ir.premultipliedAlpha===void 0&&(ir.premultipliedAlpha=!0),Xn=$r(mr,ir)}return Xn?{gl:Xn,canvas:mr,container:Dn,extensions:br,optionalExtensions:Or,pixelRatio:Dr,profile:jr,onDone:Ur,onDestroy:Gr}:(Gr(),Ur("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kn(Me,ft){var Zt={};function Dn(br){Y.type(br,"string","extension name must be string");var Or=br.toLowerCase(),Dr;try{Dr=Zt[Or]=mr(br)}catch(jr){}return!!Dr}function mr(br){return Me.getExtension(br)?Me.getExtension(br):Me.getExtension(br.toLowerCase())?Me.getExtension(br.toLowerCase()):null}for(var Xn=0;Xn<ft.extensions.length;++Xn){var ir=ft.extensions[Xn];if(!Dn(ir))return ft.onDestroy(),ft.onDone('"'+ir+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ft.optionalExtensions.forEach(Dn),{extensions:Zt,restore:function(){Object.keys(Zt).forEach(function(br){if(Zt[br]&&!Dn(br))throw new Error("(regl): error restoring extension "+br)})}}}function Gn(Me,ft){for(var Zt=Array(Me),Dn=0;Dn<Me;++Dn)Zt[Dn]=ft(Dn);return Zt}var pt=5120,Ha=5121,Sa=5122,Qa=5123,ma=5124,Ei=5125,Ia=5126;function si(Me){for(var ft=16;ft<=1<<28;ft*=16)if(Me<=ft)return ft;return 0}function it(Me){var ft,Zt;return ft=(Me>65535)<<4,Me>>>=ft,Zt=(Me>255)<<3,Me>>>=Zt,ft|=Zt,Zt=(Me>15)<<2,Me>>>=Zt,ft|=Zt,Zt=(Me>3)<<1,Me>>>=Zt,ft|=Zt,ft|Me>>1}function Qn(){var Me=Gn(8,function(){return[]});function ft(Xn){var ir=si(Xn),br=Me[it(ir)>>2];return br.length>0?br.pop():new ArrayBuffer(ir)}function Zt(Xn){Me[it(Xn.byteLength)>>2].push(Xn)}function Dn(Xn,ir){var br=null;switch(Xn){case pt:br=new Int8Array(ft(ir),0,ir);break;case Ha:br=new Uint8Array(ft(ir),0,ir);break;case Sa:br=new Int16Array(ft(2*ir),0,ir);break;case Qa:br=new Uint16Array(ft(2*ir),0,ir);break;case ma:br=new Int32Array(ft(4*ir),0,ir);break;case Ei:br=new Uint32Array(ft(4*ir),0,ir);break;case Ia:br=new Float32Array(ft(4*ir),0,ir);break;default:return null}return br.length!==ir?br.subarray(0,ir):br}function mr(Xn){Zt(Xn.buffer)}return{alloc:ft,free:Zt,allocType:Dn,freeType:mr}}var pe=Qn();pe.zero=Qn();var at=3408,Dt=3410,vn=3411,bn=3412,Pn=3413,ar=3414,Zr=3415,Xr=33901,ui=33902,qr=3379,Ti=3386,fa=34921,Bn=36347,Li=36348,Ji=35661,Na=35660,ea=34930,ha=36349,Ta=34076,Aa=34024,Wi=7936,go=7937,Ja=7938,$o=35724,Ua=34047,Wa=36063,mo=34852,fo=3553,Ro=34067,te=34069,ho=33984,wn=6408,tt=5126,$e=5121,dt=36160,Ke=36053,qt=36064,nn=16384,ln=function(Me,ft){var Zt=1;ft.ext_texture_filter_anisotropic&&(Zt=Me.getParameter(Ua));var Dn=1,mr=1;ft.webgl_draw_buffers&&(Dn=Me.getParameter(mo),mr=Me.getParameter(Wa));var Xn=!!ft.oes_texture_float;if(Xn){var ir=Me.createTexture();Me.bindTexture(fo,ir),Me.texImage2D(fo,0,wn,1,1,0,wn,tt,null);var br=Me.createFramebuffer();if(Me.bindFramebuffer(dt,br),Me.framebufferTexture2D(dt,qt,fo,ir,0),Me.bindTexture(fo,null),Me.checkFramebufferStatus(dt)!==Ke)Xn=!1;else{Me.viewport(0,0,1,1),Me.clearColor(1,0,0,1),Me.clear(nn);var Or=pe.allocType(tt,4);Me.readPixels(0,0,1,1,wn,tt,Or),Me.getError()?Xn=!1:(Me.deleteFramebuffer(br),Me.deleteTexture(ir),Xn=Or[0]===1),pe.freeType(Or)}}var Dr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),jr=!0;if(!Dr){var Ur=Me.createTexture(),Gr=pe.allocType($e,36);Me.activeTexture(ho),Me.bindTexture(Ro,Ur),Me.texImage2D(te,0,wn,3,3,0,wn,$e,Gr),pe.freeType(Gr),Me.bindTexture(Ro,null),Me.deleteTexture(Ur),jr=!Me.getError()}return{colorBits:[Me.getParameter(Dt),Me.getParameter(vn),Me.getParameter(bn),Me.getParameter(Pn)],depthBits:Me.getParameter(ar),stencilBits:Me.getParameter(Zr),subpixelBits:Me.getParameter(at),extensions:Object.keys(ft).filter(function(xr){return!!ft[xr]}),maxAnisotropic:Zt,maxDrawbuffers:Dn,maxColorAttachments:mr,pointSizeDims:Me.getParameter(Xr),lineWidthDims:Me.getParameter(ui),maxViewportDims:Me.getParameter(Ti),maxCombinedTextureUnits:Me.getParameter(Ji),maxCubeMapSize:Me.getParameter(Ta),maxRenderbufferSize:Me.getParameter(Aa),maxTextureUnits:Me.getParameter(ea),maxTextureSize:Me.getParameter(qr),maxAttributes:Me.getParameter(fa),maxVertexUniforms:Me.getParameter(Bn),maxVertexTextureUnits:Me.getParameter(Na),maxVaryingVectors:Me.getParameter(Li),maxFragmentUniforms:Me.getParameter(ha),glsl:Me.getParameter($o),renderer:Me.getParameter(go),vendor:Me.getParameter(Wi),version:Me.getParameter(Ja),readFloat:Xn,npotTextureCube:jr}};function An(Me){return!!Me&&typeof Me=="object"&&Array.isArray(Me.shape)&&Array.isArray(Me.stride)&&typeof Me.offset=="number"&&Me.shape.length===Me.stride.length&&(Array.isArray(Me.data)||p(Me.data))}var Oe=function(Me){return Object.keys(Me).map(function(ft){return Me[ft]})},De={shape:Hn,flatten:un};function Be(Me,ft,Zt){for(var Dn=0;Dn<ft;++Dn)Zt[Dn]=Me[Dn]}function Ye(Me,ft,Zt,Dn){for(var mr=0,Xn=0;Xn<ft;++Xn)for(var ir=Me[Xn],br=0;br<Zt;++br)Dn[mr++]=ir[br]}function Nt(Me,ft,Zt,Dn,mr,Xn){for(var ir=Xn,br=0;br<ft;++br)for(var Or=Me[br],Dr=0;Dr<Zt;++Dr)for(var jr=Or[Dr],Ur=0;Ur<Dn;++Ur)mr[ir++]=jr[Ur]}function jt(Me,ft,Zt,Dn,mr){for(var Xn=1,ir=Zt+1;ir<ft.length;++ir)Xn*=ft[ir];var br=ft[Zt];if(ft.length-Zt===4){var Or=ft[Zt+1],Dr=ft[Zt+2],jr=ft[Zt+3];for(ir=0;ir<br;++ir)Nt(Me[ir],Or,Dr,jr,Dn,mr),mr+=Xn}else for(ir=0;ir<br;++ir)jt(Me[ir],ft,Zt+1,Dn,mr),mr+=Xn}function un(Me,ft,Zt,Dn){var mr=1;if(ft.length)for(var Xn=0;Xn<ft.length;++Xn)mr*=ft[Xn];else mr=0;var ir=Dn||pe.allocType(Zt,mr);switch(ft.length){case 0:break;case 1:Be(Me,ft[0],ir);break;case 2:Ye(Me,ft[0],ft[1],ir);break;case 3:Nt(Me,ft[0],ft[1],ft[2],ir,0);break;default:jt(Me,ft,0,ir,0)}return ir}function Hn(Me){for(var ft=[],Zt=Me;Zt.length;Zt=Zt[0])ft.push(Zt.length);return ft}var Rn={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fr=5120,or=5122,$t=5124,er=5121,Jn=5123,Bt=5125,Ai=5126,Le=5126,Xe={int8:fr,int16:or,int32:$t,uint8:er,uint16:Jn,uint32:Bt,float:Ai,float32:Le},He=35048,Ot=35040,Vt={dynamic:He,stream:Ot,static:35044},gn=De.flatten,vt=De.shape,zt=35044,Kt=35040,fn=5121,zn=5126,wr=[];wr[5120]=1,wr[5122]=2,wr[5124]=4,wr[5121]=1,wr[5123]=2,wr[5125]=4,wr[5126]=4;function Er(Me){return Rn[Object.prototype.toString.call(Me)]|0}function _(Me,ft){for(var Zt=0;Zt<ft.length;++Zt)Me[Zt]=ft[Zt]}function N(Me,ft,Zt,Dn,mr,Xn,ir){for(var br=0,Or=0;Or<Zt;++Or)for(var Dr=0;Dr<Dn;++Dr)Me[br++]=ft[mr*Or+Xn*Dr+ir]}function me(Me,ft,Zt,Dn){var mr=0,Xn={};function ir(Tn){this.id=mr++,this.buffer=Me.createBuffer(),this.type=Tn,this.usage=zt,this.byteLength=0,this.dimension=1,this.dtype=fn,this.persistentData=null,Zt.profile&&(this.stats={size:0})}ir.prototype.bind=function(){Me.bindBuffer(this.type,this.buffer)},ir.prototype.destroy=function(){Gr(this)};var br=[];function Or(Tn,tr){var Fr=br.pop();return Fr||(Fr=new ir(Tn)),Fr.bind(),Ur(Fr,tr,Kt,0,1,!1),Fr}function Dr(Tn){br.push(Tn)}function jr(Tn,tr,Fr){Tn.byteLength=tr.byteLength,Me.bufferData(Tn.type,tr,Fr)}function Ur(Tn,tr,Fr,pi,Tr,ai){var oi;if(Tn.usage=Fr,Array.isArray(tr)){if(Tn.dtype=pi||zn,tr.length>0){var Vi;if(Array.isArray(tr[0])){oi=vt(tr);for(var yr=1,vr=1;vr<oi.length;++vr)yr*=oi[vr];Tn.dimension=yr,Vi=gn(tr,oi,Tn.dtype),jr(Tn,Vi,Fr),ai?Tn.persistentData=Vi:pe.freeType(Vi)}else if(typeof tr[0]=="number"){Tn.dimension=Tr;var xi=pe.allocType(Tn.dtype,tr.length);_(xi,tr),jr(Tn,xi,Fr),ai?Tn.persistentData=xi:pe.freeType(xi)}else p(tr[0])?(Tn.dimension=tr[0].length,Tn.dtype=pi||Er(tr[0])||zn,Vi=gn(tr,[tr.length,tr[0].length],Tn.dtype),jr(Tn,Vi,Fr),ai?Tn.persistentData=Vi:pe.freeType(Vi)):Y.raise("invalid buffer data")}}else if(p(tr))Tn.dtype=pi||Er(tr),Tn.dimension=Tr,jr(Tn,tr,Fr),ai&&(Tn.persistentData=new Uint8Array(new Uint8Array(tr.buffer)));else if(An(tr)){oi=tr.shape;var Qr=tr.stride,Rr=tr.offset,ri=0,ei=0,ga=0,Ki=0;oi.length===1?(ri=oi[0],ei=1,ga=Qr[0],Ki=0):oi.length===2?(ri=oi[0],ei=oi[1],ga=Qr[0],Ki=Qr[1]):Y.raise("invalid shape"),Tn.dtype=pi||Er(tr.data)||zn,Tn.dimension=ei;var li=pe.allocType(Tn.dtype,ri*ei);N(li,tr.data,ri,ei,ga,Ki,Rr),jr(Tn,li,Fr),ai?Tn.persistentData=li:pe.freeType(li)}else tr instanceof ArrayBuffer?(Tn.dtype=fn,Tn.dimension=Tr,jr(Tn,tr,Fr),ai&&(Tn.persistentData=new Uint8Array(new Uint8Array(tr)))):Y.raise("invalid buffer data")}function Gr(Tn){ft.bufferCount--,Dn(Tn);var tr=Tn.buffer;Y(tr,"buffer must not be deleted already"),Me.deleteBuffer(tr),Tn.buffer=null,delete Xn[Tn.id]}function xr(Tn,tr,Fr,pi){ft.bufferCount++;var Tr=new ir(tr);Xn[Tr.id]=Tr;function ai(yr){var vr=zt,xi=null,Qr=0,Rr=0,ri=1;return Array.isArray(yr)||p(yr)||An(yr)||yr instanceof ArrayBuffer?xi=yr:typeof yr=="number"?Qr=yr|0:yr&&(Y.type(yr,"object","buffer arguments must be an object, a number or an array"),"data"in yr&&(Y(xi===null||Array.isArray(xi)||p(xi)||An(xi),"invalid data for buffer"),xi=yr.data),"usage"in yr&&(Y.parameter(yr.usage,Vt,"invalid buffer usage"),vr=Vt[yr.usage]),"type"in yr&&(Y.parameter(yr.type,Xe,"invalid buffer type"),Rr=Xe[yr.type]),"dimension"in yr&&(Y.type(yr.dimension,"number","invalid dimension"),ri=yr.dimension|0),"length"in yr&&(Y.nni(Qr,"buffer length must be a nonnegative integer"),Qr=yr.length|0)),Tr.bind(),xi?Ur(Tr,xi,vr,Rr,ri,pi):(Qr&&Me.bufferData(Tr.type,Qr,vr),Tr.dtype=Rr||fn,Tr.usage=vr,Tr.dimension=ri,Tr.byteLength=Qr),Zt.profile&&(Tr.stats.size=Tr.byteLength*wr[Tr.dtype]),ai}function oi(yr,vr){Y(vr+yr.byteLength<=Tr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+yr.byteLength+" starting from offset "+vr+" to a buffer of size "+Tr.byteLength),Me.bufferSubData(Tr.type,vr,yr)}function Vi(yr,vr){var xi=(vr||0)|0,Qr;if(Tr.bind(),p(yr)||yr instanceof ArrayBuffer)oi(yr,xi);else if(Array.isArray(yr)){if(yr.length>0)if(typeof yr[0]=="number"){var Rr=pe.allocType(Tr.dtype,yr.length);_(Rr,yr),oi(Rr,xi),pe.freeType(Rr)}else if(Array.isArray(yr[0])||p(yr[0])){Qr=vt(yr);var ri=gn(yr,Qr,Tr.dtype);oi(ri,xi),pe.freeType(ri)}else Y.raise("invalid buffer data")}else if(An(yr)){Qr=yr.shape;var ei=yr.stride,ga=0,Ki=0,li=0,di=0;Qr.length===1?(ga=Qr[0],Ki=1,li=ei[0],di=0):Qr.length===2?(ga=Qr[0],Ki=Qr[1],li=ei[0],di=ei[1]):Y.raise("invalid shape");var Yi=Array.isArray(yr.data)?Tr.dtype:Er(yr.data),aa=pe.allocType(Yi,ga*Ki);N(aa,yr.data,ga,Ki,li,di,yr.offset),oi(aa,xi),pe.freeType(aa)}else Y.raise("invalid data for buffer subdata");return ai}return Fr||ai(Tn),ai._reglType="buffer",ai._buffer=Tr,ai.subdata=Vi,Zt.profile&&(ai.stats=Tr.stats),ai.destroy=function(){Gr(Tr)},ai}function Lr(){Oe(Xn).forEach(function(Tn){Tn.buffer=Me.createBuffer(),Me.bindBuffer(Tn.type,Tn.buffer),Me.bufferData(Tn.type,Tn.persistentData||Tn.byteLength,Tn.usage)})}return Zt.profile&&(ft.getTotalBufferSize=function(){var Tn=0;return Object.keys(Xn).forEach(function(tr){Tn+=Xn[tr].stats.size}),Tn}),{create:xr,createStream:Or,destroyStream:Dr,clear:function(){Oe(Xn).forEach(Gr),br.forEach(Gr)},getBuffer:function(Tn){return Tn&&Tn._buffer instanceof ir?Tn._buffer:null},restore:Lr,_initBuffer:Ur}}var q=0,Ue=0,ct=1,Lt=1,hn=4,on=4,nr={points:q,point:Ue,lines:ct,line:Lt,triangles:hn,triangle:on,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},sr=0,ti=1,Fi=4,Ci=5120,ta=5121,Ni=5122,Oi=5123,yo=5124,ya=5125,Ba=34963,xa=35040,sa=35044;function jo(Me,ft,Zt,Dn){var mr={},Xn=0,ir={uint8:ta,uint16:Oi};ft.oes_element_index_uint&&(ir.uint32=ya);function br(Lr){this.id=Xn++,mr[this.id]=this,this.buffer=Lr,this.primType=Fi,this.vertCount=0,this.type=0}br.prototype.bind=function(){this.buffer.bind()};var Or=[];function Dr(Lr){var Tn=Or.pop();return Tn||(Tn=new br(Zt.create(null,Ba,!0,!1)._buffer)),Ur(Tn,Lr,xa,-1,-1,0,0),Tn}function jr(Lr){Or.push(Lr)}function Ur(Lr,Tn,tr,Fr,pi,Tr,ai){Lr.buffer.bind();var oi;if(Tn){var Vi=ai;!ai&&(!p(Tn)||An(Tn)&&!p(Tn.data))&&(Vi=ft.oes_element_index_uint?ya:Oi),Zt._initBuffer(Lr.buffer,Tn,tr,Vi,3)}else Me.bufferData(Ba,Tr,tr),Lr.buffer.dtype=oi||ta,Lr.buffer.usage=tr,Lr.buffer.dimension=3,Lr.buffer.byteLength=Tr;if(oi=ai,!ai){switch(Lr.buffer.dtype){case ta:case Ci:oi=ta;break;case Oi:case Ni:oi=Oi;break;case ya:case yo:oi=ya;break;default:Y.raise("unsupported type for element array")}Lr.buffer.dtype=oi}Lr.type=oi,Y(oi!==ya||!!ft.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var yr=pi;yr<0&&(yr=Lr.buffer.byteLength,oi===Oi?yr>>=1:oi===ya&&(yr>>=2)),Lr.vertCount=yr;var vr=Fr;if(Fr<0){vr=Fi;var xi=Lr.buffer.dimension;xi===1&&(vr=sr),xi===2&&(vr=ti),xi===3&&(vr=Fi)}Lr.primType=vr}function Gr(Lr){Dn.elementsCount--,Y(Lr.buffer!==null,"must not double destroy elements"),delete mr[Lr.id],Lr.buffer.destroy(),Lr.buffer=null}function xr(Lr,Tn){var tr=Zt.create(null,Ba,!0),Fr=new br(tr._buffer);Dn.elementsCount++;function pi(Tr){if(!Tr)tr(),Fr.primType=Fi,Fr.vertCount=0,Fr.type=ta;else if(typeof Tr=="number")tr(Tr),Fr.primType=Fi,Fr.vertCount=Tr|0,Fr.type=ta;else{var ai=null,oi=sa,Vi=-1,yr=-1,vr=0,xi=0;Array.isArray(Tr)||p(Tr)||An(Tr)?ai=Tr:(Y.type(Tr,"object","invalid arguments for elements"),"data"in Tr&&(ai=Tr.data,Y(Array.isArray(ai)||p(ai)||An(ai),"invalid data for element buffer")),"usage"in Tr&&(Y.parameter(Tr.usage,Vt,"invalid element buffer usage"),oi=Vt[Tr.usage]),"primitive"in Tr&&(Y.parameter(Tr.primitive,nr,"invalid element buffer primitive"),Vi=nr[Tr.primitive]),"count"in Tr&&(Y(typeof Tr.count=="number"&&Tr.count>=0,"invalid vertex count for elements"),yr=Tr.count|0),"type"in Tr&&(Y.parameter(Tr.type,ir,"invalid buffer type"),xi=ir[Tr.type]),"length"in Tr?vr=Tr.length|0:(vr=yr,xi===Oi||xi===Ni?vr*=2:(xi===ya||xi===yo)&&(vr*=4))),Ur(Fr,ai,oi,Vi,yr,vr,xi)}return pi}return pi(Lr),pi._reglType="elements",pi._elements=Fr,pi.subdata=function(Tr,ai){return tr.subdata(Tr,ai),pi},pi.destroy=function(){Gr(Fr)},pi}return{create:xr,createStream:Dr,destroyStream:jr,getElements:function(Lr){return typeof Lr=="function"&&Lr._elements instanceof br?Lr._elements:null},clear:function(){Oe(mr).forEach(Gr)}}}var vs=new Float32Array(1),$s=new Uint32Array(vs.buffer),Fs=5123;function tu(Me){for(var ft=pe.allocType(Fs,Me.length),Zt=0;Zt<Me.length;++Zt)if(isNaN(Me[Zt]))ft[Zt]=65535;else if(Me[Zt]===1/0)ft[Zt]=31744;else if(Me[Zt]===-1/0)ft[Zt]=64512;else{vs[0]=Me[Zt];var Dn=$s[0],mr=Dn>>>31<<15,Xn=(Dn<<1>>>24)-127,ir=Dn>>13&(1<<10)-1;if(Xn<-24)ft[Zt]=mr;else if(Xn<-14){var br=-14-Xn;ft[Zt]=mr+(ir+(1<<10)>>br)}else Xn>15?ft[Zt]=mr+31744:ft[Zt]=mr+(Xn+15<<10)+ir}return ft}function lo(Me){return Array.isArray(Me)||p(Me)}var du=function(Me){return!(Me&Me-1)&&!!Me},Dl=34467,eo=3553,_a=34067,Su=34069,ko=6408,Ks=6406,Zu=6407,nu=6409,ru=6410,yc=32854,tl=32855,Tu=36194,pl=32819,Nl=32820,gs=33635,Au=34042,js=6402,nl=34041,qs=35904,rc=35906,ws=36193,_c=33776,bc=33777,Kc=33778,iu=33779,Nc=35986,xc=35987,Bl=34798,au=35840,Cu=35841,ms=35842,Zl=35843,Bc=36196,Vs=5121,wu=5123,ys=5125,vl=5126,Ec=10242,Sc=10243,Ul=10497,gl=33071,qc=33648,ic=10240,In=10241,pr=9728,rr=9729,gi=9984,Ca=9985,io=9986,Vo=9987,_o=33170,zl=4352,Tc=4353,Ds=4354,Uu=34046,rl=3317,Mu=37440,ml=37441,il=37443,po=37444,yl=33984,Zc=[gi,io,Ca,Vo],zu=[0,nu,ru,Zu,ko],_s={};_s[nu]=_s[Ks]=_s[js]=1,_s[nl]=_s[ru]=2,_s[Zu]=_s[qs]=3,_s[ko]=_s[rc]=4;function pu(Me){return"[object "+Me+"]"}var al=pu("HTMLCanvasElement"),vu=pu("OffscreenCanvas"),os=pu("CanvasRenderingContext2D"),Gs=pu("ImageBitmap"),Lo=pu("HTMLImageElement"),gu=pu("HTMLVideoElement"),Ms=Object.keys(Rn).concat([al,vu,os,Gs,Lo,gu]),ou=[];ou[Vs]=1,ou[vl]=4,ou[ws]=2,ou[wu]=2,ou[ys]=4;var No=[];No[yc]=2,No[tl]=2,No[Tu]=2,No[nl]=4,No[_c]=.5,No[bc]=.5,No[Kc]=1,No[iu]=1,No[Nc]=.5,No[xc]=1,No[Bl]=1,No[au]=.5,No[Cu]=.25,No[ms]=.5,No[Zl]=.25,No[Bc]=.5;function qo(Me){return Array.isArray(Me)&&(Me.length===0||typeof Me[0]=="number")}function ol(Me){if(!Array.isArray(Me))return!1;var ft=Me.length;return!(ft===0||!lo(Me[0]))}function bs(Me){return Object.prototype.toString.call(Me)}function $l(Me){return bs(Me)===al}function jl(Me){return bs(Me)===vu}function Uc(Me){return bs(Me)===os}function ff(Me){return bs(Me)===Gs}function Vl(Me){return bs(Me)===Lo}function _l(Me){return bs(Me)===gu}function bl(Me){var ft=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(ft&&Me&&Me.getContext)}function zc(Me){var ft=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(ft&&Me&&"src"in Me&&"crossOrigin"in Me)}function ac(Me){if(!Me)return!1;if(bl(Me)||zc(Me))return!0;var ft=bs(Me);return Ms.indexOf(ft)>=0?!0:qo(Me)||ol(Me)||An(Me)}function Ac(Me){return Rn[Object.prototype.toString.call(Me)]|0}function Cc(Me,ft){var Zt=ft.length;switch(Me.type){case Vs:case wu:case ys:case vl:var Dn=pe.allocType(Me.type,Zt);Dn.set(ft),Me.data=Dn;break;case ws:Me.data=tu(ft);break;default:Y.raise("unsupported texture type, must specify a typed array")}}function Bo(Me,ft){return pe.allocType(Me.type===ws?vl:Me.type,ft)}function Qo(Me,ft){Me.type===ws?(Me.data=tu(ft),pe.freeType(ft)):Me.data=ft}function oc(Me,ft,Zt,Dn,mr,Xn){for(var ir=Me.width,br=Me.height,Or=Me.channels,Dr=ir*br*Or,jr=Bo(Me,Dr),Ur=0,Gr=0;Gr<br;++Gr)for(var xr=0;xr<ir;++xr)for(var Lr=0;Lr<Or;++Lr)jr[Ur++]=ft[Zt*xr+Dn*Gr+mr*Lr+Xn];Qo(Me,jr)}function xl(Me,ft,Zt,Dn,mr,Xn){var ir;if(typeof No[Me]!="undefined"?ir=No[Me]:ir=_s[Me]*ou[ft],Xn&&(ir*=6),mr){for(var br=0,Or=Zt;Or>=1;)br+=ir*Or*Or,Or/=2;return br}else return ir*Zt*Dn}function wc(Me,ft,Zt,Dn,mr,Xn,ir){var br={"don't care":zl,"dont care":zl,nice:Ds,fast:Tc},Or={repeat:Ul,clamp:gl,mirror:qc},Dr={nearest:pr,linear:rr},jr=M({mipmap:Vo,"nearest mipmap nearest":gi,"linear mipmap nearest":Ca,"nearest mipmap linear":io,"linear mipmap linear":Vo},Dr),Ur={none:0,browser:po},Gr={uint8:Vs,rgba4:pl,rgb565:gs,"rgb5 a1":Nl},xr={alpha:Ks,luminance:nu,"luminance alpha":ru,rgb:Zu,rgba:ko,rgba4:yc,"rgb5 a1":tl,rgb565:Tu},Lr={};ft.ext_srgb&&(xr.srgb=qs,xr.srgba=rc),ft.oes_texture_float&&(Gr.float32=Gr.float=vl),ft.oes_texture_half_float&&(Gr.float16=Gr["half float"]=ws),ft.webgl_depth_texture&&(M(xr,{depth:js,"depth stencil":nl}),M(Gr,{uint16:wu,uint32:ys,"depth stencil":Au})),ft.webgl_compressed_texture_s3tc&&M(Lr,{"rgb s3tc dxt1":_c,"rgba s3tc dxt1":bc,"rgba s3tc dxt3":Kc,"rgba s3tc dxt5":iu}),ft.webgl_compressed_texture_atc&&M(Lr,{"rgb atc":Nc,"rgba atc explicit alpha":xc,"rgba atc interpolated alpha":Bl}),ft.webgl_compressed_texture_pvrtc&&M(Lr,{"rgb pvrtc 4bppv1":au,"rgb pvrtc 2bppv1":Cu,"rgba pvrtc 4bppv1":ms,"rgba pvrtc 2bppv1":Zl}),ft.webgl_compressed_texture_etc1&&(Lr["rgb etc1"]=Bc);var Tn=Array.prototype.slice.call(Me.getParameter(Dl)||new Uint32Array(0));Object.keys(Lr).forEach(function(kt){var Yn=Lr[kt];Tn.indexOf(Yn)>=0&&(xr[kt]=Yn)});var tr=Object.keys(xr);Zt.textureFormats=tr;var Fr=[];Object.keys(xr).forEach(function(kt){var Yn=xr[kt];Fr[Yn]=kt});var pi=[];Object.keys(Gr).forEach(function(kt){var Yn=Gr[kt];pi[Yn]=kt});var Tr=[];Object.keys(Dr).forEach(function(kt){var Yn=Dr[kt];Tr[Yn]=kt});var ai=[];Object.keys(jr).forEach(function(kt){var Yn=jr[kt];ai[Yn]=kt});var oi=[];Object.keys(Or).forEach(function(kt){var Yn=Or[kt];oi[Yn]=kt});var Vi=tr.reduce(function(kt,Yn){var Nn=xr[Yn];return Nn===nu||Nn===Ks||Nn===nu||Nn===ru||Nn===js||Nn===nl||ft.ext_srgb&&(Nn===qs||Nn===rc)?kt[Nn]=Nn:Nn===tl||Yn.indexOf("rgba")>=0?kt[Nn]=ko:kt[Nn]=Zu,kt},{});function yr(){this.internalformat=ko,this.format=ko,this.type=Vs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=po,this.width=0,this.height=0,this.channels=0}function vr(kt,Yn){kt.internalformat=Yn.internalformat,kt.format=Yn.format,kt.type=Yn.type,kt.compressed=Yn.compressed,kt.premultiplyAlpha=Yn.premultiplyAlpha,kt.flipY=Yn.flipY,kt.unpackAlignment=Yn.unpackAlignment,kt.colorSpace=Yn.colorSpace,kt.width=Yn.width,kt.height=Yn.height,kt.channels=Yn.channels}function xi(kt,Yn){if(!(typeof Yn!="object"||!Yn)){if("premultiplyAlpha"in Yn&&(Y.type(Yn.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),kt.premultiplyAlpha=Yn.premultiplyAlpha),"flipY"in Yn&&(Y.type(Yn.flipY,"boolean","invalid texture flip"),kt.flipY=Yn.flipY),"alignment"in Yn&&(Y.oneOf(Yn.alignment,[1,2,4,8],"invalid texture unpack alignment"),kt.unpackAlignment=Yn.alignment),"colorSpace"in Yn&&(Y.parameter(Yn.colorSpace,Ur,"invalid colorSpace"),kt.colorSpace=Ur[Yn.colorSpace]),"type"in Yn){var Nn=Yn.type;Y(ft.oes_texture_float||!(Nn==="float"||Nn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Y(ft.oes_texture_half_float||!(Nn==="half float"||Nn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Y(ft.webgl_depth_texture||!(Nn==="uint16"||Nn==="uint32"||Nn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Y.parameter(Nn,Gr,"invalid texture type"),kt.type=Gr[Nn]}var _i=kt.width,Va=kt.height,St=kt.channels,ot=!1;"shape"in Yn?(Y(Array.isArray(Yn.shape)&&Yn.shape.length>=2,"shape must be an array"),_i=Yn.shape[0],Va=Yn.shape[1],Yn.shape.length===3&&(St=Yn.shape[2],Y(St>0&&St<=4,"invalid number of channels"),ot=!0),Y(_i>=0&&_i<=Zt.maxTextureSize,"invalid width"),Y(Va>=0&&Va<=Zt.maxTextureSize,"invalid height")):("radius"in Yn&&(_i=Va=Yn.radius,Y(_i>=0&&_i<=Zt.maxTextureSize,"invalid radius")),"width"in Yn&&(_i=Yn.width,Y(_i>=0&&_i<=Zt.maxTextureSize,"invalid width")),"height"in Yn&&(Va=Yn.height,Y(Va>=0&&Va<=Zt.maxTextureSize,"invalid height")),"channels"in Yn&&(St=Yn.channels,Y(St>0&&St<=4,"invalid number of channels"),ot=!0)),kt.width=_i|0,kt.height=Va|0,kt.channels=St|0;var Wt=!1;if("format"in Yn){var yn=Yn.format;Y(ft.webgl_depth_texture||!(yn==="depth"||yn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Y.parameter(yn,xr,"invalid texture format");var qn=kt.internalformat=xr[yn];kt.format=Vi[qn],yn in Gr&&("type"in Yn||(kt.type=Gr[yn])),yn in Lr&&(kt.compressed=!0),Wt=!0}!ot&&Wt?kt.channels=_s[kt.format]:ot&&!Wt?kt.channels!==zu[kt.format]&&(kt.format=kt.internalformat=zu[kt.channels]):Wt&&ot&&Y(kt.channels===_s[kt.format],"number of channels inconsistent with specified format")}}function Qr(kt){Me.pixelStorei(Mu,kt.flipY),Me.pixelStorei(ml,kt.premultiplyAlpha),Me.pixelStorei(il,kt.colorSpace),Me.pixelStorei(rl,kt.unpackAlignment)}function Rr(){yr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ri(kt,Yn){var Nn=null;if(ac(Yn)?Nn=Yn:Yn&&(Y.type(Yn,"object","invalid pixel data type"),xi(kt,Yn),"x"in Yn&&(kt.xOffset=Yn.x|0),"y"in Yn&&(kt.yOffset=Yn.y|0),ac(Yn.data)&&(Nn=Yn.data)),Y(!kt.compressed||Nn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Yn.copy){Y(!Nn,"can not specify copy and data field for the same texture");var _i=mr.viewportWidth,Va=mr.viewportHeight;kt.width=kt.width||_i-kt.xOffset,kt.height=kt.height||Va-kt.yOffset,kt.needsCopy=!0,Y(kt.xOffset>=0&&kt.xOffset<_i&&kt.yOffset>=0&&kt.yOffset<Va&&kt.width>0&&kt.width<=_i&&kt.height>0&&kt.height<=Va,"copy texture read out of bounds")}else if(!Nn)kt.width=kt.width||1,kt.height=kt.height||1,kt.channels=kt.channels||4;else if(p(Nn))kt.channels=kt.channels||4,kt.data=Nn,!("type"in Yn)&&kt.type===Vs&&(kt.type=Ac(Nn));else if(qo(Nn))kt.channels=kt.channels||4,Cc(kt,Nn),kt.alignment=1,kt.needsFree=!0;else if(An(Nn)){var St=Nn.data;!Array.isArray(St)&&kt.type===Vs&&(kt.type=Ac(St));var ot=Nn.shape,Wt=Nn.stride,yn,qn,sn,an,dn,bt;ot.length===3?(sn=ot[2],bt=Wt[2]):(Y(ot.length===2,"invalid ndarray pixel data, must be 2 or 3D"),sn=1,bt=1),yn=ot[0],qn=ot[1],an=Wt[0],dn=Wt[1],kt.alignment=1,kt.width=yn,kt.height=qn,kt.channels=sn,kt.format=kt.internalformat=zu[sn],kt.needsFree=!0,oc(kt,St,an,dn,bt,Nn.offset)}else if(bl(Nn)||$l(Nn)||jl(Nn)||Uc(Nn))bl(Nn)||$l(Nn)||jl(Nn)?kt.element=Nn:kt.element=Nn.canvas,kt.width=kt.element.width,kt.height=kt.element.height,kt.channels=4;else if(ff(Nn))kt.element=Nn,kt.width=Nn.width,kt.height=Nn.height,kt.channels=4;else if(Vl(Nn))kt.element=Nn,kt.width=Nn.naturalWidth,kt.height=Nn.naturalHeight,kt.channels=4;else if(zc(Nn))kt.element=Nn,kt.width=Nn.width,kt.height=Nn.height,kt.channels=4;else if(_l(Nn))kt.element=Nn,kt.width=Nn.videoWidth,kt.height=Nn.videoHeight,kt.channels=4;else if(ol(Nn)){var Qt=kt.width||Nn[0].length,Pt=kt.height||Nn.length,Cn=kt.channels;lo(Nn[0][0])?Cn=Cn||Nn[0][0].length:Cn=Cn||1;for(var Fn=De.shape(Nn),Ar=1,Yr=0;Yr<Fn.length;++Yr)Ar*=Fn[Yr];var Kr=Bo(kt,Ar);De.flatten(Nn,Fn,"",Kr),Qo(kt,Kr),kt.alignment=1,kt.width=Qt,kt.height=Pt,kt.channels=Cn,kt.format=kt.internalformat=zu[Cn],kt.needsFree=!0}kt.type===vl?Y(Zt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):kt.type===ws&&Y(Zt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ei(kt,Yn,Nn){var _i=kt.element,Va=kt.data,St=kt.internalformat,ot=kt.format,Wt=kt.type,yn=kt.width,qn=kt.height;Qr(kt),_i?Me.texImage2D(Yn,Nn,ot,ot,Wt,_i):kt.compressed?Me.compressedTexImage2D(Yn,Nn,St,yn,qn,0,Va):kt.needsCopy?(Dn(),Me.copyTexImage2D(Yn,Nn,ot,kt.xOffset,kt.yOffset,yn,qn,0)):Me.texImage2D(Yn,Nn,ot,yn,qn,0,ot,Wt,Va||null)}function ga(kt,Yn,Nn,_i,Va){var St=kt.element,ot=kt.data,Wt=kt.internalformat,yn=kt.format,qn=kt.type,sn=kt.width,an=kt.height;Qr(kt),St?Me.texSubImage2D(Yn,Va,Nn,_i,yn,qn,St):kt.compressed?Me.compressedTexSubImage2D(Yn,Va,Nn,_i,Wt,sn,an,ot):kt.needsCopy?(Dn(),Me.copyTexSubImage2D(Yn,Va,Nn,_i,kt.xOffset,kt.yOffset,sn,an)):Me.texSubImage2D(Yn,Va,Nn,_i,sn,an,yn,qn,ot)}var Ki=[];function li(){return Ki.pop()||new Rr}function di(kt){kt.needsFree&&pe.freeType(kt.data),Rr.call(kt),Ki.push(kt)}function Yi(){yr.call(this),this.genMipmaps=!1,this.mipmapHint=zl,this.mipmask=0,this.images=Array(16)}function aa(kt,Yn,Nn){var _i=kt.images[0]=li();kt.mipmask=1,_i.width=kt.width=Yn,_i.height=kt.height=Nn,_i.channels=kt.channels=4}function $a(kt,Yn){var Nn=null;if(ac(Yn))Nn=kt.images[0]=li(),vr(Nn,kt),ri(Nn,Yn),kt.mipmask=1;else if(xi(kt,Yn),Array.isArray(Yn.mipmap))for(var _i=Yn.mipmap,Va=0;Va<_i.length;++Va)Nn=kt.images[Va]=li(),vr(Nn,kt),Nn.width>>=Va,Nn.height>>=Va,ri(Nn,_i[Va]),kt.mipmask|=1<<Va;else Nn=kt.images[0]=li(),vr(Nn,kt),ri(Nn,Yn),kt.mipmask=1;vr(kt,kt.images[0]),kt.compressed&&(kt.internalformat===_c||kt.internalformat===bc||kt.internalformat===Kc||kt.internalformat===iu)&&Y(kt.width%4===0&&kt.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function xo(kt,Yn){for(var Nn=kt.images,_i=0;_i<Nn.length;++_i){if(!Nn[_i])return;ei(Nn[_i],Yn,_i)}}var Ao=[];function ja(){var kt=Ao.pop()||new Yi;yr.call(kt),kt.mipmask=0;for(var Yn=0;Yn<16;++Yn)kt.images[Yn]=null;return kt}function Zs(kt){for(var Yn=kt.images,Nn=0;Nn<Yn.length;++Nn)Yn[Nn]&&di(Yn[Nn]),Yn[Nn]=null;Ao.push(kt)}function Yo(){this.minFilter=pr,this.magFilter=pr,this.wrapS=gl,this.wrapT=gl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=zl}function Rs(kt,Yn){if("min"in Yn){var Nn=Yn.min;Y.parameter(Nn,jr),kt.minFilter=jr[Nn],Zc.indexOf(kt.minFilter)>=0&&!("faces"in Yn)&&(kt.genMipmaps=!0)}if("mag"in Yn){var _i=Yn.mag;Y.parameter(_i,Dr),kt.magFilter=Dr[_i]}var Va=kt.wrapS,St=kt.wrapT;if("wrap"in Yn){var ot=Yn.wrap;typeof ot=="string"?(Y.parameter(ot,Or),Va=St=Or[ot]):Array.isArray(ot)&&(Y.parameter(ot[0],Or),Y.parameter(ot[1],Or),Va=Or[ot[0]],St=Or[ot[1]])}else{if("wrapS"in Yn){var Wt=Yn.wrapS;Y.parameter(Wt,Or),Va=Or[Wt]}if("wrapT"in Yn){var yn=Yn.wrapT;Y.parameter(yn,Or),St=Or[yn]}}if(kt.wrapS=Va,kt.wrapT=St,"anisotropic"in Yn){var qn=Yn.anisotropic;Y(typeof qn=="number"&&qn>=1&&qn<=Zt.maxAnisotropic,"aniso samples must be between 1 and "),kt.anisotropic=Yn.anisotropic}if("mipmap"in Yn){var sn=!1;switch(typeof Yn.mipmap){case"string":Y.parameter(Yn.mipmap,br,"invalid mipmap hint"),kt.mipmapHint=br[Yn.mipmap],kt.genMipmaps=!0,sn=!0;break;case"boolean":sn=kt.genMipmaps=Yn.mipmap;break;case"object":Y(Array.isArray(Yn.mipmap),"invalid mipmap type"),kt.genMipmaps=!1,sn=!0;break;default:Y.raise("invalid mipmap type")}sn&&!("min"in Yn)&&(kt.minFilter=gi)}}function fs(kt,Yn){Me.texParameteri(Yn,In,kt.minFilter),Me.texParameteri(Yn,ic,kt.magFilter),Me.texParameteri(Yn,Ec,kt.wrapS),Me.texParameteri(Yn,Sc,kt.wrapT),ft.ext_texture_filter_anisotropic&&Me.texParameteri(Yn,Uu,kt.anisotropic),kt.genMipmaps&&(Me.hint(_o,kt.mipmapHint),Me.generateMipmap(Yn))}var ks=0,Us={},Js=Zt.maxTextureUnits,Ss=Array(Js).map(function(){return null});function qi(kt){yr.call(this),this.mipmask=0,this.internalformat=ko,this.id=ks++,this.refCount=1,this.target=kt,this.texture=Me.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Yo,ir.profile&&(this.stats={size:0})}function Ts(kt){Me.activeTexture(yl),Me.bindTexture(kt.target,kt.texture)}function vo(){var kt=Ss[0];kt?Me.bindTexture(kt.target,kt.texture):Me.bindTexture(eo,null)}function As(kt){var Yn=kt.texture;Y(Yn,"must not double destroy texture");var Nn=kt.unit,_i=kt.target;Nn>=0&&(Me.activeTexture(yl+Nn),Me.bindTexture(_i,null),Ss[Nn]=null),Me.deleteTexture(Yn),kt.texture=null,kt.params=null,kt.pixels=null,kt.refCount=0,delete Us[kt.id],Xn.textureCount--}M(qi.prototype,{bind:function(){var kt=this;kt.bindCount+=1;var Yn=kt.unit;if(Yn<0){for(var Nn=0;Nn<Js;++Nn){var _i=Ss[Nn];if(_i){if(_i.bindCount>0)continue;_i.unit=-1}Ss[Nn]=kt,Yn=Nn;break}Yn>=Js&&Y.raise("insufficient number of texture units"),ir.profile&&Xn.maxTextureUnits<Yn+1&&(Xn.maxTextureUnits=Yn+1),kt.unit=Yn,Me.activeTexture(yl+Yn),Me.bindTexture(kt.target,kt.texture)}return Yn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&As(this)}});function ra(kt,Yn){var Nn=new qi(eo);Us[Nn.id]=Nn,Xn.textureCount++;function _i(ot,Wt){var yn=Nn.texInfo;Yo.call(yn);var qn=ja();return typeof ot=="number"?typeof Wt=="number"?aa(qn,ot|0,Wt|0):aa(qn,ot|0,ot|0):ot?(Y.type(ot,"object","invalid arguments to regl.texture"),Rs(yn,ot),$a(qn,ot)):aa(qn,1,1),yn.genMipmaps&&(qn.mipmask=(qn.width<<1)-1),Nn.mipmask=qn.mipmask,vr(Nn,qn),Y.texture2D(yn,qn,Zt),Nn.internalformat=qn.internalformat,_i.width=qn.width,_i.height=qn.height,Ts(Nn),xo(qn,eo),fs(yn,eo),vo(),Zs(qn),ir.profile&&(Nn.stats.size=xl(Nn.internalformat,Nn.type,qn.width,qn.height,yn.genMipmaps,!1)),_i.format=Fr[Nn.internalformat],_i.type=pi[Nn.type],_i.mag=Tr[yn.magFilter],_i.min=ai[yn.minFilter],_i.wrapS=oi[yn.wrapS],_i.wrapT=oi[yn.wrapT],_i}function Va(ot,Wt,yn,qn){Y(!!ot,"must specify image data");var sn=Wt|0,an=yn|0,dn=qn|0,bt=li();return vr(bt,Nn),bt.width=0,bt.height=0,ri(bt,ot),bt.width=bt.width||(Nn.width>>dn)-sn,bt.height=bt.height||(Nn.height>>dn)-an,Y(Nn.type===bt.type&&Nn.format===bt.format&&Nn.internalformat===bt.internalformat,"incompatible format for texture.subimage"),Y(sn>=0&&an>=0&&sn+bt.width<=Nn.width&&an+bt.height<=Nn.height,"texture.subimage write out of bounds"),Y(Nn.mipmask&1<<dn,"missing mipmap data"),Y(bt.data||bt.element||bt.needsCopy,"missing image data"),Ts(Nn),ga(bt,eo,sn,an,dn),vo(),di(bt),_i}function St(ot,Wt){var yn=ot|0,qn=Wt|0||yn;if(yn===Nn.width&&qn===Nn.height)return _i;_i.width=Nn.width=yn,_i.height=Nn.height=qn,Ts(Nn);for(var sn=0;Nn.mipmask>>sn;++sn){var an=yn>>sn,dn=qn>>sn;if(!an||!dn)break;Me.texImage2D(eo,sn,Nn.format,an,dn,0,Nn.format,Nn.type,null)}return vo(),ir.profile&&(Nn.stats.size=xl(Nn.internalformat,Nn.type,yn,qn,!1,!1)),_i}return _i(kt,Yn),_i.subimage=Va,_i.resize=St,_i._reglType="texture2d",_i._texture=Nn,ir.profile&&(_i.stats=Nn.stats),_i.destroy=function(){Nn.decRef()},_i}function Za(kt,Yn,Nn,_i,Va,St){var ot=new qi(_a);Us[ot.id]=ot,Xn.cubeCount++;var Wt=new Array(6);function yn(an,dn,bt,Qt,Pt,Cn){var Fn,Ar=ot.texInfo;for(Yo.call(Ar),Fn=0;Fn<6;++Fn)Wt[Fn]=ja();if(typeof an=="number"||!an){var Yr=an|0||1;for(Fn=0;Fn<6;++Fn)aa(Wt[Fn],Yr,Yr)}else if(typeof an=="object")if(dn)$a(Wt[0],an),$a(Wt[1],dn),$a(Wt[2],bt),$a(Wt[3],Qt),$a(Wt[4],Pt),$a(Wt[5],Cn);else if(Rs(Ar,an),xi(ot,an),"faces"in an){var Kr=an.faces;for(Y(Array.isArray(Kr)&&Kr.length===6,"cube faces must be a length 6 array"),Fn=0;Fn<6;++Fn)Y(typeof Kr[Fn]=="object"&&!!Kr[Fn],"invalid input for cube map face"),vr(Wt[Fn],ot),$a(Wt[Fn],Kr[Fn])}else for(Fn=0;Fn<6;++Fn)$a(Wt[Fn],an);else Y.raise("invalid arguments to cube map");for(vr(ot,Wt[0]),Y.optional(function(){Zt.npotTextureCube||Y(du(ot.width)&&du(ot.height),"your browser does not support non power or two texture dimensions")}),Ar.genMipmaps?ot.mipmask=(Wt[0].width<<1)-1:ot.mipmask=Wt[0].mipmask,Y.textureCube(ot,Ar,Wt,Zt),ot.internalformat=Wt[0].internalformat,yn.width=Wt[0].width,yn.height=Wt[0].height,Ts(ot),Fn=0;Fn<6;++Fn)xo(Wt[Fn],Su+Fn);for(fs(Ar,_a),vo(),ir.profile&&(ot.stats.size=xl(ot.internalformat,ot.type,yn.width,yn.height,Ar.genMipmaps,!0)),yn.format=Fr[ot.internalformat],yn.type=pi[ot.type],yn.mag=Tr[Ar.magFilter],yn.min=ai[Ar.minFilter],yn.wrapS=oi[Ar.wrapS],yn.wrapT=oi[Ar.wrapT],Fn=0;Fn<6;++Fn)Zs(Wt[Fn]);return yn}function qn(an,dn,bt,Qt,Pt){Y(!!dn,"must specify image data"),Y(typeof an=="number"&&an===(an|0)&&an>=0&&an<6,"invalid face");var Cn=bt|0,Fn=Qt|0,Ar=Pt|0,Yr=li();return vr(Yr,ot),Yr.width=0,Yr.height=0,ri(Yr,dn),Yr.width=Yr.width||(ot.width>>Ar)-Cn,Yr.height=Yr.height||(ot.height>>Ar)-Fn,Y(ot.type===Yr.type&&ot.format===Yr.format&&ot.internalformat===Yr.internalformat,"incompatible format for texture.subimage"),Y(Cn>=0&&Fn>=0&&Cn+Yr.width<=ot.width&&Fn+Yr.height<=ot.height,"texture.subimage write out of bounds"),Y(ot.mipmask&1<<Ar,"missing mipmap data"),Y(Yr.data||Yr.element||Yr.needsCopy,"missing image data"),Ts(ot),ga(Yr,Su+an,Cn,Fn,Ar),vo(),di(Yr),yn}function sn(an){var dn=an|0;if(dn!==ot.width){yn.width=ot.width=dn,yn.height=ot.height=dn,Ts(ot);for(var bt=0;bt<6;++bt)for(var Qt=0;ot.mipmask>>Qt;++Qt)Me.texImage2D(Su+bt,Qt,ot.format,dn>>Qt,dn>>Qt,0,ot.format,ot.type,null);return vo(),ir.profile&&(ot.stats.size=xl(ot.internalformat,ot.type,yn.width,yn.height,!1,!0)),yn}}return yn(kt,Yn,Nn,_i,Va,St),yn.subimage=qn,yn.resize=sn,yn._reglType="textureCube",yn._texture=ot,ir.profile&&(yn.stats=ot.stats),yn.destroy=function(){ot.decRef()},yn}function Co(){for(var kt=0;kt<Js;++kt)Me.activeTexture(yl+kt),Me.bindTexture(eo,null),Ss[kt]=null;Oe(Us).forEach(As),Xn.cubeCount=0,Xn.textureCount=0}ir.profile&&(Xn.getTotalTextureSize=function(){var kt=0;return Object.keys(Us).forEach(function(Yn){kt+=Us[Yn].stats.size}),kt});function ds(){for(var kt=0;kt<Js;++kt){var Yn=Ss[kt];Yn&&(Yn.bindCount=0,Yn.unit=-1,Ss[kt]=null)}Oe(Us).forEach(function(Nn){Nn.texture=Me.createTexture(),Me.bindTexture(Nn.target,Nn.texture);for(var _i=0;_i<32;++_i)if(Nn.mipmask&1<<_i)if(Nn.target===eo)Me.texImage2D(eo,_i,Nn.internalformat,Nn.width>>_i,Nn.height>>_i,0,Nn.internalformat,Nn.type,null);else for(var Va=0;Va<6;++Va)Me.texImage2D(Su+Va,_i,Nn.internalformat,Nn.width>>_i,Nn.height>>_i,0,Nn.internalformat,Nn.type,null);fs(Nn.texInfo,Nn.target)})}function hc(){for(var kt=0;kt<Js;++kt){var Yn=Ss[kt];Yn&&(Yn.bindCount=0,Yn.unit=-1,Ss[kt]=null),Me.activeTexture(yl+kt),Me.bindTexture(eo,null),Me.bindTexture(_a,null)}}return{create2D:ra,createCube:Za,clear:Co,getTexture:function(kt){return null},restore:ds,refresh:hc}}var Ou=36161,su=32854,no=32855,sl=36194,Zo=33189,uu=36168,ul=34041,El=35907,lu=34836,Ns=34842,Gl=34843,le=[];le[su]=2,le[no]=2,le[sl]=2,le[Zo]=2,le[uu]=1,le[ul]=4,le[El]=4,le[lu]=16,le[Ns]=8,le[Gl]=6;function X(Me,ft,Zt){return le[Me]*ft*Zt}var O=function(Me,ft,Zt,Dn,mr){var Xn={rgba4:su,rgb565:sl,"rgb5 a1":no,depth:Zo,stencil:uu,"depth stencil":ul};ft.ext_srgb&&(Xn.srgba=El),ft.ext_color_buffer_half_float&&(Xn.rgba16f=Ns,Xn.rgb16f=Gl),ft.webgl_color_buffer_float&&(Xn.rgba32f=lu);var ir=[];Object.keys(Xn).forEach(function(xr){var Lr=Xn[xr];ir[Lr]=xr});var br=0,Or={};function Dr(xr){this.id=br++,this.refCount=1,this.renderbuffer=xr,this.format=su,this.width=0,this.height=0,mr.profile&&(this.stats={size:0})}Dr.prototype.decRef=function(){--this.refCount<=0&&jr(this)};function jr(xr){var Lr=xr.renderbuffer;Y(Lr,"must not double destroy renderbuffer"),Me.bindRenderbuffer(Ou,null),Me.deleteRenderbuffer(Lr),xr.renderbuffer=null,xr.refCount=0,delete Or[xr.id],Dn.renderbufferCount--}function Ur(xr,Lr){var Tn=new Dr(Me.createRenderbuffer());Or[Tn.id]=Tn,Dn.renderbufferCount++;function tr(pi,Tr){var ai=0,oi=0,Vi=su;if(typeof pi=="object"&&pi){var yr=pi;if("shape"in yr){var vr=yr.shape;Y(Array.isArray(vr)&&vr.length>=2,"invalid renderbuffer shape"),ai=vr[0]|0,oi=vr[1]|0}else"radius"in yr&&(ai=oi=yr.radius|0),"width"in yr&&(ai=yr.width|0),"height"in yr&&(oi=yr.height|0);"format"in yr&&(Y.parameter(yr.format,Xn,"invalid renderbuffer format"),Vi=Xn[yr.format])}else typeof pi=="number"?(ai=pi|0,typeof Tr=="number"?oi=Tr|0:oi=ai):pi?Y.raise("invalid arguments to renderbuffer constructor"):ai=oi=1;if(Y(ai>0&&oi>0&&ai<=Zt.maxRenderbufferSize&&oi<=Zt.maxRenderbufferSize,"invalid renderbuffer size"),!(ai===Tn.width&&oi===Tn.height&&Vi===Tn.format))return tr.width=Tn.width=ai,tr.height=Tn.height=oi,Tn.format=Vi,Me.bindRenderbuffer(Ou,Tn.renderbuffer),Me.renderbufferStorage(Ou,Vi,ai,oi),Y(Me.getError()===0,"invalid render buffer format"),mr.profile&&(Tn.stats.size=X(Tn.format,Tn.width,Tn.height)),tr.format=ir[Tn.format],tr}function Fr(pi,Tr){var ai=pi|0,oi=Tr|0||ai;return ai===Tn.width&&oi===Tn.height||(Y(ai>0&&oi>0&&ai<=Zt.maxRenderbufferSize&&oi<=Zt.maxRenderbufferSize,"invalid renderbuffer size"),tr.width=Tn.width=ai,tr.height=Tn.height=oi,Me.bindRenderbuffer(Ou,Tn.renderbuffer),Me.renderbufferStorage(Ou,Tn.format,ai,oi),Y(Me.getError()===0,"invalid render buffer format"),mr.profile&&(Tn.stats.size=X(Tn.format,Tn.width,Tn.height))),tr}return tr(xr,Lr),tr.resize=Fr,tr._reglType="renderbuffer",tr._renderbuffer=Tn,mr.profile&&(tr.stats=Tn.stats),tr.destroy=function(){Tn.decRef()},tr}mr.profile&&(Dn.getTotalRenderbufferSize=function(){var xr=0;return Object.keys(Or).forEach(function(Lr){xr+=Or[Lr].stats.size}),xr});function Gr(){Oe(Or).forEach(function(xr){xr.renderbuffer=Me.createRenderbuffer(),Me.bindRenderbuffer(Ou,xr.renderbuffer),Me.renderbufferStorage(Ou,xr.format,xr.width,xr.height)}),Me.bindRenderbuffer(Ou,null)}return{create:Ur,clear:function(){Oe(Or).forEach(jr)},restore:Gr}},j=36160,Q=36161,Re=3553,se=34069,At=36064,Rt=36096,Ut=36128,Zn=33306,gr=36053,ni=36054,Vr=36055,wi=36057,ji=36061,da=36193,wa=5121,to=5126,va=6407,ba=6408,ao=6402,Mo=[va,ba],so=[];so[ba]=4,so[va]=3;var ka=[];ka[wa]=1,ka[to]=4,ka[da]=2;var zo=32854,fi=32855,Go=36194,mu=33189,bo=36168,ss=34041,Pu=35907,yu=34836,cu=34842,fu=34843,Fo=[zo,fi,Go,Pu,cu,fu,yu],Sl={};Sl[gr]="complete",Sl[ni]="incomplete attachment",Sl[wi]="incomplete dimensions",Sl[Vr]="incomplete, missing attachment",Sl[ji]="unsupported";function $c(Me,ft,Zt,Dn,mr,Xn){var ir={cur:null,next:null,dirty:!1,setFBO:null},br=["rgba"],Or=["rgba4","rgb565","rgb5 a1"];ft.ext_srgb&&Or.push("srgba"),ft.ext_color_buffer_half_float&&Or.push("rgba16f","rgb16f"),ft.webgl_color_buffer_float&&Or.push("rgba32f");var Dr=["uint8"];ft.oes_texture_half_float&&Dr.push("half float","float16"),ft.oes_texture_float&&Dr.push("float","float32");function jr(Rr,ri,ei){this.target=Rr,this.texture=ri,this.renderbuffer=ei;var ga=0,Ki=0;ri?(ga=ri.width,Ki=ri.height):ei&&(ga=ei.width,Ki=ei.height),this.width=ga,this.height=Ki}function Ur(Rr){Rr&&(Rr.texture&&Rr.texture._texture.decRef(),Rr.renderbuffer&&Rr.renderbuffer._renderbuffer.decRef())}function Gr(Rr,ri,ei){if(Rr)if(Rr.texture){var ga=Rr.texture._texture,Ki=Math.max(1,ga.width),li=Math.max(1,ga.height);Y(Ki===ri&&li===ei,"inconsistent width/height for supplied texture"),ga.refCount+=1}else{var di=Rr.renderbuffer._renderbuffer;Y(di.width===ri&&di.height===ei,"inconsistent width/height for renderbuffer"),di.refCount+=1}}function xr(Rr,ri){ri&&(ri.texture?Me.framebufferTexture2D(j,Rr,ri.target,ri.texture._texture.texture,0):Me.framebufferRenderbuffer(j,Rr,Q,ri.renderbuffer._renderbuffer.renderbuffer))}function Lr(Rr){var ri=Re,ei=null,ga=null,Ki=Rr;typeof Rr=="object"&&(Ki=Rr.data,"target"in Rr&&(ri=Rr.target|0)),Y.type(Ki,"function","invalid attachment data");var li=Ki._reglType;return li==="texture2d"?(ei=Ki,Y(ri===Re)):li==="textureCube"?(ei=Ki,Y(ri>=se&&ri<se+6,"invalid cube map target")):li==="renderbuffer"?(ga=Ki,ri=Q):Y.raise("invalid regl object for attachment"),new jr(ri,ei,ga)}function Tn(Rr,ri,ei,ga,Ki){if(ei){var li=Dn.create2D({width:Rr,height:ri,format:ga,type:Ki});return li._texture.refCount=0,new jr(Re,li,null)}else{var di=mr.create({width:Rr,height:ri,format:ga});return di._renderbuffer.refCount=0,new jr(Q,null,di)}}function tr(Rr){return Rr&&(Rr.texture||Rr.renderbuffer)}function Fr(Rr,ri,ei){Rr&&(Rr.texture?Rr.texture.resize(ri,ei):Rr.renderbuffer&&Rr.renderbuffer.resize(ri,ei),Rr.width=ri,Rr.height=ei)}var pi=0,Tr={};function ai(){this.id=pi++,Tr[this.id]=this,this.framebuffer=Me.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function oi(Rr){Rr.colorAttachments.forEach(Ur),Ur(Rr.depthAttachment),Ur(Rr.stencilAttachment),Ur(Rr.depthStencilAttachment)}function Vi(Rr){var ri=Rr.framebuffer;Y(ri,"must not double destroy framebuffer"),Me.deleteFramebuffer(ri),Rr.framebuffer=null,Xn.framebufferCount--,delete Tr[Rr.id]}function yr(Rr){var ri;Me.bindFramebuffer(j,Rr.framebuffer);var ei=Rr.colorAttachments;for(ri=0;ri<ei.length;++ri)xr(At+ri,ei[ri]);for(ri=ei.length;ri<Zt.maxColorAttachments;++ri)Me.framebufferTexture2D(j,At+ri,Re,null,0);Me.framebufferTexture2D(j,Zn,Re,null,0),Me.framebufferTexture2D(j,Rt,Re,null,0),Me.framebufferTexture2D(j,Ut,Re,null,0),xr(Rt,Rr.depthAttachment),xr(Ut,Rr.stencilAttachment),xr(Zn,Rr.depthStencilAttachment);var ga=Me.checkFramebufferStatus(j);!Me.isContextLost()&&ga!==gr&&Y.raise("framebuffer configuration not supported, status = "+Sl[ga]),Me.bindFramebuffer(j,ir.next?ir.next.framebuffer:null),ir.cur=ir.next,Me.getError()}function vr(Rr,ri){var ei=new ai;Xn.framebufferCount++;function ga(li,di){var Yi;Y(ir.next!==ei,"can not update framebuffer which is currently in use");var aa=0,$a=0,xo=!0,Ao=!0,ja=null,Zs=!0,Yo="rgba",Rs="uint8",fs=1,ks=null,Us=null,Js=null,Ss=!1;if(typeof li=="number")aa=li|0,$a=di|0||aa;else if(!li)aa=$a=1;else{Y.type(li,"object","invalid arguments for framebuffer");var qi=li;if("shape"in qi){var Ts=qi.shape;Y(Array.isArray(Ts)&&Ts.length>=2,"invalid shape for framebuffer"),aa=Ts[0],$a=Ts[1]}else"radius"in qi&&(aa=$a=qi.radius),"width"in qi&&(aa=qi.width),"height"in qi&&($a=qi.height);("color"in qi||"colors"in qi)&&(ja=qi.color||qi.colors,Array.isArray(ja)&&Y(ja.length===1||ft.webgl_draw_buffers,"multiple render targets not supported")),ja||("colorCount"in qi&&(fs=qi.colorCount|0,Y(fs>0,"invalid color buffer count")),"colorTexture"in qi&&(Zs=!!qi.colorTexture,Yo="rgba4"),"colorType"in qi&&(Rs=qi.colorType,Zs?(Y(ft.oes_texture_float||!(Rs==="float"||Rs==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Y(ft.oes_texture_half_float||!(Rs==="half float"||Rs==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Rs==="half float"||Rs==="float16"?(Y(ft.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Yo="rgba16f"):(Rs==="float"||Rs==="float32")&&(Y(ft.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Yo="rgba32f"),Y.oneOf(Rs,Dr,"invalid color type")),"colorFormat"in qi&&(Yo=qi.colorFormat,br.indexOf(Yo)>=0?Zs=!0:Or.indexOf(Yo)>=0?Zs=!1:Y.optional(function(){Zs?Y.oneOf(qi.colorFormat,br,"invalid color format for texture"):Y.oneOf(qi.colorFormat,Or,"invalid color format for renderbuffer")}))),("depthTexture"in qi||"depthStencilTexture"in qi)&&(Ss=!!(qi.depthTexture||qi.depthStencilTexture),Y(!Ss||ft.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in qi&&(typeof qi.depth=="boolean"?xo=qi.depth:(ks=qi.depth,Ao=!1)),"stencil"in qi&&(typeof qi.stencil=="boolean"?Ao=qi.stencil:(Us=qi.stencil,xo=!1)),"depthStencil"in qi&&(typeof qi.depthStencil=="boolean"?xo=Ao=qi.depthStencil:(Js=qi.depthStencil,xo=!1,Ao=!1))}var vo=null,As=null,ra=null,Za=null;if(Array.isArray(ja))vo=ja.map(Lr);else if(ja)vo=[Lr(ja)];else for(vo=new Array(fs),Yi=0;Yi<fs;++Yi)vo[Yi]=Tn(aa,$a,Zs,Yo,Rs);Y(ft.webgl_draw_buffers||vo.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Y(vo.length<=Zt.maxColorAttachments,"too many color attachments, not supported"),aa=aa||vo[0].width,$a=$a||vo[0].height,ks?As=Lr(ks):xo&&!Ao&&(As=Tn(aa,$a,Ss,"depth","uint32")),Us?ra=Lr(Us):Ao&&!xo&&(ra=Tn(aa,$a,!1,"stencil","uint8")),Js?Za=Lr(Js):!ks&&!Us&&Ao&&xo&&(Za=Tn(aa,$a,Ss,"depth stencil","depth stencil")),Y(!!ks+!!Us+!!Js<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Co=null;for(Yi=0;Yi<vo.length;++Yi)if(Gr(vo[Yi],aa,$a),Y(!vo[Yi]||vo[Yi].texture&&Mo.indexOf(vo[Yi].texture._texture.format)>=0||vo[Yi].renderbuffer&&Fo.indexOf(vo[Yi].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Yi+" is invalid"),vo[Yi]&&vo[Yi].texture){var ds=so[vo[Yi].texture._texture.format]*ka[vo[Yi].texture._texture.type];Co===null?Co=ds:Y(Co===ds,"all color attachments much have the same number of bits per pixel.")}return Gr(As,aa,$a),Y(!As||As.texture&&As.texture._texture.format===ao||As.renderbuffer&&As.renderbuffer._renderbuffer.format===mu,"invalid depth attachment for framebuffer object"),Gr(ra,aa,$a),Y(!ra||ra.renderbuffer&&ra.renderbuffer._renderbuffer.format===bo,"invalid stencil attachment for framebuffer object"),Gr(Za,aa,$a),Y(!Za||Za.texture&&Za.texture._texture.format===ss||Za.renderbuffer&&Za.renderbuffer._renderbuffer.format===ss,"invalid depth-stencil attachment for framebuffer object"),oi(ei),ei.width=aa,ei.height=$a,ei.colorAttachments=vo,ei.depthAttachment=As,ei.stencilAttachment=ra,ei.depthStencilAttachment=Za,ga.color=vo.map(tr),ga.depth=tr(As),ga.stencil=tr(ra),ga.depthStencil=tr(Za),ga.width=ei.width,ga.height=ei.height,yr(ei),ga}function Ki(li,di){Y(ir.next!==ei,"can not resize a framebuffer which is currently in use");var Yi=Math.max(li|0,1),aa=Math.max(di|0||Yi,1);if(Yi===ei.width&&aa===ei.height)return ga;for(var $a=ei.colorAttachments,xo=0;xo<$a.length;++xo)Fr($a[xo],Yi,aa);return Fr(ei.depthAttachment,Yi,aa),Fr(ei.stencilAttachment,Yi,aa),Fr(ei.depthStencilAttachment,Yi,aa),ei.width=ga.width=Yi,ei.height=ga.height=aa,yr(ei),ga}return ga(Rr,ri),M(ga,{resize:Ki,_reglType:"framebuffer",_framebuffer:ei,destroy:function(){Vi(ei),oi(ei)},use:function(li){ir.setFBO({framebuffer:ga},li)}})}function xi(Rr){var ri=Array(6);function ei(Ki){var li;Y(ri.indexOf(ir.next)<0,"can not update framebuffer which is currently in use");var di={color:null},Yi=0,aa=null,$a="rgba",xo="uint8",Ao=1;if(typeof Ki=="number")Yi=Ki|0;else if(!Ki)Yi=1;else{Y.type(Ki,"object","invalid arguments for framebuffer");var ja=Ki;if("shape"in ja){var Zs=ja.shape;Y(Array.isArray(Zs)&&Zs.length>=2,"invalid shape for framebuffer"),Y(Zs[0]===Zs[1],"cube framebuffer must be square"),Yi=Zs[0]}else"radius"in ja&&(Yi=ja.radius|0),"width"in ja?(Yi=ja.width|0,"height"in ja&&Y(ja.height===Yi,"must be square")):"height"in ja&&(Yi=ja.height|0);("color"in ja||"colors"in ja)&&(aa=ja.color||ja.colors,Array.isArray(aa)&&Y(aa.length===1||ft.webgl_draw_buffers,"multiple render targets not supported")),aa||("colorCount"in ja&&(Ao=ja.colorCount|0,Y(Ao>0,"invalid color buffer count")),"colorType"in ja&&(Y.oneOf(ja.colorType,Dr,"invalid color type"),xo=ja.colorType),"colorFormat"in ja&&($a=ja.colorFormat,Y.oneOf(ja.colorFormat,br,"invalid color format for texture"))),"depth"in ja&&(di.depth=ja.depth),"stencil"in ja&&(di.stencil=ja.stencil),"depthStencil"in ja&&(di.depthStencil=ja.depthStencil)}var Yo;if(aa)if(Array.isArray(aa))for(Yo=[],li=0;li<aa.length;++li)Yo[li]=aa[li];else Yo=[aa];else{Yo=Array(Ao);var Rs={radius:Yi,format:$a,type:xo};for(li=0;li<Ao;++li)Yo[li]=Dn.createCube(Rs)}for(di.color=Array(Yo.length),li=0;li<Yo.length;++li){var fs=Yo[li];Y(typeof fs=="function"&&fs._reglType==="textureCube","invalid cube map"),Yi=Yi||fs.width,Y(fs.width===Yi&&fs.height===Yi,"invalid cube map shape"),di.color[li]={target:se,data:Yo[li]}}for(li=0;li<6;++li){for(var ks=0;ks<Yo.length;++ks)di.color[ks].target=se+li;li>0&&(di.depth=ri[0].depth,di.stencil=ri[0].stencil,di.depthStencil=ri[0].depthStencil),ri[li]?ri[li](di):ri[li]=vr(di)}return M(ei,{width:Yi,height:Yi,color:Yo})}function ga(Ki){var li,di=Ki|0;if(Y(di>0&&di<=Zt.maxCubeMapSize,"invalid radius for cube fbo"),di===ei.width)return ei;var Yi=ei.color;for(li=0;li<Yi.length;++li)Yi[li].resize(di);for(li=0;li<6;++li)ri[li].resize(di);return ei.width=ei.height=di,ei}return ei(Rr),M(ei,{faces:ri,resize:ga,_reglType:"framebufferCube",destroy:function(){ri.forEach(function(Ki){Ki.destroy()})}})}function Qr(){ir.cur=null,ir.next=null,ir.dirty=!0,Oe(Tr).forEach(function(Rr){Rr.framebuffer=Me.createFramebuffer(),yr(Rr)})}return M(ir,{getFramebuffer:function(Rr){if(typeof Rr=="function"&&Rr._reglType==="framebuffer"){var ri=Rr._framebuffer;if(ri instanceof ai)return ri}return null},create:vr,createCube:xi,clear:function(){Oe(Tr).forEach(Vi)},restore:Qr})}var Ka=5126,Qc=34962,jc=34963,Oo=["attributes","elements","offset","count","primitive","instances"];function xs(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ka,this.offset=0,this.stride=0,this.divisor=0}function Hs(Me,ft,Zt,Dn,mr,Xn,ir){for(var br=Zt.maxAttributes,Or=new Array(br),Dr=0;Dr<br;++Dr)Or[Dr]=new xs;var jr=0,Ur={},Gr={Record:xs,scope:{},state:Or,currentVAO:null,targetVAO:null,restore:Lr()?oi:function(){},createVAO:Vi,getVAO:tr,destroyBuffer:xr,setVAO:Lr()?Fr:pi,clear:Lr()?Tr:function(){}};function xr(yr){for(var vr=0;vr<Or.length;++vr){var xi=Or[vr];xi.buffer===yr&&(Me.disableVertexAttribArray(vr),xi.buffer=null)}}function Lr(){return ft.oes_vertex_array_object}function Tn(){return ft.angle_instanced_arrays}function tr(yr){return typeof yr=="function"&&yr._vao?yr._vao:null}function Fr(yr){if(yr!==Gr.currentVAO){var vr=Lr();yr?vr.bindVertexArrayOES(yr.vao):vr.bindVertexArrayOES(null),Gr.currentVAO=yr}}function pi(yr){if(yr!==Gr.currentVAO){if(yr)yr.bindAttrs();else{for(var vr=Tn(),xi=0;xi<Or.length;++xi){var Qr=Or[xi];Qr.buffer?(Me.enableVertexAttribArray(xi),Qr.buffer.bind(),Me.vertexAttribPointer(xi,Qr.size,Qr.type,Qr.normalized,Qr.stride,Qr.offfset),vr&&Qr.divisor&&vr.vertexAttribDivisorANGLE(xi,Qr.divisor)):(Me.disableVertexAttribArray(xi),Me.vertexAttrib4f(xi,Qr.x,Qr.y,Qr.z,Qr.w))}ir.elements?Me.bindBuffer(jc,ir.elements.buffer.buffer):Me.bindBuffer(jc,null)}Gr.currentVAO=yr}}function Tr(){Oe(Ur).forEach(function(yr){yr.destroy()})}function ai(){this.id=++jr,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var yr=Lr();yr?this.vao=yr.createVertexArrayOES():this.vao=null,Ur[this.id]=this,this.buffers=[]}ai.prototype.bindAttrs=function(){for(var yr=Tn(),vr=this.attributes,xi=0;xi<vr.length;++xi){var Qr=vr[xi];Qr.buffer?(Me.enableVertexAttribArray(xi),Me.bindBuffer(Qc,Qr.buffer.buffer),Me.vertexAttribPointer(xi,Qr.size,Qr.type,Qr.normalized,Qr.stride,Qr.offset),yr&&Qr.divisor&&yr.vertexAttribDivisorANGLE(xi,Qr.divisor)):(Me.disableVertexAttribArray(xi),Me.vertexAttrib4f(xi,Qr.x,Qr.y,Qr.z,Qr.w))}for(var Rr=vr.length;Rr<br;++Rr)Me.disableVertexAttribArray(Rr);var ri=Xn.getElements(this.elements);ri?Me.bindBuffer(jc,ri.buffer.buffer):Me.bindBuffer(jc,null)},ai.prototype.refresh=function(){var yr=Lr();yr&&(yr.bindVertexArrayOES(this.vao),this.bindAttrs(),Gr.currentVAO=null,yr.bindVertexArrayOES(null))},ai.prototype.destroy=function(){if(this.vao){var yr=Lr();this===Gr.currentVAO&&(Gr.currentVAO=null,yr.bindVertexArrayOES(null)),yr.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ur[this.id]&&(delete Ur[this.id],Dn.vaoCount-=1)};function oi(){var yr=Lr();yr&&Oe(Ur).forEach(function(vr){vr.refresh()})}function Vi(yr){var vr=new ai;Dn.vaoCount+=1;function xi(Qr){var Rr;if(Array.isArray(Qr))Rr=Qr,vr.elements&&vr.ownsElements&&vr.elements.destroy(),vr.elements=null,vr.ownsElements=!1,vr.offset=0,vr.count=0,vr.instances=-1,vr.primitive=4;else{if(Y(typeof Qr=="object","invalid arguments for create vao"),Y("attributes"in Qr,"must specify attributes for vao"),Qr.elements){var ri=Qr.elements;vr.ownsElements?typeof ri=="function"&&ri._reglType==="elements"?(vr.elements.destroy(),vr.ownsElements=!1):(vr.elements(ri),vr.ownsElements=!1):Xn.getElements(Qr.elements)?(vr.elements=Qr.elements,vr.ownsElements=!1):(vr.elements=Xn.create(Qr.elements),vr.ownsElements=!0)}else vr.elements=null,vr.ownsElements=!1;Rr=Qr.attributes,vr.offset=0,vr.count=-1,vr.instances=-1,vr.primitive=4,vr.elements&&(vr.count=vr.elements._elements.vertCount,vr.primitive=vr.elements._elements.primType),"offset"in Qr&&(vr.offset=Qr.offset|0),"count"in Qr&&(vr.count=Qr.count|0),"instances"in Qr&&(vr.instances=Qr.instances|0),"primitive"in Qr&&(Y(Qr.primitive in nr,"bad primitive type: "+Qr.primitive),vr.primitive=nr[Qr.primitive]),Y.optional(function(){for(var xo=Object.keys(Qr),Ao=0;Ao<xo.length;++Ao)Y(Oo.indexOf(xo[Ao])>=0,'invalid option for vao: "'+xo[Ao]+'" valid options are '+Oo)}),Y(Array.isArray(Rr),"attributes must be an array")}Y(Rr.length<br,"too many attributes"),Y(Rr.length>0,"must specify at least one attribute");var ei={},ga=vr.attributes;ga.length=Rr.length;for(var Ki=0;Ki<Rr.length;++Ki){var li=Rr[Ki],di=ga[Ki]=new xs,Yi=li.data||li;if(Array.isArray(Yi)||p(Yi)||An(Yi)){var aa;vr.buffers[Ki]&&(aa=vr.buffers[Ki],p(Yi)&&aa._buffer.byteLength>=Yi.byteLength?aa.subdata(Yi):(aa.destroy(),vr.buffers[Ki]=null)),vr.buffers[Ki]||(aa=vr.buffers[Ki]=mr.create(li,Qc,!1,!0)),di.buffer=mr.getBuffer(aa),di.size=di.buffer.dimension|0,di.normalized=!1,di.type=di.buffer.dtype,di.offset=0,di.stride=0,di.divisor=0,di.state=1,ei[Ki]=1}else mr.getBuffer(li)?(di.buffer=mr.getBuffer(li),di.size=di.buffer.dimension|0,di.normalized=!1,di.type=di.buffer.dtype,di.offset=0,di.stride=0,di.divisor=0,di.state=1):mr.getBuffer(li.buffer)?(di.buffer=mr.getBuffer(li.buffer),di.size=(+li.size||di.buffer.dimension)|0,di.normalized=!!li.normalized||!1,"type"in li?(Y.parameter(li.type,Xe,"invalid buffer type"),di.type=Xe[li.type]):di.type=di.buffer.dtype,di.offset=(li.offset||0)|0,di.stride=(li.stride||0)|0,di.divisor=(li.divisor||0)|0,di.state=1,Y(di.size>=1&&di.size<=4,"size must be between 1 and 4"),Y(di.offset>=0,"invalid offset"),Y(di.stride>=0&&di.stride<=255,"stride must be between 0 and 255"),Y(di.divisor>=0,"divisor must be positive"),Y(!di.divisor||!!ft.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in li?(Y(Ki>0,"first attribute must not be a constant"),di.x=+li.x||0,di.y=+li.y||0,di.z=+li.z||0,di.w=+li.w||0,di.state=2):Y(!1,"invalid attribute spec for location "+Ki)}for(var $a=0;$a<vr.buffers.length;++$a)!ei[$a]&&vr.buffers[$a]&&(vr.buffers[$a].destroy(),vr.buffers[$a]=null);return vr.refresh(),xi}return xi.destroy=function(){for(var Qr=0;Qr<vr.buffers.length;++Qr)vr.buffers[Qr]&&vr.buffers[Qr].destroy();vr.buffers.length=0,vr.ownsElements&&(vr.elements.destroy(),vr.elements=null,vr.ownsElements=!1),vr.destroy()},xi._vao=vr,xi._reglType="vao",xi(yr)}return Gr}var Iu=35632,Hl=35633,$u=35718,Wl=35721;function Jc(Me,ft,Zt,Dn){var mr={},Xn={};function ir(Tn,tr,Fr,pi){this.name=Tn,this.id=tr,this.location=Fr,this.info=pi}function br(Tn,tr){for(var Fr=0;Fr<Tn.length;++Fr)if(Tn[Fr].id===tr.id){Tn[Fr].location=tr.location;return}Tn.push(tr)}function Or(Tn,tr,Fr){var pi=Tn===Iu?mr:Xn,Tr=pi[tr];if(!Tr){var ai=ft.str(tr);Tr=Me.createShader(Tn),Me.shaderSource(Tr,ai),Me.compileShader(Tr),Y.shaderError(Me,Tr,ai,Tn,Fr),pi[tr]=Tr}return Tr}var Dr={},jr=[],Ur=0;function Gr(Tn,tr){this.id=Ur++,this.fragId=Tn,this.vertId=tr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Dn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function xr(Tn,tr,Fr){var pi,Tr,ai=Or(Iu,Tn.fragId),oi=Or(Hl,Tn.vertId),Vi=Tn.program=Me.createProgram();if(Me.attachShader(Vi,ai),Me.attachShader(Vi,oi),Fr)for(pi=0;pi<Fr.length;++pi){var yr=Fr[pi];Me.bindAttribLocation(Vi,yr[0],yr[1])}Me.linkProgram(Vi),Y.linkError(Me,Vi,ft.str(Tn.fragId),ft.str(Tn.vertId),tr);var vr=Me.getProgramParameter(Vi,$u);Dn.profile&&(Tn.stats.uniformsCount=vr);var xi=Tn.uniforms;for(pi=0;pi<vr;++pi)if(Tr=Me.getActiveUniform(Vi,pi),Tr)if(Tr.size>1)for(var Qr=0;Qr<Tr.size;++Qr){var Rr=Tr.name.replace("[0]","["+Qr+"]");br(xi,new ir(Rr,ft.id(Rr),Me.getUniformLocation(Vi,Rr),Tr))}else br(xi,new ir(Tr.name,ft.id(Tr.name),Me.getUniformLocation(Vi,Tr.name),Tr));var ri=Me.getProgramParameter(Vi,Wl);Dn.profile&&(Tn.stats.attributesCount=ri);var ei=Tn.attributes;for(pi=0;pi<ri;++pi)Tr=Me.getActiveAttrib(Vi,pi),Tr&&br(ei,new ir(Tr.name,ft.id(Tr.name),Me.getAttribLocation(Vi,Tr.name),Tr))}Dn.profile&&(Zt.getMaxUniformsCount=function(){var Tn=0;return jr.forEach(function(tr){tr.stats.uniformsCount>Tn&&(Tn=tr.stats.uniformsCount)}),Tn},Zt.getMaxAttributesCount=function(){var Tn=0;return jr.forEach(function(tr){tr.stats.attributesCount>Tn&&(Tn=tr.stats.attributesCount)}),Tn});function Lr(){mr={},Xn={};for(var Tn=0;Tn<jr.length;++Tn)xr(jr[Tn],null,jr[Tn].attributes.map(function(tr){return[tr.location,tr.name]}))}return{clear:function(){var Tn=Me.deleteShader.bind(Me);Oe(mr).forEach(Tn),mr={},Oe(Xn).forEach(Tn),Xn={},jr.forEach(function(tr){Me.deleteProgram(tr.program)}),jr.length=0,Dr={},Zt.shaderCount=0},program:function(Tn,tr,Fr,pi){Y.command(Tn>=0,"missing vertex shader",Fr),Y.command(tr>=0,"missing fragment shader",Fr);var Tr=Dr[tr];Tr||(Tr=Dr[tr]={});var ai=Tr[Tn];if(ai&&(ai.refCount++,!pi))return ai;var oi=new Gr(tr,Tn);return Zt.shaderCount++,xr(oi,Fr,pi),ai||(Tr[Tn]=oi),jr.push(oi),M(oi,{destroy:function(){if(oi.refCount--,oi.refCount<=0){Me.deleteProgram(oi.program);var Vi=jr.indexOf(oi);jr.splice(Vi,1),Zt.shaderCount--}Tr[oi.vertId].refCount<=0&&(Me.deleteShader(Xn[oi.vertId]),delete Xn[oi.vertId],delete Dr[oi.fragId][oi.vertId]),Object.keys(Dr[oi.fragId]).length||(Me.deleteShader(mr[oi.fragId]),delete mr[oi.fragId],delete Dr[oi.fragId])}})},restore:Lr,shader:Or,frag:-1,vert:-1}}var Xl=6408,Tl=5121,_u=3333,Al=5126;function Ru(Me,ft,Zt,Dn,mr,Xn,ir){function br(jr){var Ur;ft.next===null?(Y(mr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ur=Tl):(Y(ft.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ur=ft.next.colorAttachments[0].texture._texture.type,Y.optional(function(){Xn.oes_texture_float?(Y(Ur===Tl||Ur===Al,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ur===Al&&Y(ir.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Y(Ur===Tl,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Gr=0,xr=0,Lr=Dn.framebufferWidth,Tn=Dn.framebufferHeight,tr=null;p(jr)?tr=jr:jr&&(Y.type(jr,"object","invalid arguments to regl.read()"),Gr=jr.x|0,xr=jr.y|0,Y(Gr>=0&&Gr<Dn.framebufferWidth,"invalid x offset for regl.read"),Y(xr>=0&&xr<Dn.framebufferHeight,"invalid y offset for regl.read"),Lr=(jr.width||Dn.framebufferWidth-Gr)|0,Tn=(jr.height||Dn.framebufferHeight-xr)|0,tr=jr.data||null),tr&&(Ur===Tl?Y(tr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ur===Al&&Y(tr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Y(Lr>0&&Lr+Gr<=Dn.framebufferWidth,"invalid width for read pixels"),Y(Tn>0&&Tn+xr<=Dn.framebufferHeight,"invalid height for read pixels"),Zt();var Fr=Lr*Tn*4;return tr||(Ur===Tl?tr=new Uint8Array(Fr):Ur===Al&&(tr=tr||new Float32Array(Fr))),Y.isTypedArray(tr,"data buffer for regl.read() must be a typedarray"),Y(tr.byteLength>=Fr,"data buffer for regl.read() too small"),Me.pixelStorei(_u,4),Me.readPixels(Gr,xr,Lr,Tn,Xl,Ur,tr),tr}function Or(jr){var Ur;return ft.setFBO({framebuffer:jr.framebuffer},function(){Ur=br(jr)}),Ur}function Dr(jr){return!jr||!("framebuffer"in jr)?br(jr):Or(jr)}return Dr}function Ho(Me){return Array.prototype.slice.call(Me)}function Cl(Me){return Ho(Me).join("")}function Mc(){var Me=0,ft=[],Zt=[];function Dn(Ur){for(var Gr=0;Gr<Zt.length;++Gr)if(Zt[Gr]===Ur)return ft[Gr];var xr="g"+Me++;return ft.push(xr),Zt.push(Ur),xr}function mr(){var Ur=[];function Gr(){Ur.push.apply(Ur,Ho(arguments))}var xr=[];function Lr(){var Tn="v"+Me++;return xr.push(Tn),arguments.length>0&&(Ur.push(Tn,"="),Ur.push.apply(Ur,Ho(arguments)),Ur.push(";")),Tn}return M(Gr,{def:Lr,toString:function(){return Cl([xr.length>0?"var "+xr.join(",")+";":"",Cl(Ur)])}})}function Xn(){var Ur=mr(),Gr=mr(),xr=Ur.toString,Lr=Gr.toString;function Tn(tr,Fr){Gr(tr,Fr,"=",Ur.def(tr,Fr),";")}return M(function(){Ur.apply(Ur,Ho(arguments))},{def:Ur.def,entry:Ur,exit:Gr,save:Tn,set:function(tr,Fr,pi){Tn(tr,Fr),Ur(tr,Fr,"=",pi,";")},toString:function(){return xr()+Lr()}})}function ir(){var Ur=Cl(arguments),Gr=Xn(),xr=Xn(),Lr=Gr.toString,Tn=xr.toString;return M(Gr,{then:function(){return Gr.apply(Gr,Ho(arguments)),this},else:function(){return xr.apply(xr,Ho(arguments)),this},toString:function(){var tr=Tn();return tr&&(tr="else{"+tr+"}"),Cl(["if(",Ur,"){",Lr(),"}",tr])}})}var br=mr(),Or={};function Dr(Ur,Gr){var xr=[];function Lr(){var Tr="a"+xr.length;return xr.push(Tr),Tr}Gr=Gr||0;for(var Tn=0;Tn<Gr;++Tn)Lr();var tr=Xn(),Fr=tr.toString,pi=Or[Ur]=M(tr,{arg:Lr,toString:function(){return Cl(["function(",xr.join(),"){",Fr(),"}"])}});return pi}function jr(){var Ur=['"use strict";',br,"return {"];Object.keys(Or).forEach(function(Tn){Ur.push('"',Tn,'":',Or[Tn].toString(),",")}),Ur.push("}");var Gr=Cl(Ur).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),xr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Lr=xr?E.Function.apply(null,ft.concat(Gr)):Function.apply(null,ft.concat(Gr));return Lr.apply(null,Zt)}return{global:br,link:Dn,block:mr,proc:Dr,scope:Xn,cond:ir,compile:jr}}var Yl="xyzw".split(""),ju=5121,us=1,Oc=2,Vc=0,Vu=1,ef=2,sc=3,ns=4,bu=5,Gc=6,ll="dither",tf="blend.enable",uc="blend.color",ku="blend.equation",nf="blend.func",Os="depth.enable",hf="depth.func",Pf="depth.range",If="depth.mask",df="colorMask",Kl="cull.enable",pf="cull.face",Pc="frontFace",Hc="lineWidth",bf="polygonOffset.enable",lc="polygonOffset.offset",cc="sample.alpha",rf="sample.enable",af="sample.coverage",Ic="stencil.enable",wl="stencil.mask",Wc="stencil.func",of="stencil.opFront",fc="stencil.opBack",sf="scissor.enable",Ml="scissor.box",Gu="viewport",Ol="profile",Lu="framebuffer",Pl="vert",Hu="frag",R="elements",ut="primitive",Te="count",fe="offset",we="instances",je="vao",_t="Width",It="Height",Ct=Lu+_t,Jt=Lu+It,Wn=Gu+_t,Mr=Gu+It,hr="drawingBuffer",kr=hr+_t,ia=hr+It,$i=[nf,ku,Wc,of,fc,af,Gu,Ml,lc],zi=34962,Ea=34963,qa=35632,ua=35633,rs=3553,La=34067,Po=2884,Wo=3042,Xa=3024,Ra=2960,To=2929,ls=3089,is=32823,Ps=32926,Il=32928,Qs=5126,Es=35664,Wu=35665,Fu=35666,hu=5124,ql=35667,Xu=35668,Rl=35669,I=35670,z=35671,$=35672,ee=35673,ge=35674,xe=35675,gt=35676,Ft=35678,Sn=35680,Mt=4,En=1028,lr=1029,Di=2304,Zi=2305,Ri=32775,ki=32776,Ui=519,yi=7680,na=0,Oa=1,za=32774,Xo=513,cs=36160,Bs=36064,So={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pa=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],co={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Do={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ws={frag:qa,vert:ua},Is={cw:Di,ccw:Zi};function Xs(Me){return Array.isArray(Me)||p(Me)||An(Me)}function kl(Me){return Me.sort(function(ft,Zt){return ft===Gu?-1:Zt===Gu?1:ft<Zt?-1:1})}function Jo(Me,ft,Zt,Dn){this.thisDep=Me,this.contextDep=ft,this.propDep=Zt,this.append=Dn}function Yu(Me){return Me&&!(Me.thisDep||Me.contextDep||Me.propDep)}function as(Me){return new Jo(!1,!1,!1,Me)}function Ku(Me,ft){var Zt=Me.type;if(Zt===Vc){var Dn=Me.data.length;return new Jo(!0,Dn>=1,Dn>=2,ft)}else if(Zt===ns){var mr=Me.data;return new Jo(mr.thisDep,mr.contextDep,mr.propDep,ft)}else{if(Zt===bu)return new Jo(!1,!1,!1,ft);if(Zt===Gc){for(var Xn=!1,ir=!1,br=!1,Or=0;Or<Me.data.length;++Or){var Dr=Me.data[Or];if(Dr.type===Vu)br=!0;else if(Dr.type===ef)ir=!0;else if(Dr.type===sc)Xn=!0;else if(Dr.type===Vc){Xn=!0;var jr=Dr.data;jr>=1&&(ir=!0),jr>=2&&(br=!0)}else Dr.type===ns&&(Xn=Xn||Dr.data.thisDep,ir=ir||Dr.data.contextDep,br=br||Dr.data.propDep)}return new Jo(Xn,ir,br,ft)}else return new Jo(Zt===sc,Zt===ef,Zt===Vu,ft)}}var Wf=new Jo(!1,!1,!1,function(){});function Rc(Me,ft,Zt,Dn,mr,Xn,ir,br,Or,Dr,jr,Ur,Gr,xr,Lr){var Tn=Dr.Record,tr={add:32774,subtract:32778,"reverse subtract":32779};Zt.ext_blend_minmax&&(tr.min=Ri,tr.max=ki);var Fr=Zt.angle_instanced_arrays,pi=Zt.webgl_draw_buffers,Tr=Zt.oes_vertex_array_object,ai={dirty:!0,profile:Lr.profile},oi={},Vi=[],yr={},vr={};function xi(St){return St.replace(".","_")}function Qr(St,ot,Wt){var yn=xi(St);Vi.push(St),oi[yn]=ai[yn]=!!Wt,yr[yn]=ot}function Rr(St,ot,Wt){var yn=xi(St);Vi.push(St),Array.isArray(Wt)?(ai[yn]=Wt.slice(),oi[yn]=Wt.slice()):ai[yn]=oi[yn]=Wt,vr[yn]=ot}Qr(ll,Xa),Qr(tf,Wo),Rr(uc,"blendColor",[0,0,0,0]),Rr(ku,"blendEquationSeparate",[za,za]),Rr(nf,"blendFuncSeparate",[Oa,na,Oa,na]),Qr(Os,To,!0),Rr(hf,"depthFunc",Xo),Rr(Pf,"depthRange",[0,1]),Rr(If,"depthMask",!0),Rr(df,df,[!0,!0,!0,!0]),Qr(Kl,Po),Rr(pf,"cullFace",lr),Rr(Pc,Pc,Zi),Rr(Hc,Hc,1),Qr(bf,is),Rr(lc,"polygonOffset",[0,0]),Qr(cc,Ps),Qr(rf,Il),Rr(af,"sampleCoverage",[1,!1]),Qr(Ic,Ra),Rr(wl,"stencilMask",-1),Rr(Wc,"stencilFunc",[Ui,0,-1]),Rr(of,"stencilOpSeparate",[En,yi,yi,yi]),Rr(fc,"stencilOpSeparate",[lr,yi,yi,yi]),Qr(sf,ls),Rr(Ml,"scissor",[0,0,Me.drawingBufferWidth,Me.drawingBufferHeight]),Rr(Gu,Gu,[0,0,Me.drawingBufferWidth,Me.drawingBufferHeight]);var ri={gl:Me,context:Gr,strings:ft,next:oi,current:ai,draw:Ur,elements:Xn,buffer:mr,shader:jr,attributes:Dr.state,vao:Dr,uniforms:Or,framebuffer:br,extensions:Zt,timer:xr,isBufferArgs:Xs},ei={primTypes:nr,compareFuncs:co,blendFuncs:So,blendEquations:tr,stencilOps:Do,glTypes:Xe,orientationType:Is};Y.optional(function(){ri.isArrayLike=lo}),pi&&(ei.backBuffer=[lr],ei.drawBuffer=Gn(Dn.maxDrawbuffers,function(St){return St===0?[0]:Gn(St,function(ot){return Bs+ot})}));var ga=0;function Ki(){var St=Mc(),ot=St.link,Wt=St.global;St.id=ga++,St.batchId="0";var yn=ot(ri),qn=St.shared={props:"a0"};Object.keys(ri).forEach(function(Qt){qn[Qt]=Wt.def(yn,".",Qt)}),Y.optional(function(){St.CHECK=ot(Y),St.commandStr=Y.guessCommand(),St.command=ot(St.commandStr),St.assert=function(Qt,Pt,Cn){Qt("if(!(",Pt,"))",this.CHECK,".commandRaise(",ot(Cn),",",this.command,");")},ei.invalidBlendCombinations=Pa});var sn=St.next={},an=St.current={};Object.keys(vr).forEach(function(Qt){Array.isArray(ai[Qt])&&(sn[Qt]=Wt.def(qn.next,".",Qt),an[Qt]=Wt.def(qn.current,".",Qt))});var dn=St.constants={};Object.keys(ei).forEach(function(Qt){dn[Qt]=Wt.def(JSON.stringify(ei[Qt]))}),St.invoke=function(Qt,Pt){switch(Pt.type){case Vc:var Cn=["this",qn.context,qn.props,St.batchId];return Qt.def(ot(Pt.data),".call(",Cn.slice(0,Math.max(Pt.data.length+1,4)),")");case Vu:return Qt.def(qn.props,Pt.data);case ef:return Qt.def(qn.context,Pt.data);case sc:return Qt.def("this",Pt.data);case ns:return Pt.data.append(St,Qt),Pt.data.ref;case bu:return Pt.data.toString();case Gc:return Pt.data.map(function(Fn){return St.invoke(Qt,Fn)})}},St.attribCache={};var bt={};return St.scopeAttrib=function(Qt){var Pt=ft.id(Qt);if(Pt in bt)return bt[Pt];var Cn=Dr.scope[Pt];Cn||(Cn=Dr.scope[Pt]=new Tn);var Fn=bt[Pt]=ot(Cn);return Fn},St}function li(St){var ot=St.static,Wt=St.dynamic,yn;if(Ol in ot){var qn=!!ot[Ol];yn=as(function(an,dn){return qn}),yn.enable=qn}else if(Ol in Wt){var sn=Wt[Ol];yn=Ku(sn,function(an,dn){return an.invoke(dn,sn)})}return yn}function di(St,ot){var Wt=St.static,yn=St.dynamic;if(Lu in Wt){var qn=Wt[Lu];return qn?(qn=br.getFramebuffer(qn),Y.command(qn,"invalid framebuffer object"),as(function(an,dn){var bt=an.link(qn),Qt=an.shared;dn.set(Qt.framebuffer,".next",bt);var Pt=Qt.context;return dn.set(Pt,"."+Ct,bt+".width"),dn.set(Pt,"."+Jt,bt+".height"),bt})):as(function(an,dn){var bt=an.shared;dn.set(bt.framebuffer,".next","null");var Qt=bt.context;return dn.set(Qt,"."+Ct,Qt+"."+kr),dn.set(Qt,"."+Jt,Qt+"."+ia),"null"})}else if(Lu in yn){var sn=yn[Lu];return Ku(sn,function(an,dn){var bt=an.invoke(dn,sn),Qt=an.shared,Pt=Qt.framebuffer,Cn=dn.def(Pt,".getFramebuffer(",bt,")");Y.optional(function(){an.assert(dn,"!"+bt+"||"+Cn,"invalid framebuffer object")}),dn.set(Pt,".next",Cn);var Fn=Qt.context;return dn.set(Fn,"."+Ct,Cn+"?"+Cn+".width:"+Fn+"."+kr),dn.set(Fn,"."+Jt,Cn+"?"+Cn+".height:"+Fn+"."+ia),Cn})}else return null}function Yi(St,ot,Wt){var yn=St.static,qn=St.dynamic;function sn(bt){if(bt in yn){var Qt=yn[bt];Y.commandType(Qt,"object","invalid "+bt,Wt.commandStr);var Pt=!0,Cn=Qt.x|0,Fn=Qt.y|0,Ar,Yr;return"width"in Qt?(Ar=Qt.width|0,Y.command(Ar>=0,"invalid "+bt,Wt.commandStr)):Pt=!1,"height"in Qt?(Yr=Qt.height|0,Y.command(Yr>=0,"invalid "+bt,Wt.commandStr)):Pt=!1,new Jo(!Pt&&ot&&ot.thisDep,!Pt&&ot&&ot.contextDep,!Pt&&ot&&ot.propDep,function(Wr,Pi){var vi=Wr.shared.context,Mi=Ar;"width"in Qt||(Mi=Pi.def(vi,".",Ct,"-",Cn));var Si=Yr;return"height"in Qt||(Si=Pi.def(vi,".",Jt,"-",Fn)),[Cn,Fn,Mi,Si]})}else if(bt in qn){var Kr=qn[bt],ci=Ku(Kr,function(Wr,Pi){var vi=Wr.invoke(Pi,Kr);Y.optional(function(){Wr.assert(Pi,vi+"&&typeof "+vi+'==="object"',"invalid "+bt)});var Mi=Wr.shared.context,Si=Pi.def(vi,".x|0"),Ii=Pi.def(vi,".y|0"),Qi=Pi.def('"width" in ',vi,"?",vi,".width|0:","(",Mi,".",Ct,"-",Si,")"),Uo=Pi.def('"height" in ',vi,"?",vi,".height|0:","(",Mi,".",Jt,"-",Ii,")");return Y.optional(function(){Wr.assert(Pi,Qi+">=0&&"+Uo+">=0","invalid "+bt)}),[Si,Ii,Qi,Uo]});return ot&&(ci.thisDep=ci.thisDep||ot.thisDep,ci.contextDep=ci.contextDep||ot.contextDep,ci.propDep=ci.propDep||ot.propDep),ci}else return ot?new Jo(ot.thisDep,ot.contextDep,ot.propDep,function(Wr,Pi){var vi=Wr.shared.context;return[0,0,Pi.def(vi,".",Ct),Pi.def(vi,".",Jt)]}):null}var an=sn(Gu);if(an){var dn=an;an=new Jo(an.thisDep,an.contextDep,an.propDep,function(bt,Qt){var Pt=dn.append(bt,Qt),Cn=bt.shared.context;return Qt.set(Cn,"."+Wn,Pt[2]),Qt.set(Cn,"."+Mr,Pt[3]),Pt})}return{viewport:an,scissor_box:sn(Ml)}}function aa(St,ot){var Wt=St.static,yn=typeof Wt[Hu]=="string"&&typeof Wt[Pl]=="string";if(yn){if(Object.keys(ot.dynamic).length>0)return null;var qn=ot.static,sn=Object.keys(qn);if(sn.length>0&&typeof qn[sn[0]]=="number"){for(var an=[],dn=0;dn<sn.length;++dn)Y(typeof qn[sn[dn]]=="number","must specify all vertex attribute locations when using vaos"),an.push([qn[sn[dn]]|0,sn[dn]]);return an}}return null}function $a(St,ot,Wt){var yn=St.static,qn=St.dynamic;function sn(Pt){if(Pt in yn){var Cn=ft.id(yn[Pt]);Y.optional(function(){jr.shader(Ws[Pt],Cn,Y.guessCommand())});var Fn=as(function(){return Cn});return Fn.id=Cn,Fn}else if(Pt in qn){var Ar=qn[Pt];return Ku(Ar,function(Yr,Kr){var ci=Yr.invoke(Kr,Ar),Wr=Kr.def(Yr.shared.strings,".id(",ci,")");return Y.optional(function(){Kr(Yr.shared.shader,".shader(",Ws[Pt],",",Wr,",",Yr.command,");")}),Wr})}return null}var an=sn(Hu),dn=sn(Pl),bt=null,Qt;return Yu(an)&&Yu(dn)?(bt=jr.program(dn.id,an.id,null,Wt),Qt=as(function(Pt,Cn){return Pt.link(bt)})):Qt=new Jo(an&&an.thisDep||dn&&dn.thisDep,an&&an.contextDep||dn&&dn.contextDep,an&&an.propDep||dn&&dn.propDep,function(Pt,Cn){var Fn=Pt.shared.shader,Ar;an?Ar=an.append(Pt,Cn):Ar=Cn.def(Fn,".",Hu);var Yr;dn?Yr=dn.append(Pt,Cn):Yr=Cn.def(Fn,".",Pl);var Kr=Fn+".program("+Yr+","+Ar;return Y.optional(function(){Kr+=","+Pt.command}),Cn.def(Kr+")")}),{frag:an,vert:dn,progVar:Qt,program:bt}}function xo(St,ot){var Wt=St.static,yn=St.dynamic,qn={},sn=!1;function an(){if(je in Wt){var Pi=Wt[je];return Pi!==null&&Dr.getVAO(Pi)===null&&(Pi=Dr.createVAO(Pi)),sn=!0,qn.vao=Pi,as(function(Mi){var Si=Dr.getVAO(Pi);return Si?Mi.link(Si):"null"})}else if(je in yn){sn=!0;var vi=yn[je];return Ku(vi,function(Mi,Si){var Ii=Mi.invoke(Si,vi);return Si.def(Mi.shared.vao+".getVAO("+Ii+")")})}return null}var dn=an(),bt=!1;function Qt(){if(R in Wt){var Pi=Wt[R];if(qn.elements=Pi,Xs(Pi)){var vi=qn.elements=Xn.create(Pi,!0);Pi=Xn.getElements(vi),bt=!0}else Pi&&(Pi=Xn.getElements(Pi),bt=!0,Y.command(Pi,"invalid elements",ot.commandStr));var Mi=as(function(Ii,Qi){if(Pi){var Uo=Ii.link(Pi);return Ii.ELEMENTS=Uo,Uo}return Ii.ELEMENTS=null,null});return Mi.value=Pi,Mi}else if(R in yn){bt=!0;var Si=yn[R];return Ku(Si,function(Ii,Qi){var Uo=Ii.shared,zs=Uo.isBufferArgs,hs=Uo.elements,Ql=Ii.invoke(Qi,Si),dc=Qi.def("null"),xu=Qi.def(zs,"(",Ql,")"),pc=Ii.cond(xu).then(dc,"=",hs,".createStream(",Ql,");").else(dc,"=",hs,".getElements(",Ql,");");return Y.optional(function(){Ii.assert(pc.else,"!"+Ql+"||"+dc,"invalid elements")}),Qi.entry(pc),Qi.exit(Ii.cond(xu).then(hs,".destroyStream(",dc,");")),Ii.ELEMENTS=dc,dc})}else if(sn)return new Jo(dn.thisDep,dn.contextDep,dn.propDep,function(Ii,Qi){return Qi.def(Ii.shared.vao+".currentVAO?"+Ii.shared.elements+".getElements("+Ii.shared.vao+".currentVAO.elements):null")});return null}var Pt=Qt();function Cn(){if(ut in Wt){var Pi=Wt[ut];return qn.primitive=Pi,Y.commandParameter(Pi,nr,"invalid primitve",ot.commandStr),as(function(Mi,Si){return nr[Pi]})}else if(ut in yn){var vi=yn[ut];return Ku(vi,function(Mi,Si){var Ii=Mi.constants.primTypes,Qi=Mi.invoke(Si,vi);return Y.optional(function(){Mi.assert(Si,Qi+" in "+Ii,"invalid primitive, must be one of "+Object.keys(nr))}),Si.def(Ii,"[",Qi,"]")})}else{if(bt)return Yu(Pt)?Pt.value?as(function(Mi,Si){return Si.def(Mi.ELEMENTS,".primType")}):as(function(){return Mt}):new Jo(Pt.thisDep,Pt.contextDep,Pt.propDep,function(Mi,Si){var Ii=Mi.ELEMENTS;return Si.def(Ii,"?",Ii,".primType:",Mt)});if(sn)return new Jo(dn.thisDep,dn.contextDep,dn.propDep,function(Mi,Si){return Si.def(Mi.shared.vao+".currentVAO?"+Mi.shared.vao+".currentVAO.primitive:"+Mt)})}return null}function Fn(Pi,vi){if(Pi in Wt){var Mi=Wt[Pi]|0;return vi?qn.offset=Mi:qn.instances=Mi,Y.command(!vi||Mi>=0,"invalid "+Pi,ot.commandStr),as(function(Ii,Qi){return vi&&(Ii.OFFSET=Mi),Mi})}else if(Pi in yn){var Si=yn[Pi];return Ku(Si,function(Ii,Qi){var Uo=Ii.invoke(Qi,Si);return vi&&(Ii.OFFSET=Uo,Y.optional(function(){Ii.assert(Qi,Uo+">=0","invalid "+Pi)})),Uo})}else if(vi){if(bt)return as(function(Ii,Qi){return Ii.OFFSET=0,0});if(sn)return new Jo(dn.thisDep,dn.contextDep,dn.propDep,function(Ii,Qi){return Qi.def(Ii.shared.vao+".currentVAO?"+Ii.shared.vao+".currentVAO.offset:0")})}else if(sn)return new Jo(dn.thisDep,dn.contextDep,dn.propDep,function(Ii,Qi){return Qi.def(Ii.shared.vao+".currentVAO?"+Ii.shared.vao+".currentVAO.instances:-1")});return null}var Ar=Fn(fe,!0);function Yr(){if(Te in Wt){var Pi=Wt[Te]|0;return qn.count=Pi,Y.command(typeof Pi=="number"&&Pi>=0,"invalid vertex count",ot.commandStr),as(function(){return Pi})}else if(Te in yn){var vi=yn[Te];return Ku(vi,function(Qi,Uo){var zs=Qi.invoke(Uo,vi);return Y.optional(function(){Qi.assert(Uo,"typeof "+zs+'==="number"&&'+zs+">=0&&"+zs+"===("+zs+"|0)","invalid vertex count")}),zs})}else if(bt)if(Yu(Pt)){if(Pt)return Ar?new Jo(Ar.thisDep,Ar.contextDep,Ar.propDep,function(Qi,Uo){var zs=Uo.def(Qi.ELEMENTS,".vertCount-",Qi.OFFSET);return Y.optional(function(){Qi.assert(Uo,zs+">=0","invalid vertex offset/element buffer too small")}),zs}):as(function(Qi,Uo){return Uo.def(Qi.ELEMENTS,".vertCount")});var Mi=as(function(){return-1});return Y.optional(function(){Mi.MISSING=!0}),Mi}else{var Si=new Jo(Pt.thisDep||Ar.thisDep,Pt.contextDep||Ar.contextDep,Pt.propDep||Ar.propDep,function(Qi,Uo){var zs=Qi.ELEMENTS;return Qi.OFFSET?Uo.def(zs,"?",zs,".vertCount-",Qi.OFFSET,":-1"):Uo.def(zs,"?",zs,".vertCount:-1")});return Y.optional(function(){Si.DYNAMIC=!0}),Si}else if(sn){var Ii=new Jo(dn.thisDep,dn.contextDep,dn.propDep,function(Qi,Uo){return Uo.def(Qi.shared.vao,".currentVAO?",Qi.shared.vao,".currentVAO.count:-1")});return Ii}return null}var Kr=Cn(),ci=Yr(),Wr=Fn(we,!1);return{elements:Pt,primitive:Kr,count:ci,instances:Wr,offset:Ar,vao:dn,vaoActive:sn,elementsActive:bt,static:qn}}function Ao(St,ot){var Wt=St.static,yn=St.dynamic,qn={};return Vi.forEach(function(sn){var an=xi(sn);function dn(bt,Qt){if(sn in Wt){var Pt=bt(Wt[sn]);qn[an]=as(function(){return Pt})}else if(sn in yn){var Cn=yn[sn];qn[an]=Ku(Cn,function(Fn,Ar){return Qt(Fn,Ar,Fn.invoke(Ar,Cn))})}}switch(sn){case Kl:case tf:case ll:case Ic:case Os:case sf:case bf:case cc:case rf:case If:return dn(function(bt){return Y.commandType(bt,"boolean",sn,ot.commandStr),bt},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,"typeof "+Pt+'==="boolean"',"invalid flag "+sn,bt.commandStr)}),Pt});case hf:return dn(function(bt){return Y.commandParameter(bt,co,"invalid "+sn,ot.commandStr),co[bt]},function(bt,Qt,Pt){var Cn=bt.constants.compareFuncs;return Y.optional(function(){bt.assert(Qt,Pt+" in "+Cn,"invalid "+sn+", must be one of "+Object.keys(co))}),Qt.def(Cn,"[",Pt,"]")});case Pf:return dn(function(bt){return Y.command(lo(bt)&&bt.length===2&&typeof bt[0]=="number"&&typeof bt[1]=="number"&&bt[0]<=bt[1],"depth range is 2d array",ot.commandStr),bt},function(bt,Qt,Pt){Y.optional(function(){bt.assert(Qt,bt.shared.isArrayLike+"("+Pt+")&&"+Pt+".length===2&&typeof "+Pt+'[0]==="number"&&typeof '+Pt+'[1]==="number"&&'+Pt+"[0]<="+Pt+"[1]","depth range must be a 2d array")});var Cn=Qt.def("+",Pt,"[0]"),Fn=Qt.def("+",Pt,"[1]");return[Cn,Fn]});case nf:return dn(function(bt){Y.commandType(bt,"object","blend.func",ot.commandStr);var Qt="srcRGB"in bt?bt.srcRGB:bt.src,Pt="srcAlpha"in bt?bt.srcAlpha:bt.src,Cn="dstRGB"in bt?bt.dstRGB:bt.dst,Fn="dstAlpha"in bt?bt.dstAlpha:bt.dst;return Y.commandParameter(Qt,So,an+".srcRGB",ot.commandStr),Y.commandParameter(Pt,So,an+".srcAlpha",ot.commandStr),Y.commandParameter(Cn,So,an+".dstRGB",ot.commandStr),Y.commandParameter(Fn,So,an+".dstAlpha",ot.commandStr),Y.command(Pa.indexOf(Qt+", "+Cn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Qt+", "+Cn+")",ot.commandStr),[So[Qt],So[Cn],So[Pt],So[Fn]]},function(bt,Qt,Pt){var Cn=bt.constants.blendFuncs;Y.optional(function(){bt.assert(Qt,Pt+"&&typeof "+Pt+'==="object"',"invalid blend func, must be an object")});function Fn(vi,Mi){var Si=Qt.def('"',vi,Mi,'" in ',Pt,"?",Pt,".",vi,Mi,":",Pt,".",vi);return Y.optional(function(){bt.assert(Qt,Si+" in "+Cn,"invalid "+sn+"."+vi+Mi+", must be one of "+Object.keys(So))}),Si}var Ar=Fn("src","RGB"),Yr=Fn("dst","RGB");Y.optional(function(){var vi=bt.constants.invalidBlendCombinations;bt.assert(Qt,vi+".indexOf("+Ar+'+", "+'+Yr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Kr=Qt.def(Cn,"[",Ar,"]"),ci=Qt.def(Cn,"[",Fn("src","Alpha"),"]"),Wr=Qt.def(Cn,"[",Yr,"]"),Pi=Qt.def(Cn,"[",Fn("dst","Alpha"),"]");return[Kr,Wr,ci,Pi]});case ku:return dn(function(bt){if(typeof bt=="string")return Y.commandParameter(bt,tr,"invalid "+sn,ot.commandStr),[tr[bt],tr[bt]];if(typeof bt=="object")return Y.commandParameter(bt.rgb,tr,sn+".rgb",ot.commandStr),Y.commandParameter(bt.alpha,tr,sn+".alpha",ot.commandStr),[tr[bt.rgb],tr[bt.alpha]];Y.commandRaise("invalid blend.equation",ot.commandStr)},function(bt,Qt,Pt){var Cn=bt.constants.blendEquations,Fn=Qt.def(),Ar=Qt.def(),Yr=bt.cond("typeof ",Pt,'==="string"');return Y.optional(function(){function Kr(ci,Wr,Pi){bt.assert(ci,Pi+" in "+Cn,"invalid "+Wr+", must be one of "+Object.keys(tr))}Kr(Yr.then,sn,Pt),bt.assert(Yr.else,Pt+"&&typeof "+Pt+'==="object"',"invalid "+sn),Kr(Yr.else,sn+".rgb",Pt+".rgb"),Kr(Yr.else,sn+".alpha",Pt+".alpha")}),Yr.then(Fn,"=",Ar,"=",Cn,"[",Pt,"];"),Yr.else(Fn,"=",Cn,"[",Pt,".rgb];",Ar,"=",Cn,"[",Pt,".alpha];"),Qt(Yr),[Fn,Ar]});case uc:return dn(function(bt){return Y.command(lo(bt)&&bt.length===4,"blend.color must be a 4d array",ot.commandStr),Gn(4,function(Qt){return+bt[Qt]})},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,bt.shared.isArrayLike+"("+Pt+")&&"+Pt+".length===4","blend.color must be a 4d array")}),Gn(4,function(Cn){return Qt.def("+",Pt,"[",Cn,"]")})});case wl:return dn(function(bt){return Y.commandType(bt,"number",an,ot.commandStr),bt|0},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,"typeof "+Pt+'==="number"',"invalid stencil.mask")}),Qt.def(Pt,"|0")});case Wc:return dn(function(bt){Y.commandType(bt,"object",an,ot.commandStr);var Qt=bt.cmp||"keep",Pt=bt.ref||0,Cn="mask"in bt?bt.mask:-1;return Y.commandParameter(Qt,co,sn+".cmp",ot.commandStr),Y.commandType(Pt,"number",sn+".ref",ot.commandStr),Y.commandType(Cn,"number",sn+".mask",ot.commandStr),[co[Qt],Pt,Cn]},function(bt,Qt,Pt){var Cn=bt.constants.compareFuncs;Y.optional(function(){function Kr(){bt.assert(Qt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Kr(Pt+"&&typeof ",Pt,'==="object"'),Kr('!("cmp" in ',Pt,")||(",Pt,".cmp in ",Cn,")")});var Fn=Qt.def('"cmp" in ',Pt,"?",Cn,"[",Pt,".cmp]",":",yi),Ar=Qt.def(Pt,".ref|0"),Yr=Qt.def('"mask" in ',Pt,"?",Pt,".mask|0:-1");return[Fn,Ar,Yr]});case of:case fc:return dn(function(bt){Y.commandType(bt,"object",an,ot.commandStr);var Qt=bt.fail||"keep",Pt=bt.zfail||"keep",Cn=bt.zpass||"keep";return Y.commandParameter(Qt,Do,sn+".fail",ot.commandStr),Y.commandParameter(Pt,Do,sn+".zfail",ot.commandStr),Y.commandParameter(Cn,Do,sn+".zpass",ot.commandStr),[sn===fc?lr:En,Do[Qt],Do[Pt],Do[Cn]]},function(bt,Qt,Pt){var Cn=bt.constants.stencilOps;Y.optional(function(){bt.assert(Qt,Pt+"&&typeof "+Pt+'==="object"',"invalid "+sn)});function Fn(Ar){return Y.optional(function(){bt.assert(Qt,'!("'+Ar+'" in '+Pt+")||("+Pt+"."+Ar+" in "+Cn+")","invalid "+sn+"."+Ar+", must be one of "+Object.keys(Do))}),Qt.def('"',Ar,'" in ',Pt,"?",Cn,"[",Pt,".",Ar,"]:",yi)}return[sn===fc?lr:En,Fn("fail"),Fn("zfail"),Fn("zpass")]});case lc:return dn(function(bt){Y.commandType(bt,"object",an,ot.commandStr);var Qt=bt.factor|0,Pt=bt.units|0;return Y.commandType(Qt,"number",an+".factor",ot.commandStr),Y.commandType(Pt,"number",an+".units",ot.commandStr),[Qt,Pt]},function(bt,Qt,Pt){Y.optional(function(){bt.assert(Qt,Pt+"&&typeof "+Pt+'==="object"',"invalid "+sn)});var Cn=Qt.def(Pt,".factor|0"),Fn=Qt.def(Pt,".units|0");return[Cn,Fn]});case pf:return dn(function(bt){var Qt=0;return bt==="front"?Qt=En:bt==="back"&&(Qt=lr),Y.command(!!Qt,an,ot.commandStr),Qt},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,Pt+'==="front"||'+Pt+'==="back"',"invalid cull.face")}),Qt.def(Pt,'==="front"?',En,":",lr)});case Hc:return dn(function(bt){return Y.command(typeof bt=="number"&&bt>=Dn.lineWidthDims[0]&&bt<=Dn.lineWidthDims[1],"invalid line width, must be a positive number between "+Dn.lineWidthDims[0]+" and "+Dn.lineWidthDims[1],ot.commandStr),bt},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,"typeof "+Pt+'==="number"&&'+Pt+">="+Dn.lineWidthDims[0]+"&&"+Pt+"<="+Dn.lineWidthDims[1],"invalid line width")}),Pt});case Pc:return dn(function(bt){return Y.commandParameter(bt,Is,an,ot.commandStr),Is[bt]},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,Pt+'==="cw"||'+Pt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Qt.def(Pt+'==="cw"?'+Di+":"+Zi)});case df:return dn(function(bt){return Y.command(lo(bt)&&bt.length===4,"color.mask must be length 4 array",ot.commandStr),bt.map(function(Qt){return!!Qt})},function(bt,Qt,Pt){return Y.optional(function(){bt.assert(Qt,bt.shared.isArrayLike+"("+Pt+")&&"+Pt+".length===4","invalid color.mask")}),Gn(4,function(Cn){return"!!"+Pt+"["+Cn+"]"})});case af:return dn(function(bt){Y.command(typeof bt=="object"&&bt,an,ot.commandStr);var Qt="value"in bt?bt.value:1,Pt=!!bt.invert;return Y.command(typeof Qt=="number"&&Qt>=0&&Qt<=1,"sample.coverage.value must be a number between 0 and 1",ot.commandStr),[Qt,Pt]},function(bt,Qt,Pt){Y.optional(function(){bt.assert(Qt,Pt+"&&typeof "+Pt+'==="object"',"invalid sample.coverage")});var Cn=Qt.def('"value" in ',Pt,"?+",Pt,".value:1"),Fn=Qt.def("!!",Pt,".invert");return[Cn,Fn]})}}),qn}function ja(St,ot){var Wt=St.static,yn=St.dynamic,qn={};return Object.keys(Wt).forEach(function(sn){var an=Wt[sn],dn;if(typeof an=="number"||typeof an=="boolean")dn=as(function(){return an});else if(typeof an=="function"){var bt=an._reglType;bt==="texture2d"||bt==="textureCube"?dn=as(function(Qt){return Qt.link(an)}):bt==="framebuffer"||bt==="framebufferCube"?(Y.command(an.color.length>0,'missing color attachment for framebuffer sent to uniform "'+sn+'"',ot.commandStr),dn=as(function(Qt){return Qt.link(an.color[0])})):Y.commandRaise('invalid data for uniform "'+sn+'"',ot.commandStr)}else lo(an)?dn=as(function(Qt){var Pt=Qt.global.def("[",Gn(an.length,function(Cn){return Y.command(typeof an[Cn]=="number"||typeof an[Cn]=="boolean","invalid uniform "+sn,Qt.commandStr),an[Cn]}),"]");return Pt}):Y.commandRaise('invalid or missing data for uniform "'+sn+'"',ot.commandStr);dn.value=an,qn[sn]=dn}),Object.keys(yn).forEach(function(sn){var an=yn[sn];qn[sn]=Ku(an,function(dn,bt){return dn.invoke(bt,an)})}),qn}function Zs(St,ot){var Wt=St.static,yn=St.dynamic,qn={};return Object.keys(Wt).forEach(function(sn){var an=Wt[sn],dn=ft.id(sn),bt=new Tn;if(Xs(an))bt.state=us,bt.buffer=mr.getBuffer(mr.create(an,zi,!1,!0)),bt.type=0;else{var Qt=mr.getBuffer(an);if(Qt)bt.state=us,bt.buffer=Qt,bt.type=0;else if(Y.command(typeof an=="object"&&an,"invalid data for attribute "+sn,ot.commandStr),"constant"in an){var Pt=an.constant;bt.buffer="null",bt.state=Oc,typeof Pt=="number"?bt.x=Pt:(Y.command(lo(Pt)&&Pt.length>0&&Pt.length<=4,"invalid constant for attribute "+sn,ot.commandStr),Yl.forEach(function(Wr,Pi){Pi<Pt.length&&(bt[Wr]=Pt[Pi])}))}else{Xs(an.buffer)?Qt=mr.getBuffer(mr.create(an.buffer,zi,!1,!0)):Qt=mr.getBuffer(an.buffer),Y.command(!!Qt,'missing buffer for attribute "'+sn+'"',ot.commandStr);var Cn=an.offset|0;Y.command(Cn>=0,'invalid offset for attribute "'+sn+'"',ot.commandStr);var Fn=an.stride|0;Y.command(Fn>=0&&Fn<256,'invalid stride for attribute "'+sn+'", must be integer betweeen [0, 255]',ot.commandStr);var Ar=an.size|0;Y.command(!("size"in an)||Ar>0&&Ar<=4,'invalid size for attribute "'+sn+'", must be 1,2,3,4',ot.commandStr);var Yr=!!an.normalized,Kr=0;"type"in an&&(Y.commandParameter(an.type,Xe,"invalid type for attribute "+sn,ot.commandStr),Kr=Xe[an.type]);var ci=an.divisor|0;Y.optional(function(){"divisor"in an&&(Y.command(ci===0||Fr,'cannot specify divisor for attribute "'+sn+'", instancing not supported',ot.commandStr),Y.command(ci>=0,'invalid divisor for attribute "'+sn+'"',ot.commandStr));var Wr=ot.commandStr,Pi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(an).forEach(function(vi){Y.command(Pi.indexOf(vi)>=0,'unknown parameter "'+vi+'" for attribute pointer "'+sn+'" (valid parameters are '+Pi+")",Wr)})}),bt.buffer=Qt,bt.state=us,bt.size=Ar,bt.normalized=Yr,bt.type=Kr||Qt.dtype,bt.offset=Cn,bt.stride=Fn,bt.divisor=ci}}qn[sn]=as(function(Wr,Pi){var vi=Wr.attribCache;if(dn in vi)return vi[dn];var Mi={isStream:!1};return Object.keys(bt).forEach(function(Si){Mi[Si]=bt[Si]}),bt.buffer&&(Mi.buffer=Wr.link(bt.buffer),Mi.type=Mi.type||Mi.buffer+".dtype"),vi[dn]=Mi,Mi})}),Object.keys(yn).forEach(function(sn){var an=yn[sn];function dn(bt,Qt){var Pt=bt.invoke(Qt,an),Cn=bt.shared,Fn=bt.constants,Ar=Cn.isBufferArgs,Yr=Cn.buffer;Y.optional(function(){bt.assert(Qt,Pt+"&&(typeof "+Pt+'==="object"||typeof '+Pt+'==="function")&&('+Ar+"("+Pt+")||"+Yr+".getBuffer("+Pt+")||"+Yr+".getBuffer("+Pt+".buffer)||"+Ar+"("+Pt+'.buffer)||("constant" in '+Pt+"&&(typeof "+Pt+'.constant==="number"||'+Cn.isArrayLike+"("+Pt+".constant))))",'invalid dynamic attribute "'+sn+'"')});var Kr={isStream:Qt.def(!1)},ci=new Tn;ci.state=us,Object.keys(ci).forEach(function(Mi){Kr[Mi]=Qt.def(""+ci[Mi])});var Wr=Kr.buffer,Pi=Kr.type;Qt("if(",Ar,"(",Pt,")){",Kr.isStream,"=true;",Wr,"=",Yr,".createStream(",zi,",",Pt,");",Pi,"=",Wr,".dtype;","}else{",Wr,"=",Yr,".getBuffer(",Pt,");","if(",Wr,"){",Pi,"=",Wr,".dtype;",'}else if("constant" in ',Pt,"){",Kr.state,"=",Oc,";","if(typeof "+Pt+'.constant === "number"){',Kr[Yl[0]],"=",Pt,".constant;",Yl.slice(1).map(function(Mi){return Kr[Mi]}).join("="),"=0;","}else{",Yl.map(function(Mi,Si){return Kr[Mi]+"="+Pt+".constant.length>"+Si+"?"+Pt+".constant["+Si+"]:0;"}).join(""),"}}else{","if(",Ar,"(",Pt,".buffer)){",Wr,"=",Yr,".createStream(",zi,",",Pt,".buffer);","}else{",Wr,"=",Yr,".getBuffer(",Pt,".buffer);","}",Pi,'="type" in ',Pt,"?",Fn.glTypes,"[",Pt,".type]:",Wr,".dtype;",Kr.normalized,"=!!",Pt,".normalized;");function vi(Mi){Qt(Kr[Mi],"=",Pt,".",Mi,"|0;")}return vi("size"),vi("offset"),vi("stride"),vi("divisor"),Qt("}}"),Qt.exit("if(",Kr.isStream,"){",Yr,".destroyStream(",Wr,");","}"),Kr}qn[sn]=Ku(an,dn)}),qn}function Yo(St){var ot=St.static,Wt=St.dynamic,yn={};return Object.keys(ot).forEach(function(qn){var sn=ot[qn];yn[qn]=as(function(an,dn){return typeof sn=="number"||typeof sn=="boolean"?""+sn:an.link(sn)})}),Object.keys(Wt).forEach(function(qn){var sn=Wt[qn];yn[qn]=Ku(sn,function(an,dn){return an.invoke(dn,sn)})}),yn}function Rs(St,ot,Wt,yn,qn){var sn=St.static,an=St.dynamic;Y.optional(function(){var vi=[Lu,Pl,Hu,R,ut,fe,Te,we,Ol,je].concat(Vi);function Mi(Si){Object.keys(Si).forEach(function(Ii){Y.command(vi.indexOf(Ii)>=0,'unknown parameter "'+Ii+'"',qn.commandStr)})}Mi(sn),Mi(an)});var dn=aa(St,ot),bt=di(St,qn),Qt=Yi(St,bt,qn),Pt=xo(St,qn),Cn=Ao(St,qn),Fn=$a(St,qn,dn);function Ar(vi){var Mi=Qt[vi];Mi&&(Cn[vi]=Mi)}Ar(Gu),Ar(xi(Ml));var Yr=Object.keys(Cn).length>0,Kr={framebuffer:bt,draw:Pt,shader:Fn,state:Cn,dirty:Yr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Kr.profile=li(St,qn),Kr.uniforms=ja(Wt,qn),Kr.drawVAO=Kr.scopeVAO=Pt.vao,!Kr.drawVAO&&Fn.program&&!dn&&Zt.angle_instanced_arrays&&Pt.static.elements){var ci=!0,Wr=Fn.program.attributes.map(function(vi){var Mi=ot.static[vi];return ci=ci&&!!Mi,Mi});if(ci&&Wr.length>0){var Pi=Dr.getVAO(Dr.createVAO({attributes:Wr,elements:Pt.static.elements}));Kr.drawVAO=new Jo(null,null,null,function(vi,Mi){return vi.link(Pi)}),Kr.useVAO=!0}}return dn?Kr.useVAO=!0:Kr.attributes=Zs(ot,qn),Kr.context=Yo(yn,qn),Kr}function fs(St,ot,Wt){var yn=St.shared,qn=yn.context,sn=St.scope();Object.keys(Wt).forEach(function(an){ot.save(qn,"."+an);var dn=Wt[an],bt=dn.append(St,ot);Array.isArray(bt)?sn(qn,".",an,"=[",bt.join(),"];"):sn(qn,".",an,"=",bt,";")}),ot(sn)}function ks(St,ot,Wt,yn){var qn=St.shared,sn=qn.gl,an=qn.framebuffer,dn;pi&&(dn=ot.def(qn.extensions,".webgl_draw_buffers"));var bt=St.constants,Qt=bt.drawBuffer,Pt=bt.backBuffer,Cn;Wt?Cn=Wt.append(St,ot):Cn=ot.def(an,".next"),yn||ot("if(",Cn,"!==",an,".cur){"),ot("if(",Cn,"){",sn,".bindFramebuffer(",cs,",",Cn,".framebuffer);"),pi&&ot(dn,".drawBuffersWEBGL(",Qt,"[",Cn,".colorAttachments.length]);"),ot("}else{",sn,".bindFramebuffer(",cs,",null);"),pi&&ot(dn,".drawBuffersWEBGL(",Pt,");"),ot("}",an,".cur=",Cn,";"),yn||ot("}")}function Us(St,ot,Wt){var yn=St.shared,qn=yn.gl,sn=St.current,an=St.next,dn=yn.current,bt=yn.next,Qt=St.cond(dn,".dirty");Vi.forEach(function(Pt){var Cn=xi(Pt);if(!(Cn in Wt.state)){var Fn,Ar;if(Cn in an){Fn=an[Cn],Ar=sn[Cn];var Yr=Gn(ai[Cn].length,function(ci){return Qt.def(Fn,"[",ci,"]")});Qt(St.cond(Yr.map(function(ci,Wr){return ci+"!=="+Ar+"["+Wr+"]"}).join("||")).then(qn,".",vr[Cn],"(",Yr,");",Yr.map(function(ci,Wr){return Ar+"["+Wr+"]="+ci}).join(";"),";"))}else{Fn=Qt.def(bt,".",Cn);var Kr=St.cond(Fn,"!==",dn,".",Cn);Qt(Kr),Cn in yr?Kr(St.cond(Fn).then(qn,".enable(",yr[Cn],");").else(qn,".disable(",yr[Cn],");"),dn,".",Cn,"=",Fn,";"):Kr(qn,".",vr[Cn],"(",Fn,");",dn,".",Cn,"=",Fn,";")}}}),Object.keys(Wt.state).length===0&&Qt(dn,".dirty=false;"),ot(Qt)}function Js(St,ot,Wt,yn){var qn=St.shared,sn=St.current,an=qn.current,dn=qn.gl;kl(Object.keys(Wt)).forEach(function(bt){var Qt=Wt[bt];if(!(yn&&!yn(Qt))){var Pt=Qt.append(St,ot);if(yr[bt]){var Cn=yr[bt];Yu(Qt)?Pt?ot(dn,".enable(",Cn,");"):ot(dn,".disable(",Cn,");"):ot(St.cond(Pt).then(dn,".enable(",Cn,");").else(dn,".disable(",Cn,");")),ot(an,".",bt,"=",Pt,";")}else if(lo(Pt)){var Fn=sn[bt];ot(dn,".",vr[bt],"(",Pt,");",Pt.map(function(Ar,Yr){return Fn+"["+Yr+"]="+Ar}).join(";"),";")}else ot(dn,".",vr[bt],"(",Pt,");",an,".",bt,"=",Pt,";")}})}function Ss(St,ot){Fr&&(St.instancing=ot.def(St.shared.extensions,".angle_instanced_arrays"))}function qi(St,ot,Wt,yn,qn){var sn=St.shared,an=St.stats,dn=sn.current,bt=sn.timer,Qt=Wt.profile;function Pt(){var vi=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return vi||typeof performance=="undefined"?"Date.now()":"performance.now()"}var Cn,Fn;function Ar(vi){Cn=ot.def(),vi(Cn,"=",Pt(),";"),typeof qn=="string"?vi(an,".count+=",qn,";"):vi(an,".count++;"),xr&&(yn?(Fn=ot.def(),vi(Fn,"=",bt,".getNumPendingQueries();")):vi(bt,".beginQuery(",an,");"))}function Yr(vi){vi(an,".cpuTime+=",Pt(),"-",Cn,";"),xr&&(yn?vi(bt,".pushScopeStats(",Fn,",",bt,".getNumPendingQueries(),",an,");"):vi(bt,".endQuery();"))}function Kr(vi){var Mi=ot.def(dn,".profile");ot(dn,".profile=",vi,";"),ot.exit(dn,".profile=",Mi,";")}var ci;if(Qt){if(Yu(Qt)){Qt.enable?(Ar(ot),Yr(ot.exit),Kr("true")):Kr("false");return}ci=Qt.append(St,ot),Kr(ci)}else ci=ot.def(dn,".profile");var Wr=St.block();Ar(Wr),ot("if(",ci,"){",Wr,"}");var Pi=St.block();Yr(Pi),ot.exit("if(",ci,"){",Pi,"}")}function Ts(St,ot,Wt,yn,qn){var sn=St.shared;function an(bt){switch(bt){case Es:case ql:case z:return 2;case Wu:case Xu:case $:return 3;case Fu:case Rl:case ee:return 4;default:return 1}}function dn(bt,Qt,Pt){var Cn=sn.gl,Fn=ot.def(bt,".location"),Ar=ot.def(sn.attributes,"[",Fn,"]"),Yr=Pt.state,Kr=Pt.buffer,ci=[Pt.x,Pt.y,Pt.z,Pt.w],Wr=["buffer","normalized","offset","stride"];function Pi(){ot("if(!",Ar,".buffer){",Cn,".enableVertexAttribArray(",Fn,");}");var Mi=Pt.type,Si;if(Pt.size?Si=ot.def(Pt.size,"||",Qt):Si=Qt,ot("if(",Ar,".type!==",Mi,"||",Ar,".size!==",Si,"||",Wr.map(function(Qi){return Ar+"."+Qi+"!=="+Pt[Qi]}).join("||"),"){",Cn,".bindBuffer(",zi,",",Kr,".buffer);",Cn,".vertexAttribPointer(",[Fn,Si,Mi,Pt.normalized,Pt.stride,Pt.offset],");",Ar,".type=",Mi,";",Ar,".size=",Si,";",Wr.map(function(Qi){return Ar+"."+Qi+"="+Pt[Qi]+";"}).join(""),"}"),Fr){var Ii=Pt.divisor;ot("if(",Ar,".divisor!==",Ii,"){",St.instancing,".vertexAttribDivisorANGLE(",[Fn,Ii],");",Ar,".divisor=",Ii,";}")}}function vi(){ot("if(",Ar,".buffer){",Cn,".disableVertexAttribArray(",Fn,");",Ar,".buffer=null;","}if(",Yl.map(function(Mi,Si){return Ar+"."+Mi+"!=="+ci[Si]}).join("||"),"){",Cn,".vertexAttrib4f(",Fn,",",ci,");",Yl.map(function(Mi,Si){return Ar+"."+Mi+"="+ci[Si]+";"}).join(""),"}")}Yr===us?Pi():Yr===Oc?vi():(ot("if(",Yr,"===",us,"){"),Pi(),ot("}else{"),vi(),ot("}"))}yn.forEach(function(bt){var Qt=bt.name,Pt=Wt.attributes[Qt],Cn;if(Pt){if(!qn(Pt))return;Cn=Pt.append(St,ot)}else{if(!qn(Wf))return;var Fn=St.scopeAttrib(Qt);Y.optional(function(){St.assert(ot,Fn+".state","missing attribute "+Qt)}),Cn={},Object.keys(new Tn).forEach(function(Ar){Cn[Ar]=ot.def(Fn,".",Ar)})}dn(St.link(bt),an(bt.info.type),Cn)})}function vo(St,ot,Wt,yn,qn,sn){for(var an=St.shared,dn=an.gl,bt,Qt=0;Qt<yn.length;++Qt){var Pt=yn[Qt],Cn=Pt.name,Fn=Pt.info.type,Ar=Wt.uniforms[Cn],Yr=St.link(Pt),Kr=Yr+".location",ci;if(Ar){if(!qn(Ar))continue;if(Yu(Ar)){var Wr=Ar.value;if(Y.command(Wr!==null&&typeof Wr!="undefined",'missing uniform "'+Cn+'"',St.commandStr),Fn===Ft||Fn===Sn){Y.command(typeof Wr=="function"&&(Fn===Ft&&(Wr._reglType==="texture2d"||Wr._reglType==="framebuffer")||Fn===Sn&&(Wr._reglType==="textureCube"||Wr._reglType==="framebufferCube")),"invalid texture for uniform "+Cn,St.commandStr);var Pi=St.link(Wr._texture||Wr.color[0]._texture);ot(dn,".uniform1i(",Kr,",",Pi+".bind());"),ot.exit(Pi,".unbind();")}else if(Fn===ge||Fn===xe||Fn===gt){Y.optional(function(){Y.command(lo(Wr),"invalid matrix for uniform "+Cn,St.commandStr),Y.command(Fn===ge&&Wr.length===4||Fn===xe&&Wr.length===9||Fn===gt&&Wr.length===16,"invalid length for matrix uniform "+Cn,St.commandStr)});var vi=St.global.def("new Float32Array(["+Array.prototype.slice.call(Wr)+"])"),Mi=2;Fn===xe?Mi=3:Fn===gt&&(Mi=4),ot(dn,".uniformMatrix",Mi,"fv(",Kr,",false,",vi,");")}else{switch(Fn){case Qs:Y.commandType(Wr,"number","uniform "+Cn,St.commandStr),bt="1f";break;case Es:Y.command(lo(Wr)&&Wr.length===2,"uniform "+Cn,St.commandStr),bt="2f";break;case Wu:Y.command(lo(Wr)&&Wr.length===3,"uniform "+Cn,St.commandStr),bt="3f";break;case Fu:Y.command(lo(Wr)&&Wr.length===4,"uniform "+Cn,St.commandStr),bt="4f";break;case I:Y.commandType(Wr,"boolean","uniform "+Cn,St.commandStr),bt="1i";break;case hu:Y.commandType(Wr,"number","uniform "+Cn,St.commandStr),bt="1i";break;case z:Y.command(lo(Wr)&&Wr.length===2,"uniform "+Cn,St.commandStr),bt="2i";break;case ql:Y.command(lo(Wr)&&Wr.length===2,"uniform "+Cn,St.commandStr),bt="2i";break;case $:Y.command(lo(Wr)&&Wr.length===3,"uniform "+Cn,St.commandStr),bt="3i";break;case Xu:Y.command(lo(Wr)&&Wr.length===3,"uniform "+Cn,St.commandStr),bt="3i";break;case ee:Y.command(lo(Wr)&&Wr.length===4,"uniform "+Cn,St.commandStr),bt="4i";break;case Rl:Y.command(lo(Wr)&&Wr.length===4,"uniform "+Cn,St.commandStr),bt="4i";break}ot(dn,".uniform",bt,"(",Kr,",",lo(Wr)?Array.prototype.slice.call(Wr):Wr,");")}continue}else ci=Ar.append(St,ot)}else{if(!qn(Wf))continue;ci=ot.def(an.uniforms,"[",ft.id(Cn),"]")}Fn===Ft?(Y(!Array.isArray(ci),"must specify a scalar prop for textures"),ot("if(",ci,"&&",ci,'._reglType==="framebuffer"){',ci,"=",ci,".color[0];","}")):Fn===Sn&&(Y(!Array.isArray(ci),"must specify a scalar prop for cube maps"),ot("if(",ci,"&&",ci,'._reglType==="framebufferCube"){',ci,"=",ci,".color[0];","}")),Y.optional(function(){function xu(qu,qf){St.assert(ot,qu,'bad data or missing for uniform "'+Cn+'".  '+qf)}function pc(qu){Y(!Array.isArray(ci),"must not specify an array type for uniform"),xu("typeof "+ci+'==="'+qu+'"',"invalid type, expected "+qu)}function Du(qu,qf){Array.isArray(ci)?Y(ci.length===qu,"must have length "+qu):xu(an.isArrayLike+"("+ci+")&&"+ci+".length==="+qu,"invalid vector, should have length "+qu,St.commandStr)}function Ff(qu){Y(!Array.isArray(ci),"must not specify a value type"),xu("typeof "+ci+'==="function"&&'+ci+'._reglType==="texture'+(qu===rs?"2d":"Cube")+'"',"invalid texture type",St.commandStr)}switch(Fn){case hu:pc("number");break;case ql:Du(2,"number");break;case Xu:Du(3,"number");break;case Rl:Du(4,"number");break;case Qs:pc("number");break;case Es:Du(2,"number");break;case Wu:Du(3,"number");break;case Fu:Du(4,"number");break;case I:pc("boolean");break;case z:Du(2,"boolean");break;case $:Du(3,"boolean");break;case ee:Du(4,"boolean");break;case ge:Du(4,"number");break;case xe:Du(9,"number");break;case gt:Du(16,"number");break;case Ft:Ff(rs);break;case Sn:Ff(La);break}});var Si=1;switch(Fn){case Ft:case Sn:var Ii=ot.def(ci,"._texture");ot(dn,".uniform1i(",Kr,",",Ii,".bind());"),ot.exit(Ii,".unbind();");continue;case hu:case I:bt="1i";break;case ql:case z:bt="2i",Si=2;break;case Xu:case $:bt="3i",Si=3;break;case Rl:case ee:bt="4i",Si=4;break;case Qs:bt="1f";break;case Es:bt="2f",Si=2;break;case Wu:bt="3f",Si=3;break;case Fu:bt="4f",Si=4;break;case ge:bt="Matrix2fv";break;case xe:bt="Matrix3fv";break;case gt:bt="Matrix4fv";break}if(bt.charAt(0)==="M"){ot(dn,".uniform",bt,"(",Kr,",");var Qi=Math.pow(Fn-ge+2,2),Uo=St.global.def("new Float32Array(",Qi,")");Array.isArray(ci)?ot("false,(",Gn(Qi,function(xu){return Uo+"["+xu+"]="+ci[xu]}),",",Uo,")"):ot("false,(Array.isArray(",ci,")||",ci," instanceof Float32Array)?",ci,":(",Gn(Qi,function(xu){return Uo+"["+xu+"]="+ci+"["+xu+"]"}),",",Uo,")"),ot(");")}else if(Si>1){for(var zs=[],hs=[],Ql=0;Ql<Si;++Ql)Array.isArray(ci)?hs.push(ci[Ql]):hs.push(ot.def(ci+"["+Ql+"]")),sn&&zs.push(ot.def());sn&&ot("if(!",St.batchId,"||",zs.map(function(xu,pc){return xu+"!=="+hs[pc]}).join("||"),"){",zs.map(function(xu,pc){return xu+"="+hs[pc]+";"}).join("")),ot(dn,".uniform",bt,"(",Kr,",",hs.join(","),");"),sn&&ot("}")}else{if(Y(!Array.isArray(ci),"uniform value must not be an array"),sn){var dc=ot.def();ot("if(!",St.batchId,"||",dc,"!==",ci,"){",dc,"=",ci,";")}ot(dn,".uniform",bt,"(",Kr,",",ci,");"),sn&&ot("}")}}}function As(St,ot,Wt,yn){var qn=St.shared,sn=qn.gl,an=qn.draw,dn=yn.draw;function bt(){var Si=dn.elements,Ii,Qi=ot;return Si?((Si.contextDep&&yn.contextDynamic||Si.propDep)&&(Qi=Wt),Ii=Si.append(St,Qi),dn.elementsActive&&Qi("if("+Ii+")"+sn+".bindBuffer("+Ea+","+Ii+".buffer.buffer);")):(Ii=Qi.def(),Qi(Ii,"=",an,".",R,";","if(",Ii,"){",sn,".bindBuffer(",Ea,",",Ii,".buffer.buffer);}","else if(",qn.vao,".currentVAO){",Ii,"=",St.shared.elements+".getElements("+qn.vao,".currentVAO.elements);",Tr?"":"if("+Ii+")"+sn+".bindBuffer("+Ea+","+Ii+".buffer.buffer);","}")),Ii}function Qt(){var Si=dn.count,Ii,Qi=ot;return Si?((Si.contextDep&&yn.contextDynamic||Si.propDep)&&(Qi=Wt),Ii=Si.append(St,Qi),Y.optional(function(){Si.MISSING&&St.assert(ot,"false","missing vertex count"),Si.DYNAMIC&&St.assert(Qi,Ii+">=0","missing vertex count")})):(Ii=Qi.def(an,".",Te),Y.optional(function(){St.assert(Qi,Ii+">=0","missing vertex count")})),Ii}var Pt=bt();function Cn(Si){var Ii=dn[Si];return Ii?Ii.contextDep&&yn.contextDynamic||Ii.propDep?Ii.append(St,Wt):Ii.append(St,ot):ot.def(an,".",Si)}var Fn=Cn(ut),Ar=Cn(fe),Yr=Qt();if(typeof Yr=="number"){if(Yr===0)return}else Wt("if(",Yr,"){"),Wt.exit("}");var Kr,ci;Fr&&(Kr=Cn(we),ci=St.instancing);var Wr=Pt+".type",Pi=dn.elements&&Yu(dn.elements)&&!dn.vaoActive;function vi(){function Si(){Wt(ci,".drawElementsInstancedANGLE(",[Fn,Yr,Wr,Ar+"<<(("+Wr+"-"+ju+")>>1)",Kr],");")}function Ii(){Wt(ci,".drawArraysInstancedANGLE(",[Fn,Ar,Yr,Kr],");")}Pt&&Pt!=="null"?Pi?Si():(Wt("if(",Pt,"){"),Si(),Wt("}else{"),Ii(),Wt("}")):Ii()}function Mi(){function Si(){Wt(sn+".drawElements("+[Fn,Yr,Wr,Ar+"<<(("+Wr+"-"+ju+")>>1)"]+");")}function Ii(){Wt(sn+".drawArrays("+[Fn,Ar,Yr]+");")}Pt&&Pt!=="null"?Pi?Si():(Wt("if(",Pt,"){"),Si(),Wt("}else{"),Ii(),Wt("}")):Ii()}Fr&&(typeof Kr!="number"||Kr>=0)?typeof Kr=="string"?(Wt("if(",Kr,">0){"),vi(),Wt("}else if(",Kr,"<0){"),Mi(),Wt("}")):vi():Mi()}function ra(St,ot,Wt,yn,qn){var sn=Ki(),an=sn.proc("body",qn);return Y.optional(function(){sn.commandStr=ot.commandStr,sn.command=sn.link(ot.commandStr)}),Fr&&(sn.instancing=an.def(sn.shared.extensions,".angle_instanced_arrays")),St(sn,an,Wt,yn),sn.compile().body}function Za(St,ot,Wt,yn){Ss(St,ot),Wt.useVAO?Wt.drawVAO?ot(St.shared.vao,".setVAO(",Wt.drawVAO.append(St,ot),");"):ot(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):(ot(St.shared.vao,".setVAO(null);"),Ts(St,ot,Wt,yn.attributes,function(){return!0})),vo(St,ot,Wt,yn.uniforms,function(){return!0},!1),As(St,ot,ot,Wt)}function Co(St,ot){var Wt=St.proc("draw",1);Ss(St,Wt),fs(St,Wt,ot.context),ks(St,Wt,ot.framebuffer),Us(St,Wt,ot),Js(St,Wt,ot.state),qi(St,Wt,ot,!1,!0);var yn=ot.shader.progVar.append(St,Wt);if(Wt(St.shared.gl,".useProgram(",yn,".program);"),ot.shader.program)Za(St,Wt,ot,ot.shader.program);else{Wt(St.shared.vao,".setVAO(null);");var qn=St.global.def("{}"),sn=Wt.def(yn,".id"),an=Wt.def(qn,"[",sn,"]");Wt(St.cond(an).then(an,".call(this,a0);").else(an,"=",qn,"[",sn,"]=",St.link(function(dn){return ra(Za,St,ot,dn,1)}),"(",yn,");",an,".call(this,a0);"))}Object.keys(ot.state).length>0&&Wt(St.shared.current,".dirty=true;"),St.shared.vao&&Wt(St.shared.vao,".setVAO(null);")}function ds(St,ot,Wt,yn){St.batchId="a1",Ss(St,ot);function qn(){return!0}Ts(St,ot,Wt,yn.attributes,qn),vo(St,ot,Wt,yn.uniforms,qn,!1),As(St,ot,ot,Wt)}function hc(St,ot,Wt,yn){Ss(St,ot);var qn=Wt.contextDep,sn=ot.def(),an="a0",dn="a1",bt=ot.def();St.shared.props=bt,St.batchId=sn;var Qt=St.scope(),Pt=St.scope();ot(Qt.entry,"for(",sn,"=0;",sn,"<",dn,";++",sn,"){",bt,"=",an,"[",sn,"];",Pt,"}",Qt.exit);function Cn(Wr){return Wr.contextDep&&qn||Wr.propDep}function Fn(Wr){return!Cn(Wr)}if(Wt.needsContext&&fs(St,Pt,Wt.context),Wt.needsFramebuffer&&ks(St,Pt,Wt.framebuffer),Js(St,Pt,Wt.state,Cn),Wt.profile&&Cn(Wt.profile)&&qi(St,Pt,Wt,!1,!0),yn)Wt.useVAO?Wt.drawVAO?Cn(Wt.drawVAO)?Pt(St.shared.vao,".setVAO(",Wt.drawVAO.append(St,Pt),");"):Qt(St.shared.vao,".setVAO(",Wt.drawVAO.append(St,Qt),");"):Qt(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):(Qt(St.shared.vao,".setVAO(null);"),Ts(St,Qt,Wt,yn.attributes,Fn),Ts(St,Pt,Wt,yn.attributes,Cn)),vo(St,Qt,Wt,yn.uniforms,Fn,!1),vo(St,Pt,Wt,yn.uniforms,Cn,!0),As(St,Qt,Pt,Wt);else{var Ar=St.global.def("{}"),Yr=Wt.shader.progVar.append(St,Pt),Kr=Pt.def(Yr,".id"),ci=Pt.def(Ar,"[",Kr,"]");Pt(St.shared.gl,".useProgram(",Yr,".program);","if(!",ci,"){",ci,"=",Ar,"[",Kr,"]=",St.link(function(Wr){return ra(ds,St,Wt,Wr,2)}),"(",Yr,");}",ci,".call(this,a0[",sn,"],",sn,");")}}function kt(St,ot){var Wt=St.proc("batch",2);St.batchId="0",Ss(St,Wt);var yn=!1,qn=!0;Object.keys(ot.context).forEach(function(Ar){yn=yn||ot.context[Ar].propDep}),yn||(fs(St,Wt,ot.context),qn=!1);var sn=ot.framebuffer,an=!1;sn?(sn.propDep?yn=an=!0:sn.contextDep&&yn&&(an=!0),an||ks(St,Wt,sn)):ks(St,Wt,null),ot.state.viewport&&ot.state.viewport.propDep&&(yn=!0);function dn(Ar){return Ar.contextDep&&yn||Ar.propDep}Us(St,Wt,ot),Js(St,Wt,ot.state,function(Ar){return!dn(Ar)}),(!ot.profile||!dn(ot.profile))&&qi(St,Wt,ot,!1,"a1"),ot.contextDep=yn,ot.needsContext=qn,ot.needsFramebuffer=an;var bt=ot.shader.progVar;if(bt.contextDep&&yn||bt.propDep)hc(St,Wt,ot,null);else{var Qt=bt.append(St,Wt);if(Wt(St.shared.gl,".useProgram(",Qt,".program);"),ot.shader.program)hc(St,Wt,ot,ot.shader.program);else{Wt(St.shared.vao,".setVAO(null);");var Pt=St.global.def("{}"),Cn=Wt.def(Qt,".id"),Fn=Wt.def(Pt,"[",Cn,"]");Wt(St.cond(Fn).then(Fn,".call(this,a0,a1);").else(Fn,"=",Pt,"[",Cn,"]=",St.link(function(Ar){return ra(hc,St,ot,Ar,2)}),"(",Qt,");",Fn,".call(this,a0,a1);"))}}Object.keys(ot.state).length>0&&Wt(St.shared.current,".dirty=true;"),St.shared.vao&&Wt(St.shared.vao,".setVAO(null);")}function Yn(St,ot){var Wt=St.proc("scope",3);St.batchId="a2";var yn=St.shared,qn=yn.current;fs(St,Wt,ot.context),ot.framebuffer&&ot.framebuffer.append(St,Wt),kl(Object.keys(ot.state)).forEach(function(an){var dn=ot.state[an],bt=dn.append(St,Wt);lo(bt)?bt.forEach(function(Qt,Pt){Wt.set(St.next[an],"["+Pt+"]",Qt)}):Wt.set(yn.next,"."+an,bt)}),qi(St,Wt,ot,!0,!0),[R,fe,Te,we,ut].forEach(function(an){var dn=ot.draw[an];dn&&Wt.set(yn.draw,"."+an,""+dn.append(St,Wt))}),Object.keys(ot.uniforms).forEach(function(an){var dn=ot.uniforms[an].append(St,Wt);Array.isArray(dn)&&(dn="["+dn.join()+"]"),Wt.set(yn.uniforms,"["+ft.id(an)+"]",dn)}),Object.keys(ot.attributes).forEach(function(an){var dn=ot.attributes[an].append(St,Wt),bt=St.scopeAttrib(an);Object.keys(new Tn).forEach(function(Qt){Wt.set(bt,"."+Qt,dn[Qt])})}),ot.scopeVAO&&Wt.set(yn.vao,".targetVAO",ot.scopeVAO.append(St,Wt));function sn(an){var dn=ot.shader[an];dn&&Wt.set(yn.shader,"."+an,dn.append(St,Wt))}sn(Pl),sn(Hu),Object.keys(ot.state).length>0&&(Wt(qn,".dirty=true;"),Wt.exit(qn,".dirty=true;")),Wt("a1(",St.shared.context,",a0,",St.batchId,");")}function Nn(St){if(!(typeof St!="object"||lo(St))){for(var ot=Object.keys(St),Wt=0;Wt<ot.length;++Wt)if(kn.isDynamic(St[ot[Wt]]))return!0;return!1}}function _i(St,ot,Wt){var yn=ot.static[Wt];if(!yn||!Nn(yn))return;var qn=St.global,sn=Object.keys(yn),an=!1,dn=!1,bt=!1,Qt=St.global.def("{}");sn.forEach(function(Cn){var Fn=yn[Cn];if(kn.isDynamic(Fn)){typeof Fn=="function"&&(Fn=yn[Cn]=kn.unbox(Fn));var Ar=Ku(Fn,null);an=an||Ar.thisDep,bt=bt||Ar.propDep,dn=dn||Ar.contextDep}else{switch(qn(Qt,".",Cn,"="),typeof Fn){case"number":qn(Fn);break;case"string":qn('"',Fn,'"');break;case"object":Array.isArray(Fn)&&qn("[",Fn.join(),"]");break;default:qn(St.link(Fn));break}qn(";")}});function Pt(Cn,Fn){sn.forEach(function(Ar){var Yr=yn[Ar];if(kn.isDynamic(Yr)){var Kr=Cn.invoke(Fn,Yr);Fn(Qt,".",Ar,"=",Kr,";")}})}ot.dynamic[Wt]=new kn.DynamicVariable(ns,{thisDep:an,contextDep:dn,propDep:bt,ref:Qt,append:Pt}),delete ot.static[Wt]}function Va(St,ot,Wt,yn,qn){var sn=Ki();sn.stats=sn.link(qn),Object.keys(ot.static).forEach(function(dn){_i(sn,ot,dn)}),$i.forEach(function(dn){_i(sn,St,dn)});var an=Rs(St,ot,Wt,yn,sn);return Co(sn,an),Yn(sn,an),kt(sn,an),M(sn.compile(),{destroy:function(){an.shader.program.destroy()}})}return{next:oi,current:ai,procs:function(){var St=Ki(),ot=St.proc("poll"),Wt=St.proc("refresh"),yn=St.block();ot(yn),Wt(yn);var qn=St.shared,sn=qn.gl,an=qn.next,dn=qn.current;yn(dn,".dirty=false;"),ks(St,ot),ks(St,Wt,null,!0);var bt;Fr&&(bt=St.link(Fr)),Zt.oes_vertex_array_object&&Wt(St.link(Zt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Qt=0;Qt<Dn.maxAttributes;++Qt){var Pt=Wt.def(qn.attributes,"[",Qt,"]"),Cn=St.cond(Pt,".buffer");Cn.then(sn,".enableVertexAttribArray(",Qt,");",sn,".bindBuffer(",zi,",",Pt,".buffer.buffer);",sn,".vertexAttribPointer(",Qt,",",Pt,".size,",Pt,".type,",Pt,".normalized,",Pt,".stride,",Pt,".offset);").else(sn,".disableVertexAttribArray(",Qt,");",sn,".vertexAttrib4f(",Qt,",",Pt,".x,",Pt,".y,",Pt,".z,",Pt,".w);",Pt,".buffer=null;"),Wt(Cn),Fr&&Wt(bt,".vertexAttribDivisorANGLE(",Qt,",",Pt,".divisor);")}return Wt(St.shared.vao,".currentVAO=null;",St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"),Object.keys(yr).forEach(function(Fn){var Ar=yr[Fn],Yr=yn.def(an,".",Fn),Kr=St.block();Kr("if(",Yr,"){",sn,".enable(",Ar,")}else{",sn,".disable(",Ar,")}",dn,".",Fn,"=",Yr,";"),Wt(Kr),ot("if(",Yr,"!==",dn,".",Fn,"){",Kr,"}")}),Object.keys(vr).forEach(function(Fn){var Ar=vr[Fn],Yr=ai[Fn],Kr,ci,Wr=St.block();if(Wr(sn,".",Ar,"("),lo(Yr)){var Pi=Yr.length;Kr=St.global.def(an,".",Fn),ci=St.global.def(dn,".",Fn),Wr(Gn(Pi,function(vi){return Kr+"["+vi+"]"}),");",Gn(Pi,function(vi){return ci+"["+vi+"]="+Kr+"["+vi+"];"}).join("")),ot("if(",Gn(Pi,function(vi){return Kr+"["+vi+"]!=="+ci+"["+vi+"]"}).join("||"),"){",Wr,"}")}else Kr=yn.def(an,".",Fn),ci=yn.def(dn,".",Fn),Wr(Kr,");",dn,".",Fn,"=",Kr,";"),ot("if(",Kr,"!==",ci,"){",Wr,"}");Wt(Wr)}),St.compile()}(),compile:Va}}function lh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ch=34918,Mh=34919,Xf=35007,Oh=function(Me,ft){if(!ft.ext_disjoint_timer_query)return null;var Zt=[];function Dn(){return Zt.pop()||ft.ext_disjoint_timer_query.createQueryEXT()}function mr(Fr){Zt.push(Fr)}var Xn=[];function ir(Fr){var pi=Dn();ft.ext_disjoint_timer_query.beginQueryEXT(Xf,pi),Xn.push(pi),xr(Xn.length-1,Xn.length,Fr)}function br(){ft.ext_disjoint_timer_query.endQueryEXT(Xf)}function Or(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Dr=[];function jr(){return Dr.pop()||new Or}function Ur(Fr){Dr.push(Fr)}var Gr=[];function xr(Fr,pi,Tr){var ai=jr();ai.startQueryIndex=Fr,ai.endQueryIndex=pi,ai.sum=0,ai.stats=Tr,Gr.push(ai)}var Lr=[],Tn=[];function tr(){var Fr,pi,Tr=Xn.length;if(Tr!==0){Tn.length=Math.max(Tn.length,Tr+1),Lr.length=Math.max(Lr.length,Tr+1),Lr[0]=0,Tn[0]=0;var ai=0;for(Fr=0,pi=0;pi<Xn.length;++pi){var oi=Xn[pi];ft.ext_disjoint_timer_query.getQueryObjectEXT(oi,Mh)?(ai+=ft.ext_disjoint_timer_query.getQueryObjectEXT(oi,ch),mr(oi)):Xn[Fr++]=oi,Lr[pi+1]=ai,Tn[pi+1]=Fr}for(Xn.length=Fr,Fr=0,pi=0;pi<Gr.length;++pi){var Vi=Gr[pi],yr=Vi.startQueryIndex,vr=Vi.endQueryIndex;Vi.sum+=Lr[vr]-Lr[yr];var xi=Tn[yr],Qr=Tn[vr];Qr===xi?(Vi.stats.gpuTime+=Vi.sum/1e6,Ur(Vi)):(Vi.startQueryIndex=xi,Vi.endQueryIndex=Qr,Gr[Fr++]=Vi)}Gr.length=Fr}}return{beginQuery:ir,endQuery:br,pushScopeStats:xr,update:tr,getNumPendingQueries:function(){return Xn.length},clear:function(){Zt.push.apply(Zt,Xn);for(var Fr=0;Fr<Zt.length;Fr++)ft.ext_disjoint_timer_query.deleteQueryEXT(Zt[Fr]);Xn.length=0,Zt.length=0},restore:function(){Xn.length=0,Zt.length=0}}},Ph=16384,Ll=256,Yf=1024,Kf=34962,Rf="webglcontextlost",xf="webglcontextrestored",uf=1,Ma=2,kf=3;function Lf(Me,ft){for(var Zt=0;Zt<Me.length;++Zt)if(Me[Zt]===ft)return Zt;return-1}function lf(Me){var ft=Xi(Me);if(!ft)return null;var Zt=ft.gl,Dn=Zt.getContextAttributes(),mr=Zt.isContextLost(),Xn=Kn(Zt,ft);if(!Xn)return null;var ir=Cr(),br=lh(),Or=Xn.extensions,Dr=Oh(Zt,Or),jr=cr(),Ur=Zt.drawingBufferWidth,Gr=Zt.drawingBufferHeight,xr={tick:0,time:0,viewportWidth:Ur,viewportHeight:Gr,framebufferWidth:Ur,framebufferHeight:Gr,drawingBufferWidth:Ur,drawingBufferHeight:Gr,pixelRatio:ft.pixelRatio},Lr={},Tn={elements:null,primitive:4,count:-1,offset:0,instances:-1},tr=ln(Zt,Or),Fr=me(Zt,br,ft,ai),pi=jo(Zt,Or,Fr,br),Tr=Hs(Zt,Or,tr,br,Fr,pi,Tn);function ai(ra){return Tr.destroyBuffer(ra)}var oi=Jc(Zt,ir,br,ft),Vi=wc(Zt,Or,tr,function(){xi.procs.poll()},xr,br,ft),yr=O(Zt,Or,tr,br,ft),vr=$c(Zt,Or,tr,Vi,yr,br),xi=Rc(Zt,ir,Or,tr,Fr,pi,Vi,vr,Lr,Tr,oi,Tn,xr,Dr,ft),Qr=Ru(Zt,vr,xi.procs.poll,xr,Dn,Or,tr),Rr=xi.next,ri=Zt.canvas,ei=[],ga=[],Ki=[],li=[ft.onDestroy],di=null;function Yi(){if(ei.length===0){Dr&&Dr.update(),di=null;return}di=jn.next(Yi),Ss();for(var ra=ei.length-1;ra>=0;--ra){var Za=ei[ra];Za&&Za(xr,null,0)}Zt.flush(),Dr&&Dr.update()}function aa(){!di&&ei.length>0&&(di=jn.next(Yi))}function $a(){di&&(jn.cancel(Yi),di=null)}function xo(ra){ra.preventDefault(),mr=!0,$a(),ga.forEach(function(Za){Za()})}function Ao(ra){Zt.getError(),mr=!1,Xn.restore(),oi.restore(),Fr.restore(),Vi.restore(),yr.restore(),vr.restore(),Tr.restore(),Dr&&Dr.restore(),xi.procs.refresh(),aa(),Ki.forEach(function(Za){Za()})}var ja=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!ja&&ri&&(ri.addEventListener(Rf,xo,!1),ri.addEventListener(xf,Ao,!1));function Zs(){ei.length=0,$a(),!ja&&ri&&(ri.removeEventListener(Rf,xo),ri.removeEventListener(xf,Ao)),oi.clear(),vr.clear(),yr.clear(),Tr.clear(),Vi.clear(),pi.clear(),Fr.clear(),Dr&&Dr.clear(),li.forEach(function(ra){ra()})}function Yo(ra){Y(!!ra,"invalid args to regl({...})"),Y.type(ra,"object","invalid args to regl({...})");function Za(sn){var an=M({},sn);delete an.uniforms,delete an.attributes,delete an.context,delete an.vao,"stencil"in an&&an.stencil.op&&(an.stencil.opBack=an.stencil.opFront=an.stencil.op,delete an.stencil.op);function dn(bt){if(bt in an){var Qt=an[bt];delete an[bt],Object.keys(Qt).forEach(function(Pt){an[bt+"."+Pt]=Qt[Pt]})}}return dn("blend"),dn("depth"),dn("cull"),dn("stencil"),dn("polygonOffset"),dn("scissor"),dn("sample"),"vao"in sn&&(an.vao=sn.vao),an}function Co(sn,an){var dn={},bt={};return Object.keys(sn).forEach(function(Qt){var Pt=sn[Qt];if(kn.isDynamic(Pt)){bt[Qt]=kn.unbox(Pt,Qt);return}else if(an&&Array.isArray(Pt)){for(var Cn=0;Cn<Pt.length;++Cn)if(kn.isDynamic(Pt[Cn])){bt[Qt]=kn.unbox(Pt,Qt);return}}dn[Qt]=Pt}),{dynamic:bt,static:dn}}var ds=Co(ra.context||{},!0),hc=Co(ra.uniforms||{},!0),kt=Co(ra.attributes||{},!1),Yn=Co(Za(ra),!1),Nn={gpuTime:0,cpuTime:0,count:0},_i=xi.compile(Yn,kt,hc,ds,Nn),Va=_i.draw,St=_i.batch,ot=_i.scope,Wt=[];function yn(sn){for(;Wt.length<sn;)Wt.push(null);return Wt}function qn(sn,an){var dn;if(mr&&Y.raise("context lost"),typeof sn=="function")return ot.call(this,null,sn,0);if(typeof an=="function")if(typeof sn=="number")for(dn=0;dn<sn;++dn)ot.call(this,null,an,dn);else if(Array.isArray(sn))for(dn=0;dn<sn.length;++dn)ot.call(this,sn[dn],an,dn);else return ot.call(this,sn,an,0);else if(typeof sn=="number"){if(sn>0)return St.call(this,yn(sn|0),sn|0)}else if(Array.isArray(sn)){if(sn.length)return St.call(this,sn,sn.length)}else return Va.call(this,sn)}return M(qn,{stats:Nn,destroy:function(){_i.destroy()}})}var Rs=vr.setFBO=Yo({framebuffer:kn.define.call(null,uf,"framebuffer")});function fs(ra,Za){var Co=0;xi.procs.poll();var ds=Za.color;ds&&(Zt.clearColor(+ds[0]||0,+ds[1]||0,+ds[2]||0,+ds[3]||0),Co|=Ph),"depth"in Za&&(Zt.clearDepth(+Za.depth),Co|=Ll),"stencil"in Za&&(Zt.clearStencil(Za.stencil|0),Co|=Yf),Y(!!Co,"called regl.clear with no buffer specified"),Zt.clear(Co)}function ks(ra){if(Y(typeof ra=="object"&&ra,"regl.clear() takes an object as input"),"framebuffer"in ra)if(ra.framebuffer&&ra.framebuffer_reglType==="framebufferCube")for(var Za=0;Za<6;++Za)Rs(M({framebuffer:ra.framebuffer.faces[Za]},ra),fs);else Rs(ra,fs);else fs(null,ra)}function Us(ra){Y.type(ra,"function","regl.frame() callback must be a function"),ei.push(ra);function Za(){var Co=Lf(ei,ra);Y(Co>=0,"cannot cancel a frame twice");function ds(){var hc=Lf(ei,ds);ei[hc]=ei[ei.length-1],ei.length-=1,ei.length<=0&&$a()}ei[Co]=ds}return aa(),{cancel:Za}}function Js(){var ra=Rr.viewport,Za=Rr.scissor_box;ra[0]=ra[1]=Za[0]=Za[1]=0,xr.viewportWidth=xr.framebufferWidth=xr.drawingBufferWidth=ra[2]=Za[2]=Zt.drawingBufferWidth,xr.viewportHeight=xr.framebufferHeight=xr.drawingBufferHeight=ra[3]=Za[3]=Zt.drawingBufferHeight}function Ss(){xr.tick+=1,xr.time=Ts(),Js(),xi.procs.poll()}function qi(){Vi.refresh(),Js(),xi.procs.refresh(),Dr&&Dr.update()}function Ts(){return(cr()-jr)/1e3}qi();function vo(ra,Za){Y.type(Za,"function","listener callback must be a function");var Co;switch(ra){case"frame":return Us(Za);case"lost":Co=ga;break;case"restore":Co=Ki;break;case"destroy":Co=li;break;default:Y.raise("invalid event, must be one of frame,lost,restore,destroy")}return Co.push(Za),{cancel:function(){for(var ds=0;ds<Co.length;++ds)if(Co[ds]===Za){Co[ds]=Co[Co.length-1],Co.pop();return}}}}var As=M(Yo,{clear:ks,prop:kn.define.bind(null,uf),context:kn.define.bind(null,Ma),this:kn.define.bind(null,kf),draw:Yo({}),buffer:function(ra){return Fr.create(ra,Kf,!1,!1)},elements:function(ra){return pi.create(ra,!1)},texture:Vi.create2D,cube:Vi.createCube,renderbuffer:yr.create,framebuffer:vr.create,framebufferCube:vr.createCube,vao:Tr.createVAO,attributes:Dn,frame:Us,on:vo,limits:tr,hasExtension:function(ra){return tr.extensions.indexOf(ra.toLowerCase())>=0},read:Qr,destroy:Zs,_gl:Zt,_refresh:qi,poll:function(){Ss(),Dr&&Dr.update()},now:Ts,stats:br});return ft.onDone(null,As),As}return lf})},1989:function(Ie,S,y){var E=y(51789),p=y(80401),M=y(57667),d=y(21327),g=y(81866);function x(v){var u=-1,t=v==null?0:v.length;for(this.clear();++u<t;){var e=v[u];this.set(e[0],e[1])}}x.prototype.clear=E,x.prototype.delete=p,x.prototype.get=M,x.prototype.has=d,x.prototype.set=g,Ie.exports=x},38407:function(Ie,S,y){var E=y(27040),p=y(14125),M=y(82117),d=y(67518),g=y(13399);function x(v){var u=-1,t=v==null?0:v.length;for(this.clear();++u<t;){var e=v[u];this.set(e[0],e[1])}}x.prototype.clear=E,x.prototype.delete=p,x.prototype.get=M,x.prototype.has=d,x.prototype.set=g,Ie.exports=x},57071:function(Ie,S,y){var E=y(10852),p=y(55639),M=E(p,"Map");Ie.exports=M},83369:function(Ie,S,y){var E=y(24785),p=y(11285),M=y(96e3),d=y(49916),g=y(95265);function x(v){var u=-1,t=v==null?0:v.length;for(this.clear();++u<t;){var e=v[u];this.set(e[0],e[1])}}x.prototype.clear=E,x.prototype.delete=p,x.prototype.get=M,x.prototype.has=d,x.prototype.set=g,Ie.exports=x},46384:function(Ie,S,y){var E=y(38407),p=y(37465),M=y(63779),d=y(67599),g=y(44758),x=y(34309);function v(u){var t=this.__data__=new E(u);this.size=t.size}v.prototype.clear=p,v.prototype.delete=M,v.prototype.get=d,v.prototype.has=g,v.prototype.set=x,Ie.exports=v},62705:function(Ie,S,y){var E=y(55639),p=E.Symbol;Ie.exports=p},11149:function(Ie,S,y){var E=y(55639),p=E.Uint8Array;Ie.exports=p},96874:function(Ie){function S(y,E,p){switch(p.length){case 0:return y.call(E);case 1:return y.call(E,p[0]);case 2:return y.call(E,p[0],p[1]);case 3:return y.call(E,p[0],p[1],p[2])}return y.apply(E,p)}Ie.exports=S},14636:function(Ie,S,y){var E=y(22545),p=y(35694),M=y(1469),d=y(44144),g=y(65776),x=y(36719),v=Object.prototype,u=v.hasOwnProperty;function t(e,o){var c=M(e),b=!c&&p(e),A=!c&&!b&&d(e),w=!c&&!b&&!A&&x(e),D=c||b||A||w,F=D?E(e.length,String):[],Z=F.length;for(var L in e)(o||u.call(e,L))&&!(D&&(L=="length"||A&&(L=="offset"||L=="parent")||w&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||g(L,Z)))&&F.push(L);return F}Ie.exports=t},86556:function(Ie,S,y){var E=y(89465),p=y(77813);function M(d,g,x){(x!==void 0&&!p(d[g],x)||x===void 0&&!(g in d))&&E(d,g,x)}Ie.exports=M},34865:function(Ie,S,y){var E=y(89465),p=y(77813),M=Object.prototype,d=M.hasOwnProperty;function g(x,v,u){var t=x[v];(!(d.call(x,v)&&p(t,u))||u===void 0&&!(v in x))&&E(x,v,u)}Ie.exports=g},18470:function(Ie,S,y){var E=y(77813);function p(M,d){for(var g=M.length;g--;)if(E(M[g][0],d))return g;return-1}Ie.exports=p},89465:function(Ie,S,y){var E=y(38777);function p(M,d,g){d=="__proto__"&&E?E(M,d,{configurable:!0,enumerable:!0,value:g,writable:!0}):M[d]=g}Ie.exports=p},3118:function(Ie,S,y){var E=y(13218),p=Object.create,M=function(){function d(){}return function(g){if(!E(g))return{};if(p)return p(g);d.prototype=g;var x=new d;return d.prototype=void 0,x}}();Ie.exports=M},28483:function(Ie,S,y){var E=y(25063),p=E();Ie.exports=p},44239:function(Ie,S,y){var E=y(62705),p=y(89607),M=y(2333),d="[object Null]",g="[object Undefined]",x=E?E.toStringTag:void 0;function v(u){return u==null?u===void 0?g:d:x&&x in Object(u)?p(u):M(u)}Ie.exports=v},9454:function(Ie,S,y){var E=y(44239),p=y(37005),M="[object Arguments]";function d(g){return p(g)&&E(g)==M}Ie.exports=d},28458:function(Ie,S,y){var E=y(23560),p=y(15346),M=y(13218),d=y(80346),g=/[\\^$.*+?()[\]{}|]/g,x=/^\[object .+?Constructor\]$/,v=Function.prototype,u=Object.prototype,t=v.toString,e=u.hasOwnProperty,o=RegExp("^"+t.call(e).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(b){if(!M(b)||p(b))return!1;var A=E(b)?o:x;return A.test(d(b))}Ie.exports=c},38749:function(Ie,S,y){var E=y(44239),p=y(41780),M=y(37005),d="[object Arguments]",g="[object Array]",x="[object Boolean]",v="[object Date]",u="[object Error]",t="[object Function]",e="[object Map]",o="[object Number]",c="[object Object]",b="[object RegExp]",A="[object Set]",w="[object String]",D="[object WeakMap]",F="[object ArrayBuffer]",Z="[object DataView]",L="[object Float32Array]",W="[object Float64Array]",k="[object Int8Array]",de="[object Int16Array]",H="[object Int32Array]",ue="[object Uint8Array]",ve="[object Uint8ClampedArray]",ke="[object Uint16Array]",Ae="[object Uint32Array]",be={};be[L]=be[W]=be[k]=be[de]=be[H]=be[ue]=be[ve]=be[ke]=be[Ae]=!0,be[d]=be[g]=be[F]=be[x]=be[Z]=be[v]=be[u]=be[t]=be[e]=be[o]=be[c]=be[b]=be[A]=be[w]=be[D]=!1;function G(ie){return M(ie)&&p(ie.length)&&!!be[E(ie)]}Ie.exports=G},35014:function(Ie,S,y){var E=y(13218),p=y(25726),M=y(33498),d=Object.prototype,g=d.hasOwnProperty;function x(v){if(!E(v))return M(v);var u=p(v),t=[];for(var e in v)e=="constructor"&&(u||!g.call(v,e))||t.push(e);return t}Ie.exports=x},42980:function(Ie,S,y){var E=y(46384),p=y(86556),M=y(28483),d=y(59783),g=y(13218),x=y(81704),v=y(36390);function u(t,e,o,c,b){t!==e&&M(e,function(A,w){if(b||(b=new E),g(A))d(t,e,w,o,u,c,b);else{var D=c?c(v(t,w),A,w+"",t,e,b):void 0;D===void 0&&(D=A),p(t,w,D)}},x)}Ie.exports=u},59783:function(Ie,S,y){var E=y(86556),p=y(64626),M=y(77133),d=y(278),g=y(38517),x=y(35694),v=y(1469),u=y(29246),t=y(44144),e=y(23560),o=y(13218),c=y(68630),b=y(36719),A=y(36390),w=y(59881);function D(F,Z,L,W,k,de,H){var ue=A(F,L),ve=A(Z,L),ke=H.get(ve);if(ke){E(F,L,ke);return}var Ae=de?de(ue,ve,L+"",F,Z,H):void 0,be=Ae===void 0;if(be){var G=v(ve),ie=!G&&t(ve),V=!G&&!ie&&b(ve);Ae=ve,G||ie||V?v(ue)?Ae=ue:u(ue)?Ae=d(ue):ie?(be=!1,Ae=p(ve,!0)):V?(be=!1,Ae=M(ve,!0)):Ae=[]:c(ve)||x(ve)?(Ae=ue,x(ue)?Ae=w(ue):(!o(ue)||e(ue))&&(Ae=g(ve))):be=!1}be&&(H.set(ve,Ae),k(Ae,ve,W,de,H),H.delete(ve)),E(F,L,Ae)}Ie.exports=D},5976:function(Ie,S,y){var E=y(6557),p=y(45357),M=y(30061);function d(g,x){return M(p(g,x,E),g+"")}Ie.exports=d},56560:function(Ie,S,y){var E=y(75703),p=y(38777),M=y(6557),d=p?function(g,x){return p(g,"toString",{configurable:!0,enumerable:!1,value:E(x),writable:!0})}:M;Ie.exports=d},22545:function(Ie){function S(y,E){for(var p=-1,M=Array(y);++p<y;)M[p]=E(p);return M}Ie.exports=S},7518:function(Ie){function S(y){return function(E){return y(E)}}Ie.exports=S},74318:function(Ie,S,y){var E=y(11149);function p(M){var d=new M.constructor(M.byteLength);return new E(d).set(new E(M)),d}Ie.exports=p},64626:function(Ie,S,y){Ie=y.nmd(Ie);var E=y(55639),p=S&&!S.nodeType&&S,M=p&&!0&&Ie&&!Ie.nodeType&&Ie,d=M&&M.exports===p,g=d?E.Buffer:void 0,x=g?g.allocUnsafe:void 0;function v(u,t){if(t)return u.slice();var e=u.length,o=x?x(e):new u.constructor(e);return u.copy(o),o}Ie.exports=v},77133:function(Ie,S,y){var E=y(74318);function p(M,d){var g=d?E(M.buffer):M.buffer;return new M.constructor(g,M.byteOffset,M.length)}Ie.exports=p},278:function(Ie){function S(y,E){var p=-1,M=y.length;for(E||(E=Array(M));++p<M;)E[p]=y[p];return E}Ie.exports=S},98363:function(Ie,S,y){var E=y(34865),p=y(89465);function M(d,g,x,v){var u=!x;x||(x={});for(var t=-1,e=g.length;++t<e;){var o=g[t],c=v?v(x[o],d[o],o,x,d):void 0;c===void 0&&(c=d[o]),u?p(x,o,c):E(x,o,c)}return x}Ie.exports=M},14429:function(Ie,S,y){var E=y(55639),p=E["__core-js_shared__"];Ie.exports=p},21463:function(Ie,S,y){var E=y(5976),p=y(16612);function M(d){return E(function(g,x){var v=-1,u=x.length,t=u>1?x[u-1]:void 0,e=u>2?x[2]:void 0;for(t=d.length>3&&typeof t=="function"?(u--,t):void 0,e&&p(x[0],x[1],e)&&(t=u<3?void 0:t,u=1),g=Object(g);++v<u;){var o=x[v];o&&d(g,o,v,t)}return g})}Ie.exports=M},25063:function(Ie){function S(y){return function(E,p,M){for(var d=-1,g=Object(E),x=M(E),v=x.length;v--;){var u=x[y?v:++d];if(p(g[u],u,g)===!1)break}return E}}Ie.exports=S},38777:function(Ie,S,y){var E=y(10852),p=function(){try{var M=E(Object,"defineProperty");return M({},"",{}),M}catch(d){}}();Ie.exports=p},31957:function(Ie,S,y){var E=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g;Ie.exports=E},45050:function(Ie,S,y){var E=y(37019);function p(M,d){var g=M.__data__;return E(d)?g[typeof d=="string"?"string":"hash"]:g.map}Ie.exports=p},10852:function(Ie,S,y){var E=y(28458),p=y(47801);function M(d,g){var x=p(d,g);return E(x)?x:void 0}Ie.exports=M},85924:function(Ie,S,y){var E=y(5569),p=E(Object.getPrototypeOf,Object);Ie.exports=p},89607:function(Ie,S,y){var E=y(62705),p=Object.prototype,M=p.hasOwnProperty,d=p.toString,g=E?E.toStringTag:void 0;function x(v){var u=M.call(v,g),t=v[g];try{v[g]=void 0;var e=!0}catch(c){}var o=d.call(v);return e&&(u?v[g]=t:delete v[g]),o}Ie.exports=x},47801:function(Ie){function S(y,E){return y==null?void 0:y[E]}Ie.exports=S},51789:function(Ie,S,y){var E=y(94536);function p(){this.__data__=E?E(null):{},this.size=0}Ie.exports=p},80401:function(Ie){function S(y){var E=this.has(y)&&delete this.__data__[y];return this.size-=E?1:0,E}Ie.exports=S},57667:function(Ie,S,y){var E=y(94536),p="__lodash_hash_undefined__",M=Object.prototype,d=M.hasOwnProperty;function g(x){var v=this.__data__;if(E){var u=v[x];return u===p?void 0:u}return d.call(v,x)?v[x]:void 0}Ie.exports=g},21327:function(Ie,S,y){var E=y(94536),p=Object.prototype,M=p.hasOwnProperty;function d(g){var x=this.__data__;return E?x[g]!==void 0:M.call(x,g)}Ie.exports=d},81866:function(Ie,S,y){var E=y(94536),p="__lodash_hash_undefined__";function M(d,g){var x=this.__data__;return this.size+=this.has(d)?0:1,x[d]=E&&g===void 0?p:g,this}Ie.exports=M},38517:function(Ie,S,y){var E=y(3118),p=y(85924),M=y(25726);function d(g){return typeof g.constructor=="function"&&!M(g)?E(p(g)):{}}Ie.exports=d},65776:function(Ie){var S=9007199254740991,y=/^(?:0|[1-9]\d*)$/;function E(p,M){var d=typeof p;return M=M==null?S:M,!!M&&(d=="number"||d!="symbol"&&y.test(p))&&p>-1&&p%1==0&&p<M}Ie.exports=E},16612:function(Ie,S,y){var E=y(77813),p=y(98612),M=y(65776),d=y(13218);function g(x,v,u){if(!d(u))return!1;var t=typeof v;return(t=="number"?p(u)&&M(v,u.length):t=="string"&&v in u)?E(u[v],x):!1}Ie.exports=g},37019:function(Ie){function S(y){var E=typeof y;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?y!=="__proto__":y===null}Ie.exports=S},15346:function(Ie,S,y){var E=y(14429),p=function(){var d=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function M(d){return!!p&&p in d}Ie.exports=M},25726:function(Ie){var S=Object.prototype;function y(E){var p=E&&E.constructor,M=typeof p=="function"&&p.prototype||S;return E===M}Ie.exports=y},27040:function(Ie){function S(){this.__data__=[],this.size=0}Ie.exports=S},14125:function(Ie,S,y){var E=y(18470),p=Array.prototype,M=p.splice;function d(g){var x=this.__data__,v=E(x,g);if(v<0)return!1;var u=x.length-1;return v==u?x.pop():M.call(x,v,1),--this.size,!0}Ie.exports=d},82117:function(Ie,S,y){var E=y(18470);function p(M){var d=this.__data__,g=E(d,M);return g<0?void 0:d[g][1]}Ie.exports=p},67518:function(Ie,S,y){var E=y(18470);function p(M){return E(this.__data__,M)>-1}Ie.exports=p},13399:function(Ie,S,y){var E=y(18470);function p(M,d){var g=this.__data__,x=E(g,M);return x<0?(++this.size,g.push([M,d])):g[x][1]=d,this}Ie.exports=p},24785:function(Ie,S,y){var E=y(1989),p=y(38407),M=y(57071);function d(){this.size=0,this.__data__={hash:new E,map:new(M||p),string:new E}}Ie.exports=d},11285:function(Ie,S,y){var E=y(45050);function p(M){var d=E(this,M).delete(M);return this.size-=d?1:0,d}Ie.exports=p},96e3:function(Ie,S,y){var E=y(45050);function p(M){return E(this,M).get(M)}Ie.exports=p},49916:function(Ie,S,y){var E=y(45050);function p(M){return E(this,M).has(M)}Ie.exports=p},95265:function(Ie,S,y){var E=y(45050);function p(M,d){var g=E(this,M),x=g.size;return g.set(M,d),this.size+=g.size==x?0:1,this}Ie.exports=p},94536:function(Ie,S,y){var E=y(10852),p=E(Object,"create");Ie.exports=p},33498:function(Ie){function S(y){var E=[];if(y!=null)for(var p in Object(y))E.push(p);return E}Ie.exports=S},31167:function(Ie,S,y){Ie=y.nmd(Ie);var E=y(31957),p=S&&!S.nodeType&&S,M=p&&!0&&Ie&&!Ie.nodeType&&Ie,d=M&&M.exports===p,g=d&&E.process,x=function(){try{var v=M&&M.require&&M.require("util").types;return v||g&&g.binding&&g.binding("util")}catch(u){}}();Ie.exports=x},2333:function(Ie){var S=Object.prototype,y=S.toString;function E(p){return y.call(p)}Ie.exports=E},5569:function(Ie){function S(y,E){return function(p){return y(E(p))}}Ie.exports=S},45357:function(Ie,S,y){var E=y(96874),p=Math.max;function M(d,g,x){return g=p(g===void 0?d.length-1:g,0),function(){for(var v=arguments,u=-1,t=p(v.length-g,0),e=Array(t);++u<t;)e[u]=v[g+u];u=-1;for(var o=Array(g+1);++u<g;)o[u]=v[u];return o[g]=x(e),E(d,this,o)}}Ie.exports=M},55639:function(Ie,S,y){var E=y(31957),p=typeof self=="object"&&self&&self.Object===Object&&self,M=E||p||Function("return this")();Ie.exports=M},36390:function(Ie){function S(y,E){if(!(E==="constructor"&&typeof y[E]=="function")&&E!="__proto__")return y[E]}Ie.exports=S},30061:function(Ie,S,y){var E=y(56560),p=y(21275),M=p(E);Ie.exports=M},21275:function(Ie){var S=800,y=16,E=Date.now;function p(M){var d=0,g=0;return function(){var x=E(),v=y-(x-g);if(g=x,v>0){if(++d>=S)return arguments[0]}else d=0;return M.apply(void 0,arguments)}}Ie.exports=p},37465:function(Ie,S,y){var E=y(38407);function p(){this.__data__=new E,this.size=0}Ie.exports=p},63779:function(Ie){function S(y){var E=this.__data__,p=E.delete(y);return this.size=E.size,p}Ie.exports=S},67599:function(Ie){function S(y){return this.__data__.get(y)}Ie.exports=S},44758:function(Ie){function S(y){return this.__data__.has(y)}Ie.exports=S},34309:function(Ie,S,y){var E=y(38407),p=y(57071),M=y(83369),d=200;function g(x,v){var u=this.__data__;if(u instanceof E){var t=u.__data__;if(!p||t.length<d-1)return t.push([x,v]),this.size=++u.size,this;u=this.__data__=new M(t)}return u.set(x,v),this.size=u.size,this}Ie.exports=g},80346:function(Ie){var S=Function.prototype,y=S.toString;function E(p){if(p!=null){try{return y.call(p)}catch(M){}try{return p+""}catch(M){}}return""}Ie.exports=E},75703:function(Ie){function S(y){return function(){return y}}Ie.exports=S},77813:function(Ie){function S(y,E){return y===E||y!==y&&E!==E}Ie.exports=S},6557:function(Ie){function S(y){return y}Ie.exports=S},35694:function(Ie,S,y){var E=y(9454),p=y(37005),M=Object.prototype,d=M.hasOwnProperty,g=M.propertyIsEnumerable,x=E(function(){return arguments}())?E:function(v){return p(v)&&d.call(v,"callee")&&!g.call(v,"callee")};Ie.exports=x},1469:function(Ie){var S=Array.isArray;Ie.exports=S},98612:function(Ie,S,y){var E=y(23560),p=y(41780);function M(d){return d!=null&&p(d.length)&&!E(d)}Ie.exports=M},29246:function(Ie,S,y){var E=y(98612),p=y(37005);function M(d){return p(d)&&E(d)}Ie.exports=M},44144:function(Ie,S,y){Ie=y.nmd(Ie);var E=y(55639),p=y(95062),M=S&&!S.nodeType&&S,d=M&&!0&&Ie&&!Ie.nodeType&&Ie,g=d&&d.exports===M,x=g?E.Buffer:void 0,v=x?x.isBuffer:void 0,u=v||p;Ie.exports=u},23560:function(Ie,S,y){var E=y(44239),p=y(13218),M="[object AsyncFunction]",d="[object Function]",g="[object GeneratorFunction]",x="[object Proxy]";function v(u){if(!p(u))return!1;var t=E(u);return t==d||t==g||t==M||t==x}Ie.exports=v},41780:function(Ie){var S=9007199254740991;function y(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=S}Ie.exports=y},13218:function(Ie){function S(y){var E=typeof y;return y!=null&&(E=="object"||E=="function")}Ie.exports=S},37005:function(Ie){function S(y){return y!=null&&typeof y=="object"}Ie.exports=S},68630:function(Ie,S,y){var E=y(44239),p=y(85924),M=y(37005),d="[object Object]",g=Function.prototype,x=Object.prototype,v=g.toString,u=x.hasOwnProperty,t=v.call(Object);function e(o){if(!M(o)||E(o)!=d)return!1;var c=p(o);if(c===null)return!0;var b=u.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&v.call(b)==t}Ie.exports=e},36719:function(Ie,S,y){var E=y(38749),p=y(7518),M=y(31167),d=M&&M.isTypedArray,g=d?p(d):E;Ie.exports=g},81704:function(Ie,S,y){var E=y(14636),p=y(35014),M=y(98612);function d(g){return M(g)?E(g,!0):p(g)}Ie.exports=d},96486:function(Ie,S,y){Ie=y.nmd(Ie);var E;(function(){var p,M="4.17.21",d=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",v="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",t=500,e="__lodash_placeholder__",o=1,c=2,b=4,A=1,w=2,D=1,F=2,Z=4,L=8,W=16,k=32,de=64,H=128,ue=256,ve=512,ke=30,Ae="...",be=800,G=16,ie=1,V=2,ae=3,K=1/0,he=9007199254740991,Se=17976931348623157e292,Fe=0/0,nt=4294967295,lt=nt-1,Gt=nt>>>1,pn=[["ary",H],["bind",D],["bindKey",F],["curry",L],["curryRight",W],["flip",ve],["partial",k],["partialRight",de],["rearg",ue]],$n="[object Arguments]",Ln="[object Array]",st="[object AsyncFunction]",xt="[object Boolean]",tn="[object Date]",Un="[object DOMException]",We="[object Error]",Yt="[object Function]",Ze="[object GeneratorFunction]",Pe="[object Map]",ze="[object Number]",ht="[object Null]",P="[object Object]",ne="[object Promise]",_e="[object Proxy]",oe="[object RegExp]",ce="[object Set]",ye="[object String]",Y="[object Symbol]",Ne="[object Undefined]",Qe="[object WeakMap]",mt="[object WeakSet]",Ve="[object ArrayBuffer]",rt="[object DataView]",yt="[object Float32Array]",Tt="[object Float64Array]",Ht="[object Int8Array]",en="[object Int16Array]",wt="[object Int32Array]",Mn="[object Uint8Array]",kn="[object Uint8ClampedArray]",jn="[object Uint16Array]",mn="[object Uint32Array]",cr=/\b__p \+= '';/g,Cr=/\b(__p \+=) '' \+/g,mi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$r=/&(?:amp|lt|gt|quot|#39);/g,Sr=/[&<>"']/g,dr=RegExp($r.source),Pr=RegExp(Sr.source),Hr=/<%-([\s\S]+?)%>/g,Xi=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,Gn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,Ha=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sa=/[\\^$.*+?()[\]{}|]/g,Qa=RegExp(Sa.source),ma=/^\s+/,Ei=/\s/,Ia=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,si=/\{\n\/\* \[wrapped with (.+)\] \*/,it=/,? & /,Qn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,Dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vn=/\w*$/,bn=/^[-+]0x[0-9a-f]+$/i,Pn=/^0b[01]+$/i,ar=/^\[object .+?Constructor\]$/,Zr=/^0o[0-7]+$/i,Xr=/^(?:0|[1-9]\d*)$/,ui=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qr=/($^)/,Ti=/['\n\r\u2028\u2029\\]/g,fa="\\ud800-\\udfff",Bn="\\u0300-\\u036f",Li="\\ufe20-\\ufe2f",Ji="\\u20d0-\\u20ff",Na=Bn+Li+Ji,ea="\\u2700-\\u27bf",ha="a-z\\xdf-\\xf6\\xf8-\\xff",Ta="\\xac\\xb1\\xd7\\xf7",Aa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wi="\\u2000-\\u206f",go=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ja="A-Z\\xc0-\\xd6\\xd8-\\xde",$o="\\ufe0e\\ufe0f",Ua=Ta+Aa+Wi+go,Wa="['\u2019]",mo="["+fa+"]",fo="["+Ua+"]",Ro="["+Na+"]",te="\\d+",ho="["+ea+"]",wn="["+ha+"]",tt="[^"+fa+Ua+te+ea+ha+Ja+"]",$e="\\ud83c[\\udffb-\\udfff]",dt="(?:"+Ro+"|"+$e+")",Ke="[^"+fa+"]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",nn="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="["+Ja+"]",An="\\u200d",Oe="(?:"+wn+"|"+tt+")",De="(?:"+ln+"|"+tt+")",Be="(?:"+Wa+"(?:d|ll|m|re|s|t|ve))?",Ye="(?:"+Wa+"(?:D|LL|M|RE|S|T|VE))?",Nt=dt+"?",jt="["+$o+"]?",un="(?:"+An+"(?:"+[Ke,qt,nn].join("|")+")"+jt+Nt+")*",Hn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fr=jt+Nt+un,or="(?:"+[ho,qt,nn].join("|")+")"+fr,$t="(?:"+[Ke+Ro+"?",Ro,qt,nn,mo].join("|")+")",er=RegExp(Wa,"g"),Jn=RegExp(Ro,"g"),Bt=RegExp($e+"(?="+$e+")|"+$t+fr,"g"),Ai=RegExp([ln+"?"+wn+"+"+Be+"(?="+[fo,ln,"$"].join("|")+")",De+"+"+Ye+"(?="+[fo,ln+Oe,"$"].join("|")+")",ln+"?"+Oe+"+"+Be,ln+"+"+Ye,Rn,Hn,te,or].join("|"),"g"),Le=RegExp("["+An+fa+Na+$o+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,He=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ot=-1,Vt={};Vt[yt]=Vt[Tt]=Vt[Ht]=Vt[en]=Vt[wt]=Vt[Mn]=Vt[kn]=Vt[jn]=Vt[mn]=!0,Vt[$n]=Vt[Ln]=Vt[Ve]=Vt[xt]=Vt[rt]=Vt[tn]=Vt[We]=Vt[Yt]=Vt[Pe]=Vt[ze]=Vt[P]=Vt[oe]=Vt[ce]=Vt[ye]=Vt[Qe]=!1;var gn={};gn[$n]=gn[Ln]=gn[Ve]=gn[rt]=gn[xt]=gn[tn]=gn[yt]=gn[Tt]=gn[Ht]=gn[en]=gn[wt]=gn[Pe]=gn[ze]=gn[P]=gn[oe]=gn[ce]=gn[ye]=gn[Y]=gn[Mn]=gn[kn]=gn[jn]=gn[mn]=!0,gn[We]=gn[Yt]=gn[Qe]=!1;var vt={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},zt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zn=parseFloat,wr=parseInt,Er=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,_=typeof self=="object"&&self&&self.Object===Object&&self,N=Er||_||Function("return this")(),me=S&&!S.nodeType&&S,q=me&&!0&&Ie&&!Ie.nodeType&&Ie,Ue=q&&q.exports===me,ct=Ue&&Er.process,Lt=function(){try{var In=q&&q.require&&q.require("util").types;return In||ct&&ct.binding&&ct.binding("util")}catch(pr){}}(),hn=Lt&&Lt.isArrayBuffer,on=Lt&&Lt.isDate,nr=Lt&&Lt.isMap,sr=Lt&&Lt.isRegExp,ti=Lt&&Lt.isSet,Fi=Lt&&Lt.isTypedArray;function Ci(In,pr,rr){switch(rr.length){case 0:return In.call(pr);case 1:return In.call(pr,rr[0]);case 2:return In.call(pr,rr[0],rr[1]);case 3:return In.call(pr,rr[0],rr[1],rr[2])}return In.apply(pr,rr)}function ta(In,pr,rr,gi){for(var Ca=-1,io=In==null?0:In.length;++Ca<io;){var Vo=In[Ca];pr(gi,Vo,rr(Vo),In)}return gi}function Ni(In,pr){for(var rr=-1,gi=In==null?0:In.length;++rr<gi&&pr(In[rr],rr,In)!==!1;);return In}function Oi(In,pr){for(var rr=In==null?0:In.length;rr--&&pr(In[rr],rr,In)!==!1;);return In}function yo(In,pr){for(var rr=-1,gi=In==null?0:In.length;++rr<gi;)if(!pr(In[rr],rr,In))return!1;return!0}function ya(In,pr){for(var rr=-1,gi=In==null?0:In.length,Ca=0,io=[];++rr<gi;){var Vo=In[rr];pr(Vo,rr,In)&&(io[Ca++]=Vo)}return io}function Ba(In,pr){var rr=In==null?0:In.length;return!!rr&&_a(In,pr,0)>-1}function xa(In,pr,rr){for(var gi=-1,Ca=In==null?0:In.length;++gi<Ca;)if(rr(pr,In[gi]))return!0;return!1}function sa(In,pr){for(var rr=-1,gi=In==null?0:In.length,Ca=Array(gi);++rr<gi;)Ca[rr]=pr(In[rr],rr,In);return Ca}function jo(In,pr){for(var rr=-1,gi=pr.length,Ca=In.length;++rr<gi;)In[Ca+rr]=pr[rr];return In}function vs(In,pr,rr,gi){var Ca=-1,io=In==null?0:In.length;for(gi&&io&&(rr=In[++Ca]);++Ca<io;)rr=pr(rr,In[Ca],Ca,In);return rr}function $s(In,pr,rr,gi){var Ca=In==null?0:In.length;for(gi&&Ca&&(rr=In[--Ca]);Ca--;)rr=pr(rr,In[Ca],Ca,In);return rr}function Fs(In,pr){for(var rr=-1,gi=In==null?0:In.length;++rr<gi;)if(pr(In[rr],rr,In))return!0;return!1}var tu=Zu("length");function lo(In){return In.split("")}function du(In){return In.match(Qn)||[]}function Dl(In,pr,rr){var gi;return rr(In,function(Ca,io,Vo){if(pr(Ca,io,Vo))return gi=io,!1}),gi}function eo(In,pr,rr,gi){for(var Ca=In.length,io=rr+(gi?1:-1);gi?io--:++io<Ca;)if(pr(In[io],io,In))return io;return-1}function _a(In,pr,rr){return pr===pr?Bc(In,pr,rr):eo(In,ko,rr)}function Su(In,pr,rr,gi){for(var Ca=rr-1,io=In.length;++Ca<io;)if(gi(In[Ca],pr))return Ca;return-1}function ko(In){return In!==In}function Ks(In,pr){var rr=In==null?0:In.length;return rr?tl(In,pr)/rr:Fe}function Zu(In){return function(pr){return pr==null?p:pr[In]}}function nu(In){return function(pr){return In==null?p:In[pr]}}function ru(In,pr,rr,gi,Ca){return Ca(In,function(io,Vo,_o){rr=gi?(gi=!1,io):pr(rr,io,Vo,_o)}),rr}function yc(In,pr){var rr=In.length;for(In.sort(pr);rr--;)In[rr]=In[rr].value;return In}function tl(In,pr){for(var rr,gi=-1,Ca=In.length;++gi<Ca;){var io=pr(In[gi]);io!==p&&(rr=rr===p?io:rr+io)}return rr}function Tu(In,pr){for(var rr=-1,gi=Array(In);++rr<In;)gi[rr]=pr(rr);return gi}function pl(In,pr){return sa(pr,function(rr){return[rr,In[rr]]})}function Nl(In){return In&&In.slice(0,vl(In)+1).replace(ma,"")}function gs(In){return function(pr){return In(pr)}}function Au(In,pr){return sa(pr,function(rr){return In[rr]})}function js(In,pr){return In.has(pr)}function nl(In,pr){for(var rr=-1,gi=In.length;++rr<gi&&_a(pr,In[rr],0)>-1;);return rr}function qs(In,pr){for(var rr=In.length;rr--&&_a(pr,In[rr],0)>-1;);return rr}function rc(In,pr){for(var rr=In.length,gi=0;rr--;)In[rr]===pr&&++gi;return gi}var ws=nu(vt),_c=nu(zt);function bc(In){return"\\"+fn[In]}function Kc(In,pr){return In==null?p:In[pr]}function iu(In){return Le.test(In)}function Nc(In){return Xe.test(In)}function xc(In){for(var pr,rr=[];!(pr=In.next()).done;)rr.push(pr.value);return rr}function Bl(In){var pr=-1,rr=Array(In.size);return In.forEach(function(gi,Ca){rr[++pr]=[Ca,gi]}),rr}function au(In,pr){return function(rr){return In(pr(rr))}}function Cu(In,pr){for(var rr=-1,gi=In.length,Ca=0,io=[];++rr<gi;){var Vo=In[rr];(Vo===pr||Vo===e)&&(In[rr]=e,io[Ca++]=rr)}return io}function ms(In){var pr=-1,rr=Array(In.size);return In.forEach(function(gi){rr[++pr]=gi}),rr}function Zl(In){var pr=-1,rr=Array(In.size);return In.forEach(function(gi){rr[++pr]=[gi,gi]}),rr}function Bc(In,pr,rr){for(var gi=rr-1,Ca=In.length;++gi<Ca;)if(In[gi]===pr)return gi;return-1}function Vs(In,pr,rr){for(var gi=rr+1;gi--;)if(In[gi]===pr)return gi;return gi}function wu(In){return iu(In)?Sc(In):tu(In)}function ys(In){return iu(In)?Ul(In):lo(In)}function vl(In){for(var pr=In.length;pr--&&Ei.test(In.charAt(pr)););return pr}var Ec=nu(Kt);function Sc(In){for(var pr=Bt.lastIndex=0;Bt.test(In);)++pr;return pr}function Ul(In){return In.match(Bt)||[]}function gl(In){return In.match(Ai)||[]}var qc=function In(pr){pr=pr==null?N:ic.defaults(N.Object(),pr,ic.pick(N,He));var rr=pr.Array,gi=pr.Date,Ca=pr.Error,io=pr.Function,Vo=pr.Math,_o=pr.Object,zl=pr.RegExp,Tc=pr.String,Ds=pr.TypeError,Uu=rr.prototype,rl=io.prototype,Mu=_o.prototype,ml=pr["__core-js_shared__"],il=rl.toString,po=Mu.hasOwnProperty,yl=0,Zc=function(){var h=/[^.]+$/.exec(ml&&ml.keys&&ml.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),zu=Mu.toString,_s=il.call(_o),pu=N._,al=zl("^"+il.call(po).replace(Sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vu=Ue?pr.Buffer:p,os=pr.Symbol,Gs=pr.Uint8Array,Lo=vu?vu.allocUnsafe:p,gu=au(_o.getPrototypeOf,_o),Ms=_o.create,ou=Mu.propertyIsEnumerable,No=Uu.splice,qo=os?os.isConcatSpreadable:p,ol=os?os.iterator:p,bs=os?os.toStringTag:p,$l=function(){try{var h=lf(_o,"defineProperty");return h({},"",{}),h}catch(T){}}(),jl=pr.clearTimeout!==N.clearTimeout&&pr.clearTimeout,Uc=gi&&gi.now!==N.Date.now&&gi.now,ff=pr.setTimeout!==N.setTimeout&&pr.setTimeout,Vl=Vo.ceil,_l=Vo.floor,bl=_o.getOwnPropertySymbols,zc=vu?vu.isBuffer:p,ac=pr.isFinite,Ac=Uu.join,Cc=au(_o.keys,_o),Bo=Vo.max,Qo=Vo.min,oc=gi.now,xl=pr.parseInt,wc=Vo.random,Ou=Uu.reverse,su=lf(pr,"DataView"),no=lf(pr,"Map"),sl=lf(pr,"Promise"),Zo=lf(pr,"Set"),uu=lf(pr,"WeakMap"),ul=lf(_o,"create"),El=uu&&new uu,lu={},Ns=Ao(su),Gl=Ao(no),le=Ao(sl),X=Ao(Zo),O=Ao(uu),j=os?os.prototype:p,Q=j?j.valueOf:p,Re=j?j.toString:p;function se(h){if(Ls(h)&&!ro(h)&&!(h instanceof Zn)){if(h instanceof Ut)return h;if(po.call(h,"__wrapped__"))return Zs(h)}return new Ut(h)}var At=function(){function h(){}return function(T){if(!es(T))return{};if(Ms)return Ms(T);h.prototype=T;var U=new h;return h.prototype=p,U}}();function Rt(){}function Ut(h,T){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=p}se.templateSettings={escape:Hr,evaluate:Xi,interpolate:Kn,variable:"",imports:{_:se}},se.prototype=Rt.prototype,se.prototype.constructor=se,Ut.prototype=At(Rt.prototype),Ut.prototype.constructor=Ut;function Zn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function gr(){var h=new Zn(this.__wrapped__);return h.__actions__=En(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=En(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=En(this.__views__),h}function ni(){if(this.__filtered__){var h=new Zn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Vr(){var h=this.__wrapped__.value(),T=this.__dir__,U=ro(h),Ee=T<0,qe=U?h.length:0,Et=mr(0,qe,this.__views__),rn=Et.start,_n=Et.end,Vn=_n-rn,Nr=Ee?_n:rn-1,Br=this.__iteratees__,Jr=Br.length,Bi=0,la=Qo(Vn,this.__takeCount__);if(!U||!Ee&&qe==Vn&&la==Vn)return Il(h,this.__actions__);var Fa=[];e:for(;Vn--&&Bi<la;){Nr+=T;for(var uo=-1,Da=h[Nr];++uo<Jr;){var Eo=Br[uo],wo=Eo.iteratee,tc=Eo.type,fl=wo(Da);if(tc==V)Da=fl;else if(!fl){if(tc==ie)continue e;break e}}Fa[Bi++]=Da}return Fa}Zn.prototype=At(Rt.prototype),Zn.prototype.constructor=Zn;function wi(h){var T=-1,U=h==null?0:h.length;for(this.clear();++T<U;){var Ee=h[T];this.set(Ee[0],Ee[1])}}function ji(){this.__data__=ul?ul(null):{},this.size=0}function da(h){var T=this.has(h)&&delete this.__data__[h];return this.size-=T?1:0,T}function wa(h){var T=this.__data__;if(ul){var U=T[h];return U===u?p:U}return po.call(T,h)?T[h]:p}function to(h){var T=this.__data__;return ul?T[h]!==p:po.call(T,h)}function va(h,T){var U=this.__data__;return this.size+=this.has(h)?0:1,U[h]=ul&&T===p?u:T,this}wi.prototype.clear=ji,wi.prototype.delete=da,wi.prototype.get=wa,wi.prototype.has=to,wi.prototype.set=va;function ba(h){var T=-1,U=h==null?0:h.length;for(this.clear();++T<U;){var Ee=h[T];this.set(Ee[0],Ee[1])}}function ao(){this.__data__=[],this.size=0}function Mo(h){var T=this.__data__,U=Wl(T,h);if(U<0)return!1;var Ee=T.length-1;return U==Ee?T.pop():No.call(T,U,1),--this.size,!0}function so(h){var T=this.__data__,U=Wl(T,h);return U<0?p:T[U][1]}function ka(h){return Wl(this.__data__,h)>-1}function zo(h,T){var U=this.__data__,Ee=Wl(U,h);return Ee<0?(++this.size,U.push([h,T])):U[Ee][1]=T,this}ba.prototype.clear=ao,ba.prototype.delete=Mo,ba.prototype.get=so,ba.prototype.has=ka,ba.prototype.set=zo;function fi(h){var T=-1,U=h==null?0:h.length;for(this.clear();++T<U;){var Ee=h[T];this.set(Ee[0],Ee[1])}}function Go(){this.size=0,this.__data__={hash:new wi,map:new(no||ba),string:new wi}}function mu(h){var T=kf(this,h).delete(h);return this.size-=T?1:0,T}function bo(h){return kf(this,h).get(h)}function ss(h){return kf(this,h).has(h)}function Pu(h,T){var U=kf(this,h),Ee=U.size;return U.set(h,T),this.size+=U.size==Ee?0:1,this}fi.prototype.clear=Go,fi.prototype.delete=mu,fi.prototype.get=bo,fi.prototype.has=ss,fi.prototype.set=Pu;function yu(h){var T=-1,U=h==null?0:h.length;for(this.__data__=new fi;++T<U;)this.add(h[T])}function cu(h){return this.__data__.set(h,u),this}function fu(h){return this.__data__.has(h)}yu.prototype.add=yu.prototype.push=cu,yu.prototype.has=fu;function Fo(h){var T=this.__data__=new ba(h);this.size=T.size}function Sl(){this.__data__=new ba,this.size=0}function $c(h){var T=this.__data__,U=T.delete(h);return this.size=T.size,U}function Ka(h){return this.__data__.get(h)}function Qc(h){return this.__data__.has(h)}function jc(h,T){var U=this.__data__;if(U instanceof ba){var Ee=U.__data__;if(!no||Ee.length<d-1)return Ee.push([h,T]),this.size=++U.size,this;U=this.__data__=new fi(Ee)}return U.set(h,T),this.size=U.size,this}Fo.prototype.clear=Sl,Fo.prototype.delete=$c,Fo.prototype.get=Ka,Fo.prototype.has=Qc,Fo.prototype.set=jc;function Oo(h,T){var U=ro(h),Ee=!U&&Zf(h),qe=!U&&!Ee&&vf(h),Et=!U&&!Ee&&!qe&&Tf(h),rn=U||Ee||qe||Et,_n=rn?Tu(h.length,Tc):[],Vn=_n.length;for(var Nr in h)(T||po.call(h,Nr))&&!(rn&&(Nr=="length"||qe&&(Nr=="offset"||Nr=="parent")||Et&&(Nr=="buffer"||Nr=="byteLength"||Nr=="byteOffset")||Gr(Nr,Vn)))&&_n.push(Nr);return _n}function xs(h){var T=h.length;return T?h[Jt(0,T-1)]:p}function Hs(h,T){return aa(En(h),Ru(T,0,h.length))}function Iu(h){return aa(En(h))}function Hl(h,T,U){(U!==p&&!Xc(h[T],U)||U===p&&!(T in h))&&_u(h,T,U)}function $u(h,T,U){var Ee=h[T];(!(po.call(h,T)&&Xc(Ee,U))||U===p&&!(T in h))&&_u(h,T,U)}function Wl(h,T){for(var U=h.length;U--;)if(Xc(h[U][0],T))return U;return-1}function Jc(h,T,U,Ee){return us(h,function(qe,Et,rn){T(Ee,qe,U(qe),rn)}),Ee}function Xl(h,T){return h&&lr(T,Eu(T),h)}function Tl(h,T){return h&&lr(T,cl(T),h)}function _u(h,T,U){T=="__proto__"&&$l?$l(h,T,{configurable:!0,enumerable:!0,value:U,writable:!0}):h[T]=U}function Al(h,T){for(var U=-1,Ee=T.length,qe=rr(Ee),Et=h==null;++U<Ee;)qe[U]=Et?p:Wh(h,T[U]);return qe}function Ru(h,T,U){return h===h&&(U!==p&&(h=h<=U?h:U),T!==p&&(h=h>=T?h:T)),h}function Ho(h,T,U,Ee,qe,Et){var rn,_n=T&o,Vn=T&c,Nr=T&b;if(U&&(rn=qe?U(h,Ee,qe,Et):U(h)),rn!==p)return rn;if(!es(h))return h;var Br=ro(h);if(Br){if(rn=br(h),!_n)return En(h,rn)}else{var Jr=Dn(h),Bi=Jr==Yt||Jr==Ze;if(vf(h))return I(h,_n);if(Jr==P||Jr==$n||Bi&&!qe){if(rn=Vn||Bi?{}:Or(h),!_n)return Vn?Zi(h,Tl(rn,h)):Di(h,Xl(rn,h))}else{if(!gn[Jr])return qe?h:{};rn=Dr(h,Jr,_n)}}Et||(Et=new Fo);var la=Et.get(h);if(la)return la;Et.set(h,rn),$p(h)?h.forEach(function(Da){rn.add(Ho(Da,T,U,Da,h,Et))}):eh(h)&&h.forEach(function(Da,Eo){rn.set(Eo,Ho(Da,T,U,Eo,h,Et))});var Fa=Nr?Vn?Kf:Yf:Vn?cl:Eu,uo=Br?p:Fa(h);return Ni(uo||h,function(Da,Eo){uo&&(Eo=Da,Da=h[Eo]),$u(rn,Eo,Ho(Da,T,U,Eo,h,Et))}),rn}function Cl(h){var T=Eu(h);return function(U){return Mc(U,h,T)}}function Mc(h,T,U){var Ee=U.length;if(h==null)return!Ee;for(h=_o(h);Ee--;){var qe=U[Ee],Et=T[qe],rn=h[qe];if(rn===p&&!(qe in h)||!Et(rn))return!1}return!0}function Yl(h,T,U){if(typeof h!="function")throw new Ds(x);return Ki(function(){h.apply(p,U)},T)}function ju(h,T,U,Ee){var qe=-1,Et=Ba,rn=!0,_n=h.length,Vn=[],Nr=T.length;if(!_n)return Vn;U&&(T=sa(T,gs(U))),Ee?(Et=xa,rn=!1):T.length>=d&&(Et=js,rn=!1,T=new yu(T));e:for(;++qe<_n;){var Br=h[qe],Jr=U==null?Br:U(Br);if(Br=Ee||Br!==0?Br:0,rn&&Jr===Jr){for(var Bi=Nr;Bi--;)if(T[Bi]===Jr)continue e;Vn.push(Br)}else Et(T,Jr,Ee)||Vn.push(Br)}return Vn}var us=Ui(ll),Oc=Ui(tf,!0);function Vc(h,T){var U=!0;return us(h,function(Ee,qe,Et){return U=!!T(Ee,qe,Et),U}),U}function Vu(h,T,U){for(var Ee=-1,qe=h.length;++Ee<qe;){var Et=h[Ee],rn=T(Et);if(rn!=null&&(_n===p?rn===rn&&!Fl(rn):U(rn,_n)))var _n=rn,Vn=Et}return Vn}function ef(h,T,U,Ee){var qe=h.length;for(U=oo(U),U<0&&(U=-U>qe?0:qe+U),Ee=Ee===p||Ee>qe?qe:oo(Ee),Ee<0&&(Ee+=qe),Ee=U>Ee?0:Hh(Ee);U<Ee;)h[U++]=T;return h}function sc(h,T){var U=[];return us(h,function(Ee,qe,Et){T(Ee,qe,Et)&&U.push(Ee)}),U}function ns(h,T,U,Ee,qe){var Et=-1,rn=h.length;for(U||(U=Ur),qe||(qe=[]);++Et<rn;){var _n=h[Et];T>0&&U(_n)?T>1?ns(_n,T-1,U,Ee,qe):jo(qe,_n):Ee||(qe[qe.length]=_n)}return qe}var bu=yi(),Gc=yi(!0);function ll(h,T){return h&&bu(h,T,Eu)}function tf(h,T){return h&&Gc(h,T,Eu)}function uc(h,T){return ya(T,function(U){return vc(h[U])})}function ku(h,T){T=hu(T,h);for(var U=0,Ee=T.length;h!=null&&U<Ee;)h=h[xo(T[U++])];return U&&U==Ee?h:p}function nf(h,T,U){var Ee=T(h);return ro(h)?Ee:jo(Ee,U(h))}function Os(h){return h==null?h===p?Ne:ht:bs&&bs in _o(h)?Me(h):xi(h)}function hf(h,T){return h>T}function Pf(h,T){return h!=null&&po.call(h,T)}function If(h,T){return h!=null&&T in _o(h)}function df(h,T,U){return h>=Qo(T,U)&&h<Bo(T,U)}function Kl(h,T,U){for(var Ee=U?xa:Ba,qe=h[0].length,Et=h.length,rn=Et,_n=rr(Et),Vn=1/0,Nr=[];rn--;){var Br=h[rn];rn&&T&&(Br=sa(Br,gs(T))),Vn=Qo(Br.length,Vn),_n[rn]=!U&&(T||qe>=120&&Br.length>=120)?new yu(rn&&Br):p}Br=h[0];var Jr=-1,Bi=_n[0];e:for(;++Jr<qe&&Nr.length<Vn;){var la=Br[Jr],Fa=T?T(la):la;if(la=U||la!==0?la:0,!(Bi?js(Bi,Fa):Ee(Nr,Fa,U))){for(rn=Et;--rn;){var uo=_n[rn];if(!(uo?js(uo,Fa):Ee(h[rn],Fa,U)))continue e}Bi&&Bi.push(Fa),Nr.push(la)}}return Nr}function pf(h,T,U,Ee){return ll(h,function(qe,Et,rn){T(Ee,U(qe),Et,rn)}),Ee}function Pc(h,T,U){T=hu(T,h),h=Rr(h,T);var Ee=h==null?h:h[xo(yn(T))];return Ee==null?p:Ci(Ee,h,U)}function Hc(h){return Ls(h)&&Os(h)==$n}function bf(h){return Ls(h)&&Os(h)==Ve}function lc(h){return Ls(h)&&Os(h)==tn}function cc(h,T,U,Ee,qe){return h===T?!0:h==null||T==null||!Ls(h)&&!Ls(T)?h!==h&&T!==T:rf(h,T,U,Ee,cc,qe)}function rf(h,T,U,Ee,qe,Et){var rn=ro(h),_n=ro(T),Vn=rn?Ln:Dn(h),Nr=_n?Ln:Dn(T);Vn=Vn==$n?P:Vn,Nr=Nr==$n?P:Nr;var Br=Vn==P,Jr=Nr==P,Bi=Vn==Nr;if(Bi&&vf(h)){if(!vf(T))return!1;rn=!0,Br=!1}if(Bi&&!Br)return Et||(Et=new Fo),rn||Tf(h)?Xf(h,T,U,Ee,qe,Et):Oh(h,T,Vn,U,Ee,qe,Et);if(!(U&A)){var la=Br&&po.call(h,"__wrapped__"),Fa=Jr&&po.call(T,"__wrapped__");if(la||Fa){var uo=la?h.value():h,Da=Fa?T.value():T;return Et||(Et=new Fo),qe(uo,Da,U,Ee,Et)}}return Bi?(Et||(Et=new Fo),Ph(h,T,U,Ee,qe,Et)):!1}function af(h){return Ls(h)&&Dn(h)==Pe}function Ic(h,T,U,Ee){var qe=U.length,Et=qe,rn=!Ee;if(h==null)return!Et;for(h=_o(h);qe--;){var _n=U[qe];if(rn&&_n[2]?_n[1]!==h[_n[0]]:!(_n[0]in h))return!1}for(;++qe<Et;){_n=U[qe];var Vn=_n[0],Nr=h[Vn],Br=_n[1];if(rn&&_n[2]){if(Nr===p&&!(Vn in h))return!1}else{var Jr=new Fo;if(Ee)var Bi=Ee(Nr,Br,Vn,h,T,Jr);if(!(Bi===p?cc(Br,Nr,A|w,Ee,Jr):Bi))return!1}}return!0}function wl(h){if(!es(h)||Fr(h))return!1;var T=vc(h)?al:ar;return T.test(Ao(h))}function Wc(h){return Ls(h)&&Os(h)==oe}function of(h){return Ls(h)&&Dn(h)==ce}function fc(h){return Ls(h)&&$h(h.length)&&!!Vt[Os(h)]}function sf(h){return typeof h=="function"?h:h==null?Nu:typeof h=="object"?ro(h)?Hu(h[0],h[1]):Pl(h):V0(h)}function Ml(h){if(!Tr(h))return Cc(h);var T=[];for(var U in _o(h))po.call(h,U)&&U!="constructor"&&T.push(U);return T}function Gu(h){if(!es(h))return vr(h);var T=Tr(h),U=[];for(var Ee in h)Ee=="constructor"&&(T||!po.call(h,Ee))||U.push(Ee);return U}function Ol(h,T){return h<T}function Lu(h,T){var U=-1,Ee=Ju(h)?rr(h.length):[];return us(h,function(qe,Et,rn){Ee[++U]=T(qe,Et,rn)}),Ee}function Pl(h){var T=Lf(h);return T.length==1&&T[0][2]?oi(T[0][0],T[0][1]):function(U){return U===h||Ic(U,h,T)}}function Hu(h,T){return Lr(h)&&ai(T)?oi(xo(h),T):function(U){var Ee=Wh(U,h);return Ee===p&&Ee===T?Xh(U,h):cc(T,Ee,A|w)}}function R(h,T,U,Ee,qe){h!==T&&bu(T,function(Et,rn){if(qe||(qe=new Fo),es(Et))ut(h,T,rn,U,R,Ee,qe);else{var _n=Ee?Ee(ei(h,rn),Et,rn+"",h,T,qe):p;_n===p&&(_n=Et),Hl(h,rn,_n)}},cl)}function ut(h,T,U,Ee,qe,Et,rn){var _n=ei(h,U),Vn=ei(T,U),Nr=rn.get(Vn);if(Nr){Hl(h,U,Nr);return}var Br=Et?Et(_n,Vn,U+"",h,T,rn):p,Jr=Br===p;if(Jr){var Bi=ro(Vn),la=!Bi&&vf(Vn),Fa=!Bi&&!la&&Tf(Vn);Br=Vn,Bi||la||Fa?ro(_n)?Br=_n:eu(_n)?Br=En(_n):la?(Jr=!1,Br=I(Vn,!0)):Fa?(Jr=!1,Br=xe(Vn,!0)):Br=[]:Sh(Vn)||Zf(Vn)?(Br=_n,Zf(_n)?Br=wd(_n):(!es(_n)||vc(_n))&&(Br=Or(Vn))):Jr=!1}Jr&&(rn.set(Vn,Br),qe(Br,Vn,Ee,Et,rn),rn.delete(Vn)),Hl(h,U,Br)}function Te(h,T){var U=h.length;if(U)return T+=T<0?U:0,Gr(T,U)?h[T]:p}function fe(h,T,U){T.length?T=sa(T,function(Et){return ro(Et)?function(rn){return ku(rn,Et.length===1?Et[0]:Et)}:Et}):T=[Nu];var Ee=-1;T=sa(T,gs(Ma()));var qe=Lu(h,function(Et,rn,_n){var Vn=sa(T,function(Nr){return Nr(Et)});return{criteria:Vn,index:++Ee,value:Et}});return yc(qe,function(Et,rn){return Ft(Et,rn,U)})}function we(h,T){return je(h,T,function(U,Ee){return Xh(h,Ee)})}function je(h,T,U){for(var Ee=-1,qe=T.length,Et={};++Ee<qe;){var rn=T[Ee],_n=ku(h,rn);U(_n,rn)&&$i(Et,hu(rn,h),_n)}return Et}function _t(h){return function(T){return ku(T,h)}}function It(h,T,U,Ee){var qe=Ee?Su:_a,Et=-1,rn=T.length,_n=h;for(h===T&&(T=En(T)),U&&(_n=sa(h,gs(U)));++Et<rn;)for(var Vn=0,Nr=T[Et],Br=U?U(Nr):Nr;(Vn=qe(_n,Br,Vn,Ee))>-1;)_n!==h&&No.call(_n,Vn,1),No.call(h,Vn,1);return h}function Ct(h,T){for(var U=h?T.length:0,Ee=U-1;U--;){var qe=T[U];if(U==Ee||qe!==Et){var Et=qe;Gr(qe)?No.call(h,qe,1):ls(h,qe)}}return h}function Jt(h,T){return h+_l(wc()*(T-h+1))}function Wn(h,T,U,Ee){for(var qe=-1,Et=Bo(Vl((T-h)/(U||1)),0),rn=rr(Et);Et--;)rn[Ee?Et:++qe]=h,h+=U;return rn}function Mr(h,T){var U="";if(!h||T<1||T>he)return U;do T%2&&(U+=h),T=_l(T/2),T&&(h+=h);while(T);return U}function hr(h,T){return li(Qr(h,T,Nu),h+"")}function kr(h){return xs($f(h))}function ia(h,T){var U=$f(h);return aa(U,Ru(T,0,U.length))}function $i(h,T,U,Ee){if(!es(h))return h;T=hu(T,h);for(var qe=-1,Et=T.length,rn=Et-1,_n=h;_n!=null&&++qe<Et;){var Vn=xo(T[qe]),Nr=U;if(Vn==="__proto__"||Vn==="constructor"||Vn==="prototype")return h;if(qe!=rn){var Br=_n[Vn];Nr=Ee?Ee(Br,Vn,_n):p,Nr===p&&(Nr=es(Br)?Br:Gr(T[qe+1])?[]:{})}$u(_n,Vn,Nr),_n=_n[Vn]}return h}var zi=El?function(h,T){return El.set(h,T),h}:Nu,Ea=$l?function(h,T){return $l(h,"toString",{configurable:!0,enumerable:!1,value:Qh(T),writable:!0})}:Nu;function qa(h){return aa($f(h))}function ua(h,T,U){var Ee=-1,qe=h.length;T<0&&(T=-T>qe?0:qe+T),U=U>qe?qe:U,U<0&&(U+=qe),qe=T>U?0:U-T>>>0,T>>>=0;for(var Et=rr(qe);++Ee<qe;)Et[Ee]=h[Ee+T];return Et}function rs(h,T){var U;return us(h,function(Ee,qe,Et){return U=T(Ee,qe,Et),!U}),!!U}function La(h,T,U){var Ee=0,qe=h==null?Ee:h.length;if(typeof T=="number"&&T===T&&qe<=Gt){for(;Ee<qe;){var Et=Ee+qe>>>1,rn=h[Et];rn!==null&&!Fl(rn)&&(U?rn<=T:rn<T)?Ee=Et+1:qe=Et}return qe}return Po(h,T,Nu,U)}function Po(h,T,U,Ee){var qe=0,Et=h==null?0:h.length;if(Et===0)return 0;T=U(T);for(var rn=T!==T,_n=T===null,Vn=Fl(T),Nr=T===p;qe<Et;){var Br=_l((qe+Et)/2),Jr=U(h[Br]),Bi=Jr!==p,la=Jr===null,Fa=Jr===Jr,uo=Fl(Jr);if(rn)var Da=Ee||Fa;else Nr?Da=Fa&&(Ee||Bi):_n?Da=Fa&&Bi&&(Ee||!la):Vn?Da=Fa&&Bi&&!la&&(Ee||!uo):la||uo?Da=!1:Da=Ee?Jr<=T:Jr<T;Da?qe=Br+1:Et=Br}return Qo(Et,lt)}function Wo(h,T){for(var U=-1,Ee=h.length,qe=0,Et=[];++U<Ee;){var rn=h[U],_n=T?T(rn):rn;if(!U||!Xc(_n,Vn)){var Vn=_n;Et[qe++]=rn===0?0:rn}}return Et}function Xa(h){return typeof h=="number"?h:Fl(h)?Fe:+h}function Ra(h){if(typeof h=="string")return h;if(ro(h))return sa(h,Ra)+"";if(Fl(h))return Re?Re.call(h):"";var T=h+"";return T=="0"&&1/h==-K?"-0":T}function To(h,T,U){var Ee=-1,qe=Ba,Et=h.length,rn=!0,_n=[],Vn=_n;if(U)rn=!1,qe=xa;else if(Et>=d){var Nr=T?null:Ku(h);if(Nr)return ms(Nr);rn=!1,qe=js,Vn=new yu}else Vn=T?[]:_n;e:for(;++Ee<Et;){var Br=h[Ee],Jr=T?T(Br):Br;if(Br=U||Br!==0?Br:0,rn&&Jr===Jr){for(var Bi=Vn.length;Bi--;)if(Vn[Bi]===Jr)continue e;T&&Vn.push(Jr),_n.push(Br)}else qe(Vn,Jr,U)||(Vn!==_n&&Vn.push(Jr),_n.push(Br))}return _n}function ls(h,T){return T=hu(T,h),h=Rr(h,T),h==null||delete h[xo(yn(T))]}function is(h,T,U,Ee){return $i(h,T,U(ku(h,T)),Ee)}function Ps(h,T,U,Ee){for(var qe=h.length,Et=Ee?qe:-1;(Ee?Et--:++Et<qe)&&T(h[Et],Et,h););return U?ua(h,Ee?0:Et,Ee?Et+1:qe):ua(h,Ee?Et+1:0,Ee?qe:Et)}function Il(h,T){var U=h;return U instanceof Zn&&(U=U.value()),vs(T,function(Ee,qe){return qe.func.apply(qe.thisArg,jo([Ee],qe.args))},U)}function Qs(h,T,U){var Ee=h.length;if(Ee<2)return Ee?To(h[0]):[];for(var qe=-1,Et=rr(Ee);++qe<Ee;)for(var rn=h[qe],_n=-1;++_n<Ee;)_n!=qe&&(Et[qe]=ju(Et[qe]||rn,h[_n],T,U));return To(ns(Et,1),T,U)}function Es(h,T,U){for(var Ee=-1,qe=h.length,Et=T.length,rn={};++Ee<qe;){var _n=Ee<Et?T[Ee]:p;U(rn,h[Ee],_n)}return rn}function Wu(h){return eu(h)?h:[]}function Fu(h){return typeof h=="function"?h:Nu}function hu(h,T){return ro(h)?h:Lr(h,T)?[h]:$a(oa(h))}var ql=hr;function Xu(h,T,U){var Ee=h.length;return U=U===p?Ee:U,!T&&U>=Ee?h:ua(h,T,U)}var Rl=jl||function(h){return N.clearTimeout(h)};function I(h,T){if(T)return h.slice();var U=h.length,Ee=Lo?Lo(U):new h.constructor(U);return h.copy(Ee),Ee}function z(h){var T=new h.constructor(h.byteLength);return new Gs(T).set(new Gs(h)),T}function $(h,T){var U=T?z(h.buffer):h.buffer;return new h.constructor(U,h.byteOffset,h.byteLength)}function ee(h){var T=new h.constructor(h.source,vn.exec(h));return T.lastIndex=h.lastIndex,T}function ge(h){return Q?_o(Q.call(h)):{}}function xe(h,T){var U=T?z(h.buffer):h.buffer;return new h.constructor(U,h.byteOffset,h.length)}function gt(h,T){if(h!==T){var U=h!==p,Ee=h===null,qe=h===h,Et=Fl(h),rn=T!==p,_n=T===null,Vn=T===T,Nr=Fl(T);if(!_n&&!Nr&&!Et&&h>T||Et&&rn&&Vn&&!_n&&!Nr||Ee&&rn&&Vn||!U&&Vn||!qe)return 1;if(!Ee&&!Et&&!Nr&&h<T||Nr&&U&&qe&&!Ee&&!Et||_n&&U&&qe||!rn&&qe||!Vn)return-1}return 0}function Ft(h,T,U){for(var Ee=-1,qe=h.criteria,Et=T.criteria,rn=qe.length,_n=U.length;++Ee<rn;){var Vn=gt(qe[Ee],Et[Ee]);if(Vn){if(Ee>=_n)return Vn;var Nr=U[Ee];return Vn*(Nr=="desc"?-1:1)}}return h.index-T.index}function Sn(h,T,U,Ee){for(var qe=-1,Et=h.length,rn=U.length,_n=-1,Vn=T.length,Nr=Bo(Et-rn,0),Br=rr(Vn+Nr),Jr=!Ee;++_n<Vn;)Br[_n]=T[_n];for(;++qe<rn;)(Jr||qe<Et)&&(Br[U[qe]]=h[qe]);for(;Nr--;)Br[_n++]=h[qe++];return Br}function Mt(h,T,U,Ee){for(var qe=-1,Et=h.length,rn=-1,_n=U.length,Vn=-1,Nr=T.length,Br=Bo(Et-_n,0),Jr=rr(Br+Nr),Bi=!Ee;++qe<Br;)Jr[qe]=h[qe];for(var la=qe;++Vn<Nr;)Jr[la+Vn]=T[Vn];for(;++rn<_n;)(Bi||qe<Et)&&(Jr[la+U[rn]]=h[qe++]);return Jr}function En(h,T){var U=-1,Ee=h.length;for(T||(T=rr(Ee));++U<Ee;)T[U]=h[U];return T}function lr(h,T,U,Ee){var qe=!U;U||(U={});for(var Et=-1,rn=T.length;++Et<rn;){var _n=T[Et],Vn=Ee?Ee(U[_n],h[_n],_n,U,h):p;Vn===p&&(Vn=h[_n]),qe?_u(U,_n,Vn):$u(U,_n,Vn)}return U}function Di(h,T){return lr(h,ft(h),T)}function Zi(h,T){return lr(h,Zt(h),T)}function Ri(h,T){return function(U,Ee){var qe=ro(U)?ta:Jc,Et=T?T():{};return qe(U,h,Ma(Ee,2),Et)}}function ki(h){return hr(function(T,U){var Ee=-1,qe=U.length,Et=qe>1?U[qe-1]:p,rn=qe>2?U[2]:p;for(Et=h.length>3&&typeof Et=="function"?(qe--,Et):p,rn&&xr(U[0],U[1],rn)&&(Et=qe<3?p:Et,qe=1),T=_o(T);++Ee<qe;){var _n=U[Ee];_n&&h(T,_n,Ee,Et)}return T})}function Ui(h,T){return function(U,Ee){if(U==null)return U;if(!Ju(U))return h(U,Ee);for(var qe=U.length,Et=T?qe:-1,rn=_o(U);(T?Et--:++Et<qe)&&Ee(rn[Et],Et,rn)!==!1;);return U}}function yi(h){return function(T,U,Ee){for(var qe=-1,Et=_o(T),rn=Ee(T),_n=rn.length;_n--;){var Vn=rn[h?_n:++qe];if(U(Et[Vn],Vn,Et)===!1)break}return T}}function na(h,T,U){var Ee=T&D,qe=Xo(h);function Et(){var rn=this&&this!==N&&this instanceof Et?qe:h;return rn.apply(Ee?U:this,arguments)}return Et}function Oa(h){return function(T){T=oa(T);var U=iu(T)?ys(T):p,Ee=U?U[0]:T.charAt(0),qe=U?Xu(U,1).join(""):T.slice(1);return Ee[h]()+qe}}function za(h){return function(T){return vs(Vf(Nd(T).replace(er,"")),h,"")}}function Xo(h){return function(){var T=arguments;switch(T.length){case 0:return new h;case 1:return new h(T[0]);case 2:return new h(T[0],T[1]);case 3:return new h(T[0],T[1],T[2]);case 4:return new h(T[0],T[1],T[2],T[3]);case 5:return new h(T[0],T[1],T[2],T[3],T[4]);case 6:return new h(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new h(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var U=At(h.prototype),Ee=h.apply(U,T);return es(Ee)?Ee:U}}function cs(h,T,U){var Ee=Xo(h);function qe(){for(var Et=arguments.length,rn=rr(Et),_n=Et,Vn=uf(qe);_n--;)rn[_n]=arguments[_n];var Nr=Et<3&&rn[0]!==Vn&&rn[Et-1]!==Vn?[]:Cu(rn,Vn);if(Et-=Nr.length,Et<U)return Yu(h,T,Pa,qe.placeholder,p,rn,Nr,p,p,U-Et);var Br=this&&this!==N&&this instanceof qe?Ee:h;return Ci(Br,this,rn)}return qe}function Bs(h){return function(T,U,Ee){var qe=_o(T);if(!Ju(T)){var Et=Ma(U,3);T=Eu(T),U=function(_n){return Et(qe[_n],_n,qe)}}var rn=h(T,U,Ee);return rn>-1?qe[Et?T[rn]:rn]:p}}function So(h){return Ll(function(T){var U=T.length,Ee=U,qe=Ut.prototype.thru;for(h&&T.reverse();Ee--;){var Et=T[Ee];if(typeof Et!="function")throw new Ds(x);if(qe&&!rn&&xf(Et)=="wrapper")var rn=new Ut([],!0)}for(Ee=rn?Ee:U;++Ee<U;){Et=T[Ee];var _n=xf(Et),Vn=_n=="wrapper"?Rf(Et):p;Vn&&tr(Vn[0])&&Vn[1]==(H|L|k|ue)&&!Vn[4].length&&Vn[9]==1?rn=rn[xf(Vn[0])].apply(rn,Vn[3]):rn=Et.length==1&&tr(Et)?rn[_n]():rn.thru(Et)}return function(){var Nr=arguments,Br=Nr[0];if(rn&&Nr.length==1&&ro(Br))return rn.plant(Br).value();for(var Jr=0,Bi=U?T[Jr].apply(this,Nr):Br;++Jr<U;)Bi=T[Jr].call(this,Bi);return Bi}})}function Pa(h,T,U,Ee,qe,Et,rn,_n,Vn,Nr){var Br=T&H,Jr=T&D,Bi=T&F,la=T&(L|W),Fa=T&ve,uo=Bi?p:Xo(h);function Da(){for(var Eo=arguments.length,wo=rr(Eo),tc=Eo;tc--;)wo[tc]=arguments[tc];if(la)var fl=uf(Da),nc=rc(wo,fl);if(Ee&&(wo=Sn(wo,Ee,qe,la)),Et&&(wo=Mt(wo,Et,rn,la)),Eo-=nc,la&&Eo<Nr){var Ys=Cu(wo,fl);return Yu(h,T,Pa,Da.placeholder,U,wo,Ys,_n,Vn,Nr-Eo)}var kc=Jr?U:this,cf=Bi?kc[h]:h;return Eo=wo.length,_n?wo=ri(wo,_n):Fa&&Eo>1&&wo.reverse(),Br&&Vn<Eo&&(wo.length=Vn),this&&this!==N&&this instanceof Da&&(cf=uo||Xo(cf)),cf.apply(kc,wo)}return Da}function co(h,T){return function(U,Ee){return pf(U,h,T(Ee),{})}}function Do(h,T){return function(U,Ee){var qe;if(U===p&&Ee===p)return T;if(U!==p&&(qe=U),Ee!==p){if(qe===p)return Ee;typeof U=="string"||typeof Ee=="string"?(U=Ra(U),Ee=Ra(Ee)):(U=Xa(U),Ee=Xa(Ee)),qe=h(U,Ee)}return qe}}function Ws(h){return Ll(function(T){return T=sa(T,gs(Ma())),hr(function(U){var Ee=this;return h(T,function(qe){return Ci(qe,Ee,U)})})})}function Is(h,T){T=T===p?" ":Ra(T);var U=T.length;if(U<2)return U?Mr(T,h):T;var Ee=Mr(T,Vl(h/wu(T)));return iu(T)?Xu(ys(Ee),0,h).join(""):Ee.slice(0,h)}function Xs(h,T,U,Ee){var qe=T&D,Et=Xo(h);function rn(){for(var _n=-1,Vn=arguments.length,Nr=-1,Br=Ee.length,Jr=rr(Br+Vn),Bi=this&&this!==N&&this instanceof rn?Et:h;++Nr<Br;)Jr[Nr]=Ee[Nr];for(;Vn--;)Jr[Nr++]=arguments[++_n];return Ci(Bi,qe?U:this,Jr)}return rn}function kl(h){return function(T,U,Ee){return Ee&&typeof Ee!="number"&&xr(T,U,Ee)&&(U=Ee=p),T=Jl(T),U===p?(U=T,T=0):U=Jl(U),Ee=Ee===p?T<U?1:-1:Jl(Ee),Wn(T,U,Ee,h)}}function Jo(h){return function(T,U){return typeof T=="string"&&typeof U=="string"||(T=ts(T),U=ts(U)),h(T,U)}}function Yu(h,T,U,Ee,qe,Et,rn,_n,Vn,Nr){var Br=T&L,Jr=Br?rn:p,Bi=Br?p:rn,la=Br?Et:p,Fa=Br?p:Et;T|=Br?k:de,T&=~(Br?de:k),T&Z||(T&=~(D|F));var uo=[h,T,qe,la,Jr,Fa,Bi,_n,Vn,Nr],Da=U.apply(p,uo);return tr(h)&&ga(Da,uo),Da.placeholder=Ee,di(Da,h,T)}function as(h){var T=Vo[h];return function(U,Ee){if(U=ts(U),Ee=Ee==null?0:Qo(oo(Ee),292),Ee&&ac(U)){var qe=(oa(U)+"e").split("e"),Et=T(qe[0]+"e"+(+qe[1]+Ee));return qe=(oa(Et)+"e").split("e"),+(qe[0]+"e"+(+qe[1]-Ee))}return T(U)}}var Ku=Zo&&1/ms(new Zo([,-0]))[1]==K?function(h){return new Zo(h)}:Gf;function Wf(h){return function(T){var U=Dn(T);return U==Pe?Bl(T):U==ce?Zl(T):pl(T,h(T))}}function Rc(h,T,U,Ee,qe,Et,rn,_n){var Vn=T&F;if(!Vn&&typeof h!="function")throw new Ds(x);var Nr=Ee?Ee.length:0;if(Nr||(T&=~(k|de),Ee=qe=p),rn=rn===p?rn:Bo(oo(rn),0),_n=_n===p?_n:oo(_n),Nr-=qe?qe.length:0,T&de){var Br=Ee,Jr=qe;Ee=qe=p}var Bi=Vn?p:Rf(h),la=[h,T,U,Ee,qe,Br,Jr,Et,rn,_n];if(Bi&&yr(la,Bi),h=la[0],T=la[1],U=la[2],Ee=la[3],qe=la[4],_n=la[9]=la[9]===p?Vn?0:h.length:Bo(la[9]-Nr,0),!_n&&T&(L|W)&&(T&=~(L|W)),!T||T==D)var Fa=na(h,T,U);else T==L||T==W?Fa=cs(h,T,_n):(T==k||T==(D|k))&&!qe.length?Fa=Xs(h,T,U,Ee):Fa=Pa.apply(p,la);var uo=Bi?zi:ga;return di(uo(Fa,la),h,T)}function lh(h,T,U,Ee){return h===p||Xc(h,Mu[U])&&!po.call(Ee,U)?T:h}function ch(h,T,U,Ee,qe,Et){return es(h)&&es(T)&&(Et.set(T,h),R(h,T,p,ch,Et),Et.delete(T)),h}function Mh(h){return Sh(h)?p:h}function Xf(h,T,U,Ee,qe,Et){var rn=U&A,_n=h.length,Vn=T.length;if(_n!=Vn&&!(rn&&Vn>_n))return!1;var Nr=Et.get(h),Br=Et.get(T);if(Nr&&Br)return Nr==T&&Br==h;var Jr=-1,Bi=!0,la=U&w?new yu:p;for(Et.set(h,T),Et.set(T,h);++Jr<_n;){var Fa=h[Jr],uo=T[Jr];if(Ee)var Da=rn?Ee(uo,Fa,Jr,T,h,Et):Ee(Fa,uo,Jr,h,T,Et);if(Da!==p){if(Da)continue;Bi=!1;break}if(la){if(!Fs(T,function(Eo,wo){if(!js(la,wo)&&(Fa===Eo||qe(Fa,Eo,U,Ee,Et)))return la.push(wo)})){Bi=!1;break}}else if(!(Fa===uo||qe(Fa,uo,U,Ee,Et))){Bi=!1;break}}return Et.delete(h),Et.delete(T),Bi}function Oh(h,T,U,Ee,qe,Et,rn){switch(U){case rt:if(h.byteLength!=T.byteLength||h.byteOffset!=T.byteOffset)return!1;h=h.buffer,T=T.buffer;case Ve:return!(h.byteLength!=T.byteLength||!Et(new Gs(h),new Gs(T)));case xt:case tn:case ze:return Xc(+h,+T);case We:return h.name==T.name&&h.message==T.message;case oe:case ye:return h==T+"";case Pe:var _n=Bl;case ce:var Vn=Ee&A;if(_n||(_n=ms),h.size!=T.size&&!Vn)return!1;var Nr=rn.get(h);if(Nr)return Nr==T;Ee|=w,rn.set(h,T);var Br=Xf(_n(h),_n(T),Ee,qe,Et,rn);return rn.delete(h),Br;case Y:if(Q)return Q.call(h)==Q.call(T)}return!1}function Ph(h,T,U,Ee,qe,Et){var rn=U&A,_n=Yf(h),Vn=_n.length,Nr=Yf(T),Br=Nr.length;if(Vn!=Br&&!rn)return!1;for(var Jr=Vn;Jr--;){var Bi=_n[Jr];if(!(rn?Bi in T:po.call(T,Bi)))return!1}var la=Et.get(h),Fa=Et.get(T);if(la&&Fa)return la==T&&Fa==h;var uo=!0;Et.set(h,T),Et.set(T,h);for(var Da=rn;++Jr<Vn;){Bi=_n[Jr];var Eo=h[Bi],wo=T[Bi];if(Ee)var tc=rn?Ee(wo,Eo,Bi,T,h,Et):Ee(Eo,wo,Bi,h,T,Et);if(!(tc===p?Eo===wo||qe(Eo,wo,U,Ee,Et):tc)){uo=!1;break}Da||(Da=Bi=="constructor")}if(uo&&!Da){var fl=h.constructor,nc=T.constructor;fl!=nc&&"constructor"in h&&"constructor"in T&&!(typeof fl=="function"&&fl instanceof fl&&typeof nc=="function"&&nc instanceof nc)&&(uo=!1)}return Et.delete(h),Et.delete(T),uo}function Ll(h){return li(Qr(h,p,Co),h+"")}function Yf(h){return nf(h,Eu,ft)}function Kf(h){return nf(h,cl,Zt)}var Rf=El?function(h){return El.get(h)}:Gf;function xf(h){for(var T=h.name+"",U=lu[T],Ee=po.call(lu,T)?U.length:0;Ee--;){var qe=U[Ee],Et=qe.func;if(Et==null||Et==h)return qe.name}return T}function uf(h){var T=po.call(se,"placeholder")?se:h;return T.placeholder}function Ma(){var h=se.iteratee||Cf;return h=h===Cf?sf:h,arguments.length?h(arguments[0],arguments[1]):h}function kf(h,T){var U=h.__data__;return Tn(T)?U[typeof T=="string"?"string":"hash"]:U.map}function Lf(h){for(var T=Eu(h),U=T.length;U--;){var Ee=T[U],qe=h[Ee];T[U]=[Ee,qe,ai(qe)]}return T}function lf(h,T){var U=Kc(h,T);return wl(U)?U:p}function Me(h){var T=po.call(h,bs),U=h[bs];try{h[bs]=p;var Ee=!0}catch(Et){}var qe=zu.call(h);return Ee&&(T?h[bs]=U:delete h[bs]),qe}var ft=bl?function(h){return h==null?[]:(h=_o(h),ya(bl(h),function(T){return ou.call(h,T)}))}:Ah,Zt=bl?function(h){for(var T=[];h;)jo(T,ft(h)),h=gu(h);return T}:Ah,Dn=Os;(su&&Dn(new su(new ArrayBuffer(1)))!=rt||no&&Dn(new no)!=Pe||sl&&Dn(sl.resolve())!=ne||Zo&&Dn(new Zo)!=ce||uu&&Dn(new uu)!=Qe)&&(Dn=function(h){var T=Os(h),U=T==P?h.constructor:p,Ee=U?Ao(U):"";if(Ee)switch(Ee){case Ns:return rt;case Gl:return Pe;case le:return ne;case X:return ce;case O:return Qe}return T});function mr(h,T,U){for(var Ee=-1,qe=U.length;++Ee<qe;){var Et=U[Ee],rn=Et.size;switch(Et.type){case"drop":h+=rn;break;case"dropRight":T-=rn;break;case"take":T=Qo(T,h+rn);break;case"takeRight":h=Bo(h,T-rn);break}}return{start:h,end:T}}function Xn(h){var T=h.match(si);return T?T[1].split(it):[]}function ir(h,T,U){T=hu(T,h);for(var Ee=-1,qe=T.length,Et=!1;++Ee<qe;){var rn=xo(T[Ee]);if(!(Et=h!=null&&U(h,rn)))break;h=h[rn]}return Et||++Ee!=qe?Et:(qe=h==null?0:h.length,!!qe&&$h(qe)&&Gr(rn,qe)&&(ro(h)||Zf(h)))}function br(h){var T=h.length,U=new h.constructor(T);return T&&typeof h[0]=="string"&&po.call(h,"index")&&(U.index=h.index,U.input=h.input),U}function Or(h){return typeof h.constructor=="function"&&!Tr(h)?At(gu(h)):{}}function Dr(h,T,U){var Ee=h.constructor;switch(T){case Ve:return z(h);case xt:case tn:return new Ee(+h);case rt:return $(h,U);case yt:case Tt:case Ht:case en:case wt:case Mn:case kn:case jn:case mn:return xe(h,U);case Pe:return new Ee;case ze:case ye:return new Ee(h);case oe:return ee(h);case ce:return new Ee;case Y:return ge(h)}}function jr(h,T){var U=T.length;if(!U)return h;var Ee=U-1;return T[Ee]=(U>1?"& ":"")+T[Ee],T=T.join(U>2?", ":" "),h.replace(Ia,`{
/* [wrapped with `+T+`] */
`)}function Ur(h){return ro(h)||Zf(h)||!!(qo&&h&&h[qo])}function Gr(h,T){var U=typeof h;return T=T==null?he:T,!!T&&(U=="number"||U!="symbol"&&Xr.test(h))&&h>-1&&h%1==0&&h<T}function xr(h,T,U){if(!es(U))return!1;var Ee=typeof T;return(Ee=="number"?Ju(U)&&Gr(T,U.length):Ee=="string"&&T in U)?Xc(U[T],h):!1}function Lr(h,T){if(ro(h))return!1;var U=typeof h;return U=="number"||U=="symbol"||U=="boolean"||h==null||Fl(h)?!0:pt.test(h)||!Gn.test(h)||T!=null&&h in _o(T)}function Tn(h){var T=typeof h;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?h!=="__proto__":h===null}function tr(h){var T=xf(h),U=se[T];if(typeof U!="function"||!(T in Zn.prototype))return!1;if(h===U)return!0;var Ee=Rf(U);return!!Ee&&h===Ee[0]}function Fr(h){return!!Zc&&Zc in h}var pi=ml?vc:Jh;function Tr(h){var T=h&&h.constructor,U=typeof T=="function"&&T.prototype||Mu;return h===U}function ai(h){return h===h&&!es(h)}function oi(h,T){return function(U){return U==null?!1:U[h]===T&&(T!==p||h in _o(U))}}function Vi(h){var T=Jf(h,function(Ee){return U.size===t&&U.clear(),Ee}),U=T.cache;return T}function yr(h,T){var U=h[1],Ee=T[1],qe=U|Ee,Et=qe<(D|F|H),rn=Ee==H&&U==L||Ee==H&&U==ue&&h[7].length<=T[8]||Ee==(H|ue)&&T[7].length<=T[8]&&U==L;if(!(Et||rn))return h;Ee&D&&(h[2]=T[2],qe|=U&D?0:Z);var _n=T[3];if(_n){var Vn=h[3];h[3]=Vn?Sn(Vn,_n,T[4]):_n,h[4]=Vn?Cu(h[3],e):T[4]}return _n=T[5],_n&&(Vn=h[5],h[5]=Vn?Mt(Vn,_n,T[6]):_n,h[6]=Vn?Cu(h[5],e):T[6]),_n=T[7],_n&&(h[7]=_n),Ee&H&&(h[8]=h[8]==null?T[8]:Qo(h[8],T[8])),h[9]==null&&(h[9]=T[9]),h[0]=T[0],h[1]=qe,h}function vr(h){var T=[];if(h!=null)for(var U in _o(h))T.push(U);return T}function xi(h){return zu.call(h)}function Qr(h,T,U){return T=Bo(T===p?h.length-1:T,0),function(){for(var Ee=arguments,qe=-1,Et=Bo(Ee.length-T,0),rn=rr(Et);++qe<Et;)rn[qe]=Ee[T+qe];qe=-1;for(var _n=rr(T+1);++qe<T;)_n[qe]=Ee[qe];return _n[T]=U(rn),Ci(h,this,_n)}}function Rr(h,T){return T.length<2?h:ku(h,ua(T,0,-1))}function ri(h,T){for(var U=h.length,Ee=Qo(T.length,U),qe=En(h);Ee--;){var Et=T[Ee];h[Ee]=Gr(Et,U)?qe[Et]:p}return h}function ei(h,T){if(!(T==="constructor"&&typeof h[T]=="function")&&T!="__proto__")return h[T]}var ga=Yi(zi),Ki=ff||function(h,T){return N.setTimeout(h,T)},li=Yi(Ea);function di(h,T,U){var Ee=T+"";return li(h,jr(Ee,ja(Xn(Ee),U)))}function Yi(h){var T=0,U=0;return function(){var Ee=oc(),qe=G-(Ee-U);if(U=Ee,qe>0){if(++T>=be)return arguments[0]}else T=0;return h.apply(p,arguments)}}function aa(h,T){var U=-1,Ee=h.length,qe=Ee-1;for(T=T===p?Ee:T;++U<T;){var Et=Jt(U,qe),rn=h[Et];h[Et]=h[U],h[U]=rn}return h.length=T,h}var $a=Vi(function(h){var T=[];return h.charCodeAt(0)===46&&T.push(""),h.replace(Ha,function(U,Ee,qe,Et){T.push(qe?Et.replace(at,"$1"):Ee||U)}),T});function xo(h){if(typeof h=="string"||Fl(h))return h;var T=h+"";return T=="0"&&1/h==-K?"-0":T}function Ao(h){if(h!=null){try{return il.call(h)}catch(T){}try{return h+""}catch(T){}}return""}function ja(h,T){return Ni(pn,function(U){var Ee="_."+U[0];T&U[1]&&!Ba(h,Ee)&&h.push(Ee)}),h.sort()}function Zs(h){if(h instanceof Zn)return h.clone();var T=new Ut(h.__wrapped__,h.__chain__);return T.__actions__=En(h.__actions__),T.__index__=h.__index__,T.__values__=h.__values__,T}function Yo(h,T,U){(U?xr(h,T,U):T===p)?T=1:T=Bo(oo(T),0);var Ee=h==null?0:h.length;if(!Ee||T<1)return[];for(var qe=0,Et=0,rn=rr(Vl(Ee/T));qe<Ee;)rn[Et++]=ua(h,qe,qe+=T);return rn}function Rs(h){for(var T=-1,U=h==null?0:h.length,Ee=0,qe=[];++T<U;){var Et=h[T];Et&&(qe[Ee++]=Et)}return qe}function fs(){var h=arguments.length;if(!h)return[];for(var T=rr(h-1),U=arguments[0],Ee=h;Ee--;)T[Ee-1]=arguments[Ee];return jo(ro(U)?En(U):[U],ns(T,1))}var ks=hr(function(h,T){return eu(h)?ju(h,ns(T,1,eu,!0)):[]}),Us=hr(function(h,T){var U=yn(T);return eu(U)&&(U=p),eu(h)?ju(h,ns(T,1,eu,!0),Ma(U,2)):[]}),Js=hr(function(h,T){var U=yn(T);return eu(U)&&(U=p),eu(h)?ju(h,ns(T,1,eu,!0),p,U):[]});function Ss(h,T,U){var Ee=h==null?0:h.length;return Ee?(T=U||T===p?1:oo(T),ua(h,T<0?0:T,Ee)):[]}function qi(h,T,U){var Ee=h==null?0:h.length;return Ee?(T=U||T===p?1:oo(T),T=Ee-T,ua(h,0,T<0?0:T)):[]}function Ts(h,T){return h&&h.length?Ps(h,Ma(T,3),!0,!0):[]}function vo(h,T){return h&&h.length?Ps(h,Ma(T,3),!0):[]}function As(h,T,U,Ee){var qe=h==null?0:h.length;return qe?(U&&typeof U!="number"&&xr(h,T,U)&&(U=0,Ee=qe),ef(h,T,U,Ee)):[]}function ra(h,T,U){var Ee=h==null?0:h.length;if(!Ee)return-1;var qe=U==null?0:oo(U);return qe<0&&(qe=Bo(Ee+qe,0)),eo(h,Ma(T,3),qe)}function Za(h,T,U){var Ee=h==null?0:h.length;if(!Ee)return-1;var qe=Ee-1;return U!==p&&(qe=oo(U),qe=U<0?Bo(Ee+qe,0):Qo(qe,Ee-1)),eo(h,Ma(T,3),qe,!0)}function Co(h){var T=h==null?0:h.length;return T?ns(h,1):[]}function ds(h){var T=h==null?0:h.length;return T?ns(h,K):[]}function hc(h,T){var U=h==null?0:h.length;return U?(T=T===p?1:oo(T),ns(h,T)):[]}function kt(h){for(var T=-1,U=h==null?0:h.length,Ee={};++T<U;){var qe=h[T];Ee[qe[0]]=qe[1]}return Ee}function Yn(h){return h&&h.length?h[0]:p}function Nn(h,T,U){var Ee=h==null?0:h.length;if(!Ee)return-1;var qe=U==null?0:oo(U);return qe<0&&(qe=Bo(Ee+qe,0)),_a(h,T,qe)}function _i(h){var T=h==null?0:h.length;return T?ua(h,0,-1):[]}var Va=hr(function(h){var T=sa(h,Wu);return T.length&&T[0]===h[0]?Kl(T):[]}),St=hr(function(h){var T=yn(h),U=sa(h,Wu);return T===yn(U)?T=p:U.pop(),U.length&&U[0]===h[0]?Kl(U,Ma(T,2)):[]}),ot=hr(function(h){var T=yn(h),U=sa(h,Wu);return T=typeof T=="function"?T:p,T&&U.pop(),U.length&&U[0]===h[0]?Kl(U,p,T):[]});function Wt(h,T){return h==null?"":Ac.call(h,T)}function yn(h){var T=h==null?0:h.length;return T?h[T-1]:p}function qn(h,T,U){var Ee=h==null?0:h.length;if(!Ee)return-1;var qe=Ee;return U!==p&&(qe=oo(U),qe=qe<0?Bo(Ee+qe,0):Qo(qe,Ee-1)),T===T?Vs(h,T,qe):eo(h,ko,qe,!0)}function sn(h,T){return h&&h.length?Te(h,oo(T)):p}var an=hr(dn);function dn(h,T){return h&&h.length&&T&&T.length?It(h,T):h}function bt(h,T,U){return h&&h.length&&T&&T.length?It(h,T,Ma(U,2)):h}function Qt(h,T,U){return h&&h.length&&T&&T.length?It(h,T,p,U):h}var Pt=Ll(function(h,T){var U=h==null?0:h.length,Ee=Al(h,T);return Ct(h,sa(T,function(qe){return Gr(qe,U)?+qe:qe}).sort(gt)),Ee});function Cn(h,T){var U=[];if(!(h&&h.length))return U;var Ee=-1,qe=[],Et=h.length;for(T=Ma(T,3);++Ee<Et;){var rn=h[Ee];T(rn,Ee,h)&&(U.push(rn),qe.push(Ee))}return Ct(h,qe),U}function Fn(h){return h==null?h:Ou.call(h)}function Ar(h,T,U){var Ee=h==null?0:h.length;return Ee?(U&&typeof U!="number"&&xr(h,T,U)?(T=0,U=Ee):(T=T==null?0:oo(T),U=U===p?Ee:oo(U)),ua(h,T,U)):[]}function Yr(h,T){return La(h,T)}function Kr(h,T,U){return Po(h,T,Ma(U,2))}function ci(h,T){var U=h==null?0:h.length;if(U){var Ee=La(h,T);if(Ee<U&&Xc(h[Ee],T))return Ee}return-1}function Wr(h,T){return La(h,T,!0)}function Pi(h,T,U){return Po(h,T,Ma(U,2),!0)}function vi(h,T){var U=h==null?0:h.length;if(U){var Ee=La(h,T,!0)-1;if(Xc(h[Ee],T))return Ee}return-1}function Mi(h){return h&&h.length?Wo(h):[]}function Si(h,T){return h&&h.length?Wo(h,Ma(T,2)):[]}function Ii(h){var T=h==null?0:h.length;return T?ua(h,1,T):[]}function Qi(h,T,U){return h&&h.length?(T=U||T===p?1:oo(T),ua(h,0,T<0?0:T)):[]}function Uo(h,T,U){var Ee=h==null?0:h.length;return Ee?(T=U||T===p?1:oo(T),T=Ee-T,ua(h,T<0?0:T,Ee)):[]}function zs(h,T){return h&&h.length?Ps(h,Ma(T,3),!1,!0):[]}function hs(h,T){return h&&h.length?Ps(h,Ma(T,3)):[]}var Ql=hr(function(h){return To(ns(h,1,eu,!0))}),dc=hr(function(h){var T=yn(h);return eu(T)&&(T=p),To(ns(h,1,eu,!0),Ma(T,2))}),xu=hr(function(h){var T=yn(h);return T=typeof T=="function"?T:p,To(ns(h,1,eu,!0),p,T)});function pc(h){return h&&h.length?To(h):[]}function Du(h,T){return h&&h.length?To(h,Ma(T,2)):[]}function Ff(h,T){return T=typeof T=="function"?T:p,h&&h.length?To(h,p,T):[]}function qu(h){if(!(h&&h.length))return[];var T=0;return h=ya(h,function(U){if(eu(U))return T=Bo(U.length,T),!0}),Tu(T,function(U){return sa(h,Zu(U))})}function qf(h,T){if(!(h&&h.length))return[];var U=qu(h);return T==null?U:sa(U,function(Ee){return Ci(T,p,Ee)})}var fh=hr(function(h,T){return eu(h)?ju(h,T):[]}),Ih=hr(function(h){return Qs(ya(h,eu))}),hp=hr(function(h){var T=yn(h);return eu(T)&&(T=p),Qs(ya(h,eu),Ma(T,2))}),hh=hr(function(h){var T=yn(h);return T=typeof T=="function"?T:p,Qs(ya(h,eu),p,T)}),Df=hr(qu);function dp(h,T){return Es(h||[],T||[],$u)}function pp(h,T){return Es(h||[],T||[],$i)}var vp=hr(function(h){var T=h.length,U=T>1?h[T-1]:p;return U=typeof U=="function"?(h.pop(),U):p,qf(h,U)});function id(h){var T=se(h);return T.__chain__=!0,T}function ad(h,T){return T(h),h}function dh(h,T){return T(h)}var od=Ll(function(h){var T=h.length,U=T?h[0]:0,Ee=this.__wrapped__,qe=function(Et){return Al(Et,h)};return T>1||this.__actions__.length||!(Ee instanceof Zn)||!Gr(U)?this.thru(qe):(Ee=Ee.slice(U,+U+(T?1:0)),Ee.__actions__.push({func:dh,args:[qe],thisArg:p}),new Ut(Ee,this.__chain__).thru(function(Et){return T&&!Et.length&&Et.push(p),Et}))});function sd(){return id(this)}function ud(){return new Ut(this.value(),this.__chain__)}function ld(){this.__values__===p&&(this.__values__=Th(this.value()));var h=this.__index__>=this.__values__.length,T=h?p:this.__values__[this.__index__++];return{done:h,value:T}}function cd(){return this}function gp(h){for(var T,U=this;U instanceof Rt;){var Ee=Zs(U);Ee.__index__=0,Ee.__values__=p,T?qe.__wrapped__=Ee:T=Ee;var qe=Ee;U=U.__wrapped__}return qe.__wrapped__=h,T}function ph(){var h=this.__wrapped__;if(h instanceof Zn){var T=h;return this.__actions__.length&&(T=new Zn(this)),T=T.reverse(),T.__actions__.push({func:dh,args:[Fn],thisArg:p}),new Ut(T,this.__chain__)}return this.thru(Fn)}function Rh(){return Il(this.__wrapped__,this.__actions__)}var fd=Ri(function(h,T,U){po.call(h,U)?++h[U]:_u(h,U,1)});function mp(h,T,U){var Ee=ro(h)?yo:Vc;return U&&xr(h,T,U)&&(T=p),Ee(h,Ma(T,3))}function yp(h,T){var U=ro(h)?ya:sc;return U(h,Ma(T,3))}var _p=Bs(ra),bp=Bs(Za);function Qf(h,T){return ns(vh(h,T),1)}function hd(h,T){return ns(vh(h,T),K)}function xp(h,T,U){return U=U===p?1:oo(U),ns(vh(h,T),U)}function kh(h,T){var U=ro(h)?Ni:us;return U(h,Ma(T,3))}function Lh(h,T){var U=ro(h)?Oi:Oc;return U(h,Ma(T,3))}var dd=Ri(function(h,T,U){po.call(h,U)?h[U].push(T):_u(h,U,[T])});function Ep(h,T,U,Ee){h=Ju(h)?h:$f(h),U=U&&!Ee?oo(U):0;var qe=h.length;return U<0&&(U=Bo(qe+U,0)),jh(h)?U<=qe&&h.indexOf(T,U)>-1:!!qe&&_a(h,T,U)>-1}var Sp=hr(function(h,T,U){var Ee=-1,qe=typeof T=="function",Et=Ju(h)?rr(h.length):[];return us(h,function(rn){Et[++Ee]=qe?Ci(T,rn,U):Pc(rn,T,U)}),Et}),Tp=Ri(function(h,T,U){_u(h,U,T)});function vh(h,T){var U=ro(h)?sa:Lu;return U(h,Ma(T,3))}function Ap(h,T,U,Ee){return h==null?[]:(ro(T)||(T=T==null?[]:[T]),U=Ee?p:U,ro(U)||(U=U==null?[]:[U]),fe(h,T,U))}var pd=Ri(function(h,T,U){h[U?0:1].push(T)},function(){return[[],[]]});function Cp(h,T,U){var Ee=ro(h)?vs:ru,qe=arguments.length<3;return Ee(h,Ma(T,4),U,qe,us)}function vd(h,T,U){var Ee=ro(h)?$s:ru,qe=arguments.length<3;return Ee(h,Ma(T,4),U,qe,Oc)}function gd(h,T){var U=ro(h)?ya:sc;return U(h,bh(Ma(T,3)))}function md(h){var T=ro(h)?xs:kr;return T(h)}function wp(h,T,U){(U?xr(h,T,U):T===p)?T=1:T=oo(T);var Ee=ro(h)?Hs:ia;return Ee(h,T)}function Mp(h){var T=ro(h)?Iu:qa;return T(h)}function yd(h){if(h==null)return 0;if(Ju(h))return jh(h)?wu(h):h.length;var T=Dn(h);return T==Pe||T==ce?h.size:Ml(h).length}function Op(h,T,U){var Ee=ro(h)?Fs:rs;return U&&xr(h,T,U)&&(T=p),Ee(h,Ma(T,3))}var Pp=hr(function(h,T){if(h==null)return[];var U=T.length;return U>1&&xr(h,T[0],T[1])?T=[]:U>2&&xr(T[0],T[1],T[2])&&(T=[T[0]]),fe(h,ns(T,1),[])}),gh=Uc||function(){return N.Date.now()};function Fh(h,T){if(typeof T!="function")throw new Ds(x);return h=oo(h),function(){if(--h<1)return T.apply(this,arguments)}}function Ip(h,T,U){return T=U?p:T,T=h&&T==null?h.length:T,Rc(h,H,p,p,p,p,T)}function Dh(h,T){var U;if(typeof T!="function")throw new Ds(x);return h=oo(h),function(){return--h>0&&(U=T.apply(this,arguments)),h<=1&&(T=p),U}}var mh=hr(function(h,T,U){var Ee=D;if(U.length){var qe=Cu(U,uf(mh));Ee|=k}return Rc(h,Ee,T,U,qe)}),Nh=hr(function(h,T,U){var Ee=D|F;if(U.length){var qe=Cu(U,uf(Nh));Ee|=k}return Rc(T,Ee,h,U,qe)});function yh(h,T,U){T=U?p:T;var Ee=Rc(h,L,p,p,p,p,p,T);return Ee.placeholder=yh.placeholder,Ee}function _h(h,T,U){T=U?p:T;var Ee=Rc(h,W,p,p,p,p,p,T);return Ee.placeholder=_h.placeholder,Ee}function Qu(h,T,U){var Ee,qe,Et,rn,_n,Vn,Nr=0,Br=!1,Jr=!1,Bi=!0;if(typeof h!="function")throw new Ds(x);T=ts(T)||0,es(U)&&(Br=!!U.leading,Jr="maxWait"in U,Et=Jr?Bo(ts(U.maxWait)||0,T):Et,Bi="trailing"in U?!!U.trailing:Bi);function la(Ys){var kc=Ee,cf=qe;return Ee=qe=p,Nr=Ys,rn=h.apply(cf,kc),rn}function Fa(Ys){return Nr=Ys,_n=Ki(Eo,T),Br?la(Ys):rn}function uo(Ys){var kc=Ys-Vn,cf=Ys-Nr,rp=T-kc;return Jr?Qo(rp,Et-cf):rp}function Da(Ys){var kc=Ys-Vn,cf=Ys-Nr;return Vn===p||kc>=T||kc<0||Jr&&cf>=Et}function Eo(){var Ys=gh();if(Da(Ys))return wo(Ys);_n=Ki(Eo,uo(Ys))}function wo(Ys){return _n=p,Bi&&Ee?la(Ys):(Ee=qe=p,rn)}function tc(){_n!==p&&Rl(_n),Nr=0,Ee=Vn=qe=_n=p}function fl(){return _n===p?rn:wo(gh())}function nc(){var Ys=gh(),kc=Da(Ys);if(Ee=arguments,qe=this,Vn=Ys,kc){if(_n===p)return Fa(Vn);if(Jr)return Rl(_n),_n=Ki(Eo,T),la(Vn)}return _n===p&&(_n=Ki(Eo,T)),rn}return nc.cancel=tc,nc.flush=fl,nc}var Bh=hr(function(h,T){return Yl(h,1,T)}),Nf=hr(function(h,T,U){return Yl(h,ts(T)||0,U)});function fv(h){return Rc(h,ve)}function Jf(h,T){if(typeof h!="function"||T!=null&&typeof T!="function")throw new Ds(x);var U=function(){var Ee=arguments,qe=T?T.apply(this,Ee):Ee[0],Et=U.cache;if(Et.has(qe))return Et.get(qe);var rn=h.apply(this,Ee);return U.cache=Et.set(qe,rn)||Et,rn};return U.cache=new(Jf.Cache||fi),U}Jf.Cache=fi;function bh(h){if(typeof h!="function")throw new Ds(x);return function(){var T=arguments;switch(T.length){case 0:return!h.call(this);case 1:return!h.call(this,T[0]);case 2:return!h.call(this,T[0],T[1]);case 3:return!h.call(this,T[0],T[1],T[2])}return!h.apply(this,T)}}function hv(h){return Dh(2,h)}var xh=ql(function(h,T){T=T.length==1&&ro(T[0])?sa(T[0],gs(Ma())):sa(ns(T,1),gs(Ma()));var U=T.length;return hr(function(Ee){for(var qe=-1,Et=Qo(Ee.length,U);++qe<Et;)Ee[qe]=T[qe].call(this,Ee[qe]);return Ci(h,this,Ee)})}),Ef=hr(function(h,T){var U=Cu(T,uf(Ef));return Rc(h,k,p,T,U)}),Zh=hr(function(h,T){var U=Cu(T,uf(Zh));return Rc(h,de,p,T,U)}),_d=Ll(function(h,T){return Rc(h,ue,p,p,p,T)});function bd(h,T){if(typeof h!="function")throw new Ds(x);return T=T===p?T:oo(T),hr(h,T)}function Sf(h,T){if(typeof h!="function")throw new Ds(x);return T=T==null?0:Bo(oo(T),0),hr(function(U){var Ee=U[T],qe=Xu(U,0,T);return Ee&&jo(qe,Ee),Ci(h,this,qe)})}function Uh(h,T,U){var Ee=!0,qe=!0;if(typeof h!="function")throw new Ds(x);return es(U)&&(Ee="leading"in U?!!U.leading:Ee,qe="trailing"in U?!!U.trailing:qe),Qu(h,T,{leading:Ee,maxWait:T,trailing:qe})}function Eh(h){return Ip(h,1)}function Rp(h,T){return Ef(Fu(T),h)}function kp(){if(!arguments.length)return[];var h=arguments[0];return ro(h)?h:[h]}function Bf(h){return Ho(h,b)}function Lp(h,T){return T=typeof T=="function"?T:p,Ho(h,b,T)}function Fp(h){return Ho(h,o|b)}function dv(h,T){return T=typeof T=="function"?T:p,Ho(h,o|b,T)}function pv(h,T){return T==null||Mc(h,T,Eu(T))}function Xc(h,T){return h===T||h!==h&&T!==T}var vv=Jo(hf),gv=Jo(function(h,T){return h>=T}),Zf=Hc(function(){return arguments}())?Hc:function(h){return Ls(h)&&po.call(h,"callee")&&!ou.call(h,"callee")},ro=rr.isArray,xd=hn?gs(hn):bf;function Ju(h){return h!=null&&$h(h.length)&&!vc(h)}function eu(h){return Ls(h)&&Ju(h)}function Ed(h){return h===!0||h===!1||Ls(h)&&Os(h)==xt}var vf=zc||Jh,mv=on?gs(on):lc;function Sd(h){return Ls(h)&&h.nodeType===1&&!Sh(h)}function Dp(h){if(h==null)return!0;if(Ju(h)&&(ro(h)||typeof h=="string"||typeof h.splice=="function"||vf(h)||Tf(h)||Zf(h)))return!h.length;var T=Dn(h);if(T==Pe||T==ce)return!h.size;if(Tr(h))return!Ml(h).length;for(var U in h)if(po.call(h,U))return!1;return!0}function yv(h,T){return cc(h,T)}function Td(h,T,U){U=typeof U=="function"?U:p;var Ee=U?U(h,T):p;return Ee===p?cc(h,T,p,U):!!Ee}function zh(h){if(!Ls(h))return!1;var T=Os(h);return T==We||T==Un||typeof h.message=="string"&&typeof h.name=="string"&&!Sh(h)}function _v(h){return typeof h=="number"&&ac(h)}function vc(h){if(!es(h))return!1;var T=Os(h);return T==Yt||T==Ze||T==st||T==_e}function Ad(h){return typeof h=="number"&&h==oo(h)}function $h(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=he}function es(h){var T=typeof h;return h!=null&&(T=="object"||T=="function")}function Ls(h){return h!=null&&typeof h=="object"}var eh=nr?gs(nr):af;function Np(h,T){return h===T||Ic(h,T,Lf(T))}function Bp(h,T,U){return U=typeof U=="function"?U:p,Ic(h,T,Lf(T),U)}function Uf(h){return zp(h)&&h!=+h}function Zp(h){if(pi(h))throw new Ca(g);return wl(h)}function Up(h){return h===null}function bv(h){return h==null}function zp(h){return typeof h=="number"||Ls(h)&&Os(h)==ze}function Sh(h){if(!Ls(h)||Os(h)!=P)return!1;var T=gu(h);if(T===null)return!0;var U=po.call(T,"constructor")&&T.constructor;return typeof U=="function"&&U instanceof U&&il.call(U)==_s}var Cd=sr?gs(sr):Wc;function xv(h){return Ad(h)&&h>=-he&&h<=he}var $p=ti?gs(ti):of;function jh(h){return typeof h=="string"||!ro(h)&&Ls(h)&&Os(h)==ye}function Fl(h){return typeof h=="symbol"||Ls(h)&&Os(h)==Y}var Tf=Fi?gs(Fi):fc;function Ev(h){return h===p}function Vh(h){return Ls(h)&&Dn(h)==Qe}function th(h){return Ls(h)&&Os(h)==mt}var Sv=Jo(Ol),Gh=Jo(function(h,T){return h<=T});function Th(h){if(!h)return[];if(Ju(h))return jh(h)?ys(h):En(h);if(ol&&h[ol])return xc(h[ol]());var T=Dn(h),U=T==Pe?Bl:T==ce?ms:$f;return U(h)}function Jl(h){if(!h)return h===0?h:0;if(h=ts(h),h===K||h===-K){var T=h<0?-1:1;return T*Se}return h===h?h:0}function oo(h){var T=Jl(h),U=T%1;return T===T?U?T-U:T:0}function Hh(h){return h?Ru(oo(h),0,nt):0}function ts(h){if(typeof h=="number")return h;if(Fl(h))return Fe;if(es(h)){var T=typeof h.valueOf=="function"?h.valueOf():h;h=es(T)?T+"":T}if(typeof h!="string")return h===0?h:+h;h=Nl(h);var U=Pn.test(h);return U||Zr.test(h)?wr(h.slice(2),U?2:8):bn.test(h)?Fe:+h}function wd(h){return lr(h,cl(h))}function jp(h){return h?Ru(oo(h),-he,he):h===0?h:0}function oa(h){return h==null?"":Ra(h)}var Vp=ki(function(h,T){if(Tr(T)||Ju(T)){lr(T,Eu(T),h);return}for(var U in T)po.call(T,U)&&$u(h,U,T[U])}),zf=ki(function(h,T){lr(T,cl(T),h)}),gf=ki(function(h,T,U,Ee){lr(T,cl(T),h,Ee)}),Gp=ki(function(h,T,U,Ee){lr(T,Eu(T),h,Ee)}),Hp=Ll(Al);function Wp(h,T){var U=At(h);return T==null?U:Xl(U,T)}var Xp=hr(function(h,T){h=_o(h);var U=-1,Ee=T.length,qe=Ee>2?T[2]:p;for(qe&&xr(T[0],T[1],qe)&&(Ee=1);++U<Ee;)for(var Et=T[U],rn=cl(Et),_n=-1,Vn=rn.length;++_n<Vn;){var Nr=rn[_n],Br=h[Nr];(Br===p||Xc(Br,Mu[Nr])&&!po.call(h,Nr))&&(h[Nr]=Et[Nr])}return h}),Yp=hr(function(h){return h.push(p,ch),Ci(Yh,p,h)});function Md(h,T){return Dl(h,Ma(T,3),ll)}function Od(h,T){return Dl(h,Ma(T,3),tf)}function Kp(h,T){return h==null?h:bu(h,Ma(T,3),cl)}function qp(h,T){return h==null?h:Gc(h,Ma(T,3),cl)}function Qp(h,T){return h&&ll(h,Ma(T,3))}function Pd(h,T){return h&&tf(h,Ma(T,3))}function Jp(h){return h==null?[]:uc(h,Eu(h))}function Id(h){return h==null?[]:uc(h,cl(h))}function Wh(h,T,U){var Ee=h==null?p:ku(h,T);return Ee===p?U:Ee}function e0(h,T){return h!=null&&ir(h,T,Pf)}function Xh(h,T){return h!=null&&ir(h,T,If)}var t0=co(function(h,T,U){T!=null&&typeof T.toString!="function"&&(T=zu.call(T)),h[T]=U},Qh(Nu)),n0=co(function(h,T,U){T!=null&&typeof T.toString!="function"&&(T=zu.call(T)),po.call(h,T)?h[T].push(U):h[T]=[U]},Ma),r0=hr(Pc);function Eu(h){return Ju(h)?Oo(h):Ml(h)}function cl(h){return Ju(h)?Oo(h,!0):Gu(h)}function i0(h,T){var U={};return T=Ma(T,3),ll(h,function(Ee,qe,Et){_u(U,T(Ee,qe,Et),Ee)}),U}function a0(h,T){var U={};return T=Ma(T,3),ll(h,function(Ee,qe,Et){_u(U,qe,T(Ee,qe,Et))}),U}var o0=ki(function(h,T,U){R(h,T,U)}),Yh=ki(function(h,T,U,Ee){R(h,T,U,Ee)}),s0=Ll(function(h,T){var U={};if(h==null)return U;var Ee=!1;T=sa(T,function(Et){return Et=hu(Et,h),Ee||(Ee=Et.length>1),Et}),lr(h,Kf(h),U),Ee&&(U=Ho(U,o|c|b,Mh));for(var qe=T.length;qe--;)ls(U,T[qe]);return U});function u0(h,T){return Rd(h,bh(Ma(T)))}var l0=Ll(function(h,T){return h==null?{}:we(h,T)});function Rd(h,T){if(h==null)return{};var U=sa(Kf(h),function(Ee){return[Ee]});return T=Ma(T),je(h,U,function(Ee,qe){return T(Ee,qe[0])})}function c0(h,T,U){T=hu(T,h);var Ee=-1,qe=T.length;for(qe||(qe=1,h=p);++Ee<qe;){var Et=h==null?p:h[xo(T[Ee])];Et===p&&(Ee=qe,Et=U),h=vc(Et)?Et.call(h):Et}return h}function f0(h,T,U){return h==null?h:$i(h,T,U)}function kd(h,T,U,Ee){return Ee=typeof Ee=="function"?Ee:p,h==null?h:$i(h,T,U,Ee)}var Ld=Wf(Eu),Fd=Wf(cl);function h0(h,T,U){var Ee=ro(h),qe=Ee||vf(h)||Tf(h);if(T=Ma(T,4),U==null){var Et=h&&h.constructor;qe?U=Ee?new Et:[]:es(h)?U=vc(Et)?At(gu(h)):{}:U={}}return(qe?Ni:ll)(h,function(rn,_n,Vn){return T(U,rn,_n,Vn)}),U}function d0(h,T){return h==null?!0:ls(h,T)}function p0(h,T,U){return h==null?h:is(h,T,Fu(U))}function v0(h,T,U,Ee){return Ee=typeof Ee=="function"?Ee:p,h==null?h:is(h,T,Fu(U),Ee)}function $f(h){return h==null?[]:Au(h,Eu(h))}function g0(h){return h==null?[]:Au(h,cl(h))}function Dd(h,T,U){return U===p&&(U=T,T=p),U!==p&&(U=ts(U),U=U===U?U:0),T!==p&&(T=ts(T),T=T===T?T:0),Ru(ts(h),T,U)}function m0(h,T,U){return T=Jl(T),U===p?(U=T,T=0):U=Jl(U),h=ts(h),df(h,T,U)}function y0(h,T,U){if(U&&typeof U!="boolean"&&xr(h,T,U)&&(T=U=p),U===p&&(typeof T=="boolean"?(U=T,T=p):typeof h=="boolean"&&(U=h,h=p)),h===p&&T===p?(h=0,T=1):(h=Jl(h),T===p?(T=h,h=0):T=Jl(T)),h>T){var Ee=h;h=T,T=Ee}if(U||h%1||T%1){var qe=wc();return Qo(h+qe*(T-h+zn("1e-"+((qe+"").length-1))),T)}return Jt(h,T)}var _0=za(function(h,T,U){return T=T.toLowerCase(),h+(U?Kh(T):T)});function Kh(h){return Af(oa(h).toLowerCase())}function Nd(h){return h=oa(h),h&&h.replace(ui,ws).replace(Jn,"")}function b0(h,T,U){h=oa(h),T=Ra(T);var Ee=h.length;U=U===p?Ee:Ru(oo(U),0,Ee);var qe=U;return U-=T.length,U>=0&&h.slice(U,qe)==T}function x0(h){return h=oa(h),h&&Pr.test(h)?h.replace(Sr,_c):h}function E0(h){return h=oa(h),h&&Qa.test(h)?h.replace(Sa,"\\$&"):h}var S0=za(function(h,T,U){return h+(U?"-":"")+T.toLowerCase()}),T0=za(function(h,T,U){return h+(U?" ":"")+T.toLowerCase()}),Bd=Oa("toLowerCase");function A0(h,T,U){h=oa(h),T=oo(T);var Ee=T?wu(h):0;if(!T||Ee>=T)return h;var qe=(T-Ee)/2;return Is(_l(qe),U)+h+Is(Vl(qe),U)}function C0(h,T,U){h=oa(h),T=oo(T);var Ee=T?wu(h):0;return T&&Ee<T?h+Is(T-Ee,U):h}function w0(h,T,U){h=oa(h),T=oo(T);var Ee=T?wu(h):0;return T&&Ee<T?Is(T-Ee,U)+h:h}function M0(h,T,U){return U||T==null?T=0:T&&(T=+T),xl(oa(h).replace(ma,""),T||0)}function O0(h,T,U){return(U?xr(h,T,U):T===p)?T=1:T=oo(T),Mr(oa(h),T)}function P0(){var h=arguments,T=oa(h[0]);return h.length<3?T:T.replace(h[1],h[2])}var I0=za(function(h,T,U){return h+(U?"_":"")+T.toLowerCase()});function R0(h,T,U){return U&&typeof U!="number"&&xr(h,T,U)&&(T=U=p),U=U===p?nt:U>>>0,U?(h=oa(h),h&&(typeof T=="string"||T!=null&&!Cd(T))&&(T=Ra(T),!T&&iu(h))?Xu(ys(h),0,U):h.split(T,U)):[]}var Zd=za(function(h,T,U){return h+(U?" ":"")+Af(T)});function Ud(h,T,U){return h=oa(h),U=U==null?0:Ru(oo(U),0,h.length),T=Ra(T),h.slice(U,U+T.length)==T}function zd(h,T,U){var Ee=se.templateSettings;U&&xr(h,T,U)&&(T=p),h=oa(h),T=gf({},T,Ee,lh);var qe=gf({},T.imports,Ee.imports,lh),Et=Eu(qe),rn=Au(qe,Et),_n,Vn,Nr=0,Br=T.interpolate||qr,Jr="__p += '",Bi=zl((T.escape||qr).source+"|"+Br.source+"|"+(Br===Kn?Dt:qr).source+"|"+(T.evaluate||qr).source+"|$","g"),la="//# sourceURL="+(po.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ot+"]")+`
`;h.replace(Bi,function(Da,Eo,wo,tc,fl,nc){return wo||(wo=tc),Jr+=h.slice(Nr,nc).replace(Ti,bc),Eo&&(_n=!0,Jr+=`' +
__e(`+Eo+`) +
'`),fl&&(Vn=!0,Jr+=`';
`+fl+`;
__p += '`),wo&&(Jr+=`' +
((__t = (`+wo+`)) == null ? '' : __t) +
'`),Nr=nc+Da.length,Da}),Jr+=`';
`;var Fa=po.call(T,"variable")&&T.variable;if(!Fa)Jr=`with (obj) {
`+Jr+`
}
`;else if(pe.test(Fa))throw new Ca(v);Jr=(Vn?Jr.replace(cr,""):Jr).replace(Cr,"$1").replace(mi,"$1;"),Jr="function("+(Fa||"obj")+`) {
`+(Fa?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_n?", __e = _.escape":"")+(Vn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Jr+`return __p
}`;var uo=jd(function(){return io(Et,la+"return "+Jr).apply(p,rn)});if(uo.source=Jr,zh(uo))throw uo;return uo}function jf(h){return oa(h).toLowerCase()}function $d(h){return oa(h).toUpperCase()}function k0(h,T,U){if(h=oa(h),h&&(U||T===p))return Nl(h);if(!h||!(T=Ra(T)))return h;var Ee=ys(h),qe=ys(T),Et=nl(Ee,qe),rn=qs(Ee,qe)+1;return Xu(Ee,Et,rn).join("")}function L0(h,T,U){if(h=oa(h),h&&(U||T===p))return h.slice(0,vl(h)+1);if(!h||!(T=Ra(T)))return h;var Ee=ys(h),qe=qs(Ee,ys(T))+1;return Xu(Ee,0,qe).join("")}function F0(h,T,U){if(h=oa(h),h&&(U||T===p))return h.replace(ma,"");if(!h||!(T=Ra(T)))return h;var Ee=ys(h),qe=nl(Ee,ys(T));return Xu(Ee,qe).join("")}function D0(h,T){var U=ke,Ee=Ae;if(es(T)){var qe="separator"in T?T.separator:qe;U="length"in T?oo(T.length):U,Ee="omission"in T?Ra(T.omission):Ee}h=oa(h);var Et=h.length;if(iu(h)){var rn=ys(h);Et=rn.length}if(U>=Et)return h;var _n=U-wu(Ee);if(_n<1)return Ee;var Vn=rn?Xu(rn,0,_n).join(""):h.slice(0,_n);if(qe===p)return Vn+Ee;if(rn&&(_n+=Vn.length-_n),Cd(qe)){if(h.slice(_n).search(qe)){var Nr,Br=Vn;for(qe.global||(qe=zl(qe.source,oa(vn.exec(qe))+"g")),qe.lastIndex=0;Nr=qe.exec(Br);)var Jr=Nr.index;Vn=Vn.slice(0,Jr===p?_n:Jr)}}else if(h.indexOf(Ra(qe),_n)!=_n){var Bi=Vn.lastIndexOf(qe);Bi>-1&&(Vn=Vn.slice(0,Bi))}return Vn+Ee}function nh(h){return h=oa(h),h&&dr.test(h)?h.replace($r,Ec):h}var rh=za(function(h,T,U){return h+(U?" ":"")+T.toUpperCase()}),Af=Oa("toUpperCase");function Vf(h,T,U){return h=oa(h),T=U?p:T,T===p?Nc(h)?gl(h):du(h):h.match(T)||[]}var jd=hr(function(h,T){try{return Ci(h,p,T)}catch(U){return zh(U)?U:new Ca(U)}}),Vd=Ll(function(h,T){return Ni(T,function(U){U=xo(U),_u(h,U,mh(h[U],h))}),h});function qh(h){var T=h==null?0:h.length,U=Ma();return h=T?sa(h,function(Ee){if(typeof Ee[1]!="function")throw new Ds(x);return[U(Ee[0]),Ee[1]]}):[],hr(function(Ee){for(var qe=-1;++qe<T;){var Et=h[qe];if(Ci(Et[0],this,Ee))return Ci(Et[1],this,Ee)}})}function N0(h){return Cl(Ho(h,o))}function Qh(h){return function(){return h}}function Gd(h,T){return h==null||h!==h?T:h}var B0=So(),Tv=So(!0);function Nu(h){return h}function Cf(h){return sf(typeof h=="function"?h:Ho(h,o))}function Hd(h){return Pl(Ho(h,o))}function Z0(h,T){return Hu(h,Ho(T,o))}var U0=hr(function(h,T){return function(U){return Pc(U,h,T)}}),Wd=hr(function(h,T){return function(U){return Pc(h,U,T)}});function Xd(h,T,U){var Ee=Eu(T),qe=uc(T,Ee);U==null&&!(es(T)&&(qe.length||!Ee.length))&&(U=T,T=h,h=this,qe=uc(T,Eu(T)));var Et=!(es(U)&&"chain"in U)||!!U.chain,rn=vc(h);return Ni(qe,function(_n){var Vn=T[_n];h[_n]=Vn,rn&&(h.prototype[_n]=function(){var Nr=this.__chain__;if(Et||Nr){var Br=h(this.__wrapped__),Jr=Br.__actions__=En(this.__actions__);return Jr.push({func:Vn,args:arguments,thisArg:h}),Br.__chain__=Nr,Br}return Vn.apply(h,jo([this.value()],arguments))})}),h}function z0(){return N._===this&&(N._=pu),this}function Gf(){}function Yd(h){return h=oo(h),hr(function(T){return Te(T,h)})}var $0=Ws(sa),j0=Ws(yo),Kd=Ws(Fs);function V0(h){return Lr(h)?Zu(xo(h)):_t(h)}function qd(h){return function(T){return h==null?p:ku(h,T)}}var ec=kl(),Qd=kl(!0);function Ah(){return[]}function Jh(){return!1}function G0(){return{}}function H0(){return""}function Jd(){return!0}function ep(h,T){if(h=oo(h),h<1||h>he)return[];var U=nt,Ee=Qo(h,nt);T=Ma(T),h-=nt;for(var qe=Tu(Ee,T);++U<h;)T(U);return qe}function W0(h){return ro(h)?sa(h,xo):Fl(h)?[h]:En($a(oa(h)))}function tp(h){var T=++yl;return oa(h)+T}var np=Do(function(h,T){return h+T},0),X0=as("ceil"),Y0=Do(function(h,T){return h/T},1),K0=as("floor");function q0(h){return h&&h.length?Vu(h,Nu,hf):p}function Q0(h,T){return h&&h.length?Vu(h,Ma(T,2),hf):p}function J0(h){return Ks(h,Nu)}function ih(h,T){return Ks(h,Ma(T,2))}function ah(h){return h&&h.length?Vu(h,Nu,Ol):p}function ev(h,T){return h&&h.length?Vu(h,Ma(T,2),Ol):p}var tv=Do(function(h,T){return h*T},1),nv=as("round"),rv=Do(function(h,T){return h-T},0);function iv(h){return h&&h.length?tl(h,Nu):0}function av(h,T){return h&&h.length?tl(h,Ma(T,2)):0}return se.after=Fh,se.ary=Ip,se.assign=Vp,se.assignIn=zf,se.assignInWith=gf,se.assignWith=Gp,se.at=Hp,se.before=Dh,se.bind=mh,se.bindAll=Vd,se.bindKey=Nh,se.castArray=kp,se.chain=id,se.chunk=Yo,se.compact=Rs,se.concat=fs,se.cond=qh,se.conforms=N0,se.constant=Qh,se.countBy=fd,se.create=Wp,se.curry=yh,se.curryRight=_h,se.debounce=Qu,se.defaults=Xp,se.defaultsDeep=Yp,se.defer=Bh,se.delay=Nf,se.difference=ks,se.differenceBy=Us,se.differenceWith=Js,se.drop=Ss,se.dropRight=qi,se.dropRightWhile=Ts,se.dropWhile=vo,se.fill=As,se.filter=yp,se.flatMap=Qf,se.flatMapDeep=hd,se.flatMapDepth=xp,se.flatten=Co,se.flattenDeep=ds,se.flattenDepth=hc,se.flip=fv,se.flow=B0,se.flowRight=Tv,se.fromPairs=kt,se.functions=Jp,se.functionsIn=Id,se.groupBy=dd,se.initial=_i,se.intersection=Va,se.intersectionBy=St,se.intersectionWith=ot,se.invert=t0,se.invertBy=n0,se.invokeMap=Sp,se.iteratee=Cf,se.keyBy=Tp,se.keys=Eu,se.keysIn=cl,se.map=vh,se.mapKeys=i0,se.mapValues=a0,se.matches=Hd,se.matchesProperty=Z0,se.memoize=Jf,se.merge=o0,se.mergeWith=Yh,se.method=U0,se.methodOf=Wd,se.mixin=Xd,se.negate=bh,se.nthArg=Yd,se.omit=s0,se.omitBy=u0,se.once=hv,se.orderBy=Ap,se.over=$0,se.overArgs=xh,se.overEvery=j0,se.overSome=Kd,se.partial=Ef,se.partialRight=Zh,se.partition=pd,se.pick=l0,se.pickBy=Rd,se.property=V0,se.propertyOf=qd,se.pull=an,se.pullAll=dn,se.pullAllBy=bt,se.pullAllWith=Qt,se.pullAt=Pt,se.range=ec,se.rangeRight=Qd,se.rearg=_d,se.reject=gd,se.remove=Cn,se.rest=bd,se.reverse=Fn,se.sampleSize=wp,se.set=f0,se.setWith=kd,se.shuffle=Mp,se.slice=Ar,se.sortBy=Pp,se.sortedUniq=Mi,se.sortedUniqBy=Si,se.split=R0,se.spread=Sf,se.tail=Ii,se.take=Qi,se.takeRight=Uo,se.takeRightWhile=zs,se.takeWhile=hs,se.tap=ad,se.throttle=Uh,se.thru=dh,se.toArray=Th,se.toPairs=Ld,se.toPairsIn=Fd,se.toPath=W0,se.toPlainObject=wd,se.transform=h0,se.unary=Eh,se.union=Ql,se.unionBy=dc,se.unionWith=xu,se.uniq=pc,se.uniqBy=Du,se.uniqWith=Ff,se.unset=d0,se.unzip=qu,se.unzipWith=qf,se.update=p0,se.updateWith=v0,se.values=$f,se.valuesIn=g0,se.without=fh,se.words=Vf,se.wrap=Rp,se.xor=Ih,se.xorBy=hp,se.xorWith=hh,se.zip=Df,se.zipObject=dp,se.zipObjectDeep=pp,se.zipWith=vp,se.entries=Ld,se.entriesIn=Fd,se.extend=zf,se.extendWith=gf,Xd(se,se),se.add=np,se.attempt=jd,se.camelCase=_0,se.capitalize=Kh,se.ceil=X0,se.clamp=Dd,se.clone=Bf,se.cloneDeep=Fp,se.cloneDeepWith=dv,se.cloneWith=Lp,se.conformsTo=pv,se.deburr=Nd,se.defaultTo=Gd,se.divide=Y0,se.endsWith=b0,se.eq=Xc,se.escape=x0,se.escapeRegExp=E0,se.every=mp,se.find=_p,se.findIndex=ra,se.findKey=Md,se.findLast=bp,se.findLastIndex=Za,se.findLastKey=Od,se.floor=K0,se.forEach=kh,se.forEachRight=Lh,se.forIn=Kp,se.forInRight=qp,se.forOwn=Qp,se.forOwnRight=Pd,se.get=Wh,se.gt=vv,se.gte=gv,se.has=e0,se.hasIn=Xh,se.head=Yn,se.identity=Nu,se.includes=Ep,se.indexOf=Nn,se.inRange=m0,se.invoke=r0,se.isArguments=Zf,se.isArray=ro,se.isArrayBuffer=xd,se.isArrayLike=Ju,se.isArrayLikeObject=eu,se.isBoolean=Ed,se.isBuffer=vf,se.isDate=mv,se.isElement=Sd,se.isEmpty=Dp,se.isEqual=yv,se.isEqualWith=Td,se.isError=zh,se.isFinite=_v,se.isFunction=vc,se.isInteger=Ad,se.isLength=$h,se.isMap=eh,se.isMatch=Np,se.isMatchWith=Bp,se.isNaN=Uf,se.isNative=Zp,se.isNil=bv,se.isNull=Up,se.isNumber=zp,se.isObject=es,se.isObjectLike=Ls,se.isPlainObject=Sh,se.isRegExp=Cd,se.isSafeInteger=xv,se.isSet=$p,se.isString=jh,se.isSymbol=Fl,se.isTypedArray=Tf,se.isUndefined=Ev,se.isWeakMap=Vh,se.isWeakSet=th,se.join=Wt,se.kebabCase=S0,se.last=yn,se.lastIndexOf=qn,se.lowerCase=T0,se.lowerFirst=Bd,se.lt=Sv,se.lte=Gh,se.max=q0,se.maxBy=Q0,se.mean=J0,se.meanBy=ih,se.min=ah,se.minBy=ev,se.stubArray=Ah,se.stubFalse=Jh,se.stubObject=G0,se.stubString=H0,se.stubTrue=Jd,se.multiply=tv,se.nth=sn,se.noConflict=z0,se.noop=Gf,se.now=gh,se.pad=A0,se.padEnd=C0,se.padStart=w0,se.parseInt=M0,se.random=y0,se.reduce=Cp,se.reduceRight=vd,se.repeat=O0,se.replace=P0,se.result=c0,se.round=nv,se.runInContext=In,se.sample=md,se.size=yd,se.snakeCase=I0,se.some=Op,se.sortedIndex=Yr,se.sortedIndexBy=Kr,se.sortedIndexOf=ci,se.sortedLastIndex=Wr,se.sortedLastIndexBy=Pi,se.sortedLastIndexOf=vi,se.startCase=Zd,se.startsWith=Ud,se.subtract=rv,se.sum=iv,se.sumBy=av,se.template=zd,se.times=ep,se.toFinite=Jl,se.toInteger=oo,se.toLength=Hh,se.toLower=jf,se.toNumber=ts,se.toSafeInteger=jp,se.toString=oa,se.toUpper=$d,se.trim=k0,se.trimEnd=L0,se.trimStart=F0,se.truncate=D0,se.unescape=nh,se.uniqueId=tp,se.upperCase=rh,se.upperFirst=Af,se.each=kh,se.eachRight=Lh,se.first=Yn,Xd(se,function(){var h={};return ll(se,function(T,U){po.call(se.prototype,U)||(h[U]=T)}),h}(),{chain:!1}),se.VERSION=M,Ni(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){se[h].placeholder=se}),Ni(["drop","take"],function(h,T){Zn.prototype[h]=function(U){U=U===p?1:Bo(oo(U),0);var Ee=this.__filtered__&&!T?new Zn(this):this.clone();return Ee.__filtered__?Ee.__takeCount__=Qo(U,Ee.__takeCount__):Ee.__views__.push({size:Qo(U,nt),type:h+(Ee.__dir__<0?"Right":"")}),Ee},Zn.prototype[h+"Right"]=function(U){return this.reverse()[h](U).reverse()}}),Ni(["filter","map","takeWhile"],function(h,T){var U=T+1,Ee=U==ie||U==ae;Zn.prototype[h]=function(qe){var Et=this.clone();return Et.__iteratees__.push({iteratee:Ma(qe,3),type:U}),Et.__filtered__=Et.__filtered__||Ee,Et}}),Ni(["head","last"],function(h,T){var U="take"+(T?"Right":"");Zn.prototype[h]=function(){return this[U](1).value()[0]}}),Ni(["initial","tail"],function(h,T){var U="drop"+(T?"":"Right");Zn.prototype[h]=function(){return this.__filtered__?new Zn(this):this[U](1)}}),Zn.prototype.compact=function(){return this.filter(Nu)},Zn.prototype.find=function(h){return this.filter(h).head()},Zn.prototype.findLast=function(h){return this.reverse().find(h)},Zn.prototype.invokeMap=hr(function(h,T){return typeof h=="function"?new Zn(this):this.map(function(U){return Pc(U,h,T)})}),Zn.prototype.reject=function(h){return this.filter(bh(Ma(h)))},Zn.prototype.slice=function(h,T){h=oo(h);var U=this;return U.__filtered__&&(h>0||T<0)?new Zn(U):(h<0?U=U.takeRight(-h):h&&(U=U.drop(h)),T!==p&&(T=oo(T),U=T<0?U.dropRight(-T):U.take(T-h)),U)},Zn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Zn.prototype.toArray=function(){return this.take(nt)},ll(Zn.prototype,function(h,T){var U=/^(?:filter|find|map|reject)|While$/.test(T),Ee=/^(?:head|last)$/.test(T),qe=se[Ee?"take"+(T=="last"?"Right":""):T],Et=Ee||/^find/.test(T);qe&&(se.prototype[T]=function(){var rn=this.__wrapped__,_n=Ee?[1]:arguments,Vn=rn instanceof Zn,Nr=_n[0],Br=Vn||ro(rn),Jr=function(Eo){var wo=qe.apply(se,jo([Eo],_n));return Ee&&Bi?wo[0]:wo};Br&&U&&typeof Nr=="function"&&Nr.length!=1&&(Vn=Br=!1);var Bi=this.__chain__,la=!!this.__actions__.length,Fa=Et&&!Bi,uo=Vn&&!la;if(!Et&&Br){rn=uo?rn:new Zn(this);var Da=h.apply(rn,_n);return Da.__actions__.push({func:dh,args:[Jr],thisArg:p}),new Ut(Da,Bi)}return Fa&&uo?h.apply(this,_n):(Da=this.thru(Jr),Fa?Ee?Da.value()[0]:Da.value():Da)})}),Ni(["pop","push","shift","sort","splice","unshift"],function(h){var T=Uu[h],U=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",Ee=/^(?:pop|shift)$/.test(h);se.prototype[h]=function(){var qe=arguments;if(Ee&&!this.__chain__){var Et=this.value();return T.apply(ro(Et)?Et:[],qe)}return this[U](function(rn){return T.apply(ro(rn)?rn:[],qe)})}}),ll(Zn.prototype,function(h,T){var U=se[T];if(U){var Ee=U.name+"";po.call(lu,Ee)||(lu[Ee]=[]),lu[Ee].push({name:T,func:U})}}),lu[Pa(p,F).name]=[{name:"wrapper",func:p}],Zn.prototype.clone=gr,Zn.prototype.reverse=ni,Zn.prototype.value=Vr,se.prototype.at=od,se.prototype.chain=sd,se.prototype.commit=ud,se.prototype.next=ld,se.prototype.plant=gp,se.prototype.reverse=ph,se.prototype.toJSON=se.prototype.valueOf=se.prototype.value=Rh,se.prototype.first=se.prototype.head,ol&&(se.prototype[ol]=cd),se},ic=qc();N._=ic,E=function(){return ic}.call(S,y,S,Ie),E!==p&&(Ie.exports=E)}).call(this)},82492:function(Ie,S,y){var E=y(42980),p=y(21463),M=p(function(d,g,x){E(d,g,x)});Ie.exports=M},95062:function(Ie){function S(){return!1}Ie.exports=S},59881:function(Ie,S,y){var E=y(98363),p=y(81704);function M(d){return E(d,p(d))}Ie.exports=M},20226:function(Ie,S,y){"use strict";y.r(S),y.d(S,{InferenceSession:function(){return w},Tensor:function(){return b},env:function(){return x},registerBackend:function(){return M}});const E={},p=[],M=(D,F,Z)=>{if(F&&typeof F.init=="function"&&typeof F.createSessionHandler=="function"){const L=E[D];if(L===void 0)E[D]={backend:F,priority:Z};else{if(L.priority>Z)return;if(L.priority===Z&&L.backend!==F)throw new Error(`cannot register backend "${D}" using priority ${Z}`)}if(Z>=0){const W=p.indexOf(D);W!==-1&&p.splice(W,1);for(let k=0;k<p.length;k++)if(E[p[k]].priority<=Z){p.splice(k,0,D);return}p.push(D)}return}throw new TypeError("not a valid backend")},d=D=>Ga(this,null,function*(){const F=D.length===0?p:D,Z=[];for(const L of F){const W=E[L];if(W){if(W.initialized)return W.backend;if(W.aborted)continue;const k=!!W.initPromise;try{return k||(W.initPromise=W.backend.init()),yield W.initPromise,W.initialized=!0,W.backend}catch(de){k||Z.push({name:L,err:de}),W.aborted=!0}finally{delete W.initPromise}}}throw new Error(`no available backend found. ERR: ${Z.map(L=>`[${L.name}] ${L.err}`).join(", ")}`)});class g{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(F){if(F!==void 0){if(typeof F!="string"||["verbose","info","warning","error","fatal"].indexOf(F)===-1)throw new Error(`Unsupported logging level: ${F}`);this.logLevelInternal=F}}get logLevel(){return this.logLevelInternal}}const x=new g,v=typeof BigInt64Array!="undefined"&&typeof BigInt64Array.from=="function",u=typeof BigUint64Array!="undefined"&&typeof BigUint64Array.from=="function",t=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),e=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);v&&(t.set("int64",BigInt64Array),e.set(BigInt64Array,"int64")),u&&(t.set("uint64",BigUint64Array),e.set(BigUint64Array,"uint64"));const o=D=>{let F=1;for(let Z=0;Z<D.length;Z++){const L=D[Z];if(typeof L!="number"||!Number.isSafeInteger(L))throw new TypeError(`dims[${Z}] must be an integer, got: ${L}`);if(L<0)throw new RangeError(`dims[${Z}] must be a non-negative integer, got: ${L}`);F*=L}return F};class c{constructor(F,Z,L){let W,k,de;if(typeof F=="string")if(W=F,de=L,F==="string"){if(!Array.isArray(Z))throw new TypeError("A string tensor's data must be a string array.");k=Z}else{const ue=t.get(F);if(ue===void 0)throw new TypeError(`Unsupported tensor type: ${F}.`);if(Array.isArray(Z))k=ue.from(Z);else if(Z instanceof ue)k=Z;else throw new TypeError(`A ${W} tensor's data must be type of ${ue}`)}else if(de=Z,Array.isArray(F)){if(F.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const ue=typeof F[0];if(ue==="string")W="string",k=F;else if(ue==="boolean")W="bool",k=Uint8Array.from(F);else throw new TypeError(`Invalid element type of data array: ${ue}.`)}else{const ue=e.get(F.constructor);if(ue===void 0)throw new TypeError(`Unsupported type for tensor data: ${F.constructor}.`);W=ue,k=F}if(de===void 0)de=[k.length];else if(!Array.isArray(de))throw new TypeError("A tensor's dims must be a number array");const H=o(de);if(H!==k.length)throw new Error(`Tensor's size(${H}) does not match data length(${k.length}).`);this.dims=de,this.type=W,this.data=k,this.size=H}static bufferToTensor(F,Z){if(F===void 0)throw new Error("Image buffer must be defined");if(Z.height===void 0||Z.width===void 0)throw new Error("Image height and width must be defined");const{height:L,width:W}=Z,k=Z.norm;let de,H;k===void 0||k.mean===void 0?de=255:de=k.mean,k===void 0||k.bias===void 0?H=0:H=k.bias;const ue=Z.bitmapFormat!==void 0?Z.bitmapFormat:"RGBA",ve=Z.tensorFormat!==void 0&&Z.tensorFormat!==void 0?Z.tensorFormat:"RGB",ke=L*W,Ae=ve==="RGBA"?new Float32Array(ke*4):new Float32Array(ke*3);let be=4,G=0,ie=1,V=2,ae=3,K=0,he=ke,Se=ke*2,Fe=-1;ue==="RGB"&&(be=3,G=0,ie=1,V=2,ae=-1),ve==="RGBA"?Fe=ke*3:ve==="RBG"?(K=0,Se=ke,he=ke*2):ve==="BGR"&&(Se=0,he=ke,K=ke*2);for(let lt=0;lt<ke;lt++,G+=be,V+=be,ie+=be,ae+=be)Ae[K++]=(F[G]+H)/de,Ae[he++]=(F[ie]+H)/de,Ae[Se++]=(F[V]+H)/de,Fe!==-1&&ae!==-1&&(Ae[Fe++]=(F[ae]+H)/de);return ve==="RGBA"?new c("float32",Ae,[1,4,L,W]):new c("float32",Ae,[1,3,L,W])}static fromImage(F,Z){return Ga(this,null,function*(){const L=typeof HTMLImageElement!="undefined"&&F instanceof HTMLImageElement,W=typeof ImageData!="undefined"&&F instanceof ImageData,k=typeof ImageBitmap!="undefined"&&F instanceof ImageBitmap,de=typeof String!="undefined"&&(F instanceof String||typeof F=="string");let H,ue={};if(L){const ve=document.createElement("canvas"),ke=ve.getContext("2d");if(ke!=null){let Ae=F.naturalHeight,be=F.naturalWidth;if(Z!==void 0&&Z.resizedHeight!==void 0&&Z.resizedWidth!==void 0&&(Ae=Z.resizedHeight,be=Z.resizedWidth),Z!==void 0){if(ue=Z,Z.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(ue.tensorFormat="RGBA",Z.height!==void 0&&Z.height!==Ae)throw new Error("Image input config height doesn't match HTMLImageElement height");if(ue.height=Ae,Z.width!==void 0&&Z.width!==be)throw new Error("Image input config width doesn't match HTMLImageElement width");ue.width=be}else ue.tensorFormat="RGBA",ue.height=Ae,ue.width=be;ve.width=be,ve.height=Ae,ke.drawImage(F,0,0,be,Ae),H=ke.getImageData(0,0,be,Ae).data}else throw new Error("Can not access image data")}else if(W){const ve="RGBA";let ke,Ae;if(Z!==void 0&&Z.resizedWidth!==void 0&&Z.resizedHeight!==void 0?(ke=Z.resizedHeight,Ae=Z.resizedWidth):(ke=F.height,Ae=F.width),Z!==void 0){if(ue=Z,Z.bitmapFormat!==void 0&&Z.bitmapFormat!==ve)throw new Error("Image input config format must be RGBA for ImageData");ue.bitmapFormat="RGBA"}else ue.bitmapFormat="RGBA";if(ue.height=ke,ue.width=Ae,Z!==void 0){const be=document.createElement("canvas");be.width=Ae,be.height=ke;const G=be.getContext("2d");if(G!=null)G.putImageData(F,0,0),H=G.getImageData(0,0,Ae,ke).data;else throw new Error("Can not access image data")}else H=F.data}else if(k){if(Z===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(Z.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ve=document.createElement("canvas").getContext("2d");if(ve!=null){const ke=F.height,Ae=F.width;if(ve.drawImage(F,0,0,Ae,ke),H=ve.getImageData(0,0,Ae,ke).data,Z!==void 0){if(Z.height!==void 0&&Z.height!==ke)throw new Error("Image input config height doesn't match ImageBitmap height");if(ue.height=ke,Z.width!==void 0&&Z.width!==Ae)throw new Error("Image input config width doesn't match ImageBitmap width");ue.width=Ae}else ue.height=ke,ue.width=Ae;return c.bufferToTensor(H,ue)}else throw new Error("Can not access image data")}else{if(de)return new Promise((ve,ke)=>{const Ae=document.createElement("canvas"),be=Ae.getContext("2d");if(!F||!be)return ke();const G=new Image;G.crossOrigin="Anonymous",G.src=F,G.onload=()=>{Ae.width=G.width,Ae.height=G.height,be.drawImage(G,0,0,Ae.width,Ae.height);const ie=be.getImageData(0,0,Ae.width,Ae.height);if(Z!==void 0){if(Z.height!==void 0&&Z.height!==Ae.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(ue.height=Ae.height,Z.width!==void 0&&Z.width!==Ae.width)throw new Error("Image input config width doesn't match ImageBitmap width");ue.width=Ae.width}else ue.height=Ae.height,ue.width=Ae.width;ve(c.bufferToTensor(ie.data,ue))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(H!==void 0)return c.bufferToTensor(H,ue);throw new Error("Input data provided is not supported - aborted tensor creation")})}toImageData(F){var Z,L;const W=document.createElement("canvas").getContext("2d");let k;if(W!=null){const de=this.dims[3],H=this.dims[2],ue=this.dims[1],ve=F!==void 0&&F.format!==void 0?F.format:"RGB",ke=F!==void 0&&((Z=F.norm)===null||Z===void 0?void 0:Z.mean)!==void 0?F.norm.mean:255,Ae=F!==void 0&&((L=F.norm)===null||L===void 0?void 0:L.bias)!==void 0?F.norm.bias:0,be=H*de;if(F!==void 0){if(F.height!==void 0&&F.height!==H)throw new Error("Image output config height doesn't match tensor height");if(F.width!==void 0&&F.width!==de)throw new Error("Image output config width doesn't match tensor width");if(F.format!==void 0&&ue===4&&F.format!=="RGBA"||ue===3&&F.format!=="RGB"&&F.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const G=4;let ie=0,V=1,ae=2,K=3,he=0,Se=be,Fe=be*2,nt=-1;ve==="RGBA"?(he=0,Se=be,Fe=be*2,nt=be*3):ve==="RGB"?(he=0,Se=be,Fe=be*2):ve==="RBG"&&(he=0,Fe=be,Se=be*2),k=W.createImageData(de,H);for(let lt=0;lt<H*de;ie+=G,V+=G,ae+=G,K+=G,lt++)k.data[ie]=(this.data[he++]-Ae)*ke,k.data[V]=(this.data[Se++]-Ae)*ke,k.data[ae]=(this.data[Fe++]-Ae)*ke,k.data[K]=nt===-1?255:(this.data[nt++]-Ae)*ke}else throw new Error("Can not access image data");return k}reshape(F){return new c(this.type,this.data,F)}}const b=c;class A{constructor(F){this.handler=F}run(F,Z,L){return Ga(this,null,function*(){const W={};let k={};if(typeof F!="object"||F===null||F instanceof b||Array.isArray(F))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let de=!0;if(typeof Z=="object"){if(Z===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(Z instanceof b)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(Z)){if(Z.length===0)throw new TypeError("'fetches' cannot be an empty array.");de=!1;for(const ve of Z){if(typeof ve!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ve)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ve}.`);W[ve]=null}if(typeof L=="object"&&L!==null)k=L;else if(typeof L!="undefined")throw new TypeError("'options' must be an object.")}else{let ve=!1;const ke=Object.getOwnPropertyNames(Z);for(const Ae of this.outputNames)if(ke.indexOf(Ae)!==-1){const be=Z[Ae];(be===null||be instanceof b)&&(ve=!0,de=!1,W[Ae]=be)}if(ve){if(typeof L=="object"&&L!==null)k=L;else if(typeof L!="undefined")throw new TypeError("'options' must be an object.")}else k=Z}}else if(typeof Z!="undefined")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ve of this.inputNames)if(typeof F[ve]=="undefined")throw new Error(`input '${ve}' is missing in 'feeds'.`);if(de)for(const ve of this.outputNames)W[ve]=null;const H=yield this.handler.run(F,W,k),ue={};for(const ve in H)Object.hasOwnProperty.call(H,ve)&&(ue[ve]=new b(H[ve].type,H[ve].data,H[ve].dims));return ue})}static create(F,Z,L,W){return Ga(this,null,function*(){let k,de={};if(typeof F=="string"){if(k=F,typeof Z=="object"&&Z!==null)de=Z;else if(typeof Z!="undefined")throw new TypeError("'options' must be an object.")}else if(F instanceof Uint8Array){if(k=F,typeof Z=="object"&&Z!==null)de=Z;else if(typeof Z!="undefined")throw new TypeError("'options' must be an object.")}else if(F instanceof ArrayBuffer||typeof SharedArrayBuffer!="undefined"&&F instanceof SharedArrayBuffer){const Ae=F;let be=0,G=F.byteLength;if(typeof Z=="object"&&Z!==null)de=Z;else if(typeof Z=="number"){if(be=Z,!Number.isSafeInteger(be))throw new RangeError("'byteOffset' must be an integer.");if(be<0||be>=Ae.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Ae.byteLength}).`);if(G=F.byteLength-be,typeof L=="number"){if(G=L,!Number.isSafeInteger(G))throw new RangeError("'byteLength' must be an integer.");if(G<=0||be+G>Ae.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Ae.byteLength-be}].`);if(typeof W=="object"&&W!==null)de=W;else if(typeof W!="undefined")throw new TypeError("'options' must be an object.")}else if(typeof L!="undefined")throw new TypeError("'byteLength' must be a number.")}else if(typeof Z!="undefined")throw new TypeError("'options' must be an object.");k=new Uint8Array(Ae,be,G)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const ue=(de.executionProviders||[]).map(Ae=>typeof Ae=="string"?Ae:Ae.name),ke=yield(yield d(ue)).createSessionHandler(k,de);return new A(ke)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const w=A},18736:function(module,__unused_webpack_exports,__webpack_require__){var process=__webpack_require__(34155);(function(Ie,S){if(!0)module.exports=S(__webpack_require__(20226));else var y,E})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(Ie,S,y)=>{var E,p=(E=(E=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(M){function d(){return K.buffer!=Se&&We(K.buffer),Fe}function g(){return K.buffer!=Se&&We(K.buffer),nt}function x(){return K.buffer!=Se&&We(K.buffer),lt}function v(){return K.buffer!=Se&&We(K.buffer),Gt}function u(){return K.buffer!=Se&&We(K.buffer),pn}var t,e,o;M=M||{},t||(t=M!==void 0?M:{}),t.ready=new Promise(function(Le,Xe){e=Le,o=Xe});var c,b,A,w,D,F,Z=Object.assign({},t),L="./this.program",W=(Le,Xe)=>{throw Xe},k=typeof window=="object",de=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ue=t.ENVIRONMENT_IS_PTHREAD||!1,ve="";function ke(Le){return t.locateFile?t.locateFile(Le,ve):ve+Le}if(H){let Le;ve=de?y(908).dirname(ve)+"/":"//",F=()=>{D||(w=y(1384),D=y(908))},c=function(Xe,He){return F(),Xe=D.normalize(Xe),w.readFileSync(Xe,He?void 0:"utf8")},A=Xe=>((Xe=c(Xe,!0)).buffer||(Xe=new Uint8Array(Xe)),Xe),b=(Xe,He,Ot)=>{F(),Xe=D.normalize(Xe),w.readFile(Xe,function(Vt,gn){Vt?Ot(Vt):He(gn.buffer)})},1<process.argv.length&&(L=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Xe){if(!(Xe instanceof rt))throw Xe}),process.on("unhandledRejection",function(Xe){throw Xe}),W=(Xe,He)=>{if(ne())throw process.exitCode=Xe,He;He instanceof rt||V("exiting due to exception: "+He),process.exit(Xe)},t.inspect=function(){return"[Emscripten Module object]"};try{Le=y(9925)}catch(Xe){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Xe}y.g.Worker=Le.Worker}else(k||de)&&(de?ve=self.location.href:typeof document!="undefined"&&document.currentScript&&(ve=document.currentScript.src),E&&(ve=E),ve=ve.indexOf("blob:")!==0?ve.substr(0,ve.replace(/[?#].*/,"").lastIndexOf("/")+1):"",H||(c=Le=>{var Xe=new XMLHttpRequest;return Xe.open("GET",Le,!1),Xe.send(null),Xe.responseText},de&&(A=Le=>{var Xe=new XMLHttpRequest;return Xe.open("GET",Le,!1),Xe.responseType="arraybuffer",Xe.send(null),new Uint8Array(Xe.response)}),b=(Le,Xe,He)=>{var Ot=new XMLHttpRequest;Ot.open("GET",Le,!0),Ot.responseType="arraybuffer",Ot.onload=()=>{Ot.status==200||Ot.status==0&&Ot.response?Xe(Ot.response):He()},Ot.onerror=He,Ot.send(null)}));H&&typeof performance=="undefined"&&(y.g.performance=y(6953).performance);var Ae=console.log.bind(console),be=console.warn.bind(console);H&&(F(),Ae=Le=>w.writeSync(1,Le+`
`),be=Le=>w.writeSync(2,Le+`
`));var G,ie=t.print||Ae,V=t.printErr||be;Object.assign(t,Z),Z=null,t.thisProgram&&(L=t.thisProgram),t.quit&&(W=t.quit),t.wasmBinary&&(G=t.wasmBinary);var ae=t.noExitRuntime||!1;typeof WebAssembly!="object"&&Ne("no native wasm support detected");var K,he,Se,Fe,nt,lt,Gt,pn,$n=!1,Ln=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function st(Le,Xe,He){var Ot=(Xe>>>=0)+He;for(He=Xe;Le[He]&&!(He>=Ot);)++He;if(16<He-Xe&&Le.buffer&&Ln)return Ln.decode(Le.buffer instanceof SharedArrayBuffer?Le.slice(Xe,He):Le.subarray(Xe,He));for(Ot="";Xe<He;){var Vt=Le[Xe++];if(128&Vt){var gn=63&Le[Xe++];if((224&Vt)==192)Ot+=String.fromCharCode((31&Vt)<<6|gn);else{var vt=63&Le[Xe++];65536>(Vt=(240&Vt)==224?(15&Vt)<<12|gn<<6|vt:(7&Vt)<<18|gn<<12|vt<<6|63&Le[Xe++])?Ot+=String.fromCharCode(Vt):(Vt-=65536,Ot+=String.fromCharCode(55296|Vt>>10,56320|1023&Vt))}}else Ot+=String.fromCharCode(Vt)}return Ot}function xt(Le,Xe){return(Le>>>=0)?st(g(),Le,Xe):""}function tn(Le,Xe,He,Ot){if(!(0<Ot))return 0;var Vt=He>>>=0;Ot=He+Ot-1;for(var gn=0;gn<Le.length;++gn){var vt=Le.charCodeAt(gn);if(55296<=vt&&57343>=vt&&(vt=65536+((1023&vt)<<10)|1023&Le.charCodeAt(++gn)),127>=vt){if(He>=Ot)break;Xe[He++>>>0]=vt}else{if(2047>=vt){if(He+1>=Ot)break;Xe[He++>>>0]=192|vt>>6}else{if(65535>=vt){if(He+2>=Ot)break;Xe[He++>>>0]=224|vt>>12}else{if(He+3>=Ot)break;Xe[He++>>>0]=240|vt>>18,Xe[He++>>>0]=128|vt>>12&63}Xe[He++>>>0]=128|vt>>6&63}Xe[He++>>>0]=128|63&vt}}return Xe[He>>>0]=0,He-Vt}function Un(Le){for(var Xe=0,He=0;He<Le.length;++He){var Ot=Le.charCodeAt(He);127>=Ot?Xe++:2047>=Ot?Xe+=2:55296<=Ot&&57343>=Ot?(Xe+=4,++He):Xe+=3}return Xe}function We(Le){Se=Le,t.HEAP8=Fe=new Int8Array(Le),t.HEAP16=new Int16Array(Le),t.HEAP32=lt=new Int32Array(Le),t.HEAPU8=nt=new Uint8Array(Le),t.HEAPU16=new Uint16Array(Le),t.HEAPU32=Gt=new Uint32Array(Le),t.HEAPF32=new Float32Array(Le),t.HEAPF64=pn=new Float64Array(Le)}ue&&(Se=t.buffer);var Yt=t.INITIAL_MEMORY||16777216;if(ue)K=t.wasmMemory,Se=t.buffer;else if(t.wasmMemory)K=t.wasmMemory;else if(!((K=new WebAssembly.Memory({initial:Yt/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw V("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),H&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");K&&(Se=K.buffer),Yt=Se.byteLength,We(Se);var Ze,Pe=[],ze=[],ht=[],P=[];function ne(){return ae||!1}function _e(){var Le=t.preRun.shift();Pe.unshift(Le)}var oe,ce=0,ye=null,Y=null;function Ne(Le){throw ue?postMessage({cmd:"onAbort",arg:Le}):t.onAbort&&t.onAbort(Le),V(Le="Aborted("+Le+")"),$n=!0,Le=new WebAssembly.RuntimeError(Le+". Build with -sASSERTIONS for more info."),o(Le),Le}function Qe(){return oe.startsWith("data:application/octet-stream;base64,")}function mt(){var Le=oe;try{if(Le==oe&&G)return new Uint8Array(G);if(A)return A(Le);throw"both async and sync fetching of the wasm failed"}catch(Xe){Ne(Xe)}}oe="ort-wasm-threaded.wasm",Qe()||(oe=ke(oe));var Ve={};function rt(Le){this.name="ExitStatus",this.message="Program terminated with exit("+Le+")",this.status=Le}function yt(Le){(Le=wt.Vb[Le])||Ne(),wt.mc(Le)}function Tt(Le){var Xe=wt.Cc();if(!Xe)return 6;wt.ac.push(Xe),wt.Vb[Le.Ub]=Xe,Xe.Ub=Le.Ub;var He={cmd:"run",start_routine:Le.Ic,arg:Le.zc,pthread_ptr:Le.Ub};return Xe.$b=()=>{He.time=performance.now(),Xe.postMessage(He,Le.Nc)},Xe.loaded&&(Xe.$b(),delete Xe.$b),0}function Ht(Le){if(ue)return Xr(1,1,Le);ne()||(wt.oc(),t.onExit&&t.onExit(Le),$n=!0),W(Le,new rt(Le))}function en(Le,Xe){if(!Xe&&ue)throw jn(Le),"unwind";ne()||ue||(wn(),Mn(ht),ho(0),ha[1].length&&Ta(1,10),ha[2].length&&Ta(2,10),wt.oc()),Ht(Le)}var wt={Yb:[],ac:[],qc:[],Vb:{},fc:function(){ue&&wt.Ec()},Pc:function(){},Ec:function(){wt.receiveObjectTransfer=wt.Gc,wt.threadInitTLS=wt.pc,wt.setExitStatus=wt.nc,ae=!1},nc:function(){},oc:function(){for(var Le of Object.values(wt.Vb))wt.mc(Le);for(Le of wt.Yb)Le.terminate();wt.Yb=[]},mc:function(Le){var Xe=Le.Ub;delete wt.Vb[Xe],wt.Yb.push(Le),wt.ac.splice(wt.ac.indexOf(Le),1),Le.Ub=0,qt(Xe)},Gc:function(){},pc:function(){wt.qc.forEach(Le=>Le())},Fc:function(Le,Xe){Le.onmessage=He=>{var Ot=(He=He.data).cmd;if(Le.Ub&&(wt.Bc=Le.Ub),He.targetThread&&He.targetThread!=fo()){var Vt=wt.Vb[He.Qc];Vt?Vt.postMessage(He,He.transferList):V('Internal error! Worker sent a message "'+Ot+'" to target pthread '+He.targetThread+", but that thread no longer exists!")}else Ot==="processProxyingQueue"?Dt(He.queue):Ot==="spawnThread"?Tt(He):Ot==="cleanupThread"?yt(He.thread):Ot==="killThread"?(He=He.thread,Ot=wt.Vb[He],delete wt.Vb[He],Ot.terminate(),qt(He),wt.ac.splice(wt.ac.indexOf(Ot),1),Ot.Ub=0):Ot==="cancelThread"?wt.Vb[He.thread].postMessage({cmd:"cancel"}):Ot==="loaded"?(Le.loaded=!0,Xe&&Xe(Le),Le.$b&&(Le.$b(),delete Le.$b)):Ot==="print"?ie("Thread "+He.threadId+": "+He.text):Ot==="printErr"?V("Thread "+He.threadId+": "+He.text):Ot==="alert"?alert("Thread "+He.threadId+": "+He.text):He.target==="setimmediate"?Le.postMessage(He):Ot==="onAbort"?t.onAbort&&t.onAbort(He.arg):Ot&&V("worker sent an unknown command "+Ot);wt.Bc=void 0},Le.onerror=He=>{throw V("worker sent an error! "+He.filename+":"+He.lineno+": "+He.message),He},H&&(Le.on("message",function(He){Le.onmessage({data:He})}),Le.on("error",function(He){Le.onerror(He)}),Le.on("detachedExit",function(){})),Le.postMessage({cmd:"load",urlOrBlob:t.mainScriptUrlOrBlob||E,wasmMemory:K,wasmModule:he})},yc:function(){var Le=ke("ort-wasm-threaded.worker.js");wt.Yb.push(new Worker(Le))},Cc:function(){return wt.Yb.length==0&&(wt.yc(),wt.Fc(wt.Yb[0])),wt.Yb.pop()}};function Mn(Le){for(;0<Le.length;)Le.shift()(t)}function kn(Le){var Xe=Oe();return Le=Le(),De(Xe),Le}function jn(Le){if(ue)return Xr(2,0,Le);try{en(Le)}catch(Xe){Xe instanceof rt||Xe=="unwind"||W(1,Xe)}}t.PThread=wt,t.establishStackSpace=function(){var Le=fo(),Xe=x()[Le+44>>2>>>0];Le=x()[Le+48>>2>>>0],An(Xe,Xe-Le),De(Xe)};var mn=[];function cr(Le){var Xe=mn[Le];return Xe||(Le>=mn.length&&(mn.length=Le+1),mn[Le]=Xe=Ze.get(Le)),Xe}t.invokeEntryPoint=function(Le,Xe){Le=cr(Le)(Xe),ne()?wt.nc(Le):nn(Le)};var Cr,mi,$r=[],Sr=0,dr=0;function Pr(Le){this.Zb=Le,this.Sb=Le-24,this.xc=function(Xe){v()[this.Sb+4>>2>>>0]=Xe},this.bc=function(){return v()[this.Sb+4>>2>>>0]},this.wc=function(Xe){v()[this.Sb+8>>2>>>0]=Xe},this.Dc=function(){return v()[this.Sb+8>>2>>>0]},this.rc=function(){x()[this.Sb>>2>>>0]=0},this.hc=function(Xe){Xe=Xe?1:0,d()[this.Sb+12>>0>>>0]=Xe},this.uc=function(){return d()[this.Sb+12>>0>>>0]!=0},this.ic=function(Xe){Xe=Xe?1:0,d()[this.Sb+13>>0>>>0]=Xe},this.kc=function(){return d()[this.Sb+13>>0>>>0]!=0},this.fc=function(Xe,He){this.cc(0),this.xc(Xe),this.wc(He),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(x(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(x(),this.Sb>>2,1)===1},this.cc=function(Xe){v()[this.Sb+16>>2>>>0]=Xe},this.tc=function(){return v()[this.Sb+16>>2>>>0]},this.vc=function(){if(Nt(this.bc()))return v()[this.Zb>>2>>>0];var Xe=this.tc();return Xe!==0?Xe:this.Zb}}function Hr(Le){return te(new Pr(Le).Sb)}function Xi(Le,Xe,He,Ot){return ue?Xr(3,1,Le,Xe,He,Ot):Kn(Le,Xe,He,Ot)}function Kn(Le,Xe,He,Ot){if(typeof SharedArrayBuffer=="undefined")return V("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Vt=[];return ue&&Vt.length===0?Xi(Le,Xe,He,Ot):(Le={Ic:He,Ub:Le,zc:Ot,Nc:Vt},ue?(Le.Oc="spawnThread",postMessage(Le,Vt),0):Tt(Le))}function Gn(Le,Xe,He){return ue?Xr(4,1,Le,Xe,He):0}function pt(Le,Xe){if(ue)return Xr(5,1,Le,Xe)}function Ha(Le,Xe){if(ue)return Xr(6,1,Le,Xe)}function Sa(Le,Xe,He){if(ue)return Xr(7,1,Le,Xe,He)}function Qa(Le,Xe,He){return ue?Xr(8,1,Le,Xe,He):0}function ma(Le,Xe){if(ue)return Xr(9,1,Le,Xe)}function Ei(Le,Xe,He){if(ue)return Xr(10,1,Le,Xe,He)}function Ia(Le,Xe,He,Ot){if(ue)return Xr(11,1,Le,Xe,He,Ot)}function si(Le,Xe,He,Ot){if(ue)return Xr(12,1,Le,Xe,He,Ot)}function it(Le,Xe,He,Ot){if(ue)return Xr(13,1,Le,Xe,He,Ot)}function Qn(Le){if(ue)return Xr(14,1,Le)}function pe(Le,Xe){if(ue)return Xr(15,1,Le,Xe)}function at(Le,Xe,He){if(ue)return Xr(16,1,Le,Xe,He)}function Dt(Le){Atomics.store(x(),Le>>2,1),fo()&&Ke(Le),Atomics.compareExchange(x(),Le>>2,1,0)}function vn(Le){return v()[Le>>>2]+4294967296*x()[Le+4>>>2]}function bn(Le,Xe,He,Ot,Vt,gn){return ue?Xr(17,1,Le,Xe,He,Ot,Vt,gn):-52}function Pn(Le,Xe,He,Ot,Vt,gn){if(ue)return Xr(18,1,Le,Xe,He,Ot,Vt,gn)}function ar(Le){var Xe=Un(Le)+1,He=Ro(Xe);return He&&tn(Le,d(),He,Xe),He}function Zr(Le,Xe,He){function Ot(fn){return(fn=fn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?fn[1]:"GMT"}if(ue)return Xr(19,1,Le,Xe,He);var Vt=new Date().getFullYear(),gn=new Date(Vt,0,1),vt=new Date(Vt,6,1);Vt=gn.getTimezoneOffset();var zt=vt.getTimezoneOffset(),Kt=Math.max(Vt,zt);x()[Le>>2>>>0]=60*Kt,x()[Xe>>2>>>0]=Number(Vt!=zt),Le=Ot(gn),Xe=Ot(vt),Le=ar(Le),Xe=ar(Xe),zt<Vt?(v()[He>>2>>>0]=Le,v()[He+4>>2>>>0]=Xe):(v()[He>>2>>>0]=Xe,v()[He+4>>2>>>0]=Le)}function Xr(Le,Xe){var He=arguments.length-2,Ot=arguments;return kn(()=>{for(var Vt=Be(8*He),gn=Vt>>3,vt=0;vt<He;vt++){var zt=Ot[2+vt];u()[gn+vt>>>0]=zt}return dt(Le,He,Vt,Xe)})}t.executeNotifiedProxyingQueue=Dt,mi=H?()=>{var Le=process.hrtime();return 1e3*Le[0]+Le[1]/1e6}:ue?()=>performance.now()-t.__performance_now_clock_drift:()=>performance.now();var ui,qr=[],Ti={};function fa(){if(!ui){var Le,Xe={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:L||"./this.program"};for(Le in Ti)Ti[Le]===void 0?delete Xe[Le]:Xe[Le]=Ti[Le];var He=[];for(Le in Xe)He.push(Le+"="+Xe[Le]);ui=He}return ui}function Bn(Le,Xe){if(ue)return Xr(20,1,Le,Xe);var He=0;return fa().forEach(function(Ot,Vt){var gn=Xe+He;for(Vt=v()[Le+4*Vt>>2>>>0]=gn,gn=0;gn<Ot.length;++gn)d()[Vt++>>0>>>0]=Ot.charCodeAt(gn);d()[Vt>>0>>>0]=0,He+=Ot.length+1}),0}function Li(Le,Xe){if(ue)return Xr(21,1,Le,Xe);var He=fa();v()[Le>>2>>>0]=He.length;var Ot=0;return He.forEach(function(Vt){Ot+=Vt.length+1}),v()[Xe>>2>>>0]=Ot,0}function Ji(Le){return ue?Xr(22,1,Le):52}function Na(Le,Xe,He,Ot){return ue?Xr(23,1,Le,Xe,He,Ot):52}function ea(Le,Xe,He,Ot,Vt){return ue?Xr(24,1,Le,Xe,He,Ot,Vt):70}var ha=[null,[],[]];function Ta(Le,Xe){var He=ha[Le];Xe===0||Xe===10?((Le===1?ie:V)(st(He,0)),He.length=0):He.push(Xe)}function Aa(Le,Xe,He,Ot){if(ue)return Xr(25,1,Le,Xe,He,Ot);for(var Vt=0,gn=0;gn<He;gn++){var vt=v()[Xe>>2>>>0],zt=v()[Xe+4>>2>>>0];Xe+=8;for(var Kt=0;Kt<zt;Kt++)Ta(Le,g()[vt+Kt>>>0]);Vt+=zt}return v()[Ot>>2>>>0]=Vt,0}var Wi=0;function go(Le){return Le%4==0&&(Le%100!=0||Le%400==0)}var Ja=[31,29,31,30,31,30,31,31,30,31,30,31],$o=[31,28,31,30,31,30,31,31,30,31,30,31];function Ua(Le,Xe,He,Ot){function Vt(_,N,me){for(_=typeof _=="number"?_.toString():_||"";_.length<N;)_=me[0]+_;return _}function gn(_,N){return Vt(_,N,"0")}function vt(_,N){function me(Ue){return 0>Ue?-1:0<Ue?1:0}var q;return(q=me(_.getFullYear()-N.getFullYear()))===0&&(q=me(_.getMonth()-N.getMonth()))===0&&(q=me(_.getDate()-N.getDate())),q}function zt(_){switch(_.getDay()){case 0:return new Date(_.getFullYear()-1,11,29);case 1:return _;case 2:return new Date(_.getFullYear(),0,3);case 3:return new Date(_.getFullYear(),0,2);case 4:return new Date(_.getFullYear(),0,1);case 5:return new Date(_.getFullYear()-1,11,31);case 6:return new Date(_.getFullYear()-1,11,30)}}function Kt(_){var N=_.Wb;for(_=new Date(new Date(_.Xb+1900,0,1).getTime());0<N;){var me=_.getMonth(),q=(go(_.getFullYear())?Ja:$o)[me];if(!(N>q-_.getDate())){_.setDate(_.getDate()+N);break}N-=q-_.getDate()+1,_.setDate(1),11>me?_.setMonth(me+1):(_.setMonth(0),_.setFullYear(_.getFullYear()+1))}return me=new Date(_.getFullYear()+1,0,4),N=zt(new Date(_.getFullYear(),0,4)),me=zt(me),0>=vt(N,_)?0>=vt(me,_)?_.getFullYear()+1:_.getFullYear():_.getFullYear()-1}var fn=x()[Ot+40>>2>>>0];for(var zn in Ot={Lc:x()[Ot>>2>>>0],Kc:x()[Ot+4>>2>>>0],dc:x()[Ot+8>>2>>>0],jc:x()[Ot+12>>2>>>0],ec:x()[Ot+16>>2>>>0],Xb:x()[Ot+20>>2>>>0],Tb:x()[Ot+24>>2>>>0],Wb:x()[Ot+28>>2>>>0],Rc:x()[Ot+32>>2>>>0],Jc:x()[Ot+36>>2>>>0],Mc:fn?xt(fn):""},He=xt(He),fn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})He=He.replace(new RegExp(zn,"g"),fn[zn]);var wr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Er="January February March April May June July August September October November December".split(" ");for(zn in fn={"%a":function(_){return wr[_.Tb].substring(0,3)},"%A":function(_){return wr[_.Tb]},"%b":function(_){return Er[_.ec].substring(0,3)},"%B":function(_){return Er[_.ec]},"%C":function(_){return gn((_.Xb+1900)/100|0,2)},"%d":function(_){return gn(_.jc,2)},"%e":function(_){return Vt(_.jc,2," ")},"%g":function(_){return Kt(_).toString().substring(2)},"%G":function(_){return Kt(_)},"%H":function(_){return gn(_.dc,2)},"%I":function(_){return(_=_.dc)==0?_=12:12<_&&(_-=12),gn(_,2)},"%j":function(_){for(var N=0,me=0;me<=_.ec-1;N+=(go(_.Xb+1900)?Ja:$o)[me++]);return gn(_.jc+N,3)},"%m":function(_){return gn(_.ec+1,2)},"%M":function(_){return gn(_.Kc,2)},"%n":function(){return`
`},"%p":function(_){return 0<=_.dc&&12>_.dc?"AM":"PM"},"%S":function(_){return gn(_.Lc,2)},"%t":function(){return"	"},"%u":function(_){return _.Tb||7},"%U":function(_){return gn(Math.floor((_.Wb+7-_.Tb)/7),2)},"%V":function(_){var N=Math.floor((_.Wb+7-(_.Tb+6)%7)/7);if(2>=(_.Tb+371-_.Wb-2)%7&&N++,N)N==53&&((me=(_.Tb+371-_.Wb)%7)==4||me==3&&go(_.Xb)||(N=1));else{N=52;var me=(_.Tb+7-_.Wb-1)%7;(me==4||me==5&&go(_.Xb%400-1))&&N++}return gn(N,2)},"%w":function(_){return _.Tb},"%W":function(_){return gn(Math.floor((_.Wb+7-(_.Tb+6)%7)/7),2)},"%y":function(_){return(_.Xb+1900).toString().substring(2)},"%Y":function(_){return _.Xb+1900},"%z":function(_){var N=0<=(_=_.Jc);return _=Math.abs(_)/60,(N?"+":"-")+String("0000"+(_/60*100+_%60)).slice(-4)},"%Z":function(_){return _.Mc},"%%":function(){return"%"}},He=He.replace(/%%/g,"\0\0"),fn)He.includes(zn)&&(He=He.replace(new RegExp(zn,"g"),fn[zn](Ot)));return zn=function(_){var N=Array(Un(_)+1);return tn(_,N,0,N.length),N}(He=He.replace(/\0\0/g,"%")),zn.length>Xe?0:(function(_,N){d().set(_,N>>>0)}(zn,Le),zn.length-1)}wt.fc();var Wa=[null,Ht,jn,Xi,Gn,pt,Ha,Sa,Qa,ma,Ei,Ia,si,it,Qn,pe,at,bn,Pn,Zr,Bn,Li,Ji,Na,ea,Aa],mo={b:function(Le){return Ro(Le+24)+24},n:function(Le){return(Le=new Pr(Le)).uc()||(Le.hc(!0),Sr--),Le.ic(!1),$r.push(Le),Le.sc(),Le.vc()},ma:function(Le){throw V("Unexpected exception thrown, this is not properly supported - aborting"),$n=!0,Le},x:function(){ln(0);var Le=$r.pop();if(Le.Hc()&&!Le.kc()){var Xe=Le.Dc();Xe&&cr(Xe)(Le.Zb),Hr(Le.Zb)}dr=0},e:function(){var Le=dr;if(!Le)return Wi=0;var Xe=new Pr(Le);Xe.cc(Le);var He=Xe.bc();if(!He)return Wi=0,Le;for(var Ot=Array.prototype.slice.call(arguments),Vt=0;Vt<Ot.length;Vt++){var gn=Ot[Vt];if(gn===0||gn===He)break;if(Ye(gn,He,Xe.Sb+16))return Wi=gn,Le}return Wi=He,Le},l:function(){var Le=dr;if(!Le)return Wi=0;var Xe=new Pr(Le);Xe.cc(Le);var He=Xe.bc();if(!He)return Wi=0,Le;for(var Ot=Array.prototype.slice.call(arguments),Vt=0;Vt<Ot.length;Vt++){var gn=Ot[Vt];if(gn===0||gn===He)break;if(Ye(gn,He,Xe.Sb+16))return Wi=gn,Le}return Wi=He,Le},h:function(){var Le=dr;if(!Le)return Wi=0;var Xe=new Pr(Le);Xe.cc(Le);var He=Xe.bc();if(!He)return Wi=0,Le;for(var Ot=Array.prototype.slice.call(arguments),Vt=0;Vt<Ot.length;Vt++){var gn=Ot[Vt];if(gn===0||gn===He)break;if(Ye(gn,He,Xe.Sb+16))return Wi=gn,Le}return Wi=He,Le},t:Hr,M:function(){var Le=$r.pop();Le||Ne("no exception to throw");var Xe=Le.Zb;throw Le.kc()||($r.push(Le),Le.ic(!0),Le.hc(!1),Sr++),dr=Xe,Xe},c:function(Le,Xe,He){throw new Pr(Le).fc(Xe,He),dr=Le,Sr++,Le},pa:function(){return Sr},Fa:function(Le){tt(Le,!de,1,!k),wt.pc()},T:function(Le){ue?postMessage({cmd:"cleanupThread",thread:Le}):yt(Le)},xa:Kn,j:function(Le){throw dr||(dr=Le),Le},H:Gn,Ma:pt,ua:Ha,wa:Sa,oa:Qa,Ka:ma,Ca:Ei,Ja:Ia,V:si,va:it,sa:Qn,La:pe,ta:at,Ta:function(){},X:function(){Ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){Ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Le,Xe,He,Ot){if(Le==Xe)setTimeout(()=>Dt(Ot));else if(ue)postMessage({targetThread:Le,cmd:"processProxyingQueue",queue:Ot});else{if(!(Le=wt.Vb[Le]))return;Le.postMessage({cmd:"processProxyingQueue",queue:Ot})}return 1},Ea:function(){return-1},Pa:function(Le,Xe){Le=new Date(1e3*vn(Le)),x()[Xe>>2>>>0]=Le.getUTCSeconds(),x()[Xe+4>>2>>>0]=Le.getUTCMinutes(),x()[Xe+8>>2>>>0]=Le.getUTCHours(),x()[Xe+12>>2>>>0]=Le.getUTCDate(),x()[Xe+16>>2>>>0]=Le.getUTCMonth(),x()[Xe+20>>2>>>0]=Le.getUTCFullYear()-1900,x()[Xe+24>>2>>>0]=Le.getUTCDay(),Le=(Le.getTime()-Date.UTC(Le.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,x()[Xe+28>>2>>>0]=Le},Qa:function(Le,Xe){Le=new Date(1e3*vn(Le)),x()[Xe>>2>>>0]=Le.getSeconds(),x()[Xe+4>>2>>>0]=Le.getMinutes(),x()[Xe+8>>2>>>0]=Le.getHours(),x()[Xe+12>>2>>>0]=Le.getDate(),x()[Xe+16>>2>>>0]=Le.getMonth(),x()[Xe+20>>2>>>0]=Le.getFullYear()-1900,x()[Xe+24>>2>>>0]=Le.getDay();var He=new Date(Le.getFullYear(),0,1),Ot=(Le.getTime()-He.getTime())/864e5|0;x()[Xe+28>>2>>>0]=Ot,x()[Xe+36>>2>>>0]=-60*Le.getTimezoneOffset(),Ot=new Date(Le.getFullYear(),6,1).getTimezoneOffset(),Le=0|(Ot!=(He=He.getTimezoneOffset())&&Le.getTimezoneOffset()==Math.min(He,Ot)),x()[Xe+32>>2>>>0]=Le},Ra:function(Le){var Xe=new Date(x()[Le+20>>2>>>0]+1900,x()[Le+16>>2>>>0],x()[Le+12>>2>>>0],x()[Le+8>>2>>>0],x()[Le+4>>2>>>0],x()[Le>>2>>>0],0),He=x()[Le+32>>2>>>0],Ot=Xe.getTimezoneOffset(),Vt=new Date(Xe.getFullYear(),0,1),gn=new Date(Xe.getFullYear(),6,1).getTimezoneOffset(),vt=Vt.getTimezoneOffset(),zt=Math.min(vt,gn);return 0>He?x()[Le+32>>2>>>0]=Number(gn!=vt&&zt==Ot):0<He!=(zt==Ot)&&(gn=Math.max(vt,gn),Xe.setTime(Xe.getTime()+6e4*((0<He?zt:gn)-Ot))),x()[Le+24>>2>>>0]=Xe.getDay(),He=(Xe.getTime()-Vt.getTime())/864e5|0,x()[Le+28>>2>>>0]=He,x()[Le>>2>>>0]=Xe.getSeconds(),x()[Le+4>>2>>>0]=Xe.getMinutes(),x()[Le+8>>2>>>0]=Xe.getHours(),x()[Le+12>>2>>>0]=Xe.getDate(),x()[Le+16>>2>>>0]=Xe.getMonth(),Xe.getTime()/1e3|0},Aa:bn,Ba:Pn,Sa:function Le(Xe,He,Ot){Le.Ac||(Le.Ac=!0,Zr(Xe,He,Ot))},y:function(){Ne("")},U:function(){if(!H&&!de){var Le="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Cr||(Cr={}),Cr[Le]||(Cr[Le]=1,H&&(Le="warning: "+Le),V(Le))}},ra:function(){return 4294901760},B:mi,Ia:function(Le,Xe,He){g().copyWithin(Le>>>0,Xe>>>0,Xe+He>>>0)},F:function(){return H?y(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Le,Xe,He){qr.length=Xe,He>>=3;for(var Ot=0;Ot<Xe;Ot++)qr[Ot]=u()[He+Ot>>>0];return(0>Le?Ve[-Le-1]:Wa[Le]).apply(null,qr)},qa:function(Le){var Xe=g().length;if((Le>>>=0)<=Xe||4294901760<Le)return!1;for(var He=1;4>=He;He*=2){var Ot=Xe*(1+.2/He);Ot=Math.min(Ot,Le+100663296);var Vt=Math;Ot=Math.max(Le,Ot),Vt=Vt.min.call(Vt,4294901760,Ot+(65536-Ot%65536)%65536);e:{try{K.grow(Vt-Se.byteLength+65535>>>16),We(K.buffer);var gn=1;break e}catch(vt){}gn=void 0}if(gn)return!0}return!1},Na:function(){throw"unwind"},Ga:Bn,Ha:Li,J:en,I:Ji,S:Na,ga:ea,R:Aa,d:function(){return Wi},na:function Le(Xe,He){Le.lc||(Le.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Vt=new Uint8Array(1);return()=>(crypto.getRandomValues(Vt),Vt[0])}if(H)try{var gn=y(Object(function(){var vt=new Error("Cannot find module 'crypto'");throw vt.code="MODULE_NOT_FOUND",vt}()));return()=>gn.randomBytes(1)[0]}catch(vt){}return()=>Ne("randomDevice")}());for(var Ot=0;Ot<He;Ot++)d()[Xe+Ot>>0>>>0]=Le.lc();return 0},ia:function(Le,Xe,He){var Ot=Oe();try{return cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},ja:function(Le,Xe,He){var Ot=Oe();try{return cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},K:function(Le){var Xe=Oe();try{return cr(Le)()}catch(He){if(De(Xe),He!==He+0)throw He;ln(1,0)}},f:function(Le,Xe){var He=Oe();try{return cr(Le)(Xe)}catch(Ot){if(De(He),Ot!==Ot+0)throw Ot;ln(1,0)}},P:function(Le,Xe,He){var Ot=Oe();try{return cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},Q:function(Le,Xe,He){var Ot=Oe();try{return cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},k:function(Le,Xe,He){var Ot=Oe();try{return cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},p:function(Le,Xe,He,Ot){var Vt=Oe();try{return cr(Le)(Xe,He,Ot)}catch(gn){if(De(Vt),gn!==gn+0)throw gn;ln(1,0)}},q:function(Le,Xe,He,Ot,Vt){var gn=Oe();try{return cr(Le)(Xe,He,Ot,Vt)}catch(vt){if(De(gn),vt!==vt+0)throw vt;ln(1,0)}},N:function(Le,Xe,He,Ot,Vt,gn){var vt=Oe();try{return cr(Le)(Xe,He,Ot,Vt,gn)}catch(zt){if(De(vt),zt!==zt+0)throw zt;ln(1,0)}},s:function(Le,Xe,He,Ot,Vt,gn){var vt=Oe();try{return cr(Le)(Xe,He,Ot,Vt,gn)}catch(zt){if(De(vt),zt!==zt+0)throw zt;ln(1,0)}},w:function(Le,Xe,He,Ot,Vt,gn,vt){var zt=Oe();try{return cr(Le)(Xe,He,Ot,Vt,gn,vt)}catch(Kt){if(De(zt),Kt!==Kt+0)throw Kt;ln(1,0)}},L:function(Le,Xe,He,Ot,Vt,gn,vt,zt){var Kt=Oe();try{return cr(Le)(Xe,He,Ot,Vt,gn,vt,zt)}catch(fn){if(De(Kt),fn!==fn+0)throw fn;ln(1,0)}},E:function(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr){var Er=Oe();try{return cr(Le)(Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr)}catch(_){if(De(Er),_!==_+0)throw _;ln(1,0)}},aa:function(Le,Xe,He,Ot,Vt,gn,vt,zt){var Kt=Oe();try{return Jn(Le,Xe,He,Ot,Vt,gn,vt,zt)}catch(fn){if(De(Kt),fn!==fn+0)throw fn;ln(1,0)}},_:function(Le,Xe,He,Ot,Vt,gn,vt){var zt=Oe();try{return un(Le,Xe,He,Ot,Vt,gn,vt)}catch(Kt){if(De(zt),Kt!==Kt+0)throw Kt;ln(1,0)}},Z:function(Le,Xe,He,Ot,Vt){var gn=Oe();try{return Bt(Le,Xe,He,Ot,Vt)}catch(vt){if(De(gn),vt!==vt+0)throw vt;ln(1,0)}},ca:function(Le,Xe,He,Ot){var Vt=Oe();try{return $t(Le,Xe,He,Ot)}catch(gn){if(De(Vt),gn!==gn+0)throw gn;ln(1,0)}},$:function(Le){var Xe=Oe();try{return jt(Le)}catch(He){if(De(Xe),He!==He+0)throw He;ln(1,0)}},ba:function(Le,Xe){var He=Oe();try{return er(Le,Xe)}catch(Ot){if(De(He),Ot!==Ot+0)throw Ot;ln(1,0)}},Y:function(Le,Xe,He){var Ot=Oe();try{return Hn(Le,Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},g:function(Le){var Xe=Oe();try{cr(Le)()}catch(He){if(De(Xe),He!==He+0)throw He;ln(1,0)}},r:function(Le,Xe){var He=Oe();try{cr(Le)(Xe)}catch(Ot){if(De(He),Ot!==Ot+0)throw Ot;ln(1,0)}},i:function(Le,Xe,He){var Ot=Oe();try{cr(Le)(Xe,He)}catch(Vt){if(De(Ot),Vt!==Vt+0)throw Vt;ln(1,0)}},ha:function(Le,Xe,He,Ot){var Vt=Oe();try{cr(Le)(Xe,He,Ot)}catch(gn){if(De(Vt),gn!==gn+0)throw gn;ln(1,0)}},m:function(Le,Xe,He,Ot){var Vt=Oe();try{cr(Le)(Xe,He,Ot)}catch(gn){if(De(Vt),gn!==gn+0)throw gn;ln(1,0)}},v:function(Le,Xe,He,Ot,Vt){var gn=Oe();try{cr(Le)(Xe,He,Ot,Vt)}catch(vt){if(De(gn),vt!==vt+0)throw vt;ln(1,0)}},u:function(Le,Xe,He,Ot,Vt,gn){var vt=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn)}catch(zt){if(De(vt),zt!==zt+0)throw zt;ln(1,0)}},O:function(Le,Xe,He,Ot,Vt,gn,vt){var zt=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn,vt)}catch(Kt){if(De(zt),Kt!==Kt+0)throw Kt;ln(1,0)}},A:function(Le,Xe,He,Ot,Vt,gn,vt,zt){var Kt=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn,vt,zt)}catch(fn){if(De(Kt),fn!==fn+0)throw fn;ln(1,0)}},ka:function(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt){var fn=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn,vt,zt,Kt)}catch(zn){if(De(fn),zn!==zn+0)throw zn;ln(1,0)}},C:function(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn){var wr=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn)}catch(Er){if(De(wr),Er!==Er+0)throw Er;ln(1,0)}},D:function(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr,Er,_,N,me){var q=Oe();try{cr(Le)(Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr,Er,_,N,me)}catch(Ue){if(De(q),Ue!==Ue+0)throw Ue;ln(1,0)}},fa:function(Le,Xe,He,Ot,Vt,gn,vt,zt){var Kt=Oe();try{Rn(Le,Xe,He,Ot,Vt,gn,vt,zt)}catch(fn){if(De(Kt),fn!==fn+0)throw fn;ln(1,0)}},da:function(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr){var Er=Oe();try{or(Le,Xe,He,Ot,Vt,gn,vt,zt,Kt,fn,zn,wr)}catch(_){if(De(Er),_!==_+0)throw _;ln(1,0)}},ea:function(Le,Xe,He,Ot,Vt,gn){var vt=Oe();try{fr(Le,Xe,He,Ot,Vt,gn)}catch(zt){if(De(vt),zt!==zt+0)throw zt;ln(1,0)}},o:function(Le){return Le},a:K||t.wasmMemory,G:function(Le){Wi=Le},la:Ua,z:function(Le,Xe,He,Ot){return Ua(Le,Xe,He,Ot)}};(function(){function Le(Vt,gn){t.asm=Vt.exports,wt.qc.push(t.asm.sb),Ze=t.asm.ub,ze.unshift(t.asm.Va),he=gn,ue||(ce--,t.monitorRunDependencies&&t.monitorRunDependencies(ce),ce==0&&(ye!==null&&(clearInterval(ye),ye=null),Y&&(Vt=Y,Y=null,Vt())))}function Xe(Vt){Le(Vt.instance,Vt.module)}function He(Vt){return function(){if(!G&&(k||de)){if(typeof fetch=="function"&&!oe.startsWith("file://"))return fetch(oe,{credentials:"same-origin"}).then(function(gn){if(!gn.ok)throw"failed to load wasm binary file at '"+oe+"'";return gn.arrayBuffer()}).catch(function(){return mt()});if(b)return new Promise(function(gn,vt){b(oe,function(zt){gn(new Uint8Array(zt))},vt)})}return Promise.resolve().then(function(){return mt()})}().then(function(gn){return WebAssembly.instantiate(gn,Ot)}).then(function(gn){return gn}).then(Vt,function(gn){V("failed to asynchronously prepare wasm: "+gn),Ne(gn)})}var Ot={a:mo};if(ue||(ce++,t.monitorRunDependencies&&t.monitorRunDependencies(ce)),t.instantiateWasm)try{return t.instantiateWasm(Ot,Le)}catch(Vt){return V("Module.instantiateWasm callback failed with error: "+Vt),!1}(G||typeof WebAssembly.instantiateStreaming!="function"||Qe()||oe.startsWith("file://")||H||typeof fetch!="function"?He(Xe):fetch(oe,{credentials:"same-origin"}).then(function(Vt){return WebAssembly.instantiateStreaming(Vt,Ot).then(Xe,function(gn){return V("wasm streaming compile failed: "+gn),V("falling back to ArrayBuffer instantiation"),He(Xe)})})).catch(o)})(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.Va).apply(null,arguments)},t._OrtInit=function(){return(t._OrtInit=t.asm.Wa).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.Xa).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.Ya).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.Za).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm._a).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.$a).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.ab).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.bb).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.cb).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.db).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.eb).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.fb).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.gb).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.hb).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.ib).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.jb).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.kb).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.lb).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.mb).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.nb).apply(null,arguments)};var fo=t._pthread_self=function(){return(fo=t._pthread_self=t.asm.ob).apply(null,arguments)},Ro=t._malloc=function(){return(Ro=t._malloc=t.asm.pb).apply(null,arguments)},te=t._free=function(){return(te=t._free=t.asm.qb).apply(null,arguments)},ho=t._fflush=function(){return(ho=t._fflush=t.asm.rb).apply(null,arguments)};t.__emscripten_tls_init=function(){return(t.__emscripten_tls_init=t.asm.sb).apply(null,arguments)};var wn=t.___funcs_on_exit=function(){return(wn=t.___funcs_on_exit=t.asm.tb).apply(null,arguments)},tt=t.__emscripten_thread_init=function(){return(tt=t.__emscripten_thread_init=t.asm.vb).apply(null,arguments)};t.__emscripten_thread_crashed=function(){return(t.__emscripten_thread_crashed=t.asm.wb).apply(null,arguments)};var $e,dt=t._emscripten_run_in_main_runtime_thread_js=function(){return(dt=t._emscripten_run_in_main_runtime_thread_js=t.asm.xb).apply(null,arguments)},Ke=t.__emscripten_proxy_execute_task_queue=function(){return(Ke=t.__emscripten_proxy_execute_task_queue=t.asm.yb).apply(null,arguments)},qt=t.__emscripten_thread_free_data=function(){return(qt=t.__emscripten_thread_free_data=t.asm.zb).apply(null,arguments)},nn=t.__emscripten_thread_exit=function(){return(nn=t.__emscripten_thread_exit=t.asm.Ab).apply(null,arguments)},ln=t._setThrew=function(){return(ln=t._setThrew=t.asm.Bb).apply(null,arguments)},An=t._emscripten_stack_set_limits=function(){return(An=t._emscripten_stack_set_limits=t.asm.Cb).apply(null,arguments)},Oe=t.stackSave=function(){return(Oe=t.stackSave=t.asm.Db).apply(null,arguments)},De=t.stackRestore=function(){return(De=t.stackRestore=t.asm.Eb).apply(null,arguments)},Be=t.stackAlloc=function(){return(Be=t.stackAlloc=t.asm.Fb).apply(null,arguments)},Ye=t.___cxa_can_catch=function(){return(Ye=t.___cxa_can_catch=t.asm.Gb).apply(null,arguments)},Nt=t.___cxa_is_pointer_type=function(){return(Nt=t.___cxa_is_pointer_type=t.asm.Hb).apply(null,arguments)},jt=t.dynCall_j=function(){return(jt=t.dynCall_j=t.asm.Ib).apply(null,arguments)},un=t.dynCall_iiiiij=function(){return(un=t.dynCall_iiiiij=t.asm.Jb).apply(null,arguments)},Hn=t.dynCall_jii=function(){return(Hn=t.dynCall_jii=t.asm.Kb).apply(null,arguments)},Rn=t.dynCall_viiiiij=function(){return(Rn=t.dynCall_viiiiij=t.asm.Lb).apply(null,arguments)},fr=t.dynCall_vjji=function(){return(fr=t.dynCall_vjji=t.asm.Mb).apply(null,arguments)},or=t.dynCall_viiijjjii=function(){return(or=t.dynCall_viiijjjii=t.asm.Nb).apply(null,arguments)},$t=t.dynCall_iij=function(){return($t=t.dynCall_iij=t.asm.Ob).apply(null,arguments)},er=t.dynCall_ji=function(){return(er=t.dynCall_ji=t.asm.Pb).apply(null,arguments)},Jn=t.dynCall_iiiiiij=function(){return(Jn=t.dynCall_iiiiiij=t.asm.Qb).apply(null,arguments)},Bt=t.dynCall_iiij=function(){return(Bt=t.dynCall_iiij=t.asm.Rb).apply(null,arguments)};function Ai(){function Le(){if(!$e&&($e=!0,t.calledRun=!0,!$n)&&(ue||Mn(ze),e(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),!ue)){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var Xe=t.postRun.shift();P.unshift(Xe)}Mn(P)}}if(!(0<ce))if(ue)e(t),ue||Mn(ze),postMessage({cmd:"loaded"});else{if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)_e();Mn(Pe),0<ce||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Le()},1)):Le())}}if(t.UTF8ToString=xt,t.stringToUTF8=function(Le,Xe,He){return tn(Le,g(),Xe,He)},t.lengthBytesUTF8=Un,t.keepRuntimeAlive=ne,t.wasmMemory=K,t.stackSave=Oe,t.stackRestore=De,t.stackAlloc=Be,t.ExitStatus=rt,t.PThread=wt,Y=function Le(){$e||Ai(),$e||(Y=Le)},t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return Ai(),M.ready});Ie.exports=p},932:(Ie,S,y)=>{var E,p=(E=(E=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(M){var d,g,x;M=M||{},d||(d=M!==void 0?M:{}),d.ready=new Promise(function(pe,at){g=pe,x=at});var v,u,t,e,o,c,b=Object.assign({},d),A="./this.program",w=(pe,at)=>{throw at},D=typeof window=="object",F=typeof importScripts=="function",Z=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",L="";Z?(L=F?y(908).dirname(L)+"/":"//",c=()=>{o||(e=y(1384),o=y(908))},v=function(pe,at){return c(),pe=o.normalize(pe),e.readFileSync(pe,at?void 0:"utf8")},t=pe=>((pe=v(pe,!0)).buffer||(pe=new Uint8Array(pe)),pe),u=(pe,at,Dt)=>{c(),pe=o.normalize(pe),e.readFile(pe,function(vn,bn){vn?Dt(vn):at(bn.buffer)})},1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(pe){if(!(pe instanceof ht))throw pe}),process.on("unhandledRejection",function(pe){throw pe}),w=(pe,at)=>{if(H||0<Ln)throw process.exitCode=pe,at;at instanceof ht||de("exiting due to exception: "+at),process.exit(pe)},d.inspect=function(){return"[Emscripten Module object]"}):(D||F)&&(F?L=self.location.href:typeof document!="undefined"&&document.currentScript&&(L=document.currentScript.src),E&&(L=E),L=L.indexOf("blob:")!==0?L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v=pe=>{var at=new XMLHttpRequest;return at.open("GET",pe,!1),at.send(null),at.responseText},F&&(t=pe=>{var at=new XMLHttpRequest;return at.open("GET",pe,!1),at.responseType="arraybuffer",at.send(null),new Uint8Array(at.response)}),u=(pe,at,Dt)=>{var vn=new XMLHttpRequest;vn.open("GET",pe,!0),vn.responseType="arraybuffer",vn.onload=()=>{vn.status==200||vn.status==0&&vn.response?at(vn.response):Dt()},vn.onerror=Dt,vn.send(null)});var W,k=d.print||console.log.bind(console),de=d.printErr||console.warn.bind(console);Object.assign(d,b),b=null,d.thisProgram&&(A=d.thisProgram),d.quit&&(w=d.quit),d.wasmBinary&&(W=d.wasmBinary);var H=d.noExitRuntime||!1;typeof WebAssembly!="object"&&Yt("no native wasm support detected");var ue,ve,ke,Ae,be,G,ie=!1,V=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function ae(pe,at,Dt){var vn=(at>>>=0)+Dt;for(Dt=at;pe[Dt]&&!(Dt>=vn);)++Dt;if(16<Dt-at&&pe.buffer&&V)return V.decode(pe.subarray(at,Dt));for(vn="";at<Dt;){var bn=pe[at++];if(128&bn){var Pn=63&pe[at++];if((224&bn)==192)vn+=String.fromCharCode((31&bn)<<6|Pn);else{var ar=63&pe[at++];65536>(bn=(240&bn)==224?(15&bn)<<12|Pn<<6|ar:(7&bn)<<18|Pn<<12|ar<<6|63&pe[at++])?vn+=String.fromCharCode(bn):(bn-=65536,vn+=String.fromCharCode(55296|bn>>10,56320|1023&bn))}}else vn+=String.fromCharCode(bn)}return vn}function K(pe,at){return(pe>>>=0)?ae(Ae,pe,at):""}function he(pe,at,Dt,vn){if(!(0<vn))return 0;var bn=Dt>>>=0;vn=Dt+vn-1;for(var Pn=0;Pn<pe.length;++Pn){var ar=pe.charCodeAt(Pn);if(55296<=ar&&57343>=ar&&(ar=65536+((1023&ar)<<10)|1023&pe.charCodeAt(++Pn)),127>=ar){if(Dt>=vn)break;at[Dt++>>>0]=ar}else{if(2047>=ar){if(Dt+1>=vn)break;at[Dt++>>>0]=192|ar>>6}else{if(65535>=ar){if(Dt+2>=vn)break;at[Dt++>>>0]=224|ar>>12}else{if(Dt+3>=vn)break;at[Dt++>>>0]=240|ar>>18,at[Dt++>>>0]=128|ar>>12&63}at[Dt++>>>0]=128|ar>>6&63}at[Dt++>>>0]=128|63&ar}}return at[Dt>>>0]=0,Dt-bn}function Se(pe){for(var at=0,Dt=0;Dt<pe.length;++Dt){var vn=pe.charCodeAt(Dt);127>=vn?at++:2047>=vn?at+=2:55296<=vn&&57343>=vn?(at+=4,++Dt):at+=3}return at}function Fe(){var pe=ue.buffer;ve=pe,d.HEAP8=ke=new Int8Array(pe),d.HEAP16=new Int16Array(pe),d.HEAP32=be=new Int32Array(pe),d.HEAPU8=Ae=new Uint8Array(pe),d.HEAPU16=new Uint16Array(pe),d.HEAPU32=G=new Uint32Array(pe),d.HEAPF32=new Float32Array(pe),d.HEAPF64=new Float64Array(pe)}var nt,lt=[],Gt=[],pn=[],$n=[],Ln=0;function st(){var pe=d.preRun.shift();lt.unshift(pe)}var xt,tn=0,Un=null,We=null;function Yt(pe){throw d.onAbort&&d.onAbort(pe),de(pe="Aborted("+pe+")"),ie=!0,pe=new WebAssembly.RuntimeError(pe+". Build with -sASSERTIONS for more info."),x(pe),pe}function Ze(){return xt.startsWith("data:application/octet-stream;base64,")}if(xt="ort-wasm.wasm",!Ze()){var Pe=xt;xt=d.locateFile?d.locateFile(Pe,L):L+Pe}function ze(){var pe=xt;try{if(pe==xt&&W)return new Uint8Array(W);if(t)return t(pe);throw"both async and sync fetching of the wasm failed"}catch(at){Yt(at)}}function ht(pe){this.name="ExitStatus",this.message="Program terminated with exit("+pe+")",this.status=pe}function P(pe){for(;0<pe.length;)pe.shift()(d)}var ne=[],_e=0,oe=0;function ce(pe){this.Db=pe,this.zb=pe-24,this.Ub=function(at){G[this.zb+4>>2>>>0]=at},this.Eb=function(){return G[this.zb+4>>2>>>0]},this.Sb=function(at){G[this.zb+8>>2>>>0]=at},this.Wb=function(){return G[this.zb+8>>2>>>0]},this.Tb=function(){be[this.zb>>2>>>0]=0},this.Ib=function(at){ke[this.zb+12>>0>>>0]=at?1:0},this.Pb=function(){return ke[this.zb+12>>0>>>0]!=0},this.Jb=function(at){ke[this.zb+13>>0>>>0]=at?1:0},this.Lb=function(){return ke[this.zb+13>>0>>>0]!=0},this.Rb=function(at,Dt){this.Fb(0),this.Ub(at),this.Sb(Dt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){be[this.zb>>2>>>0]+=1},this.Xb=function(){var at=be[this.zb>>2>>>0];return be[this.zb>>2>>>0]=at-1,at===1},this.Fb=function(at){G[this.zb+16>>2>>>0]=at},this.Ob=function(){return G[this.zb+16>>2>>>0]},this.Qb=function(){if(Kn(this.Eb()))return G[this.Db>>2>>>0];var at=this.Ob();return at!==0?at:this.Db}}function ye(pe){return Cr(new ce(pe).zb)}var Y=[];function Ne(pe){var at=Y[pe];return at||(pe>=Y.length&&(Y.length=pe+1),Y[pe]=at=nt.get(pe)),at}function Qe(pe){var at=Se(pe)+1,Dt=cr(at);return Dt&&he(pe,ke,Dt,at),Dt}var mt={};function Ve(){if(!rt){var pe,at={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"};for(pe in mt)mt[pe]===void 0?delete at[pe]:at[pe]=mt[pe];var Dt=[];for(pe in at)Dt.push(pe+"="+at[pe]);rt=Dt}return rt}var rt,yt=[null,[],[]];function Tt(pe,at){var Dt=yt[pe];at===0||at===10?((pe===1?k:de)(ae(Dt,0)),Dt.length=0):Dt.push(at)}var Ht=0;function en(pe){return pe%4==0&&(pe%100!=0||pe%400==0)}var wt=[31,29,31,30,31,30,31,31,30,31,30,31],Mn=[31,28,31,30,31,30,31,31,30,31,30,31];function kn(pe,at,Dt,vn){function bn(Bn,Li,Ji){for(Bn=typeof Bn=="number"?Bn.toString():Bn||"";Bn.length<Li;)Bn=Ji[0]+Bn;return Bn}function Pn(Bn,Li){return bn(Bn,Li,"0")}function ar(Bn,Li){function Ji(ea){return 0>ea?-1:0<ea?1:0}var Na;return(Na=Ji(Bn.getFullYear()-Li.getFullYear()))===0&&(Na=Ji(Bn.getMonth()-Li.getMonth()))===0&&(Na=Ji(Bn.getDate()-Li.getDate())),Na}function Zr(Bn){switch(Bn.getDay()){case 0:return new Date(Bn.getFullYear()-1,11,29);case 1:return Bn;case 2:return new Date(Bn.getFullYear(),0,3);case 3:return new Date(Bn.getFullYear(),0,2);case 4:return new Date(Bn.getFullYear(),0,1);case 5:return new Date(Bn.getFullYear()-1,11,31);case 6:return new Date(Bn.getFullYear()-1,11,30)}}function Xr(Bn){var Li=Bn.Bb;for(Bn=new Date(new Date(Bn.Cb+1900,0,1).getTime());0<Li;){var Ji=Bn.getMonth(),Na=(en(Bn.getFullYear())?wt:Mn)[Ji];if(!(Li>Na-Bn.getDate())){Bn.setDate(Bn.getDate()+Li);break}Li-=Na-Bn.getDate()+1,Bn.setDate(1),11>Ji?Bn.setMonth(Ji+1):(Bn.setMonth(0),Bn.setFullYear(Bn.getFullYear()+1))}return Ji=new Date(Bn.getFullYear()+1,0,4),Li=Zr(new Date(Bn.getFullYear(),0,4)),Ji=Zr(Ji),0>=ar(Li,Bn)?0>=ar(Ji,Bn)?Bn.getFullYear()+1:Bn.getFullYear():Bn.getFullYear()-1}var ui=be[vn+40>>2>>>0];for(var qr in vn={$b:be[vn>>2>>>0],Zb:be[vn+4>>2>>>0],Gb:be[vn+8>>2>>>0],Kb:be[vn+12>>2>>>0],Hb:be[vn+16>>2>>>0],Cb:be[vn+20>>2>>>0],Ab:be[vn+24>>2>>>0],Bb:be[vn+28>>2>>>0],bc:be[vn+32>>2>>>0],Yb:be[vn+36>>2>>>0],ac:ui?K(ui):""},Dt=K(Dt),ui={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Dt=Dt.replace(new RegExp(qr,"g"),ui[qr]);var Ti="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),fa="January February March April May June July August September October November December".split(" ");for(qr in ui={"%a":function(Bn){return Ti[Bn.Ab].substring(0,3)},"%A":function(Bn){return Ti[Bn.Ab]},"%b":function(Bn){return fa[Bn.Hb].substring(0,3)},"%B":function(Bn){return fa[Bn.Hb]},"%C":function(Bn){return Pn((Bn.Cb+1900)/100|0,2)},"%d":function(Bn){return Pn(Bn.Kb,2)},"%e":function(Bn){return bn(Bn.Kb,2," ")},"%g":function(Bn){return Xr(Bn).toString().substring(2)},"%G":function(Bn){return Xr(Bn)},"%H":function(Bn){return Pn(Bn.Gb,2)},"%I":function(Bn){return(Bn=Bn.Gb)==0?Bn=12:12<Bn&&(Bn-=12),Pn(Bn,2)},"%j":function(Bn){for(var Li=0,Ji=0;Ji<=Bn.Hb-1;Li+=(en(Bn.Cb+1900)?wt:Mn)[Ji++]);return Pn(Bn.Kb+Li,3)},"%m":function(Bn){return Pn(Bn.Hb+1,2)},"%M":function(Bn){return Pn(Bn.Zb,2)},"%n":function(){return`
`},"%p":function(Bn){return 0<=Bn.Gb&&12>Bn.Gb?"AM":"PM"},"%S":function(Bn){return Pn(Bn.$b,2)},"%t":function(){return"	"},"%u":function(Bn){return Bn.Ab||7},"%U":function(Bn){return Pn(Math.floor((Bn.Bb+7-Bn.Ab)/7),2)},"%V":function(Bn){var Li=Math.floor((Bn.Bb+7-(Bn.Ab+6)%7)/7);if(2>=(Bn.Ab+371-Bn.Bb-2)%7&&Li++,Li)Li==53&&((Ji=(Bn.Ab+371-Bn.Bb)%7)==4||Ji==3&&en(Bn.Cb)||(Li=1));else{Li=52;var Ji=(Bn.Ab+7-Bn.Bb-1)%7;(Ji==4||Ji==5&&en(Bn.Cb%400-1))&&Li++}return Pn(Li,2)},"%w":function(Bn){return Bn.Ab},"%W":function(Bn){return Pn(Math.floor((Bn.Bb+7-(Bn.Ab+6)%7)/7),2)},"%y":function(Bn){return(Bn.Cb+1900).toString().substring(2)},"%Y":function(Bn){return Bn.Cb+1900},"%z":function(Bn){var Li=0<=(Bn=Bn.Yb);return Bn=Math.abs(Bn)/60,(Li?"+":"-")+String("0000"+(Bn/60*100+Bn%60)).slice(-4)},"%Z":function(Bn){return Bn.ac},"%%":function(){return"%"}},Dt=Dt.replace(/%%/g,"\0\0"),ui)Dt.includes(qr)&&(Dt=Dt.replace(new RegExp(qr,"g"),ui[qr](vn)));return qr=function(Bn){var Li=Array(Se(Bn)+1);return he(Bn,Li,0,Li.length),Li}(Dt=Dt.replace(/\0\0/g,"%")),qr.length>at?0:(ke.set(qr,pe>>>0),qr.length-1)}var jn={a:function(pe){return cr(pe+24)+24},m:function(pe){return(pe=new ce(pe)).Pb()||(pe.Ib(!0),_e--),pe.Jb(!1),ne.push(pe),pe.Nb(),pe.Qb()},ia:function(pe){throw de("Unexpected exception thrown, this is not properly supported - aborting"),ie=!0,pe},w:function(){Sr(0);var pe=ne.pop();if(pe.Xb()&&!pe.Lb()){var at=pe.Wb();at&&Ne(at)(pe.Db),ye(pe.Db)}oe=0},d:function(){var pe=oe;if(!pe)return Ht=0;var at=new ce(pe);at.Fb(pe);var Dt=at.Eb();if(!Dt)return Ht=0,pe;for(var vn=Array.prototype.slice.call(arguments),bn=0;bn<vn.length;bn++){var Pn=vn[bn];if(Pn===0||Pn===Dt)break;if(Xi(Pn,Dt,at.zb+16))return Ht=Pn,pe}return Ht=Dt,pe},k:function(){var pe=oe;if(!pe)return Ht=0;var at=new ce(pe);at.Fb(pe);var Dt=at.Eb();if(!Dt)return Ht=0,pe;for(var vn=Array.prototype.slice.call(arguments),bn=0;bn<vn.length;bn++){var Pn=vn[bn];if(Pn===0||Pn===Dt)break;if(Xi(Pn,Dt,at.zb+16))return Ht=Pn,pe}return Ht=Dt,pe},g:function(){var pe=oe;if(!pe)return Ht=0;var at=new ce(pe);at.Fb(pe);var Dt=at.Eb();if(!Dt)return Ht=0,pe;for(var vn=Array.prototype.slice.call(arguments),bn=0;bn<vn.length;bn++){var Pn=vn[bn];if(Pn===0||Pn===Dt)break;if(Xi(Pn,Dt,at.zb+16))return Ht=Pn,pe}return Ht=Dt,pe},s:ye,L:function(){var pe=ne.pop();pe||Yt("no exception to throw");var at=pe.Db;throw pe.Lb()||(ne.push(pe),pe.Jb(!0),pe.Ib(!1),_e++),oe=at,at},b:function(pe,at,Dt){throw new ce(pe).Rb(at,Dt),oe=pe,_e++,pe},la:function(){return _e},i:function(pe){throw oe||(oe=pe),pe},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Yt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Yt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(pe,at){pe=new Date(1e3*(G[pe>>>2]+4294967296*be[pe+4>>>2])),be[at>>2>>>0]=pe.getUTCSeconds(),be[at+4>>2>>>0]=pe.getUTCMinutes(),be[at+8>>2>>>0]=pe.getUTCHours(),be[at+12>>2>>>0]=pe.getUTCDate(),be[at+16>>2>>>0]=pe.getUTCMonth(),be[at+20>>2>>>0]=pe.getUTCFullYear()-1900,be[at+24>>2>>>0]=pe.getUTCDay(),be[at+28>>2>>>0]=(pe.getTime()-Date.UTC(pe.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(pe,at){pe=new Date(1e3*(G[pe>>>2]+4294967296*be[pe+4>>>2])),be[at>>2>>>0]=pe.getSeconds(),be[at+4>>2>>>0]=pe.getMinutes(),be[at+8>>2>>>0]=pe.getHours(),be[at+12>>2>>>0]=pe.getDate(),be[at+16>>2>>>0]=pe.getMonth(),be[at+20>>2>>>0]=pe.getFullYear()-1900,be[at+24>>2>>>0]=pe.getDay();var Dt=new Date(pe.getFullYear(),0,1);be[at+28>>2>>>0]=(pe.getTime()-Dt.getTime())/864e5|0,be[at+36>>2>>>0]=-60*pe.getTimezoneOffset();var vn=new Date(pe.getFullYear(),6,1).getTimezoneOffset();Dt=Dt.getTimezoneOffset(),be[at+32>>2>>>0]=0|(vn!=Dt&&pe.getTimezoneOffset()==Math.min(Dt,vn))},Fa:function(pe){var at=new Date(be[pe+20>>2>>>0]+1900,be[pe+16>>2>>>0],be[pe+12>>2>>>0],be[pe+8>>2>>>0],be[pe+4>>2>>>0],be[pe>>2>>>0],0),Dt=be[pe+32>>2>>>0],vn=at.getTimezoneOffset(),bn=new Date(at.getFullYear(),0,1),Pn=new Date(at.getFullYear(),6,1).getTimezoneOffset(),ar=bn.getTimezoneOffset(),Zr=Math.min(ar,Pn);return 0>Dt?be[pe+32>>2>>>0]=Number(Pn!=ar&&Zr==vn):0<Dt!=(Zr==vn)&&(Pn=Math.max(ar,Pn),at.setTime(at.getTime()+6e4*((0<Dt?Zr:Pn)-vn))),be[pe+24>>2>>>0]=at.getDay(),be[pe+28>>2>>>0]=(at.getTime()-bn.getTime())/864e5|0,be[pe>>2>>>0]=at.getSeconds(),be[pe+4>>2>>>0]=at.getMinutes(),be[pe+8>>2>>>0]=at.getHours(),be[pe+12>>2>>>0]=at.getDate(),be[pe+16>>2>>>0]=at.getMonth(),at.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function pe(at,Dt,vn){pe.Vb||(pe.Vb=!0,function(bn,Pn,ar){function Zr(fa){return(fa=fa.toTimeString().match(/\(([A-Za-z ]+)\)$/))?fa[1]:"GMT"}var Xr=new Date().getFullYear(),ui=new Date(Xr,0,1),qr=new Date(Xr,6,1);Xr=ui.getTimezoneOffset();var Ti=qr.getTimezoneOffset();be[bn>>2>>>0]=60*Math.max(Xr,Ti),be[Pn>>2>>>0]=Number(Xr!=Ti),bn=Zr(ui),Pn=Zr(qr),bn=Qe(bn),Pn=Qe(Pn),Ti<Xr?(G[ar>>2>>>0]=bn,G[ar+4>>2>>>0]=Pn):(G[ar>>2>>>0]=Pn,G[ar+4>>2>>>0]=bn)}(at,Dt,vn))},B:function(){Yt("")},ma:function(){return 4294901760},I:Z?()=>{var pe=process.hrtime();return 1e3*pe[0]+pe[1]/1e6}:()=>performance.now(),xa:function(pe,at,Dt){Ae.copyWithin(pe>>>0,at>>>0,at+Dt>>>0)},G:function(pe){var at=Ae.length;if(4294901760<(pe>>>=0))return!1;for(var Dt=1;4>=Dt;Dt*=2){var vn=at*(1+.2/Dt);vn=Math.min(vn,pe+100663296);var bn=Math;vn=Math.max(pe,vn),bn=bn.min.call(bn,4294901760,vn+(65536-vn%65536)%65536);e:{try{ue.grow(bn-ve.byteLength+65535>>>16),Fe();var Pn=1;break e}catch(ar){}Pn=void 0}if(Pn)return!0}return!1},va:function(pe,at){var Dt=0;return Ve().forEach(function(vn,bn){var Pn=at+Dt;for(bn=G[pe+4*bn>>2>>>0]=Pn,Pn=0;Pn<vn.length;++Pn)ke[bn++>>0>>>0]=vn.charCodeAt(Pn);ke[bn>>0>>>0]=0,Dt+=vn.length+1}),0},wa:function(pe,at){var Dt=Ve();G[pe>>2>>>0]=Dt.length;var vn=0;return Dt.forEach(function(bn){vn+=bn.length+1}),G[at>>2>>>0]=vn,0},ba:function(pe){H||0<Ln||($r(),P(pn),mi(0),yt[1].length&&Tt(1,10),yt[2].length&&Tt(2,10)),H||0<Ln||(d.onExit&&d.onExit(pe),ie=!0),w(pe,new ht(pe))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(pe,at,Dt,vn){for(var bn=0,Pn=0;Pn<Dt;Pn++){var ar=G[at>>2>>>0],Zr=G[at+4>>2>>>0];at+=8;for(var Xr=0;Xr<Zr;Xr++)Tt(pe,Ae[ar+Xr>>>0]);bn+=Zr}return G[vn>>2>>>0]=bn,0},c:function(){return Ht},ja:function pe(at,Dt){pe.Mb||(pe.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var bn=new Uint8Array(1);return()=>(crypto.getRandomValues(bn),bn[0])}if(Z)try{var Pn=y(Object(function(){var ar=new Error("Cannot find module 'crypto'");throw ar.code="MODULE_NOT_FOUND",ar}()));return()=>Pn.randomBytes(1)[0]}catch(ar){}return()=>Yt("randomDevice")}());for(var vn=0;vn<Dt;vn++)ke[at+vn>>0>>>0]=pe.Mb();return 0},ea:function(pe,at,Dt){var vn=dr();try{return Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},fa:function(pe,at,Dt){var vn=dr();try{return Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},J:function(pe){var at=dr();try{return Ne(pe)()}catch(Dt){if(Pr(at),Dt!==Dt+0)throw Dt;Sr(1,0)}},e:function(pe,at){var Dt=dr();try{return Ne(pe)(at)}catch(vn){if(Pr(Dt),vn!==vn+0)throw vn;Sr(1,0)}},N:function(pe,at,Dt){var vn=dr();try{return Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},O:function(pe,at,Dt){var vn=dr();try{return Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},j:function(pe,at,Dt){var vn=dr();try{return Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},o:function(pe,at,Dt,vn){var bn=dr();try{return Ne(pe)(at,Dt,vn)}catch(Pn){if(Pr(bn),Pn!==Pn+0)throw Pn;Sr(1,0)}},p:function(pe,at,Dt,vn,bn){var Pn=dr();try{return Ne(pe)(at,Dt,vn,bn)}catch(ar){if(Pr(Pn),ar!==ar+0)throw ar;Sr(1,0)}},M:function(pe,at,Dt,vn,bn,Pn){var ar=dr();try{return Ne(pe)(at,Dt,vn,bn,Pn)}catch(Zr){if(Pr(ar),Zr!==Zr+0)throw Zr;Sr(1,0)}},r:function(pe,at,Dt,vn,bn,Pn){var ar=dr();try{return Ne(pe)(at,Dt,vn,bn,Pn)}catch(Zr){if(Pr(ar),Zr!==Zr+0)throw Zr;Sr(1,0)}},v:function(pe,at,Dt,vn,bn,Pn,ar){var Zr=dr();try{return Ne(pe)(at,Dt,vn,bn,Pn,ar)}catch(Xr){if(Pr(Zr),Xr!==Xr+0)throw Xr;Sr(1,0)}},K:function(pe,at,Dt,vn,bn,Pn,ar,Zr){var Xr=dr();try{return Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr)}catch(ui){if(Pr(Xr),ui!==ui+0)throw ui;Sr(1,0)}},D:function(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti){var fa=dr();try{return Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti)}catch(Bn){if(Pr(fa),Bn!==Bn+0)throw Bn;Sr(1,0)}},X:function(pe,at,Dt,vn,bn,Pn,ar,Zr){var Xr=dr();try{return si(pe,at,Dt,vn,bn,Pn,ar,Zr)}catch(ui){if(Pr(Xr),ui!==ui+0)throw ui;Sr(1,0)}},V:function(pe,at,Dt,vn,bn,Pn,ar){var Zr=dr();try{return pt(pe,at,Dt,vn,bn,Pn,ar)}catch(Xr){if(Pr(Zr),Xr!==Xr+0)throw Xr;Sr(1,0)}},U:function(pe,at,Dt,vn,bn){var Pn=dr();try{return it(pe,at,Dt,vn,bn)}catch(ar){if(Pr(Pn),ar!==ar+0)throw ar;Sr(1,0)}},Z:function(pe,at,Dt,vn){var bn=dr();try{return Ei(pe,at,Dt,vn)}catch(Pn){if(Pr(bn),Pn!==Pn+0)throw Pn;Sr(1,0)}},W:function(pe){var at=dr();try{return Gn(pe)}catch(Dt){if(Pr(at),Dt!==Dt+0)throw Dt;Sr(1,0)}},Y:function(pe,at){var Dt=dr();try{return Ia(pe,at)}catch(vn){if(Pr(Dt),vn!==vn+0)throw vn;Sr(1,0)}},T:function(pe,at,Dt){var vn=dr();try{return Ha(pe,at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},f:function(pe){var at=dr();try{Ne(pe)()}catch(Dt){if(Pr(at),Dt!==Dt+0)throw Dt;Sr(1,0)}},q:function(pe,at){var Dt=dr();try{Ne(pe)(at)}catch(vn){if(Pr(Dt),vn!==vn+0)throw vn;Sr(1,0)}},h:function(pe,at,Dt){var vn=dr();try{Ne(pe)(at,Dt)}catch(bn){if(Pr(vn),bn!==bn+0)throw bn;Sr(1,0)}},da:function(pe,at,Dt,vn){var bn=dr();try{Ne(pe)(at,Dt,vn)}catch(Pn){if(Pr(bn),Pn!==Pn+0)throw Pn;Sr(1,0)}},l:function(pe,at,Dt,vn){var bn=dr();try{Ne(pe)(at,Dt,vn)}catch(Pn){if(Pr(bn),Pn!==Pn+0)throw Pn;Sr(1,0)}},t:function(pe,at,Dt,vn,bn){var Pn=dr();try{Ne(pe)(at,Dt,vn,bn)}catch(ar){if(Pr(Pn),ar!==ar+0)throw ar;Sr(1,0)}},u:function(pe,at,Dt,vn,bn,Pn){var ar=dr();try{Ne(pe)(at,Dt,vn,bn,Pn)}catch(Zr){if(Pr(ar),Zr!==Zr+0)throw Zr;Sr(1,0)}},x:function(pe,at,Dt,vn,bn,Pn,ar){var Zr=dr();try{Ne(pe)(at,Dt,vn,bn,Pn,ar)}catch(Xr){if(Pr(Zr),Xr!==Xr+0)throw Xr;Sr(1,0)}},z:function(pe,at,Dt,vn,bn,Pn,ar,Zr){var Xr=dr();try{Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr)}catch(ui){if(Pr(Xr),ui!==ui+0)throw ui;Sr(1,0)}},ga:function(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr){var ui=dr();try{Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr,Xr)}catch(qr){if(Pr(ui),qr!==qr+0)throw qr;Sr(1,0)}},A:function(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr){var Ti=dr();try{Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr)}catch(fa){if(Pr(Ti),fa!==fa+0)throw fa;Sr(1,0)}},C:function(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti,fa,Bn,Li,Ji){var Na=dr();try{Ne(pe)(at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti,fa,Bn,Li,Ji)}catch(ea){if(Pr(Na),ea!==ea+0)throw ea;Sr(1,0)}},aa:function(pe,at,Dt,vn,bn,Pn,ar,Zr){var Xr=dr();try{Sa(pe,at,Dt,vn,bn,Pn,ar,Zr)}catch(ui){if(Pr(Xr),ui!==ui+0)throw ui;Sr(1,0)}},_:function(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti){var fa=dr();try{ma(pe,at,Dt,vn,bn,Pn,ar,Zr,Xr,ui,qr,Ti)}catch(Bn){if(Pr(fa),Bn!==Bn+0)throw Bn;Sr(1,0)}},$:function(pe,at,Dt,vn,bn,Pn){var ar=dr();try{Qa(pe,at,Dt,vn,bn,Pn)}catch(Zr){if(Pr(ar),Zr!==Zr+0)throw Zr;Sr(1,0)}},n:function(pe){return pe},F:function(pe){Ht=pe},ha:kn,y:function(pe,at,Dt,vn){return kn(pe,at,Dt,vn)}};(function(){function pe(bn){d.asm=bn.exports,ue=d.asm.Ka,Fe(),nt=d.asm.ib,Gt.unshift(d.asm.La),tn--,d.monitorRunDependencies&&d.monitorRunDependencies(tn),tn==0&&(Un!==null&&(clearInterval(Un),Un=null),We&&(bn=We,We=null,bn()))}function at(bn){pe(bn.instance)}function Dt(bn){return function(){if(!W&&(D||F)){if(typeof fetch=="function"&&!xt.startsWith("file://"))return fetch(xt,{credentials:"same-origin"}).then(function(Pn){if(!Pn.ok)throw"failed to load wasm binary file at '"+xt+"'";return Pn.arrayBuffer()}).catch(function(){return ze()});if(u)return new Promise(function(Pn,ar){u(xt,function(Zr){Pn(new Uint8Array(Zr))},ar)})}return Promise.resolve().then(function(){return ze()})}().then(function(Pn){return WebAssembly.instantiate(Pn,vn)}).then(function(Pn){return Pn}).then(bn,function(Pn){de("failed to asynchronously prepare wasm: "+Pn),Yt(Pn)})}var vn={a:jn};if(tn++,d.monitorRunDependencies&&d.monitorRunDependencies(tn),d.instantiateWasm)try{return d.instantiateWasm(vn,pe)}catch(bn){return de("Module.instantiateWasm callback failed with error: "+bn),!1}(W||typeof WebAssembly.instantiateStreaming!="function"||Ze()||xt.startsWith("file://")||Z||typeof fetch!="function"?Dt(at):fetch(xt,{credentials:"same-origin"}).then(function(bn){return WebAssembly.instantiateStreaming(bn,vn).then(at,function(Pn){return de("wasm streaming compile failed: "+Pn),de("falling back to ArrayBuffer instantiation"),Dt(at)})})).catch(x)})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.La).apply(null,arguments)},d._OrtInit=function(){return(d._OrtInit=d.asm.Ma).apply(null,arguments)},d._OrtCreateSessionOptions=function(){return(d._OrtCreateSessionOptions=d.asm.Na).apply(null,arguments)},d._OrtAppendExecutionProvider=function(){return(d._OrtAppendExecutionProvider=d.asm.Oa).apply(null,arguments)},d._OrtAddSessionConfigEntry=function(){return(d._OrtAddSessionConfigEntry=d.asm.Pa).apply(null,arguments)},d._OrtReleaseSessionOptions=function(){return(d._OrtReleaseSessionOptions=d.asm.Qa).apply(null,arguments)},d._OrtCreateSession=function(){return(d._OrtCreateSession=d.asm.Ra).apply(null,arguments)},d._OrtReleaseSession=function(){return(d._OrtReleaseSession=d.asm.Sa).apply(null,arguments)},d._OrtGetInputCount=function(){return(d._OrtGetInputCount=d.asm.Ta).apply(null,arguments)},d._OrtGetOutputCount=function(){return(d._OrtGetOutputCount=d.asm.Ua).apply(null,arguments)},d._OrtGetInputName=function(){return(d._OrtGetInputName=d.asm.Va).apply(null,arguments)},d._OrtGetOutputName=function(){return(d._OrtGetOutputName=d.asm.Wa).apply(null,arguments)},d._OrtFree=function(){return(d._OrtFree=d.asm.Xa).apply(null,arguments)},d._OrtCreateTensor=function(){return(d._OrtCreateTensor=d.asm.Ya).apply(null,arguments)},d._OrtGetTensorData=function(){return(d._OrtGetTensorData=d.asm.Za).apply(null,arguments)},d._OrtReleaseTensor=function(){return(d._OrtReleaseTensor=d.asm._a).apply(null,arguments)},d._OrtCreateRunOptions=function(){return(d._OrtCreateRunOptions=d.asm.$a).apply(null,arguments)},d._OrtAddRunConfigEntry=function(){return(d._OrtAddRunConfigEntry=d.asm.ab).apply(null,arguments)},d._OrtReleaseRunOptions=function(){return(d._OrtReleaseRunOptions=d.asm.bb).apply(null,arguments)},d._OrtRun=function(){return(d._OrtRun=d.asm.cb).apply(null,arguments)},d._OrtEndProfiling=function(){return(d._OrtEndProfiling=d.asm.db).apply(null,arguments)};var mn,cr=d._malloc=function(){return(cr=d._malloc=d.asm.eb).apply(null,arguments)},Cr=d._free=function(){return(Cr=d._free=d.asm.fb).apply(null,arguments)},mi=d._fflush=function(){return(mi=d._fflush=d.asm.gb).apply(null,arguments)},$r=d.___funcs_on_exit=function(){return($r=d.___funcs_on_exit=d.asm.hb).apply(null,arguments)},Sr=d._setThrew=function(){return(Sr=d._setThrew=d.asm.jb).apply(null,arguments)},dr=d.stackSave=function(){return(dr=d.stackSave=d.asm.kb).apply(null,arguments)},Pr=d.stackRestore=function(){return(Pr=d.stackRestore=d.asm.lb).apply(null,arguments)},Hr=d.stackAlloc=function(){return(Hr=d.stackAlloc=d.asm.mb).apply(null,arguments)},Xi=d.___cxa_can_catch=function(){return(Xi=d.___cxa_can_catch=d.asm.nb).apply(null,arguments)},Kn=d.___cxa_is_pointer_type=function(){return(Kn=d.___cxa_is_pointer_type=d.asm.ob).apply(null,arguments)},Gn=d.dynCall_j=function(){return(Gn=d.dynCall_j=d.asm.pb).apply(null,arguments)},pt=d.dynCall_iiiiij=function(){return(pt=d.dynCall_iiiiij=d.asm.qb).apply(null,arguments)},Ha=d.dynCall_jii=function(){return(Ha=d.dynCall_jii=d.asm.rb).apply(null,arguments)},Sa=d.dynCall_viiiiij=function(){return(Sa=d.dynCall_viiiiij=d.asm.sb).apply(null,arguments)},Qa=d.dynCall_vjji=function(){return(Qa=d.dynCall_vjji=d.asm.tb).apply(null,arguments)},ma=d.dynCall_viiijjjii=function(){return(ma=d.dynCall_viiijjjii=d.asm.ub).apply(null,arguments)},Ei=d.dynCall_iij=function(){return(Ei=d.dynCall_iij=d.asm.vb).apply(null,arguments)},Ia=d.dynCall_ji=function(){return(Ia=d.dynCall_ji=d.asm.wb).apply(null,arguments)},si=d.dynCall_iiiiiij=function(){return(si=d.dynCall_iiiiiij=d.asm.xb).apply(null,arguments)},it=d.dynCall_iiij=function(){return(it=d.dynCall_iiij=d.asm.yb).apply(null,arguments)};function Qn(){function pe(){if(!mn&&(mn=!0,d.calledRun=!0,!ie)){if(P(Gt),g(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var at=d.postRun.shift();$n.unshift(at)}P($n)}}if(!(0<tn)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)st();P(lt),0<tn||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),pe()},1)):pe())}}if(d.UTF8ToString=K,d.stringToUTF8=function(pe,at,Dt){return he(pe,Ae,at,Dt)},d.lengthBytesUTF8=Se,d.stackSave=dr,d.stackRestore=Pr,d.stackAlloc=Hr,We=function pe(){mn||Qn(),mn||(We=pe)},d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Qn(),M.ready});Ie.exports=p},4537:Ie=>{"use strict";Ie.exports=function(S,y){for(var E=new Array(arguments.length-1),p=0,M=2,d=!0;M<arguments.length;)E[p++]=arguments[M++];return new Promise(function(g,x){E[p]=function(v){if(d)if(d=!1,v)x(v);else{for(var u=new Array(arguments.length-1),t=0;t<u.length;)u[t++]=arguments[t];g.apply(null,u)}};try{S.apply(y||null,E)}catch(v){d&&(d=!1,x(v))}})}},7419:(Ie,S)=>{"use strict";var y=S;y.length=function(g){var x=g.length;if(!x)return 0;for(var v=0;--x%4>1&&g.charAt(x)==="=";)++v;return Math.ceil(3*g.length)/4-v};for(var E=new Array(64),p=new Array(123),M=0;M<64;)p[E[M]=M<26?M+65:M<52?M+71:M<62?M-4:M-59|43]=M++;y.encode=function(g,x,v){for(var u,t=null,e=[],o=0,c=0;x<v;){var b=g[x++];switch(c){case 0:e[o++]=E[b>>2],u=(3&b)<<4,c=1;break;case 1:e[o++]=E[u|b>>4],u=(15&b)<<2,c=2;break;case 2:e[o++]=E[u|b>>6],e[o++]=E[63&b],c=0}o>8191&&((t||(t=[])).push(String.fromCharCode.apply(String,e)),o=0)}return c&&(e[o++]=E[u],e[o++]=61,c===1&&(e[o++]=61)),t?(o&&t.push(String.fromCharCode.apply(String,e.slice(0,o))),t.join("")):String.fromCharCode.apply(String,e.slice(0,o))};var d="invalid encoding";y.decode=function(g,x,v){for(var u,t=v,e=0,o=0;o<g.length;){var c=g.charCodeAt(o++);if(c===61&&e>1)break;if((c=p[c])===void 0)throw Error(d);switch(e){case 0:u=c,e=1;break;case 1:x[v++]=u<<2|(48&c)>>4,u=c,e=2;break;case 2:x[v++]=(15&u)<<4|(60&c)>>2,u=c,e=3;break;case 3:x[v++]=(3&u)<<6|c,e=0}}if(e===1)throw Error(d);return v-t},y.test=function(g){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(g)}},9211:Ie=>{"use strict";function S(){this._listeners={}}Ie.exports=S,S.prototype.on=function(y,E,p){return(this._listeners[y]||(this._listeners[y]=[])).push({fn:E,ctx:p||this}),this},S.prototype.off=function(y,E){if(y===void 0)this._listeners={};else if(E===void 0)this._listeners[y]=[];else for(var p=this._listeners[y],M=0;M<p.length;)p[M].fn===E?p.splice(M,1):++M;return this},S.prototype.emit=function(y){var E=this._listeners[y];if(E){for(var p=[],M=1;M<arguments.length;)p.push(arguments[M++]);for(M=0;M<E.length;)E[M].fn.apply(E[M++].ctx,p)}return this}},945:Ie=>{"use strict";function S(d){return typeof Float32Array!="undefined"?function(){var g=new Float32Array([-0]),x=new Uint8Array(g.buffer),v=x[3]===128;function u(c,b,A){g[0]=c,b[A]=x[0],b[A+1]=x[1],b[A+2]=x[2],b[A+3]=x[3]}function t(c,b,A){g[0]=c,b[A]=x[3],b[A+1]=x[2],b[A+2]=x[1],b[A+3]=x[0]}function e(c,b){return x[0]=c[b],x[1]=c[b+1],x[2]=c[b+2],x[3]=c[b+3],g[0]}function o(c,b){return x[3]=c[b],x[2]=c[b+1],x[1]=c[b+2],x[0]=c[b+3],g[0]}d.writeFloatLE=v?u:t,d.writeFloatBE=v?t:u,d.readFloatLE=v?e:o,d.readFloatBE=v?o:e}():function(){function g(v,u,t,e){var o=u<0?1:0;if(o&&(u=-u),u===0)v(1/u>0?0:2147483648,t,e);else if(isNaN(u))v(2143289344,t,e);else if(u>34028234663852886e22)v((o<<31|2139095040)>>>0,t,e);else if(u<11754943508222875e-54)v((o<<31|Math.round(u/1401298464324817e-60))>>>0,t,e);else{var c=Math.floor(Math.log(u)/Math.LN2);v((o<<31|c+127<<23|8388607&Math.round(u*Math.pow(2,-c)*8388608))>>>0,t,e)}}function x(v,u,t){var e=v(u,t),o=2*(e>>31)+1,c=e>>>23&255,b=8388607&e;return c===255?b?NaN:o*(1/0):c===0?1401298464324817e-60*o*b:o*Math.pow(2,c-150)*(b+8388608)}d.writeFloatLE=g.bind(null,y),d.writeFloatBE=g.bind(null,E),d.readFloatLE=x.bind(null,p),d.readFloatBE=x.bind(null,M)}(),typeof Float64Array!="undefined"?function(){var g=new Float64Array([-0]),x=new Uint8Array(g.buffer),v=x[7]===128;function u(c,b,A){g[0]=c,b[A]=x[0],b[A+1]=x[1],b[A+2]=x[2],b[A+3]=x[3],b[A+4]=x[4],b[A+5]=x[5],b[A+6]=x[6],b[A+7]=x[7]}function t(c,b,A){g[0]=c,b[A]=x[7],b[A+1]=x[6],b[A+2]=x[5],b[A+3]=x[4],b[A+4]=x[3],b[A+5]=x[2],b[A+6]=x[1],b[A+7]=x[0]}function e(c,b){return x[0]=c[b],x[1]=c[b+1],x[2]=c[b+2],x[3]=c[b+3],x[4]=c[b+4],x[5]=c[b+5],x[6]=c[b+6],x[7]=c[b+7],g[0]}function o(c,b){return x[7]=c[b],x[6]=c[b+1],x[5]=c[b+2],x[4]=c[b+3],x[3]=c[b+4],x[2]=c[b+5],x[1]=c[b+6],x[0]=c[b+7],g[0]}d.writeDoubleLE=v?u:t,d.writeDoubleBE=v?t:u,d.readDoubleLE=v?e:o,d.readDoubleBE=v?o:e}():function(){function g(v,u,t,e,o,c){var b=e<0?1:0;if(b&&(e=-e),e===0)v(0,o,c+u),v(1/e>0?0:2147483648,o,c+t);else if(isNaN(e))v(0,o,c+u),v(2146959360,o,c+t);else if(e>17976931348623157e292)v(0,o,c+u),v((b<<31|2146435072)>>>0,o,c+t);else{var A;if(e<22250738585072014e-324)v((A=e/5e-324)>>>0,o,c+u),v((b<<31|A/4294967296)>>>0,o,c+t);else{var w=Math.floor(Math.log(e)/Math.LN2);w===1024&&(w=1023),v(4503599627370496*(A=e*Math.pow(2,-w))>>>0,o,c+u),v((b<<31|w+1023<<20|1048576*A&1048575)>>>0,o,c+t)}}}function x(v,u,t,e,o){var c=v(e,o+u),b=v(e,o+t),A=2*(b>>31)+1,w=b>>>20&2047,D=4294967296*(1048575&b)+c;return w===2047?D?NaN:A*(1/0):w===0?5e-324*A*D:A*Math.pow(2,w-1075)*(D+4503599627370496)}d.writeDoubleLE=g.bind(null,y,0,4),d.writeDoubleBE=g.bind(null,E,4,0),d.readDoubleLE=x.bind(null,p,0,4),d.readDoubleBE=x.bind(null,M,4,0)}(),d}function y(d,g,x){g[x]=255&d,g[x+1]=d>>>8&255,g[x+2]=d>>>16&255,g[x+3]=d>>>24}function E(d,g,x){g[x]=d>>>24,g[x+1]=d>>>16&255,g[x+2]=d>>>8&255,g[x+3]=255&d}function p(d,g){return(d[g]|d[g+1]<<8|d[g+2]<<16|d[g+3]<<24)>>>0}function M(d,g){return(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3])>>>0}Ie.exports=S(S)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Ie){}return null}module.exports=inquire},6662:Ie=>{"use strict";Ie.exports=function(S,y,E){var p=E||8192,M=p>>>1,d=null,g=p;return function(x){if(x<1||x>M)return S(x);g+x>p&&(d=S(p),g=0);var v=y.call(d,g,g+=x);return 7&g&&(g=1+(7|g)),v}}},4997:(Ie,S)=>{"use strict";var y=S;y.length=function(E){for(var p=0,M=0,d=0;d<E.length;++d)(M=E.charCodeAt(d))<128?p+=1:M<2048?p+=2:(64512&M)==55296&&(64512&E.charCodeAt(d+1))==56320?(++d,p+=4):p+=3;return p},y.read=function(E,p,M){if(M-p<1)return"";for(var d,g=null,x=[],v=0;p<M;)(d=E[p++])<128?x[v++]=d:d>191&&d<224?x[v++]=(31&d)<<6|63&E[p++]:d>239&&d<365?(d=((7&d)<<18|(63&E[p++])<<12|(63&E[p++])<<6|63&E[p++])-65536,x[v++]=55296+(d>>10),x[v++]=56320+(1023&d)):x[v++]=(15&d)<<12|(63&E[p++])<<6|63&E[p++],v>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,x)),v=0);return g?(v&&g.push(String.fromCharCode.apply(String,x.slice(0,v))),g.join("")):String.fromCharCode.apply(String,x.slice(0,v))},y.write=function(E,p,M){for(var d,g,x=M,v=0;v<E.length;++v)(d=E.charCodeAt(v))<128?p[M++]=d:d<2048?(p[M++]=d>>6|192,p[M++]=63&d|128):(64512&d)==55296&&(64512&(g=E.charCodeAt(v+1)))==56320?(d=65536+((1023&d)<<10)+(1023&g),++v,p[M++]=d>>18|240,p[M++]=d>>12&63|128,p[M++]=d>>6&63|128,p[M++]=63&d|128):(p[M++]=d>>12|224,p[M++]=d>>6&63|128,p[M++]=63&d|128);return M-x}},3442:(Ie,S)=>{"use strict";S.__esModule=!0;var y=function(){function E(p){if(!p)throw new TypeError("Invalid argument; `value` has no value.");this.value=E.EMPTY,p&&E.isGuid(p)&&(this.value=p)}return E.isGuid=function(p){var M=p.toString();return p&&(p instanceof E||E.validator.test(M))},E.create=function(){return new E([E.gen(2),E.gen(1),E.gen(1),E.gen(1),E.gen(3)].join("-"))},E.createEmpty=function(){return new E("emptyguid")},E.parse=function(p){return new E(p)},E.raw=function(){return[E.gen(2),E.gen(1),E.gen(1),E.gen(1),E.gen(3)].join("-")},E.gen=function(p){for(var M="",d=0;d<p;d++)M+=(65536*(1+Math.random())|0).toString(16).substring(1);return M},E.prototype.equals=function(p){return E.isGuid(p)&&this.value===p.toString()},E.prototype.isEmpty=function(){return this.value===E.EMPTY},E.prototype.toString=function(){return this.value},E.prototype.toJSON=function(){return{value:this.value}},E.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),E.EMPTY="00000000-0000-0000-0000-000000000000",E}();S.Guid=y},3720:Ie=>{Ie.exports=y;var S=null;try{S=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(H){}function y(H,ue,ve){this.low=0|H,this.high=0|ue,this.unsigned=!!ve}function E(H){return(H&&H.__isLong__)===!0}y.prototype.__isLong__,Object.defineProperty(y.prototype,"__isLong__",{value:!0}),y.isLong=E;var p={},M={};function d(H,ue){var ve,ke,Ae;return ue?(Ae=0<=(H>>>=0)&&H<256)&&(ke=M[H])?ke:(ve=x(H,(0|H)<0?-1:0,!0),Ae&&(M[H]=ve),ve):(Ae=-128<=(H|=0)&&H<128)&&(ke=p[H])?ke:(ve=x(H,H<0?-1:0,!1),Ae&&(p[H]=ve),ve)}function g(H,ue){if(isNaN(H))return ue?w:A;if(ue){if(H<0)return w;if(H>=o)return W}else{if(H<=-c)return k;if(H+1>=c)return L}return H<0?g(-H,ue).neg():x(H%e|0,H/e|0,ue)}function x(H,ue,ve){return new y(H,ue,ve)}y.fromInt=d,y.fromNumber=g,y.fromBits=x;var v=Math.pow;function u(H,ue,ve){if(H.length===0)throw Error("empty string");if(H==="NaN"||H==="Infinity"||H==="+Infinity"||H==="-Infinity")return A;if(typeof ue=="number"?(ve=ue,ue=!1):ue=!!ue,(ve=ve||10)<2||36<ve)throw RangeError("radix");var ke;if((ke=H.indexOf("-"))>0)throw Error("interior hyphen");if(ke===0)return u(H.substring(1),ue,ve).neg();for(var Ae=g(v(ve,8)),be=A,G=0;G<H.length;G+=8){var ie=Math.min(8,H.length-G),V=parseInt(H.substring(G,G+ie),ve);if(ie<8){var ae=g(v(ve,ie));be=be.mul(ae).add(g(V))}else be=(be=be.mul(Ae)).add(g(V))}return be.unsigned=ue,be}function t(H,ue){return typeof H=="number"?g(H,ue):typeof H=="string"?u(H,ue):x(H.low,H.high,typeof ue=="boolean"?ue:H.unsigned)}y.fromString=u,y.fromValue=t;var e=4294967296,o=e*e,c=o/2,b=d(1<<24),A=d(0);y.ZERO=A;var w=d(0,!0);y.UZERO=w;var D=d(1);y.ONE=D;var F=d(1,!0);y.UONE=F;var Z=d(-1);y.NEG_ONE=Z;var L=x(-1,2147483647,!1);y.MAX_VALUE=L;var W=x(-1,-1,!0);y.MAX_UNSIGNED_VALUE=W;var k=x(0,-2147483648,!1);y.MIN_VALUE=k;var de=y.prototype;de.toInt=function(){return this.unsigned?this.low>>>0:this.low},de.toNumber=function(){return this.unsigned?(this.high>>>0)*e+(this.low>>>0):this.high*e+(this.low>>>0)},de.toString=function(H){if((H=H||10)<2||36<H)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var ue=g(H),ve=this.div(ue),ke=ve.mul(ue).sub(this);return ve.toString(H)+ke.toInt().toString(H)}return"-"+this.neg().toString(H)}for(var Ae=g(v(H,6),this.unsigned),be=this,G="";;){var ie=be.div(Ae),V=(be.sub(ie.mul(Ae)).toInt()>>>0).toString(H);if((be=ie).isZero())return V+G;for(;V.length<6;)V="0"+V;G=""+V+G}},de.getHighBits=function(){return this.high},de.getHighBitsUnsigned=function(){return this.high>>>0},de.getLowBits=function(){return this.low},de.getLowBitsUnsigned=function(){return this.low>>>0},de.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var H=this.high!=0?this.high:this.low,ue=31;ue>0&&!(H&1<<ue);ue--);return this.high!=0?ue+33:ue+1},de.isZero=function(){return this.high===0&&this.low===0},de.eqz=de.isZero,de.isNegative=function(){return!this.unsigned&&this.high<0},de.isPositive=function(){return this.unsigned||this.high>=0},de.isOdd=function(){return(1&this.low)==1},de.isEven=function(){return(1&this.low)==0},de.equals=function(H){return E(H)||(H=t(H)),(this.unsigned===H.unsigned||this.high>>>31!=1||H.high>>>31!=1)&&this.high===H.high&&this.low===H.low},de.eq=de.equals,de.notEquals=function(H){return!this.eq(H)},de.neq=de.notEquals,de.ne=de.notEquals,de.lessThan=function(H){return this.comp(H)<0},de.lt=de.lessThan,de.lessThanOrEqual=function(H){return this.comp(H)<=0},de.lte=de.lessThanOrEqual,de.le=de.lessThanOrEqual,de.greaterThan=function(H){return this.comp(H)>0},de.gt=de.greaterThan,de.greaterThanOrEqual=function(H){return this.comp(H)>=0},de.gte=de.greaterThanOrEqual,de.ge=de.greaterThanOrEqual,de.compare=function(H){if(E(H)||(H=t(H)),this.eq(H))return 0;var ue=this.isNegative(),ve=H.isNegative();return ue&&!ve?-1:!ue&&ve?1:this.unsigned?H.high>>>0>this.high>>>0||H.high===this.high&&H.low>>>0>this.low>>>0?-1:1:this.sub(H).isNegative()?-1:1},de.comp=de.compare,de.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(D)},de.neg=de.negate,de.add=function(H){E(H)||(H=t(H));var ue=this.high>>>16,ve=65535&this.high,ke=this.low>>>16,Ae=65535&this.low,be=H.high>>>16,G=65535&H.high,ie=H.low>>>16,V=0,ae=0,K=0,he=0;return K+=(he+=Ae+(65535&H.low))>>>16,ae+=(K+=ke+ie)>>>16,V+=(ae+=ve+G)>>>16,V+=ue+be,x((K&=65535)<<16|(he&=65535),(V&=65535)<<16|(ae&=65535),this.unsigned)},de.subtract=function(H){return E(H)||(H=t(H)),this.add(H.neg())},de.sub=de.subtract,de.multiply=function(H){if(this.isZero())return A;if(E(H)||(H=t(H)),S)return x(S.mul(this.low,this.high,H.low,H.high),S.get_high(),this.unsigned);if(H.isZero())return A;if(this.eq(k))return H.isOdd()?k:A;if(H.eq(k))return this.isOdd()?k:A;if(this.isNegative())return H.isNegative()?this.neg().mul(H.neg()):this.neg().mul(H).neg();if(H.isNegative())return this.mul(H.neg()).neg();if(this.lt(b)&&H.lt(b))return g(this.toNumber()*H.toNumber(),this.unsigned);var ue=this.high>>>16,ve=65535&this.high,ke=this.low>>>16,Ae=65535&this.low,be=H.high>>>16,G=65535&H.high,ie=H.low>>>16,V=65535&H.low,ae=0,K=0,he=0,Se=0;return he+=(Se+=Ae*V)>>>16,K+=(he+=ke*V)>>>16,he&=65535,K+=(he+=Ae*ie)>>>16,ae+=(K+=ve*V)>>>16,K&=65535,ae+=(K+=ke*ie)>>>16,K&=65535,ae+=(K+=Ae*G)>>>16,ae+=ue*V+ve*ie+ke*G+Ae*be,x((he&=65535)<<16|(Se&=65535),(ae&=65535)<<16|(K&=65535),this.unsigned)},de.mul=de.multiply,de.divide=function(H){if(E(H)||(H=t(H)),H.isZero())throw Error("division by zero");var ue,ve,ke;if(S)return this.unsigned||this.high!==-2147483648||H.low!==-1||H.high!==-1?x((this.unsigned?S.div_u:S.div_s)(this.low,this.high,H.low,H.high),S.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?w:A;if(this.unsigned){if(H.unsigned||(H=H.toUnsigned()),H.gt(this))return w;if(H.gt(this.shru(1)))return F;ke=w}else{if(this.eq(k))return H.eq(D)||H.eq(Z)?k:H.eq(k)?D:(ue=this.shr(1).div(H).shl(1)).eq(A)?H.isNegative()?D:Z:(ve=this.sub(H.mul(ue)),ke=ue.add(ve.div(H)));if(H.eq(k))return this.unsigned?w:A;if(this.isNegative())return H.isNegative()?this.neg().div(H.neg()):this.neg().div(H).neg();if(H.isNegative())return this.div(H.neg()).neg();ke=A}for(ve=this;ve.gte(H);){ue=Math.max(1,Math.floor(ve.toNumber()/H.toNumber()));for(var Ae=Math.ceil(Math.log(ue)/Math.LN2),be=Ae<=48?1:v(2,Ae-48),G=g(ue),ie=G.mul(H);ie.isNegative()||ie.gt(ve);)ie=(G=g(ue-=be,this.unsigned)).mul(H);G.isZero()&&(G=D),ke=ke.add(G),ve=ve.sub(ie)}return ke},de.div=de.divide,de.modulo=function(H){return E(H)||(H=t(H)),S?x((this.unsigned?S.rem_u:S.rem_s)(this.low,this.high,H.low,H.high),S.get_high(),this.unsigned):this.sub(this.div(H).mul(H))},de.mod=de.modulo,de.rem=de.modulo,de.not=function(){return x(~this.low,~this.high,this.unsigned)},de.and=function(H){return E(H)||(H=t(H)),x(this.low&H.low,this.high&H.high,this.unsigned)},de.or=function(H){return E(H)||(H=t(H)),x(this.low|H.low,this.high|H.high,this.unsigned)},de.xor=function(H){return E(H)||(H=t(H)),x(this.low^H.low,this.high^H.high,this.unsigned)},de.shiftLeft=function(H){return E(H)&&(H=H.toInt()),(H&=63)==0?this:H<32?x(this.low<<H,this.high<<H|this.low>>>32-H,this.unsigned):x(0,this.low<<H-32,this.unsigned)},de.shl=de.shiftLeft,de.shiftRight=function(H){return E(H)&&(H=H.toInt()),(H&=63)==0?this:H<32?x(this.low>>>H|this.high<<32-H,this.high>>H,this.unsigned):x(this.high>>H-32,this.high>=0?0:-1,this.unsigned)},de.shr=de.shiftRight,de.shiftRightUnsigned=function(H){if(E(H)&&(H=H.toInt()),(H&=63)==0)return this;var ue=this.high;return H<32?x(this.low>>>H|ue<<32-H,ue>>>H,this.unsigned):x(H===32?ue:ue>>>H-32,0,this.unsigned)},de.shru=de.shiftRightUnsigned,de.shr_u=de.shiftRightUnsigned,de.toSigned=function(){return this.unsigned?x(this.low,this.high,!1):this},de.toUnsigned=function(){return this.unsigned?this:x(this.low,this.high,!0)},de.toBytes=function(H){return H?this.toBytesLE():this.toBytesBE()},de.toBytesLE=function(){var H=this.high,ue=this.low;return[255&ue,ue>>>8&255,ue>>>16&255,ue>>>24,255&H,H>>>8&255,H>>>16&255,H>>>24]},de.toBytesBE=function(){var H=this.high,ue=this.low;return[H>>>24,H>>>16&255,H>>>8&255,255&H,ue>>>24,ue>>>16&255,ue>>>8&255,255&ue]},y.fromBytes=function(H,ue,ve){return ve?y.fromBytesLE(H,ue):y.fromBytesBE(H,ue)},y.fromBytesLE=function(H,ue){return new y(H[0]|H[1]<<8|H[2]<<16|H[3]<<24,H[4]|H[5]<<8|H[6]<<16|H[7]<<24,ue)},y.fromBytesBE=function(H,ue){return new y(H[4]<<24|H[5]<<16|H[6]<<8|H[7],H[0]<<24|H[1]<<16|H[2]<<8|H[3],ue)}},1446:(Ie,S,y)=>{"use strict";var E,p,M,d=y(2100),g=d.Reader,x=d.Writer,v=d.util,u=d.roots.default||(d.roots.default={});u.onnx=((M={}).Version=(E={},(p=Object.create(E))[E[0]="_START_VERSION"]=0,p[E[1]="IR_VERSION_2017_10_10"]=1,p[E[2]="IR_VERSION_2017_10_30"]=2,p[E[3]="IR_VERSION_2017_11_3"]=3,p[E[4]="IR_VERSION_2019_1_22"]=4,p[E[5]="IR_VERSION"]=5,p),M.AttributeProto=function(){function t(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=v.Long?v.Long.fromBits(0,0,!1):0,t.prototype.s=v.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=v.emptyArray,t.prototype.ints=v.emptyArray,t.prototype.strings=v.emptyArray,t.prototype.tensors=v.emptyArray,t.prototype.graphs=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.name!=null&&e.hasOwnProperty("name")&&o.uint32(10).string(e.name),e.f!=null&&e.hasOwnProperty("f")&&o.uint32(21).float(e.f),e.i!=null&&e.hasOwnProperty("i")&&o.uint32(24).int64(e.i),e.s!=null&&e.hasOwnProperty("s")&&o.uint32(34).bytes(e.s),e.t!=null&&e.hasOwnProperty("t")&&u.onnx.TensorProto.encode(e.t,o.uint32(42).fork()).ldelim(),e.g!=null&&e.hasOwnProperty("g")&&u.onnx.GraphProto.encode(e.g,o.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){o.uint32(58).fork();for(var c=0;c<e.floats.length;++c)o.float(e.floats[c]);o.ldelim()}if(e.ints!=null&&e.ints.length){for(o.uint32(66).fork(),c=0;c<e.ints.length;++c)o.int64(e.ints[c]);o.ldelim()}if(e.strings!=null&&e.strings.length)for(c=0;c<e.strings.length;++c)o.uint32(74).bytes(e.strings[c]);if(e.tensors!=null&&e.tensors.length)for(c=0;c<e.tensors.length;++c)u.onnx.TensorProto.encode(e.tensors[c],o.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(c=0;c<e.graphs.length;++c)u.onnx.GraphProto.encode(e.graphs[c],o.uint32(90).fork()).ldelim();return e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(106).string(e.docString),e.type!=null&&e.hasOwnProperty("type")&&o.uint32(160).int32(e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&o.uint32(170).string(e.refAttrName),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.AttributeProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.name=e.string();break;case 21:b.refAttrName=e.string();break;case 13:b.docString=e.string();break;case 20:b.type=e.int32();break;case 2:b.f=e.float();break;case 3:b.i=e.int64();break;case 4:b.s=e.bytes();break;case 5:b.t=u.onnx.TensorProto.decode(e,e.uint32());break;case 6:b.g=u.onnx.GraphProto.decode(e,e.uint32());break;case 7:if(b.floats&&b.floats.length||(b.floats=[]),(7&A)==2)for(var w=e.uint32()+e.pos;e.pos<w;)b.floats.push(e.float());else b.floats.push(e.float());break;case 8:if(b.ints&&b.ints.length||(b.ints=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.ints.push(e.int64());else b.ints.push(e.int64());break;case 9:b.strings&&b.strings.length||(b.strings=[]),b.strings.push(e.bytes());break;case 10:b.tensors&&b.tensors.length||(b.tensors=[]),b.tensors.push(u.onnx.TensorProto.decode(e,e.uint32()));break;case 11:b.graphs&&b.graphs.length||(b.graphs=[]),b.graphs.push(u.onnx.GraphProto.decode(e,e.uint32()));break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!v.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!v.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!(v.isInteger(e.i)||e.i&&v.isInteger(e.i.low)&&v.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||v.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")&&(c=u.onnx.TensorProto.verify(e.t)))return"t."+c;if(e.g!=null&&e.hasOwnProperty("g")&&(c=u.onnx.GraphProto.verify(e.g)))return"g."+c;if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var o=0;o<e.floats.length;++o)if(typeof e.floats[o]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(o=0;o<e.ints.length;++o)if(!(v.isInteger(e.ints[o])||e.ints[o]&&v.isInteger(e.ints[o].low)&&v.isInteger(e.ints[o].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(o=0;o<e.strings.length;++o)if(!(e.strings[o]&&typeof e.strings[o].length=="number"||v.isString(e.strings[o])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(o=0;o<e.tensors.length;++o)if(c=u.onnx.TensorProto.verify(e.tensors[o]))return"tensors."+c}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(o=0;o<e.graphs.length;++o){var c;if(c=u.onnx.GraphProto.verify(e.graphs[o]))return"graphs."+c}}return null},t.fromObject=function(e){if(e instanceof u.onnx.AttributeProto)return e;var o=new u.onnx.AttributeProto;switch(e.name!=null&&(o.name=String(e.name)),e.refAttrName!=null&&(o.refAttrName=String(e.refAttrName)),e.docString!=null&&(o.docString=String(e.docString)),e.type){case"UNDEFINED":case 0:o.type=0;break;case"FLOAT":case 1:o.type=1;break;case"INT":case 2:o.type=2;break;case"STRING":case 3:o.type=3;break;case"TENSOR":case 4:o.type=4;break;case"GRAPH":case 5:o.type=5;break;case"FLOATS":case 6:o.type=6;break;case"INTS":case 7:o.type=7;break;case"STRINGS":case 8:o.type=8;break;case"TENSORS":case 9:o.type=9;break;case"GRAPHS":case 10:o.type=10}if(e.f!=null&&(o.f=Number(e.f)),e.i!=null&&(v.Long?(o.i=v.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?o.i=parseInt(e.i,10):typeof e.i=="number"?o.i=e.i:typeof e.i=="object"&&(o.i=new v.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?v.base64.decode(e.s,o.s=v.newBuffer(v.base64.length(e.s)),0):e.s.length&&(o.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");o.t=u.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");o.g=u.onnx.GraphProto.fromObject(e.g)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");o.floats=[];for(var c=0;c<e.floats.length;++c)o.floats[c]=Number(e.floats[c])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(o.ints=[],c=0;c<e.ints.length;++c)v.Long?(o.ints[c]=v.Long.fromValue(e.ints[c])).unsigned=!1:typeof e.ints[c]=="string"?o.ints[c]=parseInt(e.ints[c],10):typeof e.ints[c]=="number"?o.ints[c]=e.ints[c]:typeof e.ints[c]=="object"&&(o.ints[c]=new v.LongBits(e.ints[c].low>>>0,e.ints[c].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(o.strings=[],c=0;c<e.strings.length;++c)typeof e.strings[c]=="string"?v.base64.decode(e.strings[c],o.strings[c]=v.newBuffer(v.base64.length(e.strings[c])),0):e.strings[c].length&&(o.strings[c]=e.strings[c])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(o.tensors=[],c=0;c<e.tensors.length;++c){if(typeof e.tensors[c]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");o.tensors[c]=u.onnx.TensorProto.fromObject(e.tensors[c])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(o.graphs=[],c=0;c<e.graphs.length;++c){if(typeof e.graphs[c]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");o.graphs[c]=u.onnx.GraphProto.fromObject(e.graphs[c])}}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.floats=[],c.ints=[],c.strings=[],c.tensors=[],c.graphs=[]),o.defaults){if(c.name="",c.f=0,v.Long){var b=new v.Long(0,0,!1);c.i=o.longs===String?b.toString():o.longs===Number?b.toNumber():b}else c.i=o.longs===String?"0":0;o.bytes===String?c.s="":(c.s=[],o.bytes!==Array&&(c.s=v.newBuffer(c.s))),c.t=null,c.g=null,c.docString="",c.type=o.enums===String?"UNDEFINED":0,c.refAttrName=""}if(e.name!=null&&e.hasOwnProperty("name")&&(c.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(c.f=o.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?c.i=o.longs===String?String(e.i):e.i:c.i=o.longs===String?v.Long.prototype.toString.call(e.i):o.longs===Number?new v.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(c.s=o.bytes===String?v.base64.encode(e.s,0,e.s.length):o.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(c.t=u.onnx.TensorProto.toObject(e.t,o)),e.g!=null&&e.hasOwnProperty("g")&&(c.g=u.onnx.GraphProto.toObject(e.g,o)),e.floats&&e.floats.length){c.floats=[];for(var A=0;A<e.floats.length;++A)c.floats[A]=o.json&&!isFinite(e.floats[A])?String(e.floats[A]):e.floats[A]}if(e.ints&&e.ints.length)for(c.ints=[],A=0;A<e.ints.length;++A)typeof e.ints[A]=="number"?c.ints[A]=o.longs===String?String(e.ints[A]):e.ints[A]:c.ints[A]=o.longs===String?v.Long.prototype.toString.call(e.ints[A]):o.longs===Number?new v.LongBits(e.ints[A].low>>>0,e.ints[A].high>>>0).toNumber():e.ints[A];if(e.strings&&e.strings.length)for(c.strings=[],A=0;A<e.strings.length;++A)c.strings[A]=o.bytes===String?v.base64.encode(e.strings[A],0,e.strings[A].length):o.bytes===Array?Array.prototype.slice.call(e.strings[A]):e.strings[A];if(e.tensors&&e.tensors.length)for(c.tensors=[],A=0;A<e.tensors.length;++A)c.tensors[A]=u.onnx.TensorProto.toObject(e.tensors[A],o);if(e.graphs&&e.graphs.length)for(c.graphs=[],A=0;A<e.graphs.length;++A)c.graphs[A]=u.onnx.GraphProto.toObject(e.graphs[A],o);return e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),e.type!=null&&e.hasOwnProperty("type")&&(c.type=o.enums===String?u.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(c.refAttrName=e.refAttrName),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.AttributeType=function(){var e={},o=Object.create(e);return o[e[0]="UNDEFINED"]=0,o[e[1]="FLOAT"]=1,o[e[2]="INT"]=2,o[e[3]="STRING"]=3,o[e[4]="TENSOR"]=4,o[e[5]="GRAPH"]=5,o[e[6]="FLOATS"]=6,o[e[7]="INTS"]=7,o[e[8]="STRINGS"]=8,o[e[9]="TENSORS"]=9,o[e[10]="GRAPHS"]=10,o}(),t}(),M.ValueInfoProto=function(){function t(e){if(e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,o){return o||(o=x.create()),e.name!=null&&e.hasOwnProperty("name")&&o.uint32(10).string(e.name),e.type!=null&&e.hasOwnProperty("type")&&u.onnx.TypeProto.encode(e.type,o.uint32(18).fork()).ldelim(),e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(26).string(e.docString),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.ValueInfoProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.name=e.string();break;case 2:b.type=u.onnx.TypeProto.decode(e,e.uint32());break;case 3:b.docString=e.string();break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!v.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var o=u.onnx.TypeProto.verify(e.type);if(o)return"type."+o}return e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof u.onnx.ValueInfoProto)return e;var o=new u.onnx.ValueInfoProto;if(e.name!=null&&(o.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");o.type=u.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(o.docString=String(e.docString)),o},t.toObject=function(e,o){o||(o={});var c={};return o.defaults&&(c.name="",c.type=null,c.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(c.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(c.type=u.onnx.TypeProto.toObject(e.type,o)),e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.NodeProto=function(){function t(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.input=v.emptyArray,t.prototype.output=v.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=v.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.input!=null&&e.input.length)for(var c=0;c<e.input.length;++c)o.uint32(10).string(e.input[c]);if(e.output!=null&&e.output.length)for(c=0;c<e.output.length;++c)o.uint32(18).string(e.output[c]);if(e.name!=null&&e.hasOwnProperty("name")&&o.uint32(26).string(e.name),e.opType!=null&&e.hasOwnProperty("opType")&&o.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(c=0;c<e.attribute.length;++c)u.onnx.AttributeProto.encode(e.attribute[c],o.uint32(42).fork()).ldelim();return e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(50).string(e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&o.uint32(58).string(e.domain),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.NodeProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.input&&b.input.length||(b.input=[]),b.input.push(e.string());break;case 2:b.output&&b.output.length||(b.output=[]),b.output.push(e.string());break;case 3:b.name=e.string();break;case 4:b.opType=e.string();break;case 7:b.domain=e.string();break;case 5:b.attribute&&b.attribute.length||(b.attribute=[]),b.attribute.push(u.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:b.docString=e.string();break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var o=0;o<e.input.length;++o)if(!v.isString(e.input[o]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(o=0;o<e.output.length;++o)if(!v.isString(e.output[o]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!v.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!v.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!v.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(o=0;o<e.attribute.length;++o){var c=u.onnx.AttributeProto.verify(e.attribute[o]);if(c)return"attribute."+c}}return e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString)?"docString: string expected":null},t.fromObject=function(e){if(e instanceof u.onnx.NodeProto)return e;var o=new u.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");o.input=[];for(var c=0;c<e.input.length;++c)o.input[c]=String(e.input[c])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(o.output=[],c=0;c<e.output.length;++c)o.output[c]=String(e.output[c])}if(e.name!=null&&(o.name=String(e.name)),e.opType!=null&&(o.opType=String(e.opType)),e.domain!=null&&(o.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(o.attribute=[],c=0;c<e.attribute.length;++c){if(typeof e.attribute[c]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");o.attribute[c]=u.onnx.AttributeProto.fromObject(e.attribute[c])}}return e.docString!=null&&(o.docString=String(e.docString)),o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.input=[],c.output=[],c.attribute=[]),o.defaults&&(c.name="",c.opType="",c.docString="",c.domain=""),e.input&&e.input.length){c.input=[];for(var b=0;b<e.input.length;++b)c.input[b]=e.input[b]}if(e.output&&e.output.length)for(c.output=[],b=0;b<e.output.length;++b)c.output[b]=e.output[b];if(e.name!=null&&e.hasOwnProperty("name")&&(c.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(c.opType=e.opType),e.attribute&&e.attribute.length)for(c.attribute=[],b=0;b<e.attribute.length;++b)c.attribute[b]=u.onnx.AttributeProto.toObject(e.attribute[b],o);return e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(c.domain=e.domain),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.ModelProto=function(){function t(e){if(this.opsetImport=[],this.metadataProps=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.irVersion=v.Long?v.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=v.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=v.Long?v.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.irVersion!=null&&e.hasOwnProperty("irVersion")&&o.uint32(8).int64(e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&o.uint32(18).string(e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&o.uint32(26).string(e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&o.uint32(34).string(e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&o.uint32(40).int64(e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(50).string(e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&u.onnx.GraphProto.encode(e.graph,o.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var c=0;c<e.opsetImport.length;++c)u.onnx.OperatorSetIdProto.encode(e.opsetImport[c],o.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(c=0;c<e.metadataProps.length;++c)u.onnx.StringStringEntryProto.encode(e.metadataProps[c],o.uint32(114).fork()).ldelim();return o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.ModelProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.irVersion=e.int64();break;case 8:b.opsetImport&&b.opsetImport.length||(b.opsetImport=[]),b.opsetImport.push(u.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:b.producerName=e.string();break;case 3:b.producerVersion=e.string();break;case 4:b.domain=e.string();break;case 5:b.modelVersion=e.int64();break;case 6:b.docString=e.string();break;case 7:b.graph=u.onnx.GraphProto.decode(e,e.uint32());break;case 14:b.metadataProps&&b.metadataProps.length||(b.metadataProps=[]),b.metadataProps.push(u.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!(v.isInteger(e.irVersion)||e.irVersion&&v.isInteger(e.irVersion.low)&&v.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var o=0;o<e.opsetImport.length;++o)if(c=u.onnx.OperatorSetIdProto.verify(e.opsetImport[o]))return"opsetImport."+c}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!v.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!v.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!v.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!(v.isInteger(e.modelVersion)||e.modelVersion&&v.isInteger(e.modelVersion.low)&&v.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")&&(c=u.onnx.GraphProto.verify(e.graph)))return"graph."+c;if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(o=0;o<e.metadataProps.length;++o){var c;if(c=u.onnx.StringStringEntryProto.verify(e.metadataProps[o]))return"metadataProps."+c}}return null},t.fromObject=function(e){if(e instanceof u.onnx.ModelProto)return e;var o=new u.onnx.ModelProto;if(e.irVersion!=null&&(v.Long?(o.irVersion=v.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?o.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?o.irVersion=e.irVersion:typeof e.irVersion=="object"&&(o.irVersion=new v.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");o.opsetImport=[];for(var c=0;c<e.opsetImport.length;++c){if(typeof e.opsetImport[c]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");o.opsetImport[c]=u.onnx.OperatorSetIdProto.fromObject(e.opsetImport[c])}}if(e.producerName!=null&&(o.producerName=String(e.producerName)),e.producerVersion!=null&&(o.producerVersion=String(e.producerVersion)),e.domain!=null&&(o.domain=String(e.domain)),e.modelVersion!=null&&(v.Long?(o.modelVersion=v.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?o.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?o.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(o.modelVersion=new v.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(o.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");o.graph=u.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(o.metadataProps=[],c=0;c<e.metadataProps.length;++c){if(typeof e.metadataProps[c]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");o.metadataProps[c]=u.onnx.StringStringEntryProto.fromObject(e.metadataProps[c])}}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.opsetImport=[],c.metadataProps=[]),o.defaults){if(v.Long){var b=new v.Long(0,0,!1);c.irVersion=o.longs===String?b.toString():o.longs===Number?b.toNumber():b}else c.irVersion=o.longs===String?"0":0;c.producerName="",c.producerVersion="",c.domain="",v.Long?(b=new v.Long(0,0,!1),c.modelVersion=o.longs===String?b.toString():o.longs===Number?b.toNumber():b):c.modelVersion=o.longs===String?"0":0,c.docString="",c.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?c.irVersion=o.longs===String?String(e.irVersion):e.irVersion:c.irVersion=o.longs===String?v.Long.prototype.toString.call(e.irVersion):o.longs===Number?new v.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(c.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(c.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(c.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?c.modelVersion=o.longs===String?String(e.modelVersion):e.modelVersion:c.modelVersion=o.longs===String?v.Long.prototype.toString.call(e.modelVersion):o.longs===Number?new v.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(c.graph=u.onnx.GraphProto.toObject(e.graph,o)),e.opsetImport&&e.opsetImport.length){c.opsetImport=[];for(var A=0;A<e.opsetImport.length;++A)c.opsetImport[A]=u.onnx.OperatorSetIdProto.toObject(e.opsetImport[A],o)}if(e.metadataProps&&e.metadataProps.length)for(c.metadataProps=[],A=0;A<e.metadataProps.length;++A)c.metadataProps[A]=u.onnx.StringStringEntryProto.toObject(e.metadataProps[A],o);return c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.StringStringEntryProto=function(){function t(e){if(e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(e,o){return o||(o=x.create()),e.key!=null&&e.hasOwnProperty("key")&&o.uint32(10).string(e.key),e.value!=null&&e.hasOwnProperty("value")&&o.uint32(18).string(e.value),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.StringStringEntryProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.key=e.string();break;case 2:b.value=e.string();break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!v.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!v.isString(e.value)?"value: string expected":null},t.fromObject=function(e){if(e instanceof u.onnx.StringStringEntryProto)return e;var o=new u.onnx.StringStringEntryProto;return e.key!=null&&(o.key=String(e.key)),e.value!=null&&(o.value=String(e.value)),o},t.toObject=function(e,o){o||(o={});var c={};return o.defaults&&(c.key="",c.value=""),e.key!=null&&e.hasOwnProperty("key")&&(c.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(c.value=e.value),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.TensorAnnotation=function(){function t(e){if(this.quantParameterTensorNames=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&o.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var c=0;c<e.quantParameterTensorNames.length;++c)u.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[c],o.uint32(18).fork()).ldelim();return o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.TensorAnnotation;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.tensorName=e.string();break;case 2:b.quantParameterTensorNames&&b.quantParameterTensorNames.length||(b.quantParameterTensorNames=[]),b.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!v.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var o=0;o<e.quantParameterTensorNames.length;++o){var c=u.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[o]);if(c)return"quantParameterTensorNames."+c}}return null},t.fromObject=function(e){if(e instanceof u.onnx.TensorAnnotation)return e;var o=new u.onnx.TensorAnnotation;if(e.tensorName!=null&&(o.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");o.quantParameterTensorNames=[];for(var c=0;c<e.quantParameterTensorNames.length;++c){if(typeof e.quantParameterTensorNames[c]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");o.quantParameterTensorNames[c]=u.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[c])}}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.quantParameterTensorNames=[]),o.defaults&&(c.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(c.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){c.quantParameterTensorNames=[];for(var b=0;b<e.quantParameterTensorNames.length;++b)c.quantParameterTensorNames[b]=u.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[b],o)}return c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.GraphProto=function(){function t(e){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.node=v.emptyArray,t.prototype.name="",t.prototype.initializer=v.emptyArray,t.prototype.docString="",t.prototype.input=v.emptyArray,t.prototype.output=v.emptyArray,t.prototype.valueInfo=v.emptyArray,t.prototype.quantizationAnnotation=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.node!=null&&e.node.length)for(var c=0;c<e.node.length;++c)u.onnx.NodeProto.encode(e.node[c],o.uint32(10).fork()).ldelim();if(e.name!=null&&e.hasOwnProperty("name")&&o.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(c=0;c<e.initializer.length;++c)u.onnx.TensorProto.encode(e.initializer[c],o.uint32(42).fork()).ldelim();if(e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(c=0;c<e.input.length;++c)u.onnx.ValueInfoProto.encode(e.input[c],o.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(c=0;c<e.output.length;++c)u.onnx.ValueInfoProto.encode(e.output[c],o.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(c=0;c<e.valueInfo.length;++c)u.onnx.ValueInfoProto.encode(e.valueInfo[c],o.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(c=0;c<e.quantizationAnnotation.length;++c)u.onnx.TensorAnnotation.encode(e.quantizationAnnotation[c],o.uint32(114).fork()).ldelim();return o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.GraphProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.node&&b.node.length||(b.node=[]),b.node.push(u.onnx.NodeProto.decode(e,e.uint32()));break;case 2:b.name=e.string();break;case 5:b.initializer&&b.initializer.length||(b.initializer=[]),b.initializer.push(u.onnx.TensorProto.decode(e,e.uint32()));break;case 10:b.docString=e.string();break;case 11:b.input&&b.input.length||(b.input=[]),b.input.push(u.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:b.output&&b.output.length||(b.output=[]),b.output.push(u.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:b.valueInfo&&b.valueInfo.length||(b.valueInfo=[]),b.valueInfo.push(u.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:b.quantizationAnnotation&&b.quantizationAnnotation.length||(b.quantizationAnnotation=[]),b.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var o=0;o<e.node.length;++o)if(c=u.onnx.NodeProto.verify(e.node[o]))return"node."+c}if(e.name!=null&&e.hasOwnProperty("name")&&!v.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(o=0;o<e.initializer.length;++o)if(c=u.onnx.TensorProto.verify(e.initializer[o]))return"initializer."+c}if(e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(o=0;o<e.input.length;++o)if(c=u.onnx.ValueInfoProto.verify(e.input[o]))return"input."+c}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(o=0;o<e.output.length;++o)if(c=u.onnx.ValueInfoProto.verify(e.output[o]))return"output."+c}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(o=0;o<e.valueInfo.length;++o)if(c=u.onnx.ValueInfoProto.verify(e.valueInfo[o]))return"valueInfo."+c}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(o=0;o<e.quantizationAnnotation.length;++o){var c;if(c=u.onnx.TensorAnnotation.verify(e.quantizationAnnotation[o]))return"quantizationAnnotation."+c}}return null},t.fromObject=function(e){if(e instanceof u.onnx.GraphProto)return e;var o=new u.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");o.node=[];for(var c=0;c<e.node.length;++c){if(typeof e.node[c]!="object")throw TypeError(".onnx.GraphProto.node: object expected");o.node[c]=u.onnx.NodeProto.fromObject(e.node[c])}}if(e.name!=null&&(o.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(o.initializer=[],c=0;c<e.initializer.length;++c){if(typeof e.initializer[c]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");o.initializer[c]=u.onnx.TensorProto.fromObject(e.initializer[c])}}if(e.docString!=null&&(o.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(o.input=[],c=0;c<e.input.length;++c){if(typeof e.input[c]!="object")throw TypeError(".onnx.GraphProto.input: object expected");o.input[c]=u.onnx.ValueInfoProto.fromObject(e.input[c])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(o.output=[],c=0;c<e.output.length;++c){if(typeof e.output[c]!="object")throw TypeError(".onnx.GraphProto.output: object expected");o.output[c]=u.onnx.ValueInfoProto.fromObject(e.output[c])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(o.valueInfo=[],c=0;c<e.valueInfo.length;++c){if(typeof e.valueInfo[c]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");o.valueInfo[c]=u.onnx.ValueInfoProto.fromObject(e.valueInfo[c])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(o.quantizationAnnotation=[],c=0;c<e.quantizationAnnotation.length;++c){if(typeof e.quantizationAnnotation[c]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");o.quantizationAnnotation[c]=u.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[c])}}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.node=[],c.initializer=[],c.input=[],c.output=[],c.valueInfo=[],c.quantizationAnnotation=[]),o.defaults&&(c.name="",c.docString=""),e.node&&e.node.length){c.node=[];for(var b=0;b<e.node.length;++b)c.node[b]=u.onnx.NodeProto.toObject(e.node[b],o)}if(e.name!=null&&e.hasOwnProperty("name")&&(c.name=e.name),e.initializer&&e.initializer.length)for(c.initializer=[],b=0;b<e.initializer.length;++b)c.initializer[b]=u.onnx.TensorProto.toObject(e.initializer[b],o);if(e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),e.input&&e.input.length)for(c.input=[],b=0;b<e.input.length;++b)c.input[b]=u.onnx.ValueInfoProto.toObject(e.input[b],o);if(e.output&&e.output.length)for(c.output=[],b=0;b<e.output.length;++b)c.output[b]=u.onnx.ValueInfoProto.toObject(e.output[b],o);if(e.valueInfo&&e.valueInfo.length)for(c.valueInfo=[],b=0;b<e.valueInfo.length;++b)c.valueInfo[b]=u.onnx.ValueInfoProto.toObject(e.valueInfo[b],o);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(c.quantizationAnnotation=[],b=0;b<e.quantizationAnnotation.length;++b)c.quantizationAnnotation[b]=u.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[b],o);return c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M.TensorProto=function(){function t(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.dims=v.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=v.emptyArray,t.prototype.int32Data=v.emptyArray,t.prototype.stringData=v.emptyArray,t.prototype.int64Data=v.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=v.newBuffer([]),t.prototype.externalData=v.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=v.emptyArray,t.prototype.uint64Data=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.dims!=null&&e.dims.length){o.uint32(10).fork();for(var c=0;c<e.dims.length;++c)o.int64(e.dims[c]);o.ldelim()}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&o.uint32(16).int32(e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&u.onnx.TensorProto.Segment.encode(e.segment,o.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){for(o.uint32(34).fork(),c=0;c<e.floatData.length;++c)o.float(e.floatData[c]);o.ldelim()}if(e.int32Data!=null&&e.int32Data.length){for(o.uint32(42).fork(),c=0;c<e.int32Data.length;++c)o.int32(e.int32Data[c]);o.ldelim()}if(e.stringData!=null&&e.stringData.length)for(c=0;c<e.stringData.length;++c)o.uint32(50).bytes(e.stringData[c]);if(e.int64Data!=null&&e.int64Data.length){for(o.uint32(58).fork(),c=0;c<e.int64Data.length;++c)o.int64(e.int64Data[c]);o.ldelim()}if(e.name!=null&&e.hasOwnProperty("name")&&o.uint32(66).string(e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&o.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){for(o.uint32(82).fork(),c=0;c<e.doubleData.length;++c)o.double(e.doubleData[c]);o.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){for(o.uint32(90).fork(),c=0;c<e.uint64Data.length;++c)o.uint64(e.uint64Data[c]);o.ldelim()}if(e.docString!=null&&e.hasOwnProperty("docString")&&o.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(c=0;c<e.externalData.length;++c)u.onnx.StringStringEntryProto.encode(e.externalData[c],o.uint32(106).fork()).ldelim();return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&o.uint32(112).int32(e.dataLocation),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.TensorProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:if(b.dims&&b.dims.length||(b.dims=[]),(7&A)==2)for(var w=e.uint32()+e.pos;e.pos<w;)b.dims.push(e.int64());else b.dims.push(e.int64());break;case 2:b.dataType=e.int32();break;case 3:b.segment=u.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(b.floatData&&b.floatData.length||(b.floatData=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.floatData.push(e.float());else b.floatData.push(e.float());break;case 5:if(b.int32Data&&b.int32Data.length||(b.int32Data=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.int32Data.push(e.int32());else b.int32Data.push(e.int32());break;case 6:b.stringData&&b.stringData.length||(b.stringData=[]),b.stringData.push(e.bytes());break;case 7:if(b.int64Data&&b.int64Data.length||(b.int64Data=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.int64Data.push(e.int64());else b.int64Data.push(e.int64());break;case 8:b.name=e.string();break;case 12:b.docString=e.string();break;case 9:b.rawData=e.bytes();break;case 13:b.externalData&&b.externalData.length||(b.externalData=[]),b.externalData.push(u.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:b.dataLocation=e.int32();break;case 10:if(b.doubleData&&b.doubleData.length||(b.doubleData=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.doubleData.push(e.double());else b.doubleData.push(e.double());break;case 11:if(b.uint64Data&&b.uint64Data.length||(b.uint64Data=[]),(7&A)==2)for(w=e.uint32()+e.pos;e.pos<w;)b.uint64Data.push(e.uint64());else b.uint64Data.push(e.uint64());break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var o=0;o<e.dims.length;++o)if(!(v.isInteger(e.dims[o])||e.dims[o]&&v.isInteger(e.dims[o].low)&&v.isInteger(e.dims[o].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!v.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")&&(c=u.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+c;if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(o=0;o<e.floatData.length;++o)if(typeof e.floatData[o]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(o=0;o<e.int32Data.length;++o)if(!v.isInteger(e.int32Data[o]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(o=0;o<e.stringData.length;++o)if(!(e.stringData[o]&&typeof e.stringData[o].length=="number"||v.isString(e.stringData[o])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(o=0;o<e.int64Data.length;++o)if(!(v.isInteger(e.int64Data[o])||e.int64Data[o]&&v.isInteger(e.int64Data[o].low)&&v.isInteger(e.int64Data[o].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!v.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!v.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||v.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(o=0;o<e.externalData.length;++o){var c;if(c=u.onnx.StringStringEntryProto.verify(e.externalData[o]))return"externalData."+c}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(o=0;o<e.doubleData.length;++o)if(typeof e.doubleData[o]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(o=0;o<e.uint64Data.length;++o)if(!(v.isInteger(e.uint64Data[o])||e.uint64Data[o]&&v.isInteger(e.uint64Data[o].low)&&v.isInteger(e.uint64Data[o].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(e){if(e instanceof u.onnx.TensorProto)return e;var o=new u.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");o.dims=[];for(var c=0;c<e.dims.length;++c)v.Long?(o.dims[c]=v.Long.fromValue(e.dims[c])).unsigned=!1:typeof e.dims[c]=="string"?o.dims[c]=parseInt(e.dims[c],10):typeof e.dims[c]=="number"?o.dims[c]=e.dims[c]:typeof e.dims[c]=="object"&&(o.dims[c]=new v.LongBits(e.dims[c].low>>>0,e.dims[c].high>>>0).toNumber())}if(e.dataType!=null&&(o.dataType=0|e.dataType),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");o.segment=u.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(o.floatData=[],c=0;c<e.floatData.length;++c)o.floatData[c]=Number(e.floatData[c])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(o.int32Data=[],c=0;c<e.int32Data.length;++c)o.int32Data[c]=0|e.int32Data[c]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(o.stringData=[],c=0;c<e.stringData.length;++c)typeof e.stringData[c]=="string"?v.base64.decode(e.stringData[c],o.stringData[c]=v.newBuffer(v.base64.length(e.stringData[c])),0):e.stringData[c].length&&(o.stringData[c]=e.stringData[c])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(o.int64Data=[],c=0;c<e.int64Data.length;++c)v.Long?(o.int64Data[c]=v.Long.fromValue(e.int64Data[c])).unsigned=!1:typeof e.int64Data[c]=="string"?o.int64Data[c]=parseInt(e.int64Data[c],10):typeof e.int64Data[c]=="number"?o.int64Data[c]=e.int64Data[c]:typeof e.int64Data[c]=="object"&&(o.int64Data[c]=new v.LongBits(e.int64Data[c].low>>>0,e.int64Data[c].high>>>0).toNumber())}if(e.name!=null&&(o.name=String(e.name)),e.docString!=null&&(o.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?v.base64.decode(e.rawData,o.rawData=v.newBuffer(v.base64.length(e.rawData)),0):e.rawData.length&&(o.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(o.externalData=[],c=0;c<e.externalData.length;++c){if(typeof e.externalData[c]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");o.externalData[c]=u.onnx.StringStringEntryProto.fromObject(e.externalData[c])}}switch(e.dataLocation){case"DEFAULT":case 0:o.dataLocation=0;break;case"EXTERNAL":case 1:o.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(o.doubleData=[],c=0;c<e.doubleData.length;++c)o.doubleData[c]=Number(e.doubleData[c])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(o.uint64Data=[],c=0;c<e.uint64Data.length;++c)v.Long?(o.uint64Data[c]=v.Long.fromValue(e.uint64Data[c])).unsigned=!0:typeof e.uint64Data[c]=="string"?o.uint64Data[c]=parseInt(e.uint64Data[c],10):typeof e.uint64Data[c]=="number"?o.uint64Data[c]=e.uint64Data[c]:typeof e.uint64Data[c]=="object"&&(o.uint64Data[c]=new v.LongBits(e.uint64Data[c].low>>>0,e.uint64Data[c].high>>>0).toNumber(!0))}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.dims=[],c.floatData=[],c.int32Data=[],c.stringData=[],c.int64Data=[],c.doubleData=[],c.uint64Data=[],c.externalData=[]),o.defaults&&(c.dataType=0,c.segment=null,c.name="",o.bytes===String?c.rawData="":(c.rawData=[],o.bytes!==Array&&(c.rawData=v.newBuffer(c.rawData))),c.docString="",c.dataLocation=o.enums===String?"DEFAULT":0),e.dims&&e.dims.length){c.dims=[];for(var b=0;b<e.dims.length;++b)typeof e.dims[b]=="number"?c.dims[b]=o.longs===String?String(e.dims[b]):e.dims[b]:c.dims[b]=o.longs===String?v.Long.prototype.toString.call(e.dims[b]):o.longs===Number?new v.LongBits(e.dims[b].low>>>0,e.dims[b].high>>>0).toNumber():e.dims[b]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(c.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(c.segment=u.onnx.TensorProto.Segment.toObject(e.segment,o)),e.floatData&&e.floatData.length)for(c.floatData=[],b=0;b<e.floatData.length;++b)c.floatData[b]=o.json&&!isFinite(e.floatData[b])?String(e.floatData[b]):e.floatData[b];if(e.int32Data&&e.int32Data.length)for(c.int32Data=[],b=0;b<e.int32Data.length;++b)c.int32Data[b]=e.int32Data[b];if(e.stringData&&e.stringData.length)for(c.stringData=[],b=0;b<e.stringData.length;++b)c.stringData[b]=o.bytes===String?v.base64.encode(e.stringData[b],0,e.stringData[b].length):o.bytes===Array?Array.prototype.slice.call(e.stringData[b]):e.stringData[b];if(e.int64Data&&e.int64Data.length)for(c.int64Data=[],b=0;b<e.int64Data.length;++b)typeof e.int64Data[b]=="number"?c.int64Data[b]=o.longs===String?String(e.int64Data[b]):e.int64Data[b]:c.int64Data[b]=o.longs===String?v.Long.prototype.toString.call(e.int64Data[b]):o.longs===Number?new v.LongBits(e.int64Data[b].low>>>0,e.int64Data[b].high>>>0).toNumber():e.int64Data[b];if(e.name!=null&&e.hasOwnProperty("name")&&(c.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(c.rawData=o.bytes===String?v.base64.encode(e.rawData,0,e.rawData.length):o.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(c.doubleData=[],b=0;b<e.doubleData.length;++b)c.doubleData[b]=o.json&&!isFinite(e.doubleData[b])?String(e.doubleData[b]):e.doubleData[b];if(e.uint64Data&&e.uint64Data.length)for(c.uint64Data=[],b=0;b<e.uint64Data.length;++b)typeof e.uint64Data[b]=="number"?c.uint64Data[b]=o.longs===String?String(e.uint64Data[b]):e.uint64Data[b]:c.uint64Data[b]=o.longs===String?v.Long.prototype.toString.call(e.uint64Data[b]):o.longs===Number?new v.LongBits(e.uint64Data[b].low>>>0,e.uint64Data[b].high>>>0).toNumber(!0):e.uint64Data[b];if(e.docString!=null&&e.hasOwnProperty("docString")&&(c.docString=e.docString),e.externalData&&e.externalData.length)for(c.externalData=[],b=0;b<e.externalData.length;++b)c.externalData[b]=u.onnx.StringStringEntryProto.toObject(e.externalData[b],o);return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(c.dataLocation=o.enums===String?u.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.DataType=function(){var e={},o=Object.create(e);return o[e[0]="UNDEFINED"]=0,o[e[1]="FLOAT"]=1,o[e[2]="UINT8"]=2,o[e[3]="INT8"]=3,o[e[4]="UINT16"]=4,o[e[5]="INT16"]=5,o[e[6]="INT32"]=6,o[e[7]="INT64"]=7,o[e[8]="STRING"]=8,o[e[9]="BOOL"]=9,o[e[10]="FLOAT16"]=10,o[e[11]="DOUBLE"]=11,o[e[12]="UINT32"]=12,o[e[13]="UINT64"]=13,o[e[14]="COMPLEX64"]=14,o[e[15]="COMPLEX128"]=15,o[e[16]="BFLOAT16"]=16,o}(),t.Segment=function(){function e(o){if(o)for(var c=Object.keys(o),b=0;b<c.length;++b)o[c[b]]!=null&&(this[c[b]]=o[c[b]])}return e.prototype.begin=v.Long?v.Long.fromBits(0,0,!1):0,e.prototype.end=v.Long?v.Long.fromBits(0,0,!1):0,e.create=function(o){return new e(o)},e.encode=function(o,c){return c||(c=x.create()),o.begin!=null&&o.hasOwnProperty("begin")&&c.uint32(8).int64(o.begin),o.end!=null&&o.hasOwnProperty("end")&&c.uint32(16).int64(o.end),c},e.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},e.decode=function(o,c){o instanceof g||(o=g.create(o));for(var b=c===void 0?o.len:o.pos+c,A=new u.onnx.TensorProto.Segment;o.pos<b;){var w=o.uint32();switch(w>>>3){case 1:A.begin=o.int64();break;case 2:A.end=o.int64();break;default:o.skipType(7&w)}}return A},e.decodeDelimited=function(o){return o instanceof g||(o=new g(o)),this.decode(o,o.uint32())},e.verify=function(o){return typeof o!="object"||o===null?"object expected":o.begin!=null&&o.hasOwnProperty("begin")&&!(v.isInteger(o.begin)||o.begin&&v.isInteger(o.begin.low)&&v.isInteger(o.begin.high))?"begin: integer|Long expected":o.end!=null&&o.hasOwnProperty("end")&&!(v.isInteger(o.end)||o.end&&v.isInteger(o.end.low)&&v.isInteger(o.end.high))?"end: integer|Long expected":null},e.fromObject=function(o){if(o instanceof u.onnx.TensorProto.Segment)return o;var c=new u.onnx.TensorProto.Segment;return o.begin!=null&&(v.Long?(c.begin=v.Long.fromValue(o.begin)).unsigned=!1:typeof o.begin=="string"?c.begin=parseInt(o.begin,10):typeof o.begin=="number"?c.begin=o.begin:typeof o.begin=="object"&&(c.begin=new v.LongBits(o.begin.low>>>0,o.begin.high>>>0).toNumber())),o.end!=null&&(v.Long?(c.end=v.Long.fromValue(o.end)).unsigned=!1:typeof o.end=="string"?c.end=parseInt(o.end,10):typeof o.end=="number"?c.end=o.end:typeof o.end=="object"&&(c.end=new v.LongBits(o.end.low>>>0,o.end.high>>>0).toNumber())),c},e.toObject=function(o,c){c||(c={});var b={};if(c.defaults){if(v.Long){var A=new v.Long(0,0,!1);b.begin=c.longs===String?A.toString():c.longs===Number?A.toNumber():A}else b.begin=c.longs===String?"0":0;v.Long?(A=new v.Long(0,0,!1),b.end=c.longs===String?A.toString():c.longs===Number?A.toNumber():A):b.end=c.longs===String?"0":0}return o.begin!=null&&o.hasOwnProperty("begin")&&(typeof o.begin=="number"?b.begin=c.longs===String?String(o.begin):o.begin:b.begin=c.longs===String?v.Long.prototype.toString.call(o.begin):c.longs===Number?new v.LongBits(o.begin.low>>>0,o.begin.high>>>0).toNumber():o.begin),o.end!=null&&o.hasOwnProperty("end")&&(typeof o.end=="number"?b.end=c.longs===String?String(o.end):o.end:b.end=c.longs===String?v.Long.prototype.toString.call(o.end):c.longs===Number?new v.LongBits(o.end.low>>>0,o.end.high>>>0).toNumber():o.end),b},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e}(),t.DataLocation=function(){var e={},o=Object.create(e);return o[e[0]="DEFAULT"]=0,o[e[1]="EXTERNAL"]=1,o}(),t}(),M.TensorShapeProto=function(){function t(e){if(this.dim=[],e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.dim=v.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,o){if(o||(o=x.create()),e.dim!=null&&e.dim.length)for(var c=0;c<e.dim.length;++c)u.onnx.TensorShapeProto.Dimension.encode(e.dim[c],o.uint32(10).fork()).ldelim();return o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.TensorShapeProto;e.pos<c;){var A=e.uint32();A>>>3==1?(b.dim&&b.dim.length||(b.dim=[]),b.dim.push(u.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&A)}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var o=0;o<e.dim.length;++o){var c=u.onnx.TensorShapeProto.Dimension.verify(e.dim[o]);if(c)return"dim."+c}}return null},t.fromObject=function(e){if(e instanceof u.onnx.TensorShapeProto)return e;var o=new u.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");o.dim=[];for(var c=0;c<e.dim.length;++c){if(typeof e.dim[c]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");o.dim[c]=u.onnx.TensorShapeProto.Dimension.fromObject(e.dim[c])}}return o},t.toObject=function(e,o){o||(o={});var c={};if((o.arrays||o.defaults)&&(c.dim=[]),e.dim&&e.dim.length){c.dim=[];for(var b=0;b<e.dim.length;++b)c.dim[b]=u.onnx.TensorShapeProto.Dimension.toObject(e.dim[b],o)}return c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.Dimension=function(){function e(c){if(c)for(var b=Object.keys(c),A=0;A<b.length;++A)c[b[A]]!=null&&(this[b[A]]=c[b[A]])}var o;return e.prototype.dimValue=v.Long?v.Long.fromBits(0,0,!1):0,e.prototype.dimParam="",e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:v.oneOfGetter(o=["dimValue","dimParam"]),set:v.oneOfSetter(o)}),e.create=function(c){return new e(c)},e.encode=function(c,b){return b||(b=x.create()),c.dimValue!=null&&c.hasOwnProperty("dimValue")&&b.uint32(8).int64(c.dimValue),c.dimParam!=null&&c.hasOwnProperty("dimParam")&&b.uint32(18).string(c.dimParam),c.denotation!=null&&c.hasOwnProperty("denotation")&&b.uint32(26).string(c.denotation),b},e.encodeDelimited=function(c,b){return this.encode(c,b).ldelim()},e.decode=function(c,b){c instanceof g||(c=g.create(c));for(var A=b===void 0?c.len:c.pos+b,w=new u.onnx.TensorShapeProto.Dimension;c.pos<A;){var D=c.uint32();switch(D>>>3){case 1:w.dimValue=c.int64();break;case 2:w.dimParam=c.string();break;case 3:w.denotation=c.string();break;default:c.skipType(7&D)}}return w},e.decodeDelimited=function(c){return c instanceof g||(c=new g(c)),this.decode(c,c.uint32())},e.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var b={};if(c.dimValue!=null&&c.hasOwnProperty("dimValue")&&(b.value=1,!(v.isInteger(c.dimValue)||c.dimValue&&v.isInteger(c.dimValue.low)&&v.isInteger(c.dimValue.high))))return"dimValue: integer|Long expected";if(c.dimParam!=null&&c.hasOwnProperty("dimParam")){if(b.value===1)return"value: multiple values";if(b.value=1,!v.isString(c.dimParam))return"dimParam: string expected"}return c.denotation!=null&&c.hasOwnProperty("denotation")&&!v.isString(c.denotation)?"denotation: string expected":null},e.fromObject=function(c){if(c instanceof u.onnx.TensorShapeProto.Dimension)return c;var b=new u.onnx.TensorShapeProto.Dimension;return c.dimValue!=null&&(v.Long?(b.dimValue=v.Long.fromValue(c.dimValue)).unsigned=!1:typeof c.dimValue=="string"?b.dimValue=parseInt(c.dimValue,10):typeof c.dimValue=="number"?b.dimValue=c.dimValue:typeof c.dimValue=="object"&&(b.dimValue=new v.LongBits(c.dimValue.low>>>0,c.dimValue.high>>>0).toNumber())),c.dimParam!=null&&(b.dimParam=String(c.dimParam)),c.denotation!=null&&(b.denotation=String(c.denotation)),b},e.toObject=function(c,b){b||(b={});var A={};return b.defaults&&(A.denotation=""),c.dimValue!=null&&c.hasOwnProperty("dimValue")&&(typeof c.dimValue=="number"?A.dimValue=b.longs===String?String(c.dimValue):c.dimValue:A.dimValue=b.longs===String?v.Long.prototype.toString.call(c.dimValue):b.longs===Number?new v.LongBits(c.dimValue.low>>>0,c.dimValue.high>>>0).toNumber():c.dimValue,b.oneofs&&(A.value="dimValue")),c.dimParam!=null&&c.hasOwnProperty("dimParam")&&(A.dimParam=c.dimParam,b.oneofs&&(A.value="dimParam")),c.denotation!=null&&c.hasOwnProperty("denotation")&&(A.denotation=c.denotation),A},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e}(),t}(),M.TypeProto=function(){function t(o){if(o)for(var c=Object.keys(o),b=0;b<c.length;++b)o[c[b]]!=null&&(this[c[b]]=o[c[b]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:v.oneOfGetter(e=["tensorType"]),set:v.oneOfSetter(e)}),t.create=function(o){return new t(o)},t.encode=function(o,c){return c||(c=x.create()),o.tensorType!=null&&o.hasOwnProperty("tensorType")&&u.onnx.TypeProto.Tensor.encode(o.tensorType,c.uint32(10).fork()).ldelim(),o.denotation!=null&&o.hasOwnProperty("denotation")&&c.uint32(50).string(o.denotation),c},t.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},t.decode=function(o,c){o instanceof g||(o=g.create(o));for(var b=c===void 0?o.len:o.pos+c,A=new u.onnx.TypeProto;o.pos<b;){var w=o.uint32();switch(w>>>3){case 1:A.tensorType=u.onnx.TypeProto.Tensor.decode(o,o.uint32());break;case 6:A.denotation=o.string();break;default:o.skipType(7&w)}}return A},t.decodeDelimited=function(o){return o instanceof g||(o=new g(o)),this.decode(o,o.uint32())},t.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.tensorType!=null&&o.hasOwnProperty("tensorType")){var c=u.onnx.TypeProto.Tensor.verify(o.tensorType);if(c)return"tensorType."+c}return o.denotation!=null&&o.hasOwnProperty("denotation")&&!v.isString(o.denotation)?"denotation: string expected":null},t.fromObject=function(o){if(o instanceof u.onnx.TypeProto)return o;var c=new u.onnx.TypeProto;if(o.tensorType!=null){if(typeof o.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");c.tensorType=u.onnx.TypeProto.Tensor.fromObject(o.tensorType)}return o.denotation!=null&&(c.denotation=String(o.denotation)),c},t.toObject=function(o,c){c||(c={});var b={};return c.defaults&&(b.denotation=""),o.tensorType!=null&&o.hasOwnProperty("tensorType")&&(b.tensorType=u.onnx.TypeProto.Tensor.toObject(o.tensorType,c),c.oneofs&&(b.value="tensorType")),o.denotation!=null&&o.hasOwnProperty("denotation")&&(b.denotation=o.denotation),b},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t.Tensor=function(){function o(c){if(c)for(var b=Object.keys(c),A=0;A<b.length;++A)c[b[A]]!=null&&(this[b[A]]=c[b[A]])}return o.prototype.elemType=0,o.prototype.shape=null,o.create=function(c){return new o(c)},o.encode=function(c,b){return b||(b=x.create()),c.elemType!=null&&c.hasOwnProperty("elemType")&&b.uint32(8).int32(c.elemType),c.shape!=null&&c.hasOwnProperty("shape")&&u.onnx.TensorShapeProto.encode(c.shape,b.uint32(18).fork()).ldelim(),b},o.encodeDelimited=function(c,b){return this.encode(c,b).ldelim()},o.decode=function(c,b){c instanceof g||(c=g.create(c));for(var A=b===void 0?c.len:c.pos+b,w=new u.onnx.TypeProto.Tensor;c.pos<A;){var D=c.uint32();switch(D>>>3){case 1:w.elemType=c.int32();break;case 2:w.shape=u.onnx.TensorShapeProto.decode(c,c.uint32());break;default:c.skipType(7&D)}}return w},o.decodeDelimited=function(c){return c instanceof g||(c=new g(c)),this.decode(c,c.uint32())},o.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.elemType!=null&&c.hasOwnProperty("elemType")&&!v.isInteger(c.elemType))return"elemType: integer expected";if(c.shape!=null&&c.hasOwnProperty("shape")){var b=u.onnx.TensorShapeProto.verify(c.shape);if(b)return"shape."+b}return null},o.fromObject=function(c){if(c instanceof u.onnx.TypeProto.Tensor)return c;var b=new u.onnx.TypeProto.Tensor;if(c.elemType!=null&&(b.elemType=0|c.elemType),c.shape!=null){if(typeof c.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");b.shape=u.onnx.TensorShapeProto.fromObject(c.shape)}return b},o.toObject=function(c,b){b||(b={});var A={};return b.defaults&&(A.elemType=0,A.shape=null),c.elemType!=null&&c.hasOwnProperty("elemType")&&(A.elemType=c.elemType),c.shape!=null&&c.hasOwnProperty("shape")&&(A.shape=u.onnx.TensorShapeProto.toObject(c.shape,b)),A},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o}(),t}(),M.OperatorSetIdProto=function(){function t(e){if(e)for(var o=Object.keys(e),c=0;c<o.length;++c)e[o[c]]!=null&&(this[o[c]]=e[o[c]])}return t.prototype.domain="",t.prototype.version=v.Long?v.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(e,o){return o||(o=x.create()),e.domain!=null&&e.hasOwnProperty("domain")&&o.uint32(10).string(e.domain),e.version!=null&&e.hasOwnProperty("version")&&o.uint32(16).int64(e.version),o},t.encodeDelimited=function(e,o){return this.encode(e,o).ldelim()},t.decode=function(e,o){e instanceof g||(e=g.create(e));for(var c=o===void 0?e.len:e.pos+o,b=new u.onnx.OperatorSetIdProto;e.pos<c;){var A=e.uint32();switch(A>>>3){case 1:b.domain=e.string();break;case 2:b.version=e.int64();break;default:e.skipType(7&A)}}return b},t.decodeDelimited=function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!v.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!(v.isInteger(e.version)||e.version&&v.isInteger(e.version.low)&&v.isInteger(e.version.high))?"version: integer|Long expected":null},t.fromObject=function(e){if(e instanceof u.onnx.OperatorSetIdProto)return e;var o=new u.onnx.OperatorSetIdProto;return e.domain!=null&&(o.domain=String(e.domain)),e.version!=null&&(v.Long?(o.version=v.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?o.version=parseInt(e.version,10):typeof e.version=="number"?o.version=e.version:typeof e.version=="object"&&(o.version=new v.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),o},t.toObject=function(e,o){o||(o={});var c={};if(o.defaults)if(c.domain="",v.Long){var b=new v.Long(0,0,!1);c.version=o.longs===String?b.toString():o.longs===Number?b.toNumber():b}else c.version=o.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(c.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?c.version=o.longs===String?String(e.version):e.version:c.version=o.longs===String?v.Long.prototype.toString.call(e.version):o.longs===Number?new v.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),c},t.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},t}(),M),Ie.exports=u},2100:(Ie,S,y)=>{"use strict";Ie.exports=y(9482)},9482:(Ie,S,y)=>{"use strict";var E=S;function p(){E.util._configure(),E.Writer._configure(E.BufferWriter),E.Reader._configure(E.BufferReader)}E.build="minimal",E.Writer=y(1173),E.BufferWriter=y(3155),E.Reader=y(1408),E.BufferReader=y(593),E.util=y(9693),E.rpc=y(5994),E.roots=y(5054),E.configure=p,p()},1408:(Ie,S,y)=>{"use strict";Ie.exports=x;var E,p=y(9693),M=p.LongBits,d=p.utf8;function g(b,A){return RangeError("index out of range: "+b.pos+" + "+(A||1)+" > "+b.len)}function x(b){this.buf=b,this.pos=0,this.len=b.length}var v,u=typeof Uint8Array!="undefined"?function(b){if(b instanceof Uint8Array||Array.isArray(b))return new x(b);throw Error("illegal buffer")}:function(b){if(Array.isArray(b))return new x(b);throw Error("illegal buffer")},t=function(){return p.Buffer?function(b){return(x.create=function(A){return p.Buffer.isBuffer(A)?new E(A):u(A)})(b)}:u};function e(){var b=new M(0,0),A=0;if(!(this.len-this.pos>4)){for(;A<3;++A){if(this.pos>=this.len)throw g(this);if(b.lo=(b.lo|(127&this.buf[this.pos])<<7*A)>>>0,this.buf[this.pos++]<128)return b}return b.lo=(b.lo|(127&this.buf[this.pos++])<<7*A)>>>0,b}for(;A<4;++A)if(b.lo=(b.lo|(127&this.buf[this.pos])<<7*A)>>>0,this.buf[this.pos++]<128)return b;if(b.lo=(b.lo|(127&this.buf[this.pos])<<28)>>>0,b.hi=(b.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return b;if(A=0,this.len-this.pos>4){for(;A<5;++A)if(b.hi=(b.hi|(127&this.buf[this.pos])<<7*A+3)>>>0,this.buf[this.pos++]<128)return b}else for(;A<5;++A){if(this.pos>=this.len)throw g(this);if(b.hi=(b.hi|(127&this.buf[this.pos])<<7*A+3)>>>0,this.buf[this.pos++]<128)return b}throw Error("invalid varint encoding")}function o(b,A){return(b[A-4]|b[A-3]<<8|b[A-2]<<16|b[A-1]<<24)>>>0}function c(){if(this.pos+8>this.len)throw g(this,8);return new M(o(this.buf,this.pos+=4),o(this.buf,this.pos+=4))}x.create=t(),x.prototype._slice=p.Array.prototype.subarray||p.Array.prototype.slice,x.prototype.uint32=(v=4294967295,function(){if(v=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(v=(v|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(v=(v|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return v;if((this.pos+=5)>this.len)throw this.pos=this.len,g(this,10);return v}),x.prototype.int32=function(){return 0|this.uint32()},x.prototype.sint32=function(){var b=this.uint32();return b>>>1^-(1&b)|0},x.prototype.bool=function(){return this.uint32()!==0},x.prototype.fixed32=function(){if(this.pos+4>this.len)throw g(this,4);return o(this.buf,this.pos+=4)},x.prototype.sfixed32=function(){if(this.pos+4>this.len)throw g(this,4);return 0|o(this.buf,this.pos+=4)},x.prototype.float=function(){if(this.pos+4>this.len)throw g(this,4);var b=p.float.readFloatLE(this.buf,this.pos);return this.pos+=4,b},x.prototype.double=function(){if(this.pos+8>this.len)throw g(this,4);var b=p.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,b},x.prototype.bytes=function(){var b=this.uint32(),A=this.pos,w=this.pos+b;if(w>this.len)throw g(this,b);return this.pos+=b,Array.isArray(this.buf)?this.buf.slice(A,w):A===w?new this.buf.constructor(0):this._slice.call(this.buf,A,w)},x.prototype.string=function(){var b=this.bytes();return d.read(b,0,b.length)},x.prototype.skip=function(b){if(typeof b=="number"){if(this.pos+b>this.len)throw g(this,b);this.pos+=b}else do if(this.pos>=this.len)throw g(this);while(128&this.buf[this.pos++]);return this},x.prototype.skipType=function(b){switch(b){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(b=7&this.uint32())!=4;)this.skipType(b);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+b+" at offset "+this.pos)}return this},x._configure=function(b){E=b,x.create=t(),E._configure();var A=p.Long?"toLong":"toNumber";p.merge(x.prototype,{int64:function(){return e.call(this)[A](!1)},uint64:function(){return e.call(this)[A](!0)},sint64:function(){return e.call(this).zzDecode()[A](!1)},fixed64:function(){return c.call(this)[A](!0)},sfixed64:function(){return c.call(this)[A](!1)}})}},593:(Ie,S,y)=>{"use strict";Ie.exports=M;var E=y(1408);(M.prototype=Object.create(E.prototype)).constructor=M;var p=y(9693);function M(d){E.call(this,d)}M._configure=function(){p.Buffer&&(M.prototype._slice=p.Buffer.prototype.slice)},M.prototype.string=function(){var d=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+d,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+d,this.len))},M._configure()},5054:Ie=>{"use strict";Ie.exports={}},5994:(Ie,S,y)=>{"use strict";S.Service=y(7948)},7948:(Ie,S,y)=>{"use strict";Ie.exports=p;var E=y(9693);function p(M,d,g){if(typeof M!="function")throw TypeError("rpcImpl must be a function");E.EventEmitter.call(this),this.rpcImpl=M,this.requestDelimited=Boolean(d),this.responseDelimited=Boolean(g)}(p.prototype=Object.create(E.EventEmitter.prototype)).constructor=p,p.prototype.rpcCall=function M(d,g,x,v,u){if(!v)throw TypeError("request must be specified");var t=this;if(!u)return E.asPromise(M,t,d,g,x,v);if(t.rpcImpl)try{return t.rpcImpl(d,g[t.requestDelimited?"encodeDelimited":"encode"](v).finish(),function(e,o){if(e)return t.emit("error",e,d),u(e);if(o!==null){if(!(o instanceof x))try{o=x[t.responseDelimited?"decodeDelimited":"decode"](o)}catch(c){return t.emit("error",c,d),u(c)}return t.emit("data",o,d),u(null,o)}t.end(!0)})}catch(e){return t.emit("error",e,d),void setTimeout(function(){u(e)},0)}else setTimeout(function(){u(Error("already ended"))},0)},p.prototype.end=function(M){return this.rpcImpl&&(M||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(Ie,S,y)=>{"use strict";Ie.exports=p;var E=y(9693);function p(x,v){this.lo=x>>>0,this.hi=v>>>0}var M=p.zero=new p(0,0);M.toNumber=function(){return 0},M.zzEncode=M.zzDecode=function(){return this},M.length=function(){return 1};var d=p.zeroHash="\0\0\0\0\0\0\0\0";p.fromNumber=function(x){if(x===0)return M;var v=x<0;v&&(x=-x);var u=x>>>0,t=(x-u)/4294967296>>>0;return v&&(t=~t>>>0,u=~u>>>0,++u>4294967295&&(u=0,++t>4294967295&&(t=0))),new p(u,t)},p.from=function(x){if(typeof x=="number")return p.fromNumber(x);if(E.isString(x)){if(!E.Long)return p.fromNumber(parseInt(x,10));x=E.Long.fromString(x)}return x.low||x.high?new p(x.low>>>0,x.high>>>0):M},p.prototype.toNumber=function(x){if(!x&&this.hi>>>31){var v=1+~this.lo>>>0,u=~this.hi>>>0;return v||(u=u+1>>>0),-(v+4294967296*u)}return this.lo+4294967296*this.hi},p.prototype.toLong=function(x){return E.Long?new E.Long(0|this.lo,0|this.hi,Boolean(x)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(x)}};var g=String.prototype.charCodeAt;p.fromHash=function(x){return x===d?M:new p((g.call(x,0)|g.call(x,1)<<8|g.call(x,2)<<16|g.call(x,3)<<24)>>>0,(g.call(x,4)|g.call(x,5)<<8|g.call(x,6)<<16|g.call(x,7)<<24)>>>0)},p.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},p.prototype.zzEncode=function(){var x=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^x)>>>0,this.lo=(this.lo<<1^x)>>>0,this},p.prototype.zzDecode=function(){var x=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^x)>>>0,this.hi=(this.hi>>>1^x)>>>0,this},p.prototype.length=function(){var x=this.lo,v=(this.lo>>>28|this.hi<<4)>>>0,u=this.hi>>>24;return u===0?v===0?x<16384?x<128?1:2:x<2097152?3:4:v<16384?v<128?5:6:v<2097152?7:8:u<128?9:10}},9693:function(Ie,S,y){"use strict";var E=S;function p(d,g,x){for(var v=Object.keys(g),u=0;u<v.length;++u)d[v[u]]!==void 0&&x||(d[v[u]]=g[v[u]]);return d}function M(d){function g(x,v){if(!(this instanceof g))return new g(x,v);Object.defineProperty(this,"message",{get:function(){return x}}),Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:new Error().stack||""}),v&&p(this,v)}return(g.prototype=Object.create(Error.prototype)).constructor=g,Object.defineProperty(g.prototype,"name",{get:function(){return d}}),g.prototype.toString=function(){return this.name+": "+this.message},g}E.asPromise=y(4537),E.base64=y(7419),E.EventEmitter=y(9211),E.float=y(945),E.inquire=y(7199),E.utf8=y(4997),E.pool=y(6662),E.LongBits=y(1945),E.isNode=Boolean(y.g!==void 0&&y.g&&y.g.process&&y.g.process.versions&&y.g.process.versions.node),E.global=E.isNode&&y.g||typeof window!="undefined"&&window||typeof self!="undefined"&&self||this,E.emptyArray=Object.freeze?Object.freeze([]):[],E.emptyObject=Object.freeze?Object.freeze({}):{},E.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d},E.isString=function(d){return typeof d=="string"||d instanceof String},E.isObject=function(d){return d&&typeof d=="object"},E.isset=E.isSet=function(d,g){var x=d[g];return!(x==null||!d.hasOwnProperty(g))&&(typeof x!="object"||(Array.isArray(x)?x.length:Object.keys(x).length)>0)},E.Buffer=function(){try{var d=E.inquire("buffer").Buffer;return d.prototype.utf8Write?d:null}catch(g){return null}}(),E._Buffer_from=null,E._Buffer_allocUnsafe=null,E.newBuffer=function(d){return typeof d=="number"?E.Buffer?E._Buffer_allocUnsafe(d):new E.Array(d):E.Buffer?E._Buffer_from(d):typeof Uint8Array=="undefined"?d:new Uint8Array(d)},E.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,E.Long=E.global.dcodeIO&&E.global.dcodeIO.Long||E.global.Long||E.inquire("long"),E.key2Re=/^true|false|0|1$/,E.key32Re=/^-?(?:0|[1-9][0-9]*)$/,E.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,E.longToHash=function(d){return d?E.LongBits.from(d).toHash():E.LongBits.zeroHash},E.longFromHash=function(d,g){var x=E.LongBits.fromHash(d);return E.Long?E.Long.fromBits(x.lo,x.hi,g):x.toNumber(Boolean(g))},E.merge=p,E.lcFirst=function(d){return d.charAt(0).toLowerCase()+d.substring(1)},E.newError=M,E.ProtocolError=M("ProtocolError"),E.oneOfGetter=function(d){for(var g={},x=0;x<d.length;++x)g[d[x]]=1;return function(){for(var v=Object.keys(this),u=v.length-1;u>-1;--u)if(g[v[u]]===1&&this[v[u]]!==void 0&&this[v[u]]!==null)return v[u]}},E.oneOfSetter=function(d){return function(g){for(var x=0;x<d.length;++x)d[x]!==g&&delete this[d[x]]}},E.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},E._configure=function(){var d=E.Buffer;d?(E._Buffer_from=d.from!==Uint8Array.from&&d.from||function(g,x){return new d(g,x)},E._Buffer_allocUnsafe=d.allocUnsafe||function(g){return new d(g)}):E._Buffer_from=E._Buffer_allocUnsafe=null}},1173:(Ie,S,y)=>{"use strict";Ie.exports=t;var E,p=y(9693),M=p.LongBits,d=p.base64,g=p.utf8;function x(D,F,Z){this.fn=D,this.len=F,this.next=void 0,this.val=Z}function v(){}function u(D){this.head=D.head,this.tail=D.tail,this.len=D.len,this.next=D.states}function t(){this.len=0,this.head=new x(v,0,0),this.tail=this.head,this.states=null}var e=function(){return p.Buffer?function(){return(t.create=function(){return new E})()}:function(){return new t}};function o(D,F,Z){F[Z]=255&D}function c(D,F){this.len=D,this.next=void 0,this.val=F}function b(D,F,Z){for(;D.hi;)F[Z++]=127&D.lo|128,D.lo=(D.lo>>>7|D.hi<<25)>>>0,D.hi>>>=7;for(;D.lo>127;)F[Z++]=127&D.lo|128,D.lo=D.lo>>>7;F[Z++]=D.lo}function A(D,F,Z){F[Z]=255&D,F[Z+1]=D>>>8&255,F[Z+2]=D>>>16&255,F[Z+3]=D>>>24}t.create=e(),t.alloc=function(D){return new p.Array(D)},p.Array!==Array&&(t.alloc=p.pool(t.alloc,p.Array.prototype.subarray)),t.prototype._push=function(D,F,Z){return this.tail=this.tail.next=new x(D,F,Z),this.len+=F,this},c.prototype=Object.create(x.prototype),c.prototype.fn=function(D,F,Z){for(;D>127;)F[Z++]=127&D|128,D>>>=7;F[Z]=D},t.prototype.uint32=function(D){return this.len+=(this.tail=this.tail.next=new c((D>>>=0)<128?1:D<16384?2:D<2097152?3:D<268435456?4:5,D)).len,this},t.prototype.int32=function(D){return D<0?this._push(b,10,M.fromNumber(D)):this.uint32(D)},t.prototype.sint32=function(D){return this.uint32((D<<1^D>>31)>>>0)},t.prototype.uint64=function(D){var F=M.from(D);return this._push(b,F.length(),F)},t.prototype.int64=t.prototype.uint64,t.prototype.sint64=function(D){var F=M.from(D).zzEncode();return this._push(b,F.length(),F)},t.prototype.bool=function(D){return this._push(o,1,D?1:0)},t.prototype.fixed32=function(D){return this._push(A,4,D>>>0)},t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=function(D){var F=M.from(D);return this._push(A,4,F.lo)._push(A,4,F.hi)},t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=function(D){return this._push(p.float.writeFloatLE,4,D)},t.prototype.double=function(D){return this._push(p.float.writeDoubleLE,8,D)};var w=p.Array.prototype.set?function(D,F,Z){F.set(D,Z)}:function(D,F,Z){for(var L=0;L<D.length;++L)F[Z+L]=D[L]};t.prototype.bytes=function(D){var F=D.length>>>0;if(!F)return this._push(o,1,0);if(p.isString(D)){var Z=t.alloc(F=d.length(D));d.decode(D,Z,0),D=Z}return this.uint32(F)._push(w,F,D)},t.prototype.string=function(D){var F=g.length(D);return F?this.uint32(F)._push(g.write,F,D):this._push(o,1,0)},t.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new x(v,0,0),this.len=0,this},t.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new x(v,0,0),this.len=0),this},t.prototype.ldelim=function(){var D=this.head,F=this.tail,Z=this.len;return this.reset().uint32(Z),Z&&(this.tail.next=D.next,this.tail=F,this.len+=Z),this},t.prototype.finish=function(){for(var D=this.head.next,F=this.constructor.alloc(this.len),Z=0;D;)D.fn(D.val,F,Z),Z+=D.len,D=D.next;return F},t._configure=function(D){E=D,t.create=e(),E._configure()}},3155:(Ie,S,y)=>{"use strict";Ie.exports=M;var E=y(1173);(M.prototype=Object.create(E.prototype)).constructor=M;var p=y(9693);function M(){E.call(this)}function d(g,x,v){g.length<40?p.utf8.write(g,x,v):x.utf8Write?x.utf8Write(g,v):x.write(g,v)}M._configure=function(){M.alloc=p._Buffer_allocUnsafe,M.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?function(g,x,v){x.set(g,v)}:function(g,x,v){if(g.copy)g.copy(x,v,0,g.length);else for(var u=0;u<g.length;)x[v++]=g[u++]}},M.prototype.bytes=function(g){p.isString(g)&&(g=p._Buffer_from(g,"base64"));var x=g.length>>>0;return this.uint32(x),x&&this._push(M.writeBytesBuffer,x,g),this},M.prototype.string=function(g){var x=p.Buffer.byteLength(g);return this.uint32(x),x&&this._push(d,x,g),this},M._configure()},7714:(Ie,S,y)=>{"use strict";S.R=void 0;const E=y(6919),p=y(7448);S.R=new class{init(){return Ga(this,null,function*(){})}createSessionHandler(M,d){return Ga(this,null,function*(){const g=new E.Session(d);return yield g.loadModel(M),new p.OnnxjsSessionHandler(g)})}}},4200:(Ie,S,y)=>{"use strict";S.c8=S.rX=void 0;const E=y(1670),p=y(5381),M=y(2157),d=y(2306);S.rX=()=>{if((typeof E.env.wasm.initTimeout!="number"||E.env.wasm.initTimeout<0)&&(E.env.wasm.initTimeout=0),typeof E.env.wasm.simd!="boolean"&&(E.env.wasm.simd=!0),typeof E.env.wasm.proxy!="boolean"&&(E.env.wasm.proxy=!1),typeof E.env.wasm.numThreads!="number"||!Number.isInteger(E.env.wasm.numThreads)||E.env.wasm.numThreads<=0){const g=typeof navigator=="undefined"?(0,p.cpus)().length:navigator.hardwareConcurrency;E.env.wasm.numThreads=Math.min(4,Math.ceil((g||1)/2))}},S.c8=new class{init(){return Ga(this,null,function*(){(0,S.rX)(),yield(0,M.initWasm)()})}createSessionHandler(g,x){return Ga(this,null,function*(){const v=new d.OnnxruntimeWebAssemblySessionHandler;return yield v.loadModel(g,x),Promise.resolve(v)})}}},6018:function(Ie,S,y){"use strict";var E=this&&this.__createBinding||(Object.create?function(d,g,x,v){v===void 0&&(v=x);var u=Object.getOwnPropertyDescriptor(g,x);u&&!("get"in u?!g.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return g[x]}}),Object.defineProperty(d,v,u)}:function(d,g,x,v){v===void 0&&(v=x),d[v]=g[x]}),p=this&&this.__exportStar||function(d,g){for(var x in d)x==="default"||Object.prototype.hasOwnProperty.call(g,x)||E(g,d,x)};Object.defineProperty(S,"__esModule",{value:!0}),p(y(1670),S);const M=y(1670);{const d=y(7714).R;(0,M.registerBackend)("webgl",d,-10)}{const d=y(4200).c8;(0,M.registerBackend)("cpu",d,10),(0,M.registerBackend)("wasm",d,10),(0,M.registerBackend)("xnnpack",d,9)}},246:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createAttributeWithCacheKey=void 0;class y{constructor(p){Object.assign(this,p)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(p=>`${this[p]}`).join(";")),this._cacheKey}}S.createAttributeWithCacheKey=E=>new y(E)},7778:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Attribute=void 0;const E=y(1446),p=y(9395),M=y(9162),d=y(2517);var g=p.onnxruntime.experimental.fbs;class x{constructor(u){if(this._attributes=new Map,u!=null){for(const t of u)t instanceof E.onnx.AttributeProto?this._attributes.set(t.name,[x.getValue(t),x.getType(t)]):t instanceof g.Attribute&&this._attributes.set(t.name(),[x.getValue(t),x.getType(t)]);if(this._attributes.size<u.length)throw new Error("duplicated attribute names")}}set(u,t,e){this._attributes.set(u,[e,t])}delete(u){this._attributes.delete(u)}getFloat(u,t){return this.get(u,"float",t)}getInt(u,t){return this.get(u,"int",t)}getString(u,t){return this.get(u,"string",t)}getTensor(u,t){return this.get(u,"tensor",t)}getFloats(u,t){return this.get(u,"floats",t)}getInts(u,t){return this.get(u,"ints",t)}getStrings(u,t){return this.get(u,"strings",t)}getTensors(u,t){return this.get(u,"tensors",t)}get(u,t,e){const o=this._attributes.get(u);if(o===void 0){if(e!==void 0)return e;throw new Error(`required attribute not found: ${u}`)}if(o[1]!==t)throw new Error(`type mismatch: expected ${t} but got ${o[1]}`);return o[0]}static getType(u){const t=u instanceof E.onnx.AttributeProto?u.type:u.type();switch(t){case E.onnx.AttributeProto.AttributeType.FLOAT:return"float";case E.onnx.AttributeProto.AttributeType.INT:return"int";case E.onnx.AttributeProto.AttributeType.STRING:return"string";case E.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case E.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case E.onnx.AttributeProto.AttributeType.INTS:return"ints";case E.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case E.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${E.onnx.AttributeProto.AttributeType[t]}`)}}static getValue(u){const t=u instanceof E.onnx.AttributeProto?u.type:u.type();if(t===E.onnx.AttributeProto.AttributeType.GRAPH||t===E.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const e=this.getValueNoCheck(u);if(t===E.onnx.AttributeProto.AttributeType.INT&&d.LongUtil.isLong(e))return d.LongUtil.longToNumber(e);if(t===E.onnx.AttributeProto.AttributeType.INTS){const o=e,c=new Array(o.length);for(let b=0;b<o.length;b++){const A=o[b];c[b]=d.LongUtil.longToNumber(A)}return c}if(t===E.onnx.AttributeProto.AttributeType.TENSOR)return u instanceof E.onnx.AttributeProto?M.Tensor.fromProto(e):M.Tensor.fromOrtTensor(e);if(t===E.onnx.AttributeProto.AttributeType.TENSORS){if(u instanceof E.onnx.AttributeProto)return e.map(o=>M.Tensor.fromProto(o));if(u instanceof g.Attribute)return e.map(o=>M.Tensor.fromOrtTensor(o))}if(t===E.onnx.AttributeProto.AttributeType.STRING&&u instanceof E.onnx.AttributeProto){const o=e;return(0,d.decodeUtf8String)(o)}return t===E.onnx.AttributeProto.AttributeType.STRINGS&&u instanceof E.onnx.AttributeProto?e.map(d.decodeUtf8String):e}static getValueNoCheck(u){return u instanceof E.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(u):this.getValueNoCheckFromOrtFormat(u)}static getValueNoCheckFromOnnxFormat(u){switch(u.type){case E.onnx.AttributeProto.AttributeType.FLOAT:return u.f;case E.onnx.AttributeProto.AttributeType.INT:return u.i;case E.onnx.AttributeProto.AttributeType.STRING:return u.s;case E.onnx.AttributeProto.AttributeType.TENSOR:return u.t;case E.onnx.AttributeProto.AttributeType.GRAPH:return u.g;case E.onnx.AttributeProto.AttributeType.FLOATS:return u.floats;case E.onnx.AttributeProto.AttributeType.INTS:return u.ints;case E.onnx.AttributeProto.AttributeType.STRINGS:return u.strings;case E.onnx.AttributeProto.AttributeType.TENSORS:return u.tensors;case E.onnx.AttributeProto.AttributeType.GRAPHS:return u.graphs;default:throw new Error(`unsupported attribute type: ${E.onnx.AttributeProto.AttributeType[u.type]}`)}}static getValueNoCheckFromOrtFormat(u){switch(u.type()){case g.AttributeType.FLOAT:return u.f();case g.AttributeType.INT:return u.i();case g.AttributeType.STRING:return u.s();case g.AttributeType.TENSOR:return u.t();case g.AttributeType.GRAPH:return u.g();case g.AttributeType.FLOATS:return u.floatsArray();case g.AttributeType.INTS:{const t=[];for(let e=0;e<u.intsLength();e++)t.push(u.ints(e));return t}case g.AttributeType.STRINGS:{const t=[];for(let e=0;e<u.stringsLength();e++)t.push(u.strings(e));return t}case g.AttributeType.TENSORS:{const t=[];for(let e=0;e<u.tensorsLength();e++)t.push(u.tensors(e));return t}default:throw new Error(`unsupported attribute type: ${g.AttributeType[u.type()]}`)}}}S.Attribute=x},7091:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.resolveBackend=S.backend=void 0;const E=y(5038),p=new Map;function M(d){return Ga(this,null,function*(){const g=S.backend;if(g[d]!==void 0&&function(x){const v=x;return"initialize"in v&&typeof v.initialize=="function"&&"createSessionHandler"in v&&typeof v.createSessionHandler=="function"&&"dispose"in v&&typeof v.dispose=="function"}(g[d])){const x=g[d];let v=x.initialize();if(typeof v=="object"&&"then"in v&&(v=yield v),v)return p.set(d,x),x}})}S.backend={webgl:new E.WebGLBackend},S.resolveBackend=function d(g){return Ga(this,null,function*(){if(!g)return d(["webgl"]);{const x=typeof g=="string"?[g]:g;for(const v of x){const u=p.get(v);if(u)return u;const t=yield M(v);if(t)return t}}throw new Error("no available backend to use")})}},5038:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.WebGLBackend=void 0;const E=y(1670),p=y(6231),M=y(6416),d=y(7305);S.WebGLBackend=class{get contextId(){return E.env.webgl.contextId}set contextId(g){E.env.webgl.contextId=g}get matmulMaxBatchSize(){return E.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(g){E.env.webgl.matmulMaxBatchSize=g}get textureCacheMode(){return E.env.webgl.textureCacheMode}set textureCacheMode(g){E.env.webgl.textureCacheMode=g}get pack(){return E.env.webgl.pack}set pack(g){E.env.webgl.pack=g}get async(){return E.env.webgl.async}set async(g){E.env.webgl.async=g}initialize(){try{return this.glContext=(0,d.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),p.Logger.setWithEnv(E.env),p.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(g){return p.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${g}`),!1}}createSessionHandler(g){return new M.WebGLSessionHandler(this,g)}dispose(){this.glContext.dispose()}}},5107:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CoordsGlslLib=void 0;const E=y(2517),p=y(8520),M=y(5060),d=y(7859),g=y(9390);class x extends p.GlslLib{constructor(u){super(u)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new p.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new p.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const u=this.context.outputTextureLayout;return u.isPacked?this.getPackedOutputSamplingSnippet(u):this.getUnpackedOutputSamplingSnippet(u)}getPackedOutputSamplingSnippet(u){const t=u.unpackedShape,e=[u.width,u.height],o={},c="getOutputCoords";switch(t.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputPacked1DCoords(t,e);break;case 2:o[c]=this.getOutputPacked2DCoords(t,e);break;case 3:o[c]=this.getOutputPacked3DCoords(t,e);break;default:o[c]=this.getOutputPackedNDCoords(t,e)}const b=`
      void setOutput(vec4 val) {
        ${(0,M.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return o.floatTextureSetRGBA=new p.GlslLibRoutine(b),o}getUnpackedOutputSamplingSnippet(u){const t=u.unpackedShape,e=[u.width,u.height],o={},c="getOutputCoords";switch(t.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputUnpacked1DCoords(t,e);break;case 2:o[c]=this.getOutputUnpacked2DCoords(t,e);break;case 3:o[c]=this.getOutputUnpacked3DCoords(t,e);break;case 4:o[c]=this.getOutputUnpacked4DCoords(t,e);break;case 5:o[c]=this.getOutputUnpacked5DCoords(t,e);break;case 6:o[c]=this.getOutputUnpacked6DCoords(t,e);break;default:throw new Error(`Unsupported output dimensionality: ${t.length}`)}const b=`
        void setOutput(float val) {
          ${(0,M.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return o.floatTextureSetR=new p.GlslLibRoutine(b),o}getOutputScalarCoords(){return new p.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(u,t){const e=t;let o="";return e[0]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${e[1]}.0);
          }
        `,new p.GlslLibRoutine(o)):e[1]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${e[0]}.0);
          }
        `,new p.GlslLibRoutine(o)):(o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${e[0]}, ${e[1]}));
          return 2 * (resTexRC.y * ${e[0]} + resTexRC.x);
        }
      `,new p.GlslLibRoutine(o))}getOutputPacked2DCoords(u,t){let e="";if(E.ArrayUtil.arraysEqual(u,t))return e=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${t[0]}, ${t[1]}));
        }
      `,new p.GlslLibRoutine(e);const o=t,c=Math.ceil(u[1]/2);return e=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));

          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${c}) * 2;
          int c = 2 * (index / ${c});

          return ivec2(r, c);
        }
      `,new p.GlslLibRoutine(e)}getOutputPacked3DCoords(u,t){const e=[t[0],t[1]],o=Math.ceil(u[2]/2),c=o*Math.ceil(u[1]/2),b=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;

          int b = index / ${c};
          index -= b * ${c};

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec3(b, r, c);
        }
      `;return new p.GlslLibRoutine(b)}getOutputPackedNDCoords(u,t){const e=[t[0],t[1]],o=Math.ceil(u[u.length-1]/2),c=o*Math.ceil(u[u.length-2]/2);let b=c,A="",w="b, r, c";for(let F=2;F<u.length-1;F++)b*=u[u.length-F-1],A=`
      int b${F} = index / ${b};
      index -= b${F} * ${b};
    `+A,w=`b${F}, `+w;const D=`
      ivec${u.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.y * ${e[0]} + resTexRC.x;

        ${A}

        int b = index / ${c};
        index -= b * ${c};

        // reverse r and c order for packed texture
        int r = imod(index, ${o}) * 2;
        int c = 2 * (index / ${o});

        return ivec${u.length}(${w});
      }
    `;return new p.GlslLibRoutine(D)}getOutputUnpacked1DCoords(u,t){const e=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          return resTexRC.y * ${t[0]} + resTexRC.x;
        }
      `;return new p.GlslLibRoutine(e)}getOutputUnpacked2DCoords(u,t){const e=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          int r = index / ${u[1]};
          int c = index - r * ${u[1]};
          return ivec2(r, c);
        }
      `;return new p.GlslLibRoutine(e)}getOutputUnpacked3DCoords(u,t){let e="";const o=u.length;let c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=u[o-1];for(let w=o-3;w>=0;--w)c[w]=c[w+1]*u[w+1];const b=["r","c","d"],A=c.map((w,D)=>`int ${b[D]} = index / ${w}; ${D===c.length-1?`int ${b[D+1]} = index - ${b[D]} * ${w}`:`index -= ${b[D]} * ${w}`};`).join("");return e=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${A}
          return ivec3(r, c, d);
        }
      `,new p.GlslLibRoutine(e)}getOutputUnpacked4DCoords(u,t){let e="";const o=u.length;let c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=u[o-1];for(let w=o-3;w>=0;--w)c[w]=c[w+1]*u[w+1];const b=["r","c","d","d2"],A=c.map((w,D)=>`int ${b[D]} = index / ${w}; ${D===c.length-1?`int ${b[D+1]} = index - ${b[D]} * ${w}`:`index -= ${b[D]} * ${w}`};`).join("");return e=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${A}
          return ivec4(r, c, d, d2);
        }
      `,new p.GlslLibRoutine(e)}getOutputUnpacked5DCoords(u,t){let e="";const o=u.length;let c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=u[o-1];for(let w=o-3;w>=0;--w)c[w]=c[w+1]*u[w+1];const b=["r","c","d","d2","d3"],A=c.map((w,D)=>`int ${b[D]} = index / ${w}; ${D===c.length-1?`int ${b[D+1]} = index - ${b[D]} * ${w}`:`index -= ${b[D]} * ${w}`};`).join("");return e=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${A}
          return ivec5(r, c, d, d2, d3);
        }
      `,new p.GlslLibRoutine(e)}getOutputUnpacked6DCoords(u,t){let e="";const o=u.length;let c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=u[o-1];for(let w=o-3;w>=0;--w)c[w]=c[w+1]*u[w+1];const b=["r","c","d","d2","d3","d4"],A=c.map((w,D)=>`int ${b[D]} = index / ${w}; ${D===c.length-1?`int ${b[D+1]} = index - ${b[D]} * ${w}`:`index -= ${b[D]} * ${w}`};`).join("");return e=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${t[0]}, ${t[1]}));
         int index = resTexRC.y * ${t[0]} + resTexRC.x;
         ${A}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new p.GlslLibRoutine(e)}getCommonUtilFuncs(){const u={};let t="uvFromFlat";u[t]=new p.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),t="packedUVfrom1D",u[t]=new p.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom2D",u[t]=new p.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom3D",u[t]=new p.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="sampleTexture";const e=(0,M.getGlsl)(this.context.glContext.version);return u[t]=new p.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${e.texture2D}(textureSampler, uv).r;
        }`),u}getInputsSamplingSnippets(){const u={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((e,o)=>{const c=this.context.inputTextureLayouts[o],b=(0,g.generateShaderFuncNameFromInputSamplerName)(e);c.isPacked?u[b]=this.getPackedSamplerFromInput(b,e,c):u[b]=this.getUnpackedSamplerFromInput(b,e,c);const A=(0,g.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(e);c.unpackedShape.length<=t.unpackedShape.length&&(c.isPacked?u[A]=this.getPackedSamplerAtOutputCoords(A,c,t,e):u[A]=this.getUnpackedSamplerAtOutputCoords(A,c,t,e))}),u}getPackedSamplerAtOutputCoords(u,t,e,o){const c=t.unpackedShape,b=e.unpackedShape,A=o,w=(0,g.generateShaderFuncNameFromInputSamplerName)(A),D=c.length,F=b.length,Z=E.BroadcastUtil.getBroadcastDims(c,b),L=(0,g.getCoordsDataType)(F),W=F-D;let k;const de=(0,g.getGlChannels)();k=D===0?"":F<2&&Z.length>=1?"coords = 0;":Z.map(be=>`coords.${de[be+W]} = 0;`).join(`
`);let H="";H=F<2&&D>0?"coords":c.map((be,G)=>`coords.${de[G+W]}`).join(", ");let ue="return outputValue;";const ve=E.ShapeUtil.size(c)===1,ke=E.ShapeUtil.size(b)===1;if(D!==1||ve||ke){if(ve&&!ke)ue=F===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(Z.length){const be=D-2,G=D-1;Z.indexOf(be)>-1&&Z.indexOf(G)>-1?ue="return vec4(outputValue.x);":Z.indexOf(be)>-1?ue="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Z.indexOf(G)>-1&&(ue="return vec4(outputValue.xx, outputValue.zz);")}}else ue=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Ae=`
      vec4 ${u}() {
        ${L} coords = getOutputCoords();
        
        int lastDim = coords.${de[F-1]};
        coords.${de[F-1]} = coords.${de[F-2]};
        coords.${de[F-2]} = lastDim;
      
        ${k}
        vec4 outputValue = ${w}(${H});
        ${ue}
      }
    `;return new p.GlslLibRoutine(Ae,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(u,t,e,o){const c=[e.width,e.height],b=[t.width,t.height],A=t.unpackedShape.length,w=e.unpackedShape.length,D=t.unpackedShape,F=e.unpackedShape,Z=(0,g.generateShaderFuncNameFromInputSamplerName)(o);if(A===w&&E.ArrayUtil.arraysEqual(b,c)){const ke=`
          float ${u}() {
            return sampleTexture(${o}, TexCoords);
          }
        `;return new p.GlslLibRoutine(ke,["coordinates.sampleTexture"])}const L=(0,g.getCoordsDataType)(w),W=E.BroadcastUtil.getBroadcastDims(D,F),k=w-A;let de;const H=(0,g.getGlChannels)();de=A===0?"":w<2&&W.length>=1?"coords = 0;":W.map(ke=>`coords.${H[ke+k]} = 0;`).join(`
`);let ue="";ue=w<2&&A>0?"coords":t.unpackedShape.map((ke,Ae)=>`coords.${H[Ae+k]}`).join(", ");const ve=`
        float ${u}() {
          ${L} coords = getOutputCoords();
          ${de}
          return ${Z}(${ue});
        }
      `;return new p.GlslLibRoutine(ve,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(u,t,e){switch(e.unpackedShape.length){case 0:return this.getPackedSamplerScalar(u,t);case 1:return this.getPackedSampler1D(u,t,e);case 2:return this.getPackedSampler2D(u,t,e);case 3:return this.getPackedSampler3D(u,t,e);default:return this.getPackedSamplerND(u,t,e)}}getUnpackedSamplerFromInput(u,t,e){const o=e.unpackedShape;switch(o.length){case 0:return this.getUnpackedSamplerScalar(u,t,e);case 1:return this.getUnpackedSampler1D(u,t,e);case 2:return this.getUnpackedSampler2D(u,t,e);case 3:return this.getUnpackedSampler3D(u,t,e);case 4:return this.getUnpackedSampler4D(u,t,e);case 5:return this.getUnpackedSampler5D(u,t,e);case 6:return this.getUnpackedSampler6D(u,t,e);default:throw new Error(`Unsupported dimension ${o.length}-D`)}}getPackedSamplerScalar(u,t){const e=`
          vec4 ${u}() {
            return ${(0,M.getGlsl)(this.context.glContext.version).texture2D}(${t}, halfCR);
          }
        `;return new p.GlslLibRoutine(e)}getPackedSampler1D(u,t,e){const o=[e.width,e.height],c=[o[1],o[0]],b=(0,M.getGlsl)(this.context.glContext.version),A=`vec4 ${u}(int index) {
      vec2 uv = packedUVfrom1D(
      ${c[0]}, ${c[1]}, index);
      return ${b.texture2D}(${t}, uv);
    }`;return new p.GlslLibRoutine(A,["coordinates.packedUVfrom1D"])}getPackedSampler2D(u,t,e){const o=e.unpackedShape,c=[e.width,e.height],b=(0,M.getGlsl)(this.context.glContext.version),A=c[0],w=c[1];if(c!=null&&E.ArrayUtil.arraysEqual(o,c)){const L=`vec4 ${u}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${w}.0, ${A}.0);
        return ${b.texture2D}(${t}, uv);
      }`;return new p.GlslLibRoutine(L)}const D=c,F=Math.ceil(o[1]/2),Z=`vec4 ${u}(int row, int col) {
      vec2 uv = packedUVfrom2D(${D[1]}, ${D[0]}, ${F}, row, col);
      return ${b.texture2D}(${t}, uv);
    }`;return new p.GlslLibRoutine(Z,["coordinates.packedUVfrom2D"])}getPackedSampler3D(u,t,e){const o=e.unpackedShape,c=[e.width,e.height],b=[c[0],c[1]],A=(0,M.getGlsl)(this.context.glContext.version);if(o[0]===1){const L=o.slice(1),W=[1,2],k=(0,g.squeezeInputShape)(o,L),de=["b","row","col"],H=JSON.parse(JSON.stringify(e));H.unpackedShape=k;const ue=this.getPackedSamplerFromInput(u,t,H),ve=`${ue.routineBody}
      vec4 ${u}(int b, int row, int col) {
        return ${u}(${(0,g.getSqueezedParams)(de,W)});
      } `;return new p.GlslLibRoutine(ve,ue.dependencies)}const w=b[0],D=b[1],F=Math.ceil(o[2]/2),Z=`vec4 ${u}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${D}, ${w}, ${F*Math.ceil(o[1]/2)}, ${F}, b, row, col);
      return ${A.texture2D}(${t}, uv);}`;return new p.GlslLibRoutine(Z,["coordinates.packedUVfrom3D"])}getPackedSamplerND(u,t,e){const o=e.unpackedShape,c=o.length,b=[e.width,e.height],A=(0,M.getGlsl)(this.context.glContext.version),w=[b[0],b[1]],D=w[1],F=w[0],Z=Math.ceil(o[c-1]/2);let L=Z*Math.ceil(o[c-2]/2),W="int b, int row, int col",k=`b * ${L} + (row / 2) * ${Z} + (col / 2)`;for(let H=2;H<c-1;H++)W=`int b${H}, `+W,L*=o[c-H-1],k=`b${H} * ${L} + `+k;const de=`vec4 ${u}(${W}) {
      int index = ${k};
      int texR = index / ${F};
      int texC = index - texR * ${F};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${F}, ${D});
      return ${A.texture2D}(${t}, uv);
    }`;return new p.GlslLibRoutine(de)}getUnpackedSamplerScalar(u,t,e){const[o,c]=[e.width,e.height];if(o===1&&c===1){const A=`
          float ${u}() {
            return sampleTexture(${t}, halfCR);
          }
        `;return new p.GlslLibRoutine(A,["coordinates.sampleTexture"])}const b=`
        float ${u}() {
          int offset_${t} = coordsToOffset(TexCoords, ${o}, ${c});
          vec2 uv = uvFromFlat(${o}, ${c}, offset_${t});
          return sampleTexture(${t}, uv);
        }
      `;return new p.GlslLibRoutine(b,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(u,t,e){const o=e.width,c=e.height;if(c===1&&o===1){const A=`
        float ${u}(int index) {
          return sampleTexture(${t}, halfCR);
        }
      `;return new p.GlslLibRoutine(A,["coordinates.sampleTexture"])}if(c===1){const A=`
          float ${u}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(A,["coordinates.sampleTexture"])}if(o===1){const A=`
          float ${u}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${c}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(A,["coordinates.sampleTexture"])}const b=`
        float ${u}(int index) {
          vec2 uv = uvFromFlat(${o}, ${c}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new p.GlslLibRoutine(b,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(u,t,e){const o=e.unpackedShape,c=[e.height,e.width];if(c!=null&&E.ArrayUtil.arraysEqual(o,c)){const L=`
          float ${u}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${c[1]}.0, ${c[0]}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(L,["coordinates.sampleTexture"])}const{newShape:b,keptDims:A}=(0,d.squeezeShape)(o),w=b;if(w.length<o.length){const L=(0,g.squeezeInputShape)(o,w),W=JSON.parse(JSON.stringify(e));W.unpackedShape=L;const k=["col","row"],de=`
          ${this.getUnpackedSamplerFromInput(u,t,W).routineBody}
          float ${u}(int row, int col) {
            return ${u}(${(0,g.getSqueezedParams)(k,A)});
          }
        `;return new p.GlslLibRoutine(de,["coordinates.sampleTexture"])}const D=c[1],F=c[0];if(F===1){const L=`
          float ${u}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${D}, ${F});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${D}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(L,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(D===1){const L=`
          float ${u}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${D}, ${F});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${F}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(L,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const Z=`
        float ${u}(int row, int col) {
          int index = col * ${o[1]} + row;
          vec2 uv = uvFromFlat(${D}, ${F}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new p.GlslLibRoutine(Z,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(u,t,e){const o=e.unpackedShape,c=o[1]*o[2],b=o[2],{newShape:A,keptDims:w}=(0,d.squeezeShape)(o),D=A;if(D.length<o.length){const Z=(0,g.squeezeInputShape)(o,D),L=["batch","col","row"],W=JSON.parse(JSON.stringify(e));W.unpackedShape=Z;const k=this.getUnpackedSamplerFromInput(u,t,W),de=w.reverse(),H=`
          ${k.routineBody}
          float ${u}(int batch, int row, int col) {
            return ${u}(${(0,g.getSqueezedParams)(L,de)});
          }
        `;return new p.GlslLibRoutine(H,k.dependencies)}const F=`
          float ${u}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${c} + col * ${b} + row;
            vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
            return sampleTexture(${t}, uv);
          }
      `;return new p.GlslLibRoutine(F,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(u,t,e){const o=e.unpackedShape,c=o[3],b=o[2]*c,A=`
        float ${u}(int row, int col, int depth, int depth2) {
          int index = row * ${o[1]*b} + col * ${b} +
              depth2 * ${c} + depth;
          vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new p.GlslLibRoutine(A,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(u,t,e){const o=e.unpackedShape,c=o[4],b=o[3]*c,A=o[2]*b,w=o[1]*A,{newShape:D,keptDims:F}=(0,d.squeezeShape)(o);if(D.length<o.length){const L=(0,g.squeezeInputShape)(o,D),W=["row","col","depth","depth2","depth3"],k=JSON.parse(JSON.stringify(e));k.unpackedShape=L;const de=`
          ${this.getUnpackedSamplerFromInput(u,t,k).routineBody}
          float ${u}(int row, int col, int depth, int depth2, int depth3) {
            return ${u}(${(0,g.getSqueezedParams)(W,F)});
          }
        `;return new p.GlslLibRoutine(de,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const Z=`
        float ${u}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${w} + col * ${A} + depth * ${b} +
          depth3 * ${c} + depth2;
          vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new p.GlslLibRoutine(Z,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(u,t,e){const o=e.unpackedShape,c=o[5],b=o[4]*c,A=o[3]*b,w=o[2]*A,D=o[1]*w,{newShape:F,keptDims:Z}=(0,d.squeezeShape)(o);if(F.length<o.length){const W=(0,g.squeezeInputShape)(o,F),k=["row","col","depth","depth2","depth3","depth4"],de=JSON.parse(JSON.stringify(e));de.unpackedShape=W;const H=`
            ${this.getUnpackedSamplerFromInput(u,t,de).routineBody}
            float ${u}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${u}(${(0,g.getSqueezedParams)(k,Z)});
            }
          `;return new p.GlslLibRoutine(H,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const L=`
          float ${u}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${D} + col * ${w} + depth * ${A} +
            depth2 * ${b} + depth3 * ${c} + depth4;
            vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
            return sampleTexture(${t}, uv);
          }
        `;return new p.GlslLibRoutine(L,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const u=this.context.outputTextureLayout,t=u.shape.length,e=u.strides,o=u.width,c=u.height,b=[];for(let w=0;w<t-1;++w)b.push(`
        c[${w}] = offset / ${e[w]};`),b.push(`
        offset -= c[${w}] * ${e[w]};`);b.push(`
        c[${t-1}] = offset;`);const A=`
      void toVec(vec2 texCoords, out int c[${t}]) {
        int offset = coordsToOffset(texCoords, ${o}, ${c});
        ${b.join("")}
      }
      void toVec(int offset, out int c[${t}]) {
        ${b.join("")}
      }
    `;return{toVec:new p.GlslLibRoutine(A,["coordinates.coordsToOffset"])}}valueFrom(){const u={};return this.context.programInfo.inputNames.forEach((t,e)=>{const o=this.context.inputTextureLayouts[e],c=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length;let b=`_${t}`;u[b]=new p.GlslLibRoutine(this.getValueFromSingle(t,c,o.width,o.height,!1),[`shapeUtils.indicesToOffset${b}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),b+="_T",u[b]=new p.GlslLibRoutine(this.getValueFromSingle(t,c,o.width,o.height,!0),[`shapeUtils.indicesToOffset${b}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),u}getValueFromSingle(u,t,e,o,c){let b=`_${u}`;return c&&(b+="_T"),`
        float ${b}(int m[${t}]) {
          int offset = indicesToOffset${b}(m);
          vec2 coords = offsetToCoords(offset, ${e}, ${o});
          float value = getColorAsFloat(${(0,M.getGlsl)(this.context.glContext.version).texture2D}(${u}, coords));
          return value;
        }
        `}getPackedValueFrom(u,t,e,o,c){let b=`_${u}_Pack`;return c&&(b+="_T"),`
        vec4 ${b}(int m[${t}]) {
          int offset = indicesToOffset_${u}(m);
          vec2 coords = offsetToCoords(offset, ${e}, ${o});
          return ${(0,M.getGlsl)(this.context.glContext.version).texture2D}(${u}, coords);
        }
        `}}S.CoordsGlslLib=x},8520:(Ie,S)=>{"use strict";var y;Object.defineProperty(S,"__esModule",{value:!0}),S.TopologicalSortGlslRoutines=S.GlslLibRoutineNode=S.GlslLibRoutine=S.GlslLib=S.GlslContext=S.FunctionType=void 0,(y=S.FunctionType||(S.FunctionType={}))[y.ValueBased=0]="ValueBased",y[y.Positional=1]="Positional",S.GlslContext=class{constructor(E,p,M,d){this.glContext=E,this.programInfo=p,this.inputTextureLayouts=M,this.outputTextureLayout=d}},S.GlslLib=class{constructor(E){this.context=E}},S.GlslLibRoutine=class{constructor(E,p){this.routineBody=E,this.dependencies=p}},S.GlslLibRoutineNode=class{constructor(E,p,M){this.name=E,this.dependencies=M||[],p&&(this.routineBody=p)}addDependency(E){E&&this.dependencies.push(E)}},S.TopologicalSortGlslRoutines=class{static returnOrderedNodes(E){if(!E||E.length===0)return[];if(E.length===1)return E;const p=new Set,M=new Set,d=new Array;return this.createOrderedNodes(E,p,M,d),d}static createOrderedNodes(E,p,M,d){for(let g=0;g<E.length;++g)this.dfsTraverse(E[g],p,M,d)}static dfsTraverse(E,p,M,d){if(!E||M.has(E.name))return;if(p.has(E.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");p.add(E.name);const g=E.dependencies;if(g&&g.length>0)for(let x=0;x<g.length;++x)this.dfsTraverse(g[x],p,M,d);d.push(E),M.add(E.name),p.delete(E.name)}}},7341:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.EncodingGlslLib=void 0;const E=y(8520);class p extends E.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new E.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new E.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const d=p.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new E.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${d}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const d=p.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new E.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${d}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const d=new ArrayBuffer(4),g=new Uint32Array(d),x=new Uint8Array(d);if(g[0]=3735928559,x[0]===239)return!0;if(x[0]===222)return!1;throw new Error("unknown endianness")}}S.EncodingGlslLib=p},9894:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.FragColorGlslLib=void 0;const E=y(8520),p=y(5060);class M extends E.GlslLib{constructor(g){super(g)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const g=(0,p.getGlsl)(this.context.glContext.version);return{setFragColor:new E.GlslLibRoutine(`
        void setFragColor(float value) {
            ${g.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new E.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}S.FragColorGlslLib=M},2848:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.replaceInlines=void 0;const y=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;S.replaceInlines=function(E){const p={};let M;for(;(M=y.exec(E))!==null;){const d=M[3].split(",").map(g=>{const x=g.trim().split(" ");return x&&x.length===2?{type:x[0],name:x[1]}:null}).filter(g=>g!==null);p[M[2]]={params:d,body:M[4]}}for(const d in p){const g="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",d),x=new RegExp(g,"gm");for(;(M=x.exec(E))!==null;){const v=M[1],u=M[2],t=M[3].split(","),e=v?`${v} ${u};`:"";let o=p[d].body,c="";p[d].params.forEach((A,w)=>{A&&(c+=`${A.type} ${A.name} = ${t[w]};
`)}),o=`${c}
 ${o}`,o=o.replace("return",`${u} = `);const b=`
      ${e}
      {
        ${o}
      }
      `;E=E.replace(M[0],b)}}return E.replace(y,"")}},8879:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.GlslPreprocessor=void 0;const E=y(8520),p=y(2848),M=y(5483),d=y(5060);S.GlslPreprocessor=class{constructor(g,x,v,u){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new E.GlslContext(g,x,v,u),Object.keys(M.glslRegistry).forEach(e=>{const o=new M.glslRegistry[e](this.context);this.libs[e]=o});const t=this.glslLibRoutineDependencyGraph;for(const e in this.libs){const o=this.libs[e].getFunctions();for(const c in o){const b=e+"."+c;let A;t[b]?(A=t[b],A.routineBody=o[c].routineBody):(A=new E.GlslLibRoutineNode(b,o[c].routineBody),t[b]=A);const w=o[c].dependencies;if(w)for(let D=0;D<w.length;++D)if(t[w[D]])A.addDependency(t[w[D]]);else{const F=new E.GlslLibRoutineNode(w[D]);t[w[D]]=F,A.addDependency(F)}}}}preprocess(){const g=this.context.programInfo;let x=g.shaderSource;return this.context.programInfo.hasMain||(x=`${x}
      ${(0,d.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),x=(0,p.replaceInlines)(x),`${(0,d.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(g.inputNames,g.variables)}
    ${this.getImports(x)}
    ${x}`}getImports(g){const x=this.selectGlslLibRoutinesToBeIncluded(g);if(x.length===0)return"";let v="";for(let u=0;u<x.length;++u){if(!x[u].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${x[u].name}`);v+=x[u].routineBody+`
`}return v}selectGlslLibRoutinesToBeIncluded(g){const x=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(v=>{const u=v.split(".")[1];g.indexOf(u)!==-1&&x.push(this.glslLibRoutineDependencyGraph[v])}),E.TopologicalSortGlslRoutines.returnOrderedNodes(x)}getUniforms(g,x){const v=[];if(g)for(const u of g)v.push(`uniform sampler2D ${u};`);if(x)for(const u of x)v.push(`uniform ${u.type} ${u.name}${u.arrayLength?`[${u.arrayLength}]`:""};`);return v.join(`
`)}}},5483:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.glslRegistry=void 0;const E=y(5107),p=y(7341),M=y(9894),d=y(2655),g=y(3891);S.glslRegistry={encoding:p.EncodingGlslLib,fragcolor:M.FragColorGlslLib,vec:g.VecGlslLib,shapeUtils:d.ShapeUtilsGlslLib,coordinates:E.CoordsGlslLib}},2655:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ShapeUtilsGlslLib=void 0;const E=y(8520);class p extends E.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const d=this.context.outputTextureLayout.shape.length,g={};return this.context.programInfo.inputNames.forEach((x,v)=>{const u=this.context.inputTextureLayouts[v].unpackedShape;if(u.length<=d){const t=u.length,e=d-t,o=`bcastIndices_${x}`;let c="";for(let A=0;A<t;++A)c+=`
          realIndices[${A}] = int( mod(float(bcastedIndices[${e+A}]), ${u[A]}.0) );
          `;const b=`
        void ${o} (int bcastedIndices[${d}], out int realIndices[${t}]) {
          ${c}
        }
        `;g[o]=new E.GlslLibRoutine(b)}}),g}bcastMatmulIndex(){const d=this.context.outputTextureLayout.shape.length,g={};return this.context.programInfo.inputNames.forEach((x,v)=>{const u=this.context.inputTextureLayouts[v].shape;if(!(u.length<2||u.length>d)){const t=u.length,e=d-t,o=`bcastMatmulIndices_${x}`;let c="";for(let A=0;A<t-2;++A)c+=`
          realIndices[${A}] = int( mod(float(bcastedIndices[${e+A}]), ${u[A]}.0) );
          `;const b=`
        void ${o}(int bcastedIndices[${d}], out int realIndices[${t}]) {
          ${c}
          realIndices[${t-1}] = bcastedIndices[${d-1}];
          realIndices[${t-2}] = bcastedIndices[${d-2}];
        }
        `;g[o]=new E.GlslLibRoutine(b)}}),g}indicesToOffset(){const d={};return this.context.programInfo.inputNames.forEach((g,x)=>{const v=this.context.inputTextureLayouts[x].shape,u=this.context.inputTextureLayouts[x].strides,t=v.length;let e=`indicesToOffset_${g}`;d[e]=new E.GlslLibRoutine(p.indexToOffsetSingle(e,t,u)),e=`indicesToOffset_${g}_T`,d[e]=new E.GlslLibRoutine(p.indexToOffsetSingle(e,t,u.slice().reverse()))}),d}static indexToOffsetSingle(d,g,x){let v="";for(let u=g-1;u>=0;--u)v+=`
        offset += indices[${u}] * ${x[u]};
        `;return`
      int ${d}(int indices[${g}]) {
        int offset = 0;
        ${v}
        return offset;
      }
      `}offsetToIndices(){const d={};return this.context.programInfo.inputNames.forEach((g,x)=>{const v=this.context.inputTextureLayouts[x].shape,u=this.context.inputTextureLayouts[x].strides,t=v.length;let e=`offsetToIndices_${g}`;d[e]=new E.GlslLibRoutine(p.offsetToIndicesSingle(e,t,u)),e=`offsetToIndices_${g}_T`,d[e]=new E.GlslLibRoutine(p.offsetToIndicesSingle(e,t,u.slice().reverse()))}),d}static offsetToIndicesSingle(d,g,x){const v=[];for(let u=0;u<g-1;++u)v.push(`
      indices[${u}] = offset / ${x[u]};`),v.push(`
        offset -= indices[${u}] * ${x[u]};`);return v.push(`
      indices[${g-1}] = offset;`),`
      void ${d}(int offset, out int indices[${g}]) {
        ${v.join("")}
      }
      `}incrementIndices(){const d={};return this.context.programInfo.inputNames.forEach((g,x)=>{const v=this.context.inputTextureLayouts[x].shape,u=v.length,t=`incrementIndices_${g}`;let e="";for(let c=0;c<u;++c)e+=`
        shape[${c}] = ${v[c]};`;const o=`
        void ${t}(int axis, out int indices[${u}]) {
          int shape[${u}];
          ${e};
          for(int i = ${u} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;d[t]=new E.GlslLibRoutine(o)}),d}}S.ShapeUtilsGlslLib=p},5060:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getDefaultFragShaderMain=S.getFragShaderPreamble=S.getVertexShaderSource=S.getGlsl=void 0;const y={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},E={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function p(M){return M===1?y:E}S.getGlsl=p,S.getVertexShaderSource=function(M){const d=p(M);return`${d.version}
      precision highp float;
      ${d.attribute} vec3 position;
      ${d.attribute} vec2 textureCoord;

      ${d.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},S.getFragShaderPreamble=function(M){const d=p(M);return`${d.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${d.varyingFrag} vec2 TexCoords;
    ${d.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},S.getDefaultFragShaderMain=function(M,d){return`
  void main() {
    int indices[${d}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${p(M).output} = result;
  }
  `}},3891:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.VecGlslLib=void 0;const E=y(8520);class p extends E.GlslLib{constructor(d){super(d)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const d=this.context.outputTextureLayout.shape.length,g={add:"+=",sub:"-=",mul:"*=",div:"/="},x={};for(const v in g){const u=`${v}Vec`;let t="";for(let o=0;o<d;++o)t+=`
          dest[${o}] ${g[v]} src[${o}];
          `;const e=`
        void ${u}(int src[${d}], out int dest[${d}]) {
          ${t}
        }
        `;x[u]=new E.GlslLibRoutine(e)}return x}copyVec(){const d=this.context.outputTextureLayout.shape.length;let g="";for(let v=0;v<d;++v)g+=`
        dest[${v}] = src[${v}];
        `;const x=`
      void copyVec(int src[${d}], out int dest[${d}]) {
        ${g}
      }
      `;return{copyVec:new E.GlslLibRoutine(x)}}setVecItem(){const d=this.context.outputTextureLayout.shape.length;let g=`
        if(index < 0)
            index =${d} + index;
        if (index == 0)
            m[0] = value;
        `;for(let v=1;v<d-1;++v)g+=`
        else if (index == ${v})
            m[${v}] = value;
            `;g+=`
        else
            m[${d-1}] = value;
        `;const x=`
      void setVecItem(out int m[${d}], int index, int value) {
        ${g}
      }
        `;return{setVecItem:new E.GlslLibRoutine(x)}}getVecItem(){const d=this.context.outputTextureLayout.shape.length;let g=`
        if(index < 0)
            index = ${d} + index;
        if (index == 0)
            return m[0];
      `;for(let v=1;v<d-1;++v)g+=`
        else if (index == ${v})
            return m[${v}];
      `;g+=`
        else
            return m[${d-1}];
        `;const x=`
      int getVecItem(int m[${d}], int index) {
        ${g}
      }
    `;return{getVecItem:new E.GlslLibRoutine(x)}}}S.VecGlslLib=p},8316:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.WebGLInferenceHandler=void 0;const E=y(6231),p=y(9162),M=y(2517),d=y(2403),g=y(7019),x=y(8710),v=y(5611),u=y(4057),t=y(2039);S.WebGLInferenceHandler=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,o){return(0,u.calculateTextureWidthAndHeight)(this.session.layoutStrategy,e,o)}executeProgram(e,o){if(o.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");const c=[];for(let Z=0;Z<e.inputNames.length;++Z)c[Z]=this.getOrCreateTextureData(o[Z],e.inputTypes[Z]);const b=((Z,L)=>{const W=L.map(de=>`${de.unpackedShape.join(",")};${de.width}x${de.height}`).join("_");let k=Z.name;return Z.cacheHint&&(k+="["+Z.cacheHint+"]"),k+=":"+W,k})(e,c);let A=this.session.programManager.getArtifact(b);const w=A?A.programInfo:typeof e.get=="function"?e.get():e,D=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,w.output.dims,w.output.textureType),F=this.createTextureData(D,w.output.type);return A||(A=this.session.programManager.build(w,c,F),this.session.programManager.setArtifact(b,A)),this.runProgram(A,c,F),F}run(e,o){return this.executeProgram(e,o).tensor}runProgram(e,o,c){for(let b=0;b<o.length;++b)if(!!o[b].isPacked!=(e.programInfo.inputTypes[b]===t.TextureType.packed))throw new Error(`input[${b}] property packed inconsistent`);if(!!c.isPacked!=(e.programInfo.output.textureType===t.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(e,o,c)}getOrCreateTextureData(e,o){let c=this.getTextureData(e.dataId,o===t.TextureType.packed);if(!c&&(c=this.getTextureData(e.dataId,o!==t.TextureType.packed),c))return o===t.TextureType.packed?this.pack(c):this.unpack(c);if(!c){const b=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,e.dims,o);if(o===t.TextureType.packedLastDimension){const D=e.dims;if(D.length===4){const F=[D[0],Math.ceil(D[1]*D[2]*D[3]/4)],Z=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,F,o);let L=e.numberData;if(D[1]*D[2]*D[3]%4!=0){const W=D[0],k=D[1]*D[2]*D[3],de=Math.ceil(k*1/4)*4;L=new Float32Array(W*de);for(let H=0;H<W;++H){const ue=H*k,ve=H*de+H%1*k;L.set(e.numberData.subarray(ue,ue+k),ve)}}return this.createTextureData(Z,e.type,L,e,1)}}if(o===t.TextureType.packed){const A=(0,u.createTextureLayoutFromShape)(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),w=this.createTextureData(A,e.type,e.numberData,e,1);c=this.pack(w)}else c=this.createTextureData(b,e.type,e.numberData,e,1)}return c}createTextureDataFromLayoutBindTensor(e,o,c,b){return this.createTextureData(e,o,c,b,1)}createTextureData(e,o,c,b,A){E.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);const w=this.session.textureManager.createTextureFromLayout(o,e,c,A);return this.createTextureDataFromTexture(e,o,w,b)}reshapeUnpacked(e,o){const c=this.getOrCreateTextureData(e,t.TextureType.unpacked),b={channels:c.channels,height:c.height,width:c.width,shape:o.length!==0?o:[1],strides:M.ShapeUtil.computeStrides(o),unpackedShape:o};return this.createTextureDataFromTexture(b,e.type,c.texture).tensor}reshapePacked(e,o){const c=this.getOrCreateTextureData(e,t.TextureType.packed);if((0,g.isReshapeCheap)(e.dims,o)){const F={channels:c.channels,height:c.height,width:c.width,shape:o.length!==0?o:[1],strides:M.ShapeUtil.computeStrides(o),unpackedShape:o,isPacked:!0};return this.createTextureDataFromTexture(F,e.type,c.texture).tensor}const b=(0,g.processDims3D)(e.dims),A=(0,g.processDims3D)(o),w=this.reshapePacked(e,b),D=this.run((0,g.createPackedReshape3DProgramInfoLoader)(this,w,A),[w]);return this.reshapePacked(D,o)}cast(e,o){const c=this.getOrCreateTextureData(e,t.TextureType.unpacked);return this.createTextureDataFromTexture(c,o,c.texture).tensor}createTextureDataFromTexture(e,o,c,b,A){const w=Object.assign(Object.assign({},e),{tensor:b||new p.Tensor(e.unpackedShape,o,D=>this.readTexture(w),D=>Ga(this,null,function*(){return this.readTextureAsync(w)}),void 0,A),texture:c});return this.setTextureData(w.tensor.dataId,w,e.isPacked),w}getTextureData(e,o=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,o):o?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,o,c=!1){this.session.isInitializer(e)?this.session.setTextureData(e,o,c):(c?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,o)}isTextureLayoutCached(e,o=!1){return!!this.getTextureData(e.dataId,o)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,x.encodeAsUint8)(this,e))}readTextureAsync(e){return Ga(this,null,function*(){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,x.encodeAsUint8)(this,e))})}pack(e){return this.executeProgram((0,d.createPackProgramInfoLoader)(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram((0,v.createUnpackProgramInfoLoader)(this,e.tensor),[e.tensor])}}},1640:function(Ie,S,y){"use strict";var E=this&&this.__createBinding||(Object.create?function(K,he,Se,Fe){Fe===void 0&&(Fe=Se);var nt=Object.getOwnPropertyDescriptor(he,Se);nt&&!("get"in nt?!he.__esModule:nt.writable||nt.configurable)||(nt={enumerable:!0,get:function(){return he[Se]}}),Object.defineProperty(K,Fe,nt)}:function(K,he,Se,Fe){Fe===void 0&&(Fe=Se),K[Fe]=he[Se]}),p=this&&this.__setModuleDefault||(Object.create?function(K,he){Object.defineProperty(K,"default",{enumerable:!0,value:he})}:function(K,he){K.default=he}),M=this&&this.__importStar||function(K){if(K&&K.__esModule)return K;var he={};if(K!=null)for(var Se in K)Se!=="default"&&Object.prototype.hasOwnProperty.call(K,Se)&&E(he,K,Se);return p(he,K),he};Object.defineProperty(S,"__esModule",{value:!0}),S.WEBGL_OP_RESOLVE_RULES=void 0;const d=y(2898),g=M(y(7839)),x=y(4196),v=y(2069),u=y(8138),t=y(9663),e=y(5193),o=y(7992),c=y(1253),b=y(4776),A=y(6572),w=y(3346),D=y(5623),F=y(2870),Z=y(2143),L=y(4939),W=y(718),k=y(2268),de=y(8117),H=y(2278),ue=y(5524),ve=y(5975),ke=y(3933),Ae=y(6558),be=y(5723),G=y(3738),ie=M(y(4909)),V=y(8428),ae=y(9793);S.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",ie.abs],["Acos","","7+",ie.acos],["Add","","7+",g.add],["And","","7+",g.and],["Asin","","7+",ie.asin],["Atan","","7+",ie.atan],["AveragePool","","7+",Z.averagePool,Z.parseAveragePoolAttributes],["BatchNormalization","","7+",d.batchNormalization,d.parseBatchNormalizationAttributes],["Cast","","6+",x.cast,x.parseCastAttributes],["Ceil","","6+",ie.ceil],["Clip","","6-10",ie.clip,ie.parseClipAttributes],["Clip","","11+",ie.clipV11],["Concat","","4+",v.concat,v.parseConcatAttributes],["Conv","","1+",u.conv,u.parseConvAttributes],["ConvTranspose","","1+",t.convTranspose,t.parseConvTransposeAttributes],["Cos","","7+",ie.cos],["Div","","7+",g.div],["Dropout","","7+",ie.identity],["DepthToSpace","","1+",e.depthToSpace,e.parseDepthToSpaceAttributes],["Equal","","7+",g.equal],["Elu","","6+",ie.elu,ie.parseEluAttributes],["Exp","","6+",ie.exp],["Flatten","","1+",o.flatten,o.parseFlattenAttributes],["Floor","","6+",ie.floor],["FusedConv","com.microsoft","1+",u.conv,u.parseConvAttributes],["Gather","","1+",c.gather,c.parseGatherAttributes],["Gemm","","7-10",b.gemm,b.parseGemmAttributesV7],["Gemm","","11+",b.gemm,b.parseGemmAttributesV11],["GlobalAveragePool","","1+",Z.globalAveragePool,Z.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",Z.globalMaxPool],["Greater","","7+",g.greater],["Identity","","1+",ie.identity],["ImageScaler","","1+",A.imageScaler,A.parseImageScalerAttributes],["InstanceNormalization","","6+",w.instanceNormalization,w.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",ie.leakyRelu,ie.parseLeakyReluAttributes],["Less","","7+",g.less],["Log","","6+",ie.log],["MatMul","","1+",D.matMul,D.parseMatMulAttributes],["MaxPool","","1+",Z.maxPool,Z.parseMaxPoolAttributes],["Mul","","7+",g.mul],["Neg","","6+",ie.neg],["Not","","1+",ie.not],["Or","","7+",g.or],["Pad","","2-10",F.padV2,F.parsePadAttributesV2],["Pad","","11+",F.padV11,F.parsePadAttributesV11],["Pow","","7+",g.pow],["PRelu","","7+",g.pRelu],["ReduceLogSum","","1+",L.reduceLogSum,L.parseReduceAttributes],["ReduceMax","","1+",L.reduceMax,L.parseReduceAttributes],["ReduceMean","","1+",L.reduceMean,L.parseReduceAttributes],["ReduceMin","","1+",L.reduceMin,L.parseReduceAttributes],["ReduceProd","","1+",L.reduceProd,L.parseReduceAttributes],["ReduceSum","","1-12",L.reduceSum,L.parseReduceAttributes],["ReduceSumSquare","","1+",L.reduceLogSumSquare,L.parseReduceAttributes],["Relu","","6+",ie.relu],["Reshape","","5+",W.reshape],["Resize","","10",k.resize,k.parseResizeAttributesV10],["Resize","","11+",k.resize,k.parseResizeAttributesV11],["Shape","","1+",de.shape],["Sigmoid","","6+",ie.sigmoid],["Sin","","7+",ie.sin],["Slice","","10+",H.sliceV10],["Slice","","1-9",H.slice,H.parseSliceAttributes],["Softmax","","1-12",ue.softmax,ue.parseSoftmaxAttributes],["Softmax","","13+",ue.softmaxV13,ue.parseSoftmaxAttributesV13],["Split","","2-12",ve.split,ve.parseSplitAttributes],["Sqrt","","6+",ie.sqrt],["Squeeze","","1-12",ke.squeeze,ke.parseSqueezeAttributes],["Squeeze","","13+",ke.squeezeV13],["Sub","","7+",g.sub],["Sum","","6+",Ae.sum],["Tan","","7+",ie.tan],["Tanh","","6+",ie.tanh],["Tile","","6+",be.tile],["Transpose","","1+",G.transpose,G.parseTransposeAttributes],["Upsample","","7-8",ae.upsample,ae.parseUpsampleAttributesV7],["Upsample","","9",ae.upsample,ae.parseUpsampleAttributesV9],["Unsqueeze","","1-12",V.unsqueeze,V.parseUnsqueezeAttributes],["Unsqueeze","","13+",V.unsqueezeV13],["Xor","","7+",g.xor]]},2898:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseBatchNormalizationAttributes=S.batchNormalization=void 0;const E=y(246),p=y(5060),M=y(2039),d={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked]};S.batchNormalization=(v,u,t)=>(x(u),[v.run(Object.assign(Object.assign({},d),{cacheHint:t.cacheKey,get:()=>g(v,u,t)}),u)]),S.parseBatchNormalizationAttributes=v=>{const u=v.attributes.getFloat("epsilon",1e-5),t=v.attributes.getFloat("momentum",.9),e=v.attributes.getInt("spatial",1);return(0,E.createAttributeWithCacheKey)({epsilon:u,momentum:t,spatial:e})};const g=(v,u,t)=>{const e=(0,p.getGlsl)(v.session.backend.glContext.version),o=u[0].dims.length,[c,b]=v.calculateTextureWidthAndHeight(u[1].dims,M.TextureType.unpacked),A=`
  float process(int[${o}] indices) {
    vec2 position = offsetToCoords(indices[1], ${c}, ${b});
    float scale = getColorAsFloat(${e.texture2D}(Scale, position));
    float mean = getColorAsFloat(${e.texture2D}(Mean, position));
    float variance = getColorAsFloat(${e.texture2D}(Variance, position));
    float b = getColorAsFloat(${e.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${t.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},d),{output:{dims:u[0].dims,type:u[0].type,textureType:M.TextureType.unpacked},shaderSource:A})},x=v=>{if(!v||v.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const u=v[0],t=v[1],e=v[2],o=v[3],c=v[4];if(u.dims.length<3||t.dims.length!==1||e.dims.length!==1||o.dims.length!==1||c.dims.length!==1)throw new Error("invalid input shape.");if(t.dims[0]!==u.dims[1]||e.dims[0]!==u.dims[1]||o.dims[0]!==u.dims[1]||c.dims[0]!==u.dims[1])throw new Error("invalid input shape.");if(u.type!=="float32"&&u.type!=="float64"||t.type!=="float32"&&t.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||c.type!=="float32"&&c.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.xor=S.sub=S.pRelu=S.pow=S.or=S.mul=S.less=S.greater=S.equal=S.div=S.and=S.add=S.glslPRelu=S.glslPow=S.glslXor=S.glslOr=S.glslAnd=S.glslLess=S.glslGreater=S.glslEqual=S.glslSub=S.glslMul=S.glslDiv=S.glslAdd=void 0;const E=y(2517),p=y(8520),M=y(5060),d=y(2039);function g(){const L="add_";return{body:`
  float ${L}(float a, float b) {
    return a + b;
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:L,type:p.FunctionType.ValueBased}}function x(){const L="div_";return{body:`
  float ${L}(float a, float b) {
    return a / b;
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:L,type:p.FunctionType.ValueBased}}function v(){const L="mul_";return{body:`
  float ${L}(float a, float b) {
    return a * b;
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:L,type:p.FunctionType.ValueBased}}function u(){const L="sub_";return{body:`
  float ${L}(float a, float b) {
    return a - b;
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:L,type:p.FunctionType.ValueBased}}function t(){const L="equal_";return{body:`
  float ${L}(float a, float b) {
    return float(a == b);
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:L,type:p.FunctionType.ValueBased}}function e(){const L="greater_";return{body:`
  float ${L}(float a, float b) {
    return float(a > b);
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:L,type:p.FunctionType.ValueBased}}function o(){const L="less_";return{body:`
  float ${L}(float a, float b) {
    return float(a < b);
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:L,type:p.FunctionType.ValueBased}}function c(){const L="and_";return{body:`
  float ${L}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:L,type:p.FunctionType.ValueBased}}function b(){const L="or_";return{body:`
  float ${L}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:L,type:p.FunctionType.ValueBased}}function A(){const L="xor_";return{body:`
  float ${L}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:L,type:p.FunctionType.ValueBased}}function w(){return function(L){const W=`${L}_`;return{body:`
  float ${W}(float a, float b) {
    return ${L}(a, b);
  }
  vec4 ${W}(vec4 v1, vec4 v2) {
    return ${L}(v1, v2);
  }
  `,name:W,type:p.FunctionType.ValueBased}}("pow")}function D(){const L="prelu_";return{body:`
  float ${L}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${L}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:L,type:p.FunctionType.ValueBased}}S.glslAdd=g,S.glslDiv=x,S.glslMul=v,S.glslSub=u,S.glslEqual=t,S.glslGreater=e,S.glslLess=o,S.glslAnd=c,S.glslOr=b,S.glslXor=A,S.glslPow=w,S.glslPRelu=D;const F=(L,W,k,de=W[0].type,H)=>{const ue=L.session.pack?d.TextureType.packed:d.TextureType.unpacked;return{name:k.name,inputNames:["A","B"],inputTypes:[ue,ue],cacheHint:H,get:()=>Z(L,W,k,de)}},Z=(L,W,k,de=W[0].type)=>{const H=L.session.pack?d.TextureType.packed:d.TextureType.unpacked,ue=!E.ShapeUtil.areEqual(W[0].dims,W[1].dims);let ve=W[0].dims;const ke=L.session.pack;if(ue){const G=E.BroadcastUtil.calcShape(W[0].dims,W[1].dims,!1);if(!G)throw new Error("Can't perform binary op on the given tensors");ve=G;const ie=ve.length,V=W[0].dims.length!==0?W[0].dims.length:1,ae=W[1].dims.length!==0?W[1].dims.length:1,K=W[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",he=W[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Se=(0,M.getGlsl)(L.session.backend.glContext.version),Fe=ke?`
      ${k.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${k.name}(a, b);
        ${Se.output} = result;
      }`:`
      ${k.body}
      float process(int indices[${ie}]) {
        int aindices[${V}];
        int bindices[${ae}];
        ${K}
        ${he}
        return ${k.name}(_A(aindices), _B(bindices));
      }`;return{name:k.name,inputNames:["A","B"],inputTypes:[H,H],output:{dims:ve,type:de,textureType:H},shaderSource:Fe,hasMain:ke}}const Ae=(0,M.getGlsl)(L.session.backend.glContext.version),be=`
    ${k.body}
    void main() {
      vec4 v1 = ${Ae.texture2D}(A, TexCoords);
      vec4 v2 = ${Ae.texture2D}(B, TexCoords);
      vec4 result = ${k.name}(v1, v2);
      ${Ae.output} = result;
    }
    `;return{name:k.name,inputNames:["A","B"],inputTypes:[H,H],output:{dims:W[0].dims,type:de,textureType:H},shaderSource:be,hasMain:!0}};S.add=(L,W)=>[L.run(F(L,W,g()),W)],S.and=(L,W)=>[L.run(F(L,W,c(),"bool"),W)],S.div=(L,W)=>[L.run(F(L,W,x()),W)],S.equal=(L,W)=>[L.run(F(L,W,t(),"bool"),W)],S.greater=(L,W)=>[L.run(F(L,W,e(),"bool"),W)],S.less=(L,W)=>[L.run(F(L,W,o(),"bool"),W)],S.mul=(L,W)=>[L.run(F(L,W,v()),W)],S.or=(L,W)=>[L.run(F(L,W,b(),"bool"),W)],S.pow=(L,W)=>[L.run(F(L,W,w()),W)],S.pRelu=(L,W)=>[L.run(F(L,W,D()),W)],S.sub=(L,W)=>[L.run(F(L,W,u()),W)],S.xor=(L,W)=>[L.run(F(L,W,A(),"bool"),W)]},4196:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseCastAttributes=S.cast=void 0;const E=y(2517);S.cast=(M,d,g)=>(p(d),[M.cast(d[0],g)]),S.parseCastAttributes=M=>E.ProtoUtil.tensorDataTypeFromProto(M.attributes.getInt("to"));const p=M=>{if(!M||M.length!==1)throw new Error("Cast requires 1 input.");if(M[0].type==="string")throw new Error("Invalid input type.")}},1163:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createPackedConcatProgramInfoLoader=void 0;const E=y(5060),p=y(2039),M=y(9390),d=y(2827);S.createPackedConcatProgramInfoLoader=(x,v,u)=>{const t=(e=v.length,o=u.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:e},(c,b)=>`X${b}`),inputTypes:Array(e).fill(p.TextureType.packed),cacheHint:o});var e,o;return Object.assign(Object.assign({},t),{get:()=>((c,b,A,w)=>{const D=A[0].dims.slice();if(w>=D.length||w<-1*D.length)throw new Error("axis specified for concat doesn't match input dimensionality");w<0&&(w=D.length+w);const F=D.slice(0);for(let K=1;K<A.length;K++){const he=A[K].dims.slice();for(let Se=0;Se<D.length;Se++)if(Se===w)F[w]+=he[Se];else if(D[Se]!==he[Se])throw new Error("non concat dimensions must match")}const Z=F.length,L=(0,d.getChannels)("coords",Z),W=(0,M.getCoordsDataType)(Z),k=(0,d.unpackFromChannel)(),de=A.map(K=>K.dims),H=(0,M.getGlChannels)(Z),ue=new Array(de.length-1);ue[0]=de[0][w];for(let K=1;K<ue.length;K++)ue[K]=ue[K-1]+de[K][w];const ve=H[w],ke=H.slice(-2),Ae=H.join();let be=`if (${ve} < ${ue[0]}) {
        return getChannel(
            getX0(${Ae}), vec2(${ke.join()}));
        }`;for(let K=1;K<ue.length;K++){const he=ue[K-1];be+=`
            if (${ve} < ${ue[K]}  && ${ve} >= ${ue[K-1]}) {
              return getChannel(
                getX${K}(${g(H,ve,he)}),
                vec2(${g(ke,ve,he)}));
            }`}const G=ue.length,ie=ue[ue.length-1];be+=`
            return getChannel(
              getX${G}(${g(H,ve,ie)}),
              vec2(${g(ke,ve,ie)}));`;const V=(0,E.getGlsl)(c.session.backend.glContext.version),ae=`
          ${k}
          float getValue(${H.map(K=>"int "+K)}) {
            ${be}
          }

          void main() {
            ${W} coords = getOutputCoords();
            int lastDim = coords.${H[Z-1]};
            coords.${H[Z-1]} = coords.${H[Z-2]};
            coords.${H[Z-2]} = lastDim;

            vec4 result = vec4(getValue(${L}), 0., 0., 0.);

            ${L[Z-1]} = ${L[Z-1]} + 1;
            if (${L[Z-1]} < ${F[Z-1]}) {
              result.g = getValue(${L});
            }

            ${L[Z-2]} = ${L[Z-2]} + 1;
            if (${L[Z-2]} < ${F[Z-2]}) {
              result.a = getValue(${L});
            }

            ${L[Z-1]} = ${L[Z-1]} - 1;
            if (${L[Z-2]} < ${F[Z-2]} &&
                ${L[Z-1]} < ${F[Z-1]}) {
              result.b = getValue(${L});
            }
            ${V.output} = result;
          }
        `;return Object.assign(Object.assign({},b),{output:{dims:F,type:A[0].type,textureType:p.TextureType.packed},shaderSource:ae,hasMain:!0})})(x,t,v,u.axis)})};const g=(x,v,u)=>{const t=x.indexOf(v);return x.map((e,o)=>o===t?`${e} - ${u}`:e).join()}},2069:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseConcatAttributes=S.concat=void 0;const E=y(246),p=y(2039),M=y(1163);S.concat=(e,o,c)=>(t(o),e.session.pack&&o[0].dims.length>1?[e.run((0,M.createPackedConcatProgramInfoLoader)(e,o,c),o)]:[e.run(d(e,o,c),o)]);const d=(e,o,c)=>{const b=(A=o.length,w=c.cacheKey,{name:"Concat",inputNames:Array.from({length:A},(D,F)=>`X${F}`),inputTypes:Array(A).fill(p.TextureType.unpacked),cacheHint:w});var A,w;return Object.assign(Object.assign({},b),{get:()=>((D,F,Z,L)=>{const W=Z[0].dims.slice();if(L>=W.length||L<-1*W.length)throw new Error("axis specified for concat doesn't match input dimensionality");L<0&&(L=W.length+L);const k=W.slice(0);for(let Ae=1;Ae<Z.length;Ae++){const be=Z[Ae].dims.slice();for(let G=0;G<W.length;G++)if(G===L)k[L]+=be[G];else if(W[G]!==be[G])throw new Error("non concat dimensions must match")}const de=k.length,H=new Array(Z.length);let ue=0;for(let Ae=0;Ae<H.length;++Ae)ue+=Z[Ae].dims[L],H[Ae]=ue;let ve="";ve=Z.length<5?g(H):x(H);const ke=`
        ${v(Z.length,de)}
        ${u(H)}
        ${ve}
        float process(int indices[${de}]) {
          int textureIndex = getTextureWhereDataResides (indices[${L}]);

          if(textureIndex != 0) {
            indices[${L}] = indices[${L}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},F),{output:{dims:k,type:Z[0].type,textureType:p.TextureType.unpacked},shaderSource:ke})})(0,b,o,c.axis)})},g=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((o,c)=>`if(index<${o}) {return ${c};}
`).join("")}
    }`,x=e=>g(e),v=(e,o)=>{const c=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${o}]) {`];for(let b=0;b<e;++b)b===0?c.push(`	if (textureIndex == ${b}) { return _X${b}(indices); }`):b===e-1?c.push(`	else { return _X${b}(indices); }`):c.push(`	else if (textureIndex == ${b}) { return _X${b}(indices); }`);return c.push("	}"),c.join(`
`)},u=e=>{const o=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let c=0;c<e.length;++c)c===0?o.push(`	if (index == ${c}) { return ${e[c]}; }`):c===e.length-1?o.push(`	else { return ${e[c]}; }`):o.push(`	else if (index == ${c}) { return ${e[c]}; }`);return o.push("	}"),o.join(`
`)};S.parseConcatAttributes=e=>(0,E.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis")});const t=e=>{if(!e||e.length<1)throw new Error("too few inputs");const o=e[0].type,c=e[0].dims.length;if(o==="string")throw new Error("string tensor is not supported yet");for(const b of e){if(b.type!==o)throw new Error("input tensors should be one type");if(b.dims.length!==c)throw new Error("input tensors should have the same shape")}}},4770:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createUnpackedGroupedConvProgramInfoLoader=void 0;const E=y(6231),p=y(5060),M=y(2039),d=y(8138),g=y(2823);S.createUnpackedGroupedConvProgramInfoLoader=(x,v,u)=>{const t=(e=v.length>2,o=u.cacheKey,{name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked]:[M.TextureType.unpacked,M.TextureType.unpacked],cacheHint:o});var e,o;return Object.assign(Object.assign({},t),{get:()=>((c,b,A,w)=>{const D=b.length>2?"value += getBias(output_channel);":"",F=b[0].dims.slice(),Z=b[1].dims.slice(),L=Z[0]/w.group;E.Logger.verbose("GroupedConv",`autpPad:${w.autoPad}, dilations:${w.dilations}, group:${w.group}, kernelShape:${w.kernelShape}, pads:${w.pads}, strides:${w.strides}`);const W=(0,d.calculateOutputShape)(F,Z,w.dilations,w.pads,w.strides),k=(0,p.getGlsl)(c.session.backend.glContext.version),{activationFunction:de,applyActivation:H}=(0,g.getActivationSnippet)(w),ue=`
  const ivec2 strides = ivec2(${w.strides[0]}, ${w.strides[1]});
  const ivec2 pads = ivec2(${w.pads[0]}, ${w.pads[1]});
  ${de}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${L};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${Z[1]}; wInChannel++) {
      int input_channel = group_id * ${Z[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${Z[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${w.dilations[0]};

        if (xHeight < 0 || xHeight >= ${F[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${Z[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${w.dilations[1]};
          if (xWidth < 0 || xWidth >= ${F[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${D}
    ${H}
    ${k.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},A),{output:{dims:W,type:b[0].type,textureType:M.TextureType.unpacked},shaderSource:ue,hasMain:!0})})(x,v,t,u)})}},1386:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.conv2DPacked=S.conv2DPackedPointwise=void 0;const E=y(8138),p=y(8555),M=y(708);S.conv2DPackedPointwise=(d,g,x)=>{const v=g[0].dims,u=g[1].dims,t=(0,E.calculateOutputShape)(v,u,x.dilations,x.pads,x.strides),e=d.reshapePacked(g[0],[v[1],v[2]*v[3]]),o=d.reshapePacked(g[1],[u[0],u[1]]),c=g.length>2?[o,e,g[2]]:[o,e],b=d.run((0,M.createPackedMatmulProgramInfoLoader)(d,c,x),c);return d.reshapePacked(b,t)},S.conv2DPacked=(d,g,x)=>{const v=g[0].dims,u=g[1].dims,t=(0,E.calculateOutputShape)(v,u,x.dilations,x.pads,x.strides),e=d.run((0,p.createPackedIm2ColProgramInfoLoader)(d,g[0],g[1],t,x),[g[0]]),o=d.reshapePacked(g[1],[u[0],u[1]*u[2]*u[3]]),c=g.length===3?[o,e,g[2]]:[o,e],b=d.run((0,M.createPackedMatmulProgramInfoLoader)(d,c,x),c);return d.reshapePacked(b,t)}},9663:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseConvTransposeAttributes=S.convTranspose=void 0;const E=y(246),p=y(5060),M=y(2039),d=y(2823),g=(o,c,b,A,w,D)=>(o-1)*c+b+(A-1)*w+1-D,x=(o,c,b,A,w)=>{const D=Math.floor(o/2);c==="SAME_UPPER"?(b[A]=D,b[w]=o-D):c==="SAME_LOWER"&&(b[A]=o-D,b[w]=D)};S.convTranspose=(o,c,b)=>(e(c,b),v(o,c,b));const v=(o,c,b)=>{const A=t(b,c);return[u(o,c,A)]},u=(o,c,b)=>o.run(((A,w,D)=>{const F=(Z=w.length>2,L=D.cacheKey,{name:"ConvTranspose",inputNames:Z?["X","W","B"]:["X","W"],inputTypes:Z?[M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked]:[M.TextureType.unpacked,M.TextureType.unpacked],cacheHint:L});var Z,L;return Object.assign(Object.assign({},F),{get:()=>((W,k,de,H)=>{const ue=k.length>2?"getB(output_channel)":"0.0",ve=k[0].dims,ke=k[1].dims,Ae=ke[1],be=ke[0]/H.group,G=[k[0].dims[0],k[1].dims[1]*H.group,...H.outputShape],ie=(0,p.getGlsl)(W.session.backend.glContext.version),{activationFunction:V,applyActivation:ae}=(0,d.getActivationSnippet)(H),K=`
  const ivec2 strides = ivec2(${H.strides[0]}, ${H.strides[1]});
  const ivec2 pads = ivec2(${H.pads[0]}, ${H.pads[1]});
  ${V}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Ae};
    int wOutChannel = output_channel - group_id * ${Ae};

    float value = ${ue};
    for (int inChannelOffset = 0; inChannelOffset < ${be}; inChannelOffset++) {
      int input_channel = group_id * ${be} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${ke[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${ke[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${H.dilations[0]}, wHOff * ${H.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${ve[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${ve[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ae}
    ${ie.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},de),{output:{dims:G,type:k[0].type,textureType:M.TextureType.unpacked},shaderSource:K,hasMain:!0})})(A,w,F,D)})})(o,c,b),c),t=(o,c)=>{const b=o.kernelShape.slice();if(o.kernelShape.length===0)for(let F=2;F<c[1].dims.length;++F)b.push(c[1].dims[F]);const A=o.pads.slice(),w=o.outputShape.slice();((F,Z,L,W,k,de,H,ue)=>{const ve=F.length-2,ke=ue.length===0;for(let Ae=0;Ae<ve;++Ae){const be=ke?F[Ae+2]*de[Ae]:ue[Ae],G=g(F[Ae+2],de[Ae],k[Ae],Z[Ae],L[Ae],be);x(G,W,k,Ae,Ae+ve),ke&&ue.push(de[Ae]*(F[Ae+2]-1)+H[Ae]+(Z[Ae]-1)*L[Ae]+1-k[Ae]-k[Ae+ve])}})(c[0].dims,b,o.dilations,o.autoPad,A,o.strides,o.outputPadding,w);const D=Object.assign({},o);return Object.assign(D,{kernelShape:b,pads:A,outputShape:w,cacheKey:o.cacheKey}),D};S.parseConvTransposeAttributes=o=>{const c=o.attributes,b=(0,d.parseInternalActivationAttributes)(c),A=c.getString("auto_pad","NOTSET"),w=c.getInts("dilations",[1,1]),D=c.getInt("group",1),F=c.getInts("kernel_shape",[]),Z=c.getInts("output_padding",[0,0]),L=c.getInts("output_shape",[]),W=c.getInts("pads",[0,0,0,0]),k=c.getInts("strides",[1,1]);return(0,E.createAttributeWithCacheKey)(Object.assign({autoPad:A,dilations:w,group:D,kernelShape:F,outputPadding:Z,outputShape:L,pads:W,strides:k},b))};const e=(o,c)=>{if(!o||o.length!==2&&o.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(o[0].dims.length!==4||o[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(o[0].dims[1]!==o[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const b=o[1].dims[1]*c.group;if(o.length===3&&(o[2].dims.length!==1||o[2].dims[0]!==b))throw new Error("invalid bias");const A=o[0].dims.length-2;if(c.dilations.length!==A)throw new Error(`dilations should be ${A}D`);if(c.strides.length!==A)throw new Error(`strides should be ${A}D`);if(c.pads.length!==2*A)throw new Error(`pads should be ${2*A}D`);if(c.outputPadding.length!==A)throw new Error(`output_padding should be ${A}D`);if(c.kernelShape.length!==0&&c.kernelShape.length!==o[1].dims.length-2)throw new Error("invalid kernel shape");if(c.outputShape.length!==0&&c.outputShape.length!==o[0].dims.length-2)throw new Error("invalid output shape");if(o[0].type!=="float32"||o[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(o.length===3&&o[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseConvAttributes=S.conv=S.calculateOutputShape=void 0;const E=y(246),p=y(2517),M=y(4770),d=y(1386),g=y(9828),x=y(2823),v=y(3248),u=y(5623);S.calculateOutputShape=(A,w,D,F,Z)=>{const L=A[0],W=A.slice(2),k=W.length,de=w[0],H=w.slice(2).map((ve,ke)=>ve+(ve-1)*(D[ke]-1)),ue=W.map((ve,ke)=>ve+F[ke]+F[ke+k]).map((ve,ke)=>Math.floor((ve-H[ke]+Z[ke])/Z[ke]));return[L,de].concat(...ue)},S.conv=(A,w,D)=>(b(w,D),t(A,w,D));const t=(A,w,D)=>{const F=c(D,w),Z=A.session.pack,L=F.kernelShape[0]===1&&F.kernelShape[1]===1;return F.group>1?[A.run((0,M.createUnpackedGroupedConvProgramInfoLoader)(A,w,F),w)]:L&&Z?[e(A,w,F)]:Z&&w[0].dims.length===4&&w[0].dims[0]===1&&!L?[(0,d.conv2DPacked)(A,w,F)]:[o(A,w,F)]},e=(A,w,D)=>{const F=w[0].dims,Z=w[1].dims,L=(0,S.calculateOutputShape)(F,Z,D.dilations,D.pads,D.strides),W=A.reshapeUnpacked(w[0],[F[1],F[2]*F[3]]),k=A.reshapeUnpacked(w[1],[Z[0],Z[1]]),de=w.length>2?[k,W,w[2]]:[k,W],H=A.run((0,u.createMatmulProgramInfoLoader)(de,D),de);return A.reshapeUnpacked(H,L)},o=(A,w,D)=>{const F=w[0].dims,Z=w[1].dims,L=(0,S.calculateOutputShape)(F,Z,D.dilations,D.pads,D.strides),W=A.run((0,v.createIm2ColProgramInfoLoader)(A,w[0],w[1],L,D),[w[0]]),k=w.length===3?[W,w[1],w[2]]:[W,w[1]];return A.run((0,g.createDotProductProgramInfoLoader)(A,w,L,D),k)},c=(A,w)=>{const D=A.kernelShape.slice();if(A.kernelShape.length===0)for(let L=2;L<w[1].dims.length;++L)D.push(w[1].dims[L]);const F=A.pads.slice();p.PoolConvUtil.adjustPadsBasedOnAutoPad(w[0].dims,A.strides,A.dilations,D,F,A.autoPad);const Z=Object.assign({},A);return Object.assign(Z,{kernelShape:D,pads:F,cacheKey:A.cacheKey}),Z};S.parseConvAttributes=A=>{const w=A.attributes,D=(0,x.parseInternalActivationAttributes)(w),F=w.getString("auto_pad","NOTSET"),Z=w.getInts("dilations",[1,1]),L=w.getInt("group",1),W=w.getInts("kernel_shape",[]),k=w.getInts("pads",[0,0,0,0]),de=w.getInts("strides",[1,1]);return(0,E.createAttributeWithCacheKey)(Object.assign({autoPad:F,dilations:Z,group:L,kernelShape:W,pads:k,strides:de},D))};const b=(A,w)=>{if(!A||A.length!==2&&A.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(A[0].dims.length!==4||A[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(A[0].dims[1]!==A[1].dims[1]*w.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(A.length===3&&(A[2].dims.length!==1||A[1].dims[0]!==A[2].dims[0]))throw new Error("invalid bias");const D=A[0].dims.length-2;if(w.dilations.length!==D)throw new Error(`dilations should be ${D}D`);if(w.strides.length!==D)throw new Error(`strides should be ${D}D`);if(w.pads.length!==2*D)throw new Error(`pads should be ${2*D}D`);if(w.kernelShape.length!==0&&w.kernelShape.length!==A[1].dims.length-2)throw new Error("invalid kernel shape");if(A[0].type!=="float32"||A[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(A.length===3&&A[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseDepthToSpaceAttributes=S.depthToSpace=void 0;const E=y(3738);S.depthToSpace=(M,d,g)=>{p(d);const x=g.blocksize,v=x*x,u=g.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],t=g.mode==="DCR"?[d[0].dims[0],x,x,d[0].dims[1]/v,d[0].dims[2],d[0].dims[3]]:[d[0].dims[0],d[0].dims[1]/v,x,x,d[0].dims[2],d[0].dims[3]],e=M.reshapeUnpacked(d[0],t),o={perm:u,cacheKey:`${u}`},[c]=(0,E.transpose)(M,[e],o),b=[d[0].dims[0],d[0].dims[1]/v,d[0].dims[2]*x,d[0].dims[3]*x];return[M.reshapeUnpacked(c,b)]},S.parseDepthToSpaceAttributes=M=>{const d=M.attributes.getInt("blocksize");if(d<1)throw new Error(`blocksize must be >= 1, but got : ${d} for DepthToSpace`);const g=M.attributes.getString("mode","DCR");if(g!=="DCR"&&g!=="CRD")throw new Error(`unrecognized mode: ${g} for DepthToSpace`);return{mode:g,blocksize:d}};const p=M=>{if(M.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${M.length}`);if(M[0].type==="string"||M[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createDotProductProgramInfoLoader=void 0;const E=y(2517),p=y(5060),M=y(2039),d=y(2823),g=y(3248);S.createDotProductProgramInfoLoader=(x,v,u,t)=>{const e=((o,c)=>({name:"ConvDotProduct",inputNames:o?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:o?[M.TextureType.unpacked,M.TextureType.packedLastDimension,M.TextureType.unpacked]:[M.TextureType.unpacked,M.TextureType.packedLastDimension],cacheKey:c.activationCacheKey}))(v.length>2,t);return Object.assign(Object.assign({},e),{get:()=>((o,c,b,A,w)=>{const D=b[0].dims,F=b[1].dims,Z=[F[0],Math.ceil(D[1]*F[2]*F[3]/4)],L=(0,g.calculateIm2ColDims)(D,F,A),[W,k]=o.calculateTextureWidthAndHeight(Z,M.TextureType.packedLastDimension),de=E.ShapeUtil.computeStrides(L),[H,ue]=o.calculateTextureWidthAndHeight(L,M.TextureType.packedLastDimension),ve=A.length,ke=b.length<3?"0.0":"_B(b)",Ae=Math.ceil(D[1]*F[2]*F[3]/4),{activationFunction:be,applyActivation:G}=(0,d.getActivationSnippet)(w),ie=(0,p.getGlsl)(o.session.backend.glContext.version),V=`
${be}
float process(int indices[${ve}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${de[0]} + im2col[1] * ${de[1]} + im2col[2] * ${de[2]};
  int kernelOffset = indices[1] * ${Z[1]};
  float value = ${ke};
  for (int i = 0; i < ${Ae}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${H}, ${ue});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${W}, ${k});
    value += dot(${ie.texture2D}(Im2Col, im2colCoords), ${ie.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${G}
  return value;
}`;return Object.assign(Object.assign({},c),{output:{dims:A,type:b[0].type,textureType:M.TextureType.unpacked},shaderSource:V})})(x,e,v,u,t)})}},7992:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseFlattenAttributes=S.flatten=void 0;const E=y(2517);S.flatten=(M,d,g)=>{p(d,g);const x=E.ShapeUtil.flattenShape(d[0].dims,g);return[M.reshapeUnpacked(d[0],x)]},S.parseFlattenAttributes=M=>M.attributes.getInt("axis",1);const p=(M,d)=>{if(!M||M.length!==1)throw new Error("Flatten requires 1 input.");const g=M[0].dims.length;if(g===0)throw new Error("scalar tensor is not supported.");if(d<-g||d>g)throw new Error("Invalid axis");if(M[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseInternalActivationAttributes=S.getActivationSnippet=void 0;const E=y(2517),p=y(4909);S.getActivationSnippet=function(M){let d;switch(M.activation){case"Relu":d=(0,p.glslRelu)();break;case"Sigmoid":d=(0,p.glslSigmoid)();break;case"Clip":d=(0,p.glslClip)(M.clipMin,M.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const g=d.name;return{activationFunction:d.body,applyActivation:`value = ${g}_(value);`}},S.parseInternalActivationAttributes=M=>{const d=M.getString("activation","");if(d==="Clip"){const[g,x]=M.getFloats("activation_params",[E.MIN_CLIP,E.MAX_CLIP]);return{activation:d,clipMax:x,clipMin:g,activationCacheKey:`${d}:${g},${x}`}}return{activation:d,activationCacheKey:d}}},1253:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseGatherAttributes=S.gather=void 0;const E=y(246),p=y(782),M=y(2517),d=y(2039);S.gather=(u,t,e)=>(v(t,e.axis),[u.run(x(u,t,e),t)]),S.parseGatherAttributes=u=>(0,E.createAttributeWithCacheKey)({axis:u.attributes.getInt("axis",0)});const g={name:"Gather",inputNames:["A","B"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},x=(u,t,e)=>{const o=Object.assign(Object.assign({},g),{cacheHint:e.cacheKey});return Object.assign(Object.assign({},o),{get:()=>((c,b,A,w)=>{const D=A[0].dims.slice(),F=A[1].dims.slice(),Z=new Array(D.length+F.length-1);w=M.ShapeUtil.normalizeAxis(w,D.length);const L=[];for(let k=0;k<Z.length;k++)k<w?(Z[k]=D[k],L.push(`inputIdx[${k}] = outputIdx[${k}];`)):k<w+F.length?(Z[k]=F[k-w],L.push(`indexDataIdx[${k-w}] = outputIdx[${k}];`)):(Z[k]=D[k-F.length+1],L.push(`inputIdx[${k-F.length+1}] = outputIdx[${k}];`));const W=`
      float process(int outputIdx[${Z.length||1}]) {
        int inputIdx[${D.length}];
        int indexDataIdx[${F.length||1}];
        indexDataIdx[0] = 0;
        ${L.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${w}] = idx < 0 ? idx + ${D[w]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},b),{output:{dims:Z,type:A[0].type,textureType:d.TextureType.unpacked},shaderSource:W})})(0,o,t,e.axis)})},v=(u,t)=>{if(!u||u.length!==2)throw new Error("Gather requires 2 inputs.");const e=u[0].dims.length;if(e<1)throw new Error("Invalid input shape.");if(t<-e||t>e-1)throw new Error("Invalid axis.");if(p.NUMBER_TYPES.indexOf(u[0].type)===-1)throw new Error("Invaid input type.");if(u[1].type!=="int32"&&u[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseGemmAttributesV11=S.parseGemmAttributesV7=S.gemm=void 0;const E=y(246),p=y(2517),M=y(2039);S.gemm=(u,t,e)=>(v(t,e),[u.run(g(t,e),t)]);const d=(u,t)=>{const e=u.attributes.getInt("transA",0)!==0,o=u.attributes.getInt("transB",0)!==0,c=u.attributes.getFloat("alpha",1),b=u.attributes.getFloat("beta",1);return(0,E.createAttributeWithCacheKey)({transA:e,transB:o,alpha:c,beta:b,isOptionalC:t})};S.parseGemmAttributesV7=u=>d(u,!1),S.parseGemmAttributesV11=u=>d(u,!0);const g=(u,t)=>{const e={name:"Gemm",inputNames:u.length===3?["A","B","C"]:["A","B"],inputTypes:u.length===3?[M.TextureType.unpacked,M.TextureType.unpacked,M.TextureType.unpacked]:[M.TextureType.unpacked,M.TextureType.unpacked],key:t.cacheKey};return Object.assign(Object.assign({},e),{get:()=>x(e,u,t)})},x=(u,t,e)=>{const o=t[0].dims.slice(),c=t[1].dims.slice(),[b,A]=p.GemmUtil.getShapeOfGemmResult(o,e.transA,c,e.transB,t.length===3?t[2].dims:void 0),w=[b,A];if(!w)throw new Error("Can't use gemm on the given tensors");let D=o[o.length-1],F="";e.transA&&(D=o[0]),e.transA&&e.transB?F="value += _A_T(a) * _B_T(b);":e.transA&&!e.transB?F="value += _A_T(a) * _B(b);":!e.transA&&e.transB?F="value += _A(a) * _B_T(b);":e.transA||e.transB||(F="value += _A(a) * _B(b);");const Z=w.length,L=`
      float process(int indices[${Z}]) {
          int a[${Z}];
          int b[${Z}];
          ${t.length===3?`int c[${t[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${t.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${D}; ++k) {
              a[${Z-1}] = k;
              b[${Z-2}] = k;
              ${F}
          }

          value = value * alpha;
          ${t.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},u),{output:{dims:w,type:t[0].type,textureType:M.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:e.alpha},{name:"beta",type:"float",data:e.beta}],shaderSource:L})},v=(u,t)=>{if(!u)throw new Error("Input is missing");if(t.isOptionalC&&(u.length<2||u.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&u.length!==3)throw new Error("Gemm requires 3 inputs");if(u.length===3&&u[2].dims.length!==1&&u[2].dims.length!==2)throw new Error("Invalid input shape of C");if(u[0].type!=="float32"&&u[0].type!=="float64"||u[1].type!=="float32"&&u[1].type!=="float64"||u.length===3&&u[2].type!=="float32"&&u[2].type!=="float64")throw new Error("Invalid input type.");if(u[0].type!==u[1].type||u.length===3&&u[0].type!==u[2].type)throw new Error("Input types are mismatched")}},8555:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createPackedIm2ColProgramInfoLoader=void 0;const E=y(5060),p=y(2039),M=y(2827);S.createPackedIm2ColProgramInfoLoader=(d,g,x,v,u)=>{const t=(e=u.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[p.TextureType.packed],cacheHint:e});var e;return Object.assign(Object.assign({},t),{get:()=>((o,c,b,A,w,D)=>{const F=b.dims,Z=A.dims,L=w.length,W=[Z[1]*Z[2]*Z[3],w[2]*w[3]],k=Z[2]*Z[3],de=(0,M.unpackFromChannel)(),H=(0,E.getGlsl)(o.session.backend.glContext.version);let ue="";for(let ke=0;ke<=1;ke++)for(let Ae=0;Ae<=1;Ae++)ue+=`
            blockIndex = rc.x + ${Ae};
            pos = rc.y + ${ke};

            if(blockIndex < ${W[1]} && pos < ${W[0]}) {
              offsetY = int(blockIndex / (${w[L-1]})) * ${D.strides[0]} -
                ${D.pads[0]};
              d0 = offsetY + ${D.dilations[0]} * (imod(pos, ${k}) / ${Z[2]});

              if(d0 < ${F[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${w[L-1]}) * ${D.strides[1]} -
                  ${D.pads[1]};
                d1 = offsetX + ${D.dilations[1]} * imod(imod(pos, ${k}), ${Z[2]});

                if(d1 < ${F[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${k}.);
                    innerDims = vec2(d0, d1);
                    result[${2*ke+Ae}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const ve=`
      ${de}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${ue}
          ${H.output} = result;
      }
            `;return Object.assign(Object.assign({},c),{output:{dims:W,type:b.type,textureType:p.TextureType.packed},shaderSource:ve,hasMain:!0})})(d,t,g,x,v,u)})}},3248:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.calculateIm2ColDims=S.createIm2ColProgramInfoLoader=void 0;const E=y(2039);S.createIm2ColProgramInfoLoader=(p,M,d,g,x)=>{const v=(u=x.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[E.TextureType.unpacked],cacheHint:u});var u;return Object.assign(Object.assign({},v),{get:()=>((t,e,o,c,b,A)=>{const w=o.dims,D=c.dims,F=b.length,Z=(0,S.calculateIm2ColDims)(w,D,b,4),L=`
        const int XC = ${w[1]};
        const int XH = ${w[2]};
        const int XW = ${w[3]};
        const int KH = ${A.kernelShape[0]};
        const int KW = ${A.kernelShape[1]};
        const int dilationH = ${A.dilations[0]};
        const int dilationW = ${A.dilations[1]};
        const int strideH = ${A.strides[0]};
        const int strideW = ${A.strides[1]};
        const int padH = ${A.pads[0]};
        const int padW = ${A.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${F}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${w.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},e),{output:{dims:Z,type:o.type,textureType:E.TextureType.packedLastDimension},shaderSource:L})})(0,v,M,d,g,x)})},S.calculateIm2ColDims=(p,M,d,g=4)=>[d[0],d[2],d[3],Math.ceil(p[1]*M[2]*M[3]/g)]},6572:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseImageScalerAttributes=S.imageScaler=void 0;const E=y(246),p=y(2039);S.imageScaler=(v,u,t)=>(x(u),[v.run(d(v,u,t),u)]),S.parseImageScalerAttributes=v=>{const u=v.attributes.getFloat("scale"),t=v.attributes.getFloats("bias");return(0,E.createAttributeWithCacheKey)({scale:u,bias:t})};const M={name:"ImageScaler",inputNames:["X"],inputTypes:[p.TextureType.unpacked]},d=(v,u,t)=>{const e=Object.assign(Object.assign({},M),{cacheHint:t.cacheKey});return Object.assign(Object.assign({},e),{get:()=>((o,c,b,A)=>{const w=b[0].dims.slice(),D=w.length,F=`
      ${g(A.bias.length)}
      float process(int indices[${D}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},c),{output:{dims:w,type:b[0].type,textureType:p.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:A.bias.length,data:A.bias},{name:"scale",type:"float",data:A.scale}],shaderSource:F})})(0,e,u,t)})},g=v=>{const u=[`float getBias(float bias[${v}], int channel) {`];for(let t=0;t<v;++t)t===0?u.push(`	if (channel == ${t}) { return bias[${t}]; }`):t===v-1?u.push(`	else { return bias[${t}]; }`):u.push(`	else if (channel == ${t}) { return bias[${t}]; }`);return u.push("	}"),u.join(`
`)},x=v=>{if(!v||v.length!==1)throw new Error("ImageScaler requires 1 input.");if(v[0].dims.length!==4)throw new Error("Invalid input shape.");if(v[0].type!=="float32"&&v[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseInstanceNormalizationAttributes=S.instanceNormalization=void 0;const E=y(5060),p=y(2039);S.instanceNormalization=(u,t,e)=>{v(t);const o=u.run(d(t[0]),t);return[u.run(x(u,t[0],e,o.dims),[t[0],o,t[1],t[2]])]},S.parseInstanceNormalizationAttributes=u=>u.attributes.getFloat("epsilon",1e-5);const M={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[p.TextureType.unpacked]},d=u=>Object.assign(Object.assign({},M),{get:()=>((t,e)=>{const o=e.dims.slice(),c=o[1],b=o[2]*o[3],A=[o[0],c],w=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${b});
        temp = 0.0;
        for(int a2=0; a2<${o[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${o[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${b});

        return v;
      }`;return Object.assign(Object.assign({},t),{output:{dims:A,type:e.type,textureType:p.TextureType.packedLastDimension},shaderSource:w})})(M,u)}),g={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[p.TextureType.unpacked,p.TextureType.packedLastDimension,p.TextureType.unpacked,p.TextureType.unpacked]},x=(u,t,e,o)=>{const c=Object.assign(Object.assign({},g),{cacheHint:`${e}`});return Object.assign(Object.assign({},c),{get:()=>((b,A,w,D,F)=>{const Z=(0,E.getGlsl)(b.session.backend.glContext.version),[L,W]=b.calculateTextureWidthAndHeight(F,p.TextureType.packedLastDimension),[k,de]=[L/4,W],H=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${k}, ${de});
        return ${Z.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},A),{output:{dims:w.dims,type:w.type,textureType:p.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:D}],shaderSource:H})})(u,c,t,e,o)})},v=u=>{if(!u||u.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const t=u[0],e=u[1],o=u[2];if(t.dims.length<3||e.dims.length!==1||o.dims.length!==1)throw new Error("Invalid input shape.");if(e.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||o.type!=="float32"&&o.type!=="float64")throw new Error("Invalid input type.");if(u[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createPackedMatmulProgramInfoLoader=void 0;const E=y(2517),p=y(5060),M=y(2039),d=y(9390),g=y(2823),x=y(5623);S.createPackedMatmulProgramInfoLoader=(v,u,t)=>{const e=(o=u.length>2,c=t.activationCacheKey,{name:"MatMul (packed)",inputNames:o?["A","B","Bias"]:["A","B"],inputTypes:o?[M.TextureType.packed,M.TextureType.packed,M.TextureType.packed]:[M.TextureType.packed,M.TextureType.packed],cacheHint:c});var o,c;return Object.assign(Object.assign({},e),{get:()=>((b,A,w,D)=>{const F=w.length>2,Z=F?"value += getBiasForMatmul();":"",L=w[0].dims,W=w[1].dims,k=E.BroadcastUtil.calcShape(L,W,!0),de=!E.ShapeUtil.areEqual(w[0].dims,w[1].dims);if(!k)throw new Error("Can't use matmul on the given tensors");const H=L[L.length-1],ue=Math.ceil(H/2),ve=L.length,ke=W.length,Ae=(0,p.getGlsl)(b.session.backend.glContext.version),be=(0,d.getCoordsDataType)(k.length),G=k.length,ie=(0,d.getGlChannels)(),{activationFunction:V,applyActivation:ae}=(0,g.getActivationSnippet)(D),K=F?`${(0,x.getBiasForMatmul)(be,ie,w[2].dims,k,!0)}`:"",he=de?`${function(lt,Gt,pn,$n){let Ln=[],st=[];const xt=pn[0].dims,tn=pn[1].dims,Un=xt.length,We=tn.length,Yt=$n.length,Ze=Yt-Un,Pe=Yt-We;Ln=xt.map((oe,ce)=>`coords.${Gt[ce+Ze]}`),Ln[Un-1]="i*2",Ln.join(", "),st=tn.map((oe,ce)=>`coords.${Gt[ce+Pe]}`),st[We-2]="i*2",st.join(", ");const ze=E.BroadcastUtil.getBroadcastDims(xt,$n),ht=E.BroadcastUtil.getBroadcastDims(tn,$n),P=ze.map(oe=>`coords.${Gt[oe+Ze]} = 0;`).join(`
`),ne=ht.map(oe=>`coords.${Gt[oe+Pe]} = 0;`).join(`
`),_e=`int lastDim = coords.${Gt[Yt-1]};
  coords.${Gt[Yt-1]} = coords.${Gt[Yt-2]};
  coords.${Gt[Yt-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${lt} coords = getOutputCoords();
  ${_e}
  ${P}
  vec4 outputValue = getA(${Ln});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${lt} coords = getOutputCoords();
  ${_e}
  ${ne}
  vec4 outputValue = getB(${st});
  return outputValue;
}`}(be,ie,w,k)}`:"",Se=de?"getAAtOutCoordsMatmul(i)":`getA(${function(lt,Gt){let pn="";for(let $n=0;$n<Gt-2;$n++)pn+=`rc.${lt[$n]}, `;return pn+=`rc.${lt[Gt-2]}, i*2`,pn}(ie,ve)})`,Fe=de?"getBAtOutCoordsMatmul(i)":`getB(${function(lt,Gt){let pn="";for(let $n=0;$n<Gt-2;$n++)pn+=`rc.${lt[$n]}, `;return pn+=`i*2, rc.${lt[Gt-1]}`,pn}(ie,ke)})`,nt=`
            ${he}
            ${K}
            ${V}
            void main() {
              ${de?"":`${be} rc =
          getOutputCoords(); int lastDim = rc.${ie[G-1]}; rc.${ie[G-1]} =
          rc.${ie[G-2]}; rc.${ie[G-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${ue}; i++) {
                vec4 a = ${Se};
                vec4 b = ${Fe};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${Z}
              ${ae}
              ${Ae.output} = value;
            }`;return Object.assign(Object.assign({},A),{output:{dims:k,type:w[0].type,textureType:M.TextureType.packed},shaderSource:nt,hasMain:!0})})(v,e,u,t)})}},5623:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getBiasForMatmul=S.createMatmulProgramInfoLoader=S.parseMatMulAttributes=S.matMul=void 0;const E=y(2517),p=y(2039),M=y(9390),d=y(2823),g=y(708);function x(t,e){const o=(c=t.length>2,b=e.activationCacheKey,{name:"MatMul",inputNames:c?["A","B","Bias"]:["A","B"],inputTypes:c?[p.TextureType.unpacked,p.TextureType.unpacked,p.TextureType.unpacked]:[p.TextureType.unpacked,p.TextureType.unpacked],cacheHint:b});var c,b;return Object.assign(Object.assign({},o),{get:()=>function(A,w,D){const F=w[0].dims,Z=w[1].dims,L=E.BroadcastUtil.calcShape(F,Z,!0);if(!L)throw new Error("Can't use matmul on the given tensors");const W=(0,M.getCoordsDataType)(L.length),k=(0,M.getGlChannels)(),{activationFunction:de,applyActivation:H}=(0,d.getActivationSnippet)(D),ue=w.length>2,ve=ue?"value += getBiasForMatmul();":"",ke=ue?`${u(W,k,w[2].dims,L,!1)}`:"",Ae=L.length,be=F.length,G=Z.length,ie=`
    ${de}
    ${ke}
    float process(int indices[${Ae}]) {
        int a[${be}];
        int b[${G}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${F[F.length-1]}; ++k) {
            a[${be-1}] = k;
            b[${G-2}] = k;
            value += _A(a) * _B(b);
        }
        ${ve}
        ${H}
        return value;
    }`;return Object.assign(Object.assign({},A),{output:{dims:L,type:w[0].type,textureType:p.TextureType.unpacked},shaderSource:ie})}(o,t,e)})}S.matMul=(t,e,o)=>(v(e),t.session.pack?[t.run((0,g.createPackedMatmulProgramInfoLoader)(t,e,o),e)]:[t.run(x(e,o),e)]),S.parseMatMulAttributes=t=>(0,d.parseInternalActivationAttributes)(t.attributes),S.createMatmulProgramInfoLoader=x;const v=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function u(t,e,o,c,b){let A="";const w=o.length,D=c.length,F=D-w;A=D<2&&w>0?"coords":o.map((W,k)=>`coords.${e[k+F]}`).join(", ");const Z=E.BroadcastUtil.getBroadcastDims(o,c).map(W=>`coords.${e[W+F]} = 0;`).join(`
`);let L="vec4(outputValue.xx, outputValue.yy)";return E.ShapeUtil.size(o)===1&&(L="vec4(outputValue.x)"),b?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${Z}
  vec4 outputValue = getBias(${A});
  return ${L};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${Z}
  return getBias(coords.x);
}`}S.getBiasForMatmul=u},2403:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createPackProgramInfoLoader=void 0;const E=y(5060),p=y(2039),M=y(9390),d=y(2827),g={name:"pack",inputNames:["A"],inputTypes:[p.TextureType.unpackedReversed]};S.createPackProgramInfoLoader=(x,v)=>Object.assign(Object.assign({},g),{get:()=>((u,t)=>{const e=(0,E.getGlsl)(u.session.backend.glContext.version),o=t.dims,c=o.length,b=t.dims.length,A=(0,M.getCoordsDataType)(b),w=(0,d.getChannels)("rc",b),D=(F=b,Z=w,L=o[o.length-2],W=o[o.length-1],F===0||F===1?"":`
    int r = ${Z[F-2]};
    int c = ${Z[F-1]};
    int rp1 = ${Z[F-2]} + 1;
    int cp1 = ${Z[F-1]} + 1;
    bool rEdge = rp1 >= ${W};
    bool cEdge = cp1 >= ${L};
    `);var F,Z,L,W;let k;k=c===0?[1,1]:c===1?[o[0],1]:[o[b-1],o[b-2]];const de=function(ve,ke,Ae){if(ve===0)return"false";if(ve===1)return`rc > ${ke[0]}`;let be="";for(let G=ve-2;G<ve;G++)be+=`${Ae[G]} >= ${ke[G-ve+2]}`,G<ve-1&&(be+="||");return be}(b,k,w),H=function(ve,ke){const Ae=ve.length;if(Ae===0)return"getA(), 0, 0, 0";if(Ae===1)return`getA(rc),
            rc + 1 >= ${ve[0]} ? 0. : getA(rc + 1),
            0, 0`;let be="";if(Ae>2)for(let G=0;G<Ae-2;++G)be+=`${ke[G]},`;return`getA(${be}r, c),
          rEdge ? 0. : getA(${be}rp1, c),
          cEdge ? 0. : getA(${be}r, cp1),
          rEdge || cEdge ? 0. : getA(${be}rp1, cp1)`}(o,w),ue=`
        void main() {
          ${A} rc = getOutputCoords();

          if(${de}) {
            ${e.output} = vec4(0);
          } else {
            ${D}

            ${e.output} = vec4(${H});
          }
        }
      `;return Object.assign(Object.assign({},g),{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:p.TextureType.packed},shaderSource:ue})})(x,v)})},2827:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.unpackFromChannel=S.getChannels=S.getVecChannels=void 0;const E=y(9390);function p(M,d){return(0,E.getGlChannels)(d).map(g=>`${M}.${g}`)}S.getVecChannels=p,S.getChannels=function(M,d){return d===1?[M]:p(M,d)},S.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parsePadAttributesV11=S.padV11=S.parsePadAttributesV2=S.padV2=void 0;const E=y(246),p=y(2517),M=y(5060),d=y(2039),g={name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};S.padV2=(A,w,D)=>(u(w),[A.run(Object.assign(Object.assign({},g),{cacheHint:D.cacheKey,get:()=>v(A,w[0],D)}),w)]),S.parsePadAttributesV2=A=>{const w=A.attributes.getString("mode","constant"),D=A.attributes.getFloat("value",0),F=A.attributes.getInts("pads");return(0,E.createAttributeWithCacheKey)({mode:w,value:D,pads:F})},S.padV11=(A,w,D)=>{t(w);const F=x(A,w,D);return(0,S.padV2)(A,[w[0]],F)},S.parsePadAttributesV11=A=>A.attributes.getString("mode","constant");const x=(A,w,D)=>{if(!A.session.isInitializer(w[1].dataId)||w.length>=3&&!A.session.isInitializer(w[2].dataId))throw new Error("dynamic pad attributes are not allowed");const F=Array.from(w[1].integerData),Z=w.length>=3?w[2].floatData[0]:0;return(0,E.createAttributeWithCacheKey)({mode:D,pads:F,value:Z})},v=(A,w,D)=>{const F=p.ShapeUtil.padShape(w.dims.slice(),D.pads),Z=F.length,L=`
      ${e(A,w,D)}
      float process(int[${Z}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked],output:{dims:F,type:w.type,textureType:d.TextureType.unpacked},shaderSource:L}},u=A=>{if(!A||A.length!==1)throw new Error("Pad requires 1 input");if(A[0].type!=="float32"&&A[0].type!=="float64")throw new Error("Invalid input type.")},t=A=>{if(!A||A.length!==2&&A.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(A[1].type!=="int32")throw new Error("Invalid input type.");if(A.length>=3&&A[2].type==="string")throw new Error("Invalid input type.")},e=(A,w,D)=>{const F=(0,M.getGlsl)(A.session.backend.glContext.version),[Z,L]=A.calculateTextureWidthAndHeight(w.dims,d.TextureType.unpacked),W=p.ShapeUtil.computeStrides(w.dims);switch(D.mode){case"constant":return o(F,w.dims,W,Z,L,D.pads,D.value);case"reflect":return c(F,w.dims,W,Z,L,D.pads);case"edge":return b(F,w.dims,W,Z,L,D.pads);default:throw new Error("Invalid mode")}},o=(A,w,D,F,Z,L,W)=>{const k=w.length;let de="";for(let H=k-1;H>=0;--H)de+=`
        k = m[${H}] - ${L[H]};
        if (k < 0)  return constant;
        if (k >= ${w[H]}) return constant;
        offset += k * ${D[H]};
        `;return`
      float padA(int m[${k}]) {
        const float constant = float(${W});
        int offset = 0;
        int k = 0;
        ${de}
        vec2 coords = offsetToCoords(offset, ${F}, ${Z});
        float value = getColorAsFloat(${A.texture2D}(A, coords));
        return value;
      }
      `},c=(A,w,D,F,Z,L)=>{const W=w.length;let k="";for(let de=W-1;de>=0;--de)k+=`
        k = m[${de}] - ${L[de]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(w[de]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${w[de]}) { k = _2n_1 - k; }
        }
        offset += k * ${D[de]};
        `;return`
      float padA(int m[${W}]) {
        int offset = 0;
        int k = 0;
        ${k}
        vec2 coords = offsetToCoords(offset, ${F}, ${Z});
        float value = getColorAsFloat(${A.texture2D}(A, coords));
        return value;
      }
      `},b=(A,w,D,F,Z,L)=>{const W=w.length;let k="";for(let de=W-1;de>=0;--de)k+=`
        k = m[${de}] - ${L[de]};
        if (k < 0)  k = 0;
        if (k >= ${w[de]}) k = ${w[de]-1};
        offset += k * ${D[de]};
      `;return`
      float padA(int m[${W}]) {
        int offset = 0;
        int k = 0;
        ${k}
        vec2 coords = offsetToCoords(offset, ${F}, ${Z});
        float value = getColorAsFloat(${A.texture2D}(A, coords));
        return value;
      }
      `}},2143:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.globalMaxPool=S.parseMaxPoolAttributes=S.maxPool=S.parseGlobalAveragePoolAttributes=S.globalAveragePool=S.parseAveragePoolAttributes=S.averagePool=void 0;const E=y(246),p=y(2517),M=y(2039);S.averagePool=(b,A,w)=>{t(A);const D={name:"AveragePool",inputNames:["X"],inputTypes:[M.TextureType.unpacked],cacheHint:w.cacheKey};return[b.run(Object.assign(Object.assign({},D),{get:()=>d(A,D,!1,w)}),A)]},S.parseAveragePoolAttributes=b=>{const A=b.attributes.getString("auto_pad","NOTSET"),w=b.attributes.getInt("ceil_mode",0),D=b.attributes.getInt("count_include_pad",0)!==0,F=b.attributes.getInts("kernel_shape"),Z=b.attributes.getInts("strides",[]),L=b.attributes.getInts("pads",[]);if(w!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,E.createAttributeWithCacheKey)({autoPad:A,ceilMode:w,countIncludePad:D,kernelShape:F,strides:Z,pads:L})};const d=(b,A,w,D)=>{const[F,Z]=x(b,D,w),L=p.ShapeUtil.size(F.kernelShape);let W="";F.countIncludePad?W+=`value /= float(${L});`:W+=`value /= float(${L} - pad);`;const k=`
        ${e(b[0].dims,F,"value += _X(x);",W,"0.0")}
      `;return Object.assign(Object.assign({},A),{output:{dims:Z,type:b[0].type,textureType:M.TextureType.unpacked},shaderSource:k})};S.globalAveragePool=(b,A,w)=>{t(A);const D={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[M.TextureType.unpacked],cacheHint:`${w.countIncludePad}`};return[b.run(Object.assign(Object.assign({},D),{get:()=>d(A,D,!0,w)}),A)]},S.parseGlobalAveragePoolAttributes=b=>{const A=b.attributes.getInt("count_include_pad",0)!==0;return(0,E.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:A,kernelShape:[],strides:[],pads:[]})},S.maxPool=(b,A,w)=>{t(A);const D={name:"MaxPool",inputNames:["X"],inputTypes:[M.TextureType.unpacked],cacheHint:w.cacheKey};return[b.run(Object.assign(Object.assign({},D),{get:()=>g(A,D,!1,w)}),A)]},S.parseMaxPoolAttributes=b=>{const A=b.attributes.getString("auto_pad","NOTSET"),w=b.attributes.getInt("ceil_mode",0),D=b.attributes.getInts("kernel_shape"),F=b.attributes.getInts("strides",[]),Z=b.attributes.getInts("pads",[]),L=b.attributes.getInt("storage_order",0),W=b.attributes.getInts("dilations",[]);if(L!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(w!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,E.createAttributeWithCacheKey)({autoPad:A,ceilMode:w,countIncludePad:!1,kernelShape:D,strides:F,pads:Z,storageOrder:L,dilations:W})};const g=(b,A,w,D)=>{const[F,Z]=x(b,D,w),L=`
      ${e(b[0].dims,F,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},A),{output:{dims:Z,type:b[0].type,textureType:M.TextureType.unpacked},shaderSource:L})},x=(b,A,w)=>{const D=b[0].dims.slice(),F=Object.hasOwnProperty.call(A,"dilations"),Z=A.kernelShape.slice(),L=A.strides.slice(),W=F?A.dilations.slice():[],k=A.pads.slice();p.PoolConvUtil.adjustPoolAttributes(w,D,Z,L,W,k);const de=p.PoolConvUtil.computePoolOutputShape(w,D,L,W,Z,k,A.autoPad),H=Object.assign({},A);return F?Object.assign(H,{kernelShape:Z,strides:L,pads:k,dilations:W,cacheKey:A.cacheKey}):Object.assign(H,{kernelShape:Z,strides:L,pads:k,cacheKey:A.cacheKey}),[H,de]},v={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},u={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[M.TextureType.unpacked]};S.globalMaxPool=(b,A)=>(t(A),[b.run(Object.assign(Object.assign({},u),{get:()=>g(A,u,!0,v)}),A)]);const t=b=>{if(!b||b.length!==1)throw new Error("Pool ops requires 1 input.");if(b[0].type!=="float32"&&b[0].type!=="float64")throw new Error("Invalid input type.")},e=(b,A,w,D,F)=>{const Z=b.length;if(A.kernelShape.length<=2){const L=A.kernelShape[A.kernelShape.length-1],W=A.strides[A.strides.length-1],k=A.pads[A.pads.length/2-1],de=A.pads[A.pads.length-1],H=b[Z-1];let ue="",ve="",ke="";if(ue=k+de!==0?`
          for (int i = 0; i < ${L}; i++) {
            x[${Z} - 1] = indices[${Z} - 1] * ${W} - ${k} + i;
            if (x[${Z} - 1] < 0 || x[${Z} - 1] >= ${H}) {
              pad++;
              continue;
            }
            ${w}
          }`:`
          for (int i = 0; i < ${L}; i++) {
            x[${Z} - 1] = indices[${Z} - 1] * ${W} - ${k} + i;
            ${w}
          }`,A.kernelShape.length===2){const Ae=A.kernelShape[A.kernelShape.length-2],be=A.strides[A.strides.length-2],G=A.pads[A.pads.length/2-2],ie=A.pads[A.pads.length-2],V=b[Z-2];ve=G+ie!==0?`
            for (int j = 0; j < ${Ae}; j++) {
              x[${Z} - 2] = indices[${Z} - 2] * ${be} - ${G} + j;
              if (x[${Z} - 2] < 0 || x[${Z} - 2] >= ${V}) {
                pad+= ${L};
                continue;
              }
          `:`
            for (int j = 0; j < ${Ae}; j++) {
              x[${Z} - 2] = indices[${Z} - 2] * ${be} - ${G} + j;
            `,ke=`
          }
        `}return`
        float process(int indices[${Z}]) {
          int x[${Z}];
          copyVec(indices, x);

          float value = ${F};
          int pad = 0;
          ${ve}
          ${ue}
          ${ke}
          ${D}
          return value;
        }
      `}{const L=p.ShapeUtil.size(A.kernelShape),W=p.ShapeUtil.computeStrides(A.kernelShape),k=W.length,de=A.pads.length,H=c(k),ue=o(b,"inputDims"),ve=o(A.pads,"pads"),ke=o(W,"kernelStrides"),Ae=o(A.strides,"strides");let be="";return be=A.pads.reduce((G,ie)=>G+ie)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${w}
          }`:`
          }
          ${w}
        `,`
        ${H}
        float process(int indices[${Z}]) {
          int x[${Z}];
          copyVec(indices, x);
          int offset[${k}];
          int pads[${de}];
          int inputDims[${Z}];
          int kernelStrides[${k}];
          int strides[${k}];
          ${ve}
          ${ue}
          ${Ae}
          ${ke}

          float value = ${F};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${L}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${Z} - ${k}; j < ${Z}; j++) {
              x[j] = indices[j] * strides[j - ${Z} + ${k}]
                + offset[j - ${Z} + ${k}] - pads[j - 2];
              ${be}
          }
          ${D}

          return value;
        }
      `}},o=(b,A)=>{let w="";for(let D=0;D<b.length;D++)w+=`
      ${A}[${D}] = ${b[D]};
    `;return w},c=b=>`
  void offsetToIndices(int offset, int[${b}] strides, out int[${b}] indices) {
    if (${b} == 0) {
      return;
    }
    for (int i = 0; i < ${b} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${b} - 1] = offset;
  }`},4939:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.reduceLogSumSquare=S.reduceLogSum=S.reduceProd=S.reduceMin=S.reduceMax=S.reduceMean=S.reduceSum=S.parseReduceAttributes=void 0;const E=y(246),p=y(782),M=y(2517),d=y(2039),g=(u,t,e,o,c)=>{v(t);const b={name:o,inputNames:["A"],inputTypes:[d.TextureType.unpacked]};return[u.run(Object.assign(Object.assign({},b),{cacheHint:e.cacheKey,get:()=>x(u,t,e,o,c,b)}),t)]};S.parseReduceAttributes=u=>{const t=u.attributes.getInts("axes",[]),e=u.attributes.getInt("keepdims",1)===1;return(0,E.createAttributeWithCacheKey)({axes:t,keepDims:e})};const x=(u,t,e,o,c,b)=>{const A=[],w=t[0].dims.length||1,D=[],F=M.ShapeUtil.normalizeAxes(e.axes,t[0].dims.length),Z=c(t,F);let L=Z[1];for(let k=0;k<t[0].dims.length;k++)F.indexOf(k)>=0||F.length===0?(e.keepDims&&A.push(1),L=`
          for(int j${k} = 0; j${k} < ${t[0].dims[k]}; j${k}++) {
            inputIdx[${k}] = j${k};
            ${L}
          }`):(D.push(`inputIdx[${k}] = outputIdx[${A.length}];`),A.push(t[0].dims[k]));const W=`
      float process(int outputIdx[${A.length||1}]) {
        float value;                 // final result
        int inputIdx[${w}];      // addressing input data
        ${D.join(`
`)}
        ${Z[0]}       // init ops for reduce max/min
        ${L}
        ${Z[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},b),{output:{dims:A,type:t[0].type,textureType:d.TextureType.unpacked},shaderSource:W})},v=u=>{if(!u||u.length!==1)throw new Error("Reduce op requires 1 input.");if(p.NUMBER_TYPES.indexOf(u[0].type)===-1)throw new Error("Invalid input type.")};S.reduceSum=(u,t,e)=>g(u,t,e,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),S.reduceMean=(u,t,e)=>g(u,t,e,"ReduceMean",(o,c)=>{let b=1;for(let A=0;A<o[0].dims.length;A++)(c.indexOf(A)>=0||c.length===0)&&(b*=o[0].dims[A]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${b}.;`]}),S.reduceMax=(u,t,e)=>g(u,t,e,"ReduceMax",(o,c)=>{const b=[];for(let A=0;A<o[0].dims.length;A++)(c.indexOf(A)>=0||c.length===0)&&b.push(`inputIdx[${A}] = 0;`);return[`${b.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),S.reduceMin=(u,t,e)=>g(u,t,e,"ReduceMin",(o,c)=>{const b=[];for(let A=0;A<o[0].dims.length;A++)(c.indexOf(A)>=0||c.length===0)&&b.push(`inputIdx[${A}] = 0;`);return[`${b.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),S.reduceProd=(u,t,e)=>g(u,t,e,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),S.reduceLogSum=(u,t,e)=>g(u,t,e,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),S.reduceLogSumSquare=(u,t,e)=>g(u,t,e,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isReshapeCheap=S.processDims3D=S.createPackedReshape3DProgramInfoLoader=void 0;const E=y(2517),p=y(5060),M=y(2039),d=y(2827);S.createPackedReshape3DProgramInfoLoader=(g,x,v)=>{const u=(t=>({name:"Reshape (packed)",inputTypes:[M.TextureType.packed],inputNames:["A"],cacheHint:`${t}`}))(v);return Object.assign(Object.assign({},u),{get:()=>((t,e,o,c)=>{const b=e.dims,A=c;let w="";for(let Z=0;Z<4;Z++){let L="";switch(Z){case 0:L="outputCoords = rc;";break;case 1:L="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:L="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:L="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}w+=`
        ${L}
        ${Z>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${Z}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${Z>0?"}":""}
      `}const D=(0,p.getGlsl)(t.session.backend.glContext.version),F=`
      ${function(Z){const L=E.ShapeUtil.computeStrides(Z),W=["b","r","c"],k="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${L.map((de,H)=>`int ${W[H]} = ${k} / ${de}; ${H===L.length-1?`int ${W[H+1]} = ${k} - ${W[H]} * ${de}`:`index -= ${W[H]} * ${de}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(b)}
      ${function(Z){const L=E.ShapeUtil.computeStrides(Z);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${L[0]} + coords.z * ${L[1]} + coords.y;
  }
`}(A)}
      ${(0,d.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${A[2]};
        int cols = ${A[1]};

        ${w}
        ${D.output} = result;
      }
    `;return Object.assign(Object.assign({},o),{output:{dims:A,type:e.type,textureType:M.TextureType.packed},shaderSource:F,hasMain:!0})})(g,x,u,v)})},S.processDims3D=function(g){if(g.length===0)return[1,1,1];let x=1;for(let v=0;v<g.length-2;++v)x*=g[v];return[x,g.length>1?g[g.length-2]:1,g[g.length-1]]},S.isReshapeCheap=function(g,x){let v=!1;return v=g.length===0||x.length===0||(g.length<2||x.length<2?g[g.length-1]===x[x.length-1]:g[g.length-1]===x[x.length-1]&&g[g.length-2]===x[x.length-2]),v}},718:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.reshape=void 0;const E=y(2517);S.reshape=(p,M)=>{const d=E.ShapeUtil.calculateReshapedDims(M[0].dims,M[1].integerData);return p.session.pack?[p.reshapePacked(M[0],d)]:[p.reshapeUnpacked(M[0],d)]}},2268:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseResizeAttributesV11=S.parseResizeAttributesV10=S.resize=void 0;const E=y(5060),p=y(2039),M=y(9390),d=y(2827),g=y(9793),x={name:"Resize",inputNames:["A"],inputTypes:[p.TextureType.packed]};S.resize=(o,c,b)=>((0,g.validateInputs)(c,b),[o.run(Object.assign(Object.assign({},x),{cacheHint:b.cacheKey,get:()=>v(o,c,b)}),c)]),S.parseResizeAttributesV10=o=>(0,g.parseUpsampleAttributes)(o,10),S.parseResizeAttributesV11=o=>(0,g.parseUpsampleAttributes)(o,11);const v=(o,c,b)=>{const A=(0,E.getGlsl)(o.session.backend.glContext.version),[w,D]=u(c,b);if(w.every(be=>be===1)&&b.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},x),{output:{dims:D,type:c[0].type,textureType:p.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${A.texture2D}(X, TexCoords);
                    ${A.output} = v;
                }`});const F=D.length;if(F<2)throw new Error(`output dimension should be at least 2, but got ${F}`);const Z=D[F-2],L=D[F-1],W=c[0].dims;if(F!==W.length)throw new Error(`output dimension should match input ${W.length}, but got ${F}`);const k=W[F-2],de=W[F-1],H=w[F-2],ue=w[F-1];let ve="";if(b.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${b.mode}'`);switch(b.coordinateTransformMode){case"asymmetric":ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${L}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${Z}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${L}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${Z}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${L}.0 - 1.0, ${Z}.0 - 1.0, ${L}.0 - 1.0,
                            ${Z}.0 - 1.0);
                        vec4 original = vec4(${de}.0 - 1.0, ${k}.0 - 1.0, ${de}.0 - 1.0,
                            ${k}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${b.coordinateTransformMode}'`)}const ke=(0,M.getCoordsDataType)(F),Ae=`
            const vec2 inputWH = vec2(${k}.0, ${de}.0);
            const vec4 scaleWHWH = vec4(float(${H}), float(${ue}), float(${H}), float(${ue}));
            ${(0,d.unpackFromChannel)()}
            ${ve}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${ke} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${Z-1};
                bool hasNextCol = rc.z < ${L-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${A.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},x),{output:{dims:D,type:c[0].type,textureType:p.TextureType.packed},hasMain:!0,shaderSource:Ae})},u=(o,c)=>{const b=o[0].dims;let A,w=c.scales;if(w.length===0){const F=o[c.scalesInputIdx];if(F&&F.size!==0){if(o[c.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");w=t(F,c.mode,c.isResize)}else{const Z=o[c.sizesInputIdx];if(!Z||Z.size===0)throw new Error("Either scales or sizes MUST be provided as input.");A=Array.from(Z.integerData),w=e(A,b,c.mode,c.isResize)}}else if(o[c.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const D=A||b.map((F,Z)=>Math.floor(F*w[Z]));return[w,D]},t=(o,c,b)=>{const A=Array.from(o.floatData);return(0,g.scalesValidation)(A,c,b),A},e=(o,c,b,A)=>{const w=c.length,D=new Array(w);for(let F=0,Z=w;F<Z;F++)if(c[F]===0){if(o[F]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");D[F]=1}else D[F]=o[F]/c[F];return(0,g.scalesValidation)(D,b,A),D}},8117:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.shape=void 0;const E=y(9162);S.shape=(M,d)=>(p(d),[new E.Tensor([d[0].dims.length],"int32",void 0,void 0,new Int32Array(d[0].dims))]);const p=M=>{if(!M||M.length!==1)throw new Error("Shape requires 1 input.")}},2278:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.sliceV10=S.parseSliceAttributes=S.slice=void 0;const E=y(246),p=y(782),M=y(2517),d=y(2039),g={name:"Slice",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};S.slice=(e,o,c)=>(v(o),[e.run(Object.assign(Object.assign({},g),{cacheHint:c.cacheKey,get:()=>x(e,o[0],c)}),o)]),S.parseSliceAttributes=e=>{const o=e.attributes.getInts("starts"),c=e.attributes.getInts("ends"),b=e.attributes.getInts("axes",[]);return(0,E.createAttributeWithCacheKey)({starts:o,ends:c,axes:b})};const x=(e,o,c)=>{const b=c.axes.length===0?o.dims.slice(0).map((W,k)=>k):c.axes,A=M.ShapeUtil.normalizeAxes(b,o.dims.length),w=c.starts.map((W,k)=>W>o.dims[A[k]]-1?o.dims[A[k]]:M.ShapeUtil.normalizeAxis(W,o.dims[A[k]])),D=c.ends.map((W,k)=>W>o.dims[A[k]]-1?o.dims[A[k]]:M.ShapeUtil.normalizeAxis(W,o.dims[A[k]])),F=o.dims.slice(),Z=[];for(let W=0;W<A.length;W++)F[A[W]]=D[W]-w[W],w[W]>0&&Z.push(`outputIdx[${A[W]}] += ${w[W]};`);const L=`
      float process(int outputIdx[${F.length}]) {
        ${Z.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},g),{output:{dims:F,type:o.type,textureType:d.TextureType.unpacked},shaderSource:L})},v=e=>{if(!e||e.length!==1)throw new Error("Slice requires 1 input.");if(p.NUMBER_TYPES.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")};S.sliceV10=(e,o)=>{t(o);const c=u(e,o);return[e.run(Object.assign(Object.assign({},g),{cacheHint:c.cacheKey,get:()=>x(e,o[0],c)}),[o[0]])]};const u=(e,o)=>{if(!e.session.isInitializer(o[1].dataId)||!e.session.isInitializer(o[2].dataId)||o.length>=4&&!e.session.isInitializer(o[3].dataId)||o.length>=5&&!e.session.isInitializer(o[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(o.length>=5&&o[4].integerData.some(w=>w!==1))throw new Error("currently non-1 steps is not supported for Slice");const c=Array.from(o[1].integerData),b=Array.from(o[2].integerData),A=o.length>=4?Array.from(o[3].integerData):[];return{starts:c,ends:b,axes:A,cacheKey:`${A};${c};${b}`}},t=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if(e[1].type!=="int32"||e[1].dims.length!==1)throw new Error("Invalid input type.");if(e[2].type!=="int32"||e[2].dims.length!==1)throw new Error("Invalid input type.");if(e.length>=4&&(e[3].type!=="int32"||e[3].dims.length!==1))throw new Error("Invalid input type.");if(e.length>=5&&(e[4].type!=="int32"||e[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.softmaxV13=S.parseSoftmaxAttributesV13=S.parseSoftmaxAttributes=S.softmax=void 0;const E=y(246),p=y(2517),M=y(5060),d=y(2039),g=y(3738),x={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[d.TextureType.unpacked]},v={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},u={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked,d.TextureType.unpacked]};S.softmax=(A,w,D)=>{b(w);const F=w[0].dims.slice(),Z=p.ShapeUtil.normalizeAxis(D.axis,F.length),L=p.ShapeUtil.sizeToDimension(F,Z),W=p.ShapeUtil.sizeFromDimension(F,Z);return t(A,w,D,L,W)},S.parseSoftmaxAttributes=A=>(0,E.createAttributeWithCacheKey)({axis:A.attributes.getInt("axis",1)}),S.parseSoftmaxAttributesV13=A=>(0,E.createAttributeWithCacheKey)({axis:A.attributes.getInt("axis",-1)}),S.softmaxV13=(A,w,D)=>{b(w);const F=w[0].dims.slice(),Z=p.ShapeUtil.normalizeAxis(D.axis,F.length),L=F.length,W=Z!==L-1,k=[];let de,H=[],ue=[];W&&(H=Array.from({length:L}).map((be,G)=>G),H[Z]=L-1,H[L-1]=Z,H.map(be=>k.push(F[be])),de=(0,E.createAttributeWithCacheKey)({perm:H}),ue=(0,g.transpose)(A,w,de));const ve=W?p.ShapeUtil.sizeToDimension(k,L-1):p.ShapeUtil.sizeToDimension(F,L-1),ke=W?p.ShapeUtil.sizeFromDimension(k,L-1):p.ShapeUtil.sizeFromDimension(F,L-1),Ae=t(A,W?ue:w,D,ve,ke);return W?(0,g.transpose)(A,Ae,de):Ae};const t=(A,w,D,F,Z)=>{const L=e(A,w[0],F,Z,[F]),W=A.run(Object.assign(Object.assign({},x),{cacheHint:D.cacheKey,get:()=>L}),w),k=o(A,w[0],F,Z,L.output.dims,[F]),de=A.run(Object.assign(Object.assign({},v),{cacheHint:D.cacheKey,get:()=>k}),[w[0],W]),H=c(A,w[0],F,Z,L.output.dims,k.output.dims);return[A.run(Object.assign(Object.assign({},u),{cacheHint:D.cacheKey,get:()=>H}),[w[0],W,de])]},e=(A,w,D,F,Z)=>{const[L,W]=A.calculateTextureWidthAndHeight(w.dims,d.TextureType.unpacked),k=Z.length;if(D<1||F<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Z.length!==1)throw new Error("Dimensionality of the output should be 1");if(Z[0]!==D)throw new Error("Shape of the output should be equal to logical row count");const de=(0,M.getGlsl)(A.session.backend.glContext.version),H=`
      float process(int[${k}] indices) {
        int logical_row_start_offset = indices[0] * ${F};

        float max = getColorAsFloat(${de.texture2D}(A, offsetToCoords(logical_row_start_offset, ${L},
        ${W} )));
        for(int i=1; i<${F}; ++i)
        {
          float current = getColorAsFloat(${de.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${L}, ${W})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},x),{output:{dims:Z,type:w.type,textureType:d.TextureType.unpacked},shaderSource:H})},o=(A,w,D,F,Z,L)=>{const[W,k]=A.calculateTextureWidthAndHeight(w.dims,d.TextureType.unpacked),de=L.length;if(D<1||F<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(L.length!==1)throw new Error("Dimensionality of the output should be 1");if(L[0]!==D)throw new Error("Shape of the output should be equal to logical row count");if(Z.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Z[0]!==D)throw new Error("Shape of the intermediate results should be equal to logical row count");const H=`
      float process(int[${de}] indices) {
        int logical_row_start_offset = indices[0] * ${F};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${F}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,M.getGlsl)(A.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${W}, ${k}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},v),{output:{dims:L,type:w.type,textureType:d.TextureType.unpacked},shaderSource:H})},c=(A,w,D,F,Z,L)=>{const[W,k]=A.calculateTextureWidthAndHeight(w.dims,d.TextureType.unpacked),de=w.dims.length;if(D<1||F<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Z.length!==1||L.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Z[0]!==D||L[0]!==D)throw new Error("Shape of the intermediate results should be equal to logical row count");const H=`
      float process(int[${de}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${W}, ${k});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${F};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},u),{output:{dims:w.dims,type:w.type,textureType:d.TextureType.unpacked},shaderSource:H})},b=A=>{if(!A||A.length!==1)throw new Error("Softmax requires 1 input.");if(A[0].type!=="float32"&&A[0].type!=="float64")throw new Error("Invalid input type")}},5975:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseSplitAttributes=S.split=void 0;const E=y(246),p=y(2517),M=y(2039),d={name:"Split",inputNames:["A"],inputTypes:[M.TextureType.unpacked]};S.split=(u,t,e)=>{v(t);const o=p.ShapeUtil.normalizeAxis(e.axis,t[0].dims.length),c=g(u,t,o,e),b=[];for(let A=0;A<c;++A)b.push(u.run(Object.assign(Object.assign({},d),{cacheHint:`${e.cacheKey};${A}`,get:()=>x(u,t[0],e,o,A)}),t));return b},S.parseSplitAttributes=u=>{const t=u.attributes.getInt("axis",0),e=u.attributes.getInts("split",[]),o=u.outputs.length;return(0,E.createAttributeWithCacheKey)({axis:t,split:e,numOutputs:o})};const g=(u,t,e,o)=>{const[,c]=p.SplitUtil.splitShape(t[0].dims,e,o.split,o.numOutputs);return c.length},x=(u,t,e,o,c)=>{const[b,A]=p.SplitUtil.splitShape(t.dims,o,e.split,e.numOutputs),w=A[c],D=b[c],F=`
      float process(int indices[${D.length}]) {
        indices[${o}] += ${w};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},d),{cacheHint:`${e.cacheKey}:${c}`,output:{dims:D,type:t.type,textureType:M.TextureType.unpacked},shaderSource:F})},v=u=>{if(!u||u.length!==1)throw new Error("Split requires one input.");if(u[0].type!=="int8"&&u[0].type!=="uint8"&&u[0].type!=="int16"&&u[0].type!=="uint16"&&u[0].type!=="int32"&&u[0].type!=="uint32"&&u[0].type!=="float32"&&u[0].type!=="float64"&&u[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseSqueezeAttributes=S.squeezeV13=S.squeeze=void 0;const E=y(2517);S.squeeze=(d,g,x)=>{p(g);const v=E.ShapeUtil.squeezeShape(g[0].dims,x);return[d.reshapeUnpacked(g[0],v)]},S.squeezeV13=(d,g)=>(M(g),(0,S.squeeze)(d,[g[0]],Array.from(g[1].integerData))),S.parseSqueezeAttributes=d=>d.attributes.getInts("axes");const p=d=>{if(!d||d.length!==1)throw new Error("Squeeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},M=d=>{if(!d||d.length!==2)throw new Error("Squeeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.sum=void 0;const E=y(5060),p=y(2039);S.sum=(g,x)=>{d(x);const v={name:"Sum",inputNames:x.map((u,t)=>`X${t}`),inputTypes:new Array(x.length).fill(p.TextureType.unpacked)};return[g.run(Object.assign(Object.assign({},v),{get:()=>M(g,x,v)}),x)]};const M=(g,x,v)=>{const u=(0,E.getGlsl)(g.session.backend.glContext.version),t=x[0].dims.slice(),e=`
      void main() {
        vec4 result = ${x.map((o,c)=>`${u.texture2D}(X${c},TexCoords)`).join(" + ")};
        ${u.output} = result;
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:t,type:x[0].type,textureType:p.TextureType.unpacked},hasMain:!0,shaderSource:e})},d=g=>{if(!g||g.length===0)throw new Error("Sum requires inputs.");const x=g[0].dims.length;for(let v=1;v<g.length;v++){if(x!==g[v].dims.length)throw new Error("Input shapes are mismatched.");for(let u=0;u<x;u++)if(g[0].dims[u]!==g[v].dims[u])throw new Error("Input shapes are not matched.")}if(g[0].type!=="float32"&&g[0].type!=="float64")throw new Error("Invalid input type.");for(let v=1;v<g.length;v++)if(g[0].type!==g[v].type)throw new Error("Input types are not matched.")}},5723:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tile=void 0;const E=y(782),p=y(2039);S.tile=(g,x)=>{d(x);const v={name:"Tile",inputNames:["A"],inputTypes:[p.TextureType.unpacked]};return[g.run(Object.assign(Object.assign({},v),{get:()=>M(g,x,v)}),x)]};const M=(g,x,v)=>{const u=x[0].dims.slice(),t=new Array(u.length),e=[];for(let b=0;b<u.length;b++)t[b]=u[b]*x[1].numberData[b],e.push(`inputIdx[${b}] = int(mod(float(outputIdx[${b}]), ${u[b]}.));`);const o=t.length,c=`
      float process(int outputIdx[${o}]) {
        int inputIdx[${o}];
        ${e.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:t,type:x[0].type,textureType:p.TextureType.unpacked},shaderSource:c})},d=g=>{if(!g||g.length!==2)throw new Error("Tile requires 2 input.");if(g[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(g[1].dims[0]!==g[0].dims.length)throw new Error("Invalid input shape.");if(E.NUMBER_TYPES.indexOf(g[0].type)===-1)throw new Error("Invalid input type.");if(g[1].type!=="int32"&&g[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseTransposeAttributes=S.transpose=void 0;const E=y(246),p=y(2517),M=y(2039),d={name:"Transpose",inputNames:["A"],inputTypes:[M.TextureType.unpacked]};S.transpose=(e,o,c)=>(t(o),[e.run(Object.assign(Object.assign({},d),{cacheHint:c.cacheKey,get:()=>g(e,o[0],c.perm)}),o)]),S.parseTransposeAttributes=e=>(0,E.createAttributeWithCacheKey)({perm:e.attributes.getInts("perm",[])});const g=(e,o,c)=>{const b=o.dims;c=x(b,c);const A=v(b,c),w=b.length,D=`
      ${u("perm",c,w)}
      float process(int indices[${w}]) {
        int a[${w}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},d),{output:{dims:A,type:o.type,textureType:M.TextureType.unpacked},shaderSource:D})},x=(e,o)=>(o&&o.length!==e.length&&(o=[...e.keys()].reverse()),o),v=(e,o)=>(o=x(e,o),p.ShapeUtil.sortBasedOnPerm(e,o)),u=(e,o,c)=>{const b=[];b.push(`void ${e}(out int a[${c}], int src[${c}]) {`);for(let A=0;A<c;++A)b.push(`	a[${o[A]}]=src[${A}];`);return b.push("	}"),b.join(`
`)},t=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.encodeAsUint8=void 0;const E=y(5060),p=y(2039);S.encodeAsUint8=(M,d)=>{const g=d.shape,x=(0,E.getGlsl)(M.session.backend.glContext.version),v=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${x.texture2D}(X,TexCoords).r;
      ${x.output} = encodeAsUint8(value);
    }`,u={name:"Uint8Encode",inputTypes:[p.TextureType.unpacked],inputNames:["X"],output:{dims:g,type:d.tensor.type,textureType:p.TextureType.downloadUint8AsFloat},shaderSource:v,hasMain:!0};return M.executeProgram(u,[d.tensor])}},4909:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tanh=S.tan=S.sqrt=S.sin=S.sigmoid=S.relu=S.not=S.neg=S.log=S.parseLeakyReluAttributes=S.leakyRelu=S.identity=S.floor=S.exp=S.parseEluAttributes=S.elu=S.cos=S.ceil=S.clipV11=S.parseClipAttributes=S.clip=S.atan=S.asin=S.acos=S.abs=S.glslTanh=S.glslTan=S.glslSqrt=S.glslSigmoid=S.glslRelu=S.glslSin=S.glslNot=S.glslNeg=S.glslLog=S.glslLeakyRelu=S.glslIdentity=S.glslClip=S.glslFloor=S.glslExp=S.glslElu=S.glslCos=S.glslCeil=S.glslAtan=S.glslAsin=S.glslAcos=S.glslAbs=void 0;const E=y(246),p=y(2517),M=y(8520),d=y(5060),g=y(2039);function x(){return Ae("abs")}function v(){return Ae("acos")}function u(){return Ae("asin")}function t(){return Ae("atan")}function e(){return Ae("ceil")}function o(){return Ae("cos")}function c(ie){const V="elu";return{body:`
  const float alpha = float(${ie});

  float ${V}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${V}_(vec4 v) {
    return vec4(${V}_(v.x), ${V}_(v.y), ${V}_(v.z), ${V}_(v.w));
  }
  `,name:V,type:M.FunctionType.ValueBased}}function b(){return Ae("exp")}function A(){return Ae("floor")}function w(ie,V){const ae="clip";return{body:`
  const float min = float(${ie});
  const float max = float(${V});

  float ${ae}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${ae}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:ae,type:M.FunctionType.ValueBased}}function D(){const ie="indentity";return{body:`
  float ${ie}_(float a) {
    return a;
  }
  vec4 ${ie}_(vec4 v) {
    return v;
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function F(ie){const V="leakyRelu";return{body:`
  const float alpha = float(${ie});

  float ${V}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${V}_(vec4 v) {
    return vec4(${V}_(v.x), ${V}_(v.y), ${V}_(v.z), ${V}_(v.w));
  }
  `,name:V,type:M.FunctionType.ValueBased}}function Z(){return Ae("log")}function L(){const ie="neg";return{body:`
  float ${ie}_(float a) {
    return -a;
  }
  vec4 ${ie}_(vec4 v) {
    return -v;
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function W(){const ie="not";return{body:`
  float ${ie}_(float a) {
    return float( ! bool(a) );
  }
  bool ${ie}_(bool a) {
    return !a;
  }
  vec4 ${ie}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${ie}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function k(){return Ae("sin")}function de(){const ie="relu";return{body:`
  float ${ie}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${ie}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function H(){const ie="sigmoid";return{body:`
  float ${ie}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${ie}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function ue(){return Ae("sqrt")}function ve(){return Ae("tan")}function ke(){const ie="tanh";return{body:`
  float ${ie}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${ie}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:ie,type:M.FunctionType.ValueBased}}function Ae(ie){return{body:`
  float ${ie}_(float a) {
    return ${ie}(a);
  }
  vec4 ${ie}_(vec4 v) {
    return ${ie}(v);
  }
  `,name:ie,type:M.FunctionType.ValueBased}}S.glslAbs=x,S.glslAcos=v,S.glslAsin=u,S.glslAtan=t,S.glslCeil=e,S.glslCos=o,S.glslElu=c,S.glslExp=b,S.glslFloor=A,S.glslClip=w,S.glslIdentity=D,S.glslLeakyRelu=F,S.glslLog=Z,S.glslNeg=L,S.glslNot=W,S.glslSin=k,S.glslRelu=de,S.glslSigmoid=H,S.glslSqrt=ue,S.glslTan=ve,S.glslTanh=ke;const be=(ie,V,ae,K)=>{const he=ie.session.pack?g.TextureType.packed:g.TextureType.unpacked,Se={name:ae.name,inputTypes:[he],inputNames:["A"],cacheHint:K};return Object.assign(Object.assign({},Se),{get:()=>((Fe,nt,lt,Gt)=>{const pn=Fe.session.pack?g.TextureType.packed:g.TextureType.unpacked,$n=(0,d.getGlsl)(Fe.session.backend.glContext.version);return Object.assign(Object.assign({},nt),{output:{dims:lt.dims,type:lt.type,textureType:pn},shaderSource:`
     ${Gt.body}
     void main() {
       vec4 v = ${$n.texture2D}(A, TexCoords);
       v = ${Gt.name}_(v);
       ${$n.output} = v;
     }
     `,hasMain:!0})})(ie,Se,V,ae)})};S.abs=(ie,V)=>[ie.run(be(ie,V[0],x()),V)],S.acos=(ie,V)=>[ie.run(be(ie,V[0],v()),V)],S.asin=(ie,V)=>[ie.run(be(ie,V[0],u()),V)],S.atan=(ie,V)=>[ie.run(be(ie,V[0],t()),V)],S.clip=(ie,V,ae)=>[ie.run(be(ie,V[0],w(ae.min,ae.max),ae.cacheKey),V)],S.parseClipAttributes=ie=>(0,E.createAttributeWithCacheKey)({min:ie.attributes.getFloat("min",p.MIN_CLIP),max:ie.attributes.getFloat("max",p.MAX_CLIP)}),S.clipV11=(ie,V)=>{const ae=G(ie,V);return(0,S.clip)(ie,[V[0]],ae)};const G=(ie,V)=>{if(V.length>=3&&(!ie.session.isInitializer(V[1].dataId)||!ie.session.isInitializer(V[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const ae=V.length>=3?V[1].numberData[0]:p.MIN_CLIP,K=V.length>=3?V[2].numberData[0]:p.MAX_CLIP;return(0,E.createAttributeWithCacheKey)({min:ae,max:K})};S.ceil=(ie,V)=>[ie.run(be(ie,V[0],e()),V)],S.cos=(ie,V)=>[ie.run(be(ie,V[0],o()),V)],S.elu=(ie,V,ae)=>[ie.run(be(ie,V[0],c(ae.alpha),ae.cacheKey),V)],S.parseEluAttributes=ie=>(0,E.createAttributeWithCacheKey)({alpha:ie.attributes.getFloat("alpha",1)}),S.exp=(ie,V)=>[ie.run(be(ie,V[0],b()),V)],S.floor=(ie,V)=>[ie.run(be(ie,V[0],A()),V)],S.identity=(ie,V)=>[ie.run(be(ie,V[0],D()),V)],S.leakyRelu=(ie,V,ae)=>[ie.run(be(ie,V[0],F(ae.alpha),ae.cacheKey),V)],S.parseLeakyReluAttributes=ie=>(0,E.createAttributeWithCacheKey)({alpha:ie.attributes.getFloat("alpha",.01)}),S.log=(ie,V)=>[ie.run(be(ie,V[0],Z()),V)],S.neg=(ie,V)=>[ie.run(be(ie,V[0],L()),V)],S.not=(ie,V)=>[ie.run(be(ie,V[0],W()),V)],S.relu=(ie,V)=>[ie.run(be(ie,V[0],de()),V)],S.sigmoid=(ie,V)=>[ie.run(be(ie,V[0],H()),V)],S.sin=(ie,V)=>[ie.run(be(ie,V[0],k()),V)],S.sqrt=(ie,V)=>[ie.run(be(ie,V[0],ue()),V)],S.tan=(ie,V)=>[ie.run(be(ie,V[0],ve()),V)],S.tanh=(ie,V)=>[ie.run(be(ie,V[0],ke()),V)]},5611:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createUnpackProgramInfoLoader=S.createUnpackProgramInfo=void 0;const E=y(5060),p=y(2039),M=y(9390),d=y(2827),g={name:"unpack",inputNames:["A"],inputTypes:[p.TextureType.packed]};S.createUnpackProgramInfo=(x,v)=>{const u=v.dims.length,t=(0,d.getChannels)("rc",u),e=t.slice(-2),o=(0,M.getCoordsDataType)(u),c=(0,d.unpackFromChannel)(),b=v.dims.length===0?"":function(D,F){if(D===1)return"rc";let Z="";for(let L=0;L<D;L++)Z+=F[L],L<D-1&&(Z+=",");return Z}(u,t),A=u<=1?"rc":`vec2(${e.join(",")})`,w=`
    ${c}
    void main() {
      ${o} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${b});

       ${(0,E.getGlsl)(x.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${A}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},g),{hasMain:!0,output:{dims:v.dims,type:v.type,textureType:p.TextureType.unpacked},shaderSource:w})},S.createUnpackProgramInfoLoader=(x,v)=>Object.assign(Object.assign({},g),{get:()=>(0,S.createUnpackProgramInfo)(x,v)})},8428:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseUnsqueezeAttributes=S.unsqueezeV13=S.unsqueeze=void 0;const E=y(2517);S.unsqueeze=(d,g,x)=>{p(g);const v=E.ShapeUtil.unsqueezeShape(g[0].dims,x);return[d.reshapeUnpacked(g[0],v)]},S.unsqueezeV13=(d,g)=>(M(g),(0,S.unsqueeze)(d,[g[0]],Array.from(g[1].integerData))),S.parseUnsqueezeAttributes=d=>d.attributes.getInts("axes");const p=d=>{if(!d||d.length!==1)throw new Error("Unsqueeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},M=d=>{if(!d||d.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.scalesValidation=S.validateInputs=S.parseUpsampleAttributes=S.parseUpsampleAttributesV9=S.parseUpsampleAttributesV7=S.upsample=void 0;const E=y(246),p=y(5060),M=y(2039),d={name:"Upsample",inputNames:["X"],inputTypes:[M.TextureType.unpacked]};S.upsample=(x,v,u)=>((0,S.validateInputs)(v,u),[x.run(Object.assign(Object.assign({},d),{cacheHint:u.cacheKey,get:()=>g(x,v,u)}),v)]),S.parseUpsampleAttributesV7=x=>(0,S.parseUpsampleAttributes)(x,7),S.parseUpsampleAttributesV9=x=>(0,S.parseUpsampleAttributes)(x,9),S.parseUpsampleAttributes=(x,v)=>{const u=v>=10,t=x.attributes.getString("mode","nearest");if(t!=="nearest"&&t!=="linear"&&(v<11||t!=="cubic"))throw new Error(`unrecognized mode: ${t}`);let e=[];v<9&&(e=x.attributes.getFloats("scales"),(0,S.scalesValidation)(e,t,u));const o=x.attributes.getFloat("extrapolation_value",0),c=v>10?x.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(c)===-1)throw new Error(`coordinate_transform_mode '${c}' is not supported`);const b=c==="tf_crop_and_resize",A=b,w=t==="nearest"&&v>=11?x.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(w)===-1)throw new Error(`nearest_mode '${w}' is not supported`);const D=x.attributes.getFloat("cubic_coeff_a",-.75),F=x.attributes.getInt("exclude_outside",0)!==0;if(F&&t!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const Z=v<11||t==="nearest"&&c==="asymmetric"&&w==="floor";let L=0,W=0,k=0;return v>10?x.inputs.length>2?(L=1,W=2,k=3):(W=1,k=2):v===9&&(W=1),(0,E.createAttributeWithCacheKey)({opset:v,isResize:u,mode:t,scales:e,extrapolationValue:o,coordinateTransformMode:c,useExtrapolation:A,needRoiInput:b,nearestMode:w,cubicCoefficientA:D,excludeOutside:F,useNearest2xOptimization:Z,roiInputIdx:L,scalesInputIdx:W,sizesInputIdx:k})};const g=(x,v,u)=>{const t=(0,p.getGlsl)(x.session.backend.glContext.version),[e,o]=x.calculateTextureWidthAndHeight(v[0].dims,M.TextureType.unpacked),c=v[0].dims.map((k,de)=>Math.floor(k*u.scales[de])),[b,A]=x.calculateTextureWidthAndHeight(c,M.TextureType.unpacked),w=c.length,D=new Array(w),F=new Array(w);let Z=`
      int output_pitches[${w}];
      int input_pitches[${w}];
      `;for(let k=w-1;k>=0;k--)D[k]=k===w-1?1:D[k+1]*c[k+1],F[k]=k===w-1?1:F[k+1]*v[0].dims[k+1],Z+=`
        output_pitches[${k}] = ${D[k]};
        input_pitches[${k}] = ${F[k]};
        `;const L=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${e}, ${o});
        float value = getColorAsFloat(${t.texture2D}(X, coords));
        return value;
      }
      `,W=u.mode==="nearest"?`
    ${L}
    float process(int indices[${w}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${A});

      ${Z}

      int d, m;
      for (int dim = 0; dim < ${w}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:w===4?`
    ${L}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${A});

      ${Z}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${v[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${L}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${A});

      ${Z}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${v[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},d),{output:{dims:c,type:v[0].type,textureType:M.TextureType.unpacked},shaderSource:W,variables:[{name:"scales",type:"int",arrayLength:u.scales.length,data:u.scales.map(k=>Math.ceil(k))}]})};S.validateInputs=(x,v)=>{if(!x||v.opset<9&&x.length!==1||v.opset>=9&&v.opset<11&&x.length!==2||v.opset>=11&&x.length<2)throw new Error("invalid inputs.");if(v.scales.length>0&&x[0].dims.length!==v.scales.length)throw new Error("Invalid input shape.");if(x[0].type==="string")throw new Error("Invalid input tensor types.")},S.scalesValidation=(x,v,u)=>{if(u){for(const t of x)if(t<=0)throw new Error("Scale value should be greater than 0.")}else for(const t of x)if(t<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(v!=="linear"&&v!=="cubic"||x.length===2||x.length===4&&x[0]===1&&x[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${u?"Resize":"Upsample"} opeartor.`)}},1958:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ProgramManager=void 0;const E=y(1670),p=y(6231),M=y(8879),d=y(5060);S.ProgramManager=class{constructor(g,x,v){this.profiler=g,this.glContext=x,this.textureLayoutStrategy=v,this.repo=new Map,this.attributesBound=!1}getArtifact(g){return this.repo.get(g)}setArtifact(g,x){this.repo.set(g,x)}run(g,x,v){var u;this.profiler.event("op",`ProgramManager.run ${(u=g.programInfo.name)!==null&&u!==void 0?u:"unknown kernel"}`,()=>{var t;const e=this.glContext.gl,o=g.program;e.useProgram(o);try{this.bindOutput(v),this.attributesBound||this.bindAttributes(g.attribLocations),this.bindUniforms(g.uniformLocations,(t=g.programInfo.variables)!==null&&t!==void 0?t:[],x)}catch(c){throw p.Logger.error("ProgramManager",g.programInfo.shaderSource),c}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(g=>this.glContext.deleteProgram(g.program))}build(g,x,v){return this.profiler.event("backend","ProgramManager.build",()=>{const u=new M.GlslPreprocessor(this.glContext,g,x,v),t=u.preprocess(),e=this.compile(t);return{programInfo:g,program:e,uniformLocations:this.getUniformLocations(e,u.context.programInfo.inputNames,u.context.programInfo.variables),attribLocations:this.getAttribLocations(e)}})}compile(g){if(!this.vertexShader){p.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const u=(0,d.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(u,this.glContext.gl.VERTEX_SHADER)}E.env.debug&&p.Logger.verbose("ProrgramManager",`FragShader:
${g}
`);const x=this.glContext.compileShader(g,this.glContext.gl.FRAGMENT_SHADER),v=this.glContext.createProgram(this.vertexShader,x);return this.glContext.deleteShader(x),v}bindOutput(g){const x=g.width,v=g.height;p.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${x}/${v}, shape=${g.shape}, type=${g.tensor.type}`),this.glContext.attachFramebuffer(g.texture,x,v)}bindAttributes(g){const x=g.position,v=g.textureCoord;this.glContext.setVertexAttributes(x,v),this.attributesBound=!0}bindUniforms(g,x,v){var u;const t=this.glContext.gl;let e=0;for(const{name:o,type:c,location:b,arrayLength:A}of g){const w=(u=x.find(D=>D.name===o))===null||u===void 0?void 0:u.data;if(c!=="sampler2D"&&!w)throw new Error(`variable '${o}' does not have data defined in program info`);switch(c){case"sampler2D":this.bindTexture(v[e],b,e),e++;break;case"float":A?t.uniform1fv(b,w):t.uniform1f(b,w);break;case"int":A?t.uniform1iv(b,w):t.uniform1i(b,w);break;default:throw new Error(`Uniform not implemented: ${c}`)}}}bindTexture(g,x,v){this.glContext.bindTextureToUniform(g.texture,v,x)}getAttribLocations(g){return{position:this.getAttribLocation(g,"position"),textureCoord:this.getAttribLocation(g,"textureCoord")}}getUniformLocations(g,x,v){const u=[];if(x)for(const t of x)u.push({name:t,type:"sampler2D",location:this.getUniformLocation(g,t)});if(v)for(const t of v)u.push(Object.assign(Object.assign({},t),{location:this.getUniformLocation(g,t.name)}));return u}getUniformLocation(g,x){const v=this.glContext.gl.getUniformLocation(g,x);if(v===null)throw new Error(`Uniform ${x} not found.`);return v}getAttribLocation(g,x){return this.glContext.gl.getAttribLocation(g,x)}}},6416:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.WebGLSessionHandler=void 0;const E=y(6231),p=y(1047),M=y(8316),d=y(1640),g=y(1958),x=y(7859),v=y(5702);S.WebGLSessionHandler=class{constructor(u,t){this.backend=u,this.context=t,this.layoutStrategy=new x.PreferLogicalStrategy(u.glContext.maxTextureSize),this.programManager=new g.ProgramManager(this.context.profiler,u.glContext,this.layoutStrategy),this.textureManager=new v.TextureManager(u.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:u.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=u.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new M.WebGLInferenceHandler(this)}onGraphInitialized(u){const t=u.getValues().filter(e=>e.from===-1&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(t)}isInitializer(u){return!!this.initializers&&this.initializers.has(u)}addInitializer(u){this.initializers.add(u)}getTextureData(u,t){return t?this.packedTextureDataCache.get(u):this.unpackedTextureDataCache.get(u)}setTextureData(u,t,e=!1){E.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),e?this.packedTextureDataCache.set(u,t):this.unpackedTextureDataCache.set(u,t)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(u=>this.textureManager.releaseTexture(u,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(u=>this.textureManager.releaseTexture(u,!0)),this.unpackedTextureDataCache=new Map}resolve(u,t,e){const o=(0,p.resolveOperator)(u,t,d.WEBGL_OP_RESOLVE_RULES);return{impl:o.opImpl,context:o.opInit?o.opInit(u,e):u}}}},7769:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Uint8DataEncoder=S.RGBAFloatDataEncoder=S.RedFloat32DataEncoder=void 0;const E=y(6231);S.RedFloat32DataEncoder=class{constructor(p,M=1){if(M===1)this.internalFormat=p.R32F,this.format=p.RED,this.textureType=p.FLOAT,this.channelSize=M;else{if(M!==4)throw new Error(`Invalid number of channels: ${M}`);this.internalFormat=p.RGBA32F,this.format=p.RGBA,this.textureType=p.FLOAT,this.channelSize=M}}encode(p,M){let d,g;return p.constructor!==Float32Array&&(E.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),g=new Float32Array(p)),M*this.channelSize>p.length?(E.Logger.warning("Encoder","Source data too small. Allocating larger array"),g=p,d=this.allocate(M*this.channelSize),g.forEach((x,v)=>d[v]=x)):(g=p,d=g),d}allocate(p){return new Float32Array(4*p)}decode(p,M){return this.channelSize===1?p.filter((d,g)=>g%4==0).subarray(0,M):p.subarray(0,M)}},S.RGBAFloatDataEncoder=class{constructor(p,M=1,d){if(M!==1&&M!==4)throw new Error(`Invalid number of channels: ${M}`);this.internalFormat=p.RGBA,this.format=p.RGBA,this.channelSize=M,this.textureType=d||p.FLOAT}encode(p,M){let d=p;return this.channelSize===1&&(E.Logger.verbose("Encoder","Exploding into a larger array"),d=this.allocate(M),p.forEach((g,x)=>d[4*x]=g)),d}allocate(p){return new Float32Array(4*p)}decode(p,M){return this.channelSize===1?p.filter((d,g)=>g%4==0).subarray(0,M):p.subarray(0,M)}},S.Uint8DataEncoder=class{constructor(p,M=1){if(this.channelSize=4,M===1)this.internalFormat=p.ALPHA,this.format=p.ALPHA,this.textureType=p.UNSIGNED_BYTE,this.channelSize=M;else{if(M!==4)throw new Error(`Invalid number of channels: ${M}`);this.internalFormat=p.RGBA,this.format=p.RGBA,this.textureType=p.UNSIGNED_BYTE,this.channelSize=M}}encode(p,M){return new Uint8Array(p.buffer,p.byteOffset,p.byteLength)}allocate(p){return new Uint8Array(p*this.channelSize)}decode(p,M){if(p instanceof Uint8Array)return p.subarray(0,M);throw new Error(`Invalid array type: ${p.constructor}`)}}},7859:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getBatchDim=S.sizeToSquarishShape=S.getRowsCols=S.sizeFromShape=S.isInt=S.parseAxisParam=S.squeezeShape=S.PreferLogicalStrategy=S.AlwaysKeepOriginalSizeStrategy=void 0;const E=y(6231),p=y(2517);function M(u,t){const e=[],o=[],c=t!=null&&Array.isArray(t)&&t.length===0,b=t==null||c?null:d(t,u).sort();let A=0;for(let w=0;w<u.length;++w){if(b!=null){if(b[A]===w&&u[w]!==1)throw new Error(`Can't squeeze axis ${w} since its dim '${u[w]}' is not 1`);(b[A]==null||b[A]>w)&&u[w]===1&&(e.push(u[w]),o.push(w)),b[A]<=w&&A++}u[w]!==1&&(e.push(u[w]),o.push(w))}return{newShape:e,keptDims:o}}function d(u,t){const e=t.length;return u=u==null?t.map((o,c)=>c):[].concat(u),(0,p.assert)(u.every(o=>o>=-e&&o<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${u}`),(0,p.assert)(u.every(g),()=>`All values in axis param must be integers but got axis ${u}`),u.map(o=>o<0?e+o:o)}function g(u){return u%1==0}function x(u){if(u.length===0)return 1;let t=u[0];for(let e=1;e<u.length;e++)t*=u[e];return t}function v(u){const t=Math.ceil(Math.sqrt(u));return[t,Math.ceil(u/t)]}S.AlwaysKeepOriginalSizeStrategy=class{constructor(u){this.maxTextureSize=u}computeTextureWH(u,t){if(u.length===0)return[1,1];const e=this.maxTextureSize;if(t&&t.breakAxis!==void 0){const b=t.breakAxis>=u.length?1:u.slice(t.breakAxis).reduce((w,D)=>w*D),A=t.breakAxis<=0?1:u.slice(0,t.breakAxis).reduce((w,D)=>w*D);if(!(b>e||A>e))return[b,A];E.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${u}, breakAxis:${t.breakAxis}`)}const o=u.reduce((b,A)=>b*A);let c=Math.floor(Math.sqrt(o));for(;c<e&&c<o&&o%c!=0;c++);if(c>=e||o%c!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${u}`);return[c,o/c]}},S.PreferLogicalStrategy=class{constructor(u){this.maxTextureSize=u}computeTextureWH(u,t){const e=this.computeTexture(u,t);return t&&t.isPacked&&(e[0]/=2,e[1]/=2),t&&t.reverseWH?[e[1],e[0]]:e}computeTexture(u,t){const e=t&&t.isPacked;if(u.length===0)return e?[2,2]:[1,1];let o=this.maxTextureSize;if(t&&t.breakAxis!==void 0){const A=t.breakAxis>=u.length?1:u.slice(t.breakAxis).reduce((D,F)=>D*F),w=t.breakAxis<=0?1:u.slice(0,t.breakAxis).reduce((D,F)=>D*F);if(!(A>o||w>o))return[A,w];E.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${u}, breakAxis:${t.breakAxis}`)}let c=u.slice(0);e&&(o*=2,c=c.map((A,w)=>w>=c.length-2?c[w]%2==0?c[w]:c[w]+1:c[w]),c.length===1&&(c=[2,c[0]])),c.length!==2&&(c=M(c).newShape);const b=x(c);return c.length<=1&&b<=o?[1,b]:c.length===2&&c[0]<=o&&c[1]<=o?c:c.length===3&&c[0]*c[1]<=o&&c[2]<=o?[c[0]*c[1],c[2]]:c.length===3&&c[0]<=o&&c[1]*c[2]<=o?[c[0],c[1]*c[2]]:c.length===4&&c[0]*c[1]*c[2]<=o&&c[3]<=o?[c[0]*c[1]*c[2],c[3]]:c.length===4&&c[0]<=o&&c[1]*c[2]*c[3]<=o?[c[0],c[1]*c[2]*c[3]]:e?v(b/4).map(A=>2*A):v(b)}},S.squeezeShape=M,S.parseAxisParam=d,S.isInt=g,S.sizeFromShape=x,S.getRowsCols=function(u){if(u.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[u.length>1?u[u.length-2]:1,u[u.length-1]]},S.sizeToSquarishShape=v,S.getBatchDim=function(u,t=2){return x(u.slice(0,u.length-t))}},4057:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createTextureLayoutFromShape=S.calculateTextureWidthAndHeight=S.createTextureLayoutFromTextureType=void 0;const E=y(2517),p=y(2039);S.createTextureLayoutFromTextureType=(M,d,g)=>{const x=g===p.TextureType.unpacked||g===p.TextureType.unpackedReversed?1:4,v=g===p.TextureType.packed,u=g===p.TextureType.unpackedReversed||g===p.TextureType.packed,t=g===p.TextureType.packedLastDimension?d.length-1:void 0,e=g===p.TextureType.packedLastDimension?d.map((o,c)=>c===d.length-1?4*o:o):void 0;return(0,S.createTextureLayoutFromShape)(M,d,x,e,{isPacked:v,reverseWH:u,breakAxis:t})},S.calculateTextureWidthAndHeight=(M,d,g)=>{const x=(0,S.createTextureLayoutFromTextureType)(M,d,g);return[x.width,x.height]},S.createTextureLayoutFromShape=(M,d,g=1,x,v)=>{const u=!(!v||!v.isPacked),[t,e]=M.computeTextureWH(u&&x||d,v),o=d.length;let c=d.slice(0);if(o===0&&(c=[1]),g===1)x=d;else if(u){if(g!==4)throw new Error("a packed texture must be 4-channel");x=d,o>0&&(c[o-1]=Math.ceil(c[o-1]/2)),o>1&&(c[o-2]=Math.ceil(c[o-2]/2))}else if(!x)throw new Error("Unpacked shape is needed when using channels > 1");return{width:t,height:e,channels:g,isPacked:u,shape:c,strides:E.ShapeUtil.computeStrides(c),unpackedShape:x,reversedWH:v&&v.reverseWH}}},5702:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TextureManager=void 0;const E=y(6231);S.TextureManager=class{constructor(p,M,d,g){this.glContext=p,this.layoutStrategy=M,this.profiler=d,this.config=g,this.pendingRead=new Map,g.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(p,M,d,g){const x=this.toEncoderType(p),v=this.glContext.getEncoder(x,M.channels||1,g);if(M.isPacked&&g===1)throw new Error("not implemented");const u=M.width,t=M.height;let e,o;if(this.config.reuseTextures){e=`${u}x${t}_${v.format}_${v.internalFormat}_${v.textureType}`,o=this.inUseTextures.get(e),o||(o=[],this.inUseTextures.set(e,o));const b=this.idleTextures.get(e);if(b&&b.length>0){const A=b.pop();return o.push(A),g===1&&this.glContext.updateTexture(A,u,t,v,this.toTextureData(p,d)),A}}E.Logger.verbose("TextureManager",`Creating new texture of size ${M.width}x${M.height}`);const c=this.glContext.allocateTexture(u,t,v,this.toTextureData(p,d));return this.config.reuseTextures&&(o.push(c),this.textureLookup.set(c,e)),c}readTexture(p,M,d){return d||(d=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const g=p.shape.reduce((v,u)=>v*u)*d,x=this.glContext.readTexture(p.texture,p.width,p.height,g,this.toEncoderType(M),d);return this.toTensorData(M,x)})}readTextureAsync(p,M,d){return Ga(this,null,function*(){const g=p.tensor.dataId;if(d||(d=1),this.pendingRead.has(g)){const x=this.pendingRead.get(g);return new Promise(v=>x==null?void 0:x.push(v))}return this.profiler.event("backend","TextureManager.readTextureAsync",()=>Ga(this,null,function*(){this.pendingRead.set(g,[]);const x=p.shape.reduce((e,o)=>e*o)*d;yield this.glContext.createAndWaitForFence();const v=this.glContext.readTexture(p.texture,p.width,p.height,x,this.toEncoderType(M),d),u=this.toTensorData(M,v),t=this.pendingRead.get(g);return this.pendingRead.delete(g),t==null||t.forEach(e=>e(u)),u}))})}readUint8TextureAsFloat(p){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const M=p.shape.reduce((g,x)=>g*x),d=this.glContext.readTexture(p.texture,p.width,p.height,4*M,"byte",4);return new Float32Array(d.buffer,d.byteOffset,M)})}releaseTexture(p,M){let d;if(this.config.reuseTextures&&(d=this.textureLookup.get(p.texture),d)){M&&this.textureLookup.delete(d);const g=this.inUseTextures.get(d);if(g){const x=g.indexOf(p.texture);if(x!==-1){g.splice(x,1);let v=this.idleTextures.get(d);v||(v=[],this.idleTextures.set(d,v)),v.push(p.texture)}}}d&&!M||(E.Logger.verbose("TextureManager",`Deleting texture of size ${p.width}x${p.height}`),this.glContext.deleteTexture(p.texture))}toTensorData(p,M){switch(p){case"int16":return M instanceof Int16Array?M:Int16Array.from(M);case"int32":return M instanceof Int32Array?M:Int32Array.from(M);case"int8":return M instanceof Int8Array?M:Int8Array.from(M);case"uint16":return M instanceof Uint16Array?M:Uint16Array.from(M);case"uint32":return M instanceof Uint32Array?M:Uint32Array.from(M);case"uint8":case"bool":return M instanceof Uint8Array?M:Uint8Array.from(M);case"float32":return M instanceof Float32Array?M:Float32Array.from(M);case"float64":return M instanceof Float64Array?M:Float64Array.from(M);default:throw new Error(`TensorData type ${p} is not supported`)}}toTextureData(p,M){if(M)return M instanceof Float32Array?M:new Float32Array(M)}toEncoderType(p){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(Ie,S)=>{"use strict";var y;Object.defineProperty(S,"__esModule",{value:!0}),S.TextureType=void 0,(y=S.TextureType||(S.TextureType={}))[y.unpacked=0]="unpacked",y[y.unpackedReversed=1]="unpackedReversed",y[y.packed=2]="packed",y[y.downloadUint8AsFloat=3]="downloadUint8AsFloat",y[y.packedLastDimension=4]="packedLastDimension"},9390:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getGlChannels=S.getCoordsDataType=S.getSqueezedParams=S.squeezeInputShape=S.generateShaderFuncNameFromInputSamplerNameAtOutCoords=S.generateShaderFuncNameFromInputSamplerName=S.repeatedTry=S.getPackedShape=void 0;const E=y(2517);S.getPackedShape=function(p){const M=p.length;return p.slice(0,M-1).concat(p[M-1]/4)},S.repeatedTry=function(p,M=g=>0,d){return Ga(this,null,function*(){return new Promise((g,x)=>{let v=0;const u=()=>{if(p())return void g();v++;const t=M(v);d!=null&&v>=d?x():setTimeout(u,t)};u()})})},S.generateShaderFuncNameFromInputSamplerName=function(p){return(0,E.assert)(p!==void 0&&p.length!==0,()=>"empty string found for sampler name"),"get"+p.charAt(0).toUpperCase()+p.slice(1)},S.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(p){return(0,E.assert)(p!==void 0&&p.length!==0,()=>"empty string found for sampler name"),"get"+p.charAt(0).toUpperCase()+p.slice(1)+"AtOutCoords"},S.squeezeInputShape=function(p,M){let d=JSON.parse(JSON.stringify(p));return d=M,d},S.getSqueezedParams=function(p,M){return M.map(d=>p[d]).join(", ")},S.getCoordsDataType=function(p){if(p<=1)return"int";if(p===2)return"ivec2";if(p===3)return"ivec3";if(p===4)return"ivec4";if(p===5)return"ivec5";if(p===6)return"ivec6";throw Error(`GPU for rank ${p} is not yet supported`)},S.getGlChannels=function(p=6){return["x","y","z","w","u","v"].slice(0,p)}},7305:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createNewWebGLContext=S.createWebGLContext=void 0;const E=y(6231),p=y(1713),M={};function d(g){const x=function(){if(typeof document=="undefined"){if(typeof OffscreenCanvas=="undefined")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const t=document.createElement("canvas");return t.width=1,t.height=1,t}();let v;const u={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!g||g==="webgl2")&&(v=x.getContext("webgl2",u),v))try{return new p.WebGLContext(v,2)}catch(t){E.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${t}`)}if((!g||g==="webgl")&&(v=x.getContext("webgl",u)||x.getContext("experimental-webgl",u),v))try{return new p.WebGLContext(v,1)}catch(t){E.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${t}`)}throw new Error("WebGL is not supported")}S.createWebGLContext=function g(x){let v;x&&x!=="webgl2"||!("webgl2"in M)?x&&x!=="webgl"||!("webgl"in M)||(v=M.webgl):v=M.webgl2,v=v||d(x),x=x||v.version===1?"webgl":"webgl2";const u=v.gl;return M[x]=v,u.isContextLost()?(delete M[x],g(x)):(u.disable(u.DEPTH_TEST),u.disable(u.STENCIL_TEST),u.disable(u.BLEND),u.disable(u.DITHER),u.disable(u.POLYGON_OFFSET_FILL),u.disable(u.SAMPLE_COVERAGE),u.enable(u.SCISSOR_TEST),u.enable(u.CULL_FACE),u.cullFace(u.BACK),v)},S.createNewWebGLContext=d},1713:function(Ie,S,y){"use strict";var E=this&&this.__createBinding||(Object.create?function(u,t,e,o){o===void 0&&(o=e);var c=Object.getOwnPropertyDescriptor(t,e);c&&!("get"in c?!t.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(u,o,c)}:function(u,t,e,o){o===void 0&&(o=e),u[o]=t[e]}),p=this&&this.__setModuleDefault||(Object.create?function(u,t){Object.defineProperty(u,"default",{enumerable:!0,value:t})}:function(u,t){u.default=t}),M=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var t={};if(u!=null)for(var e in u)e!=="default"&&Object.prototype.hasOwnProperty.call(u,e)&&E(t,u,e);return p(t,u),t};Object.defineProperty(S,"__esModule",{value:!0}),S.WebGLContext=S.linearSearchLastTrue=void 0;const d=y(1670),g=M(y(7769)),x=y(9390);function v(u){let t=0;for(;t<u.length&&u[t]();++t);return t-1}S.linearSearchLastTrue=v,S.WebGLContext=class{constructor(u,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=u,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(u,t,e,o){const c=this.gl,b=c.createTexture();c.bindTexture(c.TEXTURE_2D,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);const A=o?e.encode(o,u*t):null;return c.texImage2D(c.TEXTURE_2D,0,e.internalFormat,u,t,0,e.format,e.textureType,A),this.checkError(),b}updateTexture(u,t,e,o,c){const b=this.gl;b.bindTexture(b.TEXTURE_2D,u);const A=o.encode(c,t*e);b.texSubImage2D(b.TEXTURE_2D,0,0,0,t,e,o.format,o.textureType,A),this.checkError()}attachFramebuffer(u,t,e){const o=this.gl;o.bindTexture(o.TEXTURE_2D,u),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,u,0),this.checkError(),o.viewport(0,0,t,e),o.scissor(0,0,t,e)}readTexture(u,t,e,o,c,b){const A=this.gl;b||(b=1),this.frameBufferBound||this.attachFramebuffer(u,t,e);const w=this.getEncoder(c,b),D=w.allocate(t*e);return A.bindTexture(A.TEXTURE_2D,u),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,u,0),A.readPixels(0,0,t,e,A.RGBA,w.textureType,D),this.checkError(),w.decode(D,o)}isFramebufferReady(){return!0}getActiveTexture(){const u=this.gl;return"TEXTURE"+(u.getParameter(this.gl.ACTIVE_TEXTURE)-u.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(u,t){const e=this.gl;e.vertexAttribPointer(u,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(u),t!==-1&&(e.vertexAttribPointer(t,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(t)),this.checkError()}createProgram(u,t){const e=this.gl,o=e.createProgram();return e.attachShader(o,u),e.attachShader(o,t),e.linkProgram(o),o}compileShader(u,t){const e=this.gl,o=e.createShader(t);if(!o)throw new Error(`createShader() returned null with type ${t}`);if(e.shaderSource(o,u),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(o)}
Shader source:
${u}`);return o}deleteShader(u){this.gl.deleteShader(u)}bindTextureToUniform(u,t,e){const o=this.gl;o.activeTexture(o.TEXTURE0+t),this.checkError(),o.bindTexture(o.TEXTURE_2D,u),this.checkError(),o.uniform1i(e,t),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(d.env.debug){const u=this.gl,t=u.getError();let e="";switch(t){case u.NO_ERROR:return;case u.INVALID_ENUM:e="INVALID_ENUM";break;case u.INVALID_VALUE:e="INVALID_VALUE";break;case u.INVALID_OPERATION:e="INVALID_OPERATION";break;case u.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case u.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case u.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e=`Unknown WebGL Error: ${t.toString(16)}`}throw new Error(e)}}deleteTexture(u){this.gl.deleteTexture(u)}deleteProgram(u){this.gl.deleteProgram(u)}getEncoder(u,t,e=0){if(this.version===2)return new g.RedFloat32DataEncoder(this.gl,t);switch(u){case"float":return e===1||this.isRenderFloat32Supported?new g.RGBAFloatDataEncoder(this.gl,t):new g.RGBAFloatDataEncoder(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new g.Uint8DataEncoder(this.gl,t);default:throw new Error(`Invalid dataType: ${u}`)}}clearActiveTextures(){const u=this.gl;for(let t=0;t<this.maxTextureImageUnits;++t)u.activeTexture(u.TEXTURE0+t),u.bindTexture(u.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteFramebuffer(this.framebuffer),u.bindBuffer(u.ARRAY_BUFFER,null),u.deleteBuffer(this.vertexbuffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null),u.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const u=this.gl,t=u.createBuffer();if(!t)throw new Error("createBuffer() returned null");const e=this.createDefaultGeometry();return u.bindBuffer(u.ARRAY_BUFFER,t),u.bufferData(u.ARRAY_BUFFER,e,u.STATIC_DRAW),this.checkError(),t}createFramebuffer(){const u=this.gl.createFramebuffer();if(!u)throw new Error("createFramebuffer returned null");return u}queryVitalParameters(){const u=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const u=this.gl,t=u.createTexture();u.bindTexture(u.TEXTURE_2D,t);const e=this.version===2?u.RGBA32F:u.RGBA;u.texImage2D(u.TEXTURE_2D,0,e,1,1,0,u.RGBA,u.FLOAT,null);const o=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,o),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0);const c=u.checkFramebufferStatus(u.FRAMEBUFFER)===u.FRAMEBUFFER_COMPLETE;return u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteTexture(t),u.deleteFramebuffer(o),c}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const u=this.gl;let t,e,o,c,b;try{t=u.createTexture(),e=u.createFramebuffer(),u.bindTexture(u.TEXTURE_2D,t);const A=this.version===2?u.RGBA32F:u.RGBA;return u.texImage2D(u.TEXTURE_2D,0,A,1,1,0,u.RGBA,u.FLOAT,null),u.bindFramebuffer(u.FRAMEBUFFER,e),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),u.enable(u.BLEND),o=u.createShader(u.VERTEX_SHADER),!!o&&(u.shaderSource(o,"void main(){}"),u.compileShader(o),c=u.createShader(u.FRAGMENT_SHADER),!!c&&(u.shaderSource(c,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),u.compileShader(c),b=u.createProgram(),!!b&&(u.attachShader(b,o),u.attachShader(b,c),u.linkProgram(b),u.useProgram(b),u.drawArrays(u.POINTS,0,1),u.getError()===u.NO_ERROR)))}finally{u.disable(u.BLEND),b&&u.deleteProgram(b),o&&u.deleteShader(o),c&&u.deleteShader(c),e&&(u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteFramebuffer(e)),t&&(u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(t))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const u=this.gl,t=this.disjointTimerQueryWebgl2Extension,e=u.createQuery();return u.beginQuery(t.TIME_ELAPSED_EXT,e),e}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const u=this.gl,t=this.disjointTimerQueryWebgl2Extension;u.endQuery(t.TIME_ELAPSED_EXT)}}isTimerResultAvailable(u){let t=!1,e=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const o=this.gl,c=this.disjointTimerQueryWebgl2Extension;t=o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE),e=o.getParameter(c.GPU_DISJOINT_EXT)}return t&&!e}getTimerResult(u){let t=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const e=this.gl;t=e.getQueryParameter(u,e.QUERY_RESULT),e.deleteQuery(u)}return t/1e6}waitForQueryAndGetTime(u){return Ga(this,null,function*(){return yield(0,x.repeatedTry)(()=>this.isTimerResultAvailable(u)),this.getTimerResult(u)})}createAndWaitForFence(){return Ga(this,null,function*(){const u=this.createFence(this.gl);return this.pollFence(u)})}createFence(u){let t;const e=u,o=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return u.flush(),t=o===null?()=>!0:()=>{const c=e.clientWaitSync(o,0,0);return c===e.ALREADY_SIGNALED||c===e.CONDITION_SATISFIED},{query:o,isFencePassed:t}}pollFence(u){return Ga(this,null,function*(){return new Promise(t=>{this.addItemToPoll(()=>u.isFencePassed(),()=>t())})})}pollItems(){const u=v(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=u;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(u+1)}addItemToPoll(u,t){return Ga(this,null,function*(){this.itemsToPoll.push({isDoneFn:u,resolveFn:t}),this.itemsToPoll.length>1||(yield(0,x.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0)))})}}},1036:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ExecutionPlan=void 0;const E=y(6231);class p{constructor(d,g){this.op=d,this.node=g}}S.ExecutionPlan=class{constructor(M,d,g){this.graph=M,this.profiler=g,this.initialize(d)}initialize(M){this.profiler.event("session","ExecutionPlan.initialize",()=>{const d=this.graph.getNodes();if(d.length!==M.length)throw new Error("The size of nodes and OPs do not match.");this._ops=M.map((g,x)=>new p(g,d[x])),this.reset(),this._starter=[],this._ops.forEach((g,x)=>{let v=!0;for(const u of g.node.inputs)if(!this._values[u]&&this.graph.getInputIndices().indexOf(u)===-1){v=!1;break}v&&this._starter.push(x)})})}reset(){this._values=this.graph.getValues().map(M=>M.tensor)}execute(M,d){return Ga(this,null,function*(){return this.profiler.event("session","ExecutionPlan.execute",()=>Ga(this,null,function*(){this.reset();const g=M.createInferenceHandler(),x=this.graph.getInputIndices();if(d.length!==x.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${d.length} expected: ${x.length}`);d.forEach((c,b)=>{const A=x[b];this._values[A]=c});const v=this._starter.slice(0),u=this.graph.getValues(),t=this.graph.getNodes();let e=0;for(;e<v.length;){const c=v[e++],b=this._ops[c],A=b.node.inputs.map(Z=>this._values[Z]);if(A.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${b.node}`);const w=A;E.Logger.verbose("ExecPlan",`Runing op:${b.node.name} (${w.map((Z,L)=>`'${b.node.inputs[L]}': ${Z.type}[${Z.dims.join(",")}]`).join(", ")})`);const D=yield this.profiler.event("node",b.node.name,()=>Ga(this,null,function*(){return b.op.impl(g,w,b.op.context)}));if(D.length!==b.node.outputs.length)throw new Error("the size of output does not match model definition.");D.forEach((Z,L)=>{const W=b.node.outputs[L];if(this._values[W])throw new Error(`output [${W}] already has value: op:${b.node.name}`);this._values[W]=Z});const F=new Set;D.forEach((Z,L)=>{const W=b.node.outputs[L];for(const k of u[W].to){const de=t[k];let H=!0;for(const ue of de.inputs)if(!this._values[ue]){H=!1;break}H&&F.add(k)}}),v.push(...F)}const o=[];for(let c=0;c<this.graph.getOutputIndices().length;c++){const b=this.graph.getOutputIndices()[c],A=this._values[b];if(A===void 0)throw new Error(`required output [${b}] does not have value`);b===0?yield A.getData():A.data,o.push(A)}return E.Logger.verbose("ExecPlan","disposing of inferenceHandler"),g.dispose(),o}))})}}},7070:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Graph=void 0;const E=y(1446),p=y(7778),M=y(9395),d=y(9162),g=y(2517);var x=M.onnxruntime.experimental.fbs;S.Graph={from:(e,o)=>new t(e,o)};class v{constructor(o){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,o&&(this.type=g.ProtoUtil.tensorValueTypeFromProto(o.type.tensorType))}get from(){return this._from}get to(){return this._to}}class u{constructor(o,c){o instanceof E.onnx.NodeProto?(this.name=o.name,this.opType=o.opType,this.attributes=new p.Attribute(o.attribute)):o instanceof x.Node&&(this.name=c!=null?c:o.name(),this.opType=o.opType(),this.attributes=new p.Attribute(g.ProtoUtil.tensorAttributesFromORTFormat(o))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class t{constructor(o,c){if(!o)throw new TypeError("graph is empty");this.buildGraph(o),this.transformGraph(c),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(o){if(o instanceof E.onnx.GraphProto)this.buildGraphFromOnnxFormat(o);else{if(!(o instanceof x.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(o)}}buildGraphFromOnnxFormat(o){const c=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const b=new Map;if(!o.input)throw new Error("missing information in graph: input");const A=[];for(const w of o.input){if(c.has(w.name))throw new Error(`duplicated input name: ${w.name}`);const D=this._allData.push(new v(w))-1;c.set(w.name,D),A.push(w.name)}if(!o.initializer)throw new Error("missing information in graph: initializer");for(const w of o.initializer){let D=c.get(w.name);if(D===void 0){const F=new v;F.type={shape:{dims:g.ProtoUtil.tensorDimsFromProto(w.dims)},tensorType:g.ProtoUtil.tensorDataTypeFromProto(w.dataType)},D=this._allData.push(F)-1,c.set(w.name,D)}this._allData[D]._from=-1,this._allData[D].tensor=d.Tensor.fromProto(w)}for(let w=0;w<this._allData.length;w++)this._allData[w].tensor||(this._allInputIndices.push(w),this._allInputNames.push(A[w]));if(!o.output)throw new Error("missing information in graph: output");for(const w of o.output){if(c.has(w.name))throw new Error(`duplicated output name: ${w.name}`);const D=this._allData.push(new v(w))-1;c.set(w.name,D),this._allOutputIndices.push(D),this._allOutputNames.push(w.name)}if(!o.node)throw new Error("missing information in graph: node");for(const w of o.node){if(!w.name)for(let F=0;;F++){const Z=`unnamed_${w.opType}_${F}`;if(!b.has(Z)){w.name=Z;break}}if(b.has(w.name))throw new Error(`duplicated node name: ${w.name}`);const D=this._nodes.push(new u(w))-1;b.set(w.name,D)}for(let w=0;w<this._nodes.length;w++){const D=this._nodes[w],F=o.node[w];if(!F.output)throw new Error(`missing output for node: ${F.name}`);for(const Z of F.output){let L=c.get(Z);if(L===void 0&&(L=this._allData.push(new v)-1,c.set(Z,L)),D.outputs.push(L),this._allData[L]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${L}`);if(this._allData[L]._from=w,F.opType==="Constant"){if(!F.attribute||F.attribute.length!==1||!F.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!F.output||F.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");D.outputs.pop(),D.executeNode=!1,this._allData[L]._from=-1,this._allData[L].tensor=d.Tensor.fromProto(F.attribute[0].t)}}}for(let w=0;w<this._nodes.length;w++){const D=this._nodes[w],F=o.node[w];if(!F.input)throw new Error(`missing input for node: ${F.name}`);for(const Z of F.input){const L=c.get(Z);if(L===void 0){if(Z===""&&F.input.length===3&&F.opType==="Resize")continue;throw new Error(`unrecognized input '${Z}' for node: ${F.name}`)}D.inputs.push(L),this._allData[L]._to.push(w)}}return!0}buildGraphFromOrtFormat(o){var c,b,A;const w=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const D=new Map,F=[];for(let Z=0;Z<o.inputsLength();Z++){const L=o.inputs(Z);if(w.has(L))throw new Error(`duplicated input name: ${L}`);for(let W=0;W<o.nodeArgsLength();W++)if(((c=o.nodeArgs(W))===null||c===void 0?void 0:c.name())===L){const k=new v;if(((A=(b=o.nodeArgs(W))===null||b===void 0?void 0:b.type())===null||A===void 0?void 0:A.valueType())!==x.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const de=o.nodeArgs(W).type().value(new x.TensorTypeAndShape),H=g.ProtoUtil.tensorDataTypeFromProto(de.elemType()),ue=de.shape(),ve=[];for(let Ae=0;Ae<ue.dimLength();Ae++)ve.push(g.LongUtil.longToNumber(ue.dim(Ae).value().dimValue()));k.type={shape:{dims:ve},tensorType:H};const ke=this._allData.push(k)-1;w.set(L,ke),F.push(L)}}for(let Z=0;Z<o.initializersLength();Z++){const L=o.initializers(Z);let W=w.get(L.name());if(W===void 0){const k=new v,de=g.ProtoUtil.tensorDimsFromORTFormat(L),H=g.ProtoUtil.tensorDataTypeFromProto(L.dataType());k.type={shape:{dims:de},tensorType:H},W=this._allData.push(k)-1,w.set(L.name(),W)}this._allData[W]._from=-1,this._allData[W].tensor=d.Tensor.fromOrtTensor(L)}for(let Z=0;Z<this._allData.length;Z++)this._allData[Z].tensor||(this._allInputIndices.push(Z),this._allInputNames.push(F[Z]));for(let Z=0;Z<o.outputsLength();Z++){const L=o.outputs(Z);if(w.has(L))throw new Error(`duplicated output name: ${L}`);const W=this._allData.push(new v)-1;w.set(L,W),this._allOutputIndices.push(W),this._allOutputNames.push(L)}if(!o.nodes)throw new Error("missing information in graph: node");for(let Z=0;Z<o.nodesLength();Z++){const L=o.nodes(Z);let W=L.name();if(!W)for(let de=0;W=`unnamed_${L.opType()}_${de}`,D.has(W);de++);if(D.has(W))throw new Error(`duplicated node name: ${W}`);const k=this._nodes.push(new u(L,W))-1;D.set(W,k)}for(let Z=0;Z<this._nodes.length;Z++){const L=this._nodes[Z],W=o.nodes(Z);if(W==null)throw new Error(`No node exists at index ${Z}`);if((W==null?void 0:W.outputsLength())===0)throw new Error(`missing output for node: ${W.name}`);for(let k=0;k<(W==null?void 0:W.outputsLength());k++){const de=W==null?void 0:W.outputs(k);let H=w.get(de);if(H===void 0&&(H=this._allData.push(new v)-1,w.set(de,H)),L.outputs.push(H),this._allData[H]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${H}`);if(this._allData[H]._from=Z,W.opType()==="Constant"){if(W.attributesLength()!==1||!W.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(W.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");L.outputs.pop(),L.executeNode=!1,this._allData[H]._from=-1,this._allData[H].tensor=d.Tensor.fromOrtTensor(W.attributes(0).t())}}}for(let Z=0;Z<this._nodes.length;Z++){const L=this._nodes[Z],W=o.nodes(Z);if(W.inputsLength()===0)throw new Error(`missing input for node: ${W.name}`);for(let k=0;k<W.inputsLength();k++){const de=W.inputs(k),H=w.get(de);if(H===void 0)throw new Error(`unrecognized input '${de}' for node: ${W.name()}`);L.inputs.push(H),this._allData[H]._to.push(Z)}}}checkIsAcyclic(){const o=new Set;this._allInputIndices.forEach(A=>{this._allData[A]._to.forEach(w=>{o.add(w)})});const c=Array.from(o),b=new Array(this._nodes.length).fill("white");for(;c.length>0;){const A=c.pop();b[A]==="gray"?b[A]="black":(c.push(A),b[A]="gray",this._nodes[A].outputs.forEach(w=>{const D=this._allData[w];if(D.tensor!==void 0)throw new Error("node outputs should not be initialized");if(D._from!==A)throw new Error("from property of the Value object doesn't match index of Node being processed");D._to.forEach(F=>{if(b[F]==="gray")throw new Error("model graph is cyclic");b[F]==="white"&&c.push(F)})}))}}transformGraph(o){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),o&&o.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let o=0;for(let c=0;c<this._nodes.length;c++)this._nodes[c].executeNode?o>0&&(this._nodes[c].inputs.forEach(b=>{const A=this._allData[b]._to.indexOf(c+o);A!==-1&&(this._allData[b]._to[A]=c)}),this._nodes[c].outputs.forEach(b=>{this._allData[b]._from&&this._allData[b]._from===c+o&&(this._allData[b]._from=c)})):(o++,this._nodes[c].outputs.forEach(b=>{this._allData[b]._from=-2}),this._nodes.splice(c,1),c--);o=0;for(let c=0;c<this._allData.length;c++)if(this._allData[c].from!==-2||this._allOutputIndices.indexOf(c+o)!==-1){if(o>0){let b=-1;this._allData[c].from!==void 0&&this._allData[c].from!==-1?(b=this._nodes[this._allData[c].from].outputs.indexOf(c+o),b!==-1&&(this._nodes[this._allData[c].from].outputs[b]=c)):(b=this._allInputIndices.indexOf(c+o),b!==-1&&(this._allInputIndices[b]=c)),this._allData[c].to.forEach(A=>{b=this._nodes[A].inputs.indexOf(c+o),b!==-1&&(this._nodes[A].inputs[b]=c)}),this._allData[c].to.length===0&&(b=this._allOutputIndices.indexOf(c+o),b!==-1&&(this._allOutputIndices[b]=c))}}else o++,this._allData.splice(c,1),c--}deleteNode(o){const c=this._nodes[o];if(c.outputs.length>1){for(let Z=1;Z<c.outputs.length;Z++)if(this._allData[c.outputs[Z]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}c.executeNode=!1;const b=c.inputs[0],A=c.outputs[0],w=this._allData[A].to,D=this._allData[b].to.indexOf(o);if(D===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[b].to.splice(D,1),this._allData[A]._to=[];const F=this._allOutputIndices.indexOf(A);if(F!==-1&&(this._allOutputIndices[F]=b),w&&w.length>0)for(const Z of w){const L=this._nodes[Z].inputs.indexOf(A);if(L===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[Z].inputs[L]=b,this._allData[b].to.push(Z)}}removeAllDropoutNodes(){let o=0;for(const c of this._nodes){if(c.opType==="Dropout"){if(c.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(c.outputs.length!==1&&c.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(c.outputs.length===2&&this._allData[c.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(o)}o++}}removeAllIdentityNodes(){let o=0;for(const c of this._nodes)c.opType==="Identity"&&this.deleteNode(o),o++}isActivation(o){switch(o.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const o of this._nodes)if(o.opType==="Conv"){const c=this._allData[o.outputs[0]]._to;if(c.length===1&&this.isActivation(this._nodes[c[0]])){const b=this._nodes[c[0]];if(b.opType==="Clip")if(b.inputs.length===1)try{o.attributes.set("activation_params","floats",[b.attributes.getFloat("min"),b.attributes.getFloat("max")])}catch(A){o.attributes.set("activation_params","floats",[g.MIN_CLIP,g.MAX_CLIP])}else{if(!(b.inputs.length>=3&&this._allData[b.inputs[1]].tensor!==void 0&&this._allData[b.inputs[2]].tensor!==void 0))continue;o.attributes.set("activation_params","floats",[this._allData[b.inputs[1]].tensor.floatData[0],this._allData[b.inputs[2]].tensor.floatData[0]])}o.attributes.set("activation","string",b.opType),this.deleteNode(c[0])}}}}},6231:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.now=S.Profiler=S.Logger=void 0;const y={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},E={none:new class{log(u,t,e){}},console:new class{log(u,t,e){console.log(`${this.color(u)} ${e?"\x1B[35m"+e+"\x1B[0m ":""}${t}`)}color(u){switch(u){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${u}`)}}}},p={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let M={"":p};function d(u,t,e,o){if(t===void 0)return c=u,{verbose:d.verbose.bind(null,c),info:d.info.bind(null,c),warning:d.warning.bind(null,c),error:d.error.bind(null,c),fatal:d.fatal.bind(null,c)};if(e===void 0)g(u,t);else if(typeof e=="number"&&o===void 0)g(u,t);else if(typeof e=="string"&&o===void 0)g(u,e,0,t);else{if(typeof e!="string"||typeof o!="number")throw new TypeError("input is valid");g(u,e,0,t)}var c}function g(u,t,e,o){const c=M[o||""]||M[""];y[u]<y[c.minimalSeverity]||(c.logDateTime&&(t=`${new Date().toISOString()}|${t}`),c.logSourceLocation,E[c.provider].log(u,t,o))}(function(u){function t(o){M={},e("",o||{})}function e(o,c){if(o==="*")t(c);else{const b=M[o]||p;M[o]={provider:c.provider||b.provider,minimalSeverity:c.minimalSeverity||b.minimalSeverity,logDateTime:c.logDateTime===void 0?b.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?b.logSourceLocation:c.logSourceLocation}}}u.verbose=function(o,c){u("verbose",o,c)},u.info=function(o,c){u("info",o,c)},u.warning=function(o,c){u("warning",o,c)},u.error=function(o,c){u("error",o,c)},u.fatal=function(o,c){u("fatal",o,c)},u.reset=t,u.set=e,u.setWithEnv=function(o){const c={};o.logLevel&&(c.minimalSeverity=o.logLevel),e("",c)}})(d||(d={})),S.Logger=d;class x{constructor(t,e,o,c,b,A){this.category=t,this.name=e,this.startTime=o,this.endCallback=c,this.timer=b,this.ctx=A}end(){return this.endCallback(this)}checkTimer(){return Ga(this,null,function*(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)})}}class v{constructor(t,e,o,c){this.category=t,this.name=e,this.startTime=o,this.endTime=c}}S.Profiler=class{static create(u){return u===void 0?new this:new this(u.maxNumberEvents,u.flushBatchSize,u.flushIntervalInMilliseconds)}constructor(u,t,e){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=u===void 0?1e4:u,this._flushBatchSize=t===void 0?10:t,this._flushIntervalInMilliseconds=e===void 0?5e3:e}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,S.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(u,t,e,o){const c=this._started?this.begin(u,t,o):void 0;let b=!1;const A=e();if(A&&typeof A.then=="function")return b=!0,new Promise((w,D)=>{A.then(F=>Ga(this,null,function*(){c&&(yield c.end()),w(F)}),F=>Ga(this,null,function*(){c&&(yield c.end()),D(F)}))});if(!b&&c){const w=c.end();if(w&&typeof w.then=="function")return new Promise((D,F)=>{w.then(()=>{D(A)},Z=>{F(Z)})})}return A}begin(u,t,e){if(!this._started)throw new Error("profiler is not started yet");if(e===void 0){const o=(0,S.now)();return this.flush(o),new x(u,t,o,c=>this.endSync(c))}{const o=e.beginTimer();return new x(u,t,0,c=>Ga(this,null,function*(){return this.end(c)}),o,e)}}end(u){return Ga(this,null,function*(){const t=yield u.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(u.category,u.name,u.startTime,t)),this.flush(t))})}endSync(u){const t=(0,S.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(u.category,u.name,u.startTime,t)),this.flush(t))}logOneEvent(u){S.Logger.verbose(`Profiler.${u.category}`,`${(u.endTime-u.startTime).toFixed(2)}ms on event '${u.name}' at ${u.endTime.toFixed(2)}`)}flush(u){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||u-this._flushTime>=this._flushIntervalInMilliseconds){for(const t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,S.now)()}}get started(){return this._started}},S.now=typeof performance!="undefined"&&performance.now?()=>performance.now():Date.now},2644:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Model=void 0;const E=y(5686),p=y(1446),M=y(7070),d=y(9395),g=y(2517);var x=d.onnxruntime.experimental.fbs;S.Model=class{constructor(){}load(v,u,t){if(!t)try{return void this.loadFromOnnxFormat(v,u)}catch(e){if(t!==void 0)throw e}this.loadFromOrtFormat(v,u)}loadFromOnnxFormat(v,u){const t=p.onnx.ModelProto.decode(v);if(g.LongUtil.longToNumber(t.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=t.opsetImport.map(e=>({domain:e.domain,version:g.LongUtil.longToNumber(e.version)})),this._graph=M.Graph.from(t.graph,u)}loadFromOrtFormat(v,u){const t=new E.flatbuffers.ByteBuffer(v),e=x.InferenceSession.getRootAsInferenceSession(t).model();if(g.LongUtil.longToNumber(e.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let o=0;o<e.opsetImportLength();o++){const c=e.opsetImport(o);this._opsets.push({domain:c==null?void 0:c.domain(),version:g.LongUtil.longToNumber(c.version())})}this._graph=M.Graph.from(e.graph(),u)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.FLOAT_TYPES=S.INT_TYPES=S.NUMBER_TYPES=void 0,S.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],S.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],S.FLOAT_TYPES=["float32","float64"]},1047:(Ie,S)=>{"use strict";function y(E,p){if(p.endsWith("+")){const M=Number.parseInt(p.substring(0,p.length-1),10);return!isNaN(M)&&M<=E}if(p.split("-").length===2){const M=p.split("-"),d=Number.parseInt(M[0],10),g=Number.parseInt(M[1],10);return!isNaN(d)&&!isNaN(g)&&d<=E&&E<=g}return Number.parseInt(p,10)===E}Object.defineProperty(S,"__esModule",{value:!0}),S.resolveOperator=void 0,S.resolveOperator=function(E,p,M){for(const d of M){const g=d[0],x=d[1],v=d[2],u=d[3],t=d[4];if(E.opType===g){for(const e of p)if((e.domain===x||e.domain==="ai.onnx"&&x==="")&&y(e.version,v))return{opImpl:u,opInit:t}}}throw new TypeError(`cannot resolve operator '${E.opType}' with opsets: ${p.map(d=>`${d.domain||"ai.onnx"} v${d.version}`).join(", ")}`)}},9395:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.onnxruntime=void 0;const E=y(5686);var p,M;p=S.onnxruntime||(S.onnxruntime={}),function(d){let g;(function(x){x[x.UNDEFINED=0]="UNDEFINED",x[x.FLOAT=1]="FLOAT",x[x.INT=2]="INT",x[x.STRING=3]="STRING",x[x.TENSOR=4]="TENSOR",x[x.GRAPH=5]="GRAPH",x[x.FLOATS=6]="FLOATS",x[x.INTS=7]="INTS",x[x.STRINGS=8]="STRINGS",x[x.TENSORS=9]="TENSORS",x[x.GRAPHS=10]="GRAPHS",x[x.SPARSE_TENSOR=11]="SPARSE_TENSOR",x[x.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(g=d.AttributeType||(d.AttributeType={}))}((M=p.experimental||(p.experimental={})).fbs||(M.fbs={})),function(d){(function(g){(function(x){let v;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.VALUE=1]="VALUE",u[u.PARAM=2]="PARAM"})(v=x.DimensionValueType||(x.DimensionValueType={}))})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){let v;(function(u){u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.UINT8=2]="UINT8",u[u.INT8=3]="INT8",u[u.UINT16=4]="UINT16",u[u.INT16=5]="INT16",u[u.INT32=6]="INT32",u[u.INT64=7]="INT64",u[u.STRING=8]="STRING",u[u.BOOL=9]="BOOL",u[u.FLOAT16=10]="FLOAT16",u[u.DOUBLE=11]="DOUBLE",u[u.UINT32=12]="UINT32",u[u.UINT64=13]="UINT64",u[u.COMPLEX64=14]="COMPLEX64",u[u.COMPLEX128=15]="COMPLEX128",u[u.BFLOAT16=16]="BFLOAT16"})(v=x.TensorDataType||(x.TensorDataType={}))})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){let v;(function(u){u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"})(v=x.NodeType||(x.NodeType={}))})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){let v;(function(u){u[u.NONE=0]="NONE",u[u.tensor_type=1]="tensor_type",u[u.sequence_type=2]="sequence_type",u[u.map_type=3]="map_type"})(v=x.TypeInfoValue||(x.TypeInfoValue={}))})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsShape(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsShape(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}dim(t,e){let o=this.bb.__offset(this.bb_pos,4);return o?(e||new d.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}dimLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startShape(t){t.startObject(1)}static addDim(t,e){t.addFieldOffset(0,e,0)}static createDimVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startDimVector(t,e){t.startVector(4,e,4)}static endShape(t){return t.endObject()}static createShape(t,e){return v.startShape(t),v.addDim(t,e),v.endShape(t)}}x.Shape=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimension(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimension(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}value(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new d.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}denotation(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimension(t){t.startObject(2)}static addValue(t,e){t.addFieldOffset(0,e,0)}static addDenotation(t,e){t.addFieldOffset(1,e,0)}static endDimension(t){return t.endObject()}static createDimension(t,e,o){return v.startDimension(t),v.addValue(t,e),v.addDenotation(t,o),v.endDimension(t)}}x.Dimension=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimensionValue(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimensionValue(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}dimType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):d.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}dimParam(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimensionValue(t){t.startObject(3)}static addDimType(t,e){t.addFieldInt8(0,e,d.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static addDimParam(t,e){t.addFieldOffset(2,e,0)}static endDimensionValue(t){return t.endObject()}static createDimensionValue(t,e,o,c){return v.startDimensionValue(t),v.addDimType(t,e),v.addDimValue(t,o),v.addDimParam(t,c),v.endDimensionValue(t)}}x.DimensionValue=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensorTypeAndShape(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensorTypeAndShape(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}elemType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):d.experimental.fbs.TensorDataType.UNDEFINED}shape(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new d.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startTensorTypeAndShape(t){t.startObject(2)}static addElemType(t,e){t.addFieldInt32(0,e,d.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(t,e){t.addFieldOffset(1,e,0)}static endTensorTypeAndShape(t){return t.endObject()}static createTensorTypeAndShape(t,e,o){return v.startTensorTypeAndShape(t),v.addElemType(t,e),v.addShape(t,o),v.endTensorTypeAndShape(t)}}x.TensorTypeAndShape=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapType(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapType(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}keyType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):d.experimental.fbs.TensorDataType.UNDEFINED}valueType(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startMapType(t){t.startObject(2)}static addKeyType(t,e){t.addFieldInt32(0,e,d.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(t,e){t.addFieldOffset(1,e,0)}static endMapType(t){return t.endObject()}static createMapType(t,e,o){return v.startMapType(t),v.addKeyType(t,e),v.addValueType(t,o),v.endMapType(t)}}x.MapType=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSequenceType(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSequenceType(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}elemType(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startSequenceType(t){t.startObject(1)}static addElemType(t,e){t.addFieldOffset(0,e,0)}static endSequenceType(t){return t.endObject()}static createSequenceType(t,e){return v.startSequenceType(t),v.addElemType(t,e),v.endSequenceType(t)}}x.SequenceType=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(g.fbs||(g.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(x,v){return this.bb_pos=x,this.bb=v,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(x,v,u,t){return x.prep(4,12),x.writeInt32(t),x.writeInt32(u),x.writeInt32(v),x.offset()}}})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodeEdge(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNodeEdge(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}inputEdges(t,e){let o=this.bb.__offset(this.bb_pos,6);return o?(e||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+12*t,this.bb):null}inputEdgesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}outputEdges(t,e){let o=this.bb.__offset(this.bb_pos,8);return o?(e||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+12*t,this.bb):null}outputEdgesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNodeEdge(t){t.startObject(3)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addInputEdges(t,e){t.addFieldOffset(1,e,0)}static startInputEdgesVector(t,e){t.startVector(12,e,4)}static addOutputEdges(t,e){t.addFieldOffset(2,e,0)}static startOutputEdgesVector(t,e){t.startVector(12,e,4)}static endNodeEdge(t){return t.endObject()}static createNodeEdge(t,e,o,c){return v.startNodeEdge(t),v.addNodeIndex(t,e),v.addInputEdges(t,o),v.addOutputEdges(t,c),v.endNodeEdge(t)}}x.NodeEdge=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNode(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNode(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}sinceVersion(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}index(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0}opType(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):d.experimental.fbs.NodeType.Primitive}executionProviderType(t){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}inputs(t,e){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(t,e){let o=this.bb.__offset(this.bb_pos,24);return o?(e||new d.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}attributesLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCounts(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}inputArgCountsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCountsArray(){let t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}implicitInputs(t,e){let o=this.bb.__offset(this.bb_pos,28);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}implicitInputsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNode(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDomain(t,e){t.addFieldOffset(2,e,0)}static addSinceVersion(t,e){t.addFieldInt32(3,e,0)}static addIndex(t,e){t.addFieldInt32(4,e,0)}static addOpType(t,e){t.addFieldOffset(5,e,0)}static addType(t,e){t.addFieldInt32(6,e,d.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(t,e){t.addFieldOffset(7,e,0)}static addInputs(t,e){t.addFieldOffset(8,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(9,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(10,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addInputArgCounts(t,e){t.addFieldOffset(11,e,0)}static createInputArgCountsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addInt32(e[o]);return t.endVector()}static startInputArgCountsVector(t,e){t.startVector(4,e,4)}static addImplicitInputs(t,e){t.addFieldOffset(12,e,0)}static createImplicitInputsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startImplicitInputsVector(t,e){t.startVector(4,e,4)}static endNode(t){return t.endObject()}static createNode(t,e,o,c,b,A,w,D,F,Z,L,W,k,de){return v.startNode(t),v.addName(t,e),v.addDocString(t,o),v.addDomain(t,c),v.addSinceVersion(t,b),v.addIndex(t,A),v.addOpType(t,w),v.addType(t,D),v.addExecutionProviderType(t,F),v.addInputs(t,Z),v.addOutputs(t,L),v.addAttributes(t,W),v.addInputArgCounts(t,k),v.addImplicitInputs(t,de),v.endNode(t)}}x.Node=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsValueInfo(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsValueInfo(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(t){let e=this.bb.__offset(this.bb_pos,8);return e?(t||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startValueInfo(t){t.startObject(3)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldOffset(2,e,0)}static endValueInfo(t){return t.endObject()}static createValueInfo(t,e,o,c){return v.startValueInfo(t),v.addName(t,e),v.addDocString(t,o),v.addType(t,c),v.endValueInfo(t)}}x.ValueInfo=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTypeInfo(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTypeInfo(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}denotation(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}valueType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):d.experimental.fbs.TypeInfoValue.NONE}value(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}static startTypeInfo(t){t.startObject(3)}static addDenotation(t,e){t.addFieldOffset(0,e,0)}static addValueType(t,e){t.addFieldInt8(1,e,d.experimental.fbs.TypeInfoValue.NONE)}static addValue(t,e){t.addFieldOffset(2,e,0)}static endTypeInfo(t){return t.endObject()}static createTypeInfo(t,e,o,c){return v.startTypeInfo(t),v.addDenotation(t,e),v.addValueType(t,o),v.addValue(t,c),v.endTypeInfo(t)}}x.TypeInfo=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOperatorSetId(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOperatorSetId(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}domain(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}version(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}static startOperatorSetId(t){t.startObject(2)}static addDomain(t,e){t.addFieldOffset(0,e,0)}static addVersion(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static endOperatorSetId(t){return t.endObject()}static createOperatorSetId(t,e,o){return v.startOperatorSetId(t),v.addDomain(t,e),v.addVersion(t,o),v.endOperatorSetId(t)}}x.OperatorSetId=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensor(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensor(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}dataType(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):d.experimental.fbs.TensorDataType.UNDEFINED}rawData(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}rawDataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}rawDataArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringData(t,e){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}stringDataLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startTensor(t){t.startObject(6)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let o=e.length-1;o>=0;o--)t.addInt64(e[o]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static addDataType(t,e){t.addFieldInt32(3,e,d.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(t,e){t.addFieldOffset(4,e,0)}static createRawDataVector(t,e){t.startVector(1,e.length,1);for(let o=e.length-1;o>=0;o--)t.addInt8(e[o]);return t.endVector()}static startRawDataVector(t,e){t.startVector(1,e,1)}static addStringData(t,e){t.addFieldOffset(5,e,0)}static createStringDataVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startStringDataVector(t,e){t.startVector(4,e,4)}static endTensor(t){return t.endObject()}static createTensor(t,e,o,c,b,A,w){return v.startTensor(t),v.addName(t,e),v.addDocString(t,o),v.addDims(t,c),v.addDataType(t,b),v.addRawData(t,A),v.addStringData(t,w),v.endTensor(t)}}x.Tensor=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSparseTensor(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSparseTensor(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}values(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}indices(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSparseTensor(t){t.startObject(3)}static addValues(t,e){t.addFieldOffset(0,e,0)}static addIndices(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let o=e.length-1;o>=0;o--)t.addInt64(e[o]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static endSparseTensor(t){return t.endObject()}static createSparseTensor(t,e,o,c){return v.startSparseTensor(t),v.addValues(t,e),v.addIndices(t,o),v.addDims(t,c),v.endSparseTensor(t)}}x.SparseTensor=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAttribute(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAttribute(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):d.experimental.fbs.AttributeType.UNDEFINED}f(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0}i(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}s(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}t(t){let e=this.bb.__offset(this.bb_pos,16);return e?(t||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}g(t){let e=this.bb.__offset(this.bb_pos,18);return e?(t||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}floats(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0}floatsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}floatsArray(){let t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ints(t){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}intsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}strings(t,e){let o=this.bb.__offset(this.bb_pos,24);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}stringsLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}tensors(t,e){let o=this.bb.__offset(this.bb_pos,26);return o?(e||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}tensorsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}graphs(t,e){let o=this.bb.__offset(this.bb_pos,28);return o?(e||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}graphsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startAttribute(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldInt32(2,e,d.experimental.fbs.AttributeType.UNDEFINED)}static addF(t,e){t.addFieldFloat32(3,e,0)}static addI(t,e){t.addFieldInt64(4,e,t.createLong(0,0))}static addS(t,e){t.addFieldOffset(5,e,0)}static addT(t,e){t.addFieldOffset(6,e,0)}static addG(t,e){t.addFieldOffset(7,e,0)}static addFloats(t,e){t.addFieldOffset(8,e,0)}static createFloatsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addFloat32(e[o]);return t.endVector()}static startFloatsVector(t,e){t.startVector(4,e,4)}static addInts(t,e){t.addFieldOffset(9,e,0)}static createIntsVector(t,e){t.startVector(8,e.length,8);for(let o=e.length-1;o>=0;o--)t.addInt64(e[o]);return t.endVector()}static startIntsVector(t,e){t.startVector(8,e,8)}static addStrings(t,e){t.addFieldOffset(10,e,0)}static createStringsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startStringsVector(t,e){t.startVector(4,e,4)}static addTensors(t,e){t.addFieldOffset(11,e,0)}static createTensorsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startTensorsVector(t,e){t.startVector(4,e,4)}static addGraphs(t,e){t.addFieldOffset(12,e,0)}static createGraphsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startGraphsVector(t,e){t.startVector(4,e,4)}static endAttribute(t){return t.endObject()}static createAttribute(t,e,o,c,b,A,w,D,F,Z,L,W,k,de){return v.startAttribute(t),v.addName(t,e),v.addDocString(t,o),v.addType(t,c),v.addF(t,b),v.addI(t,A),v.addS(t,w),v.addT(t,D),v.addG(t,F),v.addFloats(t,Z),v.addInts(t,L),v.addStrings(t,W),v.addTensors(t,k),v.addGraphs(t,de),v.endAttribute(t)}}x.Attribute=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraph(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraph(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}initializers(t,e){let o=this.bb.__offset(this.bb_pos,4);return o?(e||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}initializersLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeArgs(t,e){let o=this.bb.__offset(this.bb_pos,6);return o?(e||new d.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodeArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nodes(t,e){let o=this.bb.__offset(this.bb_pos,8);return o?(e||new d.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}maxNodeIndex(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0}nodeEdges(t,e){let o=this.bb.__offset(this.bb_pos,12);return o?(e||new d.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}nodeEdgesLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}inputs(t,e){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}sparseInitializers(t,e){let o=this.bb.__offset(this.bb_pos,18);return o?(e||new d.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}sparseInitializersLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraph(t){t.startObject(8)}static addInitializers(t,e){t.addFieldOffset(0,e,0)}static createInitializersVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startInitializersVector(t,e){t.startVector(4,e,4)}static addNodeArgs(t,e){t.addFieldOffset(1,e,0)}static createNodeArgsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startNodeArgsVector(t,e){t.startVector(4,e,4)}static addNodes(t,e){t.addFieldOffset(2,e,0)}static createNodesVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startNodesVector(t,e){t.startVector(4,e,4)}static addMaxNodeIndex(t,e){t.addFieldInt32(3,e,0)}static addNodeEdges(t,e){t.addFieldOffset(4,e,0)}static createNodeEdgesVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startNodeEdgesVector(t,e){t.startVector(4,e,4)}static addInputs(t,e){t.addFieldOffset(5,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(6,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addSparseInitializers(t,e){t.addFieldOffset(7,e,0)}static createSparseInitializersVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startSparseInitializersVector(t,e){t.startVector(4,e,4)}static endGraph(t){return t.endObject()}static createGraph(t,e,o,c,b,A,w,D,F){return v.startGraph(t),v.addInitializers(t,e),v.addNodeArgs(t,o),v.addNodes(t,c),v.addMaxNodeIndex(t,b),v.addNodeEdges(t,A),v.addInputs(t,w),v.addOutputs(t,D),v.addSparseInitializers(t,F),v.endGraph(t)}}x.Graph=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}irVersion(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}opsetImport(t,e){let o=this.bb.__offset(this.bb_pos,6);return o?(e||new d.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}opsetImportLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}producerName(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}producerVersion(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}modelVersion(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}docString(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}graph(t){let e=this.bb.__offset(this.bb_pos,18);return e?(t||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}graphDocString(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}static startModel(t){t.startObject(9)}static addIrVersion(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addOpsetImport(t,e){t.addFieldOffset(1,e,0)}static createOpsetImportVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startOpsetImportVector(t,e){t.startVector(4,e,4)}static addProducerName(t,e){t.addFieldOffset(2,e,0)}static addProducerVersion(t,e){t.addFieldOffset(3,e,0)}static addDomain(t,e){t.addFieldOffset(4,e,0)}static addModelVersion(t,e){t.addFieldInt64(5,e,t.createLong(0,0))}static addDocString(t,e){t.addFieldOffset(6,e,0)}static addGraph(t,e){t.addFieldOffset(7,e,0)}static addGraphDocString(t,e){t.addFieldOffset(8,e,0)}static endModel(t){return t.endObject()}static createModel(t,e,o,c,b,A,w,D,F,Z){return v.startModel(t),v.addIrVersion(t,e),v.addOpsetImport(t,o),v.addProducerName(t,c),v.addProducerVersion(t,b),v.addDomain(t,A),v.addModelVersion(t,w),v.addDocString(t,D),v.addGraph(t,F),v.addGraphDocString(t,Z),v.endModel(t)}}x.Model=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelCreateInfos(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKernelCreateInfos(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}kernelDefHashes(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}kernelDefHashesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelCreateInfos(t){t.startObject(2)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addInt32(e[o]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addKernelDefHashes(t,e){t.addFieldOffset(1,e,0)}static createKernelDefHashesVector(t,e){t.startVector(8,e.length,8);for(let o=e.length-1;o>=0;o--)t.addInt64(e[o]);return t.endVector()}static startKernelDefHashesVector(t,e){t.startVector(8,e,8)}static endKernelCreateInfos(t){return t.endObject()}static createKernelCreateInfos(t,e,o){return v.startKernelCreateInfos(t),v.addNodeIndices(t,e),v.addKernelDefHashes(t,o),v.endKernelCreateInfos(t)}}x.KernelCreateInfos=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSubGraphSessionState(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSubGraphSessionState(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}graphId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sessionState(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startSubGraphSessionState(t){t.startObject(2)}static addGraphId(t,e){t.addFieldOffset(0,e,0)}static addSessionState(t,e){t.addFieldOffset(1,e,0)}static endSubGraphSessionState(t){let e=t.endObject();return t.requiredField(e,4),e}static createSubGraphSessionState(t,e,o){return v.startSubGraphSessionState(t),v.addGraphId(t,e),v.addSessionState(t,o),v.endSubGraphSessionState(t)}}x.SubGraphSessionState=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSessionState(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSessionState(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}kernels(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new d.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}subGraphSessionStates(t,e){let o=this.bb.__offset(this.bb_pos,6);return o?(e||new d.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*t),this.bb):null}subGraphSessionStatesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSessionState(t){t.startObject(2)}static addKernels(t,e){t.addFieldOffset(0,e,0)}static addSubGraphSessionStates(t,e){t.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(t,e){t.startVector(4,e.length,4);for(let o=e.length-1;o>=0;o--)t.addOffset(e[o]);return t.endVector()}static startSubGraphSessionStatesVector(t,e){t.startVector(4,e,4)}static endSessionState(t){return t.endObject()}static createSessionState(t,e,o){return v.startSessionState(t),v.addKernels(t,e),v.addSubGraphSessionStates(t,o),v.endSessionState(t)}}x.SessionState=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={})),function(d){(function(g){(function(x){class v{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInferenceSession(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInferenceSession(t,e){return t.setPosition(t.position()+E.flatbuffers.SIZE_PREFIX_LENGTH),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("ORTM")}ortVersion(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}model(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new d.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}sessionState(t){let e=this.bb.__offset(this.bb_pos,8);return e?(t||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startInferenceSession(t){t.startObject(3)}static addOrtVersion(t,e){t.addFieldOffset(0,e,0)}static addModel(t,e){t.addFieldOffset(1,e,0)}static addSessionState(t,e){t.addFieldOffset(2,e,0)}static endInferenceSession(t){return t.endObject()}static finishInferenceSessionBuffer(t,e){t.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(t,e){t.finish(e,"ORTM",!0)}static createInferenceSession(t,e,o,c){return v.startInferenceSession(t),v.addOrtVersion(t,e),v.addModel(t,o),v.addSessionState(t,c),v.endInferenceSession(t)}}x.InferenceSession=v})(g.fbs||(g.fbs={}))})(d.experimental||(d.experimental={}))}(S.onnxruntime||(S.onnxruntime={}))},7448:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OnnxjsSessionHandler=void 0;const E=y(1670),p=y(9162);S.OnnxjsSessionHandler=class{constructor(M){this.session=M,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return Ga(this,null,function*(){})}run(M,d,g){return Ga(this,null,function*(){const x=new Map;for(const t in M)if(Object.hasOwnProperty.call(M,t)){const e=M[t];x.set(t,new p.Tensor(e.dims,e.type,void 0,void 0,e.data))}const v=yield this.session.run(x),u={};return v.forEach((t,e)=>{u[e]=new E.Tensor(t.type,t.data,t.dims)}),u})}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Session=void 0;const E=y(7067),p=y(1296),M=y(7091),d=y(1036),g=y(6231),x=y(2644);S.Session=class{constructor(v={}){this._initialized=!1,this.backendHint=v.backendHint,this.profiler=g.Profiler.create(v.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(v,u,t){return Ga(this,null,function*(){yield this.profiler.event("session","Session.loadModel",()=>Ga(this,null,function*(){const e=yield(0,M.resolveBackend)(this.backendHint);if(this.sessionHandler=e.createSessionHandler(this.context),this._model=new x.Model,typeof v=="string"){const o=v.endsWith(".ort");if(typeof fetch=="undefined"){const c=yield(0,p.promisify)(E.readFile)(v);this.initialize(c,o)}else{const c=yield fetch(v),b=yield c.arrayBuffer();this.initialize(new Uint8Array(b),o)}}else if(ArrayBuffer.isView(v))this.initialize(v);else{const o=new Uint8Array(v,u||0,t||v.byteLength);this.initialize(o)}}))})}initialize(v,u){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const t=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(v,t,u),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new d.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(v){return Ga(this,null,function*(){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",()=>Ga(this,null,function*(){const u=this.normalizeAndValidateInputs(v),t=yield this._executionPlan.execute(this.sessionHandler,u);return this.createOutput(t)}))})}normalizeAndValidateInputs(v){const u=this._model.graph.getInputNames();if(Array.isArray(v)){if(v.length!==u.length)throw new Error(`incorrect input array length: expected ${u.length} but got ${v.length}`)}else{if(v.size!==u.length)throw new Error(`incorrect input map size: expected ${u.length} but got ${v.size}`);const t=new Array(v.size);let e=0;for(let o=0;o<u.length;++o){const c=v.get(u[o]);if(!c)throw new Error(`missing input tensor for: '${name}'`);t[e++]=c}v=t}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,v,!1);else{const t=this._model.graph.getInputIndices(),e=this._model.graph.getValues(),o=new Array(t.length);for(let c=0;c<t.length;++c){const b=e[t[c]];o[c]=b.type.shape.dims,this.context.graphInputTypes.push(b.type.tensorType),this.context.graphInputDims.push(v[c].dims)}this.validateInputTensorDims(o,v,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,v),v}validateInputTensorTypes(v,u){for(let t=0;t<u.length;t++){const e=v[t],o=u[t].type;if(e!==o)throw new Error(`input tensor[${t}] check failed: expected type '${e}' but got ${o}`)}}validateInputTensorDims(v,u,t){for(let e=0;e<u.length;e++){const o=v[e],c=u[e].dims;if(!this.compareTensorDims(o,c,t))throw new Error(`input tensor[${e}] check failed: expected shape '[${o.join(",")}]' but got [${c.join(",")}]`)}}compareTensorDims(v,u,t){if(v.length!==u.length)return!1;for(let e=0;e<v.length;++e)if(v[e]!==u[e]&&(!t||v[e]!==0))return!1;return!0}createOutput(v){const u=this._model.graph.getOutputNames();if(v.length!==u.length)throw new Error("expected number of outputs do not match number of generated outputs");const t=new Map;for(let e=0;e<u.length;++e)t.set(u[e],v[e]);return t}initializeOps(v){const u=v.getNodes();this._ops=new Array(u.length);for(let t=0;t<u.length;t++)this._ops[t]=this.sessionHandler.resolve(u[t],this._model.opsets,v)}}},9162:function(Ie,S,y){"use strict";var E=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(S,"__esModule",{value:!0}),S.Tensor=void 0;const p=y(3442),M=E(y(3720)),d=y(1446),g=y(9395),x=y(2517);var v=g.onnxruntime.experimental.fbs;class u{get data(){if(this.cache===void 0){const A=this.dataProvider(this.dataId);if(A.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=A}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(A){return this.data[x.ShapeUtil.indicesToOffset(A,this.strides)]}set(A,w){this.data[x.ShapeUtil.indicesToOffset(A,this.strides)]=w}getData(){return Ga(this,null,function*(){return this.cache===void 0&&(this.cache=yield this.asyncDataProvider(this.dataId)),this.cache})}get strides(){return this._strides||(this._strides=x.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(A,w,D,F,Z,L=p.Guid.create()){this.dims=A,this.type=w,this.dataProvider=D,this.asyncDataProvider=F,this.cache=Z,this.dataId=L,this.size=x.ShapeUtil.validateDimsAndCalcSize(A);const W=this.size,k=D===void 0&&F===void 0&&Z===void 0;if(Z!==void 0&&Z.length!==W)throw new RangeError("Input dims doesn't match data length.");if(w==="string"){if(!(Z===void 0||Array.isArray(Z)&&Z.every(de=>typeof de=="string")))throw new TypeError("cache should be a string array");k&&(this.cache=new Array(W))}else{if(Z!==void 0){const de=e(w);if(!(Z instanceof de))throw new TypeError(`cache should be type ${de.name}`)}if(k){const de=new ArrayBuffer(W*function(H){switch(H){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${H}`)}}(w));this.cache=function(H,ue){return new(e(ue))(H)}(de,w)}}}static fromProto(A){if(!A)throw new Error("cannot construct Value from an empty tensor");const w=x.ProtoUtil.tensorDataTypeFromProto(A.dataType),D=x.ProtoUtil.tensorDimsFromProto(A.dims),F=new u(D,w);if(w==="string")A.stringData.forEach((Z,L)=>{F.data[L]=(0,x.decodeUtf8String)(Z)});else if(A.rawData&&typeof A.rawData.byteLength=="number"&&A.rawData.byteLength>0){const Z=F.data,L=new DataView(A.rawData.buffer,A.rawData.byteOffset,A.rawData.byteLength),W=t(A.dataType),k=A.rawData.byteLength/W;if(A.rawData.byteLength%W!=0)throw new Error("invalid buffer length");if(Z.length!==k)throw new Error("buffer length mismatch");for(let de=0;de<k;de++){const H=c(L,A.dataType,de*W);Z[de]=H}}else{let Z;switch(A.dataType){case d.onnx.TensorProto.DataType.FLOAT:Z=A.floatData;break;case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.INT16:case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.BOOL:Z=A.int32Data;break;case d.onnx.TensorProto.DataType.INT64:Z=A.int64Data;break;case d.onnx.TensorProto.DataType.DOUBLE:Z=A.doubleData;break;case d.onnx.TensorProto.DataType.UINT32:case d.onnx.TensorProto.DataType.UINT64:Z=A.uint64Data;break;default:throw new Error("unspecific error")}if(Z==null)throw new Error("failed to populate data from a tensorproto value");const L=F.data;if(L.length!==Z.length)throw new Error("array length mismatch");for(let W=0;W<Z.length;W++){const k=Z[W];M.default.isLong(k)?L[W]=o(k,A.dataType):L[W]=k}}return F}static fromData(A,w,D){return new u(w,D,void 0,void 0,A)}static fromOrtTensor(A){if(!A)throw new Error("cannot construct Value from an empty tensor");const w=x.ProtoUtil.tensorDimsFromORTFormat(A),D=x.ProtoUtil.tensorDataTypeFromProto(A.dataType()),F=new u(w,D);if(D==="string")for(let Z=0;Z<A.stringDataLength();Z++)F.data[Z]=A.stringData(Z);else if(A.rawDataArray()&&typeof A.rawDataLength()=="number"&&A.rawDataLength()>0){const Z=F.data,L=new DataView(A.rawDataArray().buffer,A.rawDataArray().byteOffset,A.rawDataLength()),W=t(A.dataType()),k=A.rawDataLength()/W;if(A.rawDataLength()%W!=0)throw new Error("invalid buffer length");if(Z.length!==k)throw new Error("buffer length mismatch");for(let de=0;de<k;de++){const H=c(L,A.dataType(),de*W);Z[de]=H}}return F}}function t(b){switch(b){case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.BOOL:return 1;case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT16:return 2;case d.onnx.TensorProto.DataType.FLOAT:case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.UINT32:return 4;case d.onnx.TensorProto.DataType.INT64:case d.onnx.TensorProto.DataType.DOUBLE:case d.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${d.onnx.TensorProto.DataType[b]}`)}}function e(b){switch(b){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function o(b,A){if(A===d.onnx.TensorProto.DataType.INT64||A===v.TensorDataType.INT64){if(b.greaterThanOrEqual(2147483648)||b.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(A!==d.onnx.TensorProto.DataType.UINT32&&A!==v.TensorDataType.UINT32&&A!==d.onnx.TensorProto.DataType.UINT64&&A!==v.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${d.onnx.TensorProto.DataType[A]}`);if(b.greaterThanOrEqual(4294967296)||b.lessThan(0))throw new TypeError("uint64 is not supported")}return b.toNumber()}function c(b,A,w){switch(A){case d.onnx.TensorProto.DataType.BOOL:case d.onnx.TensorProto.DataType.UINT8:return b.getUint8(w);case d.onnx.TensorProto.DataType.INT8:return b.getInt8(w);case d.onnx.TensorProto.DataType.UINT16:return b.getUint16(w,!0);case d.onnx.TensorProto.DataType.INT16:return b.getInt16(w,!0);case d.onnx.TensorProto.DataType.FLOAT:return b.getFloat32(w,!0);case d.onnx.TensorProto.DataType.INT32:return b.getInt32(w,!0);case d.onnx.TensorProto.DataType.UINT32:return b.getUint32(w,!0);case d.onnx.TensorProto.DataType.INT64:return o(M.default.fromBits(b.getUint32(w,!0),b.getUint32(w+4,!0),!1),A);case d.onnx.TensorProto.DataType.DOUBLE:return b.getFloat64(w,!0);case d.onnx.TensorProto.DataType.UINT64:return o(M.default.fromBits(b.getUint32(w,!0),b.getUint32(w+4,!0),!0),A);default:throw new Error(`cannot read from DataView for type ${d.onnx.TensorProto.DataType[A]}`)}}S.Tensor=u},2517:function(Ie,S,y){"use strict";var E=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(S,"__esModule",{value:!0}),S.decodeUtf8String=S.MAX_CLIP=S.MIN_CLIP=S.PoolConvUtil=S.ReduceUtil=S.SplitUtil=S.MathUtil=S.ShapeUtil=S.LongUtil=S.ProtoUtil=S.GemmUtil=S.arrayCopyHelper=S.BroadcastUtil=S.MatMulUtil=S.ArrayUtil=S.assert=S.checkInputsShape=void 0;const p=y(5686),M=E(y(3720)),d=y(1446),g=y(9162);S.checkInputsShape=function(A,...w){if(!A||A.length!==w.length)return!1;for(let D=0;D<A.length;D++)if(!A[D].dims||A[D].dims.length!==w[D])return!1;return!0},S.assert=function(A,w){if(!A)throw new Error(typeof w=="string"?w:w())},S.ArrayUtil=class{static arraysEqual(A,w){if(A.length!==w.length)return!1;for(let D=0;D<A.length;D++)if(A[D]!==w[D])return!1;return!0}};class x{static preprocessInputShapes(w,D){return[w.length===1?[1,w[0]]:w,D.length===1?[D[0],1]:D]}static postprocessOutputShape(w,D,F){D===1&&w.splice(w.length-2,1),F===1&&w.pop()}static calcMatMulShape(w,D){return w[1]!==D[0]?void 0:[w[0],D[1]]}}S.MatMulUtil=x;class v{static calcShape(w,D,F=!1){const Z=w.length,L=D.length;if(Z===0)return D;if(L===0)return w;const W=Math.max(w.length,D.length),k=new Array(W);if(F){if(Z<2||L<2)return;const de=x.calcMatMulShape([w[Z-2],w[Z-1]],[D[L-2],D[L-1]]);if(de===void 0)return;[k[W-2],k[W-1]]=de}for(let de=F?3:1;de<=W;de++){const H=Z-de<0?1:w[Z-de],ue=L-de<0?1:D[L-de];if(H!==ue&&H>1&&ue>1)return;k[W-de]=Math.max(H,ue)}return k}static index(w,D){const F=new Array(D.length);return v.fillIndex(w,D,F),F}static fillIndex(w,D,F){const Z=w.length-D.length;for(let L=0;L<D.length;L++)F[L]=w[Z+L]%D[L]}static calc(w,D,F,Z,L){const W=v.calcShape(w.dims,D.dims);if(W){if(Z&&!e.areEqual(W,w.dims))return;const k=e.size(W),de=Z?w:new g.Tensor(W,L||w.type);if(W.length===0)de.set([],F(w.get([]),D.get([])));else{const H=new Array(W.length),ue=new Array(w.dims.length),ve=new Array(D.dims.length);let ke,Ae=0,be=0,G=!1,ie=!1;w.dims.length===0&&(Ae=w.get([]),G=!0),D.dims.length===0&&(be=D.get([]),ie=!0);for(let V=0;V<k;V++){ke=V;for(let ae=W.length-1;ae>=0;ae--)H[ae]=ke%W[ae],ke=Math.floor(ke/W[ae]);G||(v.fillIndex(H,w.dims,ue),Ae=w.get(ue)),ie||(v.fillIndex(H,D.dims,ve),be=D.get(ve)),de.set(H,F(Ae,be))}}return de}}static isValidBroadcast(w,D){const F=w.length,Z=D.length;if(F>Z)return!1;for(let L=1;L<=F;L++)if(w[F-L]!==1&&w[F-L]!==D[Z-L])return!1;return!0}static getBroadcastDims(w,D){const F=w.length,Z=[];for(let L=0;L<F;L++){const W=F-1-L,k=w[W]||1;(D[D.length-1-L]||1)>1&&k===1&&Z.unshift(W)}return Z}}S.BroadcastUtil=v,S.arrayCopyHelper=function(A,w,D,F,Z){if(F<0||F>=w.length)throw new Error("sourceIndex out of bounds");if(D<0||D>=A.length)throw new Error("targetIndex out of bounds");if(F+Z>w.length)throw new Error("source indices to be copied are outside bounds");if(D+Z>A.length)throw new Error("target array is too small to hold result");for(let L=0;L<Z;L++)A[D+L]=w[F+L]},S.GemmUtil=class{static getShapeOfGemmResult(A,w,D,F,Z){if(A.length!==2||D.length!==2)throw new Error("shape need to be of size 2");let L,W,k;w?(L=A[1],W=A[0]):(L=A[0],W=A[1]);let de=-1;if(F?(k=D[0],de=1):(k=D[1],de=0),D[de]!==W)throw new Error("dimension mismatch");if(L<=0||k<=0||W<=0)throw new Error("invalid shape specified");if(Z&&!v.isValidBroadcast(Z,[L,k]))throw new Error("gemm: invalid bias shape for broadcast");return[L,k,W]}};class u{static tensorDataTypeFromProto(w){switch(w){case d.onnx.TensorProto.DataType.INT8:return"int8";case d.onnx.TensorProto.DataType.UINT8:return"uint8";case d.onnx.TensorProto.DataType.BOOL:return"bool";case d.onnx.TensorProto.DataType.INT16:return"int16";case d.onnx.TensorProto.DataType.UINT16:return"uint16";case d.onnx.TensorProto.DataType.INT32:return"int32";case d.onnx.TensorProto.DataType.UINT32:return"uint32";case d.onnx.TensorProto.DataType.FLOAT:return"float32";case d.onnx.TensorProto.DataType.DOUBLE:return"float64";case d.onnx.TensorProto.DataType.STRING:return"string";case d.onnx.TensorProto.DataType.INT64:return"int32";case d.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${d.onnx.TensorProto.DataType[w]}`)}}static tensorDataTypeStringToEnum(w){switch(w){case"int8":return d.onnx.TensorProto.DataType.INT8;case"uint8":return d.onnx.TensorProto.DataType.UINT8;case"bool":return d.onnx.TensorProto.DataType.BOOL;case"int16":return d.onnx.TensorProto.DataType.INT16;case"uint16":return d.onnx.TensorProto.DataType.UINT16;case"int32":return d.onnx.TensorProto.DataType.INT32;case"uint32":return d.onnx.TensorProto.DataType.UINT32;case"float32":return d.onnx.TensorProto.DataType.FLOAT;case"float64":return d.onnx.TensorProto.DataType.DOUBLE;case"string":return d.onnx.TensorProto.DataType.STRING;case"int64":return d.onnx.TensorProto.DataType.INT64;case"uint64":return d.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${w}`)}}static tensorDimsFromProto(w){return w.map(D=>M.default.isLong(D)?D.toNumber():D)}static tensorValueTypeFromProto(w){return{tensorType:u.tensorDataTypeFromProto(w.elemType),shape:{dims:u.tensorDimsFromProto(w.shape.dim.map(D=>D.dimValue))}}}static tensorDimsFromORTFormat(w){const D=[];for(let F=0;F<w.dimsLength();F++)D.push(t.longToNumber(w.dims(F)));return D}static tensorAttributesFromORTFormat(w){const D=[];for(let F=0;F<w.attributesLength();F++)D.push(w.attributes(F));return D}}S.ProtoUtil=u;class t{static longToNumber(w,D){return M.default.isLong(w)?w.toNumber():w instanceof p.flatbuffers.Long?M.default.fromValue({low:w.low,high:w.high,unsigned:D!=null&&D}).toNumber():w}static isLong(w){return M.default.isLong(w)||w instanceof p.flatbuffers.Long}}S.LongUtil=t;class e{static size(w){return e.getSizeFromDimensionRange(w,0,w.length)}static sizeFromDimension(w,D){if(D<0||D>w.length)throw new Error(`invalid dimension of ${D} for sizeFromDimension as Tensor has ${w.length} dimensions.`);return e.getSizeFromDimensionRange(w,D,w.length)}static sizeToDimension(w,D){if(D<0||D>w.length)throw new Error(`invalid dimension of ${D} for sizeToDimension as Tensor has ${w.length} dimensions.`);return e.getSizeFromDimensionRange(w,0,D)}static getSizeFromDimensionRange(w,D,F){let Z=1;for(let L=D;L<F;L++){if(w[L]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Z*=w[L]}return Z}static computeStrides(w){const D=w.length;if(D===0)return[];if(D===1)return[1];const F=new Array(D);F[D-1]=1,F[D-2]=w[D-1];for(let Z=D-3;Z>=0;--Z)F[Z]=F[Z+1]*w[Z+1];return F}static transpose(w){return w.slice().reverse()}static indicesToOffset(w,D,F){F===void 0&&(F=w.length);let Z=0;for(let L=0;L<F;++L)Z+=D[L]*w[L];return Z}static offsetToIndices(w,D){const F=D.length;if(F===0)return[];if(F===1)return[w*D[0]];const Z=new Array(D.length);for(let L=0;L<Z.length-1;++L)Z[L]=Math.floor(w/D[L]),w-=Z[L]*D[L];return Z[Z.length-1]=w,Z}static normalizeAxis(w,D){if(w<-D&&w>=D)throw new Error("unsupported axis for this operation.");return w<0?w+D:w}static normalizeAxes(w,D){return w.map(F=>this.normalizeAxis(F,D))}static incrementIndex(w,D,F){if(D.length===0||w.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(F===void 0)F=D.length;else if(F<=0||F>D.length)throw new Error("Incorrect axis to increment on");for(let Z=F-1;Z>=0&&(w[Z]++,!(w[Z]<D[Z]));--Z)w[Z]=0}static calculateReshapedDims(w,D){if(D.length===0){if(w.length===0||e.size(w)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const F=D.length,Z=new Array(F);let L=-1,W=1;for(let de=0;de<F;de++){if(D[de]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(D[de]===-1){if(L!==-1)throw new Error("at most one dimension in shape hints can be -1");L=de}else{if(D[de]===0){if(de>=w.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");Z[de]=w[de]}else Z[de]=D[de];W*=Z[de]}}const k=e.size(w);if(L!==-1){if(k%W!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${w}] Output shape: [${D}]`);Z[L]=k/W}else if(W!==k)throw new Error("reshapedDims and originalDims don't have matching sizes");return Z}static sortBasedOnPerm(w,D){return D?D.map(F=>w[F]):w.slice().reverse()}static padShape(w,D){const F=w.length;return w.map((Z,L)=>Z+D[L]+D[L+F])}static areEqual(w,D){return w.length===D.length&&w.every((F,Z)=>F===D[Z])}static validateDimsAndCalcSize(w){if(w.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let D=1;for(const F of w){if(!Number.isInteger(F))throw new TypeError(`Invalid shape: ${F} is not an integer`);if(F<0||F>2147483647)throw new TypeError(`Invalid shape: length ${F} is not allowed`);D*=F}return D}static flattenShape(w,D){D<0&&(D+=w.length);const F=w.reduce((L,W)=>L*W,1),Z=w.slice(D).reduce((L,W)=>L*W,1);return[F/Z,Z]}static squeezeShape(w,D){const F=new Array;D=e.normalizeAxes(D,w.length);for(let Z=0;Z<w.length;Z++){const L=D.indexOf(Z)>=0;if(L&&w[Z]!==1)throw new Error("squeeze an axis of size different than 1");(D.length===0&&w[Z]>1||D.length>0&&!L)&&F.push(w[Z])}return F}static unsqueezeShape(w,D){const F=new Array(w.length+D.length);F.fill(0);for(let L=0;L<D.length;L++){const W=e.normalizeAxis(D[L],F.length);if(W>=F.length)throw new Error("'axes' has an out of range axis");if(F[W]!==0)throw new Error("'axes' has a duplicate axis");F[W]=1}let Z=0;for(let L=0;L<F.length;L++)F[L]===0&&(F[L]=w[Z++]);if(Z!==w.length)throw new Error("the unsqueezed dimension could not be established");return F}}S.ShapeUtil=e,S.MathUtil=class{static sqr(A,w,D,F,Z){if(F<0||F>=w.length)throw new Error("sourceIndex out of bounds");if(D<0||D>=A.length)throw new Error("targetIndex out of bounds");if(F+Z>w.length)throw new Error("source indices to be copied are outside bounds");if(D+Z>A.length)throw new Error("target array is too small to hold result");for(let L=0;L<Z;L++)A[D+L]+=Math.pow(w[F+L],2)}static axpy(A,w,D,F,Z,L){if(F<0||F>=w.length)throw new Error("sourceIndex out of bounds");if(D<0||D>=A.length)throw new Error("targetIndex out of bounds");if(F+Z>w.length)throw new Error("source indices to be copied are outside bounds");if(D+Z>A.length)throw new Error("target array is too small to hold result");for(let W=0;W<Z;W++)A[D+W]+=L*w[F+W]}static powx(A,w,D,F,Z,L){if(F<0||F>=w.length)throw new Error("sourceIndex out of bounds");if(D<0||D>=A.length)throw new Error("targetIndex out of bounds");if(F+Z>w.length)throw new Error("source indices to be copied are outside bounds");if(D+Z>A.length)throw new Error("target array is too small to hold result");for(let W=0;W<Z;W++)A[D+W]=Math.pow(w[F+W],L)}static mul(A,w,D,F,Z){if(F<0||F>=w.length)throw new Error("sourceIndex out of bounds");if(D<0||D>=A.length)throw new Error("targetIndex out of bounds");if(F+Z>w.length)throw new Error("source indices to be copied are outside bounds");if(D+Z>A.length)throw new Error("target array is too small to hold result");for(let L=0;L<Z;L++)A[D+L]=w[F+L]*A[D+L]}};class o{static splitShape(w,D,F,Z){if(F.length===0){if(!Z)throw new Error("need to know number of outputs when the 'split' attribute is not specified");o.determineSplit(w[D],Z,F)}const L=[],W=[0];for(let k=0;k<F.length;++k){k!==0&&W.push(W[k-1]+F[k-1]);const de=w.slice();de[D]=F[k],L.push(de)}return[L,W]}static determineSplit(w,D,F){if(w%D!=0)throw new Error("cannot split tensor to equal sized parts");for(let Z=0;Z<D;++Z)F.push(w/D)}}S.SplitUtil=o;class c{static calcReduce(w,D,F,Z,L){const W=w.dims.slice(0);D.length===0&&W.forEach((Ae,be)=>D.push(be));const k=c.calcReduceShape(W,D,!0),de=e.size(k),H=new g.Tensor(k,w.type),ue=e.computeStrides(k),ve=e.computeStrides(W),ke=new Array(W.length);for(let Ae=0;Ae<de;Ae++){const be=e.offsetToIndices(Ae,ue);v.fillIndex(be,W,ke),H.set(be,c.calcReduceByAxis(w.numberData,D,W,0,e.indicesToOffset(ke,ve),Z,L))}return F?H:new g.Tensor(c.calcReduceShape(W,D,F),H.type,void 0,void 0,H.data,H.dataId)}static calcReduceByAxis(w,D,F,Z,L,W,k){let de=0;if(Z>=D.length)return W(w[L]);const H=D[Z],ue=H>=F.length?1:e.size(F.slice(H+1));for(let ve=0;ve<F[H];ve++)de=ve===0?c.calcReduceByAxis(w,D,F,Z+1,L,W,k):k(de,c.calcReduceByAxis(w,D,F,Z+1,L,W,k)),L+=ue;return de}static calcReduceShape(w,D,F){const Z=w.slice();for(let L=0;L<D.length;L++)Z[D[L]]=F?1:0;return Z.filter(L=>L!==0)}}S.ReduceUtil=c;class b{static adjustPoolAttributes(w,D,F,Z,L,W){if(!w&&F.length!==D.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(w)for(let k=0;k<D.length-2;k++)k>=F.length?F.push(D[k+2]):F[k]=D[k+2];for(let k=0;k<F.length;k++)if(k<Z.length){if(Z[k]<0)throw new Error("strides should be greater than or equal to 1")}else Z.push(1);for(let k=0;k<F.length;k++)if(k<L.length){if(L[k]<0)throw new Error("dilations should be greater than or equal to 1")}else L.push(1);for(let k=0;k<2*F.length;k++)if(k<W.length){if(W[k]<0)throw new Error("pad should be greater than or equal to 1")}else W.push(0);for(let k=0;k<F.length;k++){if(F[k]<=0)throw new Error("kernel shapes need to be greater than 0");if(W[k]>=F[k]||W[k+F.length]>=F[k])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(w,D,F,Z,L,W){if(W){if(L.length!==2*(w.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(D.length!==w.length-2)throw new Error("length of strides should be the length of data dimensions");if(Z.length!==w.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let k=0;k<w.length-2;k++)b.adjustPadAndReturnShape(w[k+2],D[k],F[k],Z[k],L,k,k+w.length-2,W)}}static computePoolOutputShape(w,D,F,Z,L,W,k){if(D.length<=0)throw new Error("input shape must be of size greater than 0");const de=[D[0],D[1]];return b.computeShapeHelper(w,D,de,F,Z,L,W,k),de}static computeConvOutputShape(w,D,F,Z,L,W,k){if(w.length<=0||D.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const de=[w[0],D[0]];return b.computeShapeHelper(!1,w,de,F,Z,L,W,k),de}static computeShapeHelper(w,D,F,Z,L,W,k,de){if(w)for(let H=0;H<D.length-2;H++)F.push(1);else for(let H=0;H<D.length-2;H++)F.push(b.adjustPadAndReturnShape(D[H+2],Z[H],L[H],W[H],k,H,H+D.length-2,de))}static adjustPadAndReturnShape(w,D,F,Z,L,W,k,de){const H=F*(Z-1)+1;if(!de||de==="NOTSET")return Math.floor((w+L[W]+L[k]-H)/D+1);switch(de){case"VALID":return L[W]=0,L[k]=0,Math.floor((w-H)/D+1);case"SAME_LOWER":case"SAME_UPPER":if(F!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const ue=((w+D-1)/D-1)*D+Z-w;return L[W]=Math.floor(de==="SAME_LOWER"?(ue+1)/2:ue/2),L[k]=ue-L[W],Math.floor((w+ue-Z)/D+1)}default:throw new Error("Unsupported AutoPad type")}}}S.PoolConvUtil=b,S.MIN_CLIP=-34028234663852886e22,S.MAX_CLIP=34028234663852886e22,S.decodeUtf8String=function(A){return new TextDecoder().decode(A)}},7967:(Ie,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.iterateExtraOptions=void 0,S.iterateExtraOptions=(y,E,p,M)=>{if(typeof y=="object"&&y!==null){if(p.has(y))throw new Error("Circular reference in options");p.add(y)}Object.entries(y).forEach(([d,g])=>{const x=E?E+d:d;if(typeof g=="object")(0,S.iterateExtraOptions)(g,x+".",p,M);else if(typeof g=="string"||typeof g=="number")M(x,g.toString());else{if(typeof g!="boolean")throw new Error("Can't handle extra config type: "+typeof g);M(x,g?"1":"0")}})}},2157:function(Ie,S,y){"use strict";var E,p=this&&this.__createBinding||(Object.create?function(ue,ve,ke,Ae){Ae===void 0&&(Ae=ke);var be=Object.getOwnPropertyDescriptor(ve,ke);be&&!("get"in be?!ve.__esModule:be.writable||be.configurable)||(be={enumerable:!0,get:function(){return ve[ke]}}),Object.defineProperty(ue,Ae,be)}:function(ue,ve,ke,Ae){Ae===void 0&&(Ae=ke),ue[Ae]=ve[ke]}),M=this&&this.__setModuleDefault||(Object.create?function(ue,ve){Object.defineProperty(ue,"default",{enumerable:!0,value:ve})}:function(ue,ve){ue.default=ve}),d=this&&this.__importStar||function(ue){if(ue&&ue.__esModule)return ue;var ve={};if(ue!=null)for(var ke in ue)ke!=="default"&&Object.prototype.hasOwnProperty.call(ue,ke)&&p(ve,ue,ke);return M(ve,ue),ve};Object.defineProperty(S,"__esModule",{value:!0}),S.endProfiling=S.run=S.releaseSession=S.createSession=S.createSessionFinalize=S.createSessionAllocate=S.initOrt=S.initWasm=void 0;const g=y(1670),x=d(y(349)),v=y(6361),u=()=>!!g.env.wasm.proxy&&typeof document!="undefined";let t,e,o,c=!1,b=!1,A=!1;const w=[],D=[],F=[],Z=[],L=[],W=[],k=()=>{if(c||!b||A||!t)throw new Error("worker not ready")},de=ue=>{switch(ue.data.type){case"init-wasm":c=!1,ue.data.err?(A=!0,e[1](ue.data.err)):(b=!0,e[0]());break;case"init-ort":ue.data.err?o[1](ue.data.err):o[0]();break;case"create_allocate":ue.data.err?w.shift()[1](ue.data.err):w.shift()[0](ue.data.out);break;case"create_finalize":ue.data.err?D.shift()[1](ue.data.err):D.shift()[0](ue.data.out);break;case"create":ue.data.err?F.shift()[1](ue.data.err):F.shift()[0](ue.data.out);break;case"release":ue.data.err?Z.shift()[1](ue.data.err):Z.shift()[0]();break;case"run":ue.data.err?L.shift()[1](ue.data.err):L.shift()[0](ue.data.out);break;case"end-profiling":ue.data.err?W.shift()[1](ue.data.err):W.shift()[0]()}},H=typeof document!="undefined"?(E=document==null?void 0:document.currentScript)===null||E===void 0?void 0:E.src:void 0;S.initWasm=()=>Ga(this,null,function*(){if(u()){if(b)return;if(c)throw new Error("multiple calls to 'initWasm()' detected.");if(A)throw new Error("previous call to 'initWasm()' failed.");return c=!0,g.env.wasm.wasmPaths===void 0&&H&&H.indexOf("blob:")!==0&&(g.env.wasm.wasmPaths=H.substr(0,+H.lastIndexOf("/")+1)),new Promise((ue,ve)=>{t==null||t.terminate(),t=y(9710).Z(),t.onmessage=de,e=[ue,ve];const ke={type:"init-wasm",in:g.env.wasm};t.postMessage(ke)})}return(0,v.initializeWebAssembly)(g.env.wasm)}),S.initOrt=(ue,ve)=>Ga(this,null,function*(){if(u())return k(),new Promise((ke,Ae)=>{o=[ke,Ae];const be={type:"init-ort",in:{numThreads:ue,loggingLevel:ve}};t.postMessage(be)});x.initOrt(ue,ve)}),S.createSessionAllocate=ue=>Ga(this,null,function*(){return u()?(k(),new Promise((ve,ke)=>{w.push([ve,ke]);const Ae={type:"create_allocate",in:{model:ue}};t.postMessage(Ae,[ue.buffer])})):x.createSessionAllocate(ue)}),S.createSessionFinalize=(ue,ve)=>Ga(this,null,function*(){return u()?(k(),new Promise((ke,Ae)=>{D.push([ke,Ae]);const be={type:"create_finalize",in:{modeldata:ue,options:ve}};t.postMessage(be)})):x.createSessionFinalize(ue,ve)}),S.createSession=(ue,ve)=>Ga(this,null,function*(){return u()?(k(),new Promise((ke,Ae)=>{F.push([ke,Ae]);const be={type:"create",in:{model:ue,options:ve}};t.postMessage(be,[ue.buffer])})):x.createSession(ue,ve)}),S.releaseSession=ue=>Ga(this,null,function*(){if(u())return k(),new Promise((ve,ke)=>{Z.push([ve,ke]);const Ae={type:"release",in:ue};t.postMessage(Ae)});x.releaseSession(ue)}),S.run=(ue,ve,ke,Ae,be)=>Ga(this,null,function*(){return u()?(k(),new Promise((G,ie)=>{L.push([G,ie]);const V={type:"run",in:{sessionId:ue,inputIndices:ve,inputs:ke,outputIndices:Ae,options:be}};t.postMessage(V,x.extractTransferableBuffers(ke))})):x.run(ue,ve,ke,Ae,be)}),S.endProfiling=ue=>Ga(this,null,function*(){if(u())return k(),new Promise((ve,ke)=>{W.push([ve,ke]);const Ae={type:"end-profiling",in:ue};t.postMessage(Ae)});x.endProfiling(ue)})},586:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setRunOptions=void 0;const E=y(7967),p=y(4983),M=y(6361);S.setRunOptions=d=>{const g=(0,M.getInstance)();let x=0;const v=[],u=d||{};try{if((d==null?void 0:d.logSeverityLevel)===void 0)u.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if((d==null?void 0:d.logVerbosityLevel)===void 0)u.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);(d==null?void 0:d.terminate)===void 0&&(u.terminate=!1);let t=0;if((d==null?void 0:d.tag)!==void 0&&(t=(0,p.allocWasmString)(d.tag,v)),x=g._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,t),x===0)throw new Error("Can't create run options");return(d==null?void 0:d.extra)!==void 0&&(0,E.iterateExtraOptions)(d.extra,"",new WeakSet,(e,o)=>{const c=(0,p.allocWasmString)(e,v),b=(0,p.allocWasmString)(o,v);if(g._OrtAddRunConfigEntry(x,c,b)!==0)throw new Error(`Can't set a run config entry: ${e} - ${o}`)}),[x,v]}catch(t){throw x!==0&&g._OrtReleaseRunOptions(x),v.forEach(g._free),t}}},2306:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OnnxruntimeWebAssemblySessionHandler=void 0;const E=y(2806),p=y(1670),M=y(2850),d=y(2157);let g;S.OnnxruntimeWebAssemblySessionHandler=class{createSessionAllocate(x){return Ga(this,null,function*(){const v=yield fetch(x),u=yield v.arrayBuffer();return(0,d.createSessionAllocate)(new Uint8Array(u))})}loadModel(x,v){return Ga(this,null,function*(){if(g||(yield(0,d.initOrt)(p.env.wasm.numThreads,(u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}})(p.env.logLevel)),g=!0),typeof x=="string")if(typeof fetch=="undefined"){const u=yield(0,M.promisify)(E.readFile)(x);[this.sessionId,this.inputNames,this.outputNames]=yield(0,d.createSession)(u,v)}else{const u=yield this.createSessionAllocate(x);[this.sessionId,this.inputNames,this.outputNames]=yield(0,d.createSessionFinalize)(u,v)}else[this.sessionId,this.inputNames,this.outputNames]=yield(0,d.createSession)(x,v)})}dispose(){return Ga(this,null,function*(){return(0,d.releaseSession)(this.sessionId)})}run(x,v,u){return Ga(this,null,function*(){const t=[],e=[];Object.entries(x).forEach(A=>{const w=A[0],D=A[1],F=this.inputNames.indexOf(w);if(F===-1)throw new Error(`invalid input '${w}'`);t.push(D),e.push(F)});const o=[];Object.entries(v).forEach(A=>{const w=A[0],D=this.outputNames.indexOf(w);if(D===-1)throw new Error(`invalid output '${w}'`);o.push(D)});const c=yield(0,d.run)(this.sessionId,e,t.map(A=>[A.type,A.dims,A.data]),o,u),b={};for(let A=0;A<c.length;A++)b[this.outputNames[o[A]]]=new p.Tensor(c[A][0],c[A][2],c[A][1]);return b})}startProfiling(){}endProfiling(){(0,d.endProfiling)(this.sessionId)}}},4919:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setSessionOptions=void 0;const E=y(7967),p=y(4983),M=y(6361);S.setSessionOptions=d=>{const g=(0,M.getInstance)();let x=0;const v=[],u=d||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{(d==null?void 0:d.graphOptimizationLevel)===void 0&&(u.graphOptimizationLevel="all");const t=(c=>{switch(c){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${c}`)}})(u.graphOptimizationLevel);(d==null?void 0:d.enableCpuMemArena)===void 0&&(u.enableCpuMemArena=!0),(d==null?void 0:d.enableMemPattern)===void 0&&(u.enableMemPattern=!0),(d==null?void 0:d.executionMode)===void 0&&(u.executionMode="sequential");const e=(c=>{switch(c){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${c}`)}})(u.executionMode);let o=0;if((d==null?void 0:d.logId)!==void 0&&(o=(0,p.allocWasmString)(d.logId,v)),(d==null?void 0:d.logSeverityLevel)===void 0)u.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if((d==null?void 0:d.logVerbosityLevel)===void 0)u.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);if((d==null?void 0:d.enableProfiling)===void 0&&(u.enableProfiling=!1),x=g._OrtCreateSessionOptions(t,!!u.enableCpuMemArena,!!u.enableMemPattern,e,!!u.enableProfiling,0,o,u.logSeverityLevel,u.logVerbosityLevel),x===0)throw new Error("Can't create session options");return d!=null&&d.executionProviders&&((c,b,A)=>{for(const w of b){let D=typeof w=="string"?w:w.name;switch(D){case"xnnpack":D="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${D}`)}const F=(0,p.allocWasmString)(D,A);if((0,M.getInstance)()._OrtAppendExecutionProvider(c,F)!==0)throw new Error(`Can't append execution provider: ${D}`)}})(x,d.executionProviders,v),(d==null?void 0:d.extra)!==void 0&&(0,E.iterateExtraOptions)(d.extra,"",new WeakSet,(c,b)=>{const A=(0,p.allocWasmString)(c,v),w=(0,p.allocWasmString)(b,v);if(g._OrtAddSessionConfigEntry(x,A,w)!==0)throw new Error(`Can't set a session config entry: ${c} - ${b}`)}),[x,v]}catch(t){throw x!==0&&g._OrtReleaseSessionOptions(x),v.forEach(g._free),t}}},4983:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.allocWasmString=void 0;const E=y(6361);S.allocWasmString=(p,M)=>{const d=(0,E.getInstance)(),g=d.lengthBytesUTF8(p)+1,x=d._malloc(g);return d.stringToUTF8(p,x,g),M.push(x),x}},349:(Ie,S,y)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.extractTransferableBuffers=S.endProfiling=S.run=S.releaseSession=S.createSession=S.createSessionFinalize=S.createSessionAllocate=S.initOrt=void 0;const E=y(586),p=y(4919),M=y(4983),d=y(6361);S.initOrt=(t,e)=>{const o=(0,d.getInstance)()._OrtInit(t,e);if(o!==0)throw new Error(`Can't initialize onnxruntime. error code = ${o}`)};const g=new Map;S.createSessionAllocate=t=>{const e=(0,d.getInstance)(),o=e._malloc(t.byteLength);return e.HEAPU8.set(t,o),[o,t.byteLength]},S.createSessionFinalize=(t,e)=>{const o=(0,d.getInstance)();let c=0,b=0,A=[];try{if([b,A]=(0,p.setSessionOptions)(e),c=o._OrtCreateSession(t[0],t[1],b),c===0)throw new Error("Can't create a session")}finally{o._free(t[0]),o._OrtReleaseSessionOptions(b),A.forEach(o._free)}const w=o._OrtGetInputCount(c),D=o._OrtGetOutputCount(c),F=[],Z=[],L=[],W=[];for(let k=0;k<w;k++){const de=o._OrtGetInputName(c,k);if(de===0)throw new Error("Can't get an input name");Z.push(de),F.push(o.UTF8ToString(de))}for(let k=0;k<D;k++){const de=o._OrtGetOutputName(c,k);if(de===0)throw new Error("Can't get an output name");W.push(de),L.push(o.UTF8ToString(de))}return g.set(c,[c,Z,W]),[c,F,L]},S.createSession=(t,e)=>{const o=(0,S.createSessionAllocate)(t);return(0,S.createSessionFinalize)(o,e)},S.releaseSession=t=>{const e=(0,d.getInstance)(),o=g.get(t);if(!o)throw new Error("invalid session id");const c=o[0],b=o[1],A=o[2];b.forEach(e._OrtFree),A.forEach(e._OrtFree),e._OrtReleaseSession(c),g.delete(t)};const x=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},v=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},u=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};S.run=(t,e,o,c,b)=>{const A=(0,d.getInstance)(),w=g.get(t);if(!w)throw new Error("invalid session id");const D=w[0],F=w[1],Z=w[2],L=e.length,W=c.length;let k=0,de=[];const H=[],ue=[];try{[k,de]=(0,E.setRunOptions)(b);for(let ie=0;ie<L;ie++){const V=o[ie][0],ae=o[ie][1],K=o[ie][2];let he,Se;if(Array.isArray(K)){Se=4*K.length,he=A._malloc(Se),ue.push(he);let lt=he/4;for(let Gt=0;Gt<K.length;Gt++){if(typeof K[Gt]!="string")throw new TypeError(`tensor data at index ${Gt} is not a string`);A.HEAPU32[lt++]=(0,M.allocWasmString)(K[Gt],ue)}}else Se=K.byteLength,he=A._malloc(Se),ue.push(he),A.HEAPU8.set(new Uint8Array(K.buffer,K.byteOffset,Se),he);const Fe=A.stackSave(),nt=A.stackAlloc(4*ae.length);try{let lt=nt/4;ae.forEach(pn=>A.HEAP32[lt++]=pn);const Gt=A._OrtCreateTensor(x(V),he,Se,nt,ae.length);if(Gt===0)throw new Error("Can't create a tensor");H.push(Gt)}finally{A.stackRestore(Fe)}}const ve=A.stackSave(),ke=A.stackAlloc(4*L),Ae=A.stackAlloc(4*L),be=A.stackAlloc(4*W),G=A.stackAlloc(4*W);try{let ie=ke/4,V=Ae/4,ae=be/4,K=G/4;for(let Fe=0;Fe<L;Fe++)A.HEAPU32[ie++]=H[Fe],A.HEAPU32[V++]=F[e[Fe]];for(let Fe=0;Fe<W;Fe++)A.HEAPU32[ae++]=0,A.HEAPU32[K++]=Z[c[Fe]];let he=A._OrtRun(D,Ae,ke,L,G,W,be,k);const Se=[];if(he===0)for(let Fe=0;Fe<W;Fe++){const nt=A.HEAPU32[be/4+Fe],lt=A.stackSave(),Gt=A.stackAlloc(16);let pn,$n=0;try{if(he=A._OrtGetTensorData(nt,Gt,Gt+4,Gt+8,Gt+12),he!==0)throw new Error(`Can't access output tensor data. error code = ${he}`);let Ln=Gt/4;const st=A.HEAPU32[Ln++];$n=A.HEAPU32[Ln++];const xt=A.HEAPU32[Ln++],tn=A.HEAPU32[Ln++],Un=[];for(let Yt=0;Yt<tn;Yt++)Un.push(A.HEAPU32[xt/4+Yt]);A._OrtFree(xt);const We=Un.length===0?1:Un.reduce((Yt,Ze)=>Yt*Ze);if(pn=v(st),pn==="string"){const Yt=[];let Ze=$n/4;for(let Pe=0;Pe<We;Pe++){const ze=A.HEAPU32[Ze++],ht=Pe===We-1?void 0:A.HEAPU32[Ze]-ze;Yt.push(A.UTF8ToString(ze,ht))}Se.push([pn,Un,Yt])}else{const Yt=new(u(pn))(We);new Uint8Array(Yt.buffer,Yt.byteOffset,Yt.byteLength).set(A.HEAPU8.subarray($n,$n+Yt.byteLength)),Se.push([pn,Un,Yt])}}finally{A.stackRestore(lt),pn==="string"&&$n&&A._free($n),A._OrtReleaseTensor(nt)}}if(he===0)return Se;throw new Error(`failed to call OrtRun(). error code = ${he}.`)}finally{A.stackRestore(ve)}}finally{H.forEach(A._OrtReleaseTensor),ue.forEach(A._free),A._OrtReleaseRunOptions(k),de.forEach(A._free)}},S.endProfiling=t=>{const e=(0,d.getInstance)(),o=g.get(t);if(!o)throw new Error("invalid session id");const c=o[0],b=e._OrtEndProfiling(c);if(b===0)throw new Error("Can't get an profile file name");e._OrtFree(b)},S.extractTransferableBuffers=t=>{const e=[];for(const o of t){const c=o[2];!Array.isArray(c)&&c.buffer&&e.push(c.buffer)}return e}},6361:function(Ie,S,y){"use strict";var E=this&&this.__createBinding||(Object.create?function(b,A,w,D){D===void 0&&(D=w);var F=Object.getOwnPropertyDescriptor(A,w);F&&!("get"in F?!A.__esModule:F.writable||F.configurable)||(F={enumerable:!0,get:function(){return A[w]}}),Object.defineProperty(b,D,F)}:function(b,A,w,D){D===void 0&&(D=w),b[D]=A[w]}),p=this&&this.__setModuleDefault||(Object.create?function(b,A){Object.defineProperty(b,"default",{enumerable:!0,value:A})}:function(b,A){b.default=A}),M=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var w in b)w!=="default"&&Object.prototype.hasOwnProperty.call(b,w)&&E(A,b,w);return p(A,b),A},d=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(S,"__esModule",{value:!0}),S.dispose=S.getInstance=S.initializeWebAssembly=void 0;const g=M(y(6449)),x=d(y(932)),v=y(3474);let u,t=!1,e=!1,o=!1;const c=(b,A)=>A?b?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":b?"ort-wasm-simd.wasm":"ort-wasm.wasm";S.initializeWebAssembly=b=>Ga(this,null,function*(){if(t)return Promise.resolve();if(e)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(o)throw new Error("previous call to 'initializeWebAssembly()' failed.");e=!0;const A=b.initTimeout,w=b.numThreads,D=b.simd,F=w>1&&(()=>{try{return typeof SharedArrayBuffer!="undefined"&&(typeof MessageChannel!="undefined"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(ve){return!1}})(),Z=D&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(ve){return!1}})(),L=typeof b.wasmPaths=="string"?b.wasmPaths:void 0,W=c(!1,F),k=c(Z,F),de=typeof b.wasmPaths=="object"?b.wasmPaths[k]:void 0;let H=!1;const ue=[];if(A>0&&ue.push(new Promise(ve=>{setTimeout(()=>{H=!0,ve()},A)})),ue.push(new Promise((ve,ke)=>{const Ae=F?v:x.default,be={locateFile:(G,ie)=>F&&G.endsWith(".worker.js")&&typeof Blob!="undefined"?URL.createObjectURL(new Blob([y(4154)],{type:"text/javascript"})):G===W?de!=null?de:(L!=null?L:ie)+k:ie+G};if(F)if(typeof Blob=="undefined")be.mainScriptUrlOrBlob=g.join("/","ort-wasm-threaded.js");else{const G=`var ortWasmThreaded=(function(){var _scriptDir;return ${Ae.toString()}})();`;be.mainScriptUrlOrBlob=new Blob([G],{type:"text/javascript"})}Ae(be).then(G=>{e=!1,t=!0,u=G,ve()},G=>{e=!1,o=!0,ke(G)})})),yield Promise.race(ue),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${A}ms`)}),S.getInstance=()=>{if(t&&u)return u;throw new Error("WebAssembly is not initialized yet.")},S.dispose=()=>{var b;!t||e||o||(e=!0,(b=u.PThread)===null||b===void 0||b.terminateAllThreads(),u=void 0,e=!1,t=!1,o=!0)}},9710:(Ie,S,y)=>{"use strict";y.d(S,{Z:()=>M});var E=y(477),p=y.n(E);function M(){return p()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:Ie=>{"use strict";Ie.exports=function(S,y,E,p){var M=self||window;try{try{var d;try{d=new M.Blob([S])}catch(u){(d=new(M.BlobBuilder||M.WebKitBlobBuilder||M.MozBlobBuilder||M.MSBlobBuilder)).append(S),d=d.getBlob()}var g=M.URL||M.webkitURL,x=g.createObjectURL(d),v=new M[y](x,E);return g.revokeObjectURL(x),v}catch(u){return new M[y]("data:application/javascript,".concat(encodeURIComponent(S)),E)}}catch(u){if(!p)throw Error("Inline worker is not supported");return new M[y](p,E)}}},4154:Ie=>{"use strict";Ie.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:Ie=>{"use strict";Ie.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(Ie,S,y)=>{"use strict";y.r(S),y.d(S,{flatbuffers:()=>E});var E={};E.Offset,E.Table,E.SIZEOF_SHORT=2,E.SIZEOF_INT=4,E.FILE_IDENTIFIER_LENGTH=4,E.SIZE_PREFIX_LENGTH=4,E.Encoding={UTF8_BYTES:1,UTF16_STRING:2},E.int32=new Int32Array(2),E.float32=new Float32Array(E.int32.buffer),E.float64=new Float64Array(E.int32.buffer),E.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,E.Long=function(p,M){this.low=0|p,this.high=0|M},E.Long.create=function(p,M){return p==0&&M==0?E.Long.ZERO:new E.Long(p,M)},E.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},E.Long.prototype.equals=function(p){return this.low==p.low&&this.high==p.high},E.Long.ZERO=new E.Long(0,0),E.Builder=function(p){if(p)M=p;else var M=1024;this.bb=E.ByteBuffer.allocate(M),this.space=M,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},E.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},E.Builder.prototype.forceDefaults=function(p){this.force_defaults=p},E.Builder.prototype.dataBuffer=function(){return this.bb},E.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},E.Builder.prototype.prep=function(p,M){p>this.minalign&&(this.minalign=p);for(var d=1+~(this.bb.capacity()-this.space+M)&p-1;this.space<d+p+M;){var g=this.bb.capacity();this.bb=E.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-g}this.pad(d)},E.Builder.prototype.pad=function(p){for(var M=0;M<p;M++)this.bb.writeInt8(--this.space,0)},E.Builder.prototype.writeInt8=function(p){this.bb.writeInt8(this.space-=1,p)},E.Builder.prototype.writeInt16=function(p){this.bb.writeInt16(this.space-=2,p)},E.Builder.prototype.writeInt32=function(p){this.bb.writeInt32(this.space-=4,p)},E.Builder.prototype.writeInt64=function(p){this.bb.writeInt64(this.space-=8,p)},E.Builder.prototype.writeFloat32=function(p){this.bb.writeFloat32(this.space-=4,p)},E.Builder.prototype.writeFloat64=function(p){this.bb.writeFloat64(this.space-=8,p)},E.Builder.prototype.addInt8=function(p){this.prep(1,0),this.writeInt8(p)},E.Builder.prototype.addInt16=function(p){this.prep(2,0),this.writeInt16(p)},E.Builder.prototype.addInt32=function(p){this.prep(4,0),this.writeInt32(p)},E.Builder.prototype.addInt64=function(p){this.prep(8,0),this.writeInt64(p)},E.Builder.prototype.addFloat32=function(p){this.prep(4,0),this.writeFloat32(p)},E.Builder.prototype.addFloat64=function(p){this.prep(8,0),this.writeFloat64(p)},E.Builder.prototype.addFieldInt8=function(p,M,d){(this.force_defaults||M!=d)&&(this.addInt8(M),this.slot(p))},E.Builder.prototype.addFieldInt16=function(p,M,d){(this.force_defaults||M!=d)&&(this.addInt16(M),this.slot(p))},E.Builder.prototype.addFieldInt32=function(p,M,d){(this.force_defaults||M!=d)&&(this.addInt32(M),this.slot(p))},E.Builder.prototype.addFieldInt64=function(p,M,d){!this.force_defaults&&M.equals(d)||(this.addInt64(M),this.slot(p))},E.Builder.prototype.addFieldFloat32=function(p,M,d){(this.force_defaults||M!=d)&&(this.addFloat32(M),this.slot(p))},E.Builder.prototype.addFieldFloat64=function(p,M,d){(this.force_defaults||M!=d)&&(this.addFloat64(M),this.slot(p))},E.Builder.prototype.addFieldOffset=function(p,M,d){(this.force_defaults||M!=d)&&(this.addOffset(M),this.slot(p))},E.Builder.prototype.addFieldStruct=function(p,M,d){M!=d&&(this.nested(M),this.slot(p))},E.Builder.prototype.nested=function(p){if(p!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},E.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},E.Builder.prototype.slot=function(p){this.vtable[p]=this.offset()},E.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},E.Builder.growByteBuffer=function(p){var M=p.capacity();if(3221225472&M)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var d=M<<1,g=E.ByteBuffer.allocate(d);return g.setPosition(d-M),g.bytes().set(p.bytes(),d-M),g},E.Builder.prototype.addOffset=function(p){this.prep(E.SIZEOF_INT,0),this.writeInt32(this.offset()-p+E.SIZEOF_INT)},E.Builder.prototype.startObject=function(p){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=p;for(var M=0;M<p;M++)this.vtable[M]=0;this.isNested=!0,this.object_start=this.offset()},E.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var p=this.offset(),M=this.vtable_in_use-1;M>=0&&this.vtable[M]==0;M--);for(var d=M+1;M>=0;M--)this.addInt16(this.vtable[M]!=0?p-this.vtable[M]:0);this.addInt16(p-this.object_start);var g=(d+2)*E.SIZEOF_SHORT;this.addInt16(g);var x=0,v=this.space;e:for(M=0;M<this.vtables.length;M++){var u=this.bb.capacity()-this.vtables[M];if(g==this.bb.readInt16(u)){for(var t=E.SIZEOF_SHORT;t<g;t+=E.SIZEOF_SHORT)if(this.bb.readInt16(v+t)!=this.bb.readInt16(u+t))continue e;x=this.vtables[M];break}}return x?(this.space=this.bb.capacity()-p,this.bb.writeInt32(this.space,x-p)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-p,this.offset()-p)),this.isNested=!1,p},E.Builder.prototype.finish=function(p,M,d){var g=d?E.SIZE_PREFIX_LENGTH:0;if(M){var x=M;if(this.prep(this.minalign,E.SIZEOF_INT+E.FILE_IDENTIFIER_LENGTH+g),x.length!=E.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+E.FILE_IDENTIFIER_LENGTH);for(var v=E.FILE_IDENTIFIER_LENGTH-1;v>=0;v--)this.writeInt8(x.charCodeAt(v))}this.prep(this.minalign,E.SIZEOF_INT+g),this.addOffset(p),g&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},E.Builder.prototype.finishSizePrefixed=function(p,M){this.finish(p,M,!0)},E.Builder.prototype.requiredField=function(p,M){var d=this.bb.capacity()-p,g=d-this.bb.readInt32(d);if(this.bb.readInt16(g+M)==0)throw new Error("FlatBuffers: field "+M+" must be set")},E.Builder.prototype.startVector=function(p,M,d){this.notNested(),this.vector_num_elems=M,this.prep(E.SIZEOF_INT,p*M),this.prep(d,p*M)},E.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},E.Builder.prototype.createString=function(p){if(p instanceof Uint8Array)var M=p;else{M=[];for(var d=0;d<p.length;){var g,x=p.charCodeAt(d++);(g=x<55296||x>=56320?x:(x<<10)+p.charCodeAt(d++)+-56613888)<128?M.push(g):(g<2048?M.push(g>>6&31|192):(g<65536?M.push(g>>12&15|224):M.push(g>>18&7|240,g>>12&63|128),M.push(g>>6&63|128)),M.push(63&g|128))}}this.addInt8(0),this.startVector(1,M.length,1),this.bb.setPosition(this.space-=M.length),d=0;for(var v=this.space,u=this.bb.bytes();d<M.length;d++)u[v++]=M[d];return this.endVector()},E.Builder.prototype.createLong=function(p,M){return E.Long.create(p,M)},E.ByteBuffer=function(p){this.bytes_=p,this.position_=0},E.ByteBuffer.allocate=function(p){return new E.ByteBuffer(new Uint8Array(p))},E.ByteBuffer.prototype.clear=function(){this.position_=0},E.ByteBuffer.prototype.bytes=function(){return this.bytes_},E.ByteBuffer.prototype.position=function(){return this.position_},E.ByteBuffer.prototype.setPosition=function(p){this.position_=p},E.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},E.ByteBuffer.prototype.readInt8=function(p){return this.readUint8(p)<<24>>24},E.ByteBuffer.prototype.readUint8=function(p){return this.bytes_[p]},E.ByteBuffer.prototype.readInt16=function(p){return this.readUint16(p)<<16>>16},E.ByteBuffer.prototype.readUint16=function(p){return this.bytes_[p]|this.bytes_[p+1]<<8},E.ByteBuffer.prototype.readInt32=function(p){return this.bytes_[p]|this.bytes_[p+1]<<8|this.bytes_[p+2]<<16|this.bytes_[p+3]<<24},E.ByteBuffer.prototype.readUint32=function(p){return this.readInt32(p)>>>0},E.ByteBuffer.prototype.readInt64=function(p){return new E.Long(this.readInt32(p),this.readInt32(p+4))},E.ByteBuffer.prototype.readUint64=function(p){return new E.Long(this.readUint32(p),this.readUint32(p+4))},E.ByteBuffer.prototype.readFloat32=function(p){return E.int32[0]=this.readInt32(p),E.float32[0]},E.ByteBuffer.prototype.readFloat64=function(p){return E.int32[E.isLittleEndian?0:1]=this.readInt32(p),E.int32[E.isLittleEndian?1:0]=this.readInt32(p+4),E.float64[0]},E.ByteBuffer.prototype.writeInt8=function(p,M){this.bytes_[p]=M},E.ByteBuffer.prototype.writeUint8=function(p,M){this.bytes_[p]=M},E.ByteBuffer.prototype.writeInt16=function(p,M){this.bytes_[p]=M,this.bytes_[p+1]=M>>8},E.ByteBuffer.prototype.writeUint16=function(p,M){this.bytes_[p]=M,this.bytes_[p+1]=M>>8},E.ByteBuffer.prototype.writeInt32=function(p,M){this.bytes_[p]=M,this.bytes_[p+1]=M>>8,this.bytes_[p+2]=M>>16,this.bytes_[p+3]=M>>24},E.ByteBuffer.prototype.writeUint32=function(p,M){this.bytes_[p]=M,this.bytes_[p+1]=M>>8,this.bytes_[p+2]=M>>16,this.bytes_[p+3]=M>>24},E.ByteBuffer.prototype.writeInt64=function(p,M){this.writeInt32(p,M.low),this.writeInt32(p+4,M.high)},E.ByteBuffer.prototype.writeUint64=function(p,M){this.writeUint32(p,M.low),this.writeUint32(p+4,M.high)},E.ByteBuffer.prototype.writeFloat32=function(p,M){E.float32[0]=M,this.writeInt32(p,E.int32[0])},E.ByteBuffer.prototype.writeFloat64=function(p,M){E.float64[0]=M,this.writeInt32(p,E.int32[E.isLittleEndian?0:1]),this.writeInt32(p+4,E.int32[E.isLittleEndian?1:0])},E.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+E.SIZEOF_INT+E.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var p="",M=0;M<E.FILE_IDENTIFIER_LENGTH;M++)p+=String.fromCharCode(this.readInt8(this.position_+E.SIZEOF_INT+M));return p},E.ByteBuffer.prototype.__offset=function(p,M){var d=p-this.readInt32(p);return M<this.readInt16(d)?this.readInt16(d+M):0},E.ByteBuffer.prototype.__union=function(p,M){return p.bb_pos=M+this.readInt32(M),p.bb=this,p},E.ByteBuffer.prototype.__string=function(p,M){p+=this.readInt32(p);var d=this.readInt32(p),g="",x=0;if(p+=E.SIZEOF_INT,M===E.Encoding.UTF8_BYTES)return this.bytes_.subarray(p,p+d);for(;x<d;){var v,u=this.readUint8(p+x++);if(u<192)v=u;else{var t=this.readUint8(p+x++);if(u<224)v=(31&u)<<6|63&t;else{var e=this.readUint8(p+x++);v=u<240?(15&u)<<12|(63&t)<<6|63&e:(7&u)<<18|(63&t)<<12|(63&e)<<6|63&this.readUint8(p+x++)}}v<65536?g+=String.fromCharCode(v):(v-=65536,g+=String.fromCharCode(55296+(v>>10),56320+(1023&v)))}return g},E.ByteBuffer.prototype.__indirect=function(p){return p+this.readInt32(p)},E.ByteBuffer.prototype.__vector=function(p){return p+this.readInt32(p)+E.SIZEOF_INT},E.ByteBuffer.prototype.__vector_len=function(p){return this.readInt32(p+this.readInt32(p))},E.ByteBuffer.prototype.__has_identifier=function(p){if(p.length!=E.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+E.FILE_IDENTIFIER_LENGTH);for(var M=0;M<E.FILE_IDENTIFIER_LENGTH;M++)if(p.charCodeAt(M)!=this.readInt8(this.position_+E.SIZEOF_INT+M))return!1;return!0},E.ByteBuffer.prototype.createLong=function(p,M){return E.Long.create(p,M)}}},__webpack_module_cache__={};function __nested_webpack_require_546802__(Ie){var S=__webpack_module_cache__[Ie];if(S!==void 0)return S.exports;var y=__webpack_module_cache__[Ie]={exports:{}};return __webpack_modules__[Ie].call(y.exports,y,y.exports,__nested_webpack_require_546802__),y.exports}__nested_webpack_require_546802__.n=Ie=>{var S=Ie&&Ie.__esModule?()=>Ie.default:()=>Ie;return __nested_webpack_require_546802__.d(S,{a:S}),S},__nested_webpack_require_546802__.d=(Ie,S)=>{for(var y in S)__nested_webpack_require_546802__.o(S,y)&&!__nested_webpack_require_546802__.o(Ie,y)&&Object.defineProperty(Ie,y,{enumerable:!0,get:S[y]})},__nested_webpack_require_546802__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(Ie){if(typeof window=="object")return window}}(),__nested_webpack_require_546802__.o=(Ie,S)=>Object.prototype.hasOwnProperty.call(Ie,S),__nested_webpack_require_546802__.r=Ie=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Ie,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ie,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_546802__(6018);return __webpack_exports__})())},3614:function(Ie,S,y){"use strict";Ie.exports=p;var E=y(80645);function p(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}p.Varint=0,p.Fixed64=1,p.Bytes=2,p.Fixed32=5;var M=(1<<16)*(1<<16),d=1/M,g=12,x=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");p.prototype={destroy:function(){this.buf=null},readFields:function(G,ie,V){for(V=V||this.length;this.pos<V;){var ae=this.readVarint(),K=ae>>3,he=this.pos;this.type=ae&7,G(K,ie,this),this.pos===he&&this.skip(ae)}return ie},readMessage:function(G,ie){return this.readFields(G,ie,this.readVarint()+this.pos)},readFixed32:function(){var G=H(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=ve(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=H(this.buf,this.pos)+H(this.buf,this.pos+4)*M;return this.pos+=8,G},readSFixed64:function(){var G=H(this.buf,this.pos)+ve(this.buf,this.pos+4)*M;return this.pos+=8,G},readFloat:function(){var G=E.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=E.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var ie=this.buf,V,ae;return ae=ie[this.pos++],V=ae&127,ae<128||(ae=ie[this.pos++],V|=(ae&127)<<7,ae<128)||(ae=ie[this.pos++],V|=(ae&127)<<14,ae<128)||(ae=ie[this.pos++],V|=(ae&127)<<21,ae<128)?V:(ae=ie[this.pos],V|=(ae&15)<<28,v(V,G,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2===1?(G+1)/-2:G/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var G=this.readVarint()+this.pos,ie=this.pos;return this.pos=G,G-ie>=g&&x?Ae(this.buf,ie,G):ke(this.buf,ie,G)},readBytes:function(){var G=this.readVarint()+this.pos,ie=this.buf.subarray(this.pos,G);return this.pos=G,ie},readPackedVarint:function(G,ie){if(this.type!==p.Bytes)return G.push(this.readVarint(ie));var V=u(this);for(G=G||[];this.pos<V;)G.push(this.readVarint(ie));return G},readPackedSVarint:function(G){if(this.type!==p.Bytes)return G.push(this.readSVarint());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==p.Bytes)return G.push(this.readBoolean());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==p.Bytes)return G.push(this.readFloat());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==p.Bytes)return G.push(this.readDouble());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==p.Bytes)return G.push(this.readFixed32());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==p.Bytes)return G.push(this.readSFixed32());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==p.Bytes)return G.push(this.readFixed64());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==p.Bytes)return G.push(this.readSFixed64());var ie=u(this);for(G=G||[];this.pos<ie;)G.push(this.readSFixed64());return G},skip:function(G){var ie=G&7;if(ie===p.Varint)for(;this.buf[this.pos++]>127;);else if(ie===p.Bytes)this.pos=this.readVarint()+this.pos;else if(ie===p.Fixed32)this.pos+=4;else if(ie===p.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+ie)},writeTag:function(G,ie){this.writeVarint(G<<3|ie)},realloc:function(G){for(var ie=this.length||16;ie<this.pos+G;)ie*=2;if(ie!==this.length){var V=new Uint8Array(ie);V.set(this.buf),this.buf=V,this.length=ie}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),ue(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),ue(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),ue(this.buf,G&-1,this.pos),ue(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),ue(this.buf,G&-1,this.pos),ue(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeVarint:function(G){if(G=+G||0,G>268435455||G<0){e(G,this);return}this.realloc(4),this.buf[this.pos++]=G&127|(G>127?128:0),!(G<=127)&&(this.buf[this.pos++]=(G>>>=7)&127|(G>127?128:0),!(G<=127)&&(this.buf[this.pos++]=(G>>>=7)&127|(G>127?128:0),!(G<=127)&&(this.buf[this.pos++]=G>>>7&127)))},writeSVarint:function(G){this.writeVarint(G<0?-G*2-1:G*2)},writeBoolean:function(G){this.writeVarint(Boolean(G))},writeString:function(G){G=String(G),this.realloc(G.length*4),this.pos++;var ie=this.pos;this.pos=be(this.buf,G,this.pos);var V=this.pos-ie;V>=128&&b(ie,V,this),this.pos=ie-1,this.writeVarint(V),this.pos+=V},writeFloat:function(G){this.realloc(4),E.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),E.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var ie=G.length;this.writeVarint(ie),this.realloc(ie);for(var V=0;V<ie;V++)this.buf[this.pos++]=G[V]},writeRawMessage:function(G,ie){this.pos++;var V=this.pos;G(ie,this);var ae=this.pos-V;ae>=128&&b(V,ae,this),this.pos=V-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(G,ie,V){this.writeTag(G,p.Bytes),this.writeRawMessage(ie,V)},writePackedVarint:function(G,ie){ie.length&&this.writeMessage(G,A,ie)},writePackedSVarint:function(G,ie){ie.length&&this.writeMessage(G,w,ie)},writePackedBoolean:function(G,ie){ie.length&&this.writeMessage(G,Z,ie)},writePackedFloat:function(G,ie){ie.length&&this.writeMessage(G,D,ie)},writePackedDouble:function(G,ie){ie.length&&this.writeMessage(G,F,ie)},writePackedFixed32:function(G,ie){ie.length&&this.writeMessage(G,L,ie)},writePackedSFixed32:function(G,ie){ie.length&&this.writeMessage(G,W,ie)},writePackedFixed64:function(G,ie){ie.length&&this.writeMessage(G,k,ie)},writePackedSFixed64:function(G,ie){ie.length&&this.writeMessage(G,de,ie)},writeBytesField:function(G,ie){this.writeTag(G,p.Bytes),this.writeBytes(ie)},writeFixed32Field:function(G,ie){this.writeTag(G,p.Fixed32),this.writeFixed32(ie)},writeSFixed32Field:function(G,ie){this.writeTag(G,p.Fixed32),this.writeSFixed32(ie)},writeFixed64Field:function(G,ie){this.writeTag(G,p.Fixed64),this.writeFixed64(ie)},writeSFixed64Field:function(G,ie){this.writeTag(G,p.Fixed64),this.writeSFixed64(ie)},writeVarintField:function(G,ie){this.writeTag(G,p.Varint),this.writeVarint(ie)},writeSVarintField:function(G,ie){this.writeTag(G,p.Varint),this.writeSVarint(ie)},writeStringField:function(G,ie){this.writeTag(G,p.Bytes),this.writeString(ie)},writeFloatField:function(G,ie){this.writeTag(G,p.Fixed32),this.writeFloat(ie)},writeDoubleField:function(G,ie){this.writeTag(G,p.Fixed64),this.writeDouble(ie)},writeBooleanField:function(G,ie){this.writeVarintField(G,Boolean(ie))}};function v(G,ie,V){var ae=V.buf,K,he;if(he=ae[V.pos++],K=(he&112)>>4,he<128||(he=ae[V.pos++],K|=(he&127)<<3,he<128)||(he=ae[V.pos++],K|=(he&127)<<10,he<128)||(he=ae[V.pos++],K|=(he&127)<<17,he<128)||(he=ae[V.pos++],K|=(he&127)<<24,he<128)||(he=ae[V.pos++],K|=(he&1)<<31,he<128))return t(G,K,ie);throw new Error("Expected varint not more than 10 bytes")}function u(G){return G.type===p.Bytes?G.readVarint()+G.pos:G.pos+1}function t(G,ie,V){return V?ie*4294967296+(G>>>0):(ie>>>0)*4294967296+(G>>>0)}function e(G,ie){var V,ae;if(G>=0?(V=G%4294967296|0,ae=G/4294967296|0):(V=~(-G%4294967296),ae=~(-G/4294967296),V^4294967295?V=V+1|0:(V=0,ae=ae+1|0)),G>=18446744073709552e3||G<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ie.realloc(10),o(V,ae,ie),c(ae,ie)}function o(G,ie,V){V.buf[V.pos++]=G&127|128,G>>>=7,V.buf[V.pos++]=G&127|128,G>>>=7,V.buf[V.pos++]=G&127|128,G>>>=7,V.buf[V.pos++]=G&127|128,G>>>=7,V.buf[V.pos]=G&127}function c(G,ie){var V=(G&7)<<4;ie.buf[ie.pos++]|=V|((G>>>=3)?128:0),G&&(ie.buf[ie.pos++]=G&127|((G>>>=7)?128:0),G&&(ie.buf[ie.pos++]=G&127|((G>>>=7)?128:0),G&&(ie.buf[ie.pos++]=G&127|((G>>>=7)?128:0),G&&(ie.buf[ie.pos++]=G&127|((G>>>=7)?128:0),G&&(ie.buf[ie.pos++]=G&127)))))}function b(G,ie,V){var ae=ie<=16383?1:ie<=2097151?2:ie<=268435455?3:Math.floor(Math.log(ie)/(Math.LN2*7));V.realloc(ae);for(var K=V.pos-1;K>=G;K--)V.buf[K+ae]=V.buf[K]}function A(G,ie){for(var V=0;V<G.length;V++)ie.writeVarint(G[V])}function w(G,ie){for(var V=0;V<G.length;V++)ie.writeSVarint(G[V])}function D(G,ie){for(var V=0;V<G.length;V++)ie.writeFloat(G[V])}function F(G,ie){for(var V=0;V<G.length;V++)ie.writeDouble(G[V])}function Z(G,ie){for(var V=0;V<G.length;V++)ie.writeBoolean(G[V])}function L(G,ie){for(var V=0;V<G.length;V++)ie.writeFixed32(G[V])}function W(G,ie){for(var V=0;V<G.length;V++)ie.writeSFixed32(G[V])}function k(G,ie){for(var V=0;V<G.length;V++)ie.writeFixed64(G[V])}function de(G,ie){for(var V=0;V<G.length;V++)ie.writeSFixed64(G[V])}function H(G,ie){return(G[ie]|G[ie+1]<<8|G[ie+2]<<16)+G[ie+3]*16777216}function ue(G,ie,V){G[V]=ie,G[V+1]=ie>>>8,G[V+2]=ie>>>16,G[V+3]=ie>>>24}function ve(G,ie){return(G[ie]|G[ie+1]<<8|G[ie+2]<<16)+(G[ie+3]<<24)}function ke(G,ie,V){for(var ae="",K=ie;K<V;){var he=G[K],Se=null,Fe=he>239?4:he>223?3:he>191?2:1;if(K+Fe>V)break;var nt,lt,Gt;Fe===1?he<128&&(Se=he):Fe===2?(nt=G[K+1],(nt&192)===128&&(Se=(he&31)<<6|nt&63,Se<=127&&(Se=null))):Fe===3?(nt=G[K+1],lt=G[K+2],(nt&192)===128&&(lt&192)===128&&(Se=(he&15)<<12|(nt&63)<<6|lt&63,(Se<=2047||Se>=55296&&Se<=57343)&&(Se=null))):Fe===4&&(nt=G[K+1],lt=G[K+2],Gt=G[K+3],(nt&192)===128&&(lt&192)===128&&(Gt&192)===128&&(Se=(he&15)<<18|(nt&63)<<12|(lt&63)<<6|Gt&63,(Se<=65535||Se>=1114112)&&(Se=null))),Se===null?(Se=65533,Fe=1):Se>65535&&(Se-=65536,ae+=String.fromCharCode(Se>>>10&1023|55296),Se=56320|Se&1023),ae+=String.fromCharCode(Se),K+=Fe}return ae}function Ae(G,ie,V){return x.decode(G.subarray(ie,V))}function be(G,ie,V){for(var ae=0,K,he;ae<ie.length;ae++){if(K=ie.charCodeAt(ae),K>55295&&K<57344)if(he)if(K<56320){G[V++]=239,G[V++]=191,G[V++]=189,he=K;continue}else K=he-55296<<10|K-56320|65536,he=null;else{K>56319||ae+1===ie.length?(G[V++]=239,G[V++]=191,G[V++]=189):he=K;continue}else he&&(G[V++]=239,G[V++]=191,G[V++]=189,he=null);K<128?G[V++]=K:(K<2048?G[V++]=K>>6|192:(K<65536?G[V++]=K>>12|224:(G[V++]=K>>18|240,G[V++]=K>>12&63|128),G[V++]=K>>6&63|128),G[V++]=K&63|128)}return V}},32676:function(Ie,S,y){var E=y(34155);(function(p,M){Ie.exports=M()})(this,function(){"use strict";function p(_e,oe){if(!(_e instanceof oe))throw new TypeError("Cannot call a class as a function")}function M(_e,oe){for(var ce=0;ce<oe.length;ce++){var ye=oe[ce];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(_e,ye.key,ye)}}function d(_e,oe,ce){return oe&&M(_e.prototype,oe),ce&&M(_e,ce),_e}var g=function(){function _e(oe,ce){this.next=null,this.key=oe,this.data=ce,this.left=null,this.right=null}return _e}();function x(_e,oe){return _e>oe?1:_e<oe?-1:0}function v(_e,oe,ce){for(var ye=new g(null,null),Y=ye,Ne=ye;;){var Qe=ce(_e,oe.key);if(Qe<0){if(oe.left===null)break;if(ce(_e,oe.left.key)<0){var mt=oe.left;if(oe.left=mt.right,mt.right=oe,oe=mt,oe.left===null)break}Ne.left=oe,Ne=oe,oe=oe.left}else if(Qe>0){if(oe.right===null)break;if(ce(_e,oe.right.key)>0){var mt=oe.right;if(oe.right=mt.left,mt.left=oe,oe=mt,oe.right===null)break}Y.right=oe,Y=oe,oe=oe.right}else break}return Y.right=oe.left,Ne.left=oe.right,oe.left=ye.right,oe.right=ye.left,oe}function u(_e,oe,ce,ye){var Y=new g(_e,oe);if(ce===null)return Y.left=Y.right=null,Y;ce=v(_e,ce,ye);var Ne=ye(_e,ce.key);return Ne<0?(Y.left=ce.left,Y.right=ce,ce.left=null):Ne>=0&&(Y.right=ce.right,Y.left=ce,ce.right=null),Y}function t(_e,oe,ce){var ye=null,Y=null;if(oe){oe=v(_e,oe,ce);var Ne=ce(oe.key,_e);Ne===0?(ye=oe.left,Y=oe.right):Ne<0?(Y=oe.right,oe.right=null,ye=oe):(ye=oe.left,oe.left=null,Y=oe)}return{left:ye,right:Y}}function e(_e,oe,ce){return oe===null?_e:(_e===null||(oe=v(_e.key,oe,ce),oe.left=_e),oe)}function o(_e,oe,ce,ye,Y){if(_e){ye(""+oe+(ce?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Y(_e)+`
`);var Ne=oe+(ce?"    ":"\u2502   ");_e.left&&o(_e.left,Ne,!1,ye,Y),_e.right&&o(_e.right,Ne,!0,ye,Y)}}var c=function(){function _e(oe){oe===void 0&&(oe=x),this._root=null,this._size=0,this._comparator=oe}return _e.prototype.insert=function(oe,ce){return this._size++,this._root=u(oe,ce,this._root,this._comparator)},_e.prototype.add=function(oe,ce){var ye=new g(oe,ce);this._root===null&&(ye.left=ye.right=null,this._size++,this._root=ye);var Y=this._comparator,Ne=v(oe,this._root,Y),Qe=Y(oe,Ne.key);return Qe===0?this._root=Ne:(Qe<0?(ye.left=Ne.left,ye.right=Ne,Ne.left=null):Qe>0&&(ye.right=Ne.right,ye.left=Ne,Ne.right=null),this._size++,this._root=ye),this._root},_e.prototype.remove=function(oe){this._root=this._remove(oe,this._root,this._comparator)},_e.prototype._remove=function(oe,ce,ye){var Y;if(ce===null)return null;ce=v(oe,ce,ye);var Ne=ye(oe,ce.key);return Ne===0?(ce.left===null?Y=ce.right:(Y=v(oe,ce.left,ye),Y.right=ce.right),this._size--,Y):ce},_e.prototype.pop=function(){var oe=this._root;if(oe){for(;oe.left;)oe=oe.left;return this._root=v(oe.key,this._root,this._comparator),this._root=this._remove(oe.key,this._root,this._comparator),{key:oe.key,data:oe.data}}return null},_e.prototype.findStatic=function(oe){for(var ce=this._root,ye=this._comparator;ce;){var Y=ye(oe,ce.key);if(Y===0)return ce;Y<0?ce=ce.left:ce=ce.right}return null},_e.prototype.find=function(oe){return this._root&&(this._root=v(oe,this._root,this._comparator),this._comparator(oe,this._root.key)!==0)?null:this._root},_e.prototype.contains=function(oe){for(var ce=this._root,ye=this._comparator;ce;){var Y=ye(oe,ce.key);if(Y===0)return!0;Y<0?ce=ce.left:ce=ce.right}return!1},_e.prototype.forEach=function(oe,ce){for(var ye=this._root,Y=[],Ne=!1;!Ne;)ye!==null?(Y.push(ye),ye=ye.left):Y.length!==0?(ye=Y.pop(),oe.call(ce,ye),ye=ye.right):Ne=!0;return this},_e.prototype.range=function(oe,ce,ye,Y){for(var Ne=[],Qe=this._comparator,mt=this._root,Ve;Ne.length!==0||mt;)if(mt)Ne.push(mt),mt=mt.left;else{if(mt=Ne.pop(),Ve=Qe(mt.key,ce),Ve>0)break;if(Qe(mt.key,oe)>=0&&ye.call(Y,mt))return this;mt=mt.right}return this},_e.prototype.keys=function(){var oe=[];return this.forEach(function(ce){var ye=ce.key;return oe.push(ye)}),oe},_e.prototype.values=function(){var oe=[];return this.forEach(function(ce){var ye=ce.data;return oe.push(ye)}),oe},_e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},_e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},_e.prototype.minNode=function(oe){if(oe===void 0&&(oe=this._root),oe)for(;oe.left;)oe=oe.left;return oe},_e.prototype.maxNode=function(oe){if(oe===void 0&&(oe=this._root),oe)for(;oe.right;)oe=oe.right;return oe},_e.prototype.at=function(oe){for(var ce=this._root,ye=!1,Y=0,Ne=[];!ye;)if(ce)Ne.push(ce),ce=ce.left;else if(Ne.length>0){if(ce=Ne.pop(),Y===oe)return ce;Y++,ce=ce.right}else ye=!0;return null},_e.prototype.next=function(oe){var ce=this._root,ye=null;if(oe.right){for(ye=oe.right;ye.left;)ye=ye.left;return ye}for(var Y=this._comparator;ce;){var Ne=Y(oe.key,ce.key);if(Ne===0)break;Ne<0?(ye=ce,ce=ce.left):ce=ce.right}return ye},_e.prototype.prev=function(oe){var ce=this._root,ye=null;if(oe.left!==null){for(ye=oe.left;ye.right;)ye=ye.right;return ye}for(var Y=this._comparator;ce;){var Ne=Y(oe.key,ce.key);if(Ne===0)break;Ne<0?ce=ce.left:(ye=ce,ce=ce.right)}return ye},_e.prototype.clear=function(){return this._root=null,this._size=0,this},_e.prototype.toList=function(){return w(this._root)},_e.prototype.load=function(oe,ce,ye){ce===void 0&&(ce=[]),ye===void 0&&(ye=!1);var Y=oe.length,Ne=this._comparator;if(ye&&Z(oe,ce,0,Y-1,Ne),this._root===null)this._root=b(oe,ce,0,Y),this._size=Y;else{var Qe=F(this.toList(),A(oe,ce),Ne);Y=this._size+Y,this._root=D({head:Qe},0,Y)}return this},_e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(_e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(_e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),_e.prototype.toString=function(oe){oe===void 0&&(oe=function(Y){return String(Y.key)});var ce=[];return o(this._root,"",!0,function(ye){return ce.push(ye)},oe),ce.join("")},_e.prototype.update=function(oe,ce,ye){var Y=this._comparator,Ne=t(oe,this._root,Y),Qe=Ne.left,mt=Ne.right;Y(oe,ce)<0?mt=u(ce,ye,mt,Y):Qe=u(ce,ye,Qe,Y),this._root=e(Qe,mt,Y)},_e.prototype.split=function(oe){return t(oe,this._root,this._comparator)},_e}();function b(_e,oe,ce,ye){var Y=ye-ce;if(Y>0){var Ne=ce+Math.floor(Y/2),Qe=_e[Ne],mt=oe[Ne],Ve=new g(Qe,mt);return Ve.left=b(_e,oe,ce,Ne),Ve.right=b(_e,oe,Ne+1,ye),Ve}return null}function A(_e,oe){for(var ce=new g(null,null),ye=ce,Y=0;Y<_e.length;Y++)ye=ye.next=new g(_e[Y],oe[Y]);return ye.next=null,ce.next}function w(_e){for(var oe=_e,ce=[],ye=!1,Y=new g(null,null),Ne=Y;!ye;)oe?(ce.push(oe),oe=oe.left):ce.length>0?(oe=Ne=Ne.next=ce.pop(),oe=oe.right):ye=!0;return Ne.next=null,Y.next}function D(_e,oe,ce){var ye=ce-oe;if(ye>0){var Y=oe+Math.floor(ye/2),Ne=D(_e,oe,Y),Qe=_e.head;return Qe.left=Ne,_e.head=_e.head.next,Qe.right=D(_e,Y+1,ce),Qe}return null}function F(_e,oe,ce){for(var ye=new g(null,null),Y=ye,Ne=_e,Qe=oe;Ne!==null&&Qe!==null;)ce(Ne.key,Qe.key)<0?(Y.next=Ne,Ne=Ne.next):(Y.next=Qe,Qe=Qe.next),Y=Y.next;return Ne!==null?Y.next=Ne:Qe!==null&&(Y.next=Qe),ye.next}function Z(_e,oe,ce,ye,Y){if(!(ce>=ye)){for(var Ne=_e[ce+ye>>1],Qe=ce-1,mt=ye+1;;){do Qe++;while(Y(_e[Qe],Ne)<0);do mt--;while(Y(_e[mt],Ne)>0);if(Qe>=mt)break;var Ve=_e[Qe];_e[Qe]=_e[mt],_e[mt]=Ve,Ve=oe[Qe],oe[Qe]=oe[mt],oe[mt]=Ve}Z(_e,oe,ce,mt,Y),Z(_e,oe,mt+1,ye,Y)}}var L=function(oe,ce){return oe.ll.x<=ce.x&&ce.x<=oe.ur.x&&oe.ll.y<=ce.y&&ce.y<=oe.ur.y},W=function(oe,ce){if(ce.ur.x<oe.ll.x||oe.ur.x<ce.ll.x||ce.ur.y<oe.ll.y||oe.ur.y<ce.ll.y)return null;var ye=oe.ll.x<ce.ll.x?ce.ll.x:oe.ll.x,Y=oe.ur.x<ce.ur.x?oe.ur.x:ce.ur.x,Ne=oe.ll.y<ce.ll.y?ce.ll.y:oe.ll.y,Qe=oe.ur.y<ce.ur.y?oe.ur.y:ce.ur.y;return{ll:{x:ye,y:Ne},ur:{x:Y,y:Qe}}},k=Number.EPSILON;k===void 0&&(k=Math.pow(2,-52));var de=k*k,H=function(oe,ce){if(-k<oe&&oe<k&&-k<ce&&ce<k)return 0;var ye=oe-ce;return ye*ye<de*oe*ce?0:oe<ce?-1:1},ue=function(){function _e(){p(this,_e),this.reset()}return d(_e,[{key:"reset",value:function(){this.xRounder=new ve,this.yRounder=new ve}},{key:"round",value:function(ce,ye){return{x:this.xRounder.round(ce),y:this.yRounder.round(ye)}}}]),_e}(),ve=function(){function _e(){p(this,_e),this.tree=new c,this.round(0)}return d(_e,[{key:"round",value:function(ce){var ye=this.tree.add(ce),Y=this.tree.prev(ye);if(Y!==null&&H(ye.key,Y.key)===0)return this.tree.remove(ce),Y.key;var Ne=this.tree.next(ye);return Ne!==null&&H(ye.key,Ne.key)===0?(this.tree.remove(ce),Ne.key):ce}}]),_e}(),ke=new ue,Ae=function(oe,ce){return oe.x*ce.y-oe.y*ce.x},be=function(oe,ce){return oe.x*ce.x+oe.y*ce.y},G=function(oe,ce,ye){var Y={x:ce.x-oe.x,y:ce.y-oe.y},Ne={x:ye.x-oe.x,y:ye.y-oe.y},Qe=Ae(Y,Ne);return H(Qe,0)},ie=function(oe){return Math.sqrt(be(oe,oe))},V=function(oe,ce,ye){var Y={x:ce.x-oe.x,y:ce.y-oe.y},Ne={x:ye.x-oe.x,y:ye.y-oe.y};return Ae(Ne,Y)/ie(Ne)/ie(Y)},ae=function(oe,ce,ye){var Y={x:ce.x-oe.x,y:ce.y-oe.y},Ne={x:ye.x-oe.x,y:ye.y-oe.y};return be(Ne,Y)/ie(Ne)/ie(Y)},K=function(oe,ce,ye){return ce.y===0?null:{x:oe.x+ce.x/ce.y*(ye-oe.y),y:ye}},he=function(oe,ce,ye){return ce.x===0?null:{x:ye,y:oe.y+ce.y/ce.x*(ye-oe.x)}},Se=function(oe,ce,ye,Y){if(ce.x===0)return he(ye,Y,oe.x);if(Y.x===0)return he(oe,ce,ye.x);if(ce.y===0)return K(ye,Y,oe.y);if(Y.y===0)return K(oe,ce,ye.y);var Ne=Ae(ce,Y);if(Ne==0)return null;var Qe={x:ye.x-oe.x,y:ye.y-oe.y},mt=Ae(Qe,ce)/Ne,Ve=Ae(Qe,Y)/Ne,rt=oe.x+Ve*ce.x,yt=ye.x+mt*Y.x,Tt=oe.y+Ve*ce.y,Ht=ye.y+mt*Y.y,en=(rt+yt)/2,wt=(Tt+Ht)/2;return{x:en,y:wt}},Fe=function(){d(_e,null,[{key:"compare",value:function(ce,ye){var Y=_e.comparePoints(ce.point,ye.point);return Y!==0?Y:(ce.point!==ye.point&&ce.link(ye),ce.isLeft!==ye.isLeft?ce.isLeft?1:-1:lt.compare(ce.segment,ye.segment))}},{key:"comparePoints",value:function(ce,ye){return ce.x<ye.x?-1:ce.x>ye.x?1:ce.y<ye.y?-1:ce.y>ye.y?1:0}}]);function _e(oe,ce){p(this,_e),oe.events===void 0?oe.events=[this]:oe.events.push(this),this.point=oe,this.isLeft=ce}return d(_e,[{key:"link",value:function(ce){if(ce.point===this.point)throw new Error("Tried to link already linked events");for(var ye=ce.point.events,Y=0,Ne=ye.length;Y<Ne;Y++){var Qe=ye[Y];this.point.events.push(Qe),Qe.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ce=this.point.events.length,ye=0;ye<ce;ye++){var Y=this.point.events[ye];if(Y.segment.consumedBy===void 0)for(var Ne=ye+1;Ne<ce;Ne++){var Qe=this.point.events[Ne];Qe.consumedBy===void 0&&Y.otherSE.point.events===Qe.otherSE.point.events&&Y.segment.consume(Qe.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ce=[],ye=0,Y=this.point.events.length;ye<Y;ye++){var Ne=this.point.events[ye];Ne!==this&&!Ne.segment.ringOut&&Ne.segment.isInResult()&&ce.push(Ne)}return ce}},{key:"getLeftmostComparator",value:function(ce){var ye=this,Y=new Map,Ne=function(mt){var Ve=mt.otherSE;Y.set(mt,{sine:V(ye.point,ce.point,Ve.point),cosine:ae(ye.point,ce.point,Ve.point)})};return function(Qe,mt){Y.has(Qe)||Ne(Qe),Y.has(mt)||Ne(mt);var Ve=Y.get(Qe),rt=Ve.sine,yt=Ve.cosine,Tt=Y.get(mt),Ht=Tt.sine,en=Tt.cosine;return rt>=0&&Ht>=0?yt<en?1:yt>en?-1:0:rt<0&&Ht<0?yt<en?-1:yt>en?1:0:Ht<rt?-1:Ht>rt?1:0}}}]),_e}(),nt=0,lt=function(){d(_e,null,[{key:"compare",value:function(ce,ye){var Y=ce.leftSE.point.x,Ne=ye.leftSE.point.x,Qe=ce.rightSE.point.x,mt=ye.rightSE.point.x;if(mt<Y)return 1;if(Qe<Ne)return-1;var Ve=ce.leftSE.point.y,rt=ye.leftSE.point.y,yt=ce.rightSE.point.y,Tt=ye.rightSE.point.y;if(Y<Ne){if(rt<Ve&&rt<yt)return 1;if(rt>Ve&&rt>yt)return-1;var Ht=ce.comparePoint(ye.leftSE.point);if(Ht<0)return 1;if(Ht>0)return-1;var en=ye.comparePoint(ce.rightSE.point);return en!==0?en:-1}if(Y>Ne){if(Ve<rt&&Ve<Tt)return-1;if(Ve>rt&&Ve>Tt)return 1;var wt=ye.comparePoint(ce.leftSE.point);if(wt!==0)return wt;var Mn=ce.comparePoint(ye.rightSE.point);return Mn<0?1:Mn>0?-1:1}if(Ve<rt)return-1;if(Ve>rt)return 1;if(Qe<mt){var kn=ye.comparePoint(ce.rightSE.point);if(kn!==0)return kn}if(Qe>mt){var jn=ce.comparePoint(ye.rightSE.point);if(jn<0)return 1;if(jn>0)return-1}if(Qe!==mt){var mn=yt-Ve,cr=Qe-Y,Cr=Tt-rt,mi=mt-Ne;if(mn>cr&&Cr<mi)return 1;if(mn<cr&&Cr>mi)return-1}return Qe>mt?1:Qe<mt||yt<Tt?-1:yt>Tt?1:ce.id<ye.id?-1:ce.id>ye.id?1:0}}]);function _e(oe,ce,ye,Y){p(this,_e),this.id=++nt,this.leftSE=oe,oe.segment=this,oe.otherSE=ce,this.rightSE=ce,ce.segment=this,ce.otherSE=oe,this.rings=ye,this.windings=Y}return d(_e,[{key:"replaceRightSE",value:function(ce){this.rightSE=ce,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ce=this.leftSE.point.y,ye=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ce<ye?ce:ye},ur:{x:this.rightSE.point.x,y:ce>ye?ce:ye}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ce){return ce.x===this.leftSE.point.x&&ce.y===this.leftSE.point.y||ce.x===this.rightSE.point.x&&ce.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ce){if(this.isAnEndpoint(ce))return 0;var ye=this.leftSE.point,Y=this.rightSE.point,Ne=this.vector();if(ye.x===Y.x)return ce.x===ye.x?0:ce.x<ye.x?1:-1;var Qe=(ce.y-ye.y)/Ne.y,mt=ye.x+Qe*Ne.x;if(ce.x===mt)return 0;var Ve=(ce.x-ye.x)/Ne.x,rt=ye.y+Ve*Ne.y;return ce.y===rt?0:ce.y<rt?-1:1}},{key:"getIntersection",value:function(ce){var ye=this.bbox(),Y=ce.bbox(),Ne=W(ye,Y);if(Ne===null)return null;var Qe=this.leftSE.point,mt=this.rightSE.point,Ve=ce.leftSE.point,rt=ce.rightSE.point,yt=L(ye,Ve)&&this.comparePoint(Ve)===0,Tt=L(Y,Qe)&&ce.comparePoint(Qe)===0,Ht=L(ye,rt)&&this.comparePoint(rt)===0,en=L(Y,mt)&&ce.comparePoint(mt)===0;if(Tt&&yt)return en&&!Ht?mt:!en&&Ht?rt:null;if(Tt)return Ht&&Qe.x===rt.x&&Qe.y===rt.y?null:Qe;if(yt)return en&&mt.x===Ve.x&&mt.y===Ve.y?null:Ve;if(en&&Ht)return null;if(en)return mt;if(Ht)return rt;var wt=Se(Qe,this.vector(),Ve,ce.vector());return wt===null||!L(Ne,wt)?null:ke.round(wt.x,wt.y)}},{key:"split",value:function(ce){var ye=[],Y=ce.events!==void 0,Ne=new Fe(ce,!0),Qe=new Fe(ce,!1),mt=this.rightSE;this.replaceRightSE(Qe),ye.push(Qe),ye.push(Ne);var Ve=new _e(Ne,mt,this.rings.slice(),this.windings.slice());return Fe.comparePoints(Ve.leftSE.point,Ve.rightSE.point)>0&&Ve.swapEvents(),Fe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Y&&(Ne.checkForConsuming(),Qe.checkForConsuming()),ye}},{key:"swapEvents",value:function(){var ce=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ce,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ye=0,Y=this.windings.length;ye<Y;ye++)this.windings[ye]*=-1}},{key:"consume",value:function(ce){for(var ye=this,Y=ce;ye.consumedBy;)ye=ye.consumedBy;for(;Y.consumedBy;)Y=Y.consumedBy;var Ne=_e.compare(ye,Y);if(Ne!==0){if(Ne>0){var Qe=ye;ye=Y,Y=Qe}if(ye.prev===Y){var mt=ye;ye=Y,Y=mt}for(var Ve=0,rt=Y.rings.length;Ve<rt;Ve++){var yt=Y.rings[Ve],Tt=Y.windings[Ve],Ht=ye.rings.indexOf(yt);Ht===-1?(ye.rings.push(yt),ye.windings.push(Tt)):ye.windings[Ht]+=Tt}Y.rings=null,Y.windings=null,Y.consumedBy=ye,Y.leftSE.consumedBy=ye.leftSE,Y.rightSE.consumedBy=ye.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var ce=this.prev.consumedBy||this.prev;this._beforeState=ce.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var ce=this.beforeState();this._afterState={rings:ce.rings.slice(0),windings:ce.windings.slice(0),multiPolys:[]};for(var ye=this._afterState.rings,Y=this._afterState.windings,Ne=this._afterState.multiPolys,Qe=0,mt=this.rings.length;Qe<mt;Qe++){var Ve=this.rings[Qe],rt=this.windings[Qe],yt=ye.indexOf(Ve);yt===-1?(ye.push(Ve),Y.push(rt)):Y[yt]+=rt}for(var Tt=[],Ht=[],en=0,wt=ye.length;en<wt;en++)if(Y[en]!==0){var Mn=ye[en],kn=Mn.poly;if(Ht.indexOf(kn)===-1)if(Mn.isExterior)Tt.push(kn);else{Ht.indexOf(kn)===-1&&Ht.push(kn);var jn=Tt.indexOf(Mn.poly);jn!==-1&&Tt.splice(jn,1)}}for(var mn=0,cr=Tt.length;mn<cr;mn++){var Cr=Tt[mn].multiPoly;Ne.indexOf(Cr)===-1&&Ne.push(Cr)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var ce=this.beforeState().multiPolys,ye=this.afterState().multiPolys;switch(Ze.type){case"union":{var Y=ce.length===0,Ne=ye.length===0;this._isInResult=Y!==Ne;break}case"intersection":{var Qe,mt;ce.length<ye.length?(Qe=ce.length,mt=ye.length):(Qe=ye.length,mt=ce.length),this._isInResult=mt===Ze.numMultiPolys&&Qe<mt;break}case"xor":{var Ve=Math.abs(ce.length-ye.length);this._isInResult=Ve%2===1;break}case"difference":{var rt=function(Tt){return Tt.length===1&&Tt[0].isSubject};this._isInResult=rt(ce)!==rt(ye);break}default:throw new Error("Unrecognized operation type found ".concat(Ze.type))}return this._isInResult}}],[{key:"fromRing",value:function(ce,ye,Y){var Ne,Qe,mt,Ve=Fe.comparePoints(ce,ye);if(Ve<0)Ne=ce,Qe=ye,mt=1;else if(Ve>0)Ne=ye,Qe=ce,mt=-1;else throw new Error("Tried to create degenerate segment at [".concat(ce.x,", ").concat(ce.y,"]"));var rt=new Fe(Ne,!0),yt=new Fe(Qe,!1);return new _e(rt,yt,[Y],[mt])}}]),_e}(),Gt=function(){function _e(oe,ce,ye){if(p(this,_e),!Array.isArray(oe)||oe.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ce,this.isExterior=ye,this.segments=[],typeof oe[0][0]!="number"||typeof oe[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Y=ke.round(oe[0][0],oe[0][1]);this.bbox={ll:{x:Y.x,y:Y.y},ur:{x:Y.x,y:Y.y}};for(var Ne=Y,Qe=1,mt=oe.length;Qe<mt;Qe++){if(typeof oe[Qe][0]!="number"||typeof oe[Qe][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ve=ke.round(oe[Qe][0],oe[Qe][1]);Ve.x===Ne.x&&Ve.y===Ne.y||(this.segments.push(lt.fromRing(Ne,Ve,this)),Ve.x<this.bbox.ll.x&&(this.bbox.ll.x=Ve.x),Ve.y<this.bbox.ll.y&&(this.bbox.ll.y=Ve.y),Ve.x>this.bbox.ur.x&&(this.bbox.ur.x=Ve.x),Ve.y>this.bbox.ur.y&&(this.bbox.ur.y=Ve.y),Ne=Ve)}(Y.x!==Ne.x||Y.y!==Ne.y)&&this.segments.push(lt.fromRing(Ne,Y,this))}return d(_e,[{key:"getSweepEvents",value:function(){for(var ce=[],ye=0,Y=this.segments.length;ye<Y;ye++){var Ne=this.segments[ye];ce.push(Ne.leftSE),ce.push(Ne.rightSE)}return ce}}]),_e}(),pn=function(){function _e(oe,ce){if(p(this,_e),!Array.isArray(oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Gt(oe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ye=1,Y=oe.length;ye<Y;ye++){var Ne=new Gt(oe[ye],this,!1);Ne.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ne.bbox.ll.x),Ne.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ne.bbox.ll.y),Ne.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ne.bbox.ur.x),Ne.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ne.bbox.ur.y),this.interiorRings.push(Ne)}this.multiPoly=ce}return d(_e,[{key:"getSweepEvents",value:function(){for(var ce=this.exteriorRing.getSweepEvents(),ye=0,Y=this.interiorRings.length;ye<Y;ye++)for(var Ne=this.interiorRings[ye].getSweepEvents(),Qe=0,mt=Ne.length;Qe<mt;Qe++)ce.push(Ne[Qe]);return ce}}]),_e}(),$n=function(){function _e(oe,ce){if(p(this,_e),!Array.isArray(oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof oe[0][0][0]=="number"&&(oe=[oe])}catch(Qe){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ye=0,Y=oe.length;ye<Y;ye++){var Ne=new pn(oe[ye],this);Ne.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ne.bbox.ll.x),Ne.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ne.bbox.ll.y),Ne.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ne.bbox.ur.x),Ne.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ne.bbox.ur.y),this.polys.push(Ne)}this.isSubject=ce}return d(_e,[{key:"getSweepEvents",value:function(){for(var ce=[],ye=0,Y=this.polys.length;ye<Y;ye++)for(var Ne=this.polys[ye].getSweepEvents(),Qe=0,mt=Ne.length;Qe<mt;Qe++)ce.push(Ne[Qe]);return ce}}]),_e}(),Ln=function(){d(_e,null,[{key:"factory",value:function(ce){for(var ye=[],Y=0,Ne=ce.length;Y<Ne;Y++){var Qe=ce[Y];if(!(!Qe.isInResult()||Qe.ringOut)){for(var mt=null,Ve=Qe.leftSE,rt=Qe.rightSE,yt=[Ve],Tt=Ve.point,Ht=[];mt=Ve,Ve=rt,yt.push(Ve),Ve.point!==Tt;)for(;;){var en=Ve.getAvailableLinkedEvents();if(en.length===0){var wt=yt[0].point,Mn=yt[yt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(wt.x,",")+" ".concat(wt.y,"]. Last matching segment found ends at")+" [".concat(Mn.x,", ").concat(Mn.y,"]."))}if(en.length===1){rt=en[0].otherSE;break}for(var kn=null,jn=0,mn=Ht.length;jn<mn;jn++)if(Ht[jn].point===Ve.point){kn=jn;break}if(kn!==null){var cr=Ht.splice(kn)[0],Cr=yt.splice(cr.index);Cr.unshift(Cr[0].otherSE),ye.push(new _e(Cr.reverse()));continue}Ht.push({index:yt.length,point:Ve.point});var mi=Ve.getLeftmostComparator(mt);rt=en.sort(mi)[0].otherSE;break}ye.push(new _e(yt))}}return ye}}]);function _e(oe){p(this,_e),this.events=oe;for(var ce=0,ye=oe.length;ce<ye;ce++)oe[ce].segment.ringOut=this;this.poly=null}return d(_e,[{key:"getGeom",value:function(){for(var ce=this.events[0].point,ye=[ce],Y=1,Ne=this.events.length-1;Y<Ne;Y++){var Qe=this.events[Y].point,mt=this.events[Y+1].point;G(Qe,ce,mt)!==0&&(ye.push(Qe),ce=Qe)}if(ye.length===1)return null;var Ve=ye[0],rt=ye[1];G(Ve,ce,rt)===0&&ye.shift(),ye.push(ye[0]);for(var yt=this.isExteriorRing()?1:-1,Tt=this.isExteriorRing()?0:ye.length-1,Ht=this.isExteriorRing()?ye.length:-1,en=[],wt=Tt;wt!=Ht;wt+=yt)en.push([ye[wt].x,ye[wt].y]);return en}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var ce=this.enclosingRing();this._isExteriorRing=ce?!ce.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ce=this.events[0],ye=1,Y=this.events.length;ye<Y;ye++){var Ne=this.events[ye];Fe.compare(ce,Ne)>0&&(ce=Ne)}for(var Qe=ce.segment.prevInResult(),mt=Qe?Qe.prevInResult():null;;){if(!Qe)return null;if(!mt)return Qe.ringOut;if(mt.ringOut!==Qe.ringOut)return mt.ringOut.enclosingRing()!==Qe.ringOut?Qe.ringOut:Qe.ringOut.enclosingRing();Qe=mt.prevInResult(),mt=Qe?Qe.prevInResult():null}}}]),_e}(),st=function(){function _e(oe){p(this,_e),this.exteriorRing=oe,oe.poly=this,this.interiorRings=[]}return d(_e,[{key:"addInterior",value:function(ce){this.interiorRings.push(ce),ce.poly=this}},{key:"getGeom",value:function(){var ce=[this.exteriorRing.getGeom()];if(ce[0]===null)return null;for(var ye=0,Y=this.interiorRings.length;ye<Y;ye++){var Ne=this.interiorRings[ye].getGeom();Ne!==null&&ce.push(Ne)}return ce}}]),_e}(),xt=function(){function _e(oe){p(this,_e),this.rings=oe,this.polys=this._composePolys(oe)}return d(_e,[{key:"getGeom",value:function(){for(var ce=[],ye=0,Y=this.polys.length;ye<Y;ye++){var Ne=this.polys[ye].getGeom();Ne!==null&&ce.push(Ne)}return ce}},{key:"_composePolys",value:function(ce){for(var ye=[],Y=0,Ne=ce.length;Y<Ne;Y++){var Qe=ce[Y];if(!Qe.poly)if(Qe.isExteriorRing())ye.push(new st(Qe));else{var mt=Qe.enclosingRing();mt.poly||ye.push(new st(mt)),mt.poly.addInterior(Qe)}}return ye}}]),_e}(),tn=function(){function _e(oe){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lt.compare;p(this,_e),this.queue=oe,this.tree=new c(ce),this.segments=[]}return d(_e,[{key:"process",value:function(ce){var ye=ce.segment,Y=[];if(ce.consumedBy)return ce.isLeft?this.queue.remove(ce.otherSE):this.tree.remove(ye),Y;var Ne=ce.isLeft?this.tree.insert(ye):this.tree.find(ye);if(!Ne)throw new Error("Unable to find segment #".concat(ye.id," ")+"[".concat(ye.leftSE.point.x,", ").concat(ye.leftSE.point.y,"] -> ")+"[".concat(ye.rightSE.point.x,", ").concat(ye.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Qe=Ne,mt=Ne,Ve=void 0,rt=void 0;Ve===void 0;)Qe=this.tree.prev(Qe),Qe===null?Ve=null:Qe.key.consumedBy===void 0&&(Ve=Qe.key);for(;rt===void 0;)mt=this.tree.next(mt),mt===null?rt=null:mt.key.consumedBy===void 0&&(rt=mt.key);if(ce.isLeft){var yt=null;if(Ve){var Tt=Ve.getIntersection(ye);if(Tt!==null&&(ye.isAnEndpoint(Tt)||(yt=Tt),!Ve.isAnEndpoint(Tt)))for(var Ht=this._splitSafely(Ve,Tt),en=0,wt=Ht.length;en<wt;en++)Y.push(Ht[en])}var Mn=null;if(rt){var kn=rt.getIntersection(ye);if(kn!==null&&(ye.isAnEndpoint(kn)||(Mn=kn),!rt.isAnEndpoint(kn)))for(var jn=this._splitSafely(rt,kn),mn=0,cr=jn.length;mn<cr;mn++)Y.push(jn[mn])}if(yt!==null||Mn!==null){var Cr=null;if(yt===null)Cr=Mn;else if(Mn===null)Cr=yt;else{var mi=Fe.comparePoints(yt,Mn);Cr=mi<=0?yt:Mn}this.queue.remove(ye.rightSE),Y.push(ye.rightSE);for(var $r=ye.split(Cr),Sr=0,dr=$r.length;Sr<dr;Sr++)Y.push($r[Sr])}Y.length>0?(this.tree.remove(ye),Y.push(ce)):(this.segments.push(ye),ye.prev=Ve)}else{if(Ve&&rt){var Pr=Ve.getIntersection(rt);if(Pr!==null){if(!Ve.isAnEndpoint(Pr))for(var Hr=this._splitSafely(Ve,Pr),Xi=0,Kn=Hr.length;Xi<Kn;Xi++)Y.push(Hr[Xi]);if(!rt.isAnEndpoint(Pr))for(var Gn=this._splitSafely(rt,Pr),pt=0,Ha=Gn.length;pt<Ha;pt++)Y.push(Gn[pt])}}this.tree.remove(ye)}return Y}},{key:"_splitSafely",value:function(ce,ye){this.tree.remove(ce);var Y=ce.rightSE;this.queue.remove(Y);var Ne=ce.split(ye);return Ne.push(Y),ce.consumedBy===void 0&&this.tree.insert(ce),Ne}}]),_e}(),Un=typeof E!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,We=typeof E!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Yt=function(){function _e(){p(this,_e)}return d(_e,[{key:"run",value:function(ce,ye,Y){Ze.type=ce,ke.reset();for(var Ne=[new $n(ye,!0)],Qe=0,mt=Y.length;Qe<mt;Qe++)Ne.push(new $n(Y[Qe],!1));if(Ze.numMultiPolys=Ne.length,Ze.type==="difference")for(var Ve=Ne[0],rt=1;rt<Ne.length;)W(Ne[rt].bbox,Ve.bbox)!==null?rt++:Ne.splice(rt,1);if(Ze.type==="intersection"){for(var yt=0,Tt=Ne.length;yt<Tt;yt++)for(var Ht=Ne[yt],en=yt+1,wt=Ne.length;en<wt;en++)if(W(Ht.bbox,Ne[en].bbox)===null)return[]}for(var Mn=new c(Fe.compare),kn=0,jn=Ne.length;kn<jn;kn++)for(var mn=Ne[kn].getSweepEvents(),cr=0,Cr=mn.length;cr<Cr;cr++)if(Mn.insert(mn[cr]),Mn.size>Un)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var mi=new tn(Mn),$r=Mn.size,Sr=Mn.pop();Sr;){var dr=Sr.key;if(Mn.size===$r){var Pr=dr.segment;throw new Error("Unable to pop() ".concat(dr.isLeft?"left":"right"," SweepEvent ")+"[".concat(dr.point.x,", ").concat(dr.point.y,"] from segment #").concat(Pr.id," ")+"[".concat(Pr.leftSE.point.x,", ").concat(Pr.leftSE.point.y,"] -> ")+"[".concat(Pr.rightSE.point.x,", ").concat(Pr.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Mn.size>Un)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(mi.segments.length>We)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Hr=mi.process(dr),Xi=0,Kn=Hr.length;Xi<Kn;Xi++){var Gn=Hr[Xi];Gn.consumedBy===void 0&&Mn.insert(Gn)}$r=Mn.size,Sr=Mn.pop()}ke.reset();var pt=Ln.factory(mi.segments),Ha=new xt(pt);return Ha.getGeom()}}]),_e}(),Ze=new Yt,Pe=function(oe){for(var ce=arguments.length,ye=new Array(ce>1?ce-1:0),Y=1;Y<ce;Y++)ye[Y-1]=arguments[Y];return Ze.run("union",oe,ye)},ze=function(oe){for(var ce=arguments.length,ye=new Array(ce>1?ce-1:0),Y=1;Y<ce;Y++)ye[Y-1]=arguments[Y];return Ze.run("intersection",oe,ye)},ht=function(oe){for(var ce=arguments.length,ye=new Array(ce>1?ce-1:0),Y=1;Y<ce;Y++)ye[Y-1]=arguments[Y];return Ze.run("xor",oe,ye)},P=function(oe){for(var ce=arguments.length,ye=new Array(ce>1?ce-1:0),Y=1;Y<ce;Y++)ye[Y-1]=arguments[Y];return Ze.run("difference",oe,ye)},ne={union:Pe,intersection:ze,xor:ht,difference:P};return ne})},18335:function(Ie,S,y){"use strict";y.d(S,{zb:function(){return F},RV:function(){return Aa}});var E=y(67294),p=y(87462),M=y(91),d=y(4942),g=y(1413),x=y(74902),v=y(15671),u=y(43144),t=y(97326),e=y(60136),o=y(29388),c=y(50344),b=y(80334),A="RC_FORM_INTERNAL_HOOKS",w=function(){(0,b.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},D=E.createContext({getFieldValue:w,getFieldsValue:w,getFieldError:w,getFieldWarning:w,getFieldsError:w,isFieldsTouched:w,isFieldTouched:w,isFieldValidating:w,isFieldsValidating:w,resetFields:w,setFields:w,setFieldValue:w,setFieldsValue:w,validateFields:w,submit:w,getInternalHooks:function(){return w(),{dispatch:w,initEntityValue:w,registerField:w,useSubscribe:w,setInitialValues:w,destroyForm:w,setCallbacks:w,registerWatch:w,getFields:w,setValidateMessages:w,setPreserve:w,getInitialValue:w}}}),F=D,Z=E.createContext(null),L=Z,W=y(93409),k=y(74165),de=y(15861),H=y(34155);function ue(){return ue=Object.assign?Object.assign.bind():function(wn){for(var tt=1;tt<arguments.length;tt++){var $e=arguments[tt];for(var dt in $e)Object.prototype.hasOwnProperty.call($e,dt)&&(wn[dt]=$e[dt])}return wn},ue.apply(this,arguments)}function ve(wn,tt){wn.prototype=Object.create(tt.prototype),wn.prototype.constructor=wn,Ae(wn,tt)}function ke(wn){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($e){return $e.__proto__||Object.getPrototypeOf($e)},ke(wn)}function Ae(wn,tt){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Ke){return dt.__proto__=Ke,dt},Ae(wn,tt)}function be(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(wn){return!1}}function G(wn,tt,$e){return be()?G=Reflect.construct.bind():G=function(Ke,qt,nn){var ln=[null];ln.push.apply(ln,qt);var An=Function.bind.apply(Ke,ln),Oe=new An;return nn&&Ae(Oe,nn.prototype),Oe},G.apply(null,arguments)}function ie(wn){return Function.toString.call(wn).indexOf("[native code]")!==-1}function V(wn){var tt=typeof Map=="function"?new Map:void 0;return V=function(dt){if(dt===null||!ie(dt))return dt;if(typeof dt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof tt!="undefined"){if(tt.has(dt))return tt.get(dt);tt.set(dt,Ke)}function Ke(){return G(dt,arguments,ke(this).constructor)}return Ke.prototype=Object.create(dt.prototype,{constructor:{value:Ke,enumerable:!1,writable:!0,configurable:!0}}),Ae(Ke,dt)},V(wn)}var ae=/%[sdj%]/g,K=function(){};function he(wn){if(!wn||!wn.length)return null;var tt={};return wn.forEach(function($e){var dt=$e.field;tt[dt]=tt[dt]||[],tt[dt].push($e)}),tt}function Se(wn){for(var tt=arguments.length,$e=new Array(tt>1?tt-1:0),dt=1;dt<tt;dt++)$e[dt-1]=arguments[dt];var Ke=0,qt=$e.length;if(typeof wn=="function")return wn.apply(null,$e);if(typeof wn=="string"){var nn=wn.replace(ae,function(ln){if(ln==="%%")return"%";if(Ke>=qt)return ln;switch(ln){case"%s":return String($e[Ke++]);case"%d":return Number($e[Ke++]);case"%j":try{return JSON.stringify($e[Ke++])}catch(An){return"[Circular]"}break;default:return ln}});return nn}return wn}function Fe(wn){return wn==="string"||wn==="url"||wn==="hex"||wn==="email"||wn==="date"||wn==="pattern"}function nt(wn,tt){return!!(wn==null||tt==="array"&&Array.isArray(wn)&&!wn.length||Fe(tt)&&typeof wn=="string"&&!wn)}function lt(wn,tt,$e){var dt=[],Ke=0,qt=wn.length;function nn(ln){dt.push.apply(dt,ln||[]),Ke++,Ke===qt&&$e(dt)}wn.forEach(function(ln){tt(ln,nn)})}function Gt(wn,tt,$e){var dt=0,Ke=wn.length;function qt(nn){if(nn&&nn.length){$e(nn);return}var ln=dt;dt=dt+1,ln<Ke?tt(wn[ln],qt):$e([])}qt([])}function pn(wn){var tt=[];return Object.keys(wn).forEach(function($e){tt.push.apply(tt,wn[$e]||[])}),tt}var $n=function(wn){ve(tt,wn);function tt($e,dt){var Ke;return Ke=wn.call(this,"Async Validation Error")||this,Ke.errors=$e,Ke.fields=dt,Ke}return tt}(V(Error));function Ln(wn,tt,$e,dt,Ke){if(tt.first){var qt=new Promise(function(Ye,Nt){var jt=function(Rn){return dt(Rn),Rn.length?Nt(new $n(Rn,he(Rn))):Ye(Ke)},un=pn(wn);Gt(un,$e,jt)});return qt.catch(function(Ye){return Ye}),qt}var nn=tt.firstFields===!0?Object.keys(wn):tt.firstFields||[],ln=Object.keys(wn),An=ln.length,Oe=0,De=[],Be=new Promise(function(Ye,Nt){var jt=function(Hn){if(De.push.apply(De,Hn),Oe++,Oe===An)return dt(De),De.length?Nt(new $n(De,he(De))):Ye(Ke)};ln.length||(dt(De),Ye(Ke)),ln.forEach(function(un){var Hn=wn[un];nn.indexOf(un)!==-1?Gt(Hn,$e,jt):lt(Hn,$e,jt)})});return Be.catch(function(Ye){return Ye}),Be}function st(wn){return!!(wn&&wn.message!==void 0)}function xt(wn,tt){for(var $e=wn,dt=0;dt<tt.length;dt++){if($e==null)return $e;$e=$e[tt[dt]]}return $e}function tn(wn,tt){return function($e){var dt;return wn.fullFields?dt=xt(tt,wn.fullFields):dt=tt[$e.field||wn.fullField],st($e)?($e.field=$e.field||wn.fullField,$e.fieldValue=dt,$e):{message:typeof $e=="function"?$e():$e,fieldValue:dt,field:$e.field||wn.fullField}}}function Un(wn,tt){if(tt){for(var $e in tt)if(tt.hasOwnProperty($e)){var dt=tt[$e];typeof dt=="object"&&typeof wn[$e]=="object"?wn[$e]=ue({},wn[$e],dt):wn[$e]=dt}}return wn}var We=function(tt,$e,dt,Ke,qt,nn){tt.required&&(!dt.hasOwnProperty(tt.field)||nt($e,nn||tt.type))&&Ke.push(Se(qt.messages.required,tt.fullField))},Yt=function(tt,$e,dt,Ke,qt){(/^\s+$/.test($e)||$e==="")&&Ke.push(Se(qt.messages.whitespace,tt.fullField))},Ze,Pe=function(){if(Ze)return Ze;var wn="[a-fA-F\\d:]",tt=function($t){return $t&&$t.includeBoundaries?"(?:(?<=\\s|^)(?="+wn+")|(?<="+wn+")(?=\\s|$))":""},$e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",dt="[a-fA-F\\d]{1,4}",Ke=(`
(?:
(?:`+dt+":){7}(?:"+dt+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+dt+":){6}(?:"+$e+"|:"+dt+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+dt+":){5}(?::"+$e+"|(?::"+dt+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+dt+":){4}(?:(?::"+dt+"){0,1}:"+$e+"|(?::"+dt+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+dt+":){3}(?:(?::"+dt+"){0,2}:"+$e+"|(?::"+dt+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+dt+":){2}(?:(?::"+dt+"){0,3}:"+$e+"|(?::"+dt+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+dt+":){1}(?:(?::"+dt+"){0,4}:"+$e+"|(?::"+dt+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+dt+"){0,5}:"+$e+"|(?::"+dt+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),qt=new RegExp("(?:^"+$e+"$)|(?:^"+Ke+"$)"),nn=new RegExp("^"+$e+"$"),ln=new RegExp("^"+Ke+"$"),An=function($t){return $t&&$t.exact?qt:new RegExp("(?:"+tt($t)+$e+tt($t)+")|(?:"+tt($t)+Ke+tt($t)+")","g")};An.v4=function(or){return or&&or.exact?nn:new RegExp(""+tt(or)+$e+tt(or),"g")},An.v6=function(or){return or&&or.exact?ln:new RegExp(""+tt(or)+Ke+tt(or),"g")};var Oe="(?:(?:[a-z]+:)?//)",De="(?:\\S+(?::\\S*)?@)?",Be=An.v4().source,Ye=An.v6().source,Nt="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",jt="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",un="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Hn="(?::\\d{2,5})?",Rn='(?:[/?#][^\\s"]*)?',fr="(?:"+Oe+"|www\\.)"+De+"(?:localhost|"+Be+"|"+Ye+"|"+Nt+jt+un+")"+Hn+Rn;return Ze=new RegExp("(?:^"+fr+"$)","i"),Ze},ze={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ht={integer:function(tt){return ht.number(tt)&&parseInt(tt,10)===tt},float:function(tt){return ht.number(tt)&&!ht.integer(tt)},array:function(tt){return Array.isArray(tt)},regexp:function(tt){if(tt instanceof RegExp)return!0;try{return!!new RegExp(tt)}catch($e){return!1}},date:function(tt){return typeof tt.getTime=="function"&&typeof tt.getMonth=="function"&&typeof tt.getYear=="function"&&!isNaN(tt.getTime())},number:function(tt){return isNaN(tt)?!1:typeof tt=="number"},object:function(tt){return typeof tt=="object"&&!ht.array(tt)},method:function(tt){return typeof tt=="function"},email:function(tt){return typeof tt=="string"&&tt.length<=320&&!!tt.match(ze.email)},url:function(tt){return typeof tt=="string"&&tt.length<=2048&&!!tt.match(Pe())},hex:function(tt){return typeof tt=="string"&&!!tt.match(ze.hex)}},P=function(tt,$e,dt,Ke,qt){if(tt.required&&$e===void 0){We(tt,$e,dt,Ke,qt);return}var nn=["integer","float","array","regexp","object","method","email","number","date","url","hex"],ln=tt.type;nn.indexOf(ln)>-1?ht[ln]($e)||Ke.push(Se(qt.messages.types[ln],tt.fullField,tt.type)):ln&&typeof $e!==tt.type&&Ke.push(Se(qt.messages.types[ln],tt.fullField,tt.type))},ne=function(tt,$e,dt,Ke,qt){var nn=typeof tt.len=="number",ln=typeof tt.min=="number",An=typeof tt.max=="number",Oe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,De=$e,Be=null,Ye=typeof $e=="number",Nt=typeof $e=="string",jt=Array.isArray($e);if(Ye?Be="number":Nt?Be="string":jt&&(Be="array"),!Be)return!1;jt&&(De=$e.length),Nt&&(De=$e.replace(Oe,"_").length),nn?De!==tt.len&&Ke.push(Se(qt.messages[Be].len,tt.fullField,tt.len)):ln&&!An&&De<tt.min?Ke.push(Se(qt.messages[Be].min,tt.fullField,tt.min)):An&&!ln&&De>tt.max?Ke.push(Se(qt.messages[Be].max,tt.fullField,tt.max)):ln&&An&&(De<tt.min||De>tt.max)&&Ke.push(Se(qt.messages[Be].range,tt.fullField,tt.min,tt.max))},_e="enum",oe=function(tt,$e,dt,Ke,qt){tt[_e]=Array.isArray(tt[_e])?tt[_e]:[],tt[_e].indexOf($e)===-1&&Ke.push(Se(qt.messages[_e],tt.fullField,tt[_e].join(", ")))},ce=function(tt,$e,dt,Ke,qt){if(tt.pattern){if(tt.pattern instanceof RegExp)tt.pattern.lastIndex=0,tt.pattern.test($e)||Ke.push(Se(qt.messages.pattern.mismatch,tt.fullField,$e,tt.pattern));else if(typeof tt.pattern=="string"){var nn=new RegExp(tt.pattern);nn.test($e)||Ke.push(Se(qt.messages.pattern.mismatch,tt.fullField,$e,tt.pattern))}}},ye={required:We,whitespace:Yt,type:P,range:ne,enum:oe,pattern:ce},Y=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e,"string")&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt,"string"),nt($e,"string")||(ye.type(tt,$e,Ke,nn,qt),ye.range(tt,$e,Ke,nn,qt),ye.pattern(tt,$e,Ke,nn,qt),tt.whitespace===!0&&ye.whitespace(tt,$e,Ke,nn,qt))}dt(nn)},Ne=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&ye.type(tt,$e,Ke,nn,qt)}dt(nn)},Qe=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if($e===""&&($e=void 0),nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&(ye.type(tt,$e,Ke,nn,qt),ye.range(tt,$e,Ke,nn,qt))}dt(nn)},mt=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&ye.type(tt,$e,Ke,nn,qt)}dt(nn)},Ve=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),nt($e)||ye.type(tt,$e,Ke,nn,qt)}dt(nn)},rt=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&(ye.type(tt,$e,Ke,nn,qt),ye.range(tt,$e,Ke,nn,qt))}dt(nn)},yt=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&(ye.type(tt,$e,Ke,nn,qt),ye.range(tt,$e,Ke,nn,qt))}dt(nn)},Tt=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if($e==null&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt,"array"),$e!=null&&(ye.type(tt,$e,Ke,nn,qt),ye.range(tt,$e,Ke,nn,qt))}dt(nn)},Ht=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&ye.type(tt,$e,Ke,nn,qt)}dt(nn)},en="enum",wt=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),$e!==void 0&&ye[en](tt,$e,Ke,nn,qt)}dt(nn)},Mn=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e,"string")&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt),nt($e,"string")||ye.pattern(tt,$e,Ke,nn,qt)}dt(nn)},kn=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e,"date")&&!tt.required)return dt();if(ye.required(tt,$e,Ke,nn,qt),!nt($e,"date")){var An;$e instanceof Date?An=$e:An=new Date($e),ye.type(tt,An,Ke,nn,qt),An&&ye.range(tt,An.getTime(),Ke,nn,qt)}}dt(nn)},jn=function(tt,$e,dt,Ke,qt){var nn=[],ln=Array.isArray($e)?"array":typeof $e;ye.required(tt,$e,Ke,nn,qt,ln),dt(nn)},mn=function(tt,$e,dt,Ke,qt){var nn=tt.type,ln=[],An=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(An){if(nt($e,nn)&&!tt.required)return dt();ye.required(tt,$e,Ke,ln,qt,nn),nt($e,nn)||ye.type(tt,$e,Ke,ln,qt)}dt(ln)},cr=function(tt,$e,dt,Ke,qt){var nn=[],ln=tt.required||!tt.required&&Ke.hasOwnProperty(tt.field);if(ln){if(nt($e)&&!tt.required)return dt();ye.required(tt,$e,Ke,nn,qt)}dt(nn)},Cr={string:Y,method:Ne,number:Qe,boolean:mt,regexp:Ve,integer:rt,float:yt,array:Tt,object:Ht,enum:wt,pattern:Mn,date:kn,url:mn,hex:mn,email:mn,required:jn,any:cr};function mi(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var tt=JSON.parse(JSON.stringify(this));return tt.clone=this.clone,tt}}}var $r=mi(),Sr=function(){function wn($e){this.rules=null,this._messages=$r,this.define($e)}var tt=wn.prototype;return tt.define=function(dt){var Ke=this;if(!dt)throw new Error("Cannot configure a schema with no rules");if(typeof dt!="object"||Array.isArray(dt))throw new Error("Rules must be an object");this.rules={},Object.keys(dt).forEach(function(qt){var nn=dt[qt];Ke.rules[qt]=Array.isArray(nn)?nn:[nn]})},tt.messages=function(dt){return dt&&(this._messages=Un(mi(),dt)),this._messages},tt.validate=function(dt,Ke,qt){var nn=this;Ke===void 0&&(Ke={}),qt===void 0&&(qt=function(){});var ln=dt,An=Ke,Oe=qt;if(typeof An=="function"&&(Oe=An,An={}),!this.rules||Object.keys(this.rules).length===0)return Oe&&Oe(null,ln),Promise.resolve(ln);function De(un){var Hn=[],Rn={};function fr($t){if(Array.isArray($t)){var er;Hn=(er=Hn).concat.apply(er,$t)}else Hn.push($t)}for(var or=0;or<un.length;or++)fr(un[or]);Hn.length?(Rn=he(Hn),Oe(Hn,Rn)):Oe(null,ln)}if(An.messages){var Be=this.messages();Be===$r&&(Be=mi()),Un(Be,An.messages),An.messages=Be}else An.messages=this.messages();var Ye={},Nt=An.keys||Object.keys(this.rules);Nt.forEach(function(un){var Hn=nn.rules[un],Rn=ln[un];Hn.forEach(function(fr){var or=fr;typeof or.transform=="function"&&(ln===dt&&(ln=ue({},ln)),Rn=ln[un]=or.transform(Rn)),typeof or=="function"?or={validator:or}:or=ue({},or),or.validator=nn.getValidationMethod(or),or.validator&&(or.field=un,or.fullField=or.fullField||un,or.type=nn.getType(or),Ye[un]=Ye[un]||[],Ye[un].push({rule:or,value:Rn,source:ln,field:un}))})});var jt={};return Ln(Ye,An,function(un,Hn){var Rn=un.rule,fr=(Rn.type==="object"||Rn.type==="array")&&(typeof Rn.fields=="object"||typeof Rn.defaultField=="object");fr=fr&&(Rn.required||!Rn.required&&un.value),Rn.field=un.field;function or(Jn,Bt){return ue({},Bt,{fullField:Rn.fullField+"."+Jn,fullFields:Rn.fullFields?[].concat(Rn.fullFields,[Jn]):[Jn]})}function $t(Jn){Jn===void 0&&(Jn=[]);var Bt=Array.isArray(Jn)?Jn:[Jn];!An.suppressWarning&&Bt.length&&wn.warning("async-validator:",Bt),Bt.length&&Rn.message!==void 0&&(Bt=[].concat(Rn.message));var Ai=Bt.map(tn(Rn,ln));if(An.first&&Ai.length)return jt[Rn.field]=1,Hn(Ai);if(!fr)Hn(Ai);else{if(Rn.required&&!un.value)return Rn.message!==void 0?Ai=[].concat(Rn.message).map(tn(Rn,ln)):An.error&&(Ai=[An.error(Rn,Se(An.messages.required,Rn.field))]),Hn(Ai);var Le={};Rn.defaultField&&Object.keys(un.value).map(function(Ot){Le[Ot]=Rn.defaultField}),Le=ue({},Le,un.rule.fields);var Xe={};Object.keys(Le).forEach(function(Ot){var Vt=Le[Ot],gn=Array.isArray(Vt)?Vt:[Vt];Xe[Ot]=gn.map(or.bind(null,Ot))});var He=new wn(Xe);He.messages(An.messages),un.rule.options&&(un.rule.options.messages=An.messages,un.rule.options.error=An.error),He.validate(un.value,un.rule.options||An,function(Ot){var Vt=[];Ai&&Ai.length&&Vt.push.apply(Vt,Ai),Ot&&Ot.length&&Vt.push.apply(Vt,Ot),Hn(Vt.length?Vt:null)})}}var er;if(Rn.asyncValidator)er=Rn.asyncValidator(Rn,un.value,$t,un.source,An);else if(Rn.validator){try{er=Rn.validator(Rn,un.value,$t,un.source,An)}catch(Jn){console.error==null||console.error(Jn),An.suppressValidatorError||setTimeout(function(){throw Jn},0),$t(Jn.message)}er===!0?$t():er===!1?$t(typeof Rn.message=="function"?Rn.message(Rn.fullField||Rn.field):Rn.message||(Rn.fullField||Rn.field)+" fails"):er instanceof Array?$t(er):er instanceof Error&&$t(er.message)}er&&er.then&&er.then(function(){return $t()},function(Jn){return $t(Jn)})},function(un){De(un)},ln)},tt.getType=function(dt){if(dt.type===void 0&&dt.pattern instanceof RegExp&&(dt.type="pattern"),typeof dt.validator!="function"&&dt.type&&!Cr.hasOwnProperty(dt.type))throw new Error(Se("Unknown rule type %s",dt.type));return dt.type||"string"},tt.getValidationMethod=function(dt){if(typeof dt.validator=="function")return dt.validator;var Ke=Object.keys(dt),qt=Ke.indexOf("message");return qt!==-1&&Ke.splice(qt,1),Ke.length===1&&Ke[0]==="required"?Cr.required:Cr[this.getType(dt)]||void 0},wn}();Sr.register=function(tt,$e){if(typeof $e!="function")throw new Error("Cannot register a validator by type, validator is not a function");Cr[tt]=$e},Sr.warning=K,Sr.messages=$r,Sr.validators=Cr;var dr="'${name}' is not a valid ${type}",Pr={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:dr,method:dr,array:dr,object:dr,number:dr,date:dr,boolean:dr,integer:dr,float:dr,regexp:dr,email:dr,url:dr,hex:dr},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Hr=y(53236),Xi=Sr;function Kn(wn,tt){return wn.replace(/\$\{\w+\}/g,function($e){var dt=$e.slice(2,-1);return tt[dt]})}var Gn="CODE_LOGIC_ERROR";function pt(wn,tt,$e,dt,Ke){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,de.Z)((0,k.Z)().mark(function wn(tt,$e,dt,Ke,qt){var nn,ln,An,Oe,De,Be,Ye,Nt,jt;return(0,k.Z)().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:return nn=(0,g.Z)({},dt),delete nn.ruleIndex,Xi.warning=function(){},nn.validator&&(ln=nn.validator,nn.validator=function(){try{return ln.apply(void 0,arguments)}catch(Rn){return console.error(Rn),Promise.reject(Gn)}}),An=null,nn&&nn.type==="array"&&nn.defaultField&&(An=nn.defaultField,delete nn.defaultField),Oe=new Xi((0,d.Z)({},tt,[nn])),De=(0,Hr.gg)({},Pr,Ke.validateMessages),Oe.messages(De),Be=[],Hn.prev=10,Hn.next=13,Promise.resolve(Oe.validate((0,d.Z)({},tt,$e),(0,g.Z)({},Ke)));case 13:Hn.next=18;break;case 15:Hn.prev=15,Hn.t0=Hn.catch(10),Hn.t0.errors&&(Be=Hn.t0.errors.map(function(Rn,fr){var or=Rn.message,$t=or===Gn?De.default:or;return E.isValidElement($t)?E.cloneElement($t,{key:"error_".concat(fr)}):$t}));case 18:if(!(!Be.length&&An)){Hn.next=23;break}return Hn.next=21,Promise.all($e.map(function(Rn,fr){return pt("".concat(tt,".").concat(fr),Rn,An,Ke,qt)}));case 21:return Ye=Hn.sent,Hn.abrupt("return",Ye.reduce(function(Rn,fr){return[].concat((0,x.Z)(Rn),(0,x.Z)(fr))},[]));case 23:return Nt=(0,g.Z)((0,g.Z)({},dt),{},{name:tt,enum:(dt.enum||[]).join(", ")},qt),jt=Be.map(function(Rn){return typeof Rn=="string"?Kn(Rn,Nt):Rn}),Hn.abrupt("return",jt);case 26:case"end":return Hn.stop()}},wn,null,[[10,15]])})),Ha.apply(this,arguments)}function Sa(wn,tt,$e,dt,Ke,qt){var nn=wn.join("."),ln=$e.map(function(De,Be){var Ye=De.validator,Nt=(0,g.Z)((0,g.Z)({},De),{},{ruleIndex:Be});return Ye&&(Nt.validator=function(jt,un,Hn){var Rn=!1,fr=function(){for(var er=arguments.length,Jn=new Array(er),Bt=0;Bt<er;Bt++)Jn[Bt]=arguments[Bt];Promise.resolve().then(function(){(0,b.ZP)(!Rn,"Your validator function has already return a promise. `callback` will be ignored."),Rn||Hn.apply(void 0,Jn)})},or=Ye(jt,un,fr);Rn=or&&typeof or.then=="function"&&typeof or.catch=="function",(0,b.ZP)(Rn,"`callback` is deprecated. Please return a promise instead."),Rn&&or.then(function(){Hn()}).catch(function($t){Hn($t||" ")})}),Nt}).sort(function(De,Be){var Ye=De.warningOnly,Nt=De.ruleIndex,jt=Be.warningOnly,un=Be.ruleIndex;return!!Ye==!!jt?Nt-un:Ye?1:-1}),An;if(Ke===!0)An=new Promise(function(){var De=(0,de.Z)((0,k.Z)().mark(function Be(Ye,Nt){var jt,un,Hn;return(0,k.Z)().wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:jt=0;case 1:if(!(jt<ln.length)){fr.next=12;break}return un=ln[jt],fr.next=5,pt(nn,tt,un,dt,qt);case 5:if(Hn=fr.sent,!Hn.length){fr.next=9;break}return Nt([{errors:Hn,rule:un}]),fr.abrupt("return");case 9:jt+=1,fr.next=1;break;case 12:Ye([]);case 13:case"end":return fr.stop()}},Be)}));return function(Be,Ye){return De.apply(this,arguments)}}());else{var Oe=ln.map(function(De){return pt(nn,tt,De,dt,qt).then(function(Be){return{errors:Be,rule:De}})});An=(Ke?Ei(Oe):Qa(Oe)).then(function(De){return Promise.reject(De)})}return An.catch(function(De){return De}),An}function Qa(wn){return ma.apply(this,arguments)}function ma(){return ma=(0,de.Z)((0,k.Z)().mark(function wn(tt){return(0,k.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.abrupt("return",Promise.all(tt).then(function(Ke){var qt,nn=(qt=[]).concat.apply(qt,(0,x.Z)(Ke));return nn}));case 1:case"end":return dt.stop()}},wn)})),ma.apply(this,arguments)}function Ei(wn){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,de.Z)((0,k.Z)().mark(function wn(tt){var $e;return(0,k.Z)().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return $e=0,Ke.abrupt("return",new Promise(function(qt){tt.forEach(function(nn){nn.then(function(ln){ln.errors.length&&qt([ln]),$e+=1,$e===tt.length&&qt([])})})}));case 2:case"end":return Ke.stop()}},wn)})),Ia.apply(this,arguments)}var si=y(88306),it=["name"],Qn=[];function pe(wn,tt,$e,dt,Ke,qt){return typeof wn=="function"?wn(tt,$e,"source"in qt?{source:qt.source}:{}):dt!==Ke}var at=function(wn){(0,e.Z)($e,wn);var tt=(0,o.Z)($e);function $e(dt){var Ke;if((0,v.Z)(this,$e),Ke=tt.call(this,dt),Ke.state={resetCount:0},Ke.cancelRegisterFunc=null,Ke.mounted=!1,Ke.touched=!1,Ke.dirty=!1,Ke.validatePromise=void 0,Ke.prevValidating=void 0,Ke.errors=Qn,Ke.warnings=Qn,Ke.cancelRegister=function(){var An=Ke.props,Oe=An.preserve,De=An.isListField,Be=An.name;Ke.cancelRegisterFunc&&Ke.cancelRegisterFunc(De,Oe,(0,Hr.gU)(Be)),Ke.cancelRegisterFunc=null},Ke.getNamePath=function(){var An=Ke.props,Oe=An.name,De=An.fieldContext,Be=De.prefixName,Ye=Be===void 0?[]:Be;return Oe!==void 0?[].concat((0,x.Z)(Ye),(0,x.Z)(Oe)):[]},Ke.getRules=function(){var An=Ke.props,Oe=An.rules,De=Oe===void 0?[]:Oe,Be=An.fieldContext;return De.map(function(Ye){return typeof Ye=="function"?Ye(Be):Ye})},Ke.refresh=function(){Ke.mounted&&Ke.setState(function(An){var Oe=An.resetCount;return{resetCount:Oe+1}})},Ke.triggerMetaEvent=function(An){var Oe=Ke.props.onMetaChange;Oe==null||Oe((0,g.Z)((0,g.Z)({},Ke.getMeta()),{},{destroy:An}))},Ke.onStoreChange=function(An,Oe,De){var Be=Ke.props,Ye=Be.shouldUpdate,Nt=Be.dependencies,jt=Nt===void 0?[]:Nt,un=Be.onReset,Hn=De.store,Rn=Ke.getNamePath(),fr=Ke.getValue(An),or=Ke.getValue(Hn),$t=Oe&&(0,Hr.T1)(Oe,Rn);switch(De.type==="valueUpdate"&&De.source==="external"&&fr!==or&&(Ke.touched=!0,Ke.dirty=!0,Ke.validatePromise=null,Ke.errors=Qn,Ke.warnings=Qn,Ke.triggerMetaEvent()),De.type){case"reset":if(!Oe||$t){Ke.touched=!1,Ke.dirty=!1,Ke.validatePromise=void 0,Ke.errors=Qn,Ke.warnings=Qn,Ke.triggerMetaEvent(),un==null||un(),Ke.refresh();return}break;case"remove":{if(Ye){Ke.reRender();return}break}case"setField":{if($t){var er=De.data;"touched"in er&&(Ke.touched=er.touched),"validating"in er&&!("originRCField"in er)&&(Ke.validatePromise=er.validating?Promise.resolve([]):null),"errors"in er&&(Ke.errors=er.errors||Qn),"warnings"in er&&(Ke.warnings=er.warnings||Qn),Ke.dirty=!0,Ke.triggerMetaEvent(),Ke.reRender();return}if(Ye&&!Rn.length&&pe(Ye,An,Hn,fr,or,De)){Ke.reRender();return}break}case"dependenciesUpdate":{var Jn=jt.map(Hr.gU);if(Jn.some(function(Bt){return(0,Hr.T1)(De.relatedFields,Bt)})){Ke.reRender();return}break}default:if($t||(!jt.length||Rn.length||Ye)&&pe(Ye,An,Hn,fr,or,De)){Ke.reRender();return}break}Ye===!0&&Ke.reRender()},Ke.validateRules=function(An){var Oe=Ke.getNamePath(),De=Ke.getValue(),Be=Promise.resolve().then(function(){if(!Ke.mounted)return[];var Ye=Ke.props,Nt=Ye.validateFirst,jt=Nt===void 0?!1:Nt,un=Ye.messageVariables,Hn=An||{},Rn=Hn.triggerName,fr=Ke.getRules();Rn&&(fr=fr.filter(function($t){return $t}).filter(function($t){var er=$t.validateTrigger;if(!er)return!0;var Jn=(0,W.q)(er);return Jn.includes(Rn)}));var or=Sa(Oe,De,fr,An,jt,un);return or.catch(function($t){return $t}).then(function(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qn;if(Ke.validatePromise===Be){var er;Ke.validatePromise=null;var Jn=[],Bt=[];(er=$t.forEach)===null||er===void 0||er.call($t,function(Ai){var Le=Ai.rule.warningOnly,Xe=Ai.errors,He=Xe===void 0?Qn:Xe;Le?Bt.push.apply(Bt,(0,x.Z)(He)):Jn.push.apply(Jn,(0,x.Z)(He))}),Ke.errors=Jn,Ke.warnings=Bt,Ke.triggerMetaEvent(),Ke.reRender()}}),or});return Ke.validatePromise=Be,Ke.dirty=!0,Ke.errors=Qn,Ke.warnings=Qn,Ke.triggerMetaEvent(),Ke.reRender(),Be},Ke.isFieldValidating=function(){return!!Ke.validatePromise},Ke.isFieldTouched=function(){return Ke.touched},Ke.isFieldDirty=function(){if(Ke.dirty||Ke.props.initialValue!==void 0)return!0;var An=Ke.props.fieldContext,Oe=An.getInternalHooks(A),De=Oe.getInitialValue;return De(Ke.getNamePath())!==void 0},Ke.getErrors=function(){return Ke.errors},Ke.getWarnings=function(){return Ke.warnings},Ke.isListField=function(){return Ke.props.isListField},Ke.isList=function(){return Ke.props.isList},Ke.isPreserve=function(){return Ke.props.preserve},Ke.getMeta=function(){Ke.prevValidating=Ke.isFieldValidating();var An={touched:Ke.isFieldTouched(),validating:Ke.prevValidating,errors:Ke.errors,warnings:Ke.warnings,name:Ke.getNamePath(),validated:Ke.validatePromise===null};return An},Ke.getOnlyChild=function(An){if(typeof An=="function"){var Oe=Ke.getMeta();return(0,g.Z)((0,g.Z)({},Ke.getOnlyChild(An(Ke.getControlled(),Oe,Ke.props.fieldContext))),{},{isFunction:!0})}var De=(0,c.Z)(An);return De.length!==1||!E.isValidElement(De[0])?{child:De,isFunction:!1}:{child:De[0],isFunction:!1}},Ke.getValue=function(An){var Oe=Ke.props.fieldContext.getFieldsValue,De=Ke.getNamePath();return(0,si.Z)(An||Oe(!0),De)},Ke.getControlled=function(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=Ke.props,De=Oe.trigger,Be=Oe.validateTrigger,Ye=Oe.getValueFromEvent,Nt=Oe.normalize,jt=Oe.valuePropName,un=Oe.getValueProps,Hn=Oe.fieldContext,Rn=Be!==void 0?Be:Hn.validateTrigger,fr=Ke.getNamePath(),or=Hn.getInternalHooks,$t=Hn.getFieldsValue,er=or(A),Jn=er.dispatch,Bt=Ke.getValue(),Ai=un||function(Ot){return(0,d.Z)({},jt,Ot)},Le=An[De],Xe=(0,g.Z)((0,g.Z)({},An),Ai(Bt));Xe[De]=function(){Ke.touched=!0,Ke.dirty=!0,Ke.triggerMetaEvent();for(var Ot,Vt=arguments.length,gn=new Array(Vt),vt=0;vt<Vt;vt++)gn[vt]=arguments[vt];Ye?Ot=Ye.apply(void 0,gn):Ot=Hr.iZ.apply(void 0,[jt].concat(gn)),Nt&&(Ot=Nt(Ot,Bt,$t(!0))),Jn({type:"updateValue",namePath:fr,value:Ot}),Le&&Le.apply(void 0,gn)};var He=(0,W.q)(Rn||[]);return He.forEach(function(Ot){var Vt=Xe[Ot];Xe[Ot]=function(){Vt&&Vt.apply(void 0,arguments);var gn=Ke.props.rules;gn&&gn.length&&Jn({type:"validateField",namePath:fr,triggerName:Ot})}}),Xe},dt.fieldContext){var qt=dt.fieldContext.getInternalHooks,nn=qt(A),ln=nn.initEntityValue;ln((0,t.Z)(Ke))}return Ke}return(0,u.Z)($e,[{key:"componentDidMount",value:function(){var Ke=this.props,qt=Ke.shouldUpdate,nn=Ke.fieldContext;if(this.mounted=!0,nn){var ln=nn.getInternalHooks,An=ln(A),Oe=An.registerField;this.cancelRegisterFunc=Oe(this)}qt===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var Ke=this.state.resetCount,qt=this.props.children,nn=this.getOnlyChild(qt),ln=nn.child,An=nn.isFunction,Oe;return An?Oe=ln:E.isValidElement(ln)?Oe=E.cloneElement(ln,this.getControlled(ln.props)):((0,b.ZP)(!ln,"`children` of Field is not validate ReactElement."),Oe=ln),E.createElement(E.Fragment,{key:Ke},Oe)}}]),$e}(E.Component);at.contextType=F,at.defaultProps={trigger:"onChange",valuePropName:"value"};function Dt(wn){var tt=wn.name,$e=(0,M.Z)(wn,it),dt=E.useContext(F),Ke=E.useContext(L),qt=tt!==void 0?(0,Hr.gU)(tt):void 0,nn="keep";return $e.isListField||(nn="_".concat((qt||[]).join("_"))),E.createElement(at,(0,p.Z)({key:nn,name:qt,isListField:!!Ke},$e,{fieldContext:dt}))}var vn=Dt,bn=function(tt){var $e=tt.name,dt=tt.initialValue,Ke=tt.children,qt=tt.rules,nn=tt.validateTrigger,ln=tt.isListField,An=E.useContext(F),Oe=E.useContext(L),De=E.useRef({keys:[],id:0}),Be=De.current,Ye=E.useMemo(function(){var Hn=(0,Hr.gU)(An.prefixName)||[];return[].concat((0,x.Z)(Hn),(0,x.Z)((0,Hr.gU)($e)))},[An.prefixName,$e]),Nt=E.useMemo(function(){return(0,g.Z)((0,g.Z)({},An),{},{prefixName:Ye})},[An,Ye]),jt=E.useMemo(function(){return{getKey:function(Rn){var fr=Ye.length,or=Rn[fr];return[Be.keys[or],Rn.slice(fr+1)]}}},[Ye]);if(typeof Ke!="function")return(0,b.ZP)(!1,"Form.List only accepts function as children."),null;var un=function(Rn,fr,or){var $t=or.source;return $t==="internal"?!1:Rn!==fr};return E.createElement(L.Provider,{value:jt},E.createElement(F.Provider,{value:Nt},E.createElement(vn,{name:[],shouldUpdate:un,rules:qt,validateTrigger:nn,initialValue:dt,isList:!0,isListField:ln!=null?ln:!!Oe},function(Hn,Rn){var fr=Hn.value,or=fr===void 0?[]:fr,$t=Hn.onChange,er=An.getFieldValue,Jn=function(){var Xe=er(Ye||[]);return Xe||[]},Bt={add:function(Xe,He){var Ot=Jn();He>=0&&He<=Ot.length?(Be.keys=[].concat((0,x.Z)(Be.keys.slice(0,He)),[Be.id],(0,x.Z)(Be.keys.slice(He))),$t([].concat((0,x.Z)(Ot.slice(0,He)),[Xe],(0,x.Z)(Ot.slice(He))))):(Be.keys=[].concat((0,x.Z)(Be.keys),[Be.id]),$t([].concat((0,x.Z)(Ot),[Xe]))),Be.id+=1},remove:function(Xe){var He=Jn(),Ot=new Set(Array.isArray(Xe)?Xe:[Xe]);Ot.size<=0||(Be.keys=Be.keys.filter(function(Vt,gn){return!Ot.has(gn)}),$t(He.filter(function(Vt,gn){return!Ot.has(gn)})))},move:function(Xe,He){if(Xe!==He){var Ot=Jn();Xe<0||Xe>=Ot.length||He<0||He>=Ot.length||(Be.keys=(0,Hr.pB)(Be.keys,Xe,He),$t((0,Hr.pB)(Ot,Xe,He)))}}},Ai=or||[];return Array.isArray(Ai)||(Ai=[]),Ke(Ai.map(function(Le,Xe){var He=Be.keys[Xe];return He===void 0&&(Be.keys[Xe]=Be.id,He=Be.keys[Xe],Be.id+=1),{name:Xe,key:He,isListField:!0}}),Bt,Rn)})))},Pn=bn,ar=y(97685);function Zr(wn){var tt=!1,$e=wn.length,dt=[];return wn.length?new Promise(function(Ke,qt){wn.forEach(function(nn,ln){nn.catch(function(An){return tt=!0,An}).then(function(An){$e-=1,dt[ln]=An,!($e>0)&&(tt&&qt(dt),Ke(dt))})})}):Promise.resolve([])}var Xr=y(47434),ui=y(71002),qr="__@field_split__";function Ti(wn){return wn.map(function(tt){return"".concat((0,ui.Z)(tt),":").concat(tt)}).join(qr)}var fa=function(){function wn(){(0,v.Z)(this,wn),this.kvs=new Map}return(0,u.Z)(wn,[{key:"set",value:function($e,dt){this.kvs.set(Ti($e),dt)}},{key:"get",value:function($e){return this.kvs.get(Ti($e))}},{key:"update",value:function($e,dt){var Ke=this.get($e),qt=dt(Ke);qt?this.set($e,qt):this.delete($e)}},{key:"delete",value:function($e){this.kvs.delete(Ti($e))}},{key:"map",value:function($e){return(0,x.Z)(this.kvs.entries()).map(function(dt){var Ke=(0,ar.Z)(dt,2),qt=Ke[0],nn=Ke[1],ln=qt.split(qr);return $e({key:ln.map(function(An){var Oe=An.match(/^([^:]*):(.*)$/),De=(0,ar.Z)(Oe,3),Be=De[1],Ye=De[2];return Be==="number"?Number(Ye):Ye}),value:nn})})}},{key:"toJSON",value:function(){var $e={};return this.map(function(dt){var Ke=dt.key,qt=dt.value;return $e[Ke.join(".")]=qt,null}),$e}}]),wn}(),Bn=fa,Li=y(83799),Ji=["name"],Na=(0,u.Z)(function wn(tt){var $e=this;(0,v.Z)(this,wn),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:$e.getFieldValue,getFieldsValue:$e.getFieldsValue,getFieldError:$e.getFieldError,getFieldWarning:$e.getFieldWarning,getFieldsError:$e.getFieldsError,isFieldsTouched:$e.isFieldsTouched,isFieldTouched:$e.isFieldTouched,isFieldValidating:$e.isFieldValidating,isFieldsValidating:$e.isFieldsValidating,resetFields:$e.resetFields,setFields:$e.setFields,setFieldValue:$e.setFieldValue,setFieldsValue:$e.setFieldsValue,validateFields:$e.validateFields,submit:$e.submit,_init:!0,getInternalHooks:$e.getInternalHooks}},this.getInternalHooks=function(dt){return dt===A?($e.formHooked=!0,{dispatch:$e.dispatch,initEntityValue:$e.initEntityValue,registerField:$e.registerField,useSubscribe:$e.useSubscribe,setInitialValues:$e.setInitialValues,destroyForm:$e.destroyForm,setCallbacks:$e.setCallbacks,setValidateMessages:$e.setValidateMessages,getFields:$e.getFields,setPreserve:$e.setPreserve,getInitialValue:$e.getInitialValue,registerWatch:$e.registerWatch}):((0,b.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(dt){$e.subscribable=dt},this.prevWithoutPreserves=null,this.setInitialValues=function(dt,Ke){if($e.initialValues=dt||{},Ke){var qt,nn=(0,Hr.gg)({},dt,$e.store);(qt=$e.prevWithoutPreserves)===null||qt===void 0||qt.map(function(ln){var An=ln.key;nn=(0,Li.Z)(nn,An,(0,si.Z)(dt,An))}),$e.prevWithoutPreserves=null,$e.updateStore(nn)}},this.destroyForm=function(){var dt=new Bn;$e.getFieldEntities(!0).forEach(function(Ke){$e.isMergedPreserve(Ke.isPreserve())||dt.set(Ke.getNamePath(),!0)}),$e.prevWithoutPreserves=dt},this.getInitialValue=function(dt){var Ke=(0,si.Z)($e.initialValues,dt);return dt.length?(0,Xr.Z)(Ke):Ke},this.setCallbacks=function(dt){$e.callbacks=dt},this.setValidateMessages=function(dt){$e.validateMessages=dt},this.setPreserve=function(dt){$e.preserve=dt},this.watchList=[],this.registerWatch=function(dt){return $e.watchList.push(dt),function(){$e.watchList=$e.watchList.filter(function(Ke){return Ke!==dt})}},this.notifyWatch=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if($e.watchList.length){var Ke=$e.getFieldsValue(),qt=$e.getFieldsValue(!0);$e.watchList.forEach(function(nn){nn(Ke,qt,dt)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(dt){$e.store=dt},this.getFieldEntities=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return dt?$e.fieldEntities.filter(function(Ke){return Ke.getNamePath().length}):$e.fieldEntities},this.getFieldsMap=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ke=new Bn;return $e.getFieldEntities(dt).forEach(function(qt){var nn=qt.getNamePath();Ke.set(nn,qt)}),Ke},this.getFieldEntitiesForNamePathList=function(dt){if(!dt)return $e.getFieldEntities(!0);var Ke=$e.getFieldsMap(!0);return dt.map(function(qt){var nn=(0,Hr.gU)(qt);return Ke.get(nn)||{INVALIDATE_NAME_PATH:(0,Hr.gU)(qt)}})},this.getFieldsValue=function(dt,Ke){if($e.warningUnhooked(),dt===!0&&!Ke)return $e.store;var qt=$e.getFieldEntitiesForNamePathList(Array.isArray(dt)?dt:null),nn=[];return qt.forEach(function(ln){var An,Oe="INVALIDATE_NAME_PATH"in ln?ln.INVALIDATE_NAME_PATH:ln.getNamePath();if(!(!dt&&(!((An=ln.isListField)===null||An===void 0)&&An.call(ln))))if(!Ke)nn.push(Oe);else{var De="getMeta"in ln?ln.getMeta():null;Ke(De)&&nn.push(Oe)}}),(0,Hr.H_)($e.store,nn.map(Hr.gU))},this.getFieldValue=function(dt){$e.warningUnhooked();var Ke=(0,Hr.gU)(dt);return(0,si.Z)($e.store,Ke)},this.getFieldsError=function(dt){$e.warningUnhooked();var Ke=$e.getFieldEntitiesForNamePathList(dt);return Ke.map(function(qt,nn){return qt&&!("INVALIDATE_NAME_PATH"in qt)?{name:qt.getNamePath(),errors:qt.getErrors(),warnings:qt.getWarnings()}:{name:(0,Hr.gU)(dt[nn]),errors:[],warnings:[]}})},this.getFieldError=function(dt){$e.warningUnhooked();var Ke=(0,Hr.gU)(dt),qt=$e.getFieldsError([Ke])[0];return qt.errors},this.getFieldWarning=function(dt){$e.warningUnhooked();var Ke=(0,Hr.gU)(dt),qt=$e.getFieldsError([Ke])[0];return qt.warnings},this.isFieldsTouched=function(){$e.warningUnhooked();for(var dt=arguments.length,Ke=new Array(dt),qt=0;qt<dt;qt++)Ke[qt]=arguments[qt];var nn=Ke[0],ln=Ke[1],An,Oe=!1;Ke.length===0?An=null:Ke.length===1?Array.isArray(nn)?(An=nn.map(Hr.gU),Oe=!1):(An=null,Oe=nn):(An=nn.map(Hr.gU),Oe=ln);var De=$e.getFieldEntities(!0),Be=function(Hn){return Hn.isFieldTouched()};if(!An)return Oe?De.every(Be):De.some(Be);var Ye=new Bn;An.forEach(function(un){Ye.set(un,[])}),De.forEach(function(un){var Hn=un.getNamePath();An.forEach(function(Rn){Rn.every(function(fr,or){return Hn[or]===fr})&&Ye.update(Rn,function(fr){return[].concat((0,x.Z)(fr),[un])})})});var Nt=function(Hn){return Hn.some(Be)},jt=Ye.map(function(un){var Hn=un.value;return Hn});return Oe?jt.every(Nt):jt.some(Nt)},this.isFieldTouched=function(dt){return $e.warningUnhooked(),$e.isFieldsTouched([dt])},this.isFieldsValidating=function(dt){$e.warningUnhooked();var Ke=$e.getFieldEntities();if(!dt)return Ke.some(function(nn){return nn.isFieldValidating()});var qt=dt.map(Hr.gU);return Ke.some(function(nn){var ln=nn.getNamePath();return(0,Hr.T1)(qt,ln)&&nn.isFieldValidating()})},this.isFieldValidating=function(dt){return $e.warningUnhooked(),$e.isFieldsValidating([dt])},this.resetWithFieldInitialValue=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ke=new Bn,qt=$e.getFieldEntities(!0);qt.forEach(function(An){var Oe=An.props.initialValue,De=An.getNamePath();if(Oe!==void 0){var Be=Ke.get(De)||new Set;Be.add({entity:An,value:Oe}),Ke.set(De,Be)}});var nn=function(Oe){Oe.forEach(function(De){var Be=De.props.initialValue;if(Be!==void 0){var Ye=De.getNamePath(),Nt=$e.getInitialValue(Ye);if(Nt!==void 0)(0,b.ZP)(!1,"Form already set 'initialValues' with path '".concat(Ye.join("."),"'. Field can not overwrite it."));else{var jt=Ke.get(Ye);if(jt&&jt.size>1)(0,b.ZP)(!1,"Multiple Field with path '".concat(Ye.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(jt){var un=$e.getFieldValue(Ye);(!dt.skipExist||un===void 0)&&$e.updateStore((0,Li.Z)($e.store,Ye,(0,x.Z)(jt)[0].value))}}}})},ln;dt.entities?ln=dt.entities:dt.namePathList?(ln=[],dt.namePathList.forEach(function(An){var Oe=Ke.get(An);if(Oe){var De;(De=ln).push.apply(De,(0,x.Z)((0,x.Z)(Oe).map(function(Be){return Be.entity})))}})):ln=qt,nn(ln)},this.resetFields=function(dt){$e.warningUnhooked();var Ke=$e.store;if(!dt){$e.updateStore((0,Hr.gg)({},$e.initialValues)),$e.resetWithFieldInitialValue(),$e.notifyObservers(Ke,null,{type:"reset"}),$e.notifyWatch();return}var qt=dt.map(Hr.gU);qt.forEach(function(nn){var ln=$e.getInitialValue(nn);$e.updateStore((0,Li.Z)($e.store,nn,ln))}),$e.resetWithFieldInitialValue({namePathList:qt}),$e.notifyObservers(Ke,qt,{type:"reset"}),$e.notifyWatch(qt)},this.setFields=function(dt){$e.warningUnhooked();var Ke=$e.store,qt=[];dt.forEach(function(nn){var ln=nn.name,An=(0,M.Z)(nn,Ji),Oe=(0,Hr.gU)(ln);qt.push(Oe),"value"in An&&$e.updateStore((0,Li.Z)($e.store,Oe,An.value)),$e.notifyObservers(Ke,[Oe],{type:"setField",data:nn})}),$e.notifyWatch(qt)},this.getFields=function(){var dt=$e.getFieldEntities(!0),Ke=dt.map(function(qt){var nn=qt.getNamePath(),ln=qt.getMeta(),An=(0,g.Z)((0,g.Z)({},ln),{},{name:nn,value:$e.getFieldValue(nn)});return Object.defineProperty(An,"originRCField",{value:!0}),An});return Ke},this.initEntityValue=function(dt){var Ke=dt.props.initialValue;if(Ke!==void 0){var qt=dt.getNamePath(),nn=(0,si.Z)($e.store,qt);nn===void 0&&$e.updateStore((0,Li.Z)($e.store,qt,Ke))}},this.isMergedPreserve=function(dt){var Ke=dt!==void 0?dt:$e.preserve;return Ke!=null?Ke:!0},this.registerField=function(dt){$e.fieldEntities.push(dt);var Ke=dt.getNamePath();if($e.notifyWatch([Ke]),dt.props.initialValue!==void 0){var qt=$e.store;$e.resetWithFieldInitialValue({entities:[dt],skipExist:!0}),$e.notifyObservers(qt,[dt.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(nn,ln){var An=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if($e.fieldEntities=$e.fieldEntities.filter(function(Be){return Be!==dt}),!$e.isMergedPreserve(ln)&&(!nn||An.length>1)){var Oe=nn?void 0:$e.getInitialValue(Ke);if(Ke.length&&$e.getFieldValue(Ke)!==Oe&&$e.fieldEntities.every(function(Be){return!(0,Hr.LX)(Be.getNamePath(),Ke)})){var De=$e.store;$e.updateStore((0,Li.Z)(De,Ke,Oe,!0)),$e.notifyObservers(De,[Ke],{type:"remove"}),$e.triggerDependenciesUpdate(De,Ke)}}$e.notifyWatch([Ke])}},this.dispatch=function(dt){switch(dt.type){case"updateValue":{var Ke=dt.namePath,qt=dt.value;$e.updateValue(Ke,qt);break}case"validateField":{var nn=dt.namePath,ln=dt.triggerName;$e.validateFields([nn],{triggerName:ln});break}default:}},this.notifyObservers=function(dt,Ke,qt){if($e.subscribable){var nn=(0,g.Z)((0,g.Z)({},qt),{},{store:$e.getFieldsValue(!0)});$e.getFieldEntities().forEach(function(ln){var An=ln.onStoreChange;An(dt,Ke,nn)})}else $e.forceRootUpdate()},this.triggerDependenciesUpdate=function(dt,Ke){var qt=$e.getDependencyChildrenFields(Ke);return qt.length&&$e.validateFields(qt),$e.notifyObservers(dt,qt,{type:"dependenciesUpdate",relatedFields:[Ke].concat((0,x.Z)(qt))}),qt},this.updateValue=function(dt,Ke){var qt=(0,Hr.gU)(dt),nn=$e.store;$e.updateStore((0,Li.Z)($e.store,qt,Ke)),$e.notifyObservers(nn,[qt],{type:"valueUpdate",source:"internal"}),$e.notifyWatch([qt]);var ln=$e.triggerDependenciesUpdate(nn,qt),An=$e.callbacks.onValuesChange;if(An){var Oe=(0,Hr.H_)($e.store,[qt]);An(Oe,$e.getFieldsValue())}$e.triggerOnFieldsChange([qt].concat((0,x.Z)(ln)))},this.setFieldsValue=function(dt){$e.warningUnhooked();var Ke=$e.store;if(dt){var qt=(0,Hr.gg)($e.store,dt);$e.updateStore(qt)}$e.notifyObservers(Ke,null,{type:"valueUpdate",source:"external"}),$e.notifyWatch()},this.setFieldValue=function(dt,Ke){$e.setFields([{name:dt,value:Ke}])},this.getDependencyChildrenFields=function(dt){var Ke=new Set,qt=[],nn=new Bn;$e.getFieldEntities().forEach(function(An){var Oe=An.props.dependencies;(Oe||[]).forEach(function(De){var Be=(0,Hr.gU)(De);nn.update(Be,function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return Ye.add(An),Ye})})});var ln=function An(Oe){var De=nn.get(Oe)||new Set;De.forEach(function(Be){if(!Ke.has(Be)){Ke.add(Be);var Ye=Be.getNamePath();Be.isFieldDirty()&&Ye.length&&(qt.push(Ye),An(Ye))}})};return ln(dt),qt},this.triggerOnFieldsChange=function(dt,Ke){var qt=$e.callbacks.onFieldsChange;if(qt){var nn=$e.getFields();if(Ke){var ln=new Bn;Ke.forEach(function(Oe){var De=Oe.name,Be=Oe.errors;ln.set(De,Be)}),nn.forEach(function(Oe){Oe.errors=ln.get(Oe.name)||Oe.errors})}var An=nn.filter(function(Oe){var De=Oe.name;return(0,Hr.T1)(dt,De)});qt(An,nn)}},this.validateFields=function(dt,Ke){$e.warningUnhooked();var qt=!!dt,nn=qt?dt.map(Hr.gU):[],ln=[];$e.getFieldEntities(!0).forEach(function(De){if(qt||nn.push(De.getNamePath()),Ke!=null&&Ke.recursive&&qt){var Be=De.getNamePath();Be.every(function(jt,un){return dt[un]===jt||dt[un]===void 0})&&nn.push(Be)}if(!(!De.props.rules||!De.props.rules.length)){var Ye=De.getNamePath();if(!qt||(0,Hr.T1)(nn,Ye)){var Nt=De.validateRules((0,g.Z)({validateMessages:(0,g.Z)((0,g.Z)({},Pr),$e.validateMessages)},Ke));ln.push(Nt.then(function(){return{name:Ye,errors:[],warnings:[]}}).catch(function(jt){var un,Hn=[],Rn=[];return(un=jt.forEach)===null||un===void 0||un.call(jt,function(fr){var or=fr.rule.warningOnly,$t=fr.errors;or?Rn.push.apply(Rn,(0,x.Z)($t)):Hn.push.apply(Hn,(0,x.Z)($t))}),Hn.length?Promise.reject({name:Ye,errors:Hn,warnings:Rn}):{name:Ye,errors:Hn,warnings:Rn}}))}}});var An=Zr(ln);$e.lastValidatePromise=An,An.catch(function(De){return De}).then(function(De){var Be=De.map(function(Ye){var Nt=Ye.name;return Nt});$e.notifyObservers($e.store,Be,{type:"validateFinish"}),$e.triggerOnFieldsChange(Be,De)});var Oe=An.then(function(){return $e.lastValidatePromise===An?Promise.resolve($e.getFieldsValue(nn)):Promise.reject([])}).catch(function(De){var Be=De.filter(function(Ye){return Ye&&Ye.errors.length});return Promise.reject({values:$e.getFieldsValue(nn),errorFields:Be,outOfDate:$e.lastValidatePromise!==An})});return Oe.catch(function(De){return De}),$e.triggerOnFieldsChange(nn),Oe},this.submit=function(){$e.warningUnhooked(),$e.validateFields().then(function(dt){var Ke=$e.callbacks.onFinish;if(Ke)try{Ke(dt)}catch(qt){console.error(qt)}}).catch(function(dt){var Ke=$e.callbacks.onFinishFailed;Ke&&Ke(dt)})},this.forceRootUpdate=tt});function ea(wn){var tt=E.useRef(),$e=E.useState({}),dt=(0,ar.Z)($e,2),Ke=dt[1];if(!tt.current)if(wn)tt.current=wn;else{var qt=function(){Ke({})},nn=new Na(qt);tt.current=nn.getForm()}return[tt.current]}var ha=ea,Ta=E.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Aa=function(tt){var $e=tt.validateMessages,dt=tt.onFormChange,Ke=tt.onFormFinish,qt=tt.children,nn=E.useContext(Ta),ln=E.useRef({});return E.createElement(Ta.Provider,{value:(0,g.Z)((0,g.Z)({},nn),{},{validateMessages:(0,g.Z)((0,g.Z)({},nn.validateMessages),$e),triggerFormChange:function(Oe,De){dt&&dt(Oe,{changedFields:De,forms:ln.current}),nn.triggerFormChange(Oe,De)},triggerFormFinish:function(Oe,De){Ke&&Ke(Oe,{values:De,forms:ln.current}),nn.triggerFormFinish(Oe,De)},registerForm:function(Oe,De){Oe&&(ln.current=(0,g.Z)((0,g.Z)({},ln.current),{},(0,d.Z)({},Oe,De))),nn.registerForm(Oe,De)},unregisterForm:function(Oe){var De=(0,g.Z)({},ln.current);delete De[Oe],ln.current=De,nn.unregisterForm(Oe)}})},qt)},Wi=Ta,go=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ja=function(tt,$e){var dt=tt.name,Ke=tt.initialValues,qt=tt.fields,nn=tt.form,ln=tt.preserve,An=tt.children,Oe=tt.component,De=Oe===void 0?"form":Oe,Be=tt.validateMessages,Ye=tt.validateTrigger,Nt=Ye===void 0?"onChange":Ye,jt=tt.onValuesChange,un=tt.onFieldsChange,Hn=tt.onFinish,Rn=tt.onFinishFailed,fr=(0,M.Z)(tt,go),or=E.useContext(Wi),$t=ha(nn),er=(0,ar.Z)($t,1),Jn=er[0],Bt=Jn.getInternalHooks(A),Ai=Bt.useSubscribe,Le=Bt.setInitialValues,Xe=Bt.setCallbacks,He=Bt.setValidateMessages,Ot=Bt.setPreserve,Vt=Bt.destroyForm;E.useImperativeHandle($e,function(){return Jn}),E.useEffect(function(){return or.registerForm(dt,Jn),function(){or.unregisterForm(dt)}},[or,Jn,dt]),He((0,g.Z)((0,g.Z)({},or.validateMessages),Be)),Xe({onValuesChange:jt,onFieldsChange:function(_){if(or.triggerFormChange(dt,_),un){for(var N=arguments.length,me=new Array(N>1?N-1:0),q=1;q<N;q++)me[q-1]=arguments[q];un.apply(void 0,[_].concat(me))}},onFinish:function(_){or.triggerFormFinish(dt,_),Hn&&Hn(_)},onFinishFailed:Rn}),Ot(ln);var gn=E.useRef(null);Le(Ke,!gn.current),gn.current||(gn.current=!0),E.useEffect(function(){return Vt},[]);var vt,zt=typeof An=="function";if(zt){var Kt=Jn.getFieldsValue(!0);vt=An(Kt,Jn)}else vt=An;Ai(!zt);var fn=E.useRef();E.useEffect(function(){(0,Hr.T0)(fn.current||[],qt||[])||Jn.setFields(qt||[]),fn.current=qt},[qt,Jn]);var zn=E.useMemo(function(){return(0,g.Z)((0,g.Z)({},Jn),{},{validateTrigger:Nt})},[Jn,Nt]),wr=E.createElement(F.Provider,{value:zn},vt);return De===!1?wr:E.createElement(De,(0,p.Z)({},fr,{onSubmit:function(_){_.preventDefault(),_.stopPropagation(),Jn.submit()},onReset:function(_){var N;_.preventDefault(),Jn.resetFields(),(N=fr.onReset)===null||N===void 0||N.call(fr,_)}}),wr)},$o=Ja;function Ua(wn){try{return JSON.stringify(wn)}catch(tt){return Math.random()}}var Wa=function(){};function mo(){for(var wn=arguments.length,tt=new Array(wn),$e=0;$e<wn;$e++)tt[$e]=arguments[$e];var dt=tt[0],Ke=dt===void 0?[]:dt,qt=tt[1],nn=qt===void 0?{}:qt,ln=(0,W.G)(nn)?{form:nn}:nn,An=ln.form,Oe=(0,E.useState)(),De=(0,ar.Z)(Oe,2),Be=De[0],Ye=De[1],Nt=(0,E.useMemo)(function(){return Ua(Be)},[Be]),jt=(0,E.useRef)(Nt);jt.current=Nt;var un=(0,E.useContext)(F),Hn=An||un,Rn=Hn&&Hn._init,fr=(0,Hr.gU)(Ke),or=(0,E.useRef)(fr);return or.current=fr,Wa(fr),(0,E.useEffect)(function(){if(Rn){var $t=Hn.getFieldsValue,er=Hn.getInternalHooks,Jn=er(A),Bt=Jn.registerWatch,Ai=Bt(function(Xe,He){var Ot=(0,si.Z)(ln.preserve?He:Xe,or.current),Vt=Ua(Ot);jt.current!==Vt&&(jt.current=Vt,Ye(Ot))}),Le=(0,si.Z)(ln.preserve?$t(!0):$t(),or.current);return Ye(Le),Ai}},[Rn]),Be}var fo=mo,Ro=E.forwardRef($o),te=Ro;te.FormProvider=Aa,te.Field=vn,te.List=Pn,te.useForm=ha,te.useWatch=fo;var ho=null},47434:function(Ie,S,y){"use strict";var E=y(71002);function p(g){return Array.isArray(g)?d(g):(0,E.Z)(g)==="object"&&g!==null?M(g):g}function M(g){if(Object.getPrototypeOf(g)===Object.prototype){var x={};for(var v in g)x[v]=p(g[v]);return x}return g}function d(g){return g.map(function(x){return p(x)})}S.Z=p},93409:function(Ie,S,y){"use strict";y.d(S,{G:function(){return p},q:function(){return E}});function E(M){return M==null?[]:Array.isArray(M)?M:[M]}function p(M){return M&&!!M._init}},53236:function(Ie,S,y){"use strict";y.d(S,{H_:function(){return t},LX:function(){return A},T0:function(){return w},T1:function(){return e},gU:function(){return u},gg:function(){return b},iZ:function(){return D},pB:function(){return F}});var E=y(1413),p=y(74902),M=y(71002),d=y(88306),g=y(83799),x=y(93409),v=y(47434);function u(Z){return(0,x.q)(Z)}function t(Z,L){var W={};return L.forEach(function(k){var de=(0,d.Z)(Z,k);W=(0,g.Z)(W,k,de)}),W}function e(Z,L){return Z&&Z.some(function(W){return A(W,L)})}function o(Z){return(0,M.Z)(Z)==="object"&&Z!==null&&Object.getPrototypeOf(Z)===Object.prototype}function c(Z,L){var W=Array.isArray(Z)?(0,p.Z)(Z):(0,E.Z)({},Z);return L&&Object.keys(L).forEach(function(k){var de=W[k],H=L[k],ue=o(de)&&o(H);W[k]=ue?c(de,H||{}):(0,v.Z)(H)}),W}function b(Z){for(var L=arguments.length,W=new Array(L>1?L-1:0),k=1;k<L;k++)W[k-1]=arguments[k];return W.reduce(function(de,H){return c(de,H)},Z)}function A(Z,L){return!Z||!L||Z.length!==L.length?!1:Z.every(function(W,k){return L[k]===W})}function w(Z,L){if(Z===L)return!0;if(!Z&&L||Z&&!L||!Z||!L||(0,M.Z)(Z)!=="object"||(0,M.Z)(L)!=="object")return!1;var W=Object.keys(Z),k=Object.keys(L),de=new Set([].concat(W,k));return(0,p.Z)(de).every(function(H){var ue=Z[H],ve=L[H];return typeof ue=="function"&&typeof ve=="function"?!0:ue===ve})}function D(Z){var L=arguments.length<=1?void 0:arguments[1];return L&&L.target&&(0,M.Z)(L.target)==="object"&&Z in L.target?L.target[Z]:L}function F(Z,L,W){var k=Z.length;if(L<0||L>=k||W<0||W>=k)return Z;var de=Z[L],H=L-W;return H>0?[].concat((0,p.Z)(Z.slice(0,W)),[de],(0,p.Z)(Z.slice(W,L)),(0,p.Z)(Z.slice(L+1,k))):H<0?[].concat((0,p.Z)(Z.slice(0,L)),(0,p.Z)(Z.slice(L+1,W+1)),[de],(0,p.Z)(Z.slice(W+1,k))):Z}},38135:function(Ie,S,y){"use strict";var E;y.d(S,{s:function(){return Z},v:function(){return H}});var p=y(74165),M=y(15861),d=y(71002),g=y(1413),x=y(73935),v=(0,g.Z)({},E||(E=y.t(x,2))),u=v.version,t=v.render,e=v.unmountComponentAtNode,o;try{var c=Number((u||"").split(".")[0]);c>=18&&(o=v.createRoot)}catch(ve){}function b(ve){var ke=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ke&&(0,d.Z)(ke)==="object"&&(ke.usingClientEntryPoint=ve)}var A="__rc_react_root__";function w(ve,ke){b(!0);var Ae=ke[A]||o(ke);b(!1),Ae.render(ve),ke[A]=Ae}function D(ve,ke){t(ve,ke)}function F(ve,ke){}function Z(ve,ke){if(o){w(ve,ke);return}D(ve,ke)}function L(ve){return W.apply(this,arguments)}function W(){return W=(0,M.Z)((0,p.Z)().mark(function ve(ke){return(0,p.Z)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Promise.resolve().then(function(){var G;(G=ke[A])===null||G===void 0||G.unmount(),delete ke[A]}));case 1:case"end":return be.stop()}},ve)})),W.apply(this,arguments)}function k(ve){e(ve)}function de(ve){}function H(ve){return ue.apply(this,arguments)}function ue(){return ue=(0,M.Z)((0,p.Z)().mark(function ve(ke){return(0,p.Z)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(o===void 0){be.next=2;break}return be.abrupt("return",L(ke));case 2:k(ke);case 3:case"end":return be.stop()}},ve)})),ue.apply(this,arguments)}},88306:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return E}});function E(p,M){for(var d=p,g=0;g<M.length;g+=1){if(d==null)return;d=d[M[g]]}return d}},83799:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return e}});var E=y(1413),p=y(74902),M=y(83878),d=y(59199),g=y(40181),x=y(25267);function v(o){return(0,M.Z)(o)||(0,d.Z)(o)||(0,g.Z)(o)||(0,x.Z)()}var u=y(88306);function t(o,c,b,A){if(!c.length)return b;var w=v(c),D=w[0],F=w.slice(1),Z;return!o&&typeof D=="number"?Z=[]:Array.isArray(o)?Z=(0,p.Z)(o):Z=(0,E.Z)({},o),A&&b===void 0&&F.length===1?delete Z[D][F[0]]:Z[D]=t(Z[D],F,b,A),Z}function e(o,c,b){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return c.length&&A&&b===void 0&&!(0,u.Z)(o,c.slice(0,-1))?o:t(o,c,b,A)}},28660:function(Ie,S,y){var E=y(34155);var p;(function(M){(function(d){var g=typeof y.g=="object"?y.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),x=v(M);typeof g.Reflect=="undefined"?g.Reflect=M:x=v(g.Reflect,x),d(x);function v(u,t){return function(e,o){typeof u[e]!="function"&&Object.defineProperty(u,e,{configurable:!0,writable:!0,value:o}),t&&t(e,o)}}})(function(d){var g=Object.prototype.hasOwnProperty,x=typeof Symbol=="function",v=x&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",u=x&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",t=typeof Object.create=="function",e={__proto__:[]}instanceof Array,o=!t&&!e,c={create:t?function(){return mt(Object.create(null))}:e?function(){return mt({__proto__:null})}:function(){return mt({})},has:o?function(Ve,rt){return g.call(Ve,rt)}:function(Ve,rt){return rt in Ve},get:o?function(Ve,rt){return g.call(Ve,rt)?Ve[rt]:void 0}:function(Ve,rt){return Ve[rt]}},b=Object.getPrototypeOf(Function),A=typeof E=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",w=!A&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Y(),D=!A&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ne(),F=!A&&typeof WeakMap=="function"?WeakMap:Qe(),Z=new F;function L(Ve,rt,yt,Tt){if(pn(yt)){if(!Ze(Ve))throw new TypeError;if(!ze(rt))throw new TypeError;return G(Ve,rt)}else{if(!Ze(Ve))throw new TypeError;if(!st(rt))throw new TypeError;if(!st(Tt)&&!pn(Tt)&&!$n(Tt))throw new TypeError;return $n(Tt)&&(Tt=void 0),yt=Yt(yt),ie(Ve,rt,yt,Tt)}}d("decorate",L);function W(Ve,rt){function yt(Tt,Ht){if(!st(Tt))throw new TypeError;if(!pn(Ht)&&!ht(Ht))throw new TypeError;Fe(Ve,rt,Tt,Ht)}return yt}d("metadata",W);function k(Ve,rt,yt,Tt){if(!st(yt))throw new TypeError;return pn(Tt)||(Tt=Yt(Tt)),Fe(Ve,rt,yt,Tt)}d("defineMetadata",k);function de(Ve,rt,yt){if(!st(rt))throw new TypeError;return pn(yt)||(yt=Yt(yt)),ae(Ve,rt,yt)}d("hasMetadata",de);function H(Ve,rt,yt){if(!st(rt))throw new TypeError;return pn(yt)||(yt=Yt(yt)),K(Ve,rt,yt)}d("hasOwnMetadata",H);function ue(Ve,rt,yt){if(!st(rt))throw new TypeError;return pn(yt)||(yt=Yt(yt)),he(Ve,rt,yt)}d("getMetadata",ue);function ve(Ve,rt,yt){if(!st(rt))throw new TypeError;return pn(yt)||(yt=Yt(yt)),Se(Ve,rt,yt)}d("getOwnMetadata",ve);function ke(Ve,rt){if(!st(Ve))throw new TypeError;return pn(rt)||(rt=Yt(rt)),nt(Ve,rt)}d("getMetadataKeys",ke);function Ae(Ve,rt){if(!st(Ve))throw new TypeError;return pn(rt)||(rt=Yt(rt)),lt(Ve,rt)}d("getOwnMetadataKeys",Ae);function be(Ve,rt,yt){if(!st(rt))throw new TypeError;pn(yt)||(yt=Yt(yt));var Tt=V(rt,yt,!1);if(pn(Tt)||!Tt.delete(Ve))return!1;if(Tt.size>0)return!0;var Ht=Z.get(rt);return Ht.delete(yt),Ht.size>0||Z.delete(rt),!0}d("deleteMetadata",be);function G(Ve,rt){for(var yt=Ve.length-1;yt>=0;--yt){var Tt=Ve[yt],Ht=Tt(rt);if(!pn(Ht)&&!$n(Ht)){if(!ze(Ht))throw new TypeError;rt=Ht}}return rt}function ie(Ve,rt,yt,Tt){for(var Ht=Ve.length-1;Ht>=0;--Ht){var en=Ve[Ht],wt=en(rt,yt,Tt);if(!pn(wt)&&!$n(wt)){if(!st(wt))throw new TypeError;Tt=wt}}return Tt}function V(Ve,rt,yt){var Tt=Z.get(Ve);if(pn(Tt)){if(!yt)return;Tt=new w,Z.set(Ve,Tt)}var Ht=Tt.get(rt);if(pn(Ht)){if(!yt)return;Ht=new w,Tt.set(rt,Ht)}return Ht}function ae(Ve,rt,yt){var Tt=K(Ve,rt,yt);if(Tt)return!0;var Ht=ye(rt);return $n(Ht)?!1:ae(Ve,Ht,yt)}function K(Ve,rt,yt){var Tt=V(rt,yt,!1);return pn(Tt)?!1:Un(Tt.has(Ve))}function he(Ve,rt,yt){var Tt=K(Ve,rt,yt);if(Tt)return Se(Ve,rt,yt);var Ht=ye(rt);if(!$n(Ht))return he(Ve,Ht,yt)}function Se(Ve,rt,yt){var Tt=V(rt,yt,!1);if(!pn(Tt))return Tt.get(Ve)}function Fe(Ve,rt,yt,Tt){var Ht=V(yt,Tt,!0);Ht.set(Ve,rt)}function nt(Ve,rt){var yt=lt(Ve,rt),Tt=ye(Ve);if(Tt===null)return yt;var Ht=nt(Tt,rt);if(Ht.length<=0)return yt;if(yt.length<=0)return Ht;for(var en=new D,wt=[],Mn=0,kn=yt;Mn<kn.length;Mn++){var jn=kn[Mn],mn=en.has(jn);mn||(en.add(jn),wt.push(jn))}for(var cr=0,Cr=Ht;cr<Cr.length;cr++){var jn=Cr[cr],mn=en.has(jn);mn||(en.add(jn),wt.push(jn))}return wt}function lt(Ve,rt){var yt=[],Tt=V(Ve,rt,!1);if(pn(Tt))return yt;for(var Ht=Tt.keys(),en=ne(Ht),wt=0;;){var Mn=oe(en);if(!Mn)return yt.length=wt,yt;var kn=_e(Mn);try{yt[wt]=kn}catch(jn){try{ce(en)}finally{throw jn}}wt++}}function Gt(Ve){if(Ve===null)return 1;switch(typeof Ve){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Ve===null?1:6;default:return 6}}function pn(Ve){return Ve===void 0}function $n(Ve){return Ve===null}function Ln(Ve){return typeof Ve=="symbol"}function st(Ve){return typeof Ve=="object"?Ve!==null:typeof Ve=="function"}function xt(Ve,rt){switch(Gt(Ve)){case 0:return Ve;case 1:return Ve;case 2:return Ve;case 3:return Ve;case 4:return Ve;case 5:return Ve}var yt=rt===3?"string":rt===5?"number":"default",Tt=P(Ve,v);if(Tt!==void 0){var Ht=Tt.call(Ve,yt);if(st(Ht))throw new TypeError;return Ht}return tn(Ve,yt==="default"?"number":yt)}function tn(Ve,rt){if(rt==="string"){var yt=Ve.toString;if(Pe(yt)){var Tt=yt.call(Ve);if(!st(Tt))return Tt}var Ht=Ve.valueOf;if(Pe(Ht)){var Tt=Ht.call(Ve);if(!st(Tt))return Tt}}else{var Ht=Ve.valueOf;if(Pe(Ht)){var Tt=Ht.call(Ve);if(!st(Tt))return Tt}var en=Ve.toString;if(Pe(en)){var Tt=en.call(Ve);if(!st(Tt))return Tt}}throw new TypeError}function Un(Ve){return!!Ve}function We(Ve){return""+Ve}function Yt(Ve){var rt=xt(Ve,3);return Ln(rt)?rt:We(rt)}function Ze(Ve){return Array.isArray?Array.isArray(Ve):Ve instanceof Object?Ve instanceof Array:Object.prototype.toString.call(Ve)==="[object Array]"}function Pe(Ve){return typeof Ve=="function"}function ze(Ve){return typeof Ve=="function"}function ht(Ve){switch(Gt(Ve)){case 3:return!0;case 4:return!0;default:return!1}}function P(Ve,rt){var yt=Ve[rt];if(yt!=null){if(!Pe(yt))throw new TypeError;return yt}}function ne(Ve){var rt=P(Ve,u);if(!Pe(rt))throw new TypeError;var yt=rt.call(Ve);if(!st(yt))throw new TypeError;return yt}function _e(Ve){return Ve.value}function oe(Ve){var rt=Ve.next();return rt.done?!1:rt}function ce(Ve){var rt=Ve.return;rt&&rt.call(Ve)}function ye(Ve){var rt=Object.getPrototypeOf(Ve);if(typeof Ve!="function"||Ve===b||rt!==b)return rt;var yt=Ve.prototype,Tt=yt&&Object.getPrototypeOf(yt);if(Tt==null||Tt===Object.prototype)return rt;var Ht=Tt.constructor;return typeof Ht!="function"||Ht===Ve?rt:Ht}function Y(){var Ve={},rt=[],yt=function(){function wt(Mn,kn,jn){this._index=0,this._keys=Mn,this._values=kn,this._selector=jn}return wt.prototype["@@iterator"]=function(){return this},wt.prototype[u]=function(){return this},wt.prototype.next=function(){var Mn=this._index;if(Mn>=0&&Mn<this._keys.length){var kn=this._selector(this._keys[Mn],this._values[Mn]);return Mn+1>=this._keys.length?(this._index=-1,this._keys=rt,this._values=rt):this._index++,{value:kn,done:!1}}return{value:void 0,done:!0}},wt.prototype.throw=function(Mn){throw this._index>=0&&(this._index=-1,this._keys=rt,this._values=rt),Mn},wt.prototype.return=function(Mn){return this._index>=0&&(this._index=-1,this._keys=rt,this._values=rt),{value:Mn,done:!0}},wt}();return function(){function wt(){this._keys=[],this._values=[],this._cacheKey=Ve,this._cacheIndex=-2}return Object.defineProperty(wt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),wt.prototype.has=function(Mn){return this._find(Mn,!1)>=0},wt.prototype.get=function(Mn){var kn=this._find(Mn,!1);return kn>=0?this._values[kn]:void 0},wt.prototype.set=function(Mn,kn){var jn=this._find(Mn,!0);return this._values[jn]=kn,this},wt.prototype.delete=function(Mn){var kn=this._find(Mn,!1);if(kn>=0){for(var jn=this._keys.length,mn=kn+1;mn<jn;mn++)this._keys[mn-1]=this._keys[mn],this._values[mn-1]=this._values[mn];return this._keys.length--,this._values.length--,Mn===this._cacheKey&&(this._cacheKey=Ve,this._cacheIndex=-2),!0}return!1},wt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Ve,this._cacheIndex=-2},wt.prototype.keys=function(){return new yt(this._keys,this._values,Tt)},wt.prototype.values=function(){return new yt(this._keys,this._values,Ht)},wt.prototype.entries=function(){return new yt(this._keys,this._values,en)},wt.prototype["@@iterator"]=function(){return this.entries()},wt.prototype[u]=function(){return this.entries()},wt.prototype._find=function(Mn,kn){return this._cacheKey!==Mn&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Mn)),this._cacheIndex<0&&kn&&(this._cacheIndex=this._keys.length,this._keys.push(Mn),this._values.push(void 0)),this._cacheIndex},wt}();function Tt(wt,Mn){return wt}function Ht(wt,Mn){return Mn}function en(wt,Mn){return[wt,Mn]}}function Ne(){return function(){function Ve(){this._map=new w}return Object.defineProperty(Ve.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ve.prototype.has=function(rt){return this._map.has(rt)},Ve.prototype.add=function(rt){return this._map.set(rt,rt),this},Ve.prototype.delete=function(rt){return this._map.delete(rt)},Ve.prototype.clear=function(){this._map.clear()},Ve.prototype.keys=function(){return this._map.keys()},Ve.prototype.values=function(){return this._map.values()},Ve.prototype.entries=function(){return this._map.entries()},Ve.prototype["@@iterator"]=function(){return this.keys()},Ve.prototype[u]=function(){return this.keys()},Ve}()}function Qe(){var Ve=16,rt=c.create(),yt=Tt();return function(){function kn(){this._key=Tt()}return kn.prototype.has=function(jn){var mn=Ht(jn,!1);return mn!==void 0?c.has(mn,this._key):!1},kn.prototype.get=function(jn){var mn=Ht(jn,!1);return mn!==void 0?c.get(mn,this._key):void 0},kn.prototype.set=function(jn,mn){var cr=Ht(jn,!0);return cr[this._key]=mn,this},kn.prototype.delete=function(jn){var mn=Ht(jn,!1);return mn!==void 0?delete mn[this._key]:!1},kn.prototype.clear=function(){this._key=Tt()},kn}();function Tt(){var kn;do kn="@@WeakMap@@"+Mn();while(c.has(rt,kn));return rt[kn]=!0,kn}function Ht(kn,jn){if(!g.call(kn,yt)){if(!jn)return;Object.defineProperty(kn,yt,{value:c.create()})}return kn[yt]}function en(kn,jn){for(var mn=0;mn<jn;++mn)kn[mn]=Math.random()*255|0;return kn}function wt(kn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(kn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(kn)):en(new Uint8Array(kn),kn):en(new Array(kn),kn)}function Mn(){var kn=wt(Ve);kn[6]=kn[6]&79|64,kn[8]=kn[8]&191|128;for(var jn="",mn=0;mn<Ve;++mn){var cr=kn[mn];(mn===4||mn===6||mn===8)&&(jn+="-"),cr<16&&(jn+="0"),jn+=cr.toString(16).toLowerCase()}return jn}}function mt(Ve){return Ve.__=void 0,delete Ve.__,Ve}})})(p||(p={}))},16479:function(Ie,S,y){var E;(function(){"use strict";function p(u,t){var e=u.x-t.x,o=u.y-t.y;return e*e+o*o}function M(u,t,e){var o=t.x,c=t.y,b=e.x-o,A=e.y-c;if(b!==0||A!==0){var w=((u.x-o)*b+(u.y-c)*A)/(b*b+A*A);w>1?(o=e.x,c=e.y):w>0&&(o+=b*w,c+=A*w)}return b=u.x-o,A=u.y-c,b*b+A*A}function d(u,t){for(var e=u[0],o=[e],c,b=1,A=u.length;b<A;b++)c=u[b],p(c,e)>t&&(o.push(c),e=c);return e!==c&&o.push(c),o}function g(u,t,e,o,c){for(var b=o,A,w=t+1;w<e;w++){var D=M(u[w],u[t],u[e]);D>b&&(A=w,b=D)}b>o&&(A-t>1&&g(u,t,A,o,c),c.push(u[A]),e-A>1&&g(u,A,e,o,c))}function x(u,t){var e=u.length-1,o=[u[0]];return g(u,0,e,t,o),o.push(u[e]),o}function v(u,t,e){if(u.length<=2)return u;var o=t!==void 0?t*t:1;return u=e?u:d(u,o),u=x(u,o),u}E=function(){return v}.call(S,y,S,Ie),E!==void 0&&(Ie.exports=E)})()},69848:function(Ie){(function(S,y){Ie.exports=y()})(this,function(){"use strict";function S(H,ue,ve,ke,Ae,be){if(!(Ae-ke<=ve)){var G=ke+Ae>>1;y(H,ue,G,ke,Ae,be%2),S(H,ue,ve,ke,G-1,be+1),S(H,ue,ve,G+1,Ae,be+1)}}function y(H,ue,ve,ke,Ae,be){for(;Ae>ke;){if(Ae-ke>600){var G=Ae-ke+1,ie=ve-ke+1,V=Math.log(G),ae=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*ae*(G-ae)/G)*(ie-G/2<0?-1:1),he=Math.max(ke,Math.floor(ve-ie*ae/G+K)),Se=Math.min(Ae,Math.floor(ve+(G-ie)*ae/G+K));y(H,ue,ve,he,Se,be)}var Fe=ue[2*ve+be],nt=ke,lt=Ae;for(E(H,ue,ke,ve),ue[2*Ae+be]>Fe&&E(H,ue,ke,Ae);nt<lt;){for(E(H,ue,nt,lt),nt++,lt--;ue[2*nt+be]<Fe;)nt++;for(;ue[2*lt+be]>Fe;)lt--}ue[2*ke+be]===Fe?E(H,ue,ke,lt):(lt++,E(H,ue,lt,Ae)),lt<=ve&&(ke=lt+1),ve<=lt&&(Ae=lt-1)}}function E(H,ue,ve,ke){p(H,ve,ke),p(ue,2*ve,2*ke),p(ue,2*ve+1,2*ke+1)}function p(H,ue,ve){var ke=H[ue];H[ue]=H[ve],H[ve]=ke}function M(H,ue,ve,ke,Ae,be,G){for(var ie=[0,H.length-1,0],V=[],ae,K;ie.length;){var he=ie.pop(),Se=ie.pop(),Fe=ie.pop();if(Se-Fe<=G){for(var nt=Fe;nt<=Se;nt++)ae=ue[2*nt],K=ue[2*nt+1],ae>=ve&&ae<=Ae&&K>=ke&&K<=be&&V.push(H[nt]);continue}var lt=Math.floor((Fe+Se)/2);ae=ue[2*lt],K=ue[2*lt+1],ae>=ve&&ae<=Ae&&K>=ke&&K<=be&&V.push(H[lt]);var Gt=(he+1)%2;(he===0?ve<=ae:ke<=K)&&(ie.push(Fe),ie.push(lt-1),ie.push(Gt)),(he===0?Ae>=ae:be>=K)&&(ie.push(lt+1),ie.push(Se),ie.push(Gt))}return V}function d(H,ue,ve,ke,Ae,be){for(var G=[0,H.length-1,0],ie=[],V=Ae*Ae;G.length;){var ae=G.pop(),K=G.pop(),he=G.pop();if(K-he<=be){for(var Se=he;Se<=K;Se++)g(ue[2*Se],ue[2*Se+1],ve,ke)<=V&&ie.push(H[Se]);continue}var Fe=Math.floor((he+K)/2),nt=ue[2*Fe],lt=ue[2*Fe+1];g(nt,lt,ve,ke)<=V&&ie.push(H[Fe]);var Gt=(ae+1)%2;(ae===0?ve-Ae<=nt:ke-Ae<=lt)&&(G.push(he),G.push(Fe-1),G.push(Gt)),(ae===0?ve+Ae>=nt:ke+Ae>=lt)&&(G.push(Fe+1),G.push(K),G.push(Gt))}return ie}function g(H,ue,ve,ke){var Ae=H-ve,be=ue-ke;return Ae*Ae+be*be}var x=function(H){return H[0]},v=function(H){return H[1]},u=function(ue,ve,ke,Ae,be){ve===void 0&&(ve=x),ke===void 0&&(ke=v),Ae===void 0&&(Ae=64),be===void 0&&(be=Float64Array),this.nodeSize=Ae,this.points=ue;for(var G=ue.length<65536?Uint16Array:Uint32Array,ie=this.ids=new G(ue.length),V=this.coords=new be(ue.length*2),ae=0;ae<ue.length;ae++)ie[ae]=ae,V[2*ae]=ve(ue[ae]),V[2*ae+1]=ke(ue[ae]);S(ie,V,Ae,0,ie.length-1,0)};u.prototype.range=function(ue,ve,ke,Ae){return M(this.ids,this.coords,ue,ve,ke,Ae,this.nodeSize)},u.prototype.within=function(ue,ve,ke){return d(this.ids,this.coords,ue,ve,ke,this.nodeSize)};var t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(H){return H}},e=Math.fround||function(H){return function(ue){return H[0]=+ue,H[0]}}(new Float32Array(1)),o=function(ue){this.options=W(Object.create(t),ue),this.trees=new Array(this.options.maxZoom+1)};o.prototype.load=function(ue){var ve=this.options,ke=ve.log,Ae=ve.minZoom,be=ve.maxZoom,G=ve.nodeSize;ke&&console.time("total time");var ie="prepare "+ue.length+" points";ke&&console.time(ie),this.points=ue;for(var V=[],ae=0;ae<ue.length;ae++)ue[ae].geometry&&V.push(b(ue[ae],ae));this.trees[be+1]=new u(V,k,de,G,Float32Array),ke&&console.timeEnd(ie);for(var K=be;K>=Ae;K--){var he=+Date.now();V=this._cluster(V,K),this.trees[K]=new u(V,k,de,G,Float32Array),ke&&console.log("z%d: %d clusters in %dms",K,V.length,+Date.now()-he)}return ke&&console.timeEnd("total time"),this},o.prototype.getClusters=function(ue,ve){var ke=((ue[0]+180)%360+360)%360-180,Ae=Math.max(-90,Math.min(90,ue[1])),be=ue[2]===180?180:((ue[2]+180)%360+360)%360-180,G=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)ke=-180,be=180;else if(ke>be){var ie=this.getClusters([ke,Ae,180,G],ve),V=this.getClusters([-180,Ae,be,G],ve);return ie.concat(V)}for(var ae=this.trees[this._limitZoom(ve)],K=ae.range(D(ke),F(G),D(be),F(Ae)),he=[],Se=0,Fe=K;Se<Fe.length;Se+=1){var nt=Fe[Se],lt=ae.points[nt];he.push(lt.numPoints?A(lt):this.points[lt.index])}return he},o.prototype.getChildren=function(ue){var ve=this._getOriginId(ue),ke=this._getOriginZoom(ue),Ae="No cluster with the specified id.",be=this.trees[ke];if(!be)throw new Error(Ae);var G=be.points[ve];if(!G)throw new Error(Ae);for(var ie=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),V=be.within(G.x,G.y,ie),ae=[],K=0,he=V;K<he.length;K+=1){var Se=he[K],Fe=be.points[Se];Fe.parentId===ue&&ae.push(Fe.numPoints?A(Fe):this.points[Fe.index])}if(ae.length===0)throw new Error(Ae);return ae},o.prototype.getLeaves=function(ue,ve,ke){ve=ve||10,ke=ke||0;var Ae=[];return this._appendLeaves(Ae,ue,ve,ke,0),Ae},o.prototype.getTile=function(ue,ve,ke){var Ae=this.trees[this._limitZoom(ue)],be=Math.pow(2,ue),G=this.options,ie=G.extent,V=G.radius,ae=V/ie,K=(ke-ae)/be,he=(ke+1+ae)/be,Se={features:[]};return this._addTileFeatures(Ae.range((ve-ae)/be,K,(ve+1+ae)/be,he),Ae.points,ve,ke,be,Se),ve===0&&this._addTileFeatures(Ae.range(1-ae/be,K,1,he),Ae.points,be,ke,be,Se),ve===be-1&&this._addTileFeatures(Ae.range(0,K,ae/be,he),Ae.points,-1,ke,be,Se),Se.features.length?Se:null},o.prototype.getClusterExpansionZoom=function(ue){for(var ve=this._getOriginZoom(ue)-1;ve<=this.options.maxZoom;){var ke=this.getChildren(ue);if(ve++,ke.length!==1)break;ue=ke[0].properties.cluster_id}return ve},o.prototype._appendLeaves=function(ue,ve,ke,Ae,be){for(var G=this.getChildren(ve),ie=0,V=G;ie<V.length;ie+=1){var ae=V[ie],K=ae.properties;if(K&&K.cluster?be+K.point_count<=Ae?be+=K.point_count:be=this._appendLeaves(ue,K.cluster_id,ke,Ae,be):be<Ae?be++:ue.push(ae),ue.length===ke)break}return be},o.prototype._addTileFeatures=function(ue,ve,ke,Ae,be,G){for(var ie=0,V=ue;ie<V.length;ie+=1){var ae=V[ie],K=ve[ae],he=K.numPoints,Se=void 0,Fe=void 0,nt=void 0;if(he)Se=w(K),Fe=K.x,nt=K.y;else{var lt=this.points[K.index];Se=lt.properties,Fe=D(lt.geometry.coordinates[0]),nt=F(lt.geometry.coordinates[1])}var Gt={type:1,geometry:[[Math.round(this.options.extent*(Fe*be-ke)),Math.round(this.options.extent*(nt*be-Ae))]],tags:Se},pn=void 0;he?pn=K.id:this.options.generateId?pn=K.index:this.points[K.index].id&&(pn=this.points[K.index].id),pn!==void 0&&(Gt.id=pn),G.features.push(Gt)}},o.prototype._limitZoom=function(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))},o.prototype._cluster=function(ue,ve){for(var ke=[],Ae=this.options,be=Ae.radius,G=Ae.extent,ie=Ae.reduce,V=Ae.minPoints,ae=be/(G*Math.pow(2,ve)),K=0;K<ue.length;K++){var he=ue[K];if(!(he.zoom<=ve)){he.zoom=ve;for(var Se=this.trees[ve+1],Fe=Se.within(he.x,he.y,ae),nt=he.numPoints||1,lt=nt,Gt=0,pn=Fe;Gt<pn.length;Gt+=1){var $n=pn[Gt],Ln=Se.points[$n];Ln.zoom>ve&&(lt+=Ln.numPoints||1)}if(lt>nt&&lt>=V){for(var st=he.x*nt,xt=he.y*nt,tn=ie&&nt>1?this._map(he,!0):null,Un=(K<<5)+(ve+1)+this.points.length,We=0,Yt=Fe;We<Yt.length;We+=1){var Ze=Yt[We],Pe=Se.points[Ze];if(!(Pe.zoom<=ve)){Pe.zoom=ve;var ze=Pe.numPoints||1;st+=Pe.x*ze,xt+=Pe.y*ze,Pe.parentId=Un,ie&&(tn||(tn=this._map(he,!0)),ie(tn,this._map(Pe)))}}he.parentId=Un,ke.push(c(st/lt,xt/lt,Un,lt,tn))}else if(ke.push(he),lt>1)for(var ht=0,P=Fe;ht<P.length;ht+=1){var ne=P[ht],_e=Se.points[ne];_e.zoom<=ve||(_e.zoom=ve,ke.push(_e))}}}return ke},o.prototype._getOriginId=function(ue){return ue-this.points.length>>5},o.prototype._getOriginZoom=function(ue){return(ue-this.points.length)%32},o.prototype._map=function(ue,ve){if(ue.numPoints)return ve?W({},ue.properties):ue.properties;var ke=this.points[ue.index].properties,Ae=this.options.map(ke);return ve&&Ae===ke?W({},Ae):Ae};function c(H,ue,ve,ke,Ae){return{x:e(H),y:e(ue),zoom:1/0,id:ve,parentId:-1,numPoints:ke,properties:Ae}}function b(H,ue){var ve=H.geometry.coordinates,ke=ve[0],Ae=ve[1];return{x:e(D(ke)),y:e(F(Ae)),zoom:1/0,index:ue,parentId:-1}}function A(H){return{type:"Feature",id:H.id,properties:w(H),geometry:{type:"Point",coordinates:[Z(H.x),L(H.y)]}}}function w(H){var ue=H.numPoints,ve=ue>=1e4?Math.round(ue/1e3)+"k":ue>=1e3?Math.round(ue/100)/10+"k":ue;return W(W({},H.properties),{cluster:!0,cluster_id:H.id,point_count:ue,point_count_abbreviated:ve})}function D(H){return H/360+.5}function F(H){var ue=Math.sin(H*Math.PI/180),ve=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ve<0?0:ve>1?1:ve}function Z(H){return(H-.5)*360}function L(H){var ue=(180-H*360)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function W(H,ue){for(var ve in ue)H[ve]=ue[ve];return H}function k(H){return H.x}function de(H){return H.y}return o})},17061:function(Ie,S,y){var E=y(18698).default;function p(){"use strict";Ie.exports=p=function(){return M},Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports;var M={},d=Object.prototype,g=d.hasOwnProperty,x=Object.defineProperty||function(V,ae,K){V[ae]=K.value},v=typeof Symbol=="function"?Symbol:{},u=v.iterator||"@@iterator",t=v.asyncIterator||"@@asyncIterator",e=v.toStringTag||"@@toStringTag";function o(V,ae,K){return Object.defineProperty(V,ae,{value:K,enumerable:!0,configurable:!0,writable:!0}),V[ae]}try{o({},"")}catch(V){o=function(K,he,Se){return K[he]=Se}}function c(V,ae,K,he){var Se=ae&&ae.prototype instanceof w?ae:w,Fe=Object.create(Se.prototype),nt=new be(he||[]);return x(Fe,"_invoke",{value:ue(V,K,nt)}),Fe}function b(V,ae,K){try{return{type:"normal",arg:V.call(ae,K)}}catch(he){return{type:"throw",arg:he}}}M.wrap=c;var A={};function w(){}function D(){}function F(){}var Z={};o(Z,u,function(){return this});var L=Object.getPrototypeOf,W=L&&L(L(G([])));W&&W!==d&&g.call(W,u)&&(Z=W);var k=F.prototype=w.prototype=Object.create(Z);function de(V){["next","throw","return"].forEach(function(ae){o(V,ae,function(K){return this._invoke(ae,K)})})}function H(V,ae){function K(Se,Fe,nt,lt){var Gt=b(V[Se],V,Fe);if(Gt.type!=="throw"){var pn=Gt.arg,$n=pn.value;return $n&&E($n)=="object"&&g.call($n,"__await")?ae.resolve($n.__await).then(function(Ln){K("next",Ln,nt,lt)},function(Ln){K("throw",Ln,nt,lt)}):ae.resolve($n).then(function(Ln){pn.value=Ln,nt(pn)},function(Ln){return K("throw",Ln,nt,lt)})}lt(Gt.arg)}var he;x(this,"_invoke",{value:function(Fe,nt){function lt(){return new ae(function(Gt,pn){K(Fe,nt,Gt,pn)})}return he=he?he.then(lt,lt):lt()}})}function ue(V,ae,K){var he="suspendedStart";return function(Se,Fe){if(he==="executing")throw new Error("Generator is already running");if(he==="completed"){if(Se==="throw")throw Fe;return ie()}for(K.method=Se,K.arg=Fe;;){var nt=K.delegate;if(nt){var lt=ve(nt,K);if(lt){if(lt===A)continue;return lt}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(he==="suspendedStart")throw he="completed",K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);he="executing";var Gt=b(V,ae,K);if(Gt.type==="normal"){if(he=K.done?"completed":"suspendedYield",Gt.arg===A)continue;return{value:Gt.arg,done:K.done}}Gt.type==="throw"&&(he="completed",K.method="throw",K.arg=Gt.arg)}}}function ve(V,ae){var K=ae.method,he=V.iterator[K];if(he===void 0)return ae.delegate=null,K==="throw"&&V.iterator.return&&(ae.method="return",ae.arg=void 0,ve(V,ae),ae.method==="throw")||K!=="return"&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+K+"' method")),A;var Se=b(he,V.iterator,ae.arg);if(Se.type==="throw")return ae.method="throw",ae.arg=Se.arg,ae.delegate=null,A;var Fe=Se.arg;return Fe?Fe.done?(ae[V.resultName]=Fe.value,ae.next=V.nextLoc,ae.method!=="return"&&(ae.method="next",ae.arg=void 0),ae.delegate=null,A):Fe:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,A)}function ke(V){var ae={tryLoc:V[0]};1 in V&&(ae.catchLoc=V[1]),2 in V&&(ae.finallyLoc=V[2],ae.afterLoc=V[3]),this.tryEntries.push(ae)}function Ae(V){var ae=V.completion||{};ae.type="normal",delete ae.arg,V.completion=ae}function be(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(ke,this),this.reset(!0)}function G(V){if(V){var ae=V[u];if(ae)return ae.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var K=-1,he=function Se(){for(;++K<V.length;)if(g.call(V,K))return Se.value=V[K],Se.done=!1,Se;return Se.value=void 0,Se.done=!0,Se};return he.next=he}}return{next:ie}}function ie(){return{value:void 0,done:!0}}return D.prototype=F,x(k,"constructor",{value:F,configurable:!0}),x(F,"constructor",{value:D,configurable:!0}),D.displayName=o(F,e,"GeneratorFunction"),M.isGeneratorFunction=function(V){var ae=typeof V=="function"&&V.constructor;return!!ae&&(ae===D||(ae.displayName||ae.name)==="GeneratorFunction")},M.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,F):(V.__proto__=F,o(V,e,"GeneratorFunction")),V.prototype=Object.create(k),V},M.awrap=function(V){return{__await:V}},de(H.prototype),o(H.prototype,t,function(){return this}),M.AsyncIterator=H,M.async=function(V,ae,K,he,Se){Se===void 0&&(Se=Promise);var Fe=new H(c(V,ae,K,he),Se);return M.isGeneratorFunction(ae)?Fe:Fe.next().then(function(nt){return nt.done?nt.value:Fe.next()})},de(k),o(k,e,"Generator"),o(k,u,function(){return this}),o(k,"toString",function(){return"[object Generator]"}),M.keys=function(V){var ae=Object(V),K=[];for(var he in ae)K.push(he);return K.reverse(),function Se(){for(;K.length;){var Fe=K.pop();if(Fe in ae)return Se.value=Fe,Se.done=!1,Se}return Se.done=!0,Se}},M.values=G,be.prototype={constructor:be,reset:function(ae){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ae),!ae)for(var K in this)K.charAt(0)==="t"&&g.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=void 0)},stop:function(){this.done=!0;var ae=this.tryEntries[0].completion;if(ae.type==="throw")throw ae.arg;return this.rval},dispatchException:function(ae){if(this.done)throw ae;var K=this;function he(pn,$n){return nt.type="throw",nt.arg=ae,K.next=pn,$n&&(K.method="next",K.arg=void 0),!!$n}for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Fe=this.tryEntries[Se],nt=Fe.completion;if(Fe.tryLoc==="root")return he("end");if(Fe.tryLoc<=this.prev){var lt=g.call(Fe,"catchLoc"),Gt=g.call(Fe,"finallyLoc");if(lt&&Gt){if(this.prev<Fe.catchLoc)return he(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return he(Fe.finallyLoc)}else if(lt){if(this.prev<Fe.catchLoc)return he(Fe.catchLoc,!0)}else{if(!Gt)throw new Error("try statement without catch or finally");if(this.prev<Fe.finallyLoc)return he(Fe.finallyLoc)}}}},abrupt:function(ae,K){for(var he=this.tryEntries.length-1;he>=0;--he){var Se=this.tryEntries[he];if(Se.tryLoc<=this.prev&&g.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var Fe=Se;break}}Fe&&(ae==="break"||ae==="continue")&&Fe.tryLoc<=K&&K<=Fe.finallyLoc&&(Fe=null);var nt=Fe?Fe.completion:{};return nt.type=ae,nt.arg=K,Fe?(this.method="next",this.next=Fe.finallyLoc,A):this.complete(nt)},complete:function(ae,K){if(ae.type==="throw")throw ae.arg;return ae.type==="break"||ae.type==="continue"?this.next=ae.arg:ae.type==="return"?(this.rval=this.arg=ae.arg,this.method="return",this.next="end"):ae.type==="normal"&&K&&(this.next=K),A},finish:function(ae){for(var K=this.tryEntries.length-1;K>=0;--K){var he=this.tryEntries[K];if(he.finallyLoc===ae)return this.complete(he.completion,he.afterLoc),Ae(he),A}},catch:function(ae){for(var K=this.tryEntries.length-1;K>=0;--K){var he=this.tryEntries[K];if(he.tryLoc===ae){var Se=he.completion;if(Se.type==="throw"){var Fe=Se.arg;Ae(he)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(ae,K,he){return this.delegate={iterator:G(ae),resultName:K,nextLoc:he},this.method==="next"&&(this.arg=void 0),A}},M}Ie.exports=p,Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},18698:function(Ie){function S(y){return Ie.exports=S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports,S(y)}Ie.exports=S,Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},64687:function(Ie,S,y){var E=y(17061)();Ie.exports=E;try{regeneratorRuntime=E}catch(p){typeof globalThis=="object"?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}},12444:function(Ie){function S(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}Ie.exports=S,Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},72004:function(Ie,S,y){var E=y(51883);function p(d,g){for(var x=0;x<g.length;x++){var v=g[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,E(v.key),v)}}function M(d,g,x){return g&&p(d.prototype,g),x&&p(d,x),Object.defineProperty(d,"prototype",{writable:!1}),d}Ie.exports=M,Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},53229:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return E}});function E(p,M,d,g,x){var v={};return Object.keys(g).forEach(function(u){v[u]=g[u]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=d.slice().reverse().reduce(function(u,t){return t(p,M,u)||u},v),x&&v.initializer!==void 0&&(v.value=v.initializer?v.initializer.call(x):void 0,v.initializer=void 0),v.initializer===void 0&&(Object.defineProperty(p,M,v),v=null),v}},73237:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return M}});var E=y(61120);function p(d,g){for(;!Object.prototype.hasOwnProperty.call(d,g)&&(d=(0,E.Z)(d),d!==null););return d}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(g,x,v){var u=p(g,x);if(u){var t=Object.getOwnPropertyDescriptor(u,x);return t.get?t.get.call(arguments.length<3?g:v):t.value}},M.apply(this,arguments)}},43269:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return E}});function E(p,M,d,g){d&&Object.defineProperty(p,M,{enumerable:d.enumerable,configurable:d.configurable,writable:d.writable,value:d.initializer?d.initializer.call(g):void 0})}},1449:function(Ie,S,y){"use strict";y.d(S,{DL:function(){return L},Ht:function(){return ue},Tu:function(){return o},tw:function(){return D},uf:function(){return b},yu:function(){return t},zL:function(){return g}});var E=63710088e-1,p={centimeters:E*100,centimetres:E*100,degrees:E/111325,feet:E*3.28084,inches:E*39.37,kilometers:E/1e3,kilometres:E/1e3,meters:E,metres:E,miles:E/1609.344,millimeters:E*1e3,millimetres:E*1e3,nauticalmiles:E/1852,radians:1,yards:E*1.0936},M={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/E,yards:1.0936133},d={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(V,ae,K){K===void 0&&(K={});var he={type:"Feature"};return(K.id===0||K.id)&&(he.id=K.id),K.bbox&&(he.bbox=K.bbox),he.properties=ae||{},he.geometry=V,he}function x(V,ae,K){switch(K===void 0&&(K={}),V){case"Point":return v(ae).geometry;case"LineString":return o(ae).geometry;case"Polygon":return t(ae).geometry;case"MultiPoint":return w(ae).geometry;case"MultiLineString":return A(ae).geometry;case"MultiPolygon":return D(ae).geometry;default:throw new Error(V+" is invalid")}}function v(V,ae,K){if(K===void 0&&(K={}),!V)throw new Error("coordinates is required");if(!Array.isArray(V))throw new Error("coordinates must be an Array");if(V.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ae(V[0])||!Ae(V[1]))throw new Error("coordinates must contain numbers");var he={type:"Point",coordinates:V};return g(he,ae,K)}function u(V,ae,K){return K===void 0&&(K={}),b(V.map(function(he){return v(he,ae)}),K)}function t(V,ae,K){K===void 0&&(K={});for(var he=0,Se=V;he<Se.length;he++){var Fe=Se[he];if(Fe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var nt=0;nt<Fe[Fe.length-1].length;nt++)if(Fe[Fe.length-1][nt]!==Fe[0][nt])throw new Error("First and last Position are not equivalent.")}var lt={type:"Polygon",coordinates:V};return g(lt,ae,K)}function e(V,ae,K){return K===void 0&&(K={}),b(V.map(function(he){return t(he,ae)}),K)}function o(V,ae,K){if(K===void 0&&(K={}),V.length<2)throw new Error("coordinates must be an array of two or more positions");var he={type:"LineString",coordinates:V};return g(he,ae,K)}function c(V,ae,K){return K===void 0&&(K={}),b(V.map(function(he){return o(he,ae)}),K)}function b(V,ae){ae===void 0&&(ae={});var K={type:"FeatureCollection"};return ae.id&&(K.id=ae.id),ae.bbox&&(K.bbox=ae.bbox),K.features=V,K}function A(V,ae,K){K===void 0&&(K={});var he={type:"MultiLineString",coordinates:V};return g(he,ae,K)}function w(V,ae,K){K===void 0&&(K={});var he={type:"MultiPoint",coordinates:V};return g(he,ae,K)}function D(V,ae,K){K===void 0&&(K={});var he={type:"MultiPolygon",coordinates:V};return g(he,ae,K)}function F(V,ae,K){K===void 0&&(K={});var he={type:"GeometryCollection",geometries:V};return g(he,ae,K)}function Z(V,ae){if(ae===void 0&&(ae=0),ae&&!(ae>=0))throw new Error("precision must be a positive number");var K=Math.pow(10,ae||0);return Math.round(V*K)/K}function L(V,ae){ae===void 0&&(ae="kilometers");var K=p[ae];if(!K)throw new Error(ae+" units is invalid");return V*K}function W(V,ae){ae===void 0&&(ae="kilometers");var K=p[ae];if(!K)throw new Error(ae+" units is invalid");return V/K}function k(V,ae){return H(W(V,ae))}function de(V){var ae=V%360;return ae<0&&(ae+=360),ae}function H(V){var ae=V%(2*Math.PI);return ae*180/Math.PI}function ue(V){var ae=V%360;return ae*Math.PI/180}function ve(V,ae,K){if(ae===void 0&&(ae="kilometers"),K===void 0&&(K="kilometers"),!(V>=0))throw new Error("length must be a positive number");return L(W(V,ae),K)}function ke(V,ae,K){if(ae===void 0&&(ae="meters"),K===void 0&&(K="kilometers"),!(V>=0))throw new Error("area must be a positive number");var he=d[ae];if(!he)throw new Error("invalid original units");var Se=d[K];if(!Se)throw new Error("invalid final units");return V/he*Se}function Ae(V){return!isNaN(V)&&V!==null&&!Array.isArray(V)}function be(V){return!!V&&V.constructor===Object}function G(V){if(!V)throw new Error("bbox is required");if(!Array.isArray(V))throw new Error("bbox must be an Array");if(V.length!==4&&V.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");V.forEach(function(ae){if(!Ae(ae))throw new Error("bbox must only contain numbers")})}function ie(V){if(!V)throw new Error("id is required");if(["string","number"].indexOf(typeof V)===-1)throw new Error("id must be a number or a string")}},39034:function(Ie,S,y){"use strict";y.d(S,{nG:function(){return o},pZ:function(){return p}});var E=y(1449);function p(L,W,k){if(L!==null)for(var de,H,ue,ve,ke,Ae,be,G=0,ie=0,V,ae=L.type,K=ae==="FeatureCollection",he=ae==="Feature",Se=K?L.features.length:1,Fe=0;Fe<Se;Fe++){be=K?L.features[Fe].geometry:he?L.geometry:L,V=be?be.type==="GeometryCollection":!1,ke=V?be.geometries.length:1;for(var nt=0;nt<ke;nt++){var lt=0,Gt=0;if(ve=V?be.geometries[nt]:be,ve!==null){Ae=ve.coordinates;var pn=ve.type;switch(G=k&&(pn==="Polygon"||pn==="MultiPolygon")?1:0,pn){case null:break;case"Point":if(W(Ae,ie,Fe,lt,Gt)===!1)return!1;ie++,lt++;break;case"LineString":case"MultiPoint":for(de=0;de<Ae.length;de++){if(W(Ae[de],ie,Fe,lt,Gt)===!1)return!1;ie++,pn==="MultiPoint"&&lt++}pn==="LineString"&&lt++;break;case"Polygon":case"MultiLineString":for(de=0;de<Ae.length;de++){for(H=0;H<Ae[de].length-G;H++){if(W(Ae[de][H],ie,Fe,lt,Gt)===!1)return!1;ie++}pn==="MultiLineString"&&lt++,pn==="Polygon"&&Gt++}pn==="Polygon"&&lt++;break;case"MultiPolygon":for(de=0;de<Ae.length;de++){for(Gt=0,H=0;H<Ae[de].length;H++){for(ue=0;ue<Ae[de][H].length-G;ue++){if(W(Ae[de][H][ue],ie,Fe,lt,Gt)===!1)return!1;ie++}Gt++}lt++}break;case"GeometryCollection":for(de=0;de<ve.geometries.length;de++)if(p(ve.geometries[de],W,k)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(L,W,k,de){var H=k;return p(L,function(ue,ve,ke,Ae,be){ve===0&&k===void 0?H=ue:H=W(H,ue,ve,ke,Ae,be)},de),H}function d(L,W){var k;switch(L.type){case"FeatureCollection":for(k=0;k<L.features.length&&W(L.features[k].properties,k)!==!1;k++);break;case"Feature":W(L.properties,0);break}}function g(L,W,k){var de=k;return d(L,function(H,ue){ue===0&&k===void 0?de=H:de=W(de,H,ue)}),de}function x(L,W){if(L.type==="Feature")W(L,0);else if(L.type==="FeatureCollection")for(var k=0;k<L.features.length&&W(L.features[k],k)!==!1;k++);}function v(L,W,k){var de=k;return x(L,function(H,ue){ue===0&&k===void 0?de=H:de=W(de,H,ue)}),de}function u(L){var W=[];return p(L,function(k){W.push(k)}),W}function t(L,W){var k,de,H,ue,ve,ke,Ae,be,G,ie,V=0,ae=L.type==="FeatureCollection",K=L.type==="Feature",he=ae?L.features.length:1;for(k=0;k<he;k++){for(ke=ae?L.features[k].geometry:K?L.geometry:L,be=ae?L.features[k].properties:K?L.properties:{},G=ae?L.features[k].bbox:K?L.bbox:void 0,ie=ae?L.features[k].id:K?L.id:void 0,Ae=ke?ke.type==="GeometryCollection":!1,ve=Ae?ke.geometries.length:1,H=0;H<ve;H++){if(ue=Ae?ke.geometries[H]:ke,ue===null){if(W(null,V,be,G,ie)===!1)return!1;continue}switch(ue.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(W(ue,V,be,G,ie)===!1)return!1;break}case"GeometryCollection":{for(de=0;de<ue.geometries.length;de++)if(W(ue.geometries[de],V,be,G,ie)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function e(L,W,k){var de=k;return t(L,function(H,ue,ve,ke,Ae){ue===0&&k===void 0?de=H:de=W(de,H,ue,ve,ke,Ae)}),de}function o(L,W){t(L,function(k,de,H,ue,ve){var ke=k===null?null:k.type;switch(ke){case null:case"Point":case"LineString":case"Polygon":return W((0,E.zL)(k,H,{bbox:ue,id:ve}),de,0)===!1?!1:void 0}var Ae;switch(ke){case"MultiPoint":Ae="Point";break;case"MultiLineString":Ae="LineString";break;case"MultiPolygon":Ae="Polygon";break}for(var be=0;be<k.coordinates.length;be++){var G=k.coordinates[be],ie={type:Ae,coordinates:G};if(W((0,E.zL)(ie,H),de,be)===!1)return!1}})}function c(L,W,k){var de=k;return o(L,function(H,ue,ve){ue===0&&ve===0&&k===void 0?de=H:de=W(de,H,ue,ve)}),de}function b(L,W){o(L,function(k,de,H){var ue=0;if(k.geometry){var ve=k.geometry.type;if(!(ve==="Point"||ve==="MultiPoint")){var ke,Ae=0,be=0,G=0;if(p(k,function(ie,V,ae,K,he){if(ke===void 0||de>Ae||K>be||he>G){ke=ie,Ae=de,be=K,G=he,ue=0;return}var Se=lineString([ke,ie],k.properties);if(W(Se,de,H,he,ue)===!1)return!1;ue++,ke=ie})===!1)return!1}}})}function A(L,W,k){var de=k,H=!1;return b(L,function(ue,ve,ke,Ae,be){H===!1&&k===void 0?de=ue:de=W(de,ue,ve,ke,Ae,be),H=!0}),de}function w(L,W){if(!L)throw new Error("geojson is required");o(L,function(k,de,H){if(k.geometry!==null){var ue=k.geometry.type,ve=k.geometry.coordinates;switch(ue){case"LineString":if(W(k,de,H,0,0)===!1)return!1;break;case"Polygon":for(var ke=0;ke<ve.length;ke++)if(W(lineString(ve[ke],k.properties),de,H,ke)===!1)return!1;break}}})}function D(L,W,k){var de=k;return w(L,function(H,ue,ve,ke){ue===0&&k===void 0?de=H:de=W(de,H,ue,ve,ke)}),de}function F(L,W){if(W=W||{},!isObject(W))throw new Error("options is invalid");var k=W.featureIndex||0,de=W.multiFeatureIndex||0,H=W.geometryIndex||0,ue=W.segmentIndex||0,ve=W.properties,ke;switch(L.type){case"FeatureCollection":k<0&&(k=L.features.length+k),ve=ve||L.features[k].properties,ke=L.features[k].geometry;break;case"Feature":ve=ve||L.properties,ke=L.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ke=L;break;default:throw new Error("geojson is invalid")}if(ke===null)return null;var Ae=ke.coordinates;switch(ke.type){case"Point":case"MultiPoint":return null;case"LineString":return ue<0&&(ue=Ae.length+ue-1),lineString([Ae[ue],Ae[ue+1]],ve,W);case"Polygon":return H<0&&(H=Ae.length+H),ue<0&&(ue=Ae[H].length+ue-1),lineString([Ae[H][ue],Ae[H][ue+1]],ve,W);case"MultiLineString":return de<0&&(de=Ae.length+de),ue<0&&(ue=Ae[de].length+ue-1),lineString([Ae[de][ue],Ae[de][ue+1]],ve,W);case"MultiPolygon":return de<0&&(de=Ae.length+de),H<0&&(H=Ae[de].length+H),ue<0&&(ue=Ae[de][H].length-ue-1),lineString([Ae[de][H][ue],Ae[de][H][ue+1]],ve,W)}throw new Error("geojson is invalid")}function Z(L,W){if(W=W||{},!isObject(W))throw new Error("options is invalid");var k=W.featureIndex||0,de=W.multiFeatureIndex||0,H=W.geometryIndex||0,ue=W.coordIndex||0,ve=W.properties,ke;switch(L.type){case"FeatureCollection":k<0&&(k=L.features.length+k),ve=ve||L.features[k].properties,ke=L.features[k].geometry;break;case"Feature":ve=ve||L.properties,ke=L.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ke=L;break;default:throw new Error("geojson is invalid")}if(ke===null)return null;var Ae=ke.coordinates;switch(ke.type){case"Point":return point(Ae,ve,W);case"MultiPoint":return de<0&&(de=Ae.length+de),point(Ae[de],ve,W);case"LineString":return ue<0&&(ue=Ae.length+ue),point(Ae[ue],ve,W);case"Polygon":return H<0&&(H=Ae.length+H),ue<0&&(ue=Ae[H].length+ue),point(Ae[H][ue],ve,W);case"MultiLineString":return de<0&&(de=Ae.length+de),ue<0&&(ue=Ae[de].length+ue),point(Ae[de][ue],ve,W);case"MultiPolygon":return de<0&&(de=Ae.length+de),H<0&&(H=Ae[de].length+H),ue<0&&(ue=Ae[de][H].length-ue),point(Ae[de][H][ue],ve,W)}throw new Error("geojson is invalid")}},69826:function(Ie,S,y){"use strict";y.d(S,{Z:function(){return ue}});function E(G,ie){let V=0;if(ie===void 0)for(let ae of G)ae!=null&&(ae=+ae)>=ae&&++V;else{let ae=-1;for(let K of G)(K=ie(K,++ae,G))!=null&&(K=+K)>=K&&++V}return V}function p(G){return Math.max(1,Math.ceil(Math.log(E(G))/Math.LN2)+1)}function M(G,ie){let V,ae;if(ie===void 0)for(const K of G)K!=null&&(V===void 0?K>=K&&(V=ae=K):(V>K&&(V=K),ae<K&&(ae=K)));else{let K=-1;for(let he of G)(he=ie(he,++K,G))!=null&&(V===void 0?he>=he&&(V=ae=he):(V>he&&(V=he),ae<he&&(ae=he)))}return[V,ae]}const d=Math.sqrt(50),g=Math.sqrt(10),x=Math.sqrt(2);function v(G,ie,V){const ae=(ie-G)/Math.max(0,V),K=Math.floor(Math.log10(ae)),he=ae/Math.pow(10,K),Se=he>=d?10:he>=g?5:he>=x?2:1;let Fe,nt,lt;return K<0?(lt=Math.pow(10,-K)/Se,Fe=Math.round(G*lt),nt=Math.round(ie*lt),Fe/lt<G&&++Fe,nt/lt>ie&&--nt,lt=-lt):(lt=Math.pow(10,K)*Se,Fe=Math.round(G/lt),nt=Math.round(ie/lt),Fe*lt<G&&++Fe,nt*lt>ie&&--nt),nt<Fe&&.5<=V&&V<2?v(G,ie,V*2):[Fe,nt,lt]}function u(G,ie,V){if(ie=+ie,G=+G,V=+V,!(V>0))return[];if(G===ie)return[G];const ae=ie<G,[K,he,Se]=ae?v(ie,G,V):v(G,ie,V);if(!(he>=K))return[];const Fe=he-K+1,nt=new Array(Fe);if(ae)if(Se<0)for(let lt=0;lt<Fe;++lt)nt[lt]=(he-lt)/-Se;else for(let lt=0;lt<Fe;++lt)nt[lt]=(he-lt)*Se;else if(Se<0)for(let lt=0;lt<Fe;++lt)nt[lt]=(K+lt)/-Se;else for(let lt=0;lt<Fe;++lt)nt[lt]=(K+lt)*Se;return nt}function t(G,ie,V){return ie=+ie,G=+G,V=+V,v(G,ie,V)[2]}function e(G,ie,V){ie=+ie,G=+G,V=+V;const ae=ie<G,K=ae?t(ie,G,V):t(G,ie,V);return(ae?-1:1)*(K<0?1/-K:K)}function o(G,ie,V){let ae;for(;;){const K=t(G,ie,V);if(K===ae||K===0||!isFinite(K))return[G,ie];K>0?(G=Math.floor(G/K)*K,ie=Math.ceil(ie/K)*K):K<0&&(G=Math.ceil(G*K)/K,ie=Math.floor(ie*K)/K),ae=K}}var c=Array.prototype,b=c.slice;function A(G,ie){return G-ie}function w(G){for(var ie=0,V=G.length,ae=G[V-1][1]*G[0][0]-G[V-1][0]*G[0][1];++ie<V;)ae+=G[ie-1][1]*G[ie][0]-G[ie-1][0]*G[ie][1];return ae}var D=G=>()=>G;function F(G,ie){for(var V=-1,ae=ie.length,K;++V<ae;)if(K=Z(G,ie[V]))return K;return 0}function Z(G,ie){for(var V=ie[0],ae=ie[1],K=-1,he=0,Se=G.length,Fe=Se-1;he<Se;Fe=he++){var nt=G[he],lt=nt[0],Gt=nt[1],pn=G[Fe],$n=pn[0],Ln=pn[1];if(L(nt,pn,ie))return 0;Gt>ae!=Ln>ae&&V<($n-lt)*(ae-Gt)/(Ln-Gt)+lt&&(K=-K)}return K}function L(G,ie,V){var ae;return W(G,ie,V)&&k(G[ae=+(G[0]===ie[0])],V[ae],ie[ae])}function W(G,ie,V){return(ie[0]-G[0])*(V[1]-G[1])===(V[0]-G[0])*(ie[1]-G[1])}function k(G,ie,V){return G<=ie&&ie<=V||V<=ie&&ie<=G}function de(){}var H=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ue(){var G=1,ie=1,V=p,ae=nt;function K(lt){var Gt=V(lt);if(Array.isArray(Gt))Gt=Gt.slice().sort(A);else{const pn=M(lt,ve);for(Gt=u(...o(pn[0],pn[1],Gt),Gt);Gt[Gt.length-1]>=pn[1];)Gt.pop();for(;Gt[1]<pn[0];)Gt.shift()}return Gt.map(pn=>he(lt,pn))}function he(lt,Gt){const pn=Gt==null?NaN:+Gt;if(isNaN(pn))throw new Error(`invalid value: ${Gt}`);var $n=[],Ln=[];return Se(lt,pn,function(st){ae(st,lt,pn),w(st)>0?$n.push([st]):Ln.push(st)}),Ln.forEach(function(st){for(var xt=0,tn=$n.length,Un;xt<tn;++xt)if(F((Un=$n[xt])[0],st)!==-1){Un.push(st);return}}),{type:"MultiPolygon",value:Gt,coordinates:$n}}function Se(lt,Gt,pn){var $n=new Array,Ln=new Array,st,xt,tn,Un,We,Yt;for(st=xt=-1,Un=ke(lt[0],Gt),H[Un<<1].forEach(Ze);++st<G-1;)tn=Un,Un=ke(lt[st+1],Gt),H[tn|Un<<1].forEach(Ze);for(H[Un<<0].forEach(Ze);++xt<ie-1;){for(st=-1,Un=ke(lt[xt*G+G],Gt),We=ke(lt[xt*G],Gt),H[Un<<1|We<<2].forEach(Ze);++st<G-1;)tn=Un,Un=ke(lt[xt*G+G+st+1],Gt),Yt=We,We=ke(lt[xt*G+st+1],Gt),H[tn|Un<<1|We<<2|Yt<<3].forEach(Ze);H[Un|We<<3].forEach(Ze)}for(st=-1,We=lt[xt*G]>=Gt,H[We<<2].forEach(Ze);++st<G-1;)Yt=We,We=ke(lt[xt*G+st+1],Gt),H[We<<2|Yt<<3].forEach(Ze);H[We<<3].forEach(Ze);function Ze(Pe){var ze=[Pe[0][0]+st,Pe[0][1]+xt],ht=[Pe[1][0]+st,Pe[1][1]+xt],P=Fe(ze),ne=Fe(ht),_e,oe;(_e=Ln[P])?(oe=$n[ne])?(delete Ln[_e.end],delete $n[oe.start],_e===oe?(_e.ring.push(ht),pn(_e.ring)):$n[_e.start]=Ln[oe.end]={start:_e.start,end:oe.end,ring:_e.ring.concat(oe.ring)}):(delete Ln[_e.end],_e.ring.push(ht),Ln[_e.end=ne]=_e):(_e=$n[ne])?(oe=Ln[P])?(delete $n[_e.start],delete Ln[oe.end],_e===oe?(_e.ring.push(ht),pn(_e.ring)):$n[oe.start]=Ln[_e.end]={start:oe.start,end:_e.end,ring:oe.ring.concat(_e.ring)}):(delete $n[_e.start],_e.ring.unshift(ze),$n[_e.start=P]=_e):$n[P]=Ln[ne]={start:P,end:ne,ring:[ze,ht]}}}function Fe(lt){return lt[0]*2+lt[1]*(G+1)*4}function nt(lt,Gt,pn){lt.forEach(function($n){var Ln=$n[0],st=$n[1],xt=Ln|0,tn=st|0,Un=Ae(Gt[tn*G+xt]);Ln>0&&Ln<G&&xt===Ln&&($n[0]=be(Ln,Ae(Gt[tn*G+xt-1]),Un,pn)),st>0&&st<ie&&tn===st&&($n[1]=be(st,Ae(Gt[(tn-1)*G+xt]),Un,pn))})}return K.contour=he,K.size=function(lt){if(!arguments.length)return[G,ie];var Gt=Math.floor(lt[0]),pn=Math.floor(lt[1]);if(!(Gt>=0&&pn>=0))throw new Error("invalid size");return G=Gt,ie=pn,K},K.thresholds=function(lt){return arguments.length?(V=typeof lt=="function"?lt:Array.isArray(lt)?D(b.call(lt)):D(lt),K):V},K.smooth=function(lt){return arguments.length?(ae=lt?nt:de,K):ae===nt},K}function ve(G){return isFinite(G)?G:NaN}function ke(G,ie){return G==null?!1:+G>=ie}function Ae(G){return G==null||isNaN(G=+G)?-1/0:G}function be(G,ie,V,ae){const K=ae-ie,he=V-ie,Se=isFinite(K)||isFinite(he)?K/he:Math.sign(K)/Math.sign(he);return isNaN(Se)?G:G+Se-.5}},781:function(Ie,S,y){"use strict";var E=y(54098);class p{constructor(d){d&&console.error(["No arguments accepted to npyjs constructor.","For usage, go to https://github.com/jhuapl-boss/npyjs."].join(" ")),this.dtypes={"<u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"|u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"<u2":{name:"uint16",size:16,arrayConstructor:Uint16Array},"|i1":{name:"int8",size:8,arrayConstructor:Int8Array},"<i2":{name:"int16",size:16,arrayConstructor:Int16Array},"<u4":{name:"uint32",size:32,arrayConstructor:Int32Array},"<i4":{name:"int32",size:32,arrayConstructor:Int32Array},"<u8":{name:"uint64",size:64,arrayConstructor:BigUint64Array},"<i8":{name:"int64",size:64,arrayConstructor:BigInt64Array},"<f4":{name:"float32",size:32,arrayConstructor:Float32Array},"<f8":{name:"float64",size:64,arrayConstructor:Float64Array}}}parse(d){const g=new DataView(d.slice(8,10)).getUint8(0),x=10+g,v=new TextDecoder("utf-8").decode(new Uint8Array(d.slice(10,10+g))),u=JSON.parse(v.toLowerCase().replace(/'/g,'"').replace("(","[").replace(/,*\),*/g,"]")),t=u.shape,e=this.dtypes[u.descr],o=new e.arrayConstructor(d,x);return{dtype:e.name,data:o,shape:t,fortranOrder:u.fortran_order}}load(d,g,x){return Ga(this,null,function*(){x=x||{};const u=yield(yield E(d,hg({},x))).arrayBuffer(),t=this.parse(u);return g?g(t):t})}}S.Z=p}}]);
}());